(function(){const d=document.createElement("link").relList;if(d&&d.supports&&d.supports("modulepreload"))return;for(const E of document.querySelectorAll('link[rel="modulepreload"]'))x(E);new MutationObserver(E=>{for(const D of E)if(D.type==="childList")for(const L of D.addedNodes)L.tagName==="LINK"&&L.rel==="modulepreload"&&x(L)}).observe(document,{childList:!0,subtree:!0});function g(E){const D={};return E.integrity&&(D.integrity=E.integrity),E.referrerPolicy&&(D.referrerPolicy=E.referrerPolicy),E.crossOrigin==="use-credentials"?D.credentials="include":E.crossOrigin==="anonymous"?D.credentials="omit":D.credentials="same-origin",D}function x(E){if(E.ep)return;E.ep=!0;const D=g(E);fetch(E.href,D)}})();const an="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(an);let er=!1,ln=!1;function cn(){er=!0}cn();const ui=1,fi=2,Yi=4,hn=8,dn=16,un=1,fn=2,_n=4,vn=8,pn=16,gn=1,mn=2,Sn=4,Qi=1,bn=2,Ve=Symbol(),wn="http://www.w3.org/1999/xhtml",Li=!1;var tr=Array.isArray,Cn=Array.prototype.indexOf,_i=Array.from,yn=Object.defineProperty,Jt=Object.getOwnPropertyDescriptor,es=Object.getOwnPropertyDescriptors,En=Object.prototype,xn=Array.prototype,vi=Object.getPrototypeOf,Di=Object.isExtensible;function kn(n){return typeof n=="function"}const xt=()=>{};function Ln(n){return n()}function Dr(n){for(var d=0;d<n.length;d++)n[d]()}function Ri(n,d){if(Array.isArray(n))return n;if(!(Symbol.iterator in n))return Array.from(n);const g=[];for(const x of n)if(g.push(x),g.length===d)break;return g}const ot=2,pi=4,mr=8,Nr=16,Mt=32,rr=64,gi=128,nt=256,Rr=512,rt=1024,Bt=2048,zt=4096,Rt=8192,zr=16384,mi=32768,Wr=65536,Ai=1<<17,Dn=1<<18,ts=1<<19,ni=1<<20,Si=1<<21,At=Symbol("$state"),Rn=Symbol("legacy props"),An=Symbol(""),rs=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function is(n){return n===this.v}function ss(n,d){return n!=n?d==d:n!==d||n!==null&&typeof n=="object"||typeof n=="function"}function ns(n){return!ss(n,this.v)}function Tn(n){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Bn(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Mn(n){throw new Error("https://svelte.dev/e/effect_orphan")}function On(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function In(n){throw new Error("https://svelte.dev/e/lifecycle_legacy_only")}function Pn(n){throw new Error("https://svelte.dev/e/props_invalid_value")}function Hn(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Fn(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Nn(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function Ur(n){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}let xe=null;function Ti(n){xe=n}function Ye(n,d=!1,g){xe={p:xe,c:null,e:null,s:n,x:null,l:null},er&&!d&&(xe.l={s:null,u:null,r1:[],r2:hr(!1)})}function Qe(n){var d=xe,g=d.e;if(g!==null){d.e=null;for(var x of g)_s(x)}return xe=d.p,{}}function Sr(){return!er||xe!==null&&xe.l===null}function Zt(n){if(typeof n!="object"||n===null||At in n)return n;const d=vi(n);if(d!==En&&d!==xn)return n;var g=new Map,x=tr(n),E=Ot(0),D=Kt,L=r=>{if(Kt===D)return r();var o=De,c=Kt;Nt(null),Ii(D);var f=r();return Nt(o),Ii(c),f};return x&&g.set("length",Ot(n.length)),new Proxy(n,{defineProperty(r,o,c){(!("value"in c)||c.configurable===!1||c.enumerable===!1||c.writable===!1)&&Hn();var f=g.get(o);return f===void 0?f=L(()=>{var l=Ot(c.value);return g.set(o,l),l}):Y(f,c.value,!0),!0},deleteProperty(r,o){var c=g.get(o);if(c===void 0){if(o in r){const a=L(()=>Ot(Ve));g.set(o,a),Qr(E)}}else{if(x&&typeof o=="string"){var f=g.get("length"),l=Number(o);Number.isInteger(l)&&l<f.v&&Y(f,l)}Y(c,Ve),Qr(E)}return!0},get(r,o,c){if(o===At)return n;var f=g.get(o),l=o in r;if(f===void 0&&(!l||Jt(r,o)?.writable)&&(f=L(()=>{var _=Zt(l?r[o]:Ve),S=Ot(_);return S}),g.set(o,f)),f!==void 0){var a=b(f);return a===Ve?void 0:a}return Reflect.get(r,o,c)},getOwnPropertyDescriptor(r,o){var c=Reflect.getOwnPropertyDescriptor(r,o);if(c&&"value"in c){var f=g.get(o);f&&(c.value=b(f))}else if(c===void 0){var l=g.get(o),a=l?.v;if(l!==void 0&&a!==Ve)return{enumerable:!0,configurable:!0,value:a,writable:!0}}return c},has(r,o){if(o===At)return!0;var c=g.get(o),f=c!==void 0&&c.v!==Ve||Reflect.has(r,o);if(c!==void 0||ye!==null&&(!f||Jt(r,o)?.writable)){c===void 0&&(c=L(()=>{var a=f?Zt(r[o]):Ve,_=Ot(a);return _}),g.set(o,c));var l=b(c);if(l===Ve)return!1}return f},set(r,o,c,f){var l=g.get(o),a=o in r;if(x&&o==="length")for(var _=c;_<l.v;_+=1){var S=g.get(_+"");S!==void 0?Y(S,Ve):_ in r&&(S=L(()=>Ot(Ve)),g.set(_+"",S))}if(l===void 0)(!a||Jt(r,o)?.writable)&&(l=L(()=>Ot(void 0)),Y(l,Zt(c)),g.set(o,l));else{a=l.v!==Ve;var u=L(()=>Zt(c));Y(l,u)}var t=Reflect.getOwnPropertyDescriptor(r,o);if(t?.set&&t.set.call(f,c),!a){if(x&&typeof o=="string"){var s=g.get("length"),e=Number(o);Number.isInteger(e)&&e>=s.v&&Y(s,e+1)}Qr(E)}return!0},ownKeys(r){b(E);var o=Reflect.ownKeys(r).filter(l=>{var a=g.get(l);return a===void 0||a.v!==Ve});for(var[c,f]of g)f.v!==Ve&&!(c in r)&&o.push(c);return o},setPrototypeOf(){Fn()}})}function Bi(n){try{if(n!==null&&typeof n=="object"&&At in n)return n[At]}catch{}return n}function zn(n,d){return Object.is(Bi(n),Bi(d))}function br(n){var d=ot|Bt,g=De!==null&&(De.f&ot)!==0?De:null;return ye===null||g!==null&&(g.f&nt)!==0?d|=nt:ye.f|=ts,{ctx:xe,deps:null,effects:null,equals:is,f:d,fn:n,reactions:null,rv:0,v:Ve,wv:0,parent:g??ye,ac:null}}function Mi(n){const d=br(n);return Cs(d),d}function fe(n){const d=br(n);return d.equals=ns,d}function os(n){var d=n.effects;if(d!==null){n.effects=null;for(var g=0;g<d.length;g+=1)Ht(d[g])}}function Wn(n){for(var d=n.parent;d!==null;){if((d.f&ot)===0)return d;d=d.parent}return null}function bi(n){var d,g=ye;Yt(Wn(n));try{os(n),d=xs(n)}finally{Yt(g)}return d}function as(n){var d=bi(n);if(n.equals(d)||(n.v=d,n.wv=ys()),!Ft){var g=(Pt||(n.f&nt)!==0)&&n.deps!==null?zt:rt;mt(n,g)}}const jt=new Map;function hr(n,d){var g={f:0,v:n,reactions:null,equals:is,rv:0,wv:0};return g}function Ot(n,d){const g=hr(n);return Cs(g),g}function le(n,d=!1,g=!0){const x=hr(n);return d||(x.equals=ns),er&&g&&xe!==null&&xe.l!==null&&(xe.l.s??=[]).push(x),x}function Yr(n,d){return Y(n,j(()=>b(n))),d}function Y(n,d,g=!1){De!==null&&(!wt||(De.f&Ai)!==0)&&Sr()&&(De.f&(ot|Nr|Ai))!==0&&!Tt?.includes(n)&&Nn();let x=g?Zt(d):d;return Ar(n,x)}function Ar(n,d){if(!n.equals(d)){var g=n.v;Ft?jt.set(n,d):jt.set(n,g),n.v=d,(n.f&ot)!==0&&((n.f&Bt)!==0&&bi(n),mt(n,(n.f&nt)===0?rt:zt)),n.wv=ys(),ls(n,Bt),Sr()&&ye!==null&&(ye.f&rt)!==0&&(ye.f&(Mt|rr))===0&&(ht===null?eo([n]):ht.push(n))}return d}function Qr(n){Y(n,n.v+1)}function ls(n,d){var g=n.reactions;if(g!==null)for(var x=Sr(),E=g.length,D=0;D<E;D++){var L=g[D],r=L.f;(r&Bt)===0&&(!x&&L===ye||(mt(L,d),(r&(rt|nt))!==0&&((r&ot)!==0?ls(L,zt):Gr(L))))}}function Un(){console.warn("https://svelte.dev/e/select_multiple_invalid_value")}let $n=!1;var Tr,cs,hs,ds;function jn(){if(Tr===void 0){Tr=window,cs=/Firefox/.test(navigator.userAgent);var n=Element.prototype,d=Node.prototype,g=Text.prototype;hs=Jt(d,"firstChild").get,ds=Jt(d,"nextSibling").get,Di(n)&&(n.__click=void 0,n.__className=void 0,n.__attributes=null,n.__style=void 0,n.__e=void 0),Di(g)&&(g.__t=void 0)}}function $r(n=""){return document.createTextNode(n)}function kt(n){return hs.call(n)}function jr(n){return ds.call(n)}function P(n,d){return kt(n)}function Oe(n,d){{var g=kt(n);return g instanceof Comment&&g.data===""?jr(g):g}}function U(n,d=1,g=!1){let x=n;for(;d--;)x=jr(x);return x}function qn(n){n.textContent=""}function us(n){ye===null&&De===null&&Mn(),De!==null&&(De.f&nt)!==0&&ye===null&&Bn(),Ft&&Tn()}function Kn(n,d){var g=d.last;g===null?d.last=d.first=n:(g.next=n,n.prev=g,d.last=n)}function Wt(n,d,g,x=!0){var E=ye,D={ctx:xe,deps:null,nodes_start:null,nodes_end:null,f:n|Bt,first:null,fn:d,last:null,next:null,parent:E,b:E&&E.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(g)try{Vr(D),D.f|=mi}catch(o){throw Ht(D),o}else d!==null&&Gr(D);var L=g&&D.deps===null&&D.first===null&&D.nodes_start===null&&D.teardown===null&&(D.f&(ts|gi))===0;if(!L&&x&&(E!==null&&Kn(D,E),De!==null&&(De.f&ot)!==0)){var r=De;(r.effects??=[]).push(D)}return D}function fs(n){const d=Wt(mr,null,!1);return mt(d,rt),d.teardown=n,d}function oi(n){if(us(),!De&&ye&&(ye.f&Mt)!==0){var d=xe;(d.e??=[]).push(n)}else return _s(n)}function _s(n){return Wt(pi|Si,n,!1)}function Vn(n){return us(),Wt(mr|Si,n,!0)}function Gn(n){const d=Wt(rr,n,!0);return(g={})=>new Promise(x=>{g.outro?Br(d,()=>{Ht(d),x(void 0)}):(Ht(d),x(void 0))})}function wi(n){return Wt(pi,n,!1)}function Ct(n,d){var g=xe,x={effect:null,ran:!1};g.l.r1.push(x),x.effect=qr(()=>{n(),!x.ran&&(x.ran=!0,Y(g.l.r2,!0),j(d))})}function wr(){var n=xe;qr(()=>{if(b(n.l.r2)){for(var d of n.l.r1){var g=d.effect;(g.f&rt)!==0&&mt(g,zt),Cr(g)&&Vr(g),d.ran=!1}n.l.r2.v=!1}})}function qr(n){return Wt(mr,n,!0)}function oe(n,d=[],g=br){const x=d.map(g);return Ci(()=>n(...x.map(b)))}function Ci(n,d=0){var g=Wt(mr|Nr|d,n,!0);return g}function dr(n,d=!0){return Wt(mr|Mt,n,!0,d)}function vs(n){var d=n.teardown;if(d!==null){const g=Ft,x=De;Oi(!0),Nt(null);try{d.call(null)}finally{Oi(g),Nt(x)}}}function ps(n,d=!1){var g=n.first;for(n.first=n.last=null;g!==null;){g.ac?.abort(rs);var x=g.next;(g.f&rr)!==0?g.parent=null:Ht(g,d),g=x}}function Xn(n){for(var d=n.first;d!==null;){var g=d.next;(d.f&Mt)===0&&Ht(d),d=g}}function Ht(n,d=!0){var g=!1;(d||(n.f&Dn)!==0)&&n.nodes_start!==null&&n.nodes_end!==null&&(Zn(n.nodes_start,n.nodes_end),g=!0),ps(n,d&&!g),Ir(n,0),mt(n,zr);var x=n.transitions;if(x!==null)for(const D of x)D.stop();vs(n);var E=n.parent;E!==null&&E.first!==null&&gs(n),n.next=n.prev=n.teardown=n.ctx=n.deps=n.fn=n.nodes_start=n.nodes_end=n.ac=null}function Zn(n,d){for(;n!==null;){var g=n===d?null:jr(n);n.remove(),n=g}}function gs(n){var d=n.parent,g=n.prev,x=n.next;g!==null&&(g.next=x),x!==null&&(x.prev=g),d!==null&&(d.first===n&&(d.first=x),d.last===n&&(d.last=g))}function Br(n,d){var g=[];yi(n,g,!0),ms(g,()=>{Ht(n),d&&d()})}function ms(n,d){var g=n.length;if(g>0){var x=()=>--g||d();for(var E of n)E.out(x)}else d()}function yi(n,d,g){if((n.f&Rt)===0){if(n.f^=Rt,n.transitions!==null)for(const L of n.transitions)(L.is_global||g)&&d.push(L);for(var x=n.first;x!==null;){var E=x.next,D=(x.f&Wr)!==0||(x.f&Mt)!==0;yi(x,d,D?g:!1),x=E}}}function Mr(n){Ss(n,!0)}function Ss(n,d){if((n.f&Rt)!==0){n.f^=Rt;for(var g=n.first;g!==null;){var x=g.next,E=(g.f&Wr)!==0||(g.f&Mt)!==0;Ss(g,E?d:!1),g=x}if(n.transitions!==null)for(const D of n.transitions)(D.is_global||d)&&D.in()}}let ur=[],ai=[];function bs(){var n=ur;ur=[],Dr(n)}function Jn(){var n=ai;ai=[],Dr(n)}function Kr(n){ur.length===0&&queueMicrotask(bs),ur.push(n)}function Yn(){ur.length>0&&bs(),ai.length>0&&Jn()}function Qn(n){var d=ye;if((d.f&mi)===0){if((d.f&gi)===0)throw n;d.fn(n)}else ws(n,d)}function ws(n,d){for(;d!==null;){if((d.f&gi)!==0)try{d.b.error(n);return}catch{}d=d.parent}throw n}let fr=!1,_r=null,qt=!1,Ft=!1;function Oi(n){Ft=n}let lr=[];let De=null,wt=!1;function Nt(n){De=n}let ye=null;function Yt(n){ye=n}let Tt=null;function Cs(n){De!==null&&De.f&ni&&(Tt===null?Tt=[n]:Tt.push(n))}let Je=null,st=0,ht=null;function eo(n){ht=n}let Or=1,vr=0,Kt=vr;function Ii(n){Kt=n}let Pt=!1,$t=null;function ys(){return++Or}function Cr(n){var d=n.f;if((d&Bt)!==0)return!0;if((d&zt)!==0){var g=n.deps,x=(d&nt)!==0;if(g!==null){var E,D,L=(d&Rr)!==0,r=x&&ye!==null&&!Pt,o=g.length;if(L||r){var c=n,f=c.parent;for(E=0;E<o;E++)D=g[E],(L||!D?.reactions?.includes(c))&&(D.reactions??=[]).push(c);L&&(c.f^=Rr),r&&f!==null&&(f.f&nt)===0&&(c.f^=nt)}for(E=0;E<o;E++)if(D=g[E],Cr(D)&&as(D),D.wv>n.wv)return!0}(!x||ye!==null&&!Pt)&&mt(n,rt)}return!1}function Es(n,d,g=!0){var x=n.reactions;if(x!==null&&!Tt?.includes(n))for(var E=0;E<x.length;E++){var D=x[E];(D.f&ot)!==0?Es(D,d,!1):d===D&&(g?mt(D,Bt):(D.f&rt)!==0&&mt(D,zt),Gr(D))}}function xs(n){var d=Je,g=st,x=ht,E=De,D=Pt,L=Tt,r=xe,o=wt,c=Kt,f=n.f;Je=null,st=0,ht=null,Pt=(f&nt)!==0&&(wt||!qt||De===null),De=(f&(Mt|rr))===0?n:null,Tt=null,Ti(n.ctx),wt=!1,Kt=++vr,n.f|=ni,n.ac!==null&&(n.ac.abort(rs),n.ac=null);try{var l=(0,n.fn)(),a=n.deps;if(Je!==null){var _;if(Ir(n,st),a!==null&&st>0)for(a.length=st+Je.length,_=0;_<Je.length;_++)a[st+_]=Je[_];else n.deps=a=Je;if(!Pt||(f&ot)!==0&&n.reactions!==null)for(_=st;_<a.length;_++)(a[_].reactions??=[]).push(n)}else a!==null&&st<a.length&&(Ir(n,st),a.length=st);if(Sr()&&ht!==null&&!wt&&a!==null&&(n.f&(ot|zt|Bt))===0)for(_=0;_<ht.length;_++)Es(ht[_],n);return E!==null&&E!==n&&(vr++,ht!==null&&(x===null?x=ht:x.push(...ht))),l}catch(S){Qn(S)}finally{Je=d,st=g,ht=x,De=E,Pt=D,Tt=L,Ti(r),wt=o,Kt=c,n.f^=ni}}function to(n,d){let g=d.reactions;if(g!==null){var x=Cn.call(g,n);if(x!==-1){var E=g.length-1;E===0?g=d.reactions=null:(g[x]=g[E],g.pop())}}g===null&&(d.f&ot)!==0&&(Je===null||!Je.includes(d))&&(mt(d,zt),(d.f&(nt|Rr))===0&&(d.f^=Rr),os(d),Ir(d,0))}function Ir(n,d){var g=n.deps;if(g!==null)for(var x=d;x<g.length;x++)to(n,g[x])}function Vr(n){var d=n.f;if((d&zr)===0){mt(n,rt);var g=ye,x=qt;ye=n,qt=!0;try{(d&Nr)!==0?Xn(n):ps(n),vs(n);var E=xs(n);n.teardown=typeof E=="function"?E:null,n.wv=Or;var D;Li&&ln&&(n.f&Bt)!==0&&n.deps}finally{qt=x,ye=g}}}function ro(){try{On()}catch(n){if(_r!==null)ws(n,_r);else throw n}}function ks(){var n=qt;try{var d=0;for(qt=!0;lr.length>0;){d++>1e3&&ro();var g=lr,x=g.length;lr=[];for(var E=0;E<x;E++){var D=so(g[E]);io(D)}jt.clear()}}finally{fr=!1,qt=n,_r=null}}function io(n){var d=n.length;if(d!==0){for(var g=0;g<d;g++){var x=n[g];if((x.f&(zr|Rt))===0&&Cr(x)){var E=Or;if(Vr(x),x.deps===null&&x.first===null&&x.nodes_start===null&&(x.teardown===null?gs(x):x.fn=null),Or>E&&(x.f&Si)!==0)break}}for(;g<d;g+=1)Gr(n[g])}}function Gr(n){fr||(fr=!0,queueMicrotask(ks));for(var d=_r=n;d.parent!==null;){d=d.parent;var g=d.f;if((g&(rr|Mt))!==0){if((g&rt)===0)return;d.f^=rt}}lr.push(d)}function so(n){for(var d=[],g=n;g!==null;){var x=g.f,E=(x&(Mt|rr))!==0,D=E&&(x&rt)!==0;if(!D&&(x&Rt)===0){(x&pi)!==0?d.push(g):E?g.f^=rt:Cr(g)&&Vr(g);var L=g.first;if(L!==null){g=L;continue}}var r=g.parent;for(g=g.next;g===null&&r!==null;)g=r.next,r=r.parent}return d}function no(n){for(var d;;){if(Yn(),lr.length===0)return fr=!1,_r=null,d;fr=!0,ks()}}async function Ls(){await Promise.resolve(),no()}function b(n){var d=n.f,g=(d&ot)!==0;if($t!==null&&$t.add(n),De!==null&&!wt){if(!Tt?.includes(n)){var x=De.deps;n.rv<vr&&(n.rv=vr,Je===null&&x!==null&&x[st]===n?st++:Je===null?Je=[n]:(!Pt||!Je.includes(n))&&Je.push(n))}}else if(g&&n.deps===null&&n.effects===null){var E=n,D=E.parent;D!==null&&(D.f&nt)===0&&(E.f^=nt)}if(g&&!Ft&&(E=n,Cr(E)&&as(E)),Ft){if(jt.has(n))return jt.get(n);if(g){E=n;var L=E.v;return((E.f&rt)!==0||Ds(E))&&(L=bi(E)),jt.set(E,L),L}}return n.v}function Ds(n){if(n.v===Ve)return!0;if(n.deps===null)return!1;for(const d of n.deps)if(jt.has(d)||(d.f&ot)!==0&&Ds(d))return!0;return!1}function oo(n){var d=$t;$t=new Set;var g=$t,x;try{if(j(n),d!==null)for(x of $t)d.add(x)}finally{$t=d}return g}function ao(n){var d=oo(()=>j(n));for(var g of d)Ar(g,g.v)}function j(n){var d=wt;try{return wt=!0,n()}finally{wt=d}}const lo=-7169;function mt(n,d){n.f=n.f&lo|d}function Ae(n){if(!(typeof n!="object"||!n||n instanceof EventTarget)){if(At in n)li(n);else if(!Array.isArray(n))for(let d in n){const g=n[d];typeof g=="object"&&g&&At in g&&li(g)}}}function li(n,d=new Set){if(typeof n=="object"&&n!==null&&!(n instanceof EventTarget)&&!d.has(n)){d.add(n),n instanceof Date&&n.getTime();for(let x in n)try{li(n[x],d)}catch{}const g=vi(n);if(g!==Object.prototype&&g!==Array.prototype&&g!==Map.prototype&&g!==Set.prototype&&g!==Date.prototype){const x=es(g);for(let E in x){const D=x[E].get;if(D)try{D.call(n)}catch{}}}}}let Pi=!1;function co(){Pi||(Pi=!0,document.addEventListener("reset",n=>{Promise.resolve().then(()=>{if(!n.defaultPrevented)for(const d of n.target.elements)d.__on_r?.()})},{capture:!0}))}function Xr(n){var d=De,g=ye;Nt(null),Yt(null);try{return n()}finally{Nt(d),Yt(g)}}function Rs(n,d,g,x=g){n.addEventListener(d,()=>Xr(g));const E=n.__on_r;E?n.__on_r=()=>{E(),x(!0)}:n.__on_r=()=>x(!0),co()}const ho=new Set,Hi=new Set;function uo(n,d,g,x={}){function E(D){if(x.capture||or.call(d,D),!D.cancelBubble)return Xr(()=>g?.call(this,D))}return n.startsWith("pointer")||n.startsWith("touch")||n==="wheel"?Kr(()=>{d.addEventListener(n,E,x)}):d.addEventListener(n,E,x),E}function pe(n,d,g,x,E){var D={capture:x,passive:E},L=uo(n,d,g,D);(d===document.body||d===window||d===document||d instanceof HTMLMediaElement)&&fs(()=>{d.removeEventListener(n,L,D)})}function or(n){var d=this,g=d.ownerDocument,x=n.type,E=n.composedPath?.()||[],D=E[0]||n.target,L=0,r=n.__root;if(r){var o=E.indexOf(r);if(o!==-1&&(d===document||d===window)){n.__root=d;return}var c=E.indexOf(d);if(c===-1)return;o<=c&&(L=o)}if(D=E[L]||n.target,D!==d){yn(n,"currentTarget",{configurable:!0,get(){return D||g}});var f=De,l=ye;Nt(null),Yt(null);try{for(var a,_=[];D!==null;){var S=D.assignedSlot||D.parentNode||D.host||null;try{var u=D["__"+x];if(u!=null&&(!D.disabled||n.target===D))if(tr(u)){var[t,...s]=u;t.apply(D,[n,...s])}else u.call(D,n)}catch(e){a?_.push(e):a=e}if(n.cancelBubble||S===d||S===null)break;D=S}if(a){for(let e of _)queueMicrotask(()=>{throw e});throw a}}finally{n.__root=d,delete n.currentTarget,Nt(f),Yt(l)}}}function As(n){var d=document.createElement("template");return d.innerHTML=n.replaceAll("<!>","<!---->"),d.content}function Qt(n,d){var g=ye;g.nodes_start===null&&(g.nodes_start=n,g.nodes_end=d)}function X(n,d){var g=(d&Qi)!==0,x=(d&bn)!==0,E,D=!n.startsWith("<!>");return()=>{E===void 0&&(E=As(D?n:"<!>"+n),g||(E=kt(E)));var L=x||cs?document.importNode(E,!0):E.cloneNode(!0);if(g){var r=kt(L),o=L.lastChild;Qt(r,o)}else Qt(L,L);return L}}function fo(n,d,g="svg"){var x=!n.startsWith("<!>"),E=(d&Qi)!==0,D=`<${g}>${x?n:"<!>"+n}</${g}>`,L;return()=>{if(!L){var r=As(D),o=kt(r);if(E)for(L=document.createDocumentFragment();kt(o);)L.appendChild(kt(o));else L=kt(o)}var c=L.cloneNode(!0);if(E){var f=kt(c),l=c.lastChild;Qt(f,l)}else Qt(c,c);return c}}function Vt(n,d){return fo(n,d,"svg")}function ut(n=""){{var d=$r(n+"");return Qt(d,d),d}}function ir(){var n=document.createDocumentFragment(),d=document.createComment(""),g=$r();return n.append(d,g),Qt(d,g),n}function $(n,d){n!==null&&n.before(d)}const _o=["touchstart","touchmove"];function vo(n){return _o.includes(n)}let ci=!0;function se(n,d){var g=d==null?"":typeof d=="object"?d+"":d;g!==(n.__t??=n.nodeValue)&&(n.__t=g,n.nodeValue=g+"")}function po(n,d){return go(n,d)}const Gt=new Map;function go(n,{target:d,anchor:g,props:x={},events:E,context:D,intro:L=!0}){jn();var r=new Set,o=l=>{for(var a=0;a<l.length;a++){var _=l[a];if(!r.has(_)){r.add(_);var S=vo(_);d.addEventListener(_,or,{passive:S});var u=Gt.get(_);u===void 0?(document.addEventListener(_,or,{passive:S}),Gt.set(_,1)):Gt.set(_,u+1)}}};o(_i(ho)),Hi.add(o);var c=void 0,f=Gn(()=>{var l=g??d.appendChild($r());return dr(()=>{if(D){Ye({});var a=xe;a.c=D}E&&(x.$$events=E),ci=L,c=n(l,x)||{},ci=!0,D&&Qe()}),()=>{for(var a of r){d.removeEventListener(a,or);var _=Gt.get(a);--_===0?(document.removeEventListener(a,or),Gt.delete(a)):Gt.set(a,_)}Hi.delete(o),l!==g&&l.parentNode?.removeChild(l)}});return mo.set(c,f),c}let mo=new WeakMap;function at(n){xe===null&&Ur(),er&&xe.l!==null?Bs(xe).m.push(n):oi(()=>{const d=j(n);if(typeof d=="function")return d})}function Ut(n){xe===null&&Ur(),at(()=>()=>j(n))}function So(n,d,{bubbles:g=!1,cancelable:x=!1}={}){return new CustomEvent(n,{detail:d,bubbles:g,cancelable:x})}function Ts(){const n=xe;return n===null&&Ur(),(d,g,x)=>{const E=n.s.$$events?.[d];if(E){const D=tr(E)?E.slice():[E],L=So(d,g,x);for(const r of D)r.call(n.x,L);return!L.defaultPrevented}return!0}}function yr(n){xe===null&&Ur(),xe.l===null&&In(),Bs(xe).b.push(n)}function Bs(n){var d=n.l;return d.u??={a:[],b:[],m:[]}}function te(n,d,[g,x]=[0,0]){var E=n,D=null,L=null,r=Ve,o=g>0?Wr:0,c=!1;const f=(a,_=!0)=>{c=!0,l(_,a)},l=(a,_)=>{r!==(r=a)&&(r?(D?Mr(D):_&&(D=dr(()=>_(E))),L&&Br(L,()=>{L=null})):(L?Mr(L):_&&(L=dr(()=>_(E,[g+1,x]))),D&&Br(D,()=>{D=null})))};Ci(()=>{c=!1,d(f),c||l(null,null)},o)}function ft(n,d){return d}function bo(n,d,g,x){for(var E=[],D=d.length,L=0;L<D;L++)yi(d[L].e,E,!0);var r=D>0&&E.length===0&&g!==null;if(r){var o=g.parentNode;qn(o),o.append(g),x.clear(),It(n,d[0].prev,d[D-1].next)}ms(E,()=>{for(var c=0;c<D;c++){var f=d[c];r||(x.delete(f.k),It(n,f.prev,f.next)),Ht(f.e,!r)}})}function _t(n,d,g,x,E,D=null){var L=n,r={flags:d,items:new Map,first:null},o=(d&Yi)!==0;if(o){var c=n;L=c.appendChild($r())}var f=null,l=!1,a=fe(()=>{var _=g();return tr(_)?_:_==null?[]:_i(_)});Ci(()=>{var _=b(a),S=_.length;l&&S===0||(l=S===0,wo(_,r,L,E,d,x,g),D!==null&&(S===0?f?Mr(f):f=dr(()=>D(L)):f!==null&&Br(f,()=>{f=null})),b(a))})}function wo(n,d,g,x,E,D,L){var r=(E&hn)!==0,o=(E&(ui|fi))!==0,c=n.length,f=d.items,l=d.first,a=l,_,S=null,u,t=[],s=[],e,i,h,p;if(r)for(p=0;p<c;p+=1)e=n[p],i=D(e,p),h=f.get(i),h!==void 0&&(h.a?.measure(),(u??=new Set).add(h));for(p=0;p<c;p+=1){if(e=n[p],i=D(e,p),h=f.get(i),h===void 0){var m=a?a.e.nodes_start:g;S=yo(m,d,S,S===null?d.first:S.next,e,i,p,x,E,L),f.set(i,S),t=[],s=[],a=S.next;continue}if(o&&Co(h,e,p,E),(h.e.f&Rt)!==0&&(Mr(h.e),r&&(h.a?.unfix(),(u??=new Set).delete(h))),h!==a){if(_!==void 0&&_.has(h)){if(t.length<s.length){var C=s[0],v;S=C.prev;var w=t[0],T=t[t.length-1];for(v=0;v<t.length;v+=1)Fi(t[v],C,g);for(v=0;v<s.length;v+=1)_.delete(s[v]);It(d,w.prev,T.next),It(d,S,w),It(d,T,C),a=C,S=T,p-=1,t=[],s=[]}else _.delete(h),Fi(h,a,g),It(d,h.prev,h.next),It(d,h,S===null?d.first:S.next),It(d,S,h),S=h;continue}for(t=[],s=[];a!==null&&a.k!==i;)(a.e.f&Rt)===0&&(_??=new Set).add(a),s.push(a),a=a.next;if(a===null)continue;h=a}t.push(h),S=h,a=h.next}if(a!==null||_!==void 0){for(var A=_===void 0?[]:_i(_);a!==null;)(a.e.f&Rt)===0&&A.push(a),a=a.next;var I=A.length;if(I>0){var R=(E&Yi)!==0&&c===0?g:null;if(r){for(p=0;p<I;p+=1)A[p].a?.measure();for(p=0;p<I;p+=1)A[p].a?.fix()}bo(d,A,R,f)}}r&&Kr(()=>{if(u!==void 0)for(h of u)h.a?.apply()}),ye.first=d.first&&d.first.e,ye.last=S&&S.e}function Co(n,d,g,x){(x&ui)!==0&&Ar(n.v,d),(x&fi)!==0?Ar(n.i,g):n.i=g}function yo(n,d,g,x,E,D,L,r,o,c){var f=(o&ui)!==0,l=(o&dn)===0,a=f?l?le(E,!1,!1):hr(E):E,_=(o&fi)===0?L:hr(L),S={i:_,v:a,k:D,a:null,e:null,prev:g,next:x};try{return S.e=dr(()=>r(n,a,_,c),$n),S.e.prev=g&&g.e,S.e.next=x&&x.e,g===null?d.first=S:(g.next=S,g.e.next=S.e),x!==null&&(x.prev=S,x.e.prev=S.e),S}finally{}}function Fi(n,d,g){for(var x=n.next?n.next.e.nodes_start:g,E=d?d.e.nodes_start:g,D=n.e.nodes_start;D!==x;){var L=jr(D);E.before(D),D=L}}function It(n,d,g){d===null?n.first=g:(d.next=g,d.e.next=g&&g.e),g!==null&&(g.prev=d,g.e.prev=d&&d.e)}function Pr(n,d,g,x,E){var D=d.$$slots?.[g],L=!1;D===!0&&(D=d[g==="default"?"children":g],L=!0),D===void 0?E!==null&&E(n):D(n,L?()=>x:x)}const Ni=[...` 	
\r\f \v\uFEFF`];function Eo(n,d,g){var x=n==null?"":""+n;if(d&&(x=x?x+" "+d:d),g){for(var E in g)if(g[E])x=x?x+" "+E:E;else if(x.length)for(var D=E.length,L=0;(L=x.indexOf(E,L))>=0;){var r=L+D;(L===0||Ni.includes(x[L-1]))&&(r===x.length||Ni.includes(x[r]))?x=(L===0?"":x.substring(0,L))+x.substring(r+1):L=r}}return x===""?null:x}function xo(n,d){return n==null?null:String(n)}function Ge(n,d,g,x,E,D){var L=n.__className;if(L!==g||L===void 0){var r=Eo(g,x,D);r==null?n.removeAttribute("class"):d?n.className=r:n.setAttribute("class",r),n.__className=g}else if(D&&E!==D)for(var o in D){var c=!!D[o];(E==null||c!==!!E[o])&&n.classList.toggle(o,c)}return D}function Lr(n,d,g,x){var E=n.__style;if(E!==d){var D=xo(d);D==null?n.removeAttribute("style"):n.style.cssText=D,n.__style=d}return x}function Ms(n,d,g=!1){if(n.multiple){if(d==null)return;if(!tr(d))return Un();for(var x of n.options)x.selected=d.includes(cr(x));return}for(x of n.options){var E=cr(x);if(zn(E,d)){x.selected=!0;return}}(!g||d!==void 0)&&(n.selectedIndex=-1)}function ko(n){var d=new MutationObserver(()=>{Ms(n,n.__value)});d.observe(n,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),fs(()=>{d.disconnect()})}function Lo(n,d,g=d){var x=!0;Rs(n,"change",E=>{var D=E?"[selected]":":checked",L;if(n.multiple)L=[].map.call(n.querySelectorAll(D),cr);else{var r=n.querySelector(D)??n.querySelector("option:not([disabled])");L=r&&cr(r)}g(L)}),wi(()=>{var E=d();if(Ms(n,E,x),x&&E===void 0){var D=n.querySelector(":checked");D!==null&&(E=cr(D),g(E))}n.__value=E,x=!1}),ko(n)}function cr(n){return"__value"in n?n.__value:n.value}const Do=Symbol("is custom element"),Ro=Symbol("is html");function Ao(n,d){var g=Os(n);g.value===(g.value=d??void 0)||n.value===d&&(d!==0||n.nodeName!=="PROGRESS")||(n.value=d??"")}function Fe(n,d,g,x){var E=Os(n);E[d]!==(E[d]=g)&&(d==="loading"&&(n[An]=g),g==null?n.removeAttribute(d):typeof g!="string"&&To(n).includes(d)?n[d]=g:n.setAttribute(d,g))}function Os(n){return n.__attributes??={[Do]:n.nodeName.includes("-"),[Ro]:n.namespaceURI===wn}}var zi=new Map;function To(n){var d=zi.get(n.nodeName);if(d)return d;zi.set(n.nodeName,d=[]);for(var g,x=n,E=Element.prototype;E!==x;){g=es(x);for(var D in g)g[D].set&&d.push(D);x=vi(x)}return d}const Bo=()=>performance.now(),Lt={tick:n=>requestAnimationFrame(n),now:()=>Bo(),tasks:new Set};function Is(){const n=Lt.now();Lt.tasks.forEach(d=>{d.c(n)||(Lt.tasks.delete(d),d.f())}),Lt.tasks.size!==0&&Lt.tick(Is)}function Mo(n){let d;return Lt.tasks.size===0&&Lt.tick(Is),{promise:new Promise(g=>{Lt.tasks.add(d={c:n,f:g})}),abort(){Lt.tasks.delete(d)}}}function Er(n,d){Xr(()=>{n.dispatchEvent(new CustomEvent(d))})}function Oo(n){if(n==="float")return"cssFloat";if(n==="offset")return"cssOffset";if(n.startsWith("--"))return n;const d=n.split("-");return d.length===1?d[0]:d[0]+d.slice(1).map(g=>g[0].toUpperCase()+g.slice(1)).join("")}function Wi(n){const d={},g=n.split(";");for(const x of g){const[E,D]=x.split(":");if(!E||D===void 0)break;const L=Oo(E.trim());d[L]=D.trim()}return d}const Io=n=>n;function dt(n,d,g,x){var E=(n&gn)!==0,D=(n&mn)!==0,L=E&&D,r=(n&Sn)!==0,o=L?"both":E?"in":"out",c,f=d.inert,l=d.style.overflow,a,_;function S(){return Xr(()=>c??=g()(d,x?.()??{},{direction:o}))}var u={is_global:r,in(){if(d.inert=f,!E){_?.abort(),_?.reset?.();return}D||a?.abort(),Er(d,"introstart"),a=hi(d,S(),_,1,()=>{Er(d,"introend"),a?.abort(),a=c=void 0,d.style.overflow=l})},out(i){if(!D){i?.(),c=void 0;return}d.inert=!0,Er(d,"outrostart"),_=hi(d,S(),a,0,()=>{Er(d,"outroend"),i?.()})},stop:()=>{a?.abort(),_?.abort()}},t=ye;if((t.transitions??=[]).push(u),E&&ci){var s=r;if(!s){for(var e=t.parent;e&&(e.f&Wr)!==0;)for(;(e=e.parent)&&(e.f&Nr)===0;);s=!e||(e.f&mi)!==0}s&&wi(()=>{j(()=>u.in())})}}function hi(n,d,g,x,E){var D=x===1;if(kn(d)){var L,r=!1;return Kr(()=>{if(!r){var t=d({direction:D?"in":"out"});L=hi(n,t,g,x,E)}}),{abort:()=>{r=!0,L?.abort()},deactivate:()=>L.deactivate(),reset:()=>L.reset(),t:()=>L.t()}}if(g?.deactivate(),!d?.duration)return E(),{abort:xt,deactivate:xt,reset:xt,t:()=>x};const{delay:o=0,css:c,tick:f,easing:l=Io}=d;var a=[];if(D&&g===void 0&&(f&&f(0,1),c)){var _=Wi(c(0,1));a.push(_,_)}var S=()=>1-x,u=n.animate(a,{duration:o,fill:"forwards"});return u.onfinish=()=>{u.cancel();var t=g?.t()??1-x;g?.abort();var s=x-t,e=d.duration*Math.abs(s),i=[];if(e>0){var h=!1;if(c)for(var p=Math.ceil(e/16.666666666666668),m=0;m<=p;m+=1){var C=t+s*l(m/p),v=Wi(c(C,1-C));i.push(v),h||=v.overflow==="hidden"}h&&(n.style.overflow="hidden"),S=()=>{var w=u.currentTime;return t+s*l(w/e)},f&&Mo(()=>{if(u.playState!=="running")return!1;var w=S();return f(w,1-w),!0})}u=n.animate(i,{duration:e,fill:"forwards"}),u.onfinish=()=>{S=()=>x,f?.(x,1-x),E()}},{abort:()=>{u&&(u.cancel(),u.effect=null,u.onfinish=xt)},deactivate:()=>{E=xt},reset:()=>{x===0&&f?.(1,0)},t:()=>S()}}function Hr(n,d,g=d){var x=Sr();Rs(n,"input",E=>{var D=E?n.defaultValue:n.value;if(D=ei(n)?ti(D):D,g(D),x&&D!==(D=d())){var L=n.selectionStart,r=n.selectionEnd;n.value=D??"",r!==null&&(n.selectionStart=L,n.selectionEnd=Math.min(r,n.value.length))}}),j(d)==null&&n.value&&g(ei(n)?ti(n.value):n.value),qr(()=>{var E=d();ei(n)&&E===ti(n.value)||n.type==="date"&&!E&&!n.value||E!==n.value&&(n.value=E??"")})}function ei(n){var d=n.type;return d==="number"||d==="range"}function ti(n){return n===""?null:+n}function Ui(n,d){return n===d||n?.[At]===d}function Zr(n={},d,g,x){return wi(()=>{var E,D;return qr(()=>{E=D,D=[],j(()=>{n!==g(...D)&&(d(n,...D),E&&Ui(g(...E),n)&&d(null,...E))})}),()=>{Kr(()=>{D&&Ui(g(...D),n)&&d(null,...D)})}}),n}function Fr(n){return function(...d){var g=d[0];return g.preventDefault(),n?.apply(this,d)}}function it(n=!1){const d=xe,g=d.l.u;if(!g)return;let x=()=>Ae(d.s);if(n){let E=0,D={};const L=br(()=>{let r=!1;const o=d.s;for(const c in o)o[c]!==D[c]&&(D[c]=o[c],r=!0);return r&&E++,E});x=()=>b(L)}g.b.length&&Vn(()=>{$i(d,x),Dr(g.b)}),oi(()=>{const E=j(()=>g.m.map(Ln));return()=>{for(const D of E)typeof D=="function"&&D()}}),g.a.length&&oi(()=>{$i(d,x),Dr(g.a)})}function $i(n,d){if(n.l.s)for(const g of n.l.s)b(g);d()}function Po(n,d){var g=n.$$events?.[d.type],x=tr(g)?g.slice():g==null?[]:[g];for(var E of x)E.call(this,d)}function Ho(n,d,g){if(n==null)return d(void 0),xt;const x=j(()=>n.subscribe(d,g));return x.unsubscribe?()=>x.unsubscribe():x}const Xt=[];function Fo(n,d=xt){let g=null;const x=new Set;function E(r){if(ss(n,r)&&(n=r,g)){const o=!Xt.length;for(const c of x)c[1](),Xt.push(c,n);if(o){for(let c=0;c<Xt.length;c+=2)Xt[c][0](Xt[c+1]);Xt.length=0}}}function D(r){E(r(n))}function L(r,o=xt){const c=[r,o];return x.add(c),x.size===1&&(g=d(E,D)||xt),r(n),()=>{x.delete(c),x.size===0&&g&&(g(),g=null)}}return{set:E,update:D,subscribe:L}}function No(n){let d;return Ho(n,g=>d=g)(),d}let xr=!1;function zo(n){var d=xr;try{return xr=!1,[n(),xr]}finally{xr=d}}function he(n,d,g,x){var E=!er||(g&fn)!==0,D=(g&vn)!==0,L=(g&pn)!==0,r=x,o=!0,c=()=>(o&&(o=!1,r=L?j(x):x),r),f;if(D){var l=At in n||Rn in n;f=Jt(n,d)?.set??(l&&d in n?i=>n[d]=i:void 0)}var a,_=!1;D?[a,_]=zo(()=>n[d]):a=n[d],a===void 0&&x!==void 0&&(a=c(),f&&(E&&Pn(),f(a)));var S;if(E?S=()=>{var i=n[d];return i===void 0?c():(o=!0,i)}:S=()=>{var i=n[d];return i!==void 0&&(r=void 0),i===void 0?r:i},E&&(g&_n)===0)return S;if(f){var u=n.$$legacy;return function(i,h){return arguments.length>0?((!E||!h||u||_)&&f(h?S():i),i):S()}}var t=!1,s=((g&un)!==0?br:fe)(()=>(t=!1,S()));D&&b(s);var e=ye;return function(i,h){if(arguments.length>0){const p=h?b(s):E&&D?Zt(i):i;return Y(s,p),t=!0,r!==void 0&&(r=p),i}return Ft&&t||(e.f&zr)!==0?s.v:b(s)}}const Wo=10,Uo=function(){let n=Fo([]);return setInterval(()=>{let d=No(n);const g=Math.floor(new Date().getTime()/1e3),x=d.filter(E=>E.created_at+Wo>g);x.length!==d.length&&n.set(x)},1e3),{add(d){n.update(g=>[...g,{...d,created_at:Math.floor(new Date().getTime()/1e3)}])},remove(d){n.update(g=>g.filter(x=>x.created_at!==d.created_at||x.type!==d.type||x.text!==d.text))},subscribe:n.subscribe}},Le=Uo();function Ps(n){const d=n-1;return d*d*d+1}function $o(n){return n<.5?4*n*n*n:.5*Math.pow(2*n-2,3)+1}function di(n){const d=typeof n=="string"&&n.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return d?[parseFloat(d[1]),d[2]||"px"]:[n,"px"]}function jo(n,{delay:d=0,duration:g=400,easing:x=$o,amount:E=5,opacity:D=0}={}){const L=getComputedStyle(n),r=+L.opacity,o=L.filter==="none"?"":L.filter,c=r*(1-D),[f,l]=di(E);return{delay:d,duration:g,easing:x,css:(a,_)=>`opacity: ${r-c*_}; filter: ${o} blur(${_*f}${l});`}}function ji(n,{delay:d=0,duration:g=400,easing:x=Ps,x:E=0,y:D=0,opacity:L=0}={}){const r=getComputedStyle(n),o=+r.opacity,c=r.transform==="none"?"":r.transform,f=o*(1-L),[l,a]=di(E),[_,S]=di(D);return{delay:d,duration:g,easing:x,css:(u,t)=>`
			transform: ${c} translate(${(1-u)*l}${a}, ${(1-u)*_}${S});
			opacity: ${o-f*t}`}}function Dt(n,{delay:d=0,duration:g=400,easing:x=Ps,axis:E="y"}={}){const D=getComputedStyle(n),L=+D.opacity,r=E==="y"?"height":"width",o=parseFloat(D[r]),c=E==="y"?["top","bottom"]:["left","right"],f=c.map(s=>`${s[0].toUpperCase()}${s.slice(1)}`),l=parseFloat(D[`padding${f[0]}`]),a=parseFloat(D[`padding${f[1]}`]),_=parseFloat(D[`margin${f[0]}`]),S=parseFloat(D[`margin${f[1]}`]),u=parseFloat(D[`border${f[0]}Width`]),t=parseFloat(D[`border${f[1]}Width`]);return{delay:d,duration:g,easing:x,css:s=>`overflow: hidden;opacity: ${Math.min(s*20,1)*L};${r}: ${s*o}px;padding-${c[0]}: ${s*l}px;padding-${c[1]}: ${s*a}px;margin-${c[0]}: ${s*_}px;margin-${c[1]}: ${s*S}px;border-${c[0]}-width: ${s*u}px;border-${c[1]}-width: ${s*t}px;min-${r}: 0`}}var qo=X('<div><div class="d-flex"><div class="toast-body"> </div> <button type="button" class="btn-close btn-close-white me-2 m-auto" aria-label="remove message"></button></div></div>'),Ko=X('<div class="position-fixed bottom-0 end-0 p-3" style="z-index: 470"></div>');function Vo(n,d){Ye(d,!1);let g=le([]);at(()=>{Le.subscribe(E=>Y(g,E))}),it();var x=Ko();_t(x,5,()=>b(g),ft,(E,D)=>{var L=qo();let r;var o=P(L),c=P(o),f=P(c),l=U(c,2);oe(a=>{r=Ge(L,1,"toast show align-items-center text-white border-0 mb-2",null,r,a),se(f,b(D).text)},[()=>({"bg-danger":b(D).type==="error","bg-warning":b(D).type==="warning","bg-success":b(D).type==="success","bg-primary":b(D).type==="info"})],fe),pe("click",l,()=>Le.remove(b(D))),dt(3,L,()=>Dt),$(E,L)}),$(n,x),Qe()}function qi(n,d){d&&d!=="lg"&&d!=="sm"&&d!=="xs"?n.style.fontSize=d.replace("x","em"):n.style.fontSize=""}function Go(n,d,g,x,E,D=1,L="",r=""){let o=1,c=1;E&&(E=="horizontal"?o=-1:E=="vertical"?c=-1:o=c=-1),typeof n=="string"&&(n=parseFloat(n)),typeof d=="string"&&(d=parseFloat(d)),typeof g=="string"&&(g=parseFloat(g));const f=`${d*D}${L}`,l=`${g*D}${L}`;let a=`translate(${f},${l}) scale(${o*n},${c*n})`;return x&&(a+=` rotate(${x}${r})`),a}var Xo=Vt('<title class="svelte-bvo74f"> </title>'),Zo=Vt('<path class="svelte-bvo74f"></path>'),Jo=Vt('<path class="svelte-bvo74f"></path><path class="svelte-bvo74f"></path>',1),Yo=Vt('<svg role="img" xmlns="http://www.w3.org/2000/svg"><!><g class="svelte-bvo74f"><g class="svelte-bvo74f"><!></g></g></svg>');function de(n,d){Ye(d,!1);const g=le(),x=le();let E=he(d,"class",24,()=>{}),D=he(d,"id",24,()=>{}),L=he(d,"style",24,()=>{}),r=he(d,"icon",8),o=he(d,"title",24,()=>{}),c=he(d,"size",24,()=>{}),f=he(d,"color",24,()=>{}),l=he(d,"fw",8,!1),a=he(d,"pull",24,()=>{}),_=he(d,"scale",8,1),S=he(d,"translateX",8,0),u=he(d,"translateY",8,0),t=he(d,"rotate",24,()=>{}),s=he(d,"flip",24,()=>{}),e=he(d,"spin",8,!1),i=he(d,"pulse",8,!1),h=he(d,"primaryColor",8,""),p=he(d,"secondaryColor",8,""),m=he(d,"primaryOpacity",8,1),C=he(d,"secondaryOpacity",8,.4),v=he(d,"swapOpacity",8,!1),w=le();Ct(()=>(b(w),Ae(c()),qi),()=>{b(w)&&c()&&qi(b(w),c())}),Ct(()=>Ae(r()),()=>{Y(g,r()&&r().icon||[0,0,"",[],""])}),Ct(()=>(Ae(_()),Ae(S()),Ae(u()),Ae(t()),Ae(s())),()=>{Y(x,Go(_(),S(),u(),t(),s(),512))}),wr(),it();var T=ir(),A=Oe(T);{var I=R=>{var N=Yo();let q;var Z=P(N);{var Q=F=>{var K=Xo(),ee=P(K);oe(()=>se(ee,o())),$(F,K)};te(Z,F=>{o()&&F(Q)})}var J=U(Z),y=P(J),B=P(y);{var M=F=>{var K=Zo();oe(()=>{Fe(K,"d",(b(g),j(()=>b(g)[4]))),Fe(K,"fill",f()||h()||"currentColor"),Fe(K,"transform",`translate(${b(g),j(()=>b(g)[0]/-2)??""} ${b(g),j(()=>b(g)[1]/-2)??""})`)}),$(F,K)},O=F=>{var K=Jo(),ee=Oe(K),re=U(ee);oe(()=>{Fe(ee,"d",(b(g),j(()=>b(g)[4][0]))),Fe(ee,"fill",p()||f()||"currentColor"),Fe(ee,"fill-opacity",v()!=!1?m():C()),Fe(ee,"transform",`translate(${b(g),j(()=>b(g)[0]/-2)??""} ${b(g),j(()=>b(g)[1]/-2)??""})`),Fe(re,"d",(b(g),j(()=>b(g)[4][1]))),Fe(re,"fill",h()||f()||"currentColor"),Fe(re,"fill-opacity",v()!=!1?C():m()),Fe(re,"transform",`translate(${b(g),j(()=>b(g)[0]/-2)??""} ${b(g),j(()=>b(g)[1]/-2)??""})`)}),$(F,K)};te(B,F=>{b(g),j(()=>typeof b(g)[4]=="string")?F(M):F(O,!1)})}Zr(N,F=>Y(w,F),()=>b(w)),oe(F=>{Fe(N,"id",D()),q=Ge(N,0,`svelte-fa svelte-fa-base ${E()??""}`,"svelte-bvo74f",q,F),Lr(N,L()),Fe(N,"viewBox",`0 0 ${b(g),j(()=>b(g)[0])??""} ${b(g),j(()=>b(g)[1])??""}`),Fe(N,"aria-hidden",o()===void 0),Fe(J,"transform",`translate(${b(g),j(()=>b(g)[0]/2)??""} ${b(g),j(()=>b(g)[1]/2)??""})`),Fe(J,"transform-origin",`${b(g),j(()=>b(g)[0]/4)??""} 0`),Fe(y,"transform",b(x))},[()=>({pulse:i(),"svelte-fa-size-lg":c()==="lg","svelte-fa-size-sm":c()==="sm","svelte-fa-size-xs":c()==="xs","svelte-fa-fw":l(),"svelte-fa-pull-left":a()==="left","svelte-fa-pull-right":a()==="right",spin:e()})],fe),$(R,N)};te(A,R=>{b(g),j(()=>b(g)[4])&&R(I)})}$(n,T),Qe()}/*!
 * Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2024 Fonticons, Inc.
 */const Qo={prefix:"fas",iconName:"right-from-bracket",icon:[512,512,["sign-out-alt"],"f2f5","M377.9 105.9L500.7 228.7c7.2 7.2 11.3 17.1 11.3 27.3s-4.1 20.1-11.3 27.3L377.9 406.1c-6.4 6.4-15 9.9-24 9.9c-18.7 0-33.9-15.2-33.9-33.9l0-62.1-128 0c-17.7 0-32-14.3-32-32l0-64c0-17.7 14.3-32 32-32l128 0 0-62.1c0-18.7 15.2-33.9 33.9-33.9c9 0 17.6 3.6 24 9.9zM160 96L96 96c-17.7 0-32 14.3-32 32l0 256c0 17.7 14.3 32 32 32l64 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-64 0c-53 0-96-43-96-96L0 128C0 75 43 32 96 32l64 0c17.7 0 32 14.3 32 32s-14.3 32-32 32z"]},ea=Qo,ta={prefix:"fas",iconName:"laptop-code",icon:[640,512,[],"f5fc","M64 96c0-35.3 28.7-64 64-64l384 0c35.3 0 64 28.7 64 64l0 256-64 0 0-256L128 96l0 256-64 0L64 96zM0 403.2C0 392.6 8.6 384 19.2 384l601.6 0c10.6 0 19.2 8.6 19.2 19.2c0 42.4-34.4 76.8-76.8 76.8L76.8 480C34.4 480 0 445.6 0 403.2zM281 209l-31 31 31 31c9.4 9.4 9.4 24.6 0 33.9s-24.6 9.4-33.9 0l-48-48c-9.4-9.4-9.4-24.6 0-33.9l48-48c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9zM393 175l48 48c9.4 9.4 9.4 24.6 0 33.9l-48 48c-9.4 9.4-24.6 9.4-33.9 0s-9.4-24.6 0-33.9l31-31-31-31c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0z"]},ra={prefix:"fas",iconName:"bars",icon:[448,512,["navicon"],"f0c9","M0 96C0 78.3 14.3 64 32 64l384 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L32 128C14.3 128 0 113.7 0 96zM0 256c0-17.7 14.3-32 32-32l384 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L32 288c-17.7 0-32-14.3-32-32zM448 416c0 17.7-14.3 32-32 32L32 448c-17.7 0-32-14.3-32-32s14.3-32 32-32l384 0c17.7 0 32 14.3 32 32z"]},ia={prefix:"fas",iconName:"square-up-right",icon:[448,512,[8599,"external-link-square-alt"],"f360","M384 32c35.3 0 64 28.7 64 64l0 320c0 35.3-28.7 64-64 64L64 480c-35.3 0-64-28.7-64-64L0 96C0 60.7 28.7 32 64 32l320 0zM160 160c-6.5 0-12.3 3.9-14.8 9.9s-1.1 12.9 3.5 17.4l40 40-71 71C114 302 112 306.9 112 312s2 10 5.7 13.7l36.7 36.7c3.6 3.6 8.5 5.7 13.7 5.7s10-2 13.7-5.7l71-71 40 40c4.6 4.6 11.5 5.9 17.4 3.5s9.9-8.3 9.9-14.8l0-144c0-8.8-7.2-16-16-16l-144 0z"]},sa=ia,na={prefix:"fas",iconName:"circle-chevron-down",icon:[512,512,["chevron-circle-down"],"f13a","M256 0a256 256 0 1 0 0 512A256 256 0 1 0 256 0zM135 241c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0l87 87 87-87c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9L273 345c-9.4 9.4-24.6 9.4-33.9 0L135 241z"]},oa=na,Hs={prefix:"fas",iconName:"memory",icon:[576,512,[],"f538","M64 64C28.7 64 0 92.7 0 128l0 7.4c0 6.8 4.4 12.6 10.1 16.3C23.3 160.3 32 175.1 32 192s-8.7 31.7-21.9 40.3C4.4 236 0 241.8 0 248.6L0 320l576 0 0-71.4c0-6.8-4.4-12.6-10.1-16.3C552.7 223.7 544 208.9 544 192s8.7-31.7 21.9-40.3c5.7-3.7 10.1-9.5 10.1-16.3l0-7.4c0-35.3-28.7-64-64-64L64 64zM576 352L0 352l0 64c0 17.7 14.3 32 32 32l48 0 0-32c0-8.8 7.2-16 16-16s16 7.2 16 16l0 32 96 0 0-32c0-8.8 7.2-16 16-16s16 7.2 16 16l0 32 96 0 0-32c0-8.8 7.2-16 16-16s16 7.2 16 16l0 32 96 0 0-32c0-8.8 7.2-16 16-16s16 7.2 16 16l0 32 48 0c17.7 0 32-14.3 32-32l0-64zM192 160l0 64c0 17.7-14.3 32-32 32s-32-14.3-32-32l0-64c0-17.7 14.3-32 32-32s32 14.3 32 32zm128 0l0 64c0 17.7-14.3 32-32 32s-32-14.3-32-32l0-64c0-17.7 14.3-32 32-32s32 14.3 32 32zm128 0l0 64c0 17.7-14.3 32-32 32s-32-14.3-32-32l0-64c0-17.7 14.3-32 32-32s32 14.3 32 32z"]},aa={prefix:"fas",iconName:"folder",icon:[512,512,[128193,128447,61716,"folder-blank"],"f07b","M64 480H448c35.3 0 64-28.7 64-64V160c0-35.3-28.7-64-64-64H288c-10.1 0-19.6-4.7-25.6-12.8L243.2 57.6C231.1 41.5 212.1 32 192 32H64C28.7 32 0 60.7 0 96V416c0 35.3 28.7 64 64 64z"]},la={prefix:"fas",iconName:"box",icon:[448,512,[128230],"f466","M50.7 58.5L0 160l208 0 0-128L93.7 32C75.5 32 58.9 42.3 50.7 58.5zM240 160l208 0L397.3 58.5C389.1 42.3 372.5 32 354.3 32L240 32l0 128zm208 32L0 192 0 416c0 35.3 28.7 64 64 64l320 0c35.3 0 64-28.7 64-64l0-224z"]},ca={prefix:"fas",iconName:"maximize",icon:[512,512,["expand-arrows-alt"],"f31e","M200 32L56 32C42.7 32 32 42.7 32 56l0 144c0 9.7 5.8 18.5 14.8 22.2s19.3 1.7 26.2-5.2l40-40 79 79-79 79L73 295c-6.9-6.9-17.2-8.9-26.2-5.2S32 302.3 32 312l0 144c0 13.3 10.7 24 24 24l144 0c9.7 0 18.5-5.8 22.2-14.8s1.7-19.3-5.2-26.2l-40-40 79-79 79 79-40 40c-6.9 6.9-8.9 17.2-5.2 26.2s12.5 14.8 22.2 14.8l144 0c13.3 0 24-10.7 24-24l0-144c0-9.7-5.8-18.5-14.8-22.2s-19.3-1.7-26.2 5.2l-40 40-79-79 79-79 40 40c6.9 6.9 17.2 8.9 26.2 5.2s14.8-12.5 14.8-22.2l0-144c0-13.3-10.7-24-24-24L312 32c-9.7 0-18.5 5.8-22.2 14.8s-1.7 19.3 5.2 26.2l40 40-79 79-79-79 40-40c6.9-6.9 8.9-17.2 5.2-26.2S209.7 32 200 32z"]},Fs=ca,ha={prefix:"fas",iconName:"server",icon:[512,512,[],"f233","M64 32C28.7 32 0 60.7 0 96l0 64c0 35.3 28.7 64 64 64l384 0c35.3 0 64-28.7 64-64l0-64c0-35.3-28.7-64-64-64L64 32zm280 72a24 24 0 1 1 0 48 24 24 0 1 1 0-48zm48 24a24 24 0 1 1 48 0 24 24 0 1 1 -48 0zM64 288c-35.3 0-64 28.7-64 64l0 64c0 35.3 28.7 64 64 64l384 0c35.3 0 64-28.7 64-64l0-64c0-35.3-28.7-64-64-64L64 288zm280 72a24 24 0 1 1 0 48 24 24 0 1 1 0-48zm56 24a24 24 0 1 1 48 0 24 24 0 1 1 -48 0z"]},Ns={prefix:"fas",iconName:"microchip",icon:[512,512,[],"f2db","M176 24c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 40c-35.3 0-64 28.7-64 64l-40 0c-13.3 0-24 10.7-24 24s10.7 24 24 24l40 0 0 56-40 0c-13.3 0-24 10.7-24 24s10.7 24 24 24l40 0 0 56-40 0c-13.3 0-24 10.7-24 24s10.7 24 24 24l40 0c0 35.3 28.7 64 64 64l0 40c0 13.3 10.7 24 24 24s24-10.7 24-24l0-40 56 0 0 40c0 13.3 10.7 24 24 24s24-10.7 24-24l0-40 56 0 0 40c0 13.3 10.7 24 24 24s24-10.7 24-24l0-40c35.3 0 64-28.7 64-64l40 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-40 0 0-56 40 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-40 0 0-56 40 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-40 0c0-35.3-28.7-64-64-64l0-40c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 40-56 0 0-40c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 40-56 0 0-40zM160 128l192 0c17.7 0 32 14.3 32 32l0 192c0 17.7-14.3 32-32 32l-192 0c-17.7 0-32-14.3-32-32l0-192c0-17.7 14.3-32 32-32zm192 32l-192 0 0 192 192 0 0-192z"]},da={prefix:"fas",iconName:"circle-chevron-up",icon:[512,512,["chevron-circle-up"],"f139","M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM377 271c9.4 9.4 9.4 24.6 0 33.9s-24.6 9.4-33.9 0l-87-87-87 87c-9.4 9.4-24.6 9.4-33.9 0s-9.4-24.6 0-33.9L239 167c9.4-9.4 24.6-9.4 33.9 0L377 271z"]},ua=da,zs={prefix:"fas",iconName:"box-open",icon:[640,512,[],"f49e","M58.9 42.1c3-6.1 9.6-9.6 16.3-8.7L320 64 564.8 33.4c6.7-.8 13.3 2.7 16.3 8.7l41.7 83.4c9 17.9-.6 39.6-19.8 45.1L439.6 217.3c-13.9 4-28.8-1.9-36.2-14.3L320 64 236.6 203c-7.4 12.4-22.3 18.3-36.2 14.3L37.1 170.6c-19.3-5.5-28.8-27.2-19.8-45.1L58.9 42.1zM321.1 128l54.9 91.4c14.9 24.8 44.6 36.6 72.5 28.6L576 211.6l0 167c0 22-15 41.2-36.4 46.6l-204.1 51c-10.2 2.6-20.9 2.6-31 0l-204.1-51C79 419.7 64 400.5 64 378.5l0-167L191.6 248c27.8 8 57.6-3.8 72.5-28.6L318.9 128l2.2 0z"]},fa={prefix:"fas",iconName:"arrows-rotate",icon:[512,512,[128472,"refresh","sync"],"f021","M105.1 202.6c7.7-21.8 20.2-42.3 37.8-59.8c62.5-62.5 163.8-62.5 226.3 0L386.3 160 352 160c-17.7 0-32 14.3-32 32s14.3 32 32 32l111.5 0c0 0 0 0 0 0l.4 0c17.7 0 32-14.3 32-32l0-112c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 35.2L414.4 97.6c-87.5-87.5-229.3-87.5-316.8 0C73.2 122 55.6 150.7 44.8 181.4c-5.9 16.7 2.9 34.9 19.5 40.8s34.9-2.9 40.8-19.5zM39 289.3c-5 1.5-9.8 4.2-13.7 8.2c-4 4-6.7 8.8-8.1 14c-.3 1.2-.6 2.5-.8 3.8c-.3 1.7-.4 3.4-.4 5.1L16 432c0 17.7 14.3 32 32 32s32-14.3 32-32l0-35.1 17.6 17.5c0 0 0 0 0 0c87.5 87.4 229.3 87.4 316.7 0c24.4-24.4 42.1-53.1 52.9-83.8c5.9-16.7-2.9-34.9-19.5-40.8s-34.9 2.9-40.8 19.5c-7.7 21.8-20.2 42.3-37.8 59.8c-62.5 62.5-163.8 62.5-226.3 0l-.1-.1L125.6 352l34.4 0c17.7 0 32-14.3 32-32s-14.3-32-32-32L48.4 288c-1.6 0-3.2 .1-4.8 .3s-3.1 .5-4.6 1z"]},Ws=fa,_a={prefix:"fas",iconName:"house-user",icon:[576,512,["home-user"],"e1b0","M575.8 255.5c0 18-15 32.1-32 32.1l-32 0 .7 160.2c.2 35.5-28.5 64.3-64 64.3l-320.4 0c-35.3 0-64-28.7-64-64l0-160.4-32 0c-18 0-32-14-32-32.1c0-9 3-17 10-24L266.4 8c7-7 15-8 22-8s15 2 21 7L564.8 231.5c8 7 12 15 11 24zM352 224a64 64 0 1 0 -128 0 64 64 0 1 0 128 0zm-96 96c-44.2 0-80 35.8-80 80c0 8.8 7.2 16 16 16l192 0c8.8 0 16-7.2 16-16c0-44.2-35.8-80-80-80l-64 0z"]},va={prefix:"fas",iconName:"tags",icon:[512,512,[],"f02c","M345 39.1L472.8 168.4c52.4 53 52.4 138.2 0 191.2L360.8 472.9c-9.3 9.4-24.5 9.5-33.9 .2s-9.5-24.5-.2-33.9L438.6 325.9c33.9-34.3 33.9-89.4 0-123.7L310.9 72.9c-9.3-9.4-9.2-24.6 .2-33.9s24.6-9.2 33.9 .2zM0 229.5L0 80C0 53.5 21.5 32 48 32l149.5 0c17 0 33.3 6.7 45.3 18.7l168 168c25 25 25 65.5 0 90.5L277.3 442.7c-25 25-65.5 25-90.5 0l-168-168C6.7 262.7 0 246.5 0 229.5zM144 144a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z"]},pa={prefix:"fas",iconName:"terminal",icon:[576,512,[],"f120","M9.4 86.6C-3.1 74.1-3.1 53.9 9.4 41.4s32.8-12.5 45.3 0l192 192c12.5 12.5 12.5 32.8 0 45.3l-192 192c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L178.7 256 9.4 86.6zM256 416l288 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-288 0c-17.7 0-32-14.3-32-32s14.3-32 32-32z"]},ga={prefix:"fas",iconName:"tag",icon:[448,512,[127991],"f02b","M0 80L0 229.5c0 17 6.7 33.3 18.7 45.3l176 176c25 25 65.5 25 90.5 0L418.7 317.3c25-25 25-65.5 0-90.5l-176-176c-12-12-28.3-18.7-45.3-18.7L48 32C21.5 32 0 53.5 0 80zm112 32a32 32 0 1 1 0 64 32 32 0 1 1 0-64z"]},ma={prefix:"fas",iconName:"hard-drive",icon:[512,512,[128436,"hdd"],"f0a0","M0 96C0 60.7 28.7 32 64 32l384 0c35.3 0 64 28.7 64 64l0 184.4c-17-15.2-39.4-24.4-64-24.4L64 256c-24.6 0-47 9.2-64 24.4L0 96zM64 288l384 0c35.3 0 64 28.7 64 64l0 64c0 35.3-28.7 64-64 64L64 480c-35.3 0-64-28.7-64-64l0-64c0-35.3 28.7-64 64-64zM320 416a32 32 0 1 0 0-64 32 32 0 1 0 0 64zm128-32a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z"]},Sa=ma,ba={prefix:"fas",iconName:"gear",icon:[512,512,[9881,"cog"],"f013","M495.9 166.6c3.2 8.7 .5 18.4-6.4 24.6l-43.3 39.4c1.1 8.3 1.7 16.8 1.7 25.4s-.6 17.1-1.7 25.4l43.3 39.4c6.9 6.2 9.6 15.9 6.4 24.6c-4.4 11.9-9.7 23.3-15.8 34.3l-4.7 8.1c-6.6 11-14 21.4-22.1 31.2c-5.9 7.2-15.7 9.6-24.5 6.8l-55.7-17.7c-13.4 10.3-28.2 18.9-44 25.4l-12.5 57.1c-2 9.1-9 16.3-18.2 17.8c-13.8 2.3-28 3.5-42.5 3.5s-28.7-1.2-42.5-3.5c-9.2-1.5-16.2-8.7-18.2-17.8l-12.5-57.1c-15.8-6.5-30.6-15.1-44-25.4L83.1 425.9c-8.8 2.8-18.6 .3-24.5-6.8c-8.1-9.8-15.5-20.2-22.1-31.2l-4.7-8.1c-6.1-11-11.4-22.4-15.8-34.3c-3.2-8.7-.5-18.4 6.4-24.6l43.3-39.4C64.6 273.1 64 264.6 64 256s.6-17.1 1.7-25.4L22.4 191.2c-6.9-6.2-9.6-15.9-6.4-24.6c4.4-11.9 9.7-23.3 15.8-34.3l4.7-8.1c6.6-11 14-21.4 22.1-31.2c5.9-7.2 15.7-9.6 24.5-6.8l55.7 17.7c13.4-10.3 28.2-18.9 44-25.4l12.5-57.1c2-9.1 9-16.3 18.2-17.8C227.3 1.2 241.5 0 256 0s28.7 1.2 42.5 3.5c9.2 1.5 16.2 8.7 18.2 17.8l12.5 57.1c15.8 6.5 30.6 15.1 44 25.4l55.7-17.7c8.8-2.8 18.6-.3 24.5 6.8c8.1 9.8 15.5 20.2 22.1 31.2l4.7 8.1c6.1 11 11.4 22.4 15.8 34.3zM256 336a80 80 0 1 0 0-160 80 80 0 1 0 0 160z"]},wa=ba,Ca={prefix:"fas",iconName:"clock",icon:[512,512,[128339,"clock-four"],"f017","M256 0a256 256 0 1 1 0 512A256 256 0 1 1 256 0zM232 120l0 136c0 8 4 15.5 10.7 20l96 64c11 7.4 25.9 4.4 33.3-6.7s4.4-25.9-6.7-33.3L280 243.2 280 120c0-13.3-10.7-24-24-24s-24 10.7-24 24z"]},ya={prefix:"fas",iconName:"network-wired",icon:[640,512,[],"f6ff","M256 64l128 0 0 64-128 0 0-64zM240 0c-26.5 0-48 21.5-48 48l0 96c0 26.5 21.5 48 48 48l48 0 0 32L32 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l96 0 0 32-48 0c-26.5 0-48 21.5-48 48l0 96c0 26.5 21.5 48 48 48l160 0c26.5 0 48-21.5 48-48l0-96c0-26.5-21.5-48-48-48l-48 0 0-32 256 0 0 32-48 0c-26.5 0-48 21.5-48 48l0 96c0 26.5 21.5 48 48 48l160 0c26.5 0 48-21.5 48-48l0-96c0-26.5-21.5-48-48-48l-48 0 0-32 96 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-256 0 0-32 48 0c26.5 0 48-21.5 48-48l0-96c0-26.5-21.5-48-48-48L240 0zM96 448l0-64 128 0 0 64L96 448zm320-64l128 0 0 64-128 0 0-64z"]},Ea={prefix:"fas",iconName:"download",icon:[512,512,[],"f019","M288 32c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 242.7-73.4-73.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l128 128c12.5 12.5 32.8 12.5 45.3 0l128-128c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L288 274.7 288 32zM64 352c-35.3 0-64 28.7-64 64l0 32c0 35.3 28.7 64 64 64l384 0c35.3 0 64-28.7 64-64l0-32c0-35.3-28.7-64-64-64l-101.5 0-45.3 45.3c-25 25-65.5 25-90.5 0L165.5 352 64 352zm368 56a24 24 0 1 1 0 48 24 24 0 1 1 0-48z"]},xa={prefix:"fas",iconName:"house",icon:[576,512,[127968,63498,63500,"home","home-alt","home-lg-alt"],"f015","M575.8 255.5c0 18-15 32.1-32 32.1l-32 0 .7 160.2c0 2.7-.2 5.4-.5 8.1l0 16.2c0 22.1-17.9 40-40 40l-16 0c-1.1 0-2.2 0-3.3-.1c-1.4 .1-2.8 .1-4.2 .1L416 512l-24 0c-22.1 0-40-17.9-40-40l0-24 0-64c0-17.7-14.3-32-32-32l-64 0c-17.7 0-32 14.3-32 32l0 64 0 24c0 22.1-17.9 40-40 40l-24 0-31.9 0c-1.5 0-3-.1-4.5-.2c-1.2 .1-2.4 .2-3.6 .2l-16 0c-22.1 0-40-17.9-40-40l0-112c0-.9 0-1.9 .1-2.8l0-69.7-32 0c-18 0-32-14-32-32.1c0-9 3-17 10-24L266.4 8c7-7 15-8 22-8s15 2 21 7L564.8 231.5c8 7 12 15 11 24z"]},ka=xa,La={prefix:"fas",iconName:"stop",icon:[384,512,[9209],"f04d","M0 128C0 92.7 28.7 64 64 64H320c35.3 0 64 28.7 64 64V384c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V128z"]},Da={prefix:"fas",iconName:"sun",icon:[512,512,[9728],"f185","M361.5 1.2c5 2.1 8.6 6.6 9.6 11.9L391 121l107.9 19.8c5.3 1 9.8 4.6 11.9 9.6s1.5 10.7-1.6 15.2L446.9 256l62.3 90.3c3.1 4.5 3.7 10.2 1.6 15.2s-6.6 8.6-11.9 9.6L391 391 371.1 498.9c-1 5.3-4.6 9.8-9.6 11.9s-10.7 1.5-15.2-1.6L256 446.9l-90.3 62.3c-4.5 3.1-10.2 3.7-15.2 1.6s-8.6-6.6-9.6-11.9L121 391 13.1 371.1c-5.3-1-9.8-4.6-11.9-9.6s-1.5-10.7 1.6-15.2L65.1 256 2.8 165.7c-3.1-4.5-3.7-10.2-1.6-15.2s6.6-8.6 11.9-9.6L121 121 140.9 13.1c1-5.3 4.6-9.8 9.6-11.9s10.7-1.5 15.2 1.6L256 65.1 346.3 2.8c4.5-3.1 10.2-3.7 15.2-1.6zM160 256a96 96 0 1 1 192 0 96 96 0 1 1 -192 0zm224 0a128 128 0 1 0 -256 0 128 128 0 1 0 256 0z"]},Ra={prefix:"fas",iconName:"file",icon:[384,512,[128196,128459,61462],"f15b","M0 64C0 28.7 28.7 0 64 0L224 0l0 128c0 17.7 14.3 32 32 32l128 0 0 288c0 35.3-28.7 64-64 64L64 512c-35.3 0-64-28.7-64-64L0 64zm384 64l-128 0L256 0 384 128z"]},Aa={prefix:"fas",iconName:"play",icon:[384,512,[9654],"f04b","M73 39c-14.8-9.1-33.4-9.4-48.5-.9S0 62.6 0 80L0 432c0 17.4 9.4 33.4 24.5 41.9s33.7 8.1 48.5-.9L361 297c14.3-8.7 23-24.2 23-41s-8.7-32.2-23-41L73 39z"]},Ta={prefix:"fas",iconName:"plus",icon:[448,512,[10133,61543,"add"],"2b","M256 80c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 144L48 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l144 0 0 144c0 17.7 14.3 32 32 32s32-14.3 32-32l0-144 144 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-144 0 0-144z"]},Ba={prefix:"fas",iconName:"moon",icon:[384,512,[127769,9214],"f186","M223.5 32C100 32 0 132.3 0 256S100 480 223.5 480c60.6 0 115.5-24.2 155.8-63.4c5-4.9 6.3-12.5 3.1-18.7s-10.1-9.7-17-8.5c-9.8 1.7-19.8 2.6-30.1 2.6c-96.9 0-175.5-78.8-175.5-176c0-65.8 36-123.1 89.3-153.3c6.1-3.5 9.2-10.5 7.7-17.3s-7.3-11.9-14.3-12.5c-6.3-.5-12.6-.8-19-.8z"]},Ma={prefix:"fas",iconName:"rectangle-xmark",icon:[512,512,[62164,"rectangle-times","times-rectangle","window-close"],"f410","M64 32C28.7 32 0 60.7 0 96L0 416c0 35.3 28.7 64 64 64l384 0c35.3 0 64-28.7 64-64l0-320c0-35.3-28.7-64-64-64L64 32zM175 175c9.4-9.4 24.6-9.4 33.9 0l47 47 47-47c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9l-47 47 47 47c9.4 9.4 9.4 24.6 0 33.9s-24.6 9.4-33.9 0l-47-47-47 47c-9.4 9.4-24.6 9.4-33.9 0s-9.4-24.6 0-33.9l47-47-47-47c-9.4-9.4-9.4-24.6 0-33.9z"]},Oa=Ma,Ia={prefix:"fas",iconName:"turn-up",icon:[384,512,[10548,"level-up-alt"],"f3bf","M350 177.5c3.8-8.8 2-19-4.6-26l-136-144C204.9 2.7 198.6 0 192 0s-12.9 2.7-17.4 7.5l-136 144c-6.6 7-8.4 17.2-4.6 26s12.5 14.5 22 14.5l88 0 0 192c0 17.7-14.3 32-32 32l-80 0c-17.7 0-32 14.3-32 32l0 32c0 17.7 14.3 32 32 32l80 0c70.7 0 128-57.3 128-128l0-192 88 0c9.6 0 18.2-5.7 22-14.5z"]},Pa=Ia;var Ha=X('<button type="button" class="btn mx-2" title="Switch Theme"><!></button>');function Fa(n,d){Ye(d,!1);let g=le();function x(){b(g)==="light"?(Y(g,"dark"),document.querySelector("html").classList.add("dark")):(Y(g,"light"),document.querySelector("html").classList.remove("dark"))}at(()=>{Y(g,"dark"),b(g)==="dark"&&document.querySelector("html").classList.add("dark")}),it();var E=Ha(),D=P(E);{var L=o=>{de(o,{get icon(){return Ba},color:"#333",size:"2x"})},r=o=>{de(o,{get icon(){return Da},color:"#333",size:"2x"})};te(D,o=>{b(g)==="dark"?o(L):o(r,!1)})}pe("click",E,x),$(n,E),Qe()}var Na=Vt('<svg class="bi flex-shrink-0 me-2" width="24" height="24" role="img" aria-label="Danger:"><use xlink:href="#exclamation-triangle-fill"></use></svg>'),za=Vt('<svg class="bi flex-shrink-0 me-2" width="24" height="24" role="img" aria-label="Success:"><use xlink:href="#check-circle-fill"></use></svg>'),Wa=Vt('<svg class="bi flex-shrink-0 me-2" width="24" height="24" role="img" aria-label="Info:"><use xlink:href="#info-fill"></use></svg>'),Ua=X("<strong>Error:</strong>"),$a=X('<button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>'),ja=X('<div role="alert"><!> <div><!> <!> <!></div></div>'),qa=X('<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><symbol id="check-circle-fill" fill="currentColor" viewBox="0 0 16 16"><path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"></path></symbol><symbol id="info-fill" fill="currentColor" viewBox="0 0 16 16"><path d="M8 16A8 8 0 1 0 8 0akeyof Message8 8 0 0 0 0 16zm.93-9.412-1 4.705c-.07.34.029.533.304.533.194 0 .487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703 0-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381 2.29-.287zM8 5.5a1 1 0 1 1 0-2 1 1 0 0 1 0 2z"></path></symbol><symbol id="exclamation-triangle-fill" fill="currentColor" viewBox="0 0 16 16"><path d="M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5zm.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"></path></symbol></svg> <!>',1);function Ka(n,d){let g=he(d,"type",8),x=he(d,"dismissible",8,!1),E=le(!1);var D=qa(),L=U(Oe(D),2);{var r=o=>{var c=ja();let f;var l=P(c);{var a=h=>{var p=Na();$(h,p)},_=(h,p)=>{{var m=v=>{var w=za();$(v,w)},C=(v,w)=>{{var T=A=>{var I=Wa();$(A,I)};te(v,A=>{g()==="info"&&A(T)},w)}};te(h,v=>{g()==="success"?v(m):v(C,!1)},p)}};te(l,h=>{g()==="error"||g()==="warning"?h(a):h(_,!1)})}var S=U(l,2),u=P(S);{var t=h=>{var p=Ua();$(h,p)};te(u,h=>{g()==="error"&&h(t)})}var s=U(u,2);Pr(s,d,"default",{},null);var e=U(s,2);{var i=h=>{var p=$a();pe("click",p,()=>Y(E,!0)),$(h,p)};te(e,h=>{x()&&h(i)})}oe(h=>f=Ge(c,1,"alert d-flex align-items-center",null,f,h),[()=>({"alert-danger":g()==="error","alert-warning":g()==="warning","alert-success":g()==="success","alert-info":g()==="info","alert-dismissible":x()})],fe),dt(3,c,()=>Dt),$(o,c)};te(L,o=>{b(E)||o(r)})}$(n,D)}function Va(n){switch(n.request){case"login":return`{"response": "login", "payload": {"username": "${n.payload.username}"}}`;case"get_system_info":return'{"response": "get_system_info", "payload": {"engine_version": "Docker 20.10.7", "containers": {"total": 178, "running": 170, "stopped": 0}, "os": "Ubuntu 20.04.3 LTS", "cpus": 24, "mem": 31277850624}}';case"get_container_list":return`{"response": "get_container_list", "payload": [
                {"id": "2b7eb6b9d2f7fd2dd26738500a81a16310f78e46eea2f9c2a27ed876d85d8586", "name": "CaaSa Demo", "namespace": null, "status": "running", "permissions": ["info", "info-annotations", "procs", "files-read", "files-write", "files", "logs", "state", "term"]},
                {"id": "2b7eb6b9d2f7fd2dd26738500a81a16310f78e46eea2f9c2a27ed876d85d8587", "name": "Backend", "namespace": "Cool Web App", "status": "running", "permissions": ["info", "info-annotations", "procs", "files-read", "files-write", "files", "logs", "state", "term"]},
                {"id": "2b7eb6b9d2f7fd2dd26738500a81a16310f78e46eea2f9c2a27ed876d85d8588", "name": "Gateway", "namespace": "Cool Web App", "status": "running", "permissions": ["info", "info-annotations", "procs", "files-read", "files-write", "files", "logs", "state", "term"]}
               ]}`;case"get_processes":return'{"response": "get_processes", "payload": [{"pid": "45756", "ppid": "45733", "%cpu": "0.0", "%mem": "0.0", "user": "root", "stime": "16:24", "command": "nginx: master process nginx -g daemon off;", "level": 0}, {"pid": "45822", "ppid": "45756", "%cpu": "0.0", "%mem": "0.0", "user": "systemd+", "stime": "16:24", "command": "nginx: worker process", "level": 1}, {"pid": "45823", "ppid": "45756", "%cpu": "0.0", "%mem": "0.0", "user": "systemd+", "stime": "16:24", "command": "nginx: worker process", "level": 1}, {"pid": "45824", "ppid": "45756", "%cpu": "0.0", "%mem": "0.0", "user": "systemd+", "stime": "16:24", "command": "nginx: worker process", "level": 1}, {"pid": "45825", "ppid": "45756", "%cpu": "0.0", "%mem": "0.0", "user": "systemd+", "stime": "16:24", "command": "nginx: worker process", "level": 1}, {"pid": "45826", "ppid": "45756", "%cpu": "0.0", "%mem": "0.0", "user": "systemd+", "stime": "16:24", "command": "nginx: worker process", "level": 1}, {"pid": "45827", "ppid": "45756", "%cpu": "0.0", "%mem": "0.0", "user": "systemd+", "stime": "16:24", "command": "nginx: worker process", "level": 1}, {"pid": "45828", "ppid": "45756", "%cpu": "0.0", "%mem": "0.0", "user": "systemd+", "stime": "16:24", "command": "nginx: worker process", "level": 1}, {"pid": "45829", "ppid": "45756", "%cpu": "0.0", "%mem": "0.0", "user": "systemd+", "stime": "16:24", "command": "nginx: worker process", "level": 1}, {"pid": "45830", "ppid": "45756", "%cpu": "0.0", "%mem": "0.0", "user": "systemd+", "stime": "16:24", "command": "nginx: worker process", "level": 1}, {"pid": "45831", "ppid": "45756", "%cpu": "0.0", "%mem": "0.0", "user": "systemd+", "stime": "16:24", "command": "nginx: worker process", "level": 1}, {"pid": "45832", "ppid": "45756", "%cpu": "0.0", "%mem": "0.0", "user": "systemd+", "stime": "16:24", "command": "nginx: worker process", "level": 1}, {"pid": "45833", "ppid": "45756", "%cpu": "0.0", "%mem": "0.0", "user": "systemd+", "stime": "16:24", "command": "nginx: worker process", "level": 1}, {"pid": "46825", "ppid": "45733", "%cpu": "0.0", "%mem": "0.0", "user": "root", "stime": "16:34", "command": "sh", "level": 0}]}';case"get_container_info":const d={"2b7eb6b9d2f7fd2dd26738500a81a16310f78e46eea2f9c2a27ed876d85d8586":"/caasa_demo","2b7eb6b9d2f7fd2dd26738500a81a16310f78e46eea2f9c2a27ed876d85d8587":"/cool_web_app_backend_1","2b7eb6b9d2f7fd2dd26738500a81a16310f78e46eea2f9c2a27ed876d85d8588":"/cool_web_app_gateway_1"};return`{"response": "get_container_info", "payload": {"id": "${n.payload.container_id}", "name": "${d[n.payload.container_id]}", "status": "running", "command": "/docker-entrypoint.sh nginx -g daemon off;", "created_at": "2021-12-02T10:33:16.628618832Z", "started_at": "2021-12-02T10:33:17.015866729Z", "finished_at": "0001-01-01T00:00:00Z", "crashes": 0, "env": {"PATH": "/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin", "NGINX_VERSION": "1.21.1", "NJS_VERSION": "0.6.1", "PKG_RELEASE": "1"}, "labels": {"caasa.admin.full": "user1,user2", "maintainer": "NGINX Docker Maintainers <docker-maint@nginx.com>"}, "image": {"name": "nginx:alpine", "hash": "sha256:b9e2356ea1be9452f3777a587b0b6a30bc16c295fe6190eda6a0776522f27439"}, "mem": {"used": 10452992, "max_used": 19345408, "total": 52428800}, "cpu": {"perc": ${Math.random()*10}}, "net": {"rx_bytes": 18201, "tx_bytes": 0}, "ports": ["80/tcp"]}}`;case"get_container_logs":return n.payload.onlynew?'{"response": "get_container_logs", "payload":[]}':'{"response": "get_container_logs", "payload": ["2021-12-02T10:33:17.021946340Z /docker-entrypoint.sh: /docker-entrypoint.d/ is not empty, will attempt to perform configuration","2021-12-02T10:33:17.021988550Z /docker-entrypoint.sh: Looking for shell scripts in /docker-entrypoint.d/","2021-12-02T10:33:17.023417432Z /docker-entrypoint.sh: Launching /docker-entrypoint.d/10-listen-on-ipv6-by-default.sh","2021-12-02T10:33:17.031231257Z 10-listen-on-ipv6-by-default.sh: info: Getting the checksum of /etc/nginx/conf.d/default.conf","2021-12-02T10:33:17.055742664Z 10-listen-on-ipv6-by-default.sh: info: Enabled listen on IPv6 in /etc/nginx/conf.d/default.conf","2021-12-02T10:33:17.056041305Z /docker-entrypoint.sh: Launching /docker-entrypoint.d/20-envsubst-on-templates.sh","2021-12-02T10:33:17.059979717Z /docker-entrypoint.sh: Launching /docker-entrypoint.d/30-tune-worker-processes.sh","2021-12-02T10:33:17.062059371Z /docker-entrypoint.sh: Configuration complete; ready for start up","2021-12-02T10:33:17.074027144Z 2021/12/02 10:33:17 [notice] 1#1: using the \\"epoll\\" event method","2021-12-02T10:33:17.074056600Z 2021/12/02 10:33:17 [notice] 1#1: nginx/1.21.1","2021-12-02T10:33:17.074063653Z 2021/12/02 10:33:17 [notice] 1#1: built by gcc 10.3.1 20210424 (Alpine 10.3.1_git20210424) ","2021-12-02T10:33:17.074069845Z 2021/12/02 10:33:17 [notice] 1#1: OS: Linux 5.11.0-40-generic","2021-12-02T10:33:17.074075475Z 2021/12/02 10:33:17 [notice] 1#1: getrlimit(RLIMIT_NOFILE): 1048576:1048576","2021-12-02T10:33:17.074245905Z 2021/12/02 10:33:17 [notice] 1#1: start worker processes","2021-12-02T10:33:17.074276953Z 2021/12/02 10:33:17 [notice] 1#1: start worker process 32","2021-12-02T10:33:17.074379486Z 2021/12/02 10:33:17 [notice] 1#1: start worker process 33","2021-12-02T10:33:17.074401427Z 2021/12/02 10:33:17 [notice] 1#1: start worker process 34","2021-12-02T10:33:17.074513127Z 2021/12/02 10:33:17 [notice] 1#1: start worker process 35","2021-12-02T10:33:17.074601242Z 2021/12/02 10:33:17 [notice] 1#1: start worker process 36","2021-12-02T10:33:17.074666745Z 2021/12/02 10:33:17 [notice] 1#1: start worker process 37","2021-12-02T10:33:17.074817979Z 2021/12/02 10:33:17 [notice] 1#1: start worker process 38","2021-12-02T10:33:17.074873423Z 2021/12/02 10:33:17 [notice] 1#1: start worker process 39","2021-12-02T10:33:17.075007344Z 2021/12/02 10:33:17 [notice] 1#1: start worker process 40","2021-12-02T10:33:17.075141746Z 2021/12/02 10:33:17 [notice] 1#1: start worker process 41","2021-12-02T10:33:17.075279715Z 2021/12/02 10:33:17 [notice] 1#1: start worker process 42","2021-12-02T10:33:17.075393118Z 2021/12/02 10:33:17 [notice] 1#1: start worker process 43"]}';case"get_filesystem_info":return'{"response": "get_filesystem_info", "payload": {"workdir": "", "mounts": [{"type": "bind", "destination": "/etc/ssl/certs", "readonly": true, "source": "/etc/ssl/certs"}]}}';case"get_directory_list":return n.payload.path===""||n.payload.path==="/"?'{"response": "get_directory_list", "payload": {"entries": [{"type": "f", "permissions": "rwxr-xr-x", "owner": "root", "group": "root", "filesize": "0B", "modtime": "2021-12-02 16:19:13", "name": ".dockerenv"}, {"type": "d", "permissions": "rwxr-xr-x", "owner": "root", "group": "root", "filesize": "4.0KB", "modtime": "2021-06-15 14:34:40", "name": "bin"}, {"type": "d", "permissions": "rwxr-xr-x", "owner": "root", "group": "root", "filesize": "360B", "modtime": "2021-12-02 16:19:13", "name": "dev"}, {"type": "d", "permissions": "rwxr-xr-x", "owner": "root", "group": "root", "filesize": "4.0KB", "modtime": "2021-07-06 19:40:27", "name": "docker-entrypoint.d"}, {"type": "f", "permissions": "rwxrwxr-x", "owner": "root", "group": "root", "filesize": "1.2KB", "modtime": "2021-07-06 19:40:16", "name": "docker-entrypoint.sh"}, {"type": "d", "permissions": "rwxr-xr-x", "owner": "root", "group": "root", "filesize": "4.0KB", "modtime": "2021-12-02 16:19:13", "name": "etc"}, {"type": "d", "permissions": "rwxr-xr-x", "owner": "root", "group": "root", "filesize": "4.0KB", "modtime": "2021-06-15 14:34:40", "name": "home"}, {"type": "d", "permissions": "rwxr-xr-x", "owner": "root", "group": "root", "filesize": "4.0KB", "modtime": "2021-06-15 14:34:40", "name": "lib"}, {"type": "d", "permissions": "rwxr-xr-x", "owner": "root", "group": "root", "filesize": "4.0KB", "modtime": "2021-06-15 14:34:40", "name": "media"}, {"type": "d", "permissions": "rwxr-xr-x", "owner": "root", "group": "root", "filesize": "4.0KB", "modtime": "2021-06-15 14:34:40", "name": "mnt"}, {"type": "d", "permissions": "rwxr-xr-x", "owner": "root", "group": "root", "filesize": "4.0KB", "modtime": "2021-06-15 14:34:40", "name": "opt"}, {"type": "d", "permissions": "r-xr-xr-x", "owner": "root", "group": "root", "filesize": "0B", "modtime": "2021-12-02 16:19:13", "name": "proc"}, {"type": "d", "permissions": "rwx------", "owner": "root", "group": "root", "filesize": "4.0KB", "modtime": "2021-06-15 14:34:40", "name": "root"}, {"type": "d", "permissions": "rwxr-xr-x", "owner": "root", "group": "root", "filesize": "4.0KB", "modtime": "2021-12-02 16:19:13", "name": "run"}, {"type": "d", "permissions": "rwxr-xr-x", "owner": "root", "group": "root", "filesize": "4.0KB", "modtime": "2021-06-15 14:34:40", "name": "sbin"}, {"type": "d", "permissions": "rwxr-xr-x", "owner": "root", "group": "root", "filesize": "4.0KB", "modtime": "2021-06-15 14:34:40", "name": "srv"}, {"type": "d", "permissions": "r-xr-xr-x", "owner": "root", "group": "root", "filesize": "0B", "modtime": "2021-12-02 16:19:13", "name": "sys"}, {"type": "d", "permissions": "rwxr-xr-x", "owner": "root", "group": "root", "filesize": "4.0KB", "modtime": "2021-06-15 14:34:40", "name": "usr"}, {"type": "d", "permissions": "rwxr-xr-x", "owner": "root", "group": "root", "filesize": "4.0KB", "modtime": "2021-06-15 14:34:40", "name": "var"}], "path": "/"}}':!1;case"spawn_terminal":return'{"response": "spawn_terminal", "payload": {"execId": "2680be7b4aa3c0b6599edf3521f5813a770ccec7966a59c57cfdac5b4e3b7e9a"}}';case"resize_terminal":return!0;case"transmit_terminal_input":return n.payload.data==="\r"?`56!{"response": "receive_terminal_output", "payload": null}\r
This is just a demo`:'56!{"response": "receive_terminal_output", "payload": null}'+n.payload.data;default:return!1}}class Ga{constructor(d){}binaryType;bufferedAmount;extensions;onclose;onerror;onmessage;onopen;protocol;readyState;url;close(d,g){}CLOSED;CLOSING;CONNECTING;OPEN;addEventListener(d,g,x){throw new Error("Method not implemented.")}removeEventListener(d,g,x){throw new Error("Method not implemented.")}dispatchEvent(d){throw new Error("Method not implemented.")}send(d){const g=JSON.parse(d),x=Va(g),E={data:void 0,...new Event("api-mock")};if(x===!1?E.data=`{"response": "${g.request}", "error": "Sorry, command not mocked in demo"}`:x===!0||(x[0]!=="{"?E.data=new Blob([x]):E.data=x),E.data&&(setTimeout(()=>this.onmessage(E),200),typeof E.data=="string"&&E.data.includes("spawn_terminal"))){console.log("extra response for terminal");const D={data:void 0,...new Event("api-mock")};D.data=new Blob(['56!{"response": "receive_terminal_output", "payload": null}/ # ']),setTimeout(()=>this.onmessage(D),300)}}}let Et,pr={},gr={};function Ki(n,d){n in pr?pr[n](d):console.error("WS-API Unknown websocket event:",n)}function kr(n,d){n in gr?gr[n](d):console.error("WS-API Unknown websocket event:",n)}function Vi(){pr={},gr={}}const ne={init(){try{Et&&Et.close(1e3),Et=new Ga(`${window.location.protocol.replace("http","ws")}//${window.location.host}/ws`),Et.binaryType="blob",Et.onclose=n=>{kr("ws-close",n.reason||"Connection closed"),Vi()},Et.onmessage=async n=>{if(n.data instanceof Blob){const d=parseInt(await n.data.slice(0,10).text()),g=d.toString().length+1,x=await n.data.slice(g,g+d).text(),E=JSON.parse(x);E.error?kr(E.response,E.error):Ki(E.response,{payload:E.payload,blob:n.data.slice(g+d)})}else{const d=JSON.parse(n.data);d.error?kr(d.response,d.error):Ki(d.response,d.payload)}},Et.onerror=n=>{kr("ws-error","Connection error")}}catch(n){alert(n)}},register(n,d=null,g=null){d&&(pr[n]=d),g&&(gr[n]=g)},unregister(...n){n.forEach(d=>{delete gr[d],delete pr[d]})},send(n,d){Et.send(JSON.stringify({request:n,payload:d}))},close(){Vi(),Et.close()}};var Xa=X('<div class="spinner-grow mx-2 text-light" role="status"><span class="visually-hidden">Loading...</span></div>'),Za=X('<div class="mt-4 text-light"> </div>'),Ja=X('<div class="bg-outer position-fixed d-flex justify-content-center align-items-center top-0 start-0 end-0 bottom-0 svelte-1l5azpb"><div class="bg-inner d-flex flex-column rounded p-3 svelte-1l5azpb"><div class="d-flex justify-content-center align-items-center"></div> <!></div></div>');function Us(n,d){Ye(d,!1);let g=he(d,"text",8,""),x=le(!1);at(()=>{setTimeout(()=>Y(x,!0),250)}),it();var E=ir(),D=Oe(E);{var L=r=>{var o=Ja(),c=P(o),f=P(c);_t(f,4,()=>[1,2,3],ft,(_,S)=>{var u=Xa();$(_,u)});var l=U(f,2);{var a=_=>{var S=Za(),u=P(S);oe(()=>se(u,g())),$(_,S)};te(l,_=>{g()&&_(a)})}dt(1,o,()=>jo),$(r,o)};te(D,r=>{b(x)&&r(L)})}$(n,E),Qe()}var Ya=X('<!> <div class="container pt-5"><!> <form class="container login-form svelte-ur79cd"><div class="form-floating mb-2"><input type="text" class="form-control" id="loginName" placeholder=" " required autocomplete="username"/> <label for="loginName">Username</label></div> <div class="form-floating mb-2"><input type="password" class="form-control" id="loginPw" placeholder=" " required autocomplete="current-password"/> <label for="loginPw">Password</label></div> <div class="col-12"><button type="submit" class="btn btn-primary w-100">Login</button></div></form></div>',1);function Qa(n,d){Ye(d,!1);let g=he(d,"username",12,"admin"),x=le("123456"),E=le(!1),D=le("");const L=Ts();at(()=>{ne.register("login",({username:i})=>{L("login",{username:i})},i=>{Y(E,!1),Le.add({text:i,type:"error"})})}),Ut(()=>{ne.unregister("login")});async function r(){Y(E,!0),ne.send("login",{username:g(),password:b(x)}),Y(D,""),Y(x,"")}it();var o=Ya(),c=Oe(o);{var f=i=>{Us(i,{})};te(c,i=>{b(E)&&i(f)})}var l=U(c,2),a=P(l);{var _=i=>{Ka(i,{type:"error",dismissible:!0,children:(h,p)=>{var m=ut();oe(()=>se(m,b(D))),$(h,m)},$$slots:{default:!0}})};te(a,i=>{b(D)&&i(_)})}var S=U(a,2),u=P(S),t=P(u),s=U(u,2),e=P(s);Hr(t,g),pe("input",t,()=>{g(g().toLowerCase().trim())}),Hr(e,()=>b(x),i=>Y(x,i)),pe("submit",S,Fr(()=>r())),dt(3,S,()=>Dt),$(n,o),Qe()}function ar(n,d=0){return Math.round(n*10**d)/10**d}function gt(n){const d=["","Ki","Mi","Gi","Ti"];let g=0;for(;n>=1024;)n/=1024,g++;const x=Math.max(Math.floor(Math.log10(Math.floor(n))),0);return ar(n,2-x)+" "+d[g]+"B"}function bt(n){return new Date(n).toLocaleString(void 0,{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})}function $s(n,d){if(window?.navigator?.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(n,d);else{const g=document.createElement("a");document.body.appendChild(g);const x=window.URL.createObjectURL(n);g.href=x,g.download=d,g.click(),setTimeout(()=>{window.URL.revokeObjectURL(x),document.body.removeChild(g)},0)}}var el=X('<div class="d-flex align-items-center"><strong>Loading...</strong> <div class="spinner-border ms-auto" role="status" aria-hidden="true"></div></div>'),tl=X('<span class="spinner-grow spinner-grow-sm" role="status" aria-hidden="true"></span>'),rl=X('<button type="button" class="btn btn-outline-warning"><!> Restart</button>'),il=X('<span class="spinner-grow spinner-grow-sm" role="status" aria-hidden="true"></span>'),sl=X('<button type="button" class="btn btn-outline-danger"><!> Stop</button>'),nl=X("<!> <!>",1),ol=X('<span class="spinner-grow spinner-grow-sm" role="status" aria-hidden="true"></span>'),al=X('<button type="button" class="btn btn-outline-success"><!> Start</button>'),ll=X('<div class="ms-4"><!></div>'),cl=X('<span class="text-muted font-monospace"> </span>'),hl=X('<a target="_blank" rel="noopener noreferrer" class="text-decoration-none"> </a>'),dl=X('<a target="_blank" rel="noopener noreferrer" class="text-decoration-none"> </a>'),ul=X('<div class="d-flex mb-3"><div class="icon-left ms-1 me-3 svelte-n9m8lc"><!></div> <div class="flex-grow-1"><div class="mb-1">Processor</div> <div class="progress"><div class="progress-bar text-white overflow-visible ps-1"> </div></div></div></div>'),fl=X('<span class="badge rounded-pill bg-primary ms-2"> </span>'),_l=X('<span class="badge rounded-pill bg-warning ms-2"> </span>'),vl=X('<span class="badge rounded-pill bg-info ms-2"> </span>'),pl=X('<div class="progress-bar progress-bar-striped bg-warning"></div>'),gl=X('<div class="progress"><div class="progress-bar text-white overflow-visible ps-1"> </div> <!></div>'),ml=X('<div class="d-flex mb-3"><div class="icon-left ms-1 me-3 svelte-n9m8lc"><!></div> <div class="flex-grow-1"><div class="mb-1"><span class="me-2">Memory</span> <!> <!> <!></div> <!></div></div>'),Sl=X('<div class="me-5"><div class="mb-1">Network</div> <span title="Received Traffic" class="me-3"> </span> <span title="Sent Traffic"> </span></div>'),bl=X('<span class="badge bg-dark me-2"> </span>'),wl=X('<div class="flex-grow-1"><div class="mb-1">Ports</div> <!></div>'),Cl=X('<div class="d-flex mb-3"><div class="icon-left ms-1 me-3 svelte-n9m8lc"><!></div> <!> <!></div>'),yl=X('<div class="fw-bold">Stopped</div> <!>',1),El=X('<div class="fw-bold">Started</div> ',1),xl=X('<div class="fw-bold">Stopped</div> ',1),kl=X('<div class="fw-bold">Started</div> ',1),Ll=X('<tr><td class="text-end border-end text-break"> </td><td class="text-break"> </td></tr>'),Dl=X('<tr><td class="text-end border-end text-break"> </td><td class="text-break"> </td></tr>'),Rl=X('<div class="d-flex mb-3"><div class="icon-left ms-1 me-3 svelte-n9m8lc"><!></div> <div class="flex-grow-1 d-lg-flex" style="font-size: small"><div><table class="table table-striped border"><thead><tr><th scope="col" colspan="2" style="font-weight: normal">Environment Variables</th></tr></thead><tbody></tbody></table></div> <div><table class="table table-striped border"><thead><tr><th scope="col" colspan="2" style="font-weight: normal">Labels</th></tr></thead><tbody></tbody></table></div></div></div>'),Al=X('<div class="d-flex mb-3"><div class="icon-left ms-1 me-3 svelte-n9m8lc"><!></div> <div class="d-flex flex-column flex-grow-1"><div class="flex-grow-1 d-flex align-items-center justify-content-between"><div class="flex-grow-1"><div class="mb-1"><span class="me-2">Container</span> <span class="text-muted font-monospace"> </span></div> <div><h6> </h6></div></div> <!></div> <div><!> <code> </code></div></div></div> <div class="d-flex mb-3"><div class="icon-left ms-1 me-3 svelte-n9m8lc"><!></div> <div class="flex-grow-1"><div class="mb-1"><span class="me-2">Image</span> <!></div> <div><h6><!> <span class="ms-1"><!> </span></h6></div></div></div> <!> <!> <!> <div class="d-flex mb-3"><div class="icon-left ms-1 me-3 svelte-n9m8lc"><!></div> <div class="flex-grow-1 pb-5 mb-5"><div class="mb-1">Timeline</div> <div class="timeline mt-2 svelte-n9m8lc"><div class="tl-container svelte-n9m8lc" style="margin-left: 5%"><div class="popup svelte-n9m8lc"><div class="fw-bold">Created</div> </div></div> <div class="tl-container svelte-n9m8lc" style="margin-left: 27%"><div class="popup svelte-n9m8lc"><div class="fw-bold"> </div> Crashes</div></div> <div class="tl-container svelte-n9m8lc" style="margin-left: 49%"><div class="popup svelte-n9m8lc"><!></div></div> <div class="tl-container svelte-n9m8lc" style="margin-left: 71%"><div class="popup svelte-n9m8lc"><!></div></div> <div class="tl-container svelte-n9m8lc" style="margin-left: 93%"><div class="popup svelte-n9m8lc">Currently <div class="fw-bold"> </div></div></div></div></div></div> <!>',1),Tl=X("<div><!></div>");function Bl(n,d){Ye(d,!1);const g=le(),x=le(),E=le(),D=le();let L=he(d,"enable_actions",8),r=he(d,"container_id",8),o,c,f=le(!0),l=le(null),a=le();yr(()=>{r()!==o&&(o=r(),Y(f,!0),Y(l,null),r()&&ne.send("get_container_info",{container_id:r()}))}),at(()=>{window.scrollTo({top:0,behavior:"smooth"}),ne.register("get_container_info",e=>{e.id===r()&&(Y(a,e),Y(f,!1))},e=>Le.add({text:e,type:"error"})),ne.register("set_container_state",()=>{Y(l,null)},e=>Le.add({text:e,type:"error"})),c=setInterval(()=>{ne.send("get_container_info",{container_id:r()})},3e3)}),Ut(()=>{clearInterval(c),ne.unregister("get_container_info"),ne.unregister("set_container_state")});function _(e){switch(ne.send("set_container_state",{container_id:r(),action:e}),Y(l,e),e){case"start":Le.add({text:"Starting container ...",type:"success"});break;case"restart":Le.add({text:"Restarting container ...",type:"info"});break;case"stop":Le.add({text:"Stopping container ...",type:"info"});break}}Ct(()=>b(a),()=>{Y(g,(b(a)?.mem?.used||0)*100/(b(a)?.mem?.total||0))}),Ct(()=>b(a),()=>{Y(x,(b(a)?.mem?.max_used||0)*100/(b(a)?.mem?.total||0))}),Ct(()=>b(a),()=>{Y(E,b(a)?.image.name.includes(":")?b(a)?.image.name.slice(0,b(a)?.image.name.lastIndexOf(":")):b(a)?.image.name)}),Ct(()=>b(a),()=>{Y(D,b(a)?.image.name.includes(":")?b(a)?.image.name.split(":").pop():"latest")}),wr(),it();var S=Tl(),u=P(S);{var t=e=>{var i=el();$(e,i)},s=e=>{var i=Al(),h=Oe(i),p=P(h),m=P(p);de(m,{get icon(){return zs},size:"2x"});var C=U(p,2),v=P(C),w=P(v),T=P(w),A=U(P(T),2),I=P(A),R=U(T,2),N=P(R),q=P(N),Z=U(w,2);{var Q=ce=>{var _e=ll(),be=P(_e);{var Te=Se=>{var Pe=nl(),tt=Oe(Pe);{var Ne=Be=>{var Re=rl(),Me=P(Re);{var we=Ce=>{de(Ce,{get icon(){return Ws}})},He=Ce=>{var qe=tl();$(Ce,qe)};te(Me,Ce=>{b(l)?Ce(He,!1):Ce(we)})}oe(()=>Re.disabled=!!b(l)),pe("click",Re,()=>_("restart")),$(Be,Re)};te(tt,Be=>{(!b(l)||b(l)==="restart")&&Be(Ne)})}var Ke=U(tt,2);{var ct=Be=>{var Re=sl(),Me=P(Re);{var we=Ce=>{de(Ce,{get icon(){return La}})},He=Ce=>{var qe=il();$(Ce,qe)};te(Me,Ce=>{b(l)?Ce(He,!1):Ce(we)})}oe(()=>Re.disabled=!!b(l)),pe("click",Re,()=>_("stop")),$(Be,Re)};te(Ke,Be=>{(!b(l)||b(l)==="stop")&&Be(ct)})}$(Se,Pe)},Ue=(Se,Pe)=>{{var tt=Ne=>{var Ke=al(),ct=P(Ke);{var Be=Me=>{de(Me,{get icon(){return Aa}})},Re=Me=>{var we=ol();$(Me,we)};te(ct,Me=>{b(l)?Me(Re,!1):Me(Be)})}oe(()=>Ke.disabled=!!b(l)),pe("click",Ke,()=>_("start")),$(Ne,Ke)};te(Se,Ne=>{(!b(l)||b(l)==="start")&&Ne(tt)},Pe)}};te(be,Se=>{b(a),j(()=>b(a).status==="running")?Se(Te):Se(Ue,!1)})}$(ce,_e)};te(Z,ce=>{L()&&ce(Q)})}var J=U(v,2),y=P(J);de(y,{get icon(){return pa}});var B=U(y,2),M=P(B),O=U(h,2),F=P(O),K=P(F);de(K,{get icon(){return la},size:"2x"});var ee=U(F,2),re=P(ee),H=U(P(re),2);{var k=ce=>{var _e=cl(),be=P(_e);oe(Te=>se(be,Te),[()=>(b(a),j(()=>b(a).image.hash.substring(0,19)))],fe),$(ce,_e)};te(H,ce=>{b(a),j(()=>b(a).image?.hash!==b(a)?.image?.name)&&ce(k)})}var z=U(re,2),W=P(z),V=P(W);{var G=ce=>{var _e=hl(),be=P(_e);oe(()=>{Fe(_e,"href",`https://hub.docker.com/_/${b(E)??""}`),se(be,b(E))}),$(ce,_e)},ae=(ce,_e)=>{{var be=Ue=>{var Se=dl(),Pe=P(Se);oe(()=>{Fe(Se,"href",`https://hub.docker.com/r/${b(E)??""}`),se(Pe,b(E))}),$(Ue,Se)},Te=Ue=>{var Se=ut();oe(()=>se(Se,b(E))),$(Ue,Se)};te(ce,Ue=>{b(E),j(()=>b(E).match(/^\w+\/\w+$/))?Ue(be):Ue(Te,!1)},_e)}};te(V,ce=>{b(E),j(()=>!b(E).includes("/"))?ce(G):ce(ae,!1)})}var ue=U(V,2),ve=P(ue);de(ve,{get icon(){return ga}});var ge=U(ve),ie=U(O,2);{var ze=ce=>{var _e=ul(),be=P(_e),Te=P(be);de(Te,{get icon(){return Ns},size:"2x"});var Ue=U(be,2),Se=U(P(Ue),2),Pe=P(Se),tt=P(Pe);oe(Ne=>{Lr(Pe,`width: ${b(a),j(()=>b(a).cpu.perc)??""}%`),se(tt,`${Ne??""}%`)},[()=>(Ae(ar),b(a),j(()=>ar(b(a).cpu.perc)))],fe),$(ce,_e)};te(ie,ce=>{b(a),j(()=>b(a).cpu)&&ce(ze)})}var et=U(ie,2);{var vt=ce=>{var _e=ml(),be=P(_e),Te=P(be);de(Te,{get icon(){return Hs},size:"2x"});var Ue=U(be,2),Se=P(Ue),Pe=U(P(Se),2);{var tt=we=>{var He=fl(),Ce=P(He);oe(qe=>se(Ce,`Now ${qe??""}`),[()=>(Ae(gt),b(a),j(()=>gt(b(a).mem.used)))],fe),$(we,He)};te(Pe,we=>{b(a),j(()=>b(a).mem.used!==null)&&we(tt)})}var Ne=U(Pe,2);{var Ke=we=>{var He=_l(),Ce=P(He);oe(qe=>se(Ce,`Max ${qe??""}`),[()=>(Ae(gt),b(a),j(()=>gt(b(a).mem.max_used)))],fe),$(we,He)};te(Ne,we=>{b(a),j(()=>b(a).mem.max_used!==null)&&we(Ke)})}var ct=U(Ne,2);{var Be=we=>{var He=vl(),Ce=P(He);oe(qe=>se(Ce,`Limit ${qe??""}`),[()=>(Ae(gt),b(a),j(()=>gt(b(a).mem.total)))],fe),$(we,He)};te(ct,we=>{b(a),j(()=>b(a).mem.total!==null)&&we(Be)})}var Re=U(Se,2);{var Me=we=>{var He=gl(),Ce=P(He),qe=P(Ce),sr=U(Ce,2);{var nr=yt=>{var ki=pl();oe(()=>Lr(ki,`width: ${b(x)-b(g)}%`)),$(yt,ki)};te(sr,yt=>{b(a),j(()=>b(a).mem.max_used!==null)&&yt(nr)})}oe(yt=>{Lr(Ce,`width: ${b(g)??""}%; z-index: 2`),se(qe,`${yt??""}%`)},[()=>(Ae(ar),b(g),j(()=>ar(b(g))))],fe),$(we,He)};te(Re,we=>{b(a),j(()=>b(a).mem.used!==null&&b(a).mem.total!==null)&&we(Me)})}$(ce,_e)};te(et,ce=>{b(a),j(()=>b(a).mem)&&ce(vt)})}var me=U(et,2);{var We=ce=>{var _e=Cl(),be=P(_e),Te=P(be);de(Te,{get icon(){return ya},size:"2x"});var Ue=U(be,2);{var Se=Ne=>{var Ke=Sl(),ct=U(P(Ke),2),Be=P(ct),Re=U(ct,2),Me=P(Re);oe((we,He)=>{se(Be,`▼ ${we??""}`),se(Me,`▲ ${He??""}`)},[()=>(Ae(gt),b(a),j(()=>gt(b(a).net.rx_bytes))),()=>(Ae(gt),b(a),j(()=>gt(b(a).net.tx_bytes)))],fe),$(Ne,Ke)};te(Ue,Ne=>{b(a),j(()=>b(a).net)&&Ne(Se)})}var Pe=U(Ue,2);{var tt=Ne=>{var Ke=wl(),ct=U(P(Ke),2);_t(ct,1,()=>(b(a),j(()=>b(a).ports)),ft,(Be,Re)=>{var Me=bl(),we=P(Me);oe(()=>se(we,b(Re))),$(Be,Me)}),$(Ne,Ke)};te(Pe,Ne=>{b(a),j(()=>b(a).ports?.length>0)&&Ne(tt)})}$(ce,_e)};te(me,ce=>{b(a),j(()=>b(a).net||b(a).ports?.length>0)&&ce(We)})}var Ie=U(me,2),lt=P(Ie),ke=P(lt);de(ke,{get icon(){return Ca},size:"2x"});var Xe=U(lt,2),pt=U(P(Xe),2),$e=P(pt),je=P($e),Ze=U(P(je)),St=U($e,2),Ee=P(St),Jr=P(Ee),qs=P(Jr),Ei=U(St,2),Ks=P(Ei),Vs=P(Ks);{var Gs=ce=>{var _e=yl(),be=U(Oe(_e),2);{var Te=Se=>{var Pe=ut("Never");$(Se,Pe)},Ue=Se=>{var Pe=ut();oe(tt=>se(Pe,tt),[()=>(Ae(bt),b(a),j(()=>bt(b(a).finished_at)))],fe),$(Se,Pe)};te(be,Se=>{b(a),j(()=>b(a).finished_at<b(a).created_at)?Se(Te):Se(Ue,!1)})}$(ce,_e)},Xs=ce=>{var _e=El(),be=U(Oe(_e));oe(Te=>se(be,` ${Te??""}`),[()=>(Ae(bt),b(a),j(()=>bt(b(a).started_at)))],fe),$(ce,_e)};te(Vs,ce=>{b(a),j(()=>b(a).finished_at<b(a).started_at)?ce(Gs):ce(Xs,!1)})}var xi=U(Ei,2),Zs=P(xi),Js=P(Zs);{var Ys=ce=>{var _e=xl(),be=U(Oe(_e));oe(Te=>se(be,` ${Te??""}`),[()=>(Ae(bt),b(a),j(()=>bt(b(a).finished_at)))],fe),$(ce,_e)},Qs=ce=>{var _e=kl(),be=U(Oe(_e));oe(Te=>se(be,` ${Te??""}`),[()=>(Ae(bt),b(a),j(()=>bt(b(a).started_at)))],fe),$(ce,_e)};te(Js,ce=>{b(a),j(()=>b(a).finished_at>b(a).started_at)?ce(Ys):ce(Qs,!1)})}var en=U(xi,2),tn=P(en),rn=U(P(tn)),sn=P(rn),nn=U(Ie,2);{var on=ce=>{var _e=Rl(),be=P(_e),Te=P(be);de(Te,{get icon(){return va},size:"2x"});var Ue=U(be,2),Se=P(Ue),Pe=P(Se),tt=U(P(Pe));_t(tt,5,()=>(b(a),j(()=>Object.entries(b(a).env).sort(([Be],[Re])=>Be.localeCompare(Re)))),ft,(Be,Re)=>{var Me=Mi(()=>Ri(b(Re),2));let we=()=>b(Me)[0],He=()=>b(Me)[1];var Ce=Ll(),qe=P(Ce),sr=P(qe),nr=U(qe),yt=P(nr);oe(()=>{se(sr,we()),se(yt,He())}),$(Be,Ce)});var Ne=U(Se,2),Ke=P(Ne),ct=U(P(Ke));_t(ct,5,()=>(b(a),j(()=>Object.entries(b(a).labels).sort(([Be],[Re])=>Be.localeCompare(Re)))),ft,(Be,Re)=>{var Me=Mi(()=>Ri(b(Re),2));let we=()=>b(Me)[0],He=()=>b(Me)[1];var Ce=Dl(),qe=P(Ce),sr=P(qe),nr=U(qe),yt=P(nr);oe(()=>{se(sr,we()),se(yt,He())}),$(Be,Ce)}),$(ce,_e)};te(nn,ce=>{b(a),j(()=>b(a).env||b(a).labels)&&ce(on)})}oe((ce,_e,be,Te)=>{se(I,`#${ce??""}`),se(q,_e),se(M,(b(a),j(()=>b(a).command))),se(ge,` ${b(D)??""}`),se(Ze,` ${be??""}`),se(qs,(b(a),j(()=>b(a).crashes))),se(sn,Te)},[()=>(b(a),j(()=>b(a).id.substring(0,12))),()=>(b(a),j(()=>b(a).name.replace(/^\//,""))),()=>(Ae(bt),b(a),j(()=>bt(b(a).created_at))),()=>(b(a),j(()=>b(a).status.charAt(0).toUpperCase()+b(a).status.slice(1).toLowerCase()))],fe),$(e,i)};te(u,e=>{b(f)?e(t):e(s,!1)})}$(n,S),Qe()}function Ml({onlyFirst:n=!1}={}){const g=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?(?:\\u0007|\\u001B\\u005C|\\u009C))","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-nq-uy=><~]))"].join("|");return new RegExp(g,n?void 0:"g")}const Ol=Ml();function Il(n){if(typeof n!="string")throw new TypeError(`Expected a \`string\`, got \`${typeof n}\``);return n.replace(Ol,"")}var Pl=X('<div class="d-flex align-items-center"><strong>Loading...</strong> <div class="spinner-border ms-auto" role="status" aria-hidden="true"></div></div>'),Hl=X("<p>No Log Output yet ...</p>"),Fl=X('<time class="me-1 px-1 svelte-itlo0b"><!></time>'),Nl=X('<span class="pe-3 svelte-itlo0b"><!><span class="pe-3"> </span></span>'),zl=X('<div class="d-flex justify-content-between align-items-center mb-2"><div><select class="form-select"><option>hide timestamps</option><option>local timestamps</option><option>raw timestamps</option></select></div> <div><button type="button" class="btn mx-1" title="Scroll to Top"><!></button> <button type="button" class="btn mx-1" title="Scroll to Bottom"><!></button> <button type="button" class="btn mx-1" title="Download shown log lines"><!></button> <button type="button" class="btn mx-1" title="Fullscreen"><!></button></div></div> <pre class="mb-0 svelte-itlo0b"></pre>',1),Wl=X("<div><!></div>");function Ul(n,d){Ye(d,!1);let g=he(d,"container_id",8),x,E=le(),D,L=le(!0),r=le([]),o=le("local");yr(()=>{g()!==x&&(x=g(),Y(L,!0),Y(r,[]),g()&&ne.send("get_container_logs",{container_id:g()}))}),at(()=>{ne.register("get_container_logs",t=>{if(Y(L,!1),t?.length>0){let s=!b(r)||b(E)&&b(E).scrollTop>=b(E).scrollHeight-b(E).clientHeight;const e=b(r).length+t.length;e>5e3&&b(r).slice(e-5e3),b(r).push(...t.map(i=>Il(i))),s&&Ls().then(()=>Yr(E,b(E).scrollTop=b(E).scrollHeight))}},t=>Le.add({text:t,type:"error"})),D=setInterval(()=>{ne.send("get_container_logs",{container_id:g(),onlynew:!0})},3e3)}),Ut(()=>{clearInterval(D),ne.unregister("get_container_logs")});function c(){b(E)?.requestFullscreen&&b(E).requestFullscreen({navigationUI:"show"})}function f(){$s(new Blob(b(r),{type:"text/plain"}),g()+".log")}function l(t){return new Date(t).toLocaleDateString(void 0,{weekday:"short",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})}it();var a=Wl(),_=P(a);{var S=t=>{var s=Pl();$(t,s)},u=(t,s)=>{{var e=h=>{var p=Hl();$(h,p)},i=h=>{var p=zl(),m=Oe(p),C=P(m),v=P(C);oe(()=>{b(o),ao(()=>{})});var w=P(v);w.value=w.__value="off";var T=U(w);T.value=T.__value="local";var A=U(T);A.value=A.__value="raw";var I=U(C,2),R=P(I),N=P(R);de(N,{get icon(){return ua},size:"lg",color:"#666"});var q=U(R,2),Z=P(q);de(Z,{get icon(){return oa},size:"lg",color:"#666"});var Q=U(q,2),J=P(Q);de(J,{get icon(){return Ea},size:"lg",color:"#666"});var y=U(Q,2),B=P(y);de(B,{get icon(){return Fs},size:"lg",color:"#666"});var M=U(m,2);_t(M,5,()=>b(r),ft,(O,F)=>{var K=Nl();const ee=fe(()=>(b(F),j(()=>b(F).substring(0,b(F).indexOf(" "))))),re=fe(()=>(b(F),j(()=>b(F).substring(b(F).indexOf(" ")+1))));var H=P(K);{var k=V=>{var G=Fl(),ae=P(G);{var ue=ge=>{var ie=ut();oe(ze=>se(ie,ze),[()=>(Ae(b(ee)),j(()=>l(b(ee))))],fe),$(ge,ie)},ve=ge=>{var ie=ut();oe(()=>se(ie,b(ee))),$(ge,ie)};te(ae,ge=>{b(o)==="local"?ge(ue):ge(ve,!1)})}oe(()=>Fe(G,"datetime",b(ee))),$(V,G)};te(H,V=>{b(o)!=="off"&&V(k)})}var z=U(H),W=P(z);oe(()=>se(W,b(re))),$(O,K)}),Zr(M,O=>Y(E,O),()=>b(E)),Lo(v,()=>b(o),O=>Y(o,O)),pe("click",R,()=>Yr(E,b(E).scrollTop=0)),pe("click",q,()=>Yr(E,b(E).scrollTop=b(E).scrollHeight)),pe("click",Q,f),pe("click",y,c),$(h,p)};te(t,h=>{b(r),j(()=>b(r).length===0)?h(e):h(i,!1)},s)}};te(_,t=>{b(L)?t(S):t(u,!1)})}$(n,a),Qe()}var $l=X('<div class="dropdown"><button type="button"><!></button> <ul class="dropdown-menu svelte-17q1qz7"><!></ul></div>');function Gi(n,d){let g=he(d,"btnClass",8,"secondary");var x=$l(),E=P(x),D=P(E);Pr(D,d,"button",{},o=>{de(o,{get icon(){return wa}})});var L=U(E,2),r=P(L);Pr(r,d,"default",{},null),oe(()=>Ge(E,1,`btn btn-${g()??""} dropdown-toggle`,"svelte-17q1qz7")),$(n,x)}var jl=X('<li><button type="button"><!></button></li>');function ri(n,d){let g=he(d,"active",8,!1);var x=jl(),E=P(x);let D;var L=P(E);Pr(L,d,"default",{},null),oe(r=>D=Ge(E,1,"dropdown-item",null,D,r),[()=>({active:g()})],fe),pe("click",E,function(r){Po.call(this,d,r)}),$(n,x)}var ql=X('<div class="d-flex align-items-center"><strong>Loading...</strong> <div class="spinner-border ms-auto" role="status" aria-hidden="true"></div></div>'),Kl=X('<button type="button" class="btn btn-outline-primary"><!></button>'),Vl=X('<button type="button" class="btn btn-secondary border-dark"> </button>'),Gl=X("<!> <!>",1),Xl=X('<span slot="button" class="me-1"><!> Add</span>'),Zl=X('<!> <input type="file" style="display: none"/>',1),Jl=X('<span class="badge bg-warning ms-2">readonly</span>'),Yl=X('<div class="d-flex justify-content-between align-items-center"><span> </span> <span><!> <span class="badge bg-secondary ms-2"> </span></span></div>'),Ql=X('<span slot="button" class="me-1"><!> Volumes</span>'),ec=X('<div class="ms-4"><!></div>'),tc=X('<tr><td><!> <wbr/> </td><td class="text-end" style="word-break: break-all"><!></td><td class="text-center"> <wbr/> </td><td class="text-center"> </td><td class="text-center font-monospace" style="word-break: break-all"> </td></tr>'),rc=X('<div class="d-flex justify-content-between align-items-center"><div class="d-flex"><div class="btn-group me-1"><!> <button type="button" class="btn btn-outline-primary"><!></button></div> <div class="btn-group mx-2" role="group"></div></div> <div class="d-flex"><!> <!></div></div> <table class="table table-hover"><thead><tr><th scope="col">Name</th><th scope="col" class="text-end">Size</th><th scope="col" class="text-center">Owner</th><th scope="col" class="text-center">Modified</th><th scope="col" class="text-center">Permissions</th></tr></thead><tbody></tbody></table>',1),ic=X('<div style="overflow-x:auto"><!></div>');function sc(n,d){Ye(d,!1);const g=le();let x=he(d,"container_id",8),E=he(d,"allow_download",8),D=he(d,"allow_upload",8),L=le(),r=le(!0),o,c=le("/"),f=le(null),l=le(null);yr(()=>{x()!==o&&(o=x(),Y(r,!0),Y(c,"/"),Y(f,null),Y(l,null),x()&&ne.send("get_filesystem_info",{container_id:x()}))}),at(()=>{ne.register("get_filesystem_info",p=>{_(p.workdir),Y(l,p)},p=>Le.add({text:p,type:"error"})),ne.register("get_directory_list",p=>{window.scrollTo({top:0,behavior:"smooth"}),Y(f,p.entries),Y(c,p.path),Y(r,!1)},p=>{Le.add({text:p,type:"error"}),Y(f,null),Y(r,!1)}),ne.register("download_file",p=>{$s(p.blob,p.payload.path.split("/").pop())},p=>Le.add({text:p,type:"error"})),ne.register("create_folder",()=>{_(b(c))},p=>Le.add({text:p,type:"error"})),ne.register("upload_file",()=>{_(b(c))},p=>Le.add({text:p,type:"error"}))}),Ut(()=>{ne.unregister("get_filesystem_info"),ne.unregister("get_directory_list"),ne.unregister("create_folder"),ne.unregister("upload_file"),ne.unregister("download_file")});function a(p){let m=b(c);m.endsWith("/")||(m+="/"),m+=p,_(m)}function _(p){Y(c,p),ne.send("get_directory_list",{container_id:x(),path:p}),Y(r,!0),Y(f,null)}function S(p){E()&&ne.send("download_file",{container_id:x(),path:`${b(c)}/${p}`})}function u(){const p=prompt("Folder name:");p&&ne.send("create_folder",{container_id:x(),path:`${b(c)}/${p}`})}async function t(){const p=C=>new Promise((v,w)=>{const T=new FileReader;T.readAsDataURL(C),T.onload=()=>v(T.result.split(",")[1]),T.onerror=A=>w(A)}),m=b(L).files?.[0];m&&confirm(`Upload file "${m.name}"?`)&&ne.send("upload_file",{container_id:x(),path:`${b(c)}/${m.name}`,content:await p(m)})}Ct(()=>b(c),()=>{Y(g,()=>{const p=[],m=b(c).split("/");let C="";for(const v of m)v&&(C+="/"+v,p.push({segment:v,totalPath:C}));return p.unshift({segment:"/",totalPath:"/"}),p})}),wr(),it();var s=ic(),e=P(s);{var i=p=>{var m=ql();$(p,m)},h=p=>{var m=rc(),C=Oe(m),v=P(C),w=P(v),T=P(w);{var A=O=>{var F=Kl(),K=P(F);de(K,{get icon(){return ka}}),pe("click",F,()=>_(b(l).workdir)),$(O,F)};te(T,O=>{b(l)&&O(A)})}var I=U(T,2),R=P(I);de(R,{get icon(){return Ws}});var N=U(w,2);_t(N,5,()=>(b(g),j(()=>b(g)())),ft,(O,F)=>{var K=Vl(),ee=P(K);oe(()=>se(ee,(b(F),j(()=>b(F).segment||"/")))),pe("click",K,()=>_(b(F).totalPath)),$(O,K)});var q=U(v,2),Z=P(q);{var Q=O=>{var F=Zl(),K=Oe(F);Gi(K,{btnClass:"outline-primary",children:(re,H)=>{var k=Gl(),z=Oe(k);ri(z,{$$events:{click:u},children:(V,G)=>{var ae=ut("Add Folder");$(V,ae)},$$slots:{default:!0}});var W=U(z,2);ri(W,{$$events:{click:()=>b(L).click()},children:(V,G)=>{var ae=ut("Upload File");$(V,ae)},$$slots:{default:!0}}),$(re,k)},$$slots:{default:!0,button:(re,H)=>{var k=Xl(),z=P(k);de(z,{get icon(){return Ta}}),$(re,k)}}});var ee=U(K,2);Zr(ee,re=>Y(L,re),()=>b(L)),pe("change",ee,t),$(O,F)};te(Z,O=>{D()&&O(Q)})}var J=U(Z,2);{var y=O=>{var F=ec(),K=P(F);Gi(K,{children:(ee,re)=>{var H=ir(),k=Oe(H);_t(k,1,()=>(b(l),j(()=>b(l).mounts)),ft,(z,W)=>{ri(z,{$$events:{click:()=>_(b(W).destination)},children:(V,G)=>{var ae=Yl(),ue=P(ae),ve=P(ue),ge=U(ue,2),ie=P(ge);{var ze=me=>{var We=Jl();$(me,We)};te(ie,me=>{b(W),j(()=>b(W).readonly)&&me(ze)})}var et=U(ie,2),vt=P(et);oe(()=>{se(ve,(b(W),j(()=>b(W).destination))),se(vt,(b(W),j(()=>b(W).type)))}),$(V,ae)},$$slots:{default:!0}})}),$(ee,H)},$$slots:{default:!0,button:(ee,re)=>{var H=Ql(),k=P(H);de(k,{get icon(){return Sa}}),$(ee,H)}}}),$(O,F)};te(J,O=>{b(l),j(()=>b(l)&&b(l).mounts?.length>0)&&O(y)})}var B=U(C,2),M=U(P(B));_t(M,5,()=>b(f)||[],ft,(O,F)=>{var K=tc();let ee;var re=P(K),H=P(re);{var k=me=>{de(me,{get icon(){return aa},size:"lg",color:"#3B6"})},z=(me,We)=>{{var Ie=ke=>{de(ke,{get icon(){return Ra},size:"lg",color:"#36B"})},lt=(ke,Xe)=>{{var pt=je=>{de(je,{get icon(){return sa},size:"lg",color:"#B36"})},$e=je=>{var Ze=ut();oe(()=>se(Ze,(b(F),j(()=>b(F).type)))),$(je,Ze)};te(ke,je=>{b(F),j(()=>b(F).type==="l")?je(pt):je($e,!1)},Xe)}};te(me,ke=>{b(F),j(()=>b(F).type==="f")?ke(Ie):ke(lt,!1)},We)}};te(H,me=>{b(F),j(()=>b(F).type==="d")?me(k):me(z,!1)})}var W=U(H,3),V=U(re),G=P(V);{var ae=me=>{var We=ut();oe(()=>se(We,(b(F),j(()=>b(F).filesize)))),$(me,We)};te(G,me=>{b(F),j(()=>b(F).type==="f")&&me(ae)})}var ue=U(V),ve=P(ue),ge=U(ve,2,!0),ie=U(ue),ze=P(ie),et=U(ie),vt=P(et);oe(me=>{ee=Ge(K,1,"svelte-1hbb9tz",null,ee,me),se(W,` ${b(F),j(()=>b(F).name)??""}`),se(ve,`${b(F),j(()=>b(F).owner)??""} `),se(ge,(b(F),j(()=>b(F).group))),se(ze,(b(F),j(()=>b(F).modtime))),se(vt,(b(F),j(()=>b(F).permissions)))},[()=>({clickable:b(F).type==="d"||E()})],fe),pe("click",K,()=>b(F).type==="d"?a(b(F).name):S(b(F).name)),$(O,K)}),pe("click",I,()=>_(b(c))),$(p,m)};te(e,p=>{b(r)?p(i):p(h,!1)})}$(n,s),Qe()}var nc=X('<div class="d-flex align-items-center"><strong>Loading...</strong> <div class="spinner-border ms-auto" role="status" aria-hidden="true"></div></div>'),oc=X('<div style="width: 2rem" class="me-2 d-flex justify-content-end align-items-center"><!></div>'),ac=X('<tr><td class="text-end"> </td><td class="text-end"><!></td><td class="text-end"><!></td><td class="text-center"> </td><td class="text-center"> </td><td class="text-start"><div class="d-flex"><!> <div class="font-monospace"> </div></div></td></tr>'),lc=X('<table class="table table-striped"><thead><tr><th scope="col" class="text-end" title="Process ID">PID</th><th scope="col" class="text-end" title="Processor Usage">CPU</th><th scope="col" class="text-end">Memory</th><th scope="col" class="text-center">Started At</th><th scope="col" class="text-center">User</th><th scope="col" class="text-start">Command</th></tr></thead><tbody></tbody></table>'),cc=X('<div style="overflow-x:auto"><!></div>');function hc(n,d){Ye(d,!1);let g=he(d,"container_id",8),x,E,D=le(!0),L=le(null);yr(()=>{g()!==x&&(x=g(),Y(D,!0),Y(L,null),g()&&ne.send("get_processes",{container_id:g()}))}),at(()=>{ne.register("get_processes",a=>{Y(L,a),Y(D,!1)},a=>Le.add({text:a,type:"error"})),E=setInterval(()=>{ne.send("get_processes",{container_id:g()})},3e3)}),Ut(()=>{clearInterval(E),ne.unregister("get_processes")});function r(a,_){return a??_}it();var o=cc(),c=P(o);{var f=a=>{var _=nc();$(a,_)},l=a=>{var _=lc(),S=U(P(_));_t(S,5,()=>b(L)||[],ft,(u,t)=>{var s=ac(),e=P(s),i=P(e),h=U(e),p=P(h);{var m=y=>{var B=ut();oe(()=>se(B,`${b(t),j(()=>b(t)["%cpu"])??""}%`)),$(y,B)};te(p,y=>{b(t),j(()=>r(b(t)["%cpu"],null))&&y(m)})}var C=U(h),v=P(C);{var w=y=>{var B=ut();oe(()=>se(B,`${b(t),j(()=>b(t)["%mem"])??""}%`)),$(y,B)};te(v,y=>{b(t),j(()=>r(b(t)["%mem"],null))&&y(w)})}var T=U(C),A=P(T),I=U(T),R=P(I),N=U(I),q=P(N),Z=P(q);_t(Z,1,()=>(b(t),j(()=>Array(b(t).level))),ft,(y,B,M)=>{var O=oc(),F=P(O);{var K=ee=>{de(ee,{get icon(){return Pa},rotate:90})};te(F,ee=>{b(t),j(()=>parseInt(b(t).level)===M+1)&&ee(K)})}$(y,O)});var Q=U(Z,2),J=P(Q);oe((y,B)=>{se(i,(b(t),j(()=>b(t).pid))),se(A,y),se(R,B),se(J,(b(t),j(()=>b(t).command)))},[()=>(b(t),j(()=>r(b(t).stime,""))),()=>(b(t),j(()=>r(b(t).user,"")))],fe),$(u,s)}),$(a,_)};te(c,a=>{b(D)?a(f):a(l,!1)})}$(n,o),Qe()}var ii={exports:{}},Xi;function dc(){return Xi||(Xi=1,function(n,d){(function(g,x){n.exports=x()})(globalThis,()=>(()=>{var g={4567:function(L,r,o){var c=this&&this.__decorate||function(e,i,h,p){var m,C=arguments.length,v=C<3?i:p===null?p=Object.getOwnPropertyDescriptor(i,h):p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")v=Reflect.decorate(e,i,h,p);else for(var w=e.length-1;w>=0;w--)(m=e[w])&&(v=(C<3?m(v):C>3?m(i,h,v):m(i,h))||v);return C>3&&v&&Object.defineProperty(i,h,v),v},f=this&&this.__param||function(e,i){return function(h,p){i(h,p,e)}};Object.defineProperty(r,"__esModule",{value:!0}),r.AccessibilityManager=void 0;const l=o(9042),a=o(9924),_=o(844),S=o(4725),u=o(2585),t=o(3656);let s=r.AccessibilityManager=class extends _.Disposable{constructor(e,i,h,p){super(),this._terminal=e,this._coreBrowserService=h,this._renderService=p,this._rowColumns=new WeakMap,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="",this._accessibilityContainer=this._coreBrowserService.mainDocument.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=this._coreBrowserService.mainDocument.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let m=0;m<this._terminal.rows;m++)this._rowElements[m]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[m]);if(this._topBoundaryFocusListener=m=>this._handleBoundaryFocus(m,0),this._bottomBoundaryFocusListener=m=>this._handleBoundaryFocus(m,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions(),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=this._coreBrowserService.mainDocument.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this.register(new a.TimeBasedDebouncer(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this.register(this._terminal.onResize(m=>this._handleResize(m.rows))),this.register(this._terminal.onRender(m=>this._refreshRows(m.start,m.end))),this.register(this._terminal.onScroll(()=>this._refreshRows())),this.register(this._terminal.onA11yChar(m=>this._handleChar(m))),this.register(this._terminal.onLineFeed(()=>this._handleChar(`
`))),this.register(this._terminal.onA11yTab(m=>this._handleTab(m))),this.register(this._terminal.onKey(m=>this._handleKey(m.key))),this.register(this._terminal.onBlur(()=>this._clearLiveRegion())),this.register(this._renderService.onDimensionsChange(()=>this._refreshRowsDimensions())),this.register((0,t.addDisposableDomListener)(document,"selectionchange",()=>this._handleSelectionChange())),this.register(this._coreBrowserService.onDprChange(()=>this._refreshRowsDimensions())),this._refreshRows(),this.register((0,_.toDisposable)(()=>{this._accessibilityContainer.remove(),this._rowElements.length=0}))}_handleTab(e){for(let i=0;i<e;i++)this._handleChar(" ")}_handleChar(e){this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==e&&(this._charsToAnnounce+=e):this._charsToAnnounce+=e,e===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=l.tooMuchOutput)))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0}_handleKey(e){this._clearLiveRegion(),new RegExp("\\p{Control}","u").test(e)||this._charsToConsume.push(e)}_refreshRows(e,i){this._liveRegionDebouncer.refresh(e,i,this._terminal.rows)}_renderRows(e,i){const h=this._terminal.buffer,p=h.lines.length.toString();for(let m=e;m<=i;m++){const C=h.lines.get(h.ydisp+m),v=[],w=C?.translateToString(!0,void 0,void 0,v)||"",T=(h.ydisp+m+1).toString(),A=this._rowElements[m];A&&(w.length===0?(A.innerText=" ",this._rowColumns.set(A,[0,1])):(A.textContent=w,this._rowColumns.set(A,v)),A.setAttribute("aria-posinset",T),A.setAttribute("aria-setsize",p))}this._announceCharacters()}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(e,i){const h=e.target,p=this._rowElements[i===0?1:this._rowElements.length-2];if(h.getAttribute("aria-posinset")===(i===0?"1":`${this._terminal.buffer.lines.length}`)||e.relatedTarget!==p)return;let m,C;if(i===0?(m=h,C=this._rowElements.pop(),this._rowContainer.removeChild(C)):(m=this._rowElements.shift(),C=h,this._rowContainer.removeChild(m)),m.removeEventListener("focus",this._topBoundaryFocusListener),C.removeEventListener("focus",this._bottomBoundaryFocusListener),i===0){const v=this._createAccessibilityTreeNode();this._rowElements.unshift(v),this._rowContainer.insertAdjacentElement("afterbegin",v)}else{const v=this._createAccessibilityTreeNode();this._rowElements.push(v),this._rowContainer.appendChild(v)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(i===0?-1:1),this._rowElements[i===0?1:this._rowElements.length-2].focus(),e.preventDefault(),e.stopImmediatePropagation()}_handleSelectionChange(){if(this._rowElements.length===0)return;const e=document.getSelection();if(!e)return;if(e.isCollapsed)return void(this._rowContainer.contains(e.anchorNode)&&this._terminal.clearSelection());if(!e.anchorNode||!e.focusNode)return void console.error("anchorNode and/or focusNode are null");let i={node:e.anchorNode,offset:e.anchorOffset},h={node:e.focusNode,offset:e.focusOffset};if((i.node.compareDocumentPosition(h.node)&Node.DOCUMENT_POSITION_PRECEDING||i.node===h.node&&i.offset>h.offset)&&([i,h]=[h,i]),i.node.compareDocumentPosition(this._rowElements[0])&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_FOLLOWING)&&(i={node:this._rowElements[0].childNodes[0],offset:0}),!this._rowContainer.contains(i.node))return;const p=this._rowElements.slice(-1)[0];if(h.node.compareDocumentPosition(p)&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_PRECEDING)&&(h={node:p,offset:p.textContent?.length??0}),!this._rowContainer.contains(h.node))return;const m=({node:w,offset:T})=>{const A=w instanceof Text?w.parentNode:w;let I=parseInt(A?.getAttribute("aria-posinset"),10)-1;if(isNaN(I))return console.warn("row is invalid. Race condition?"),null;const R=this._rowColumns.get(A);if(!R)return console.warn("columns is null. Race condition?"),null;let N=T<R.length?R[T]:R.slice(-1)[0]+1;return N>=this._terminal.cols&&(++I,N=0),{row:I,column:N}},C=m(i),v=m(h);if(C&&v){if(C.row>v.row||C.row===v.row&&C.column>=v.column)throw new Error("invalid range");this._terminal.select(C.column,C.row,(v.row-C.row)*this._terminal.cols-C.column+v.column)}}_handleResize(e){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let i=this._rowContainer.children.length;i<this._terminal.rows;i++)this._rowElements[i]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[i]);for(;this._rowElements.length>e;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){const e=this._coreBrowserService.mainDocument.createElement("div");return e.setAttribute("role","listitem"),e.tabIndex=-1,this._refreshRowDimensions(e),e}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){this._accessibilityContainer.style.width=`${this._renderService.dimensions.css.canvas.width}px`,this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let e=0;e<this._terminal.rows;e++)this._refreshRowDimensions(this._rowElements[e])}}_refreshRowDimensions(e){e.style.height=`${this._renderService.dimensions.css.cell.height}px`}};r.AccessibilityManager=s=c([f(1,u.IInstantiationService),f(2,S.ICoreBrowserService),f(3,S.IRenderService)],s)},3614:(L,r)=>{function o(a){return a.replace(/\r?\n/g,"\r")}function c(a,_){return _?"\x1B[200~"+a+"\x1B[201~":a}function f(a,_,S,u){a=c(a=o(a),S.decPrivateModes.bracketedPasteMode&&u.rawOptions.ignoreBracketedPasteMode!==!0),S.triggerDataEvent(a,!0),_.value=""}function l(a,_,S){const u=S.getBoundingClientRect(),t=a.clientX-u.left-10,s=a.clientY-u.top-10;_.style.width="20px",_.style.height="20px",_.style.left=`${t}px`,_.style.top=`${s}px`,_.style.zIndex="1000",_.focus()}Object.defineProperty(r,"__esModule",{value:!0}),r.rightClickHandler=r.moveTextAreaUnderMouseCursor=r.paste=r.handlePasteEvent=r.copyHandler=r.bracketTextForPaste=r.prepareTextForTerminal=void 0,r.prepareTextForTerminal=o,r.bracketTextForPaste=c,r.copyHandler=function(a,_){a.clipboardData&&a.clipboardData.setData("text/plain",_.selectionText),a.preventDefault()},r.handlePasteEvent=function(a,_,S,u){a.stopPropagation(),a.clipboardData&&f(a.clipboardData.getData("text/plain"),_,S,u)},r.paste=f,r.moveTextAreaUnderMouseCursor=l,r.rightClickHandler=function(a,_,S,u,t){l(a,_,S),t&&u.rightClickSelect(a),_.value=u.selectionText,_.select()}},7239:(L,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.ColorContrastCache=void 0;const c=o(1505);r.ColorContrastCache=class{constructor(){this._color=new c.TwoKeyMap,this._css=new c.TwoKeyMap}setCss(f,l,a){this._css.set(f,l,a)}getCss(f,l){return this._css.get(f,l)}setColor(f,l,a){this._color.set(f,l,a)}getColor(f,l){return this._color.get(f,l)}clear(){this._color.clear(),this._css.clear()}}},3656:(L,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.addDisposableDomListener=void 0,r.addDisposableDomListener=function(o,c,f,l){o.addEventListener(c,f,l);let a=!1;return{dispose:()=>{a||(a=!0,o.removeEventListener(c,f,l))}}}},3551:function(L,r,o){var c=this&&this.__decorate||function(s,e,i,h){var p,m=arguments.length,C=m<3?e:h===null?h=Object.getOwnPropertyDescriptor(e,i):h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(s,e,i,h);else for(var v=s.length-1;v>=0;v--)(p=s[v])&&(C=(m<3?p(C):m>3?p(e,i,C):p(e,i))||C);return m>3&&C&&Object.defineProperty(e,i,C),C},f=this&&this.__param||function(s,e){return function(i,h){e(i,h,s)}};Object.defineProperty(r,"__esModule",{value:!0}),r.Linkifier=void 0;const l=o(3656),a=o(8460),_=o(844),S=o(2585),u=o(4725);let t=r.Linkifier=class extends _.Disposable{get currentLink(){return this._currentLink}constructor(s,e,i,h,p){super(),this._element=s,this._mouseService=e,this._renderService=i,this._bufferService=h,this._linkProviderService=p,this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this.register(new a.EventEmitter),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this.register(new a.EventEmitter),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this.register((0,_.getDisposeArrayDisposable)(this._linkCacheDisposables)),this.register((0,_.toDisposable)(()=>{this._lastMouseEvent=void 0,this._activeProviderReplies?.clear()})),this.register(this._bufferService.onResize(()=>{this._clearCurrentLink(),this._wasResized=!0})),this.register((0,l.addDisposableDomListener)(this._element,"mouseleave",()=>{this._isMouseOut=!0,this._clearCurrentLink()})),this.register((0,l.addDisposableDomListener)(this._element,"mousemove",this._handleMouseMove.bind(this))),this.register((0,l.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,l.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))}_handleMouseMove(s){this._lastMouseEvent=s;const e=this._positionFromMouseEvent(s,this._element,this._mouseService);if(!e)return;this._isMouseOut=!1;const i=s.composedPath();for(let h=0;h<i.length;h++){const p=i[h];if(p.classList.contains("xterm"))break;if(p.classList.contains("xterm-hover"))return}this._lastBufferCell&&e.x===this._lastBufferCell.x&&e.y===this._lastBufferCell.y||(this._handleHover(e),this._lastBufferCell=e)}_handleHover(s){if(this._activeLine!==s.y||this._wasResized)return this._clearCurrentLink(),this._askForLink(s,!1),void(this._wasResized=!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,s)||(this._clearCurrentLink(),this._askForLink(s,!0))}_askForLink(s,e){this._activeProviderReplies&&e||(this._activeProviderReplies?.forEach(h=>{h?.forEach(p=>{p.link.dispose&&p.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=s.y);let i=!1;for(const[h,p]of this._linkProviderService.linkProviders.entries())e?this._activeProviderReplies?.get(h)&&(i=this._checkLinkProviderResult(h,s,i)):p.provideLinks(s.y,m=>{if(this._isMouseOut)return;const C=m?.map(v=>({link:v}));this._activeProviderReplies?.set(h,C),i=this._checkLinkProviderResult(h,s,i),this._activeProviderReplies?.size===this._linkProviderService.linkProviders.length&&this._removeIntersectingLinks(s.y,this._activeProviderReplies)})}_removeIntersectingLinks(s,e){const i=new Set;for(let h=0;h<e.size;h++){const p=e.get(h);if(p)for(let m=0;m<p.length;m++){const C=p[m],v=C.link.range.start.y<s?0:C.link.range.start.x,w=C.link.range.end.y>s?this._bufferService.cols:C.link.range.end.x;for(let T=v;T<=w;T++){if(i.has(T)){p.splice(m--,1);break}i.add(T)}}}}_checkLinkProviderResult(s,e,i){if(!this._activeProviderReplies)return i;const h=this._activeProviderReplies.get(s);let p=!1;for(let m=0;m<s;m++)this._activeProviderReplies.has(m)&&!this._activeProviderReplies.get(m)||(p=!0);if(!p&&h){const m=h.find(C=>this._linkAtPosition(C.link,e));m&&(i=!0,this._handleNewLink(m))}if(this._activeProviderReplies.size===this._linkProviderService.linkProviders.length&&!i)for(let m=0;m<this._activeProviderReplies.size;m++){const C=this._activeProviderReplies.get(m)?.find(v=>this._linkAtPosition(v.link,e));if(C){i=!0,this._handleNewLink(C);break}}return i}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(s){if(!this._currentLink)return;const e=this._positionFromMouseEvent(s,this._element,this._mouseService);e&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,e)&&this._currentLink.link.activate(s,this._currentLink.link.text)}_clearCurrentLink(s,e){this._currentLink&&this._lastMouseEvent&&(!s||!e||this._currentLink.link.range.start.y>=s&&this._currentLink.link.range.end.y<=e)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,_.disposeArray)(this._linkCacheDisposables))}_handleNewLink(s){if(!this._lastMouseEvent)return;const e=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);e&&this._linkAtPosition(s.link,e)&&(this._currentLink=s,this._currentLink.state={decorations:{underline:s.link.decorations===void 0||s.link.decorations.underline,pointerCursor:s.link.decorations===void 0||s.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,s.link,this._lastMouseEvent),s.link.decorations={},Object.defineProperties(s.link.decorations,{pointerCursor:{get:()=>this._currentLink?.state?.decorations.pointerCursor,set:i=>{this._currentLink?.state&&this._currentLink.state.decorations.pointerCursor!==i&&(this._currentLink.state.decorations.pointerCursor=i,this._currentLink.state.isHovered&&this._element.classList.toggle("xterm-cursor-pointer",i))}},underline:{get:()=>this._currentLink?.state?.decorations.underline,set:i=>{this._currentLink?.state&&this._currentLink?.state?.decorations.underline!==i&&(this._currentLink.state.decorations.underline=i,this._currentLink.state.isHovered&&this._fireUnderlineEvent(s.link,i))}}}),this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange(i=>{if(!this._currentLink)return;const h=i.start===0?0:i.start+1+this._bufferService.buffer.ydisp,p=this._bufferService.buffer.ydisp+1+i.end;if(this._currentLink.link.range.start.y>=h&&this._currentLink.link.range.end.y<=p&&(this._clearCurrentLink(h,p),this._lastMouseEvent)){const m=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);m&&this._askForLink(m,!1)}})))}_linkHover(s,e,i){this._currentLink?.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(e,!0),this._currentLink.state.decorations.pointerCursor&&s.classList.add("xterm-cursor-pointer")),e.hover&&e.hover(i,e.text)}_fireUnderlineEvent(s,e){const i=s.range,h=this._bufferService.buffer.ydisp,p=this._createLinkUnderlineEvent(i.start.x-1,i.start.y-h-1,i.end.x,i.end.y-h-1,void 0);(e?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(p)}_linkLeave(s,e,i){this._currentLink?.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(e,!1),this._currentLink.state.decorations.pointerCursor&&s.classList.remove("xterm-cursor-pointer")),e.leave&&e.leave(i,e.text)}_linkAtPosition(s,e){const i=s.range.start.y*this._bufferService.cols+s.range.start.x,h=s.range.end.y*this._bufferService.cols+s.range.end.x,p=e.y*this._bufferService.cols+e.x;return i<=p&&p<=h}_positionFromMouseEvent(s,e,i){const h=i.getCoords(s,e,this._bufferService.cols,this._bufferService.rows);if(h)return{x:h[0],y:h[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(s,e,i,h,p){return{x1:s,y1:e,x2:i,y2:h,cols:this._bufferService.cols,fg:p}}};r.Linkifier=t=c([f(1,u.IMouseService),f(2,u.IRenderService),f(3,S.IBufferService),f(4,u.ILinkProviderService)],t)},9042:(L,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.tooMuchOutput=r.promptLabel=void 0,r.promptLabel="Terminal input",r.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},3730:function(L,r,o){var c=this&&this.__decorate||function(u,t,s,e){var i,h=arguments.length,p=h<3?t:e===null?e=Object.getOwnPropertyDescriptor(t,s):e;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")p=Reflect.decorate(u,t,s,e);else for(var m=u.length-1;m>=0;m--)(i=u[m])&&(p=(h<3?i(p):h>3?i(t,s,p):i(t,s))||p);return h>3&&p&&Object.defineProperty(t,s,p),p},f=this&&this.__param||function(u,t){return function(s,e){t(s,e,u)}};Object.defineProperty(r,"__esModule",{value:!0}),r.OscLinkProvider=void 0;const l=o(511),a=o(2585);let _=r.OscLinkProvider=class{constructor(u,t,s){this._bufferService=u,this._optionsService=t,this._oscLinkService=s}provideLinks(u,t){const s=this._bufferService.buffer.lines.get(u-1);if(!s)return void t(void 0);const e=[],i=this._optionsService.rawOptions.linkHandler,h=new l.CellData,p=s.getTrimmedLength();let m=-1,C=-1,v=!1;for(let w=0;w<p;w++)if(C!==-1||s.hasContent(w)){if(s.loadCell(w,h),h.hasExtendedAttrs()&&h.extended.urlId){if(C===-1){C=w,m=h.extended.urlId;continue}v=h.extended.urlId!==m}else C!==-1&&(v=!0);if(v||C!==-1&&w===p-1){const T=this._oscLinkService.getLinkData(m)?.uri;if(T){const A={start:{x:C+1,y:u},end:{x:w+(v||w!==p-1?0:1),y:u}};let I=!1;if(!i?.allowNonHttpProtocols)try{const R=new URL(T);["http:","https:"].includes(R.protocol)||(I=!0)}catch{I=!0}I||e.push({text:T,range:A,activate:(R,N)=>i?i.activate(R,N,A):S(0,N),hover:(R,N)=>i?.hover?.(R,N,A),leave:(R,N)=>i?.leave?.(R,N,A)})}v=!1,h.hasExtendedAttrs()&&h.extended.urlId?(C=w,m=h.extended.urlId):(C=-1,m=-1)}}t(e)}};function S(u,t){if(confirm(`Do you want to navigate to ${t}?

WARNING: This link could potentially be dangerous`)){const s=window.open();if(s){try{s.opener=null}catch{}s.location.href=t}else console.warn("Opening link blocked as opener could not be cleared")}}r.OscLinkProvider=_=c([f(0,a.IBufferService),f(1,a.IOptionsService),f(2,a.IOscLinkService)],_)},6193:(L,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.RenderDebouncer=void 0,r.RenderDebouncer=class{constructor(o,c){this._renderCallback=o,this._coreBrowserService=c,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(o){return this._refreshCallbacks.push(o),this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh())),this._animationFrame}refresh(o,c,f){this._rowCount=f,o=o!==void 0?o:0,c=c!==void 0?c:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,o):o,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,c):c,this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return void this._runRefreshCallbacks();const o=Math.max(this._rowStart,0),c=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(o,c),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(const o of this._refreshCallbacks)o(0);this._refreshCallbacks=[]}}},3236:(L,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.Terminal=void 0;const c=o(3614),f=o(3656),l=o(3551),a=o(9042),_=o(3730),S=o(1680),u=o(3107),t=o(5744),s=o(2950),e=o(1296),i=o(428),h=o(4269),p=o(5114),m=o(8934),C=o(3230),v=o(9312),w=o(4725),T=o(6731),A=o(8055),I=o(8969),R=o(8460),N=o(844),q=o(6114),Z=o(8437),Q=o(2584),J=o(7399),y=o(5941),B=o(9074),M=o(2585),O=o(5435),F=o(4567),K=o(779);class ee extends I.CoreTerminal{get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}constructor(H={}){super(H),this.browser=q,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this.register(new N.MutableDisposable),this._onCursorMove=this.register(new R.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onKey=this.register(new R.EventEmitter),this.onKey=this._onKey.event,this._onRender=this.register(new R.EventEmitter),this.onRender=this._onRender.event,this._onSelectionChange=this.register(new R.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this.register(new R.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onBell=this.register(new R.EventEmitter),this.onBell=this._onBell.event,this._onFocus=this.register(new R.EventEmitter),this._onBlur=this.register(new R.EventEmitter),this._onA11yCharEmitter=this.register(new R.EventEmitter),this._onA11yTabEmitter=this.register(new R.EventEmitter),this._onWillOpen=this.register(new R.EventEmitter),this._setup(),this._decorationService=this._instantiationService.createInstance(B.DecorationService),this._instantiationService.setService(M.IDecorationService,this._decorationService),this._linkProviderService=this._instantiationService.createInstance(K.LinkProviderService),this._instantiationService.setService(w.ILinkProviderService,this._linkProviderService),this._linkProviderService.registerLinkProvider(this._instantiationService.createInstance(_.OscLinkProvider)),this.register(this._inputHandler.onRequestBell(()=>this._onBell.fire())),this.register(this._inputHandler.onRequestRefreshRows((k,z)=>this.refresh(k,z))),this.register(this._inputHandler.onRequestSendFocus(()=>this._reportFocus())),this.register(this._inputHandler.onRequestReset(()=>this.reset())),this.register(this._inputHandler.onRequestWindowsOptionsReport(k=>this._reportWindowsOptions(k))),this.register(this._inputHandler.onColor(k=>this._handleColorEvent(k))),this.register((0,R.forwardEvent)(this._inputHandler.onCursorMove,this._onCursorMove)),this.register((0,R.forwardEvent)(this._inputHandler.onTitleChange,this._onTitleChange)),this.register((0,R.forwardEvent)(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this.register((0,R.forwardEvent)(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this.register(this._bufferService.onResize(k=>this._afterResize(k.cols,k.rows))),this.register((0,N.toDisposable)(()=>{this._customKeyEventHandler=void 0,this.element?.parentNode?.removeChild(this.element)}))}_handleColorEvent(H){if(this._themeService)for(const k of H){let z,W="";switch(k.index){case 256:z="foreground",W="10";break;case 257:z="background",W="11";break;case 258:z="cursor",W="12";break;default:z="ansi",W="4;"+k.index}switch(k.type){case 0:const V=A.color.toColorRGB(z==="ansi"?this._themeService.colors.ansi[k.index]:this._themeService.colors[z]);this.coreService.triggerDataEvent(`${Q.C0.ESC}]${W};${(0,y.toRgbString)(V)}${Q.C1_ESCAPED.ST}`);break;case 1:if(z==="ansi")this._themeService.modifyColors(G=>G.ansi[k.index]=A.channels.toColor(...k.color));else{const G=z;this._themeService.modifyColors(ae=>ae[G]=A.channels.toColor(...k.color))}break;case 2:this._themeService.restoreColor(k.index)}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(H){H?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(F.AccessibilityManager,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(H){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(Q.C0.ESC+"[I"),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){return this.textarea?.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(Q.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;const H=this.buffer.ybase+this.buffer.y,k=this.buffer.lines.get(H);if(!k)return;const z=Math.min(this.buffer.x,this.cols-1),W=this._renderService.dimensions.css.cell.height,V=k.getWidth(z),G=this._renderService.dimensions.css.cell.width*V,ae=this.buffer.y*this._renderService.dimensions.css.cell.height,ue=z*this._renderService.dimensions.css.cell.width;this.textarea.style.left=ue+"px",this.textarea.style.top=ae+"px",this.textarea.style.width=G+"px",this.textarea.style.height=W+"px",this.textarea.style.lineHeight=W+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this.register((0,f.addDisposableDomListener)(this.element,"copy",k=>{this.hasSelection()&&(0,c.copyHandler)(k,this._selectionService)}));const H=k=>(0,c.handlePasteEvent)(k,this.textarea,this.coreService,this.optionsService);this.register((0,f.addDisposableDomListener)(this.textarea,"paste",H)),this.register((0,f.addDisposableDomListener)(this.element,"paste",H)),q.isFirefox?this.register((0,f.addDisposableDomListener)(this.element,"mousedown",k=>{k.button===2&&(0,c.rightClickHandler)(k,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})):this.register((0,f.addDisposableDomListener)(this.element,"contextmenu",k=>{(0,c.rightClickHandler)(k,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})),q.isLinux&&this.register((0,f.addDisposableDomListener)(this.element,"auxclick",k=>{k.button===1&&(0,c.moveTextAreaUnderMouseCursor)(k,this.textarea,this.screenElement)}))}_bindKeys(){this.register((0,f.addDisposableDomListener)(this.textarea,"keyup",H=>this._keyUp(H),!0)),this.register((0,f.addDisposableDomListener)(this.textarea,"keydown",H=>this._keyDown(H),!0)),this.register((0,f.addDisposableDomListener)(this.textarea,"keypress",H=>this._keyPress(H),!0)),this.register((0,f.addDisposableDomListener)(this.textarea,"compositionstart",()=>this._compositionHelper.compositionstart())),this.register((0,f.addDisposableDomListener)(this.textarea,"compositionupdate",H=>this._compositionHelper.compositionupdate(H))),this.register((0,f.addDisposableDomListener)(this.textarea,"compositionend",()=>this._compositionHelper.compositionend())),this.register((0,f.addDisposableDomListener)(this.textarea,"input",H=>this._inputEvent(H),!0)),this.register(this.onRender(()=>this._compositionHelper.updateCompositionElements()))}open(H){if(!H)throw new Error("Terminal requires a parent element.");if(H.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this.element?.ownerDocument.defaultView&&this._coreBrowserService)return void(this.element.ownerDocument.defaultView!==this._coreBrowserService.window&&(this._coreBrowserService.window=this.element.ownerDocument.defaultView));this._document=H.ownerDocument,this.options.documentOverride&&this.options.documentOverride instanceof Document&&(this._document=this.optionsService.rawOptions.documentOverride),this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),H.appendChild(this.element);const k=this._document.createDocumentFragment();this._viewportElement=this._document.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),k.appendChild(this._viewportElement),this._viewportScrollArea=this._document.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=this._document.createElement("div"),this.screenElement.classList.add("xterm-screen"),this.register((0,f.addDisposableDomListener)(this.screenElement,"mousemove",z=>this.updateCursorStyle(z))),this._helperContainer=this._document.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),k.appendChild(this.screenElement),this.textarea=this._document.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",a.promptLabel),q.isChromeOS||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._coreBrowserService=this.register(this._instantiationService.createInstance(p.CoreBrowserService,this.textarea,H.ownerDocument.defaultView??window,this._document??typeof window<"u"?window.document:null)),this._instantiationService.setService(w.ICoreBrowserService,this._coreBrowserService),this.register((0,f.addDisposableDomListener)(this.textarea,"focus",z=>this._handleTextAreaFocus(z))),this.register((0,f.addDisposableDomListener)(this.textarea,"blur",()=>this._handleTextAreaBlur())),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(i.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(w.ICharSizeService,this._charSizeService),this._themeService=this._instantiationService.createInstance(T.ThemeService),this._instantiationService.setService(w.IThemeService,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(h.CharacterJoinerService),this._instantiationService.setService(w.ICharacterJoinerService,this._characterJoinerService),this._renderService=this.register(this._instantiationService.createInstance(C.RenderService,this.rows,this.screenElement)),this._instantiationService.setService(w.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange(z=>this._onRender.fire(z))),this.onResize(z=>this._renderService.resize(z.cols,z.rows)),this._compositionView=this._document.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(s.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this._mouseService=this._instantiationService.createInstance(m.MouseService),this._instantiationService.setService(w.IMouseService,this._mouseService),this.linkifier=this.register(this._instantiationService.createInstance(l.Linkifier,this.screenElement)),this.element.appendChild(k);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this.viewport=this._instantiationService.createInstance(S.Viewport,this._viewportElement,this._viewportScrollArea),this.viewport.onRequestScrollLines(z=>this.scrollLines(z.amount,z.suppressScrollEvent,1)),this.register(this._inputHandler.onRequestSyncScrollBar(()=>this.viewport.syncScrollArea())),this.register(this.viewport),this.register(this.onCursorMove(()=>{this._renderService.handleCursorMove(),this._syncTextArea()})),this.register(this.onResize(()=>this._renderService.handleResize(this.cols,this.rows))),this.register(this.onBlur(()=>this._renderService.handleBlur())),this.register(this.onFocus(()=>this._renderService.handleFocus())),this.register(this._renderService.onDimensionsChange(()=>this.viewport.syncScrollArea())),this._selectionService=this.register(this._instantiationService.createInstance(v.SelectionService,this.element,this.screenElement,this.linkifier)),this._instantiationService.setService(w.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines(z=>this.scrollLines(z.amount,z.suppressScrollEvent))),this.register(this._selectionService.onSelectionChange(()=>this._onSelectionChange.fire())),this.register(this._selectionService.onRequestRedraw(z=>this._renderService.handleSelectionChanged(z.start,z.end,z.columnSelectMode))),this.register(this._selectionService.onLinuxMouseSelection(z=>{this.textarea.value=z,this.textarea.focus(),this.textarea.select()})),this.register(this._onScroll.event(z=>{this.viewport.syncScrollArea(),this._selectionService.refresh()})),this.register((0,f.addDisposableDomListener)(this._viewportElement,"scroll",()=>this._selectionService.refresh())),this.register(this._instantiationService.createInstance(u.BufferDecorationRenderer,this.screenElement)),this.register((0,f.addDisposableDomListener)(this.element,"mousedown",z=>this._selectionService.handleMouseDown(z))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(F.AccessibilityManager,this)),this.register(this.optionsService.onSpecificOptionChange("screenReaderMode",z=>this._handleScreenReaderModeOptionChange(z))),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(t.OverviewRulerRenderer,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRulerWidth",z=>{!this._overviewRulerRenderer&&z&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(t.OverviewRulerRenderer,this._viewportElement,this.screenElement)))}),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(e.DomRenderer,this,this._document,this.element,this.screenElement,this._viewportElement,this._helperContainer,this.linkifier)}bindMouse(){const H=this,k=this.element;function z(G){const ae=H._mouseService.getMouseReportCoords(G,H.screenElement);if(!ae)return!1;let ue,ve;switch(G.overrideType||G.type){case"mousemove":ve=32,G.buttons===void 0?(ue=3,G.button!==void 0&&(ue=G.button<3?G.button:3)):ue=1&G.buttons?0:4&G.buttons?1:2&G.buttons?2:3;break;case"mouseup":ve=0,ue=G.button<3?G.button:3;break;case"mousedown":ve=1,ue=G.button<3?G.button:3;break;case"wheel":if(H._customWheelEventHandler&&H._customWheelEventHandler(G)===!1||H.viewport.getLinesScrolled(G)===0)return!1;ve=G.deltaY<0?0:1,ue=4;break;default:return!1}return!(ve===void 0||ue===void 0||ue>4)&&H.coreMouseService.triggerMouseEvent({col:ae.col,row:ae.row,x:ae.x,y:ae.y,button:ue,action:ve,ctrl:G.ctrlKey,alt:G.altKey,shift:G.shiftKey})}const W={mouseup:null,wheel:null,mousedrag:null,mousemove:null},V={mouseup:G=>(z(G),G.buttons||(this._document.removeEventListener("mouseup",W.mouseup),W.mousedrag&&this._document.removeEventListener("mousemove",W.mousedrag)),this.cancel(G)),wheel:G=>(z(G),this.cancel(G,!0)),mousedrag:G=>{G.buttons&&z(G)},mousemove:G=>{G.buttons||z(G)}};this.register(this.coreMouseService.onProtocolChange(G=>{G?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(G)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),8&G?W.mousemove||(k.addEventListener("mousemove",V.mousemove),W.mousemove=V.mousemove):(k.removeEventListener("mousemove",W.mousemove),W.mousemove=null),16&G?W.wheel||(k.addEventListener("wheel",V.wheel,{passive:!1}),W.wheel=V.wheel):(k.removeEventListener("wheel",W.wheel),W.wheel=null),2&G?W.mouseup||(W.mouseup=V.mouseup):(this._document.removeEventListener("mouseup",W.mouseup),W.mouseup=null),4&G?W.mousedrag||(W.mousedrag=V.mousedrag):(this._document.removeEventListener("mousemove",W.mousedrag),W.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,f.addDisposableDomListener)(k,"mousedown",G=>{if(G.preventDefault(),this.focus(),this.coreMouseService.areMouseEventsActive&&!this._selectionService.shouldForceSelection(G))return z(G),W.mouseup&&this._document.addEventListener("mouseup",W.mouseup),W.mousedrag&&this._document.addEventListener("mousemove",W.mousedrag),this.cancel(G)})),this.register((0,f.addDisposableDomListener)(k,"wheel",G=>{if(!W.wheel){if(this._customWheelEventHandler&&this._customWheelEventHandler(G)===!1)return!1;if(!this.buffer.hasScrollback){const ae=this.viewport.getLinesScrolled(G);if(ae===0)return;const ue=Q.C0.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(G.deltaY<0?"A":"B");let ve="";for(let ge=0;ge<Math.abs(ae);ge++)ve+=ue;return this.coreService.triggerDataEvent(ve,!0),this.cancel(G,!0)}return this.viewport.handleWheel(G)?this.cancel(G):void 0}},{passive:!1})),this.register((0,f.addDisposableDomListener)(k,"touchstart",G=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchStart(G),this.cancel(G)},{passive:!0})),this.register((0,f.addDisposableDomListener)(k,"touchmove",G=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchMove(G)?void 0:this.cancel(G)},{passive:!1}))}refresh(H,k){this._renderService?.refreshRows(H,k)}updateCursorStyle(H){this._selectionService?.shouldColumnSelect(H)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(H,k,z=0){z===1?(super.scrollLines(H,k,z),this.refresh(0,this.rows-1)):this.viewport?.scrollLines(H)}paste(H){(0,c.paste)(H,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(H){this._customKeyEventHandler=H}attachCustomWheelEventHandler(H){this._customWheelEventHandler=H}registerLinkProvider(H){return this._linkProviderService.registerLinkProvider(H)}registerCharacterJoiner(H){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");const k=this._characterJoinerService.register(H);return this.refresh(0,this.rows-1),k}deregisterCharacterJoiner(H){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(H)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(H){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+H)}registerDecoration(H){return this._decorationService.registerDecoration(H)}hasSelection(){return!!this._selectionService&&this._selectionService.hasSelection}select(H,k,z){this._selectionService.setSelection(H,k,z)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(this._selectionService&&this._selectionService.hasSelection)return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){this._selectionService?.clearSelection()}selectAll(){this._selectionService?.selectAll()}selectLines(H,k){this._selectionService?.selectLines(H,k)}_keyDown(H){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(H)===!1)return!1;const k=this.browser.isMac&&this.options.macOptionIsMeta&&H.altKey;if(!k&&!this._compositionHelper.keydown(H))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;k||H.key!=="Dead"&&H.key!=="AltGraph"||(this._unprocessedDeadKey=!0);const z=(0,J.evaluateKeyboardEvent)(H,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(H),z.type===3||z.type===2){const W=this.rows-1;return this.scrollLines(z.type===2?-W:W),this.cancel(H,!0)}return z.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,H)||(z.cancel&&this.cancel(H,!0),!z.key||!!(H.key&&!H.ctrlKey&&!H.altKey&&!H.metaKey&&H.key.length===1&&H.key.charCodeAt(0)>=65&&H.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(z.key!==Q.C0.ETX&&z.key!==Q.C0.CR||(this.textarea.value=""),this._onKey.fire({key:z.key,domEvent:H}),this._showCursor(),this.coreService.triggerDataEvent(z.key,!0),!this.optionsService.rawOptions.screenReaderMode||H.altKey||H.ctrlKey?this.cancel(H,!0):void(this._keyDownHandled=!0))))}_isThirdLevelShift(H,k){const z=H.isMac&&!this.options.macOptionIsMeta&&k.altKey&&!k.ctrlKey&&!k.metaKey||H.isWindows&&k.altKey&&k.ctrlKey&&!k.metaKey||H.isWindows&&k.getModifierState("AltGraph");return k.type==="keypress"?z:z&&(!k.keyCode||k.keyCode>47)}_keyUp(H){this._keyDownSeen=!1,this._customKeyEventHandler&&this._customKeyEventHandler(H)===!1||(function(k){return k.keyCode===16||k.keyCode===17||k.keyCode===18}(H)||this.focus(),this.updateCursorStyle(H),this._keyPressHandled=!1)}_keyPress(H){let k;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(H)===!1)return!1;if(this.cancel(H),H.charCode)k=H.charCode;else if(H.which===null||H.which===void 0)k=H.keyCode;else{if(H.which===0||H.charCode===0)return!1;k=H.which}return!(!k||(H.altKey||H.ctrlKey||H.metaKey)&&!this._isThirdLevelShift(this.browser,H)||(k=String.fromCharCode(k),this._onKey.fire({key:k,domEvent:H}),this._showCursor(),this.coreService.triggerDataEvent(k,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))}_inputEvent(H){if(H.data&&H.inputType==="insertText"&&(!H.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;const k=H.data;return this.coreService.triggerDataEvent(k,!0),this.cancel(H),!0}return!1}resize(H,k){H!==this.cols||k!==this.rows?super.resize(H,k):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()}_afterResize(H,k){this._charSizeService?.measure(),this.viewport?.syncScrollArea(!0)}clear(){if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let H=1;H<this.rows;H++)this.buffer.lines.push(this.buffer.getBlankLine(Z.DEFAULT_ATTR_DATA));this._onScroll.fire({position:this.buffer.ydisp,source:0}),this.viewport?.reset(),this.refresh(0,this.rows-1)}}reset(){this.options.rows=this.rows,this.options.cols=this.cols;const H=this._customKeyEventHandler;this._setup(),super.reset(),this._selectionService?.reset(),this._decorationService.reset(),this.viewport?.reset(),this._customKeyEventHandler=H,this.refresh(0,this.rows-1)}clearTextureAtlas(){this._renderService?.clearTextureAtlas()}_reportFocus(){this.element?.classList.contains("focus")?this.coreService.triggerDataEvent(Q.C0.ESC+"[I"):this.coreService.triggerDataEvent(Q.C0.ESC+"[O")}_reportWindowsOptions(H){if(this._renderService)switch(H){case O.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:const k=this._renderService.dimensions.css.canvas.width.toFixed(0),z=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${Q.C0.ESC}[4;${z};${k}t`);break;case O.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:const W=this._renderService.dimensions.css.cell.width.toFixed(0),V=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${Q.C0.ESC}[6;${V};${W}t`)}}cancel(H,k){if(this.options.cancelEvents||k)return H.preventDefault(),H.stopPropagation(),!1}}r.Terminal=ee},9924:(L,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.TimeBasedDebouncer=void 0,r.TimeBasedDebouncer=class{constructor(o,c=1e3){this._renderCallback=o,this._debounceThresholdMS=c,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(o,c,f){this._rowCount=f,o=o!==void 0?o:0,c=c!==void 0?c:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,o):o,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,c):c;const l=Date.now();if(l-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=l,this._innerRefresh();else if(!this._additionalRefreshRequested){const a=l-this._lastRefreshMs,_=this._debounceThresholdMS-a;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(()=>{this._lastRefreshMs=Date.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0},_)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;const o=Math.max(this._rowStart,0),c=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(o,c)}}},1680:function(L,r,o){var c=this&&this.__decorate||function(s,e,i,h){var p,m=arguments.length,C=m<3?e:h===null?h=Object.getOwnPropertyDescriptor(e,i):h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(s,e,i,h);else for(var v=s.length-1;v>=0;v--)(p=s[v])&&(C=(m<3?p(C):m>3?p(e,i,C):p(e,i))||C);return m>3&&C&&Object.defineProperty(e,i,C),C},f=this&&this.__param||function(s,e){return function(i,h){e(i,h,s)}};Object.defineProperty(r,"__esModule",{value:!0}),r.Viewport=void 0;const l=o(3656),a=o(4725),_=o(8460),S=o(844),u=o(2585);let t=r.Viewport=class extends S.Disposable{constructor(s,e,i,h,p,m,C,v){super(),this._viewportElement=s,this._scrollArea=e,this._bufferService=i,this._optionsService=h,this._charSizeService=p,this._renderService=m,this._coreBrowserService=C,this.scrollBarWidth=0,this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._wheelPartialScroll=0,this._refreshAnimationFrame=null,this._ignoreNextScrollEvent=!1,this._smoothScrollState={startTime:0,origin:-1,target:-1},this._onRequestScrollLines=this.register(new _.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this.register((0,l.addDisposableDomListener)(this._viewportElement,"scroll",this._handleScroll.bind(this))),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(w=>this._activeBuffer=w.activeBuffer)),this._renderDimensions=this._renderService.dimensions,this.register(this._renderService.onDimensionsChange(w=>this._renderDimensions=w)),this._handleThemeChange(v.colors),this.register(v.onChangeColors(w=>this._handleThemeChange(w))),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.syncScrollArea())),setTimeout(()=>this.syncScrollArea())}_handleThemeChange(s){this._viewportElement.style.backgroundColor=s.background.css}reset(){this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._coreBrowserService.window.requestAnimationFrame(()=>this.syncScrollArea())}_refresh(s){if(s)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&this._coreBrowserService.window.cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderDimensions.device.cell.height/this._coreBrowserService.dpr,this._currentDeviceCellHeight=this._renderDimensions.device.cell.height,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;const e=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderDimensions.css.canvas.height);this._lastRecordedBufferHeight!==e&&(this._lastRecordedBufferHeight=e,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}const s=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==s&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=s),this._refreshAnimationFrame=null}syncScrollArea(s=!1){if(this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(s);this._lastRecordedViewportHeight===this._renderService.dimensions.css.canvas.height&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.device.cell.height===this._currentDeviceCellHeight||this._refresh(s)}_handleScroll(s){if(this._lastScrollTop=this._viewportElement.scrollTop,!this._viewportElement.offsetParent)return;if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._onRequestScrollLines.fire({amount:0,suppressScrollEvent:!0});const e=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._onRequestScrollLines.fire({amount:e,suppressScrollEvent:!0})}_smoothScroll(){if(this._isDisposed||this._smoothScrollState.origin===-1||this._smoothScrollState.target===-1)return;const s=this._smoothScrollPercent();this._viewportElement.scrollTop=this._smoothScrollState.origin+Math.round(s*(this._smoothScrollState.target-this._smoothScrollState.origin)),s<1?this._coreBrowserService.window.requestAnimationFrame(()=>this._smoothScroll()):this._clearSmoothScrollState()}_smoothScrollPercent(){return this._optionsService.rawOptions.smoothScrollDuration&&this._smoothScrollState.startTime?Math.max(Math.min((Date.now()-this._smoothScrollState.startTime)/this._optionsService.rawOptions.smoothScrollDuration,1),0):1}_clearSmoothScrollState(){this._smoothScrollState.startTime=0,this._smoothScrollState.origin=-1,this._smoothScrollState.target=-1}_bubbleScroll(s,e){const i=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(e<0&&this._viewportElement.scrollTop!==0||e>0&&i<this._lastRecordedBufferHeight)||(s.cancelable&&s.preventDefault(),!1)}handleWheel(s){const e=this._getPixelsScrolled(s);return e!==0&&(this._optionsService.rawOptions.smoothScrollDuration?(this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target===-1?this._smoothScrollState.target=this._viewportElement.scrollTop+e:this._smoothScrollState.target+=e,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()):this._viewportElement.scrollTop+=e,this._bubbleScroll(s,e))}scrollLines(s){if(s!==0)if(this._optionsService.rawOptions.smoothScrollDuration){const e=s*this._currentRowHeight;this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target=this._smoothScrollState.origin+e,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()}else this._onRequestScrollLines.fire({amount:s,suppressScrollEvent:!1})}_getPixelsScrolled(s){if(s.deltaY===0||s.shiftKey)return 0;let e=this._applyScrollModifier(s.deltaY,s);return s.deltaMode===WheelEvent.DOM_DELTA_LINE?e*=this._currentRowHeight:s.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(e*=this._currentRowHeight*this._bufferService.rows),e}getBufferElements(s,e){let i,h="";const p=[],m=e??this._bufferService.buffer.lines.length,C=this._bufferService.buffer.lines;for(let v=s;v<m;v++){const w=C.get(v);if(!w)continue;const T=C.get(v+1)?.isWrapped;if(h+=w.translateToString(!T),!T||v===C.length-1){const A=document.createElement("div");A.textContent=h,p.push(A),h.length>0&&(i=A),h=""}}return{bufferElements:p,cursorElement:i}}getLinesScrolled(s){if(s.deltaY===0||s.shiftKey)return 0;let e=this._applyScrollModifier(s.deltaY,s);return s.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(e/=this._currentRowHeight+0,this._wheelPartialScroll+=e,e=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):s.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(e*=this._bufferService.rows),e}_applyScrollModifier(s,e){const i=this._optionsService.rawOptions.fastScrollModifier;return i==="alt"&&e.altKey||i==="ctrl"&&e.ctrlKey||i==="shift"&&e.shiftKey?s*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:s*this._optionsService.rawOptions.scrollSensitivity}handleTouchStart(s){this._lastTouchY=s.touches[0].pageY}handleTouchMove(s){const e=this._lastTouchY-s.touches[0].pageY;return this._lastTouchY=s.touches[0].pageY,e!==0&&(this._viewportElement.scrollTop+=e,this._bubbleScroll(s,e))}};r.Viewport=t=c([f(2,u.IBufferService),f(3,u.IOptionsService),f(4,a.ICharSizeService),f(5,a.IRenderService),f(6,a.ICoreBrowserService),f(7,a.IThemeService)],t)},3107:function(L,r,o){var c=this&&this.__decorate||function(u,t,s,e){var i,h=arguments.length,p=h<3?t:e===null?e=Object.getOwnPropertyDescriptor(t,s):e;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")p=Reflect.decorate(u,t,s,e);else for(var m=u.length-1;m>=0;m--)(i=u[m])&&(p=(h<3?i(p):h>3?i(t,s,p):i(t,s))||p);return h>3&&p&&Object.defineProperty(t,s,p),p},f=this&&this.__param||function(u,t){return function(s,e){t(s,e,u)}};Object.defineProperty(r,"__esModule",{value:!0}),r.BufferDecorationRenderer=void 0;const l=o(4725),a=o(844),_=o(2585);let S=r.BufferDecorationRenderer=class extends a.Disposable{constructor(u,t,s,e,i){super(),this._screenElement=u,this._bufferService=t,this._coreBrowserService=s,this._decorationService=e,this._renderService=i,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this.register(this._renderService.onRenderedViewportChange(()=>this._doRefreshDecorations())),this.register(this._renderService.onDimensionsChange(()=>{this._dimensionsChanged=!0,this._queueRefresh()})),this.register(this._coreBrowserService.onDprChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt})),this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh())),this.register(this._decorationService.onDecorationRemoved(h=>this._removeDecoration(h))),this.register((0,a.toDisposable)(()=>{this._container.remove(),this._decorationElements.clear()}))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback(()=>{this._doRefreshDecorations(),this._animationFrame=void 0}))}_doRefreshDecorations(){for(const u of this._decorationService.decorations)this._renderDecoration(u);this._dimensionsChanged=!1}_renderDecoration(u){this._refreshStyle(u),this._dimensionsChanged&&this._refreshXPosition(u)}_createElement(u){const t=this._coreBrowserService.mainDocument.createElement("div");t.classList.add("xterm-decoration"),t.classList.toggle("xterm-decoration-top-layer",u?.options?.layer==="top"),t.style.width=`${Math.round((u.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,t.style.height=(u.options.height||1)*this._renderService.dimensions.css.cell.height+"px",t.style.top=(u.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height+"px",t.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;const s=u.options.x??0;return s&&s>this._bufferService.cols&&(t.style.display="none"),this._refreshXPosition(u,t),t}_refreshStyle(u){const t=u.marker.line-this._bufferService.buffers.active.ydisp;if(t<0||t>=this._bufferService.rows)u.element&&(u.element.style.display="none",u.onRenderEmitter.fire(u.element));else{let s=this._decorationElements.get(u);s||(s=this._createElement(u),u.element=s,this._decorationElements.set(u,s),this._container.appendChild(s),u.onDispose(()=>{this._decorationElements.delete(u),s.remove()})),s.style.top=t*this._renderService.dimensions.css.cell.height+"px",s.style.display=this._altBufferIsActive?"none":"block",u.onRenderEmitter.fire(s)}}_refreshXPosition(u,t=u.element){if(!t)return;const s=u.options.x??0;(u.options.anchor||"left")==="right"?t.style.right=s?s*this._renderService.dimensions.css.cell.width+"px":"":t.style.left=s?s*this._renderService.dimensions.css.cell.width+"px":""}_removeDecoration(u){this._decorationElements.get(u)?.remove(),this._decorationElements.delete(u),u.dispose()}};r.BufferDecorationRenderer=S=c([f(1,_.IBufferService),f(2,l.ICoreBrowserService),f(3,_.IDecorationService),f(4,l.IRenderService)],S)},5871:(L,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.ColorZoneStore=void 0,r.ColorZoneStore=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(o){if(o.options.overviewRulerOptions){for(const c of this._zones)if(c.color===o.options.overviewRulerOptions.color&&c.position===o.options.overviewRulerOptions.position){if(this._lineIntersectsZone(c,o.marker.line))return;if(this._lineAdjacentToZone(c,o.marker.line,o.options.overviewRulerOptions.position))return void this._addLineToZone(c,o.marker.line)}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=o.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=o.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=o.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=o.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:o.options.overviewRulerOptions.color,position:o.options.overviewRulerOptions.position,startBufferLine:o.marker.line,endBufferLine:o.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(o){this._linePadding=o}_lineIntersectsZone(o,c){return c>=o.startBufferLine&&c<=o.endBufferLine}_lineAdjacentToZone(o,c,f){return c>=o.startBufferLine-this._linePadding[f||"full"]&&c<=o.endBufferLine+this._linePadding[f||"full"]}_addLineToZone(o,c){o.startBufferLine=Math.min(o.startBufferLine,c),o.endBufferLine=Math.max(o.endBufferLine,c)}}},5744:function(L,r,o){var c=this&&this.__decorate||function(i,h,p,m){var C,v=arguments.length,w=v<3?h:m===null?m=Object.getOwnPropertyDescriptor(h,p):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(i,h,p,m);else for(var T=i.length-1;T>=0;T--)(C=i[T])&&(w=(v<3?C(w):v>3?C(h,p,w):C(h,p))||w);return v>3&&w&&Object.defineProperty(h,p,w),w},f=this&&this.__param||function(i,h){return function(p,m){h(p,m,i)}};Object.defineProperty(r,"__esModule",{value:!0}),r.OverviewRulerRenderer=void 0;const l=o(5871),a=o(4725),_=o(844),S=o(2585),u={full:0,left:0,center:0,right:0},t={full:0,left:0,center:0,right:0},s={full:0,left:0,center:0,right:0};let e=r.OverviewRulerRenderer=class extends _.Disposable{get _width(){return this._optionsService.options.overviewRulerWidth||0}constructor(i,h,p,m,C,v,w){super(),this._viewportElement=i,this._screenElement=h,this._bufferService=p,this._decorationService=m,this._renderService=C,this._optionsService=v,this._coreBrowserService=w,this._colorZoneStore=new l.ColorZoneStore,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=this._coreBrowserService.mainDocument.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),this._viewportElement.parentElement?.insertBefore(this._canvas,this._viewportElement);const T=this._canvas.getContext("2d");if(!T)throw new Error("Ctx cannot be null");this._ctx=T,this._registerDecorationListeners(),this._registerBufferChangeListeners(),this._registerDimensionChangeListeners(),this.register((0,_.toDisposable)(()=>{this._canvas?.remove()}))}_registerDecorationListeners(){this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh(void 0,!0))),this.register(this._decorationService.onDecorationRemoved(()=>this._queueRefresh(void 0,!0)))}_registerBufferChangeListeners(){this.register(this._renderService.onRenderedViewportChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"})),this.register(this._bufferService.onScroll(()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())}))}_registerDimensionChangeListeners(){this.register(this._renderService.onRender(()=>{this._containerHeight&&this._containerHeight===this._screenElement.clientHeight||(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)})),this.register(this._optionsService.onSpecificOptionChange("overviewRulerWidth",()=>this._queueRefresh(!0))),this.register(this._coreBrowserService.onDprChange(()=>this._queueRefresh(!0))),this._queueRefresh(!0)}_refreshDrawConstants(){const i=Math.floor(this._canvas.width/3),h=Math.ceil(this._canvas.width/3);t.full=this._canvas.width,t.left=i,t.center=h,t.right=i,this._refreshDrawHeightConstants(),s.full=0,s.left=0,s.center=t.left,s.right=t.left+t.center}_refreshDrawHeightConstants(){u.full=Math.round(2*this._coreBrowserService.dpr);const i=this._canvas.height/this._bufferService.buffer.lines.length,h=Math.round(Math.max(Math.min(i,12),6)*this._coreBrowserService.dpr);u.left=h,u.center=h,u.right=h}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*u.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*u.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*u.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*u.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowserService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowserService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(const h of this._decorationService.decorations)this._colorZoneStore.addDecoration(h);this._ctx.lineWidth=1;const i=this._colorZoneStore.zones;for(const h of i)h.position!=="full"&&this._renderColorZone(h);for(const h of i)h.position==="full"&&this._renderColorZone(h);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderColorZone(i){this._ctx.fillStyle=i.color,this._ctx.fillRect(s[i.position||"full"],Math.round((this._canvas.height-1)*(i.startBufferLine/this._bufferService.buffers.active.lines.length)-u[i.position||"full"]/2),t[i.position||"full"],Math.round((this._canvas.height-1)*((i.endBufferLine-i.startBufferLine)/this._bufferService.buffers.active.lines.length)+u[i.position||"full"]))}_queueRefresh(i,h){this._shouldUpdateDimensions=i||this._shouldUpdateDimensions,this._shouldUpdateAnchor=h||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._refreshDecorations(),this._animationFrame=void 0}))}};r.OverviewRulerRenderer=e=c([f(2,S.IBufferService),f(3,S.IDecorationService),f(4,a.IRenderService),f(5,S.IOptionsService),f(6,a.ICoreBrowserService)],e)},2950:function(L,r,o){var c=this&&this.__decorate||function(u,t,s,e){var i,h=arguments.length,p=h<3?t:e===null?e=Object.getOwnPropertyDescriptor(t,s):e;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")p=Reflect.decorate(u,t,s,e);else for(var m=u.length-1;m>=0;m--)(i=u[m])&&(p=(h<3?i(p):h>3?i(t,s,p):i(t,s))||p);return h>3&&p&&Object.defineProperty(t,s,p),p},f=this&&this.__param||function(u,t){return function(s,e){t(s,e,u)}};Object.defineProperty(r,"__esModule",{value:!0}),r.CompositionHelper=void 0;const l=o(4725),a=o(2585),_=o(2584);let S=r.CompositionHelper=class{get isComposing(){return this._isComposing}constructor(u,t,s,e,i,h){this._textarea=u,this._compositionView=t,this._bufferService=s,this._optionsService=e,this._coreService=i,this._renderService=h,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(u){this._compositionView.textContent=u.data,this.updateCompositionElements(),setTimeout(()=>{this._compositionPosition.end=this._textarea.value.length},0)}compositionend(){this._finalizeComposition(!0)}keydown(u){if(this._isComposing||this._isSendingComposition){if(u.keyCode===229||u.keyCode===16||u.keyCode===17||u.keyCode===18)return!1;this._finalizeComposition(!1)}return u.keyCode!==229||(this._handleAnyTextareaChanges(),!1)}_finalizeComposition(u){if(this._compositionView.classList.remove("active"),this._isComposing=!1,u){const t={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(()=>{if(this._isSendingComposition){let s;this._isSendingComposition=!1,t.start+=this._dataAlreadySent.length,s=this._isComposing?this._textarea.value.substring(t.start,t.end):this._textarea.value.substring(t.start),s.length>0&&this._coreService.triggerDataEvent(s,!0)}},0)}else{this._isSendingComposition=!1;const t=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(t,!0)}}_handleAnyTextareaChanges(){const u=this._textarea.value;setTimeout(()=>{if(!this._isComposing){const t=this._textarea.value,s=t.replace(u,"");this._dataAlreadySent=s,t.length>u.length?this._coreService.triggerDataEvent(s,!0):t.length<u.length?this._coreService.triggerDataEvent(`${_.C0.DEL}`,!0):t.length===u.length&&t!==u&&this._coreService.triggerDataEvent(t,!0)}},0)}updateCompositionElements(u){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){const t=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),s=this._renderService.dimensions.css.cell.height,e=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,i=t*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=i+"px",this._compositionView.style.top=e+"px",this._compositionView.style.height=s+"px",this._compositionView.style.lineHeight=s+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";const h=this._compositionView.getBoundingClientRect();this._textarea.style.left=i+"px",this._textarea.style.top=e+"px",this._textarea.style.width=Math.max(h.width,1)+"px",this._textarea.style.height=Math.max(h.height,1)+"px",this._textarea.style.lineHeight=h.height+"px"}u||setTimeout(()=>this.updateCompositionElements(!0),0)}}};r.CompositionHelper=S=c([f(2,a.IBufferService),f(3,a.IOptionsService),f(4,a.ICoreService),f(5,l.IRenderService)],S)},9806:(L,r)=>{function o(c,f,l){const a=l.getBoundingClientRect(),_=c.getComputedStyle(l),S=parseInt(_.getPropertyValue("padding-left")),u=parseInt(_.getPropertyValue("padding-top"));return[f.clientX-a.left-S,f.clientY-a.top-u]}Object.defineProperty(r,"__esModule",{value:!0}),r.getCoords=r.getCoordsRelativeToElement=void 0,r.getCoordsRelativeToElement=o,r.getCoords=function(c,f,l,a,_,S,u,t,s){if(!S)return;const e=o(c,f,l);return e?(e[0]=Math.ceil((e[0]+(s?u/2:0))/u),e[1]=Math.ceil(e[1]/t),e[0]=Math.min(Math.max(e[0],1),a+(s?1:0)),e[1]=Math.min(Math.max(e[1],1),_),e):void 0}},9504:(L,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.moveToCellSequence=void 0;const c=o(2584);function f(t,s,e,i){const h=t-l(t,e),p=s-l(s,e),m=Math.abs(h-p)-function(C,v,w){let T=0;const A=C-l(C,w),I=v-l(v,w);for(let R=0;R<Math.abs(A-I);R++){const N=a(C,v)==="A"?-1:1;w.buffer.lines.get(A+N*R)?.isWrapped&&T++}return T}(t,s,e);return u(m,S(a(t,s),i))}function l(t,s){let e=0,i=s.buffer.lines.get(t),h=i?.isWrapped;for(;h&&t>=0&&t<s.rows;)e++,i=s.buffer.lines.get(--t),h=i?.isWrapped;return e}function a(t,s){return t>s?"A":"B"}function _(t,s,e,i,h,p){let m=t,C=s,v="";for(;m!==e||C!==i;)m+=h?1:-1,h&&m>p.cols-1?(v+=p.buffer.translateBufferLineToString(C,!1,t,m),m=0,t=0,C++):!h&&m<0&&(v+=p.buffer.translateBufferLineToString(C,!1,0,t+1),m=p.cols-1,t=m,C--);return v+p.buffer.translateBufferLineToString(C,!1,t,m)}function S(t,s){const e=s?"O":"[";return c.C0.ESC+e+t}function u(t,s){t=Math.floor(t);let e="";for(let i=0;i<t;i++)e+=s;return e}r.moveToCellSequence=function(t,s,e,i){const h=e.buffer.x,p=e.buffer.y;if(!e.buffer.hasScrollback)return function(v,w,T,A,I,R){return f(w,A,I,R).length===0?"":u(_(v,w,v,w-l(w,I),!1,I).length,S("D",R))}(h,p,0,s,e,i)+f(p,s,e,i)+function(v,w,T,A,I,R){let N;N=f(w,A,I,R).length>0?A-l(A,I):w;const q=A,Z=function(Q,J,y,B,M,O){let F;return F=f(y,B,M,O).length>0?B-l(B,M):J,Q<y&&F<=B||Q>=y&&F<B?"C":"D"}(v,w,T,A,I,R);return u(_(v,N,T,q,Z==="C",I).length,S(Z,R))}(h,p,t,s,e,i);let m;if(p===s)return m=h>t?"D":"C",u(Math.abs(h-t),S(m,i));m=p>s?"D":"C";const C=Math.abs(p-s);return u(function(v,w){return w.cols-v}(p>s?t:h,e)+(C-1)*e.cols+1+((p>s?h:t)-1),S(m,i))}},1296:function(L,r,o){var c=this&&this.__decorate||function(R,N,q,Z){var Q,J=arguments.length,y=J<3?N:Z===null?Z=Object.getOwnPropertyDescriptor(N,q):Z;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(R,N,q,Z);else for(var B=R.length-1;B>=0;B--)(Q=R[B])&&(y=(J<3?Q(y):J>3?Q(N,q,y):Q(N,q))||y);return J>3&&y&&Object.defineProperty(N,q,y),y},f=this&&this.__param||function(R,N){return function(q,Z){N(q,Z,R)}};Object.defineProperty(r,"__esModule",{value:!0}),r.DomRenderer=void 0;const l=o(3787),a=o(2550),_=o(2223),S=o(6171),u=o(6052),t=o(4725),s=o(8055),e=o(8460),i=o(844),h=o(2585),p="xterm-dom-renderer-owner-",m="xterm-rows",C="xterm-fg-",v="xterm-bg-",w="xterm-focus",T="xterm-selection";let A=1,I=r.DomRenderer=class extends i.Disposable{constructor(R,N,q,Z,Q,J,y,B,M,O,F,K,ee){super(),this._terminal=R,this._document=N,this._element=q,this._screenElement=Z,this._viewportElement=Q,this._helperContainer=J,this._linkifier2=y,this._charSizeService=M,this._optionsService=O,this._bufferService=F,this._coreBrowserService=K,this._themeService=ee,this._terminalClass=A++,this._rowElements=[],this._selectionRenderModel=(0,u.createSelectionRenderModel)(),this.onRequestRedraw=this.register(new e.EventEmitter).event,this._rowContainer=this._document.createElement("div"),this._rowContainer.classList.add(m),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=this._document.createElement("div"),this._selectionContainer.classList.add(T),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=(0,S.createRenderDimensions)(),this._updateDimensions(),this.register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._themeService.onChangeColors(re=>this._injectCss(re))),this._injectCss(this._themeService.colors),this._rowFactory=B.createInstance(l.DomRendererRowFactory,document),this._element.classList.add(p+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this.register(this._linkifier2.onShowLinkUnderline(re=>this._handleLinkHover(re))),this.register(this._linkifier2.onHideLinkUnderline(re=>this._handleLinkLeave(re))),this.register((0,i.toDisposable)(()=>{this._element.classList.remove(p+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()})),this._widthCache=new a.WidthCache(this._document,this._helperContainer),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){const R=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*R,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*R),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/R),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/R),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(const q of this._rowElements)q.style.width=`${this.dimensions.css.canvas.width}px`,q.style.height=`${this.dimensions.css.cell.height}px`,q.style.lineHeight=`${this.dimensions.css.cell.height}px`,q.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));const N=`${this._terminalSelector} .${m} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=N,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(R){this._themeStyleElement||(this._themeStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let N=`${this._terminalSelector} .${m} { color: ${R.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;N+=`${this._terminalSelector} .${m} .xterm-dim { color: ${s.color.multiplyOpacity(R.foreground,.5).css};}`,N+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`;const q=`blink_underline_${this._terminalClass}`,Z=`blink_bar_${this._terminalClass}`,Q=`blink_block_${this._terminalClass}`;N+=`@keyframes ${q} { 50% {  border-bottom-style: hidden; }}`,N+=`@keyframes ${Z} { 50% {  box-shadow: none; }}`,N+=`@keyframes ${Q} { 0% {  background-color: ${R.cursor.css};  color: ${R.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${R.cursor.css}; }}`,N+=`${this._terminalSelector} .${m}.${w} .xterm-cursor.xterm-cursor-blink.xterm-cursor-underline { animation: ${q} 1s step-end infinite;}${this._terminalSelector} .${m}.${w} .xterm-cursor.xterm-cursor-blink.xterm-cursor-bar { animation: ${Z} 1s step-end infinite;}${this._terminalSelector} .${m}.${w} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: ${Q} 1s step-end infinite;}${this._terminalSelector} .${m} .xterm-cursor.xterm-cursor-block { background-color: ${R.cursor.css}; color: ${R.cursorAccent.css};}${this._terminalSelector} .${m} .xterm-cursor.xterm-cursor-block:not(.xterm-cursor-blink) { background-color: ${R.cursor.css} !important; color: ${R.cursorAccent.css} !important;}${this._terminalSelector} .${m} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${R.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${m} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${R.cursor.css} inset;}${this._terminalSelector} .${m} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${R.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,N+=`${this._terminalSelector} .${T} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${T} div { position: absolute; background-color: ${R.selectionBackgroundOpaque.css};}${this._terminalSelector} .${T} div { position: absolute; background-color: ${R.selectionInactiveBackgroundOpaque.css};}`;for(const[J,y]of R.ansi.entries())N+=`${this._terminalSelector} .${C}${J} { color: ${y.css}; }${this._terminalSelector} .${C}${J}.xterm-dim { color: ${s.color.multiplyOpacity(y,.5).css}; }${this._terminalSelector} .${v}${J} { background-color: ${y.css}; }`;N+=`${this._terminalSelector} .${C}${_.INVERTED_DEFAULT_COLOR} { color: ${s.color.opaque(R.background).css}; }${this._terminalSelector} .${C}${_.INVERTED_DEFAULT_COLOR}.xterm-dim { color: ${s.color.multiplyOpacity(s.color.opaque(R.background),.5).css}; }${this._terminalSelector} .${v}${_.INVERTED_DEFAULT_COLOR} { background-color: ${R.foreground.css}; }`,this._themeStyleElement.textContent=N}_setDefaultSpacing(){const R=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${R}px`,this._rowFactory.defaultSpacing=R}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(R,N){for(let q=this._rowElements.length;q<=N;q++){const Z=this._document.createElement("div");this._rowContainer.appendChild(Z),this._rowElements.push(Z)}for(;this._rowElements.length>N;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(R,N){this._refreshRowElements(R,N),this._updateDimensions(),this.handleSelectionChanged(this._selectionRenderModel.selectionStart,this._selectionRenderModel.selectionEnd,this._selectionRenderModel.columnSelectMode)}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(w),this.renderRows(0,this._bufferService.rows-1)}handleFocus(){this._rowContainer.classList.add(w),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(R,N,q){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(R,N,q),this.renderRows(0,this._bufferService.rows-1),!R||!N)return;this._selectionRenderModel.update(this._terminal,R,N,q);const Z=this._selectionRenderModel.viewportStartRow,Q=this._selectionRenderModel.viewportEndRow,J=this._selectionRenderModel.viewportCappedStartRow,y=this._selectionRenderModel.viewportCappedEndRow;if(J>=this._bufferService.rows||y<0)return;const B=this._document.createDocumentFragment();if(q){const M=R[0]>N[0];B.appendChild(this._createSelectionElement(J,M?N[0]:R[0],M?R[0]:N[0],y-J+1))}else{const M=Z===J?R[0]:0,O=J===Q?N[0]:this._bufferService.cols;B.appendChild(this._createSelectionElement(J,M,O));const F=y-J-1;if(B.appendChild(this._createSelectionElement(J+1,0,this._bufferService.cols,F)),J!==y){const K=Q===y?N[0]:this._bufferService.cols;B.appendChild(this._createSelectionElement(y,0,K))}}this._selectionContainer.appendChild(B)}_createSelectionElement(R,N,q,Z=1){const Q=this._document.createElement("div"),J=N*this.dimensions.css.cell.width;let y=this.dimensions.css.cell.width*(q-N);return J+y>this.dimensions.css.canvas.width&&(y=this.dimensions.css.canvas.width-J),Q.style.height=Z*this.dimensions.css.cell.height+"px",Q.style.top=R*this.dimensions.css.cell.height+"px",Q.style.left=`${J}px`,Q.style.width=`${y}px`,Q}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(const R of this._rowElements)R.replaceChildren()}renderRows(R,N){const q=this._bufferService.buffer,Z=q.ybase+q.y,Q=Math.min(q.x,this._bufferService.cols-1),J=this._optionsService.rawOptions.cursorBlink,y=this._optionsService.rawOptions.cursorStyle,B=this._optionsService.rawOptions.cursorInactiveStyle;for(let M=R;M<=N;M++){const O=M+q.ydisp,F=this._rowElements[M],K=q.lines.get(O);if(!F||!K)break;F.replaceChildren(...this._rowFactory.createRow(K,O,O===Z,y,B,Q,J,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${p}${this._terminalClass}`}_handleLinkHover(R){this._setCellUnderline(R.x1,R.x2,R.y1,R.y2,R.cols,!0)}_handleLinkLeave(R){this._setCellUnderline(R.x1,R.x2,R.y1,R.y2,R.cols,!1)}_setCellUnderline(R,N,q,Z,Q,J){q<0&&(R=0),Z<0&&(N=0);const y=this._bufferService.rows-1;q=Math.max(Math.min(q,y),0),Z=Math.max(Math.min(Z,y),0),Q=Math.min(Q,this._bufferService.cols);const B=this._bufferService.buffer,M=B.ybase+B.y,O=Math.min(B.x,Q-1),F=this._optionsService.rawOptions.cursorBlink,K=this._optionsService.rawOptions.cursorStyle,ee=this._optionsService.rawOptions.cursorInactiveStyle;for(let re=q;re<=Z;++re){const H=re+B.ydisp,k=this._rowElements[re],z=B.lines.get(H);if(!k||!z)break;k.replaceChildren(...this._rowFactory.createRow(z,H,H===M,K,ee,O,F,this.dimensions.css.cell.width,this._widthCache,J?re===q?R:0:-1,J?(re===Z?N:Q)-1:-1))}}};r.DomRenderer=I=c([f(7,h.IInstantiationService),f(8,t.ICharSizeService),f(9,h.IOptionsService),f(10,h.IBufferService),f(11,t.ICoreBrowserService),f(12,t.IThemeService)],I)},3787:function(L,r,o){var c=this&&this.__decorate||function(m,C,v,w){var T,A=arguments.length,I=A<3?C:w===null?w=Object.getOwnPropertyDescriptor(C,v):w;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")I=Reflect.decorate(m,C,v,w);else for(var R=m.length-1;R>=0;R--)(T=m[R])&&(I=(A<3?T(I):A>3?T(C,v,I):T(C,v))||I);return A>3&&I&&Object.defineProperty(C,v,I),I},f=this&&this.__param||function(m,C){return function(v,w){C(v,w,m)}};Object.defineProperty(r,"__esModule",{value:!0}),r.DomRendererRowFactory=void 0;const l=o(2223),a=o(643),_=o(511),S=o(2585),u=o(8055),t=o(4725),s=o(4269),e=o(6171),i=o(3734);let h=r.DomRendererRowFactory=class{constructor(m,C,v,w,T,A,I){this._document=m,this._characterJoinerService=C,this._optionsService=v,this._coreBrowserService=w,this._coreService=T,this._decorationService=A,this._themeService=I,this._workCell=new _.CellData,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(m,C,v){this._selectionStart=m,this._selectionEnd=C,this._columnSelectMode=v}createRow(m,C,v,w,T,A,I,R,N,q,Z){const Q=[],J=this._characterJoinerService.getJoinedCharacters(C),y=this._themeService.colors;let B,M=m.getNoBgTrimmedLength();v&&M<A+1&&(M=A+1);let O=0,F="",K=0,ee=0,re=0,H=!1,k=0,z=!1,W=0;const V=[],G=q!==-1&&Z!==-1;for(let ae=0;ae<M;ae++){m.loadCell(ae,this._workCell);let ue=this._workCell.getWidth();if(ue===0)continue;let ve=!1,ge=ae,ie=this._workCell;if(J.length>0&&ae===J[0][0]){ve=!0;const Ee=J.shift();ie=new s.JoinedCellData(this._workCell,m.translateToString(!0,Ee[0],Ee[1]),Ee[1]-Ee[0]),ge=Ee[1]-1,ue=ie.getWidth()}const ze=this._isCellInSelection(ae,C),et=v&&ae===A,vt=G&&ae>=q&&ae<=Z;let me=!1;this._decorationService.forEachDecorationAtCell(ae,C,void 0,Ee=>{me=!0});let We=ie.getChars()||a.WHITESPACE_CELL_CHAR;if(We===" "&&(ie.isUnderline()||ie.isOverline())&&(We=" "),W=ue*R-N.get(We,ie.isBold(),ie.isItalic()),B){if(O&&(ze&&z||!ze&&!z&&ie.bg===K)&&(ze&&z&&y.selectionForeground||ie.fg===ee)&&ie.extended.ext===re&&vt===H&&W===k&&!et&&!ve&&!me){ie.isInvisible()?F+=a.WHITESPACE_CELL_CHAR:F+=We,O++;continue}O&&(B.textContent=F),B=this._document.createElement("span"),O=0,F=""}else B=this._document.createElement("span");if(K=ie.bg,ee=ie.fg,re=ie.extended.ext,H=vt,k=W,z=ze,ve&&A>=ae&&A<=ge&&(A=ae),!this._coreService.isCursorHidden&&et&&this._coreService.isCursorInitialized){if(V.push("xterm-cursor"),this._coreBrowserService.isFocused)I&&V.push("xterm-cursor-blink"),V.push(w==="bar"?"xterm-cursor-bar":w==="underline"?"xterm-cursor-underline":"xterm-cursor-block");else if(T)switch(T){case"outline":V.push("xterm-cursor-outline");break;case"block":V.push("xterm-cursor-block");break;case"bar":V.push("xterm-cursor-bar");break;case"underline":V.push("xterm-cursor-underline")}}if(ie.isBold()&&V.push("xterm-bold"),ie.isItalic()&&V.push("xterm-italic"),ie.isDim()&&V.push("xterm-dim"),F=ie.isInvisible()?a.WHITESPACE_CELL_CHAR:ie.getChars()||a.WHITESPACE_CELL_CHAR,ie.isUnderline()&&(V.push(`xterm-underline-${ie.extended.underlineStyle}`),F===" "&&(F=" "),!ie.isUnderlineColorDefault()))if(ie.isUnderlineColorRGB())B.style.textDecorationColor=`rgb(${i.AttributeData.toColorRGB(ie.getUnderlineColor()).join(",")})`;else{let Ee=ie.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&ie.isBold()&&Ee<8&&(Ee+=8),B.style.textDecorationColor=y.ansi[Ee].css}ie.isOverline()&&(V.push("xterm-overline"),F===" "&&(F=" ")),ie.isStrikethrough()&&V.push("xterm-strikethrough"),vt&&(B.style.textDecoration="underline");let Ie=ie.getFgColor(),lt=ie.getFgColorMode(),ke=ie.getBgColor(),Xe=ie.getBgColorMode();const pt=!!ie.isInverse();if(pt){const Ee=Ie;Ie=ke,ke=Ee;const Jr=lt;lt=Xe,Xe=Jr}let $e,je,Ze,St=!1;switch(this._decorationService.forEachDecorationAtCell(ae,C,void 0,Ee=>{Ee.options.layer!=="top"&&St||(Ee.backgroundColorRGB&&(Xe=50331648,ke=Ee.backgroundColorRGB.rgba>>8&16777215,$e=Ee.backgroundColorRGB),Ee.foregroundColorRGB&&(lt=50331648,Ie=Ee.foregroundColorRGB.rgba>>8&16777215,je=Ee.foregroundColorRGB),St=Ee.options.layer==="top")}),!St&&ze&&($e=this._coreBrowserService.isFocused?y.selectionBackgroundOpaque:y.selectionInactiveBackgroundOpaque,ke=$e.rgba>>8&16777215,Xe=50331648,St=!0,y.selectionForeground&&(lt=50331648,Ie=y.selectionForeground.rgba>>8&16777215,je=y.selectionForeground)),St&&V.push("xterm-decoration-top"),Xe){case 16777216:case 33554432:Ze=y.ansi[ke],V.push(`xterm-bg-${ke}`);break;case 50331648:Ze=u.channels.toColor(ke>>16,ke>>8&255,255&ke),this._addStyle(B,`background-color:#${p((ke>>>0).toString(16),"0",6)}`);break;default:pt?(Ze=y.foreground,V.push(`xterm-bg-${l.INVERTED_DEFAULT_COLOR}`)):Ze=y.background}switch($e||ie.isDim()&&($e=u.color.multiplyOpacity(Ze,.5)),lt){case 16777216:case 33554432:ie.isBold()&&Ie<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(Ie+=8),this._applyMinimumContrast(B,Ze,y.ansi[Ie],ie,$e,void 0)||V.push(`xterm-fg-${Ie}`);break;case 50331648:const Ee=u.channels.toColor(Ie>>16&255,Ie>>8&255,255&Ie);this._applyMinimumContrast(B,Ze,Ee,ie,$e,je)||this._addStyle(B,`color:#${p(Ie.toString(16),"0",6)}`);break;default:this._applyMinimumContrast(B,Ze,y.foreground,ie,$e,je)||pt&&V.push(`xterm-fg-${l.INVERTED_DEFAULT_COLOR}`)}V.length&&(B.className=V.join(" "),V.length=0),et||ve||me?B.textContent=F:O++,W!==this.defaultSpacing&&(B.style.letterSpacing=`${W}px`),Q.push(B),ae=ge}return B&&O&&(B.textContent=F),Q}_applyMinimumContrast(m,C,v,w,T,A){if(this._optionsService.rawOptions.minimumContrastRatio===1||(0,e.treatGlyphAsBackgroundColor)(w.getCode()))return!1;const I=this._getContrastCache(w);let R;if(T||A||(R=I.getColor(C.rgba,v.rgba)),R===void 0){const N=this._optionsService.rawOptions.minimumContrastRatio/(w.isDim()?2:1);R=u.color.ensureContrastRatio(T||C,A||v,N),I.setColor((T||C).rgba,(A||v).rgba,R??null)}return!!R&&(this._addStyle(m,`color:${R.css}`),!0)}_getContrastCache(m){return m.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(m,C){m.setAttribute("style",`${m.getAttribute("style")||""}${C};`)}_isCellInSelection(m,C){const v=this._selectionStart,w=this._selectionEnd;return!(!v||!w)&&(this._columnSelectMode?v[0]<=w[0]?m>=v[0]&&C>=v[1]&&m<w[0]&&C<=w[1]:m<v[0]&&C>=v[1]&&m>=w[0]&&C<=w[1]:C>v[1]&&C<w[1]||v[1]===w[1]&&C===v[1]&&m>=v[0]&&m<w[0]||v[1]<w[1]&&C===w[1]&&m<w[0]||v[1]<w[1]&&C===v[1]&&m>=v[0])}};function p(m,C,v){for(;m.length<v;)m=C+m;return m}r.DomRendererRowFactory=h=c([f(1,t.ICharacterJoinerService),f(2,S.IOptionsService),f(3,t.ICoreBrowserService),f(4,S.ICoreService),f(5,S.IDecorationService),f(6,t.IThemeService)],h)},2550:(L,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.WidthCache=void 0,r.WidthCache=class{constructor(o,c){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=o.createElement("div"),this._container.classList.add("xterm-width-cache-measure-container"),this._container.setAttribute("aria-hidden","true"),this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";const f=o.createElement("span");f.classList.add("xterm-char-measure-element");const l=o.createElement("span");l.classList.add("xterm-char-measure-element"),l.style.fontWeight="bold";const a=o.createElement("span");a.classList.add("xterm-char-measure-element"),a.style.fontStyle="italic";const _=o.createElement("span");_.classList.add("xterm-char-measure-element"),_.style.fontWeight="bold",_.style.fontStyle="italic",this._measureElements=[f,l,a,_],this._container.appendChild(f),this._container.appendChild(l),this._container.appendChild(a),this._container.appendChild(_),c.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(o,c,f,l){o===this._font&&c===this._fontSize&&f===this._weight&&l===this._weightBold||(this._font=o,this._fontSize=c,this._weight=f,this._weightBold=l,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${f}`,this._measureElements[1].style.fontWeight=`${l}`,this._measureElements[2].style.fontWeight=`${f}`,this._measureElements[3].style.fontWeight=`${l}`,this.clear())}get(o,c,f){let l=0;if(!c&&!f&&o.length===1&&(l=o.charCodeAt(0))<256){if(this._flat[l]!==-9999)return this._flat[l];const S=this._measure(o,0);return S>0&&(this._flat[l]=S),S}let a=o;c&&(a+="B"),f&&(a+="I");let _=this._holey.get(a);if(_===void 0){let S=0;c&&(S|=1),f&&(S|=2),_=this._measure(o,S),_>0&&this._holey.set(a,_)}return _}_measure(o,c){const f=this._measureElements[c];return f.textContent=o.repeat(32),f.offsetWidth/32}}},2223:(L,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.TEXT_BASELINE=r.DIM_OPACITY=r.INVERTED_DEFAULT_COLOR=void 0;const c=o(6114);r.INVERTED_DEFAULT_COLOR=257,r.DIM_OPACITY=.5,r.TEXT_BASELINE=c.isFirefox||c.isLegacyEdge?"bottom":"ideographic"},6171:(L,r)=>{function o(f){return 57508<=f&&f<=57558}function c(f){return f>=128512&&f<=128591||f>=127744&&f<=128511||f>=128640&&f<=128767||f>=9728&&f<=9983||f>=9984&&f<=10175||f>=65024&&f<=65039||f>=129280&&f<=129535||f>=127462&&f<=127487}Object.defineProperty(r,"__esModule",{value:!0}),r.computeNextVariantOffset=r.createRenderDimensions=r.treatGlyphAsBackgroundColor=r.allowRescaling=r.isEmoji=r.isRestrictedPowerlineGlyph=r.isPowerlineGlyph=r.throwIfFalsy=void 0,r.throwIfFalsy=function(f){if(!f)throw new Error("value must not be falsy");return f},r.isPowerlineGlyph=o,r.isRestrictedPowerlineGlyph=function(f){return 57520<=f&&f<=57527},r.isEmoji=c,r.allowRescaling=function(f,l,a,_){return l===1&&a>Math.ceil(1.5*_)&&f!==void 0&&f>255&&!c(f)&&!o(f)&&!function(S){return 57344<=S&&S<=63743}(f)},r.treatGlyphAsBackgroundColor=function(f){return o(f)||function(l){return 9472<=l&&l<=9631}(f)},r.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}},r.computeNextVariantOffset=function(f,l,a=0){return(f-(2*Math.round(l)-a))%(2*Math.round(l))}},6052:(L,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.createSelectionRenderModel=void 0;class o{constructor(){this.clear()}clear(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}update(f,l,a,_=!1){if(this.selectionStart=l,this.selectionEnd=a,!l||!a||l[0]===a[0]&&l[1]===a[1])return void this.clear();const S=f.buffers.active.ydisp,u=l[1]-S,t=a[1]-S,s=Math.max(u,0),e=Math.min(t,f.rows-1);s>=f.rows||e<0?this.clear():(this.hasSelection=!0,this.columnSelectMode=_,this.viewportStartRow=u,this.viewportEndRow=t,this.viewportCappedStartRow=s,this.viewportCappedEndRow=e,this.startCol=l[0],this.endCol=a[0])}isCellSelected(f,l,a){return!!this.hasSelection&&(a-=f.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?l>=this.startCol&&a>=this.viewportCappedStartRow&&l<this.endCol&&a<=this.viewportCappedEndRow:l<this.startCol&&a>=this.viewportCappedStartRow&&l>=this.endCol&&a<=this.viewportCappedEndRow:a>this.viewportStartRow&&a<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&a===this.viewportStartRow&&l>=this.startCol&&l<this.endCol||this.viewportStartRow<this.viewportEndRow&&a===this.viewportEndRow&&l<this.endCol||this.viewportStartRow<this.viewportEndRow&&a===this.viewportStartRow&&l>=this.startCol)}}r.createSelectionRenderModel=function(){return new o}},456:(L,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.SelectionModel=void 0,r.SelectionModel=class{constructor(o){this._bufferService=o,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){const o=this.selectionStart[0]+this.selectionStartLength;return o>this._bufferService.cols?o%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(o/this._bufferService.cols)-1]:[o%this._bufferService.cols,this.selectionStart[1]+Math.floor(o/this._bufferService.cols)]:[o,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){const o=this.selectionStart[0]+this.selectionStartLength;return o>this._bufferService.cols?[o%this._bufferService.cols,this.selectionStart[1]+Math.floor(o/this._bufferService.cols)]:[Math.max(o,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){const o=this.selectionStart,c=this.selectionEnd;return!(!o||!c)&&(o[1]>c[1]||o[1]===c[1]&&o[0]>c[0])}handleTrim(o){return this.selectionStart&&(this.selectionStart[1]-=o),this.selectionEnd&&(this.selectionEnd[1]-=o),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}}},428:function(L,r,o){var c=this&&this.__decorate||function(e,i,h,p){var m,C=arguments.length,v=C<3?i:p===null?p=Object.getOwnPropertyDescriptor(i,h):p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")v=Reflect.decorate(e,i,h,p);else for(var w=e.length-1;w>=0;w--)(m=e[w])&&(v=(C<3?m(v):C>3?m(i,h,v):m(i,h))||v);return C>3&&v&&Object.defineProperty(i,h,v),v},f=this&&this.__param||function(e,i){return function(h,p){i(h,p,e)}};Object.defineProperty(r,"__esModule",{value:!0}),r.CharSizeService=void 0;const l=o(2585),a=o(8460),_=o(844);let S=r.CharSizeService=class extends _.Disposable{get hasValidSize(){return this.width>0&&this.height>0}constructor(e,i,h){super(),this._optionsService=h,this.width=0,this.height=0,this._onCharSizeChange=this.register(new a.EventEmitter),this.onCharSizeChange=this._onCharSizeChange.event;try{this._measureStrategy=this.register(new s(this._optionsService))}catch{this._measureStrategy=this.register(new t(e,i,this._optionsService))}this.register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],()=>this.measure()))}measure(){const e=this._measureStrategy.measure();e.width===this.width&&e.height===this.height||(this.width=e.width,this.height=e.height,this._onCharSizeChange.fire())}};r.CharSizeService=S=c([f(2,l.IOptionsService)],S);class u extends _.Disposable{constructor(){super(...arguments),this._result={width:0,height:0}}_validateAndSet(i,h){i!==void 0&&i>0&&h!==void 0&&h>0&&(this._result.width=i,this._result.height=h)}}class t extends u{constructor(i,h,p){super(),this._document=i,this._parentElement=h,this._optionsService=p,this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){return this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`,this._validateAndSet(Number(this._measureElement.offsetWidth)/32,Number(this._measureElement.offsetHeight)),this._result}}class s extends u{constructor(i){super(),this._optionsService=i,this._canvas=new OffscreenCanvas(100,100),this._ctx=this._canvas.getContext("2d");const h=this._ctx.measureText("W");if(!("width"in h&&"fontBoundingBoxAscent"in h&&"fontBoundingBoxDescent"in h))throw new Error("Required font metrics not supported")}measure(){this._ctx.font=`${this._optionsService.rawOptions.fontSize}px ${this._optionsService.rawOptions.fontFamily}`;const i=this._ctx.measureText("W");return this._validateAndSet(i.width,i.fontBoundingBoxAscent+i.fontBoundingBoxDescent),this._result}}},4269:function(L,r,o){var c=this&&this.__decorate||function(s,e,i,h){var p,m=arguments.length,C=m<3?e:h===null?h=Object.getOwnPropertyDescriptor(e,i):h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(s,e,i,h);else for(var v=s.length-1;v>=0;v--)(p=s[v])&&(C=(m<3?p(C):m>3?p(e,i,C):p(e,i))||C);return m>3&&C&&Object.defineProperty(e,i,C),C},f=this&&this.__param||function(s,e){return function(i,h){e(i,h,s)}};Object.defineProperty(r,"__esModule",{value:!0}),r.CharacterJoinerService=r.JoinedCellData=void 0;const l=o(3734),a=o(643),_=o(511),S=o(2585);class u extends l.AttributeData{constructor(e,i,h){super(),this.content=0,this.combinedData="",this.fg=e.fg,this.bg=e.bg,this.combinedData=i,this._width=h}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(e){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}r.JoinedCellData=u;let t=r.CharacterJoinerService=class js{constructor(e){this._bufferService=e,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new _.CellData}register(e){const i={id:this._nextCharacterJoinerId++,handler:e};return this._characterJoiners.push(i),i.id}deregister(e){for(let i=0;i<this._characterJoiners.length;i++)if(this._characterJoiners[i].id===e)return this._characterJoiners.splice(i,1),!0;return!1}getJoinedCharacters(e){if(this._characterJoiners.length===0)return[];const i=this._bufferService.buffer.lines.get(e);if(!i||i.length===0)return[];const h=[],p=i.translateToString(!0);let m=0,C=0,v=0,w=i.getFg(0),T=i.getBg(0);for(let A=0;A<i.getTrimmedLength();A++)if(i.loadCell(A,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==w||this._workCell.bg!==T){if(A-m>1){const I=this._getJoinedRanges(p,v,C,i,m);for(let R=0;R<I.length;R++)h.push(I[R])}m=A,v=C,w=this._workCell.fg,T=this._workCell.bg}C+=this._workCell.getChars().length||a.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-m>1){const A=this._getJoinedRanges(p,v,C,i,m);for(let I=0;I<A.length;I++)h.push(A[I])}return h}_getJoinedRanges(e,i,h,p,m){const C=e.substring(i,h);let v=[];try{v=this._characterJoiners[0].handler(C)}catch(w){console.error(w)}for(let w=1;w<this._characterJoiners.length;w++)try{const T=this._characterJoiners[w].handler(C);for(let A=0;A<T.length;A++)js._mergeRanges(v,T[A])}catch(T){console.error(T)}return this._stringRangesToCellRanges(v,p,m),v}_stringRangesToCellRanges(e,i,h){let p=0,m=!1,C=0,v=e[p];if(v){for(let w=h;w<this._bufferService.cols;w++){const T=i.getWidth(w),A=i.getString(w).length||a.WHITESPACE_CELL_CHAR.length;if(T!==0){if(!m&&v[0]<=C&&(v[0]=w,m=!0),v[1]<=C){if(v[1]=w,v=e[++p],!v)break;v[0]<=C?(v[0]=w,m=!0):m=!1}C+=A}}v&&(v[1]=this._bufferService.cols)}}static _mergeRanges(e,i){let h=!1;for(let p=0;p<e.length;p++){const m=e[p];if(h){if(i[1]<=m[0])return e[p-1][1]=i[1],e;if(i[1]<=m[1])return e[p-1][1]=Math.max(i[1],m[1]),e.splice(p,1),e;e.splice(p,1),p--}else{if(i[1]<=m[0])return e.splice(p,0,i),e;if(i[1]<=m[1])return m[0]=Math.min(i[0],m[0]),e;i[0]<m[1]&&(m[0]=Math.min(i[0],m[0]),h=!0)}}return h?e[e.length-1][1]=i[1]:e.push(i),e}};r.CharacterJoinerService=t=c([f(0,S.IBufferService)],t)},5114:(L,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.CoreBrowserService=void 0;const c=o(844),f=o(8460),l=o(3656);class a extends c.Disposable{constructor(u,t,s){super(),this._textarea=u,this._window=t,this.mainDocument=s,this._isFocused=!1,this._cachedIsFocused=void 0,this._screenDprMonitor=new _(this._window),this._onDprChange=this.register(new f.EventEmitter),this.onDprChange=this._onDprChange.event,this._onWindowChange=this.register(new f.EventEmitter),this.onWindowChange=this._onWindowChange.event,this.register(this.onWindowChange(e=>this._screenDprMonitor.setWindow(e))),this.register((0,f.forwardEvent)(this._screenDprMonitor.onDprChange,this._onDprChange)),this._textarea.addEventListener("focus",()=>this._isFocused=!0),this._textarea.addEventListener("blur",()=>this._isFocused=!1)}get window(){return this._window}set window(u){this._window!==u&&(this._window=u,this._onWindowChange.fire(this._window))}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask(()=>this._cachedIsFocused=void 0)),this._cachedIsFocused}}r.CoreBrowserService=a;class _ extends c.Disposable{constructor(u){super(),this._parentWindow=u,this._windowResizeListener=this.register(new c.MutableDisposable),this._onDprChange=this.register(new f.EventEmitter),this.onDprChange=this._onDprChange.event,this._outerListener=()=>this._setDprAndFireIfDiffers(),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._updateDpr(),this._setWindowResizeListener(),this.register((0,c.toDisposable)(()=>this.clearListener()))}setWindow(u){this._parentWindow=u,this._setWindowResizeListener(),this._setDprAndFireIfDiffers()}_setWindowResizeListener(){this._windowResizeListener.value=(0,l.addDisposableDomListener)(this._parentWindow,"resize",()=>this._setDprAndFireIfDiffers())}_setDprAndFireIfDiffers(){this._parentWindow.devicePixelRatio!==this._currentDevicePixelRatio&&this._onDprChange.fire(this._parentWindow.devicePixelRatio),this._updateDpr()}_updateDpr(){this._outerListener&&(this._resolutionMediaMatchList?.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){this._resolutionMediaMatchList&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._outerListener=void 0)}}},779:(L,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.LinkProviderService=void 0;const c=o(844);class f extends c.Disposable{constructor(){super(),this.linkProviders=[],this.register((0,c.toDisposable)(()=>this.linkProviders.length=0))}registerLinkProvider(a){return this.linkProviders.push(a),{dispose:()=>{const _=this.linkProviders.indexOf(a);_!==-1&&this.linkProviders.splice(_,1)}}}}r.LinkProviderService=f},8934:function(L,r,o){var c=this&&this.__decorate||function(S,u,t,s){var e,i=arguments.length,h=i<3?u:s===null?s=Object.getOwnPropertyDescriptor(u,t):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(S,u,t,s);else for(var p=S.length-1;p>=0;p--)(e=S[p])&&(h=(i<3?e(h):i>3?e(u,t,h):e(u,t))||h);return i>3&&h&&Object.defineProperty(u,t,h),h},f=this&&this.__param||function(S,u){return function(t,s){u(t,s,S)}};Object.defineProperty(r,"__esModule",{value:!0}),r.MouseService=void 0;const l=o(4725),a=o(9806);let _=r.MouseService=class{constructor(S,u){this._renderService=S,this._charSizeService=u}getCoords(S,u,t,s,e){return(0,a.getCoords)(window,S,u,t,s,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,e)}getMouseReportCoords(S,u){const t=(0,a.getCoordsRelativeToElement)(window,S,u);if(this._charSizeService.hasValidSize)return t[0]=Math.min(Math.max(t[0],0),this._renderService.dimensions.css.canvas.width-1),t[1]=Math.min(Math.max(t[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(t[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(t[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(t[0]),y:Math.floor(t[1])}}};r.MouseService=_=c([f(0,l.IRenderService),f(1,l.ICharSizeService)],_)},3230:function(L,r,o){var c=this&&this.__decorate||function(e,i,h,p){var m,C=arguments.length,v=C<3?i:p===null?p=Object.getOwnPropertyDescriptor(i,h):p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")v=Reflect.decorate(e,i,h,p);else for(var w=e.length-1;w>=0;w--)(m=e[w])&&(v=(C<3?m(v):C>3?m(i,h,v):m(i,h))||v);return C>3&&v&&Object.defineProperty(i,h,v),v},f=this&&this.__param||function(e,i){return function(h,p){i(h,p,e)}};Object.defineProperty(r,"__esModule",{value:!0}),r.RenderService=void 0;const l=o(6193),a=o(4725),_=o(8460),S=o(844),u=o(7226),t=o(2585);let s=r.RenderService=class extends S.Disposable{get dimensions(){return this._renderer.value.dimensions}constructor(e,i,h,p,m,C,v,w){super(),this._rowCount=e,this._charSizeService=p,this._renderer=this.register(new S.MutableDisposable),this._pausedResizeTask=new u.DebouncedIdleTask,this._observerDisposable=this.register(new S.MutableDisposable),this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this.register(new _.EventEmitter),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this.register(new _.EventEmitter),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this.register(new _.EventEmitter),this.onRender=this._onRender.event,this._onRefreshRequest=this.register(new _.EventEmitter),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new l.RenderDebouncer((T,A)=>this._renderRows(T,A),v),this.register(this._renderDebouncer),this.register(v.onDprChange(()=>this.handleDevicePixelRatioChange())),this.register(C.onResize(()=>this._fullRefresh())),this.register(C.buffers.onBufferActivate(()=>this._renderer.value?.clear())),this.register(h.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._charSizeService.onCharSizeChange(()=>this.handleCharSizeChanged())),this.register(m.onDecorationRegistered(()=>this._fullRefresh())),this.register(m.onDecorationRemoved(()=>this._fullRefresh())),this.register(h.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio","rescaleOverlappingGlyphs"],()=>{this.clear(),this.handleResize(C.cols,C.rows),this._fullRefresh()})),this.register(h.onMultipleOptionChange(["cursorBlink","cursorStyle"],()=>this.refreshRows(C.buffer.y,C.buffer.y,!0))),this.register(w.onChangeColors(()=>this._fullRefresh())),this._registerIntersectionObserver(v.window,i),this.register(v.onWindowChange(T=>this._registerIntersectionObserver(T,i)))}_registerIntersectionObserver(e,i){if("IntersectionObserver"in e){const h=new e.IntersectionObserver(p=>this._handleIntersectionChange(p[p.length-1]),{threshold:0});h.observe(i),this._observerDisposable.value=(0,S.toDisposable)(()=>h.disconnect())}}_handleIntersectionChange(e){this._isPaused=e.isIntersecting===void 0?e.intersectionRatio===0:!e.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(e,i,h=!1){this._isPaused?this._needsFullRefresh=!0:(h||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(e,i,this._rowCount))}_renderRows(e,i){this._renderer.value&&(e=Math.min(e,this._rowCount-1),i=Math.min(i,this._rowCount-1),this._renderer.value.renderRows(e,i),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:e,end:i}),this._onRender.fire({start:e,end:i}),this._isNextRenderRedrawOnly=!0)}resize(e,i){this._rowCount=i,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(e){this._renderer.value=e,this._renderer.value&&(this._renderer.value.onRequestRedraw(i=>this.refreshRows(i.start,i.end,!0)),this._needsSelectionRefresh=!0,this._fullRefresh())}addRefreshCallback(e){return this._renderDebouncer.addRefreshCallback(e)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){this._renderer.value&&(this._renderer.value.clearTextureAtlas?.(),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(e,i){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set(()=>this._renderer.value?.handleResize(e,i)):this._renderer.value.handleResize(e,i),this._fullRefresh())}handleCharSizeChanged(){this._renderer.value?.handleCharSizeChanged()}handleBlur(){this._renderer.value?.handleBlur()}handleFocus(){this._renderer.value?.handleFocus()}handleSelectionChanged(e,i,h){this._selectionState.start=e,this._selectionState.end=i,this._selectionState.columnSelectMode=h,this._renderer.value?.handleSelectionChanged(e,i,h)}handleCursorMove(){this._renderer.value?.handleCursorMove()}clear(){this._renderer.value?.clear()}};r.RenderService=s=c([f(2,t.IOptionsService),f(3,a.ICharSizeService),f(4,t.IDecorationService),f(5,t.IBufferService),f(6,a.ICoreBrowserService),f(7,a.IThemeService)],s)},9312:function(L,r,o){var c=this&&this.__decorate||function(v,w,T,A){var I,R=arguments.length,N=R<3?w:A===null?A=Object.getOwnPropertyDescriptor(w,T):A;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")N=Reflect.decorate(v,w,T,A);else for(var q=v.length-1;q>=0;q--)(I=v[q])&&(N=(R<3?I(N):R>3?I(w,T,N):I(w,T))||N);return R>3&&N&&Object.defineProperty(w,T,N),N},f=this&&this.__param||function(v,w){return function(T,A){w(T,A,v)}};Object.defineProperty(r,"__esModule",{value:!0}),r.SelectionService=void 0;const l=o(9806),a=o(9504),_=o(456),S=o(4725),u=o(8460),t=o(844),s=o(6114),e=o(4841),i=o(511),h=o(2585),p=" ",m=new RegExp(p,"g");let C=r.SelectionService=class extends t.Disposable{constructor(v,w,T,A,I,R,N,q,Z){super(),this._element=v,this._screenElement=w,this._linkifier=T,this._bufferService=A,this._coreService=I,this._mouseService=R,this._optionsService=N,this._renderService=q,this._coreBrowserService=Z,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new i.CellData,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this.register(new u.EventEmitter),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this.register(new u.EventEmitter),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this.register(new u.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this.register(new u.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=Q=>this._handleMouseMove(Q),this._mouseUpListener=Q=>this._handleMouseUp(Q),this._coreService.onUserInput(()=>{this.hasSelection&&this.clearSelection()}),this._trimListener=this._bufferService.buffer.lines.onTrim(Q=>this._handleTrim(Q)),this.register(this._bufferService.buffers.onBufferActivate(Q=>this._handleBufferActivate(Q))),this.enable(),this._model=new _.SelectionModel(this._bufferService),this._activeSelectionMode=0,this.register((0,t.toDisposable)(()=>{this._removeMouseDownListeners()}))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){const v=this._model.finalSelectionStart,w=this._model.finalSelectionEnd;return!(!v||!w||v[0]===w[0]&&v[1]===w[1])}get selectionText(){const v=this._model.finalSelectionStart,w=this._model.finalSelectionEnd;if(!v||!w)return"";const T=this._bufferService.buffer,A=[];if(this._activeSelectionMode===3){if(v[0]===w[0])return"";const I=v[0]<w[0]?v[0]:w[0],R=v[0]<w[0]?w[0]:v[0];for(let N=v[1];N<=w[1];N++){const q=T.translateBufferLineToString(N,!0,I,R);A.push(q)}}else{const I=v[1]===w[1]?w[0]:void 0;A.push(T.translateBufferLineToString(v[1],!0,v[0],I));for(let R=v[1]+1;R<=w[1]-1;R++){const N=T.lines.get(R),q=T.translateBufferLineToString(R,!0);N?.isWrapped?A[A.length-1]+=q:A.push(q)}if(v[1]!==w[1]){const R=T.lines.get(w[1]),N=T.translateBufferLineToString(w[1],!0,0,w[0]);R&&R.isWrapped?A[A.length-1]+=N:A.push(N)}}return A.map(I=>I.replace(m," ")).join(s.isWindows?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(v){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._refresh())),s.isLinux&&v&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(v){const w=this._getMouseBufferCoords(v),T=this._model.finalSelectionStart,A=this._model.finalSelectionEnd;return!!(T&&A&&w)&&this._areCoordsInSelection(w,T,A)}isCellInSelection(v,w){const T=this._model.finalSelectionStart,A=this._model.finalSelectionEnd;return!(!T||!A)&&this._areCoordsInSelection([v,w],T,A)}_areCoordsInSelection(v,w,T){return v[1]>w[1]&&v[1]<T[1]||w[1]===T[1]&&v[1]===w[1]&&v[0]>=w[0]&&v[0]<T[0]||w[1]<T[1]&&v[1]===T[1]&&v[0]<T[0]||w[1]<T[1]&&v[1]===w[1]&&v[0]>=w[0]}_selectWordAtCursor(v,w){const T=this._linkifier.currentLink?.link?.range;if(T)return this._model.selectionStart=[T.start.x-1,T.start.y-1],this._model.selectionStartLength=(0,e.getRangeLength)(T,this._bufferService.cols),this._model.selectionEnd=void 0,!0;const A=this._getMouseBufferCoords(v);return!!A&&(this._selectWordAt(A,w),this._model.selectionEnd=void 0,!0)}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(v,w){this._model.clearSelection(),v=Math.max(v,0),w=Math.min(w,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,v],this._model.selectionEnd=[this._bufferService.cols,w],this.refresh(),this._onSelectionChange.fire()}_handleTrim(v){this._model.handleTrim(v)&&this.refresh()}_getMouseBufferCoords(v){const w=this._mouseService.getCoords(v,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(w)return w[0]--,w[1]--,w[1]+=this._bufferService.buffer.ydisp,w}_getMouseEventScrollAmount(v){let w=(0,l.getCoordsRelativeToElement)(this._coreBrowserService.window,v,this._screenElement)[1];const T=this._renderService.dimensions.css.canvas.height;return w>=0&&w<=T?0:(w>T&&(w-=T),w=Math.min(Math.max(w,-50),50),w/=50,w/Math.abs(w)+Math.round(14*w))}shouldForceSelection(v){return s.isMac?v.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:v.shiftKey}handleMouseDown(v){if(this._mouseDownTimeStamp=v.timeStamp,(v.button!==2||!this.hasSelection)&&v.button===0){if(!this._enabled){if(!this.shouldForceSelection(v))return;v.stopPropagation()}v.preventDefault(),this._dragScrollAmount=0,this._enabled&&v.shiftKey?this._handleIncrementalClick(v):v.detail===1?this._handleSingleClick(v):v.detail===2?this._handleDoubleClick(v):v.detail===3&&this._handleTripleClick(v),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval(()=>this._dragScroll(),50)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(v){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(v))}_handleSingleClick(v){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(v)?3:0,this._model.selectionStart=this._getMouseBufferCoords(v),!this._model.selectionStart)return;this._model.selectionEnd=void 0;const w=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);w&&w.length!==this._model.selectionStart[0]&&w.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(v){this._selectWordAtCursor(v,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(v){const w=this._getMouseBufferCoords(v);w&&(this._activeSelectionMode=2,this._selectLineAt(w[1]))}shouldColumnSelect(v){return v.altKey&&!(s.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(v){if(v.stopImmediatePropagation(),!this._model.selectionStart)return;const w=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(v),!this._model.selectionEnd)return void this.refresh(!0);this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(v),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));const T=this._bufferService.buffer;if(this._model.selectionEnd[1]<T.lines.length){const A=T.lines.get(this._model.selectionEnd[1]);A&&A.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]<this._bufferService.cols&&this._model.selectionEnd[0]++}w&&w[0]===this._model.selectionEnd[0]&&w[1]===this._model.selectionEnd[1]||this.refresh(!0)}_dragScroll(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});const v=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(v.ydisp+this._bufferService.rows,v.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=v.ydisp),this.refresh()}}_handleMouseUp(v){const w=v.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&w<500&&v.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){const T=this._mouseService.getCoords(v,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(T&&T[0]!==void 0&&T[1]!==void 0){const A=(0,a.moveToCellSequence)(T[0]-1,T[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(A,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){const v=this._model.finalSelectionStart,w=this._model.finalSelectionEnd,T=!(!v||!w||v[0]===w[0]&&v[1]===w[1]);T?v&&w&&(this._oldSelectionStart&&this._oldSelectionEnd&&v[0]===this._oldSelectionStart[0]&&v[1]===this._oldSelectionStart[1]&&w[0]===this._oldSelectionEnd[0]&&w[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(v,w,T)):this._oldHasSelection&&this._fireOnSelectionChange(v,w,T)}_fireOnSelectionChange(v,w,T){this._oldSelectionStart=v,this._oldSelectionEnd=w,this._oldHasSelection=T,this._onSelectionChange.fire()}_handleBufferActivate(v){this.clearSelection(),this._trimListener.dispose(),this._trimListener=v.activeBuffer.lines.onTrim(w=>this._handleTrim(w))}_convertViewportColToCharacterIndex(v,w){let T=w;for(let A=0;w>=A;A++){const I=v.loadCell(A,this._workCell).getChars().length;this._workCell.getWidth()===0?T--:I>1&&w!==A&&(T+=I-1)}return T}setSelection(v,w,T){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[v,w],this._model.selectionStartLength=T,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(v){this._isClickInSelection(v)||(this._selectWordAtCursor(v,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(v,w,T=!0,A=!0){if(v[0]>=this._bufferService.cols)return;const I=this._bufferService.buffer,R=I.lines.get(v[1]);if(!R)return;const N=I.translateBufferLineToString(v[1],!1);let q=this._convertViewportColToCharacterIndex(R,v[0]),Z=q;const Q=v[0]-q;let J=0,y=0,B=0,M=0;if(N.charAt(q)===" "){for(;q>0&&N.charAt(q-1)===" ";)q--;for(;Z<N.length&&N.charAt(Z+1)===" ";)Z++}else{let K=v[0],ee=v[0];R.getWidth(K)===0&&(J++,K--),R.getWidth(ee)===2&&(y++,ee++);const re=R.getString(ee).length;for(re>1&&(M+=re-1,Z+=re-1);K>0&&q>0&&!this._isCharWordSeparator(R.loadCell(K-1,this._workCell));){R.loadCell(K-1,this._workCell);const H=this._workCell.getChars().length;this._workCell.getWidth()===0?(J++,K--):H>1&&(B+=H-1,q-=H-1),q--,K--}for(;ee<R.length&&Z+1<N.length&&!this._isCharWordSeparator(R.loadCell(ee+1,this._workCell));){R.loadCell(ee+1,this._workCell);const H=this._workCell.getChars().length;this._workCell.getWidth()===2?(y++,ee++):H>1&&(M+=H-1,Z+=H-1),Z++,ee++}}Z++;let O=q+Q-J+B,F=Math.min(this._bufferService.cols,Z-q+J+y-B-M);if(w||N.slice(q,Z).trim()!==""){if(T&&O===0&&R.getCodePoint(0)!==32){const K=I.lines.get(v[1]-1);if(K&&R.isWrapped&&K.getCodePoint(this._bufferService.cols-1)!==32){const ee=this._getWordAt([this._bufferService.cols-1,v[1]-1],!1,!0,!1);if(ee){const re=this._bufferService.cols-ee.start;O-=re,F+=re}}}if(A&&O+F===this._bufferService.cols&&R.getCodePoint(this._bufferService.cols-1)!==32){const K=I.lines.get(v[1]+1);if(K?.isWrapped&&K.getCodePoint(0)!==32){const ee=this._getWordAt([0,v[1]+1],!1,!1,!0);ee&&(F+=ee.length)}}return{start:O,length:F}}}_selectWordAt(v,w){const T=this._getWordAt(v,w);if(T){for(;T.start<0;)T.start+=this._bufferService.cols,v[1]--;this._model.selectionStart=[T.start,v[1]],this._model.selectionStartLength=T.length}}_selectToWordAt(v){const w=this._getWordAt(v,!0);if(w){let T=v[1];for(;w.start<0;)w.start+=this._bufferService.cols,T--;if(!this._model.areSelectionValuesReversed())for(;w.start+w.length>this._bufferService.cols;)w.length-=this._bufferService.cols,T++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?w.start:w.start+w.length,T]}}_isCharWordSeparator(v){return v.getWidth()!==0&&this._optionsService.rawOptions.wordSeparator.indexOf(v.getChars())>=0}_selectLineAt(v){const w=this._bufferService.buffer.getWrappedRangeForLine(v),T={start:{x:0,y:w.first},end:{x:this._bufferService.cols-1,y:w.last}};this._model.selectionStart=[0,w.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,e.getRangeLength)(T,this._bufferService.cols)}};r.SelectionService=C=c([f(3,h.IBufferService),f(4,h.ICoreService),f(5,S.IMouseService),f(6,h.IOptionsService),f(7,S.IRenderService),f(8,S.ICoreBrowserService)],C)},4725:(L,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.ILinkProviderService=r.IThemeService=r.ICharacterJoinerService=r.ISelectionService=r.IRenderService=r.IMouseService=r.ICoreBrowserService=r.ICharSizeService=void 0;const c=o(8343);r.ICharSizeService=(0,c.createDecorator)("CharSizeService"),r.ICoreBrowserService=(0,c.createDecorator)("CoreBrowserService"),r.IMouseService=(0,c.createDecorator)("MouseService"),r.IRenderService=(0,c.createDecorator)("RenderService"),r.ISelectionService=(0,c.createDecorator)("SelectionService"),r.ICharacterJoinerService=(0,c.createDecorator)("CharacterJoinerService"),r.IThemeService=(0,c.createDecorator)("ThemeService"),r.ILinkProviderService=(0,c.createDecorator)("LinkProviderService")},6731:function(L,r,o){var c=this&&this.__decorate||function(C,v,w,T){var A,I=arguments.length,R=I<3?v:T===null?T=Object.getOwnPropertyDescriptor(v,w):T;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")R=Reflect.decorate(C,v,w,T);else for(var N=C.length-1;N>=0;N--)(A=C[N])&&(R=(I<3?A(R):I>3?A(v,w,R):A(v,w))||R);return I>3&&R&&Object.defineProperty(v,w,R),R},f=this&&this.__param||function(C,v){return function(w,T){v(w,T,C)}};Object.defineProperty(r,"__esModule",{value:!0}),r.ThemeService=r.DEFAULT_ANSI_COLORS=void 0;const l=o(7239),a=o(8055),_=o(8460),S=o(844),u=o(2585),t=a.css.toColor("#ffffff"),s=a.css.toColor("#000000"),e=a.css.toColor("#ffffff"),i=a.css.toColor("#000000"),h={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};r.DEFAULT_ANSI_COLORS=Object.freeze((()=>{const C=[a.css.toColor("#2e3436"),a.css.toColor("#cc0000"),a.css.toColor("#4e9a06"),a.css.toColor("#c4a000"),a.css.toColor("#3465a4"),a.css.toColor("#75507b"),a.css.toColor("#06989a"),a.css.toColor("#d3d7cf"),a.css.toColor("#555753"),a.css.toColor("#ef2929"),a.css.toColor("#8ae234"),a.css.toColor("#fce94f"),a.css.toColor("#729fcf"),a.css.toColor("#ad7fa8"),a.css.toColor("#34e2e2"),a.css.toColor("#eeeeec")],v=[0,95,135,175,215,255];for(let w=0;w<216;w++){const T=v[w/36%6|0],A=v[w/6%6|0],I=v[w%6];C.push({css:a.channels.toCss(T,A,I),rgba:a.channels.toRgba(T,A,I)})}for(let w=0;w<24;w++){const T=8+10*w;C.push({css:a.channels.toCss(T,T,T),rgba:a.channels.toRgba(T,T,T)})}return C})());let p=r.ThemeService=class extends S.Disposable{get colors(){return this._colors}constructor(C){super(),this._optionsService=C,this._contrastCache=new l.ColorContrastCache,this._halfContrastCache=new l.ColorContrastCache,this._onChangeColors=this.register(new _.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:t,background:s,cursor:e,cursorAccent:i,selectionForeground:void 0,selectionBackgroundTransparent:h,selectionBackgroundOpaque:a.color.blend(s,h),selectionInactiveBackgroundTransparent:h,selectionInactiveBackgroundOpaque:a.color.blend(s,h),ansi:r.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",()=>this._contrastCache.clear())),this.register(this._optionsService.onSpecificOptionChange("theme",()=>this._setTheme(this._optionsService.rawOptions.theme)))}_setTheme(C={}){const v=this._colors;if(v.foreground=m(C.foreground,t),v.background=m(C.background,s),v.cursor=m(C.cursor,e),v.cursorAccent=m(C.cursorAccent,i),v.selectionBackgroundTransparent=m(C.selectionBackground,h),v.selectionBackgroundOpaque=a.color.blend(v.background,v.selectionBackgroundTransparent),v.selectionInactiveBackgroundTransparent=m(C.selectionInactiveBackground,v.selectionBackgroundTransparent),v.selectionInactiveBackgroundOpaque=a.color.blend(v.background,v.selectionInactiveBackgroundTransparent),v.selectionForeground=C.selectionForeground?m(C.selectionForeground,a.NULL_COLOR):void 0,v.selectionForeground===a.NULL_COLOR&&(v.selectionForeground=void 0),a.color.isOpaque(v.selectionBackgroundTransparent)&&(v.selectionBackgroundTransparent=a.color.opacity(v.selectionBackgroundTransparent,.3)),a.color.isOpaque(v.selectionInactiveBackgroundTransparent)&&(v.selectionInactiveBackgroundTransparent=a.color.opacity(v.selectionInactiveBackgroundTransparent,.3)),v.ansi=r.DEFAULT_ANSI_COLORS.slice(),v.ansi[0]=m(C.black,r.DEFAULT_ANSI_COLORS[0]),v.ansi[1]=m(C.red,r.DEFAULT_ANSI_COLORS[1]),v.ansi[2]=m(C.green,r.DEFAULT_ANSI_COLORS[2]),v.ansi[3]=m(C.yellow,r.DEFAULT_ANSI_COLORS[3]),v.ansi[4]=m(C.blue,r.DEFAULT_ANSI_COLORS[4]),v.ansi[5]=m(C.magenta,r.DEFAULT_ANSI_COLORS[5]),v.ansi[6]=m(C.cyan,r.DEFAULT_ANSI_COLORS[6]),v.ansi[7]=m(C.white,r.DEFAULT_ANSI_COLORS[7]),v.ansi[8]=m(C.brightBlack,r.DEFAULT_ANSI_COLORS[8]),v.ansi[9]=m(C.brightRed,r.DEFAULT_ANSI_COLORS[9]),v.ansi[10]=m(C.brightGreen,r.DEFAULT_ANSI_COLORS[10]),v.ansi[11]=m(C.brightYellow,r.DEFAULT_ANSI_COLORS[11]),v.ansi[12]=m(C.brightBlue,r.DEFAULT_ANSI_COLORS[12]),v.ansi[13]=m(C.brightMagenta,r.DEFAULT_ANSI_COLORS[13]),v.ansi[14]=m(C.brightCyan,r.DEFAULT_ANSI_COLORS[14]),v.ansi[15]=m(C.brightWhite,r.DEFAULT_ANSI_COLORS[15]),C.extendedAnsi){const w=Math.min(v.ansi.length-16,C.extendedAnsi.length);for(let T=0;T<w;T++)v.ansi[T+16]=m(C.extendedAnsi[T],r.DEFAULT_ANSI_COLORS[T+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(C){this._restoreColor(C),this._onChangeColors.fire(this.colors)}_restoreColor(C){if(C!==void 0)switch(C){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[C]=this._restoreColors.ansi[C]}else for(let v=0;v<this._restoreColors.ansi.length;++v)this._colors.ansi[v]=this._restoreColors.ansi[v]}modifyColors(C){C(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function m(C,v){if(C!==void 0)try{return a.css.toColor(C)}catch{}return v}r.ThemeService=p=c([f(0,u.IOptionsService)],p)},6349:(L,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.CircularList=void 0;const c=o(8460),f=o(844);class l extends f.Disposable{constructor(_){super(),this._maxLength=_,this.onDeleteEmitter=this.register(new c.EventEmitter),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this.register(new c.EventEmitter),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this.register(new c.EventEmitter),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(_){if(this._maxLength===_)return;const S=new Array(_);for(let u=0;u<Math.min(_,this.length);u++)S[u]=this._array[this._getCyclicIndex(u)];this._array=S,this._maxLength=_,this._startIndex=0}get length(){return this._length}set length(_){if(_>this._length)for(let S=this._length;S<_;S++)this._array[S]=void 0;this._length=_}get(_){return this._array[this._getCyclicIndex(_)]}set(_,S){this._array[this._getCyclicIndex(_)]=S}push(_){this._array[this._getCyclicIndex(this._length)]=_,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(_,S,...u){if(S){for(let t=_;t<this._length-S;t++)this._array[this._getCyclicIndex(t)]=this._array[this._getCyclicIndex(t+S)];this._length-=S,this.onDeleteEmitter.fire({index:_,amount:S})}for(let t=this._length-1;t>=_;t--)this._array[this._getCyclicIndex(t+u.length)]=this._array[this._getCyclicIndex(t)];for(let t=0;t<u.length;t++)this._array[this._getCyclicIndex(_+t)]=u[t];if(u.length&&this.onInsertEmitter.fire({index:_,amount:u.length}),this._length+u.length>this._maxLength){const t=this._length+u.length-this._maxLength;this._startIndex+=t,this._length=this._maxLength,this.onTrimEmitter.fire(t)}else this._length+=u.length}trimStart(_){_>this._length&&(_=this._length),this._startIndex+=_,this._length-=_,this.onTrimEmitter.fire(_)}shiftElements(_,S,u){if(!(S<=0)){if(_<0||_>=this._length)throw new Error("start argument out of range");if(_+u<0)throw new Error("Cannot shift elements in list beyond index 0");if(u>0){for(let s=S-1;s>=0;s--)this.set(_+s+u,this.get(_+s));const t=_+S+u-this._length;if(t>0)for(this._length+=t;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let t=0;t<S;t++)this.set(_+t+u,this.get(_+t))}}_getCyclicIndex(_){return(this._startIndex+_)%this._maxLength}}r.CircularList=l},1439:(L,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.clone=void 0,r.clone=function o(c,f=5){if(typeof c!="object")return c;const l=Array.isArray(c)?[]:{};for(const a in c)l[a]=f<=1?c[a]:c[a]&&o(c[a],f-1);return l}},8055:(L,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.contrastRatio=r.toPaddedHex=r.rgba=r.rgb=r.css=r.color=r.channels=r.NULL_COLOR=void 0;let o=0,c=0,f=0,l=0;var a,_,S,u,t;function s(i){const h=i.toString(16);return h.length<2?"0"+h:h}function e(i,h){return i<h?(h+.05)/(i+.05):(i+.05)/(h+.05)}r.NULL_COLOR={css:"#00000000",rgba:0},function(i){i.toCss=function(h,p,m,C){return C!==void 0?`#${s(h)}${s(p)}${s(m)}${s(C)}`:`#${s(h)}${s(p)}${s(m)}`},i.toRgba=function(h,p,m,C=255){return(h<<24|p<<16|m<<8|C)>>>0},i.toColor=function(h,p,m,C){return{css:i.toCss(h,p,m,C),rgba:i.toRgba(h,p,m,C)}}}(a||(r.channels=a={})),function(i){function h(p,m){return l=Math.round(255*m),[o,c,f]=t.toChannels(p.rgba),{css:a.toCss(o,c,f,l),rgba:a.toRgba(o,c,f,l)}}i.blend=function(p,m){if(l=(255&m.rgba)/255,l===1)return{css:m.css,rgba:m.rgba};const C=m.rgba>>24&255,v=m.rgba>>16&255,w=m.rgba>>8&255,T=p.rgba>>24&255,A=p.rgba>>16&255,I=p.rgba>>8&255;return o=T+Math.round((C-T)*l),c=A+Math.round((v-A)*l),f=I+Math.round((w-I)*l),{css:a.toCss(o,c,f),rgba:a.toRgba(o,c,f)}},i.isOpaque=function(p){return(255&p.rgba)==255},i.ensureContrastRatio=function(p,m,C){const v=t.ensureContrastRatio(p.rgba,m.rgba,C);if(v)return a.toColor(v>>24&255,v>>16&255,v>>8&255)},i.opaque=function(p){const m=(255|p.rgba)>>>0;return[o,c,f]=t.toChannels(m),{css:a.toCss(o,c,f),rgba:m}},i.opacity=h,i.multiplyOpacity=function(p,m){return l=255&p.rgba,h(p,l*m/255)},i.toColorRGB=function(p){return[p.rgba>>24&255,p.rgba>>16&255,p.rgba>>8&255]}}(_||(r.color=_={})),function(i){let h,p;try{const m=document.createElement("canvas");m.width=1,m.height=1;const C=m.getContext("2d",{willReadFrequently:!0});C&&(h=C,h.globalCompositeOperation="copy",p=h.createLinearGradient(0,0,1,1))}catch{}i.toColor=function(m){if(m.match(/#[\da-f]{3,8}/i))switch(m.length){case 4:return o=parseInt(m.slice(1,2).repeat(2),16),c=parseInt(m.slice(2,3).repeat(2),16),f=parseInt(m.slice(3,4).repeat(2),16),a.toColor(o,c,f);case 5:return o=parseInt(m.slice(1,2).repeat(2),16),c=parseInt(m.slice(2,3).repeat(2),16),f=parseInt(m.slice(3,4).repeat(2),16),l=parseInt(m.slice(4,5).repeat(2),16),a.toColor(o,c,f,l);case 7:return{css:m,rgba:(parseInt(m.slice(1),16)<<8|255)>>>0};case 9:return{css:m,rgba:parseInt(m.slice(1),16)>>>0}}const C=m.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(C)return o=parseInt(C[1]),c=parseInt(C[2]),f=parseInt(C[3]),l=Math.round(255*(C[5]===void 0?1:parseFloat(C[5]))),a.toColor(o,c,f,l);if(!h||!p)throw new Error("css.toColor: Unsupported css format");if(h.fillStyle=p,h.fillStyle=m,typeof h.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(h.fillRect(0,0,1,1),[o,c,f,l]=h.getImageData(0,0,1,1).data,l!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:a.toRgba(o,c,f,l),css:m}}}(S||(r.css=S={})),function(i){function h(p,m,C){const v=p/255,w=m/255,T=C/255;return .2126*(v<=.03928?v/12.92:Math.pow((v+.055)/1.055,2.4))+.7152*(w<=.03928?w/12.92:Math.pow((w+.055)/1.055,2.4))+.0722*(T<=.03928?T/12.92:Math.pow((T+.055)/1.055,2.4))}i.relativeLuminance=function(p){return h(p>>16&255,p>>8&255,255&p)},i.relativeLuminance2=h}(u||(r.rgb=u={})),function(i){function h(m,C,v){const w=m>>24&255,T=m>>16&255,A=m>>8&255;let I=C>>24&255,R=C>>16&255,N=C>>8&255,q=e(u.relativeLuminance2(I,R,N),u.relativeLuminance2(w,T,A));for(;q<v&&(I>0||R>0||N>0);)I-=Math.max(0,Math.ceil(.1*I)),R-=Math.max(0,Math.ceil(.1*R)),N-=Math.max(0,Math.ceil(.1*N)),q=e(u.relativeLuminance2(I,R,N),u.relativeLuminance2(w,T,A));return(I<<24|R<<16|N<<8|255)>>>0}function p(m,C,v){const w=m>>24&255,T=m>>16&255,A=m>>8&255;let I=C>>24&255,R=C>>16&255,N=C>>8&255,q=e(u.relativeLuminance2(I,R,N),u.relativeLuminance2(w,T,A));for(;q<v&&(I<255||R<255||N<255);)I=Math.min(255,I+Math.ceil(.1*(255-I))),R=Math.min(255,R+Math.ceil(.1*(255-R))),N=Math.min(255,N+Math.ceil(.1*(255-N))),q=e(u.relativeLuminance2(I,R,N),u.relativeLuminance2(w,T,A));return(I<<24|R<<16|N<<8|255)>>>0}i.blend=function(m,C){if(l=(255&C)/255,l===1)return C;const v=C>>24&255,w=C>>16&255,T=C>>8&255,A=m>>24&255,I=m>>16&255,R=m>>8&255;return o=A+Math.round((v-A)*l),c=I+Math.round((w-I)*l),f=R+Math.round((T-R)*l),a.toRgba(o,c,f)},i.ensureContrastRatio=function(m,C,v){const w=u.relativeLuminance(m>>8),T=u.relativeLuminance(C>>8);if(e(w,T)<v){if(T<w){const R=h(m,C,v),N=e(w,u.relativeLuminance(R>>8));if(N<v){const q=p(m,C,v);return N>e(w,u.relativeLuminance(q>>8))?R:q}return R}const A=p(m,C,v),I=e(w,u.relativeLuminance(A>>8));if(I<v){const R=h(m,C,v);return I>e(w,u.relativeLuminance(R>>8))?A:R}return A}},i.reduceLuminance=h,i.increaseLuminance=p,i.toChannels=function(m){return[m>>24&255,m>>16&255,m>>8&255,255&m]}}(t||(r.rgba=t={})),r.toPaddedHex=s,r.contrastRatio=e},8969:(L,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.CoreTerminal=void 0;const c=o(844),f=o(2585),l=o(4348),a=o(7866),_=o(744),S=o(7302),u=o(6975),t=o(8460),s=o(1753),e=o(1480),i=o(7994),h=o(9282),p=o(5435),m=o(5981),C=o(2660);let v=!1;class w extends c.Disposable{get onScroll(){return this._onScrollApi||(this._onScrollApi=this.register(new t.EventEmitter),this._onScroll.event(A=>{this._onScrollApi?.fire(A.position)})),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(A){for(const I in A)this.optionsService.options[I]=A[I]}constructor(A){super(),this._windowsWrappingHeuristics=this.register(new c.MutableDisposable),this._onBinary=this.register(new t.EventEmitter),this.onBinary=this._onBinary.event,this._onData=this.register(new t.EventEmitter),this.onData=this._onData.event,this._onLineFeed=this.register(new t.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onResize=this.register(new t.EventEmitter),this.onResize=this._onResize.event,this._onWriteParsed=this.register(new t.EventEmitter),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this.register(new t.EventEmitter),this._instantiationService=new l.InstantiationService,this.optionsService=this.register(new S.OptionsService(A)),this._instantiationService.setService(f.IOptionsService,this.optionsService),this._bufferService=this.register(this._instantiationService.createInstance(_.BufferService)),this._instantiationService.setService(f.IBufferService,this._bufferService),this._logService=this.register(this._instantiationService.createInstance(a.LogService)),this._instantiationService.setService(f.ILogService,this._logService),this.coreService=this.register(this._instantiationService.createInstance(u.CoreService)),this._instantiationService.setService(f.ICoreService,this.coreService),this.coreMouseService=this.register(this._instantiationService.createInstance(s.CoreMouseService)),this._instantiationService.setService(f.ICoreMouseService,this.coreMouseService),this.unicodeService=this.register(this._instantiationService.createInstance(e.UnicodeService)),this._instantiationService.setService(f.IUnicodeService,this.unicodeService),this._charsetService=this._instantiationService.createInstance(i.CharsetService),this._instantiationService.setService(f.ICharsetService,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(C.OscLinkService),this._instantiationService.setService(f.IOscLinkService,this._oscLinkService),this._inputHandler=this.register(new p.InputHandler(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this.register((0,t.forwardEvent)(this._inputHandler.onLineFeed,this._onLineFeed)),this.register(this._inputHandler),this.register((0,t.forwardEvent)(this._bufferService.onResize,this._onResize)),this.register((0,t.forwardEvent)(this.coreService.onData,this._onData)),this.register((0,t.forwardEvent)(this.coreService.onBinary,this._onBinary)),this.register(this.coreService.onRequestScrollToBottom(()=>this.scrollToBottom())),this.register(this.coreService.onUserInput(()=>this._writeBuffer.handleUserInput())),this.register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],()=>this._handleWindowsPtyOptionChange())),this.register(this._bufferService.onScroll(I=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this.register(this._inputHandler.onScroll(I=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this._writeBuffer=this.register(new m.WriteBuffer((I,R)=>this._inputHandler.parse(I,R))),this.register((0,t.forwardEvent)(this._writeBuffer.onWriteParsed,this._onWriteParsed))}write(A,I){this._writeBuffer.write(A,I)}writeSync(A,I){this._logService.logLevel<=f.LogLevelEnum.WARN&&!v&&(this._logService.warn("writeSync is unreliable and will be removed soon."),v=!0),this._writeBuffer.writeSync(A,I)}input(A,I=!0){this.coreService.triggerDataEvent(A,I)}resize(A,I){isNaN(A)||isNaN(I)||(A=Math.max(A,_.MINIMUM_COLS),I=Math.max(I,_.MINIMUM_ROWS),this._bufferService.resize(A,I))}scroll(A,I=!1){this._bufferService.scroll(A,I)}scrollLines(A,I,R){this._bufferService.scrollLines(A,I,R)}scrollPages(A){this.scrollLines(A*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(A){const I=A-this._bufferService.buffer.ydisp;I!==0&&this.scrollLines(I)}registerEscHandler(A,I){return this._inputHandler.registerEscHandler(A,I)}registerDcsHandler(A,I){return this._inputHandler.registerDcsHandler(A,I)}registerCsiHandler(A,I){return this._inputHandler.registerCsiHandler(A,I)}registerOscHandler(A,I){return this._inputHandler.registerOscHandler(A,I)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let A=!1;const I=this.optionsService.rawOptions.windowsPty;I&&I.buildNumber!==void 0&&I.buildNumber!==void 0?A=I.backend==="conpty"&&I.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(A=!0),A?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){const A=[];A.push(this.onLineFeed(h.updateWindowsModeWrappedState.bind(null,this._bufferService))),A.push(this.registerCsiHandler({final:"H"},()=>((0,h.updateWindowsModeWrappedState)(this._bufferService),!1))),this._windowsWrappingHeuristics.value=(0,c.toDisposable)(()=>{for(const I of A)I.dispose()})}}}r.CoreTerminal=w},8460:(L,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.runAndSubscribe=r.forwardEvent=r.EventEmitter=void 0,r.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=o=>(this._listeners.push(o),{dispose:()=>{if(!this._disposed){for(let c=0;c<this._listeners.length;c++)if(this._listeners[c]===o)return void this._listeners.splice(c,1)}}})),this._event}fire(o,c){const f=[];for(let l=0;l<this._listeners.length;l++)f.push(this._listeners[l]);for(let l=0;l<f.length;l++)f[l].call(void 0,o,c)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},r.forwardEvent=function(o,c){return o(f=>c.fire(f))},r.runAndSubscribe=function(o,c){return c(void 0),o(f=>c(f))}},5435:function(L,r,o){var c=this&&this.__decorate||function(J,y,B,M){var O,F=arguments.length,K=F<3?y:M===null?M=Object.getOwnPropertyDescriptor(y,B):M;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")K=Reflect.decorate(J,y,B,M);else for(var ee=J.length-1;ee>=0;ee--)(O=J[ee])&&(K=(F<3?O(K):F>3?O(y,B,K):O(y,B))||K);return F>3&&K&&Object.defineProperty(y,B,K),K},f=this&&this.__param||function(J,y){return function(B,M){y(B,M,J)}};Object.defineProperty(r,"__esModule",{value:!0}),r.InputHandler=r.WindowsOptionsReportType=void 0;const l=o(2584),a=o(7116),_=o(2015),S=o(844),u=o(482),t=o(8437),s=o(8460),e=o(643),i=o(511),h=o(3734),p=o(2585),m=o(1480),C=o(6242),v=o(6351),w=o(5941),T={"(":0,")":1,"*":2,"+":3,"-":1,".":2},A=131072;function I(J,y){if(J>24)return y.setWinLines||!1;switch(J){case 1:return!!y.restoreWin;case 2:return!!y.minimizeWin;case 3:return!!y.setWinPosition;case 4:return!!y.setWinSizePixels;case 5:return!!y.raiseWin;case 6:return!!y.lowerWin;case 7:return!!y.refreshWin;case 8:return!!y.setWinSizeChars;case 9:return!!y.maximizeWin;case 10:return!!y.fullscreenWin;case 11:return!!y.getWinState;case 13:return!!y.getWinPosition;case 14:return!!y.getWinSizePixels;case 15:return!!y.getScreenSizePixels;case 16:return!!y.getCellSizePixels;case 18:return!!y.getWinSizeChars;case 19:return!!y.getScreenSizeChars;case 20:return!!y.getIconTitle;case 21:return!!y.getWinTitle;case 22:return!!y.pushTitle;case 23:return!!y.popTitle;case 24:return!!y.setWinLines}return!1}var R;(function(J){J[J.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",J[J.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(R||(r.WindowsOptionsReportType=R={}));let N=0;class q extends S.Disposable{getAttrData(){return this._curAttrData}constructor(y,B,M,O,F,K,ee,re,H=new _.EscapeSequenceParser){super(),this._bufferService=y,this._charsetService=B,this._coreService=M,this._logService=O,this._optionsService=F,this._oscLinkService=K,this._coreMouseService=ee,this._unicodeService=re,this._parser=H,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new u.StringToUtf32,this._utf8Decoder=new u.Utf8ToUtf32,this._workCell=new i.CellData,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=t.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=t.DEFAULT_ATTR_DATA.clone(),this._onRequestBell=this.register(new s.EventEmitter),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this.register(new s.EventEmitter),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this.register(new s.EventEmitter),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this.register(new s.EventEmitter),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this.register(new s.EventEmitter),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this.register(new s.EventEmitter),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this.register(new s.EventEmitter),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this.register(new s.EventEmitter),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this.register(new s.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this.register(new s.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onScroll=this.register(new s.EventEmitter),this.onScroll=this._onScroll.event,this._onTitleChange=this.register(new s.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onColor=this.register(new s.EventEmitter),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this.register(this._parser),this._dirtyRowTracker=new Z(this._bufferService),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(k=>this._activeBuffer=k.activeBuffer)),this._parser.setCsiHandlerFallback((k,z)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(k),params:z.toArray()})}),this._parser.setEscHandlerFallback(k=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(k)})}),this._parser.setExecuteHandlerFallback(k=>{this._logService.debug("Unknown EXECUTE code: ",{code:k})}),this._parser.setOscHandlerFallback((k,z,W)=>{this._logService.debug("Unknown OSC code: ",{identifier:k,action:z,data:W})}),this._parser.setDcsHandlerFallback((k,z,W)=>{z==="HOOK"&&(W=W.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(k),action:z,payload:W})}),this._parser.setPrintHandler((k,z,W)=>this.print(k,z,W)),this._parser.registerCsiHandler({final:"@"},k=>this.insertChars(k)),this._parser.registerCsiHandler({intermediates:" ",final:"@"},k=>this.scrollLeft(k)),this._parser.registerCsiHandler({final:"A"},k=>this.cursorUp(k)),this._parser.registerCsiHandler({intermediates:" ",final:"A"},k=>this.scrollRight(k)),this._parser.registerCsiHandler({final:"B"},k=>this.cursorDown(k)),this._parser.registerCsiHandler({final:"C"},k=>this.cursorForward(k)),this._parser.registerCsiHandler({final:"D"},k=>this.cursorBackward(k)),this._parser.registerCsiHandler({final:"E"},k=>this.cursorNextLine(k)),this._parser.registerCsiHandler({final:"F"},k=>this.cursorPrecedingLine(k)),this._parser.registerCsiHandler({final:"G"},k=>this.cursorCharAbsolute(k)),this._parser.registerCsiHandler({final:"H"},k=>this.cursorPosition(k)),this._parser.registerCsiHandler({final:"I"},k=>this.cursorForwardTab(k)),this._parser.registerCsiHandler({final:"J"},k=>this.eraseInDisplay(k,!1)),this._parser.registerCsiHandler({prefix:"?",final:"J"},k=>this.eraseInDisplay(k,!0)),this._parser.registerCsiHandler({final:"K"},k=>this.eraseInLine(k,!1)),this._parser.registerCsiHandler({prefix:"?",final:"K"},k=>this.eraseInLine(k,!0)),this._parser.registerCsiHandler({final:"L"},k=>this.insertLines(k)),this._parser.registerCsiHandler({final:"M"},k=>this.deleteLines(k)),this._parser.registerCsiHandler({final:"P"},k=>this.deleteChars(k)),this._parser.registerCsiHandler({final:"S"},k=>this.scrollUp(k)),this._parser.registerCsiHandler({final:"T"},k=>this.scrollDown(k)),this._parser.registerCsiHandler({final:"X"},k=>this.eraseChars(k)),this._parser.registerCsiHandler({final:"Z"},k=>this.cursorBackwardTab(k)),this._parser.registerCsiHandler({final:"`"},k=>this.charPosAbsolute(k)),this._parser.registerCsiHandler({final:"a"},k=>this.hPositionRelative(k)),this._parser.registerCsiHandler({final:"b"},k=>this.repeatPrecedingCharacter(k)),this._parser.registerCsiHandler({final:"c"},k=>this.sendDeviceAttributesPrimary(k)),this._parser.registerCsiHandler({prefix:">",final:"c"},k=>this.sendDeviceAttributesSecondary(k)),this._parser.registerCsiHandler({final:"d"},k=>this.linePosAbsolute(k)),this._parser.registerCsiHandler({final:"e"},k=>this.vPositionRelative(k)),this._parser.registerCsiHandler({final:"f"},k=>this.hVPosition(k)),this._parser.registerCsiHandler({final:"g"},k=>this.tabClear(k)),this._parser.registerCsiHandler({final:"h"},k=>this.setMode(k)),this._parser.registerCsiHandler({prefix:"?",final:"h"},k=>this.setModePrivate(k)),this._parser.registerCsiHandler({final:"l"},k=>this.resetMode(k)),this._parser.registerCsiHandler({prefix:"?",final:"l"},k=>this.resetModePrivate(k)),this._parser.registerCsiHandler({final:"m"},k=>this.charAttributes(k)),this._parser.registerCsiHandler({final:"n"},k=>this.deviceStatus(k)),this._parser.registerCsiHandler({prefix:"?",final:"n"},k=>this.deviceStatusPrivate(k)),this._parser.registerCsiHandler({intermediates:"!",final:"p"},k=>this.softReset(k)),this._parser.registerCsiHandler({intermediates:" ",final:"q"},k=>this.setCursorStyle(k)),this._parser.registerCsiHandler({final:"r"},k=>this.setScrollRegion(k)),this._parser.registerCsiHandler({final:"s"},k=>this.saveCursor(k)),this._parser.registerCsiHandler({final:"t"},k=>this.windowOptions(k)),this._parser.registerCsiHandler({final:"u"},k=>this.restoreCursor(k)),this._parser.registerCsiHandler({intermediates:"'",final:"}"},k=>this.insertColumns(k)),this._parser.registerCsiHandler({intermediates:"'",final:"~"},k=>this.deleteColumns(k)),this._parser.registerCsiHandler({intermediates:'"',final:"q"},k=>this.selectProtected(k)),this._parser.registerCsiHandler({intermediates:"$",final:"p"},k=>this.requestMode(k,!0)),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},k=>this.requestMode(k,!1)),this._parser.setExecuteHandler(l.C0.BEL,()=>this.bell()),this._parser.setExecuteHandler(l.C0.LF,()=>this.lineFeed()),this._parser.setExecuteHandler(l.C0.VT,()=>this.lineFeed()),this._parser.setExecuteHandler(l.C0.FF,()=>this.lineFeed()),this._parser.setExecuteHandler(l.C0.CR,()=>this.carriageReturn()),this._parser.setExecuteHandler(l.C0.BS,()=>this.backspace()),this._parser.setExecuteHandler(l.C0.HT,()=>this.tab()),this._parser.setExecuteHandler(l.C0.SO,()=>this.shiftOut()),this._parser.setExecuteHandler(l.C0.SI,()=>this.shiftIn()),this._parser.setExecuteHandler(l.C1.IND,()=>this.index()),this._parser.setExecuteHandler(l.C1.NEL,()=>this.nextLine()),this._parser.setExecuteHandler(l.C1.HTS,()=>this.tabSet()),this._parser.registerOscHandler(0,new C.OscHandler(k=>(this.setTitle(k),this.setIconName(k),!0))),this._parser.registerOscHandler(1,new C.OscHandler(k=>this.setIconName(k))),this._parser.registerOscHandler(2,new C.OscHandler(k=>this.setTitle(k))),this._parser.registerOscHandler(4,new C.OscHandler(k=>this.setOrReportIndexedColor(k))),this._parser.registerOscHandler(8,new C.OscHandler(k=>this.setHyperlink(k))),this._parser.registerOscHandler(10,new C.OscHandler(k=>this.setOrReportFgColor(k))),this._parser.registerOscHandler(11,new C.OscHandler(k=>this.setOrReportBgColor(k))),this._parser.registerOscHandler(12,new C.OscHandler(k=>this.setOrReportCursorColor(k))),this._parser.registerOscHandler(104,new C.OscHandler(k=>this.restoreIndexedColor(k))),this._parser.registerOscHandler(110,new C.OscHandler(k=>this.restoreFgColor(k))),this._parser.registerOscHandler(111,new C.OscHandler(k=>this.restoreBgColor(k))),this._parser.registerOscHandler(112,new C.OscHandler(k=>this.restoreCursorColor(k))),this._parser.registerEscHandler({final:"7"},()=>this.saveCursor()),this._parser.registerEscHandler({final:"8"},()=>this.restoreCursor()),this._parser.registerEscHandler({final:"D"},()=>this.index()),this._parser.registerEscHandler({final:"E"},()=>this.nextLine()),this._parser.registerEscHandler({final:"H"},()=>this.tabSet()),this._parser.registerEscHandler({final:"M"},()=>this.reverseIndex()),this._parser.registerEscHandler({final:"="},()=>this.keypadApplicationMode()),this._parser.registerEscHandler({final:">"},()=>this.keypadNumericMode()),this._parser.registerEscHandler({final:"c"},()=>this.fullReset()),this._parser.registerEscHandler({final:"n"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"o"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"|"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"}"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"~"},()=>this.setgLevel(1)),this._parser.registerEscHandler({intermediates:"%",final:"@"},()=>this.selectDefaultCharset()),this._parser.registerEscHandler({intermediates:"%",final:"G"},()=>this.selectDefaultCharset());for(const k in a.CHARSETS)this._parser.registerEscHandler({intermediates:"(",final:k},()=>this.selectCharset("("+k)),this._parser.registerEscHandler({intermediates:")",final:k},()=>this.selectCharset(")"+k)),this._parser.registerEscHandler({intermediates:"*",final:k},()=>this.selectCharset("*"+k)),this._parser.registerEscHandler({intermediates:"+",final:k},()=>this.selectCharset("+"+k)),this._parser.registerEscHandler({intermediates:"-",final:k},()=>this.selectCharset("-"+k)),this._parser.registerEscHandler({intermediates:".",final:k},()=>this.selectCharset("."+k)),this._parser.registerEscHandler({intermediates:"/",final:k},()=>this.selectCharset("/"+k));this._parser.registerEscHandler({intermediates:"#",final:"8"},()=>this.screenAlignmentPattern()),this._parser.setErrorHandler(k=>(this._logService.error("Parsing error: ",k),k)),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new v.DcsHandler((k,z)=>this.requestStatusString(k,z)))}_preserveStack(y,B,M,O){this._parseStack.paused=!0,this._parseStack.cursorStartX=y,this._parseStack.cursorStartY=B,this._parseStack.decodedLength=M,this._parseStack.position=O}_logSlowResolvingAsync(y){this._logService.logLevel<=p.LogLevelEnum.WARN&&Promise.race([y,new Promise((B,M)=>setTimeout(()=>M("#SLOW_TIMEOUT"),5e3))]).catch(B=>{if(B!=="#SLOW_TIMEOUT")throw B;console.warn("async parser handler taking longer than 5000 ms")})}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(y,B){let M,O=this._activeBuffer.x,F=this._activeBuffer.y,K=0;const ee=this._parseStack.paused;if(ee){if(M=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,B))return this._logSlowResolvingAsync(M),M;O=this._parseStack.cursorStartX,F=this._parseStack.cursorStartY,this._parseStack.paused=!1,y.length>A&&(K=this._parseStack.position+A)}if(this._logService.logLevel<=p.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof y=="string"?` "${y}"`:` "${Array.prototype.map.call(y,k=>String.fromCharCode(k)).join("")}"`),typeof y=="string"?y.split("").map(k=>k.charCodeAt(0)):y),this._parseBuffer.length<y.length&&this._parseBuffer.length<A&&(this._parseBuffer=new Uint32Array(Math.min(y.length,A))),ee||this._dirtyRowTracker.clearRange(),y.length>A)for(let k=K;k<y.length;k+=A){const z=k+A<y.length?k+A:y.length,W=typeof y=="string"?this._stringDecoder.decode(y.substring(k,z),this._parseBuffer):this._utf8Decoder.decode(y.subarray(k,z),this._parseBuffer);if(M=this._parser.parse(this._parseBuffer,W))return this._preserveStack(O,F,W,k),this._logSlowResolvingAsync(M),M}else if(!ee){const k=typeof y=="string"?this._stringDecoder.decode(y,this._parseBuffer):this._utf8Decoder.decode(y,this._parseBuffer);if(M=this._parser.parse(this._parseBuffer,k))return this._preserveStack(O,F,k,0),this._logSlowResolvingAsync(M),M}this._activeBuffer.x===O&&this._activeBuffer.y===F||this._onCursorMove.fire();const re=this._dirtyRowTracker.end+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp),H=this._dirtyRowTracker.start+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp);H<this._bufferService.rows&&this._onRequestRefreshRows.fire(Math.min(H,this._bufferService.rows-1),Math.min(re,this._bufferService.rows-1))}print(y,B,M){let O,F;const K=this._charsetService.charset,ee=this._optionsService.rawOptions.screenReaderMode,re=this._bufferService.cols,H=this._coreService.decPrivateModes.wraparound,k=this._coreService.modes.insertMode,z=this._curAttrData;let W=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&M-B>0&&W.getWidth(this._activeBuffer.x-1)===2&&W.setCellFromCodepoint(this._activeBuffer.x-1,0,1,z);let V=this._parser.precedingJoinState;for(let G=B;G<M;++G){if(O=y[G],O<127&&K){const ge=K[String.fromCharCode(O)];ge&&(O=ge.charCodeAt(0))}const ae=this._unicodeService.charProperties(O,V);F=m.UnicodeService.extractWidth(ae);const ue=m.UnicodeService.extractShouldJoin(ae),ve=ue?m.UnicodeService.extractWidth(V):0;if(V=ae,ee&&this._onA11yChar.fire((0,u.stringFromCodePoint)(O)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),this._activeBuffer.x+F-ve>re){if(H){const ge=W;let ie=this._activeBuffer.x-ve;for(this._activeBuffer.x=ve,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),W=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y),ve>0&&W instanceof t.BufferLine&&W.copyCellsFrom(ge,ie,0,ve,!1);ie<re;)ge.setCellFromCodepoint(ie++,0,1,z)}else if(this._activeBuffer.x=re-1,F===2)continue}if(ue&&this._activeBuffer.x){const ge=W.getWidth(this._activeBuffer.x-1)?1:2;W.addCodepointToCell(this._activeBuffer.x-ge,O,F);for(let ie=F-ve;--ie>=0;)W.setCellFromCodepoint(this._activeBuffer.x++,0,0,z)}else if(k&&(W.insertCells(this._activeBuffer.x,F-ve,this._activeBuffer.getNullCell(z)),W.getWidth(re-1)===2&&W.setCellFromCodepoint(re-1,e.NULL_CELL_CODE,e.NULL_CELL_WIDTH,z)),W.setCellFromCodepoint(this._activeBuffer.x++,O,F,z),F>0)for(;--F;)W.setCellFromCodepoint(this._activeBuffer.x++,0,0,z)}this._parser.precedingJoinState=V,this._activeBuffer.x<re&&M-B>0&&W.getWidth(this._activeBuffer.x)===0&&!W.hasContent(this._activeBuffer.x)&&W.setCellFromCodepoint(this._activeBuffer.x,0,1,z),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(y,B){return y.final!=="t"||y.prefix||y.intermediates?this._parser.registerCsiHandler(y,B):this._parser.registerCsiHandler(y,M=>!I(M.params[0],this._optionsService.rawOptions.windowOptions)||B(M))}registerDcsHandler(y,B){return this._parser.registerDcsHandler(y,new v.DcsHandler(B))}registerEscHandler(y,B){return this._parser.registerEscHandler(y,B)}registerOscHandler(y,B){return this._parser.registerOscHandler(y,new C.OscHandler(B))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)?.isWrapped){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;const y=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);y.hasWidth(this._activeBuffer.x)&&!y.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;const y=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-y),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(y=this._bufferService.cols-1){this._activeBuffer.x=Math.min(y,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(y,B){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=y,this._activeBuffer.y=this._activeBuffer.scrollTop+B):(this._activeBuffer.x=y,this._activeBuffer.y=B),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(y,B){this._restrictCursor(),this._setCursor(this._activeBuffer.x+y,this._activeBuffer.y+B)}cursorUp(y){const B=this._activeBuffer.y-this._activeBuffer.scrollTop;return B>=0?this._moveCursor(0,-Math.min(B,y.params[0]||1)):this._moveCursor(0,-(y.params[0]||1)),!0}cursorDown(y){const B=this._activeBuffer.scrollBottom-this._activeBuffer.y;return B>=0?this._moveCursor(0,Math.min(B,y.params[0]||1)):this._moveCursor(0,y.params[0]||1),!0}cursorForward(y){return this._moveCursor(y.params[0]||1,0),!0}cursorBackward(y){return this._moveCursor(-(y.params[0]||1),0),!0}cursorNextLine(y){return this.cursorDown(y),this._activeBuffer.x=0,!0}cursorPrecedingLine(y){return this.cursorUp(y),this._activeBuffer.x=0,!0}cursorCharAbsolute(y){return this._setCursor((y.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(y){return this._setCursor(y.length>=2?(y.params[1]||1)-1:0,(y.params[0]||1)-1),!0}charPosAbsolute(y){return this._setCursor((y.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(y){return this._moveCursor(y.params[0]||1,0),!0}linePosAbsolute(y){return this._setCursor(this._activeBuffer.x,(y.params[0]||1)-1),!0}vPositionRelative(y){return this._moveCursor(0,y.params[0]||1),!0}hVPosition(y){return this.cursorPosition(y),!0}tabClear(y){const B=y.params[0];return B===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:B===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(y){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let B=y.params[0]||1;for(;B--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(y){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let B=y.params[0]||1;for(;B--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(y){const B=y.params[0];return B===1&&(this._curAttrData.bg|=536870912),B!==2&&B!==0||(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(y,B,M,O=!1,F=!1){const K=this._activeBuffer.lines.get(this._activeBuffer.ybase+y);K.replaceCells(B,M,this._activeBuffer.getNullCell(this._eraseAttrData()),F),O&&(K.isWrapped=!1)}_resetBufferLine(y,B=!1){const M=this._activeBuffer.lines.get(this._activeBuffer.ybase+y);M&&(M.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),B),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+y),M.isWrapped=!1)}eraseInDisplay(y,B=!1){let M;switch(this._restrictCursor(this._bufferService.cols),y.params[0]){case 0:for(M=this._activeBuffer.y,this._dirtyRowTracker.markDirty(M),this._eraseInBufferLine(M++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,B);M<this._bufferService.rows;M++)this._resetBufferLine(M,B);this._dirtyRowTracker.markDirty(M);break;case 1:for(M=this._activeBuffer.y,this._dirtyRowTracker.markDirty(M),this._eraseInBufferLine(M,0,this._activeBuffer.x+1,!0,B),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(M+1).isWrapped=!1);M--;)this._resetBufferLine(M,B);this._dirtyRowTracker.markDirty(0);break;case 2:for(M=this._bufferService.rows,this._dirtyRowTracker.markDirty(M-1);M--;)this._resetBufferLine(M,B);this._dirtyRowTracker.markDirty(0);break;case 3:const O=this._activeBuffer.lines.length-this._bufferService.rows;O>0&&(this._activeBuffer.lines.trimStart(O),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-O,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-O,0),this._onScroll.fire(0))}return!0}eraseInLine(y,B=!1){switch(this._restrictCursor(this._bufferService.cols),y.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,B);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,B);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,B)}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(y){this._restrictCursor();let B=y.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const M=this._activeBuffer.ybase+this._activeBuffer.y,O=this._bufferService.rows-1-this._activeBuffer.scrollBottom,F=this._bufferService.rows-1+this._activeBuffer.ybase-O+1;for(;B--;)this._activeBuffer.lines.splice(F-1,1),this._activeBuffer.lines.splice(M,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(y){this._restrictCursor();let B=y.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const M=this._activeBuffer.ybase+this._activeBuffer.y;let O;for(O=this._bufferService.rows-1-this._activeBuffer.scrollBottom,O=this._bufferService.rows-1+this._activeBuffer.ybase-O;B--;)this._activeBuffer.lines.splice(M,1),this._activeBuffer.lines.splice(O,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(y){this._restrictCursor();const B=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return B&&(B.insertCells(this._activeBuffer.x,y.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(y){this._restrictCursor();const B=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return B&&(B.deleteCells(this._activeBuffer.x,y.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(y){let B=y.params[0]||1;for(;B--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(y){let B=y.params[0]||1;for(;B--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(t.DEFAULT_ATTR_DATA));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(y){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const B=y.params[0]||1;for(let M=this._activeBuffer.scrollTop;M<=this._activeBuffer.scrollBottom;++M){const O=this._activeBuffer.lines.get(this._activeBuffer.ybase+M);O.deleteCells(0,B,this._activeBuffer.getNullCell(this._eraseAttrData())),O.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(y){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const B=y.params[0]||1;for(let M=this._activeBuffer.scrollTop;M<=this._activeBuffer.scrollBottom;++M){const O=this._activeBuffer.lines.get(this._activeBuffer.ybase+M);O.insertCells(0,B,this._activeBuffer.getNullCell(this._eraseAttrData())),O.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(y){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const B=y.params[0]||1;for(let M=this._activeBuffer.scrollTop;M<=this._activeBuffer.scrollBottom;++M){const O=this._activeBuffer.lines.get(this._activeBuffer.ybase+M);O.insertCells(this._activeBuffer.x,B,this._activeBuffer.getNullCell(this._eraseAttrData())),O.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(y){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const B=y.params[0]||1;for(let M=this._activeBuffer.scrollTop;M<=this._activeBuffer.scrollBottom;++M){const O=this._activeBuffer.lines.get(this._activeBuffer.ybase+M);O.deleteCells(this._activeBuffer.x,B,this._activeBuffer.getNullCell(this._eraseAttrData())),O.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(y){this._restrictCursor();const B=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return B&&(B.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(y.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(y){const B=this._parser.precedingJoinState;if(!B)return!0;const M=y.params[0]||1,O=m.UnicodeService.extractWidth(B),F=this._activeBuffer.x-O,K=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).getString(F),ee=new Uint32Array(K.length*M);let re=0;for(let k=0;k<K.length;){const z=K.codePointAt(k)||0;ee[re++]=z,k+=z>65535?2:1}let H=re;for(let k=1;k<M;++k)ee.copyWithin(H,0,re),H+=re;return this.print(ee,0,H),!0}sendDeviceAttributesPrimary(y){return y.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(l.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(l.C0.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(y){return y.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(l.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(l.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(y.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(l.C0.ESC+"[>83;40003;0c")),!0}_is(y){return(this._optionsService.rawOptions.termName+"").indexOf(y)===0}setMode(y){for(let B=0;B<y.length;B++)switch(y.params[B]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0}return!0}setModePrivate(y){for(let B=0;B<y.length;B++)switch(y.params[B]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,a.DEFAULT_CHARSET),this._charsetService.setgCharset(1,a.DEFAULT_CHARSET),this._charsetService.setgCharset(2,a.DEFAULT_CHARSET),this._charsetService.setgCharset(3,a.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0}resetMode(y){for(let B=0;B<y.length;B++)switch(y.params[B]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1}return!0}resetModePrivate(y){for(let B=0;B<y.length;B++)switch(y.params[B]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),y.params[B]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0}requestMode(y,B){const M=this._coreService.decPrivateModes,{activeProtocol:O,activeEncoding:F}=this._coreMouseService,K=this._coreService,{buffers:ee,cols:re}=this._bufferService,{active:H,alt:k}=ee,z=this._optionsService.rawOptions,W=ue=>ue?1:2,V=y.params[0];return G=V,ae=B?V===2?4:V===4?W(K.modes.insertMode):V===12?3:V===20?W(z.convertEol):0:V===1?W(M.applicationCursorKeys):V===3?z.windowOptions.setWinLines?re===80?2:re===132?1:0:0:V===6?W(M.origin):V===7?W(M.wraparound):V===8?3:V===9?W(O==="X10"):V===12?W(z.cursorBlink):V===25?W(!K.isCursorHidden):V===45?W(M.reverseWraparound):V===66?W(M.applicationKeypad):V===67?4:V===1e3?W(O==="VT200"):V===1002?W(O==="DRAG"):V===1003?W(O==="ANY"):V===1004?W(M.sendFocus):V===1005?4:V===1006?W(F==="SGR"):V===1015?4:V===1016?W(F==="SGR_PIXELS"):V===1048?1:V===47||V===1047||V===1049?W(H===k):V===2004?W(M.bracketedPasteMode):0,K.triggerDataEvent(`${l.C0.ESC}[${B?"":"?"}${G};${ae}$y`),!0;var G,ae}_updateAttrColor(y,B,M,O,F){return B===2?(y|=50331648,y&=-16777216,y|=h.AttributeData.fromColorRGB([M,O,F])):B===5&&(y&=-50331904,y|=33554432|255&M),y}_extractColor(y,B,M){const O=[0,0,-1,0,0,0];let F=0,K=0;do{if(O[K+F]=y.params[B+K],y.hasSubParams(B+K)){const ee=y.getSubParams(B+K);let re=0;do O[1]===5&&(F=1),O[K+re+1+F]=ee[re];while(++re<ee.length&&re+K+1+F<O.length);break}if(O[1]===5&&K+F>=2||O[1]===2&&K+F>=5)break;O[1]&&(F=1)}while(++K+B<y.length&&K+F<O.length);for(let ee=2;ee<O.length;++ee)O[ee]===-1&&(O[ee]=0);switch(O[0]){case 38:M.fg=this._updateAttrColor(M.fg,O[1],O[3],O[4],O[5]);break;case 48:M.bg=this._updateAttrColor(M.bg,O[1],O[3],O[4],O[5]);break;case 58:M.extended=M.extended.clone(),M.extended.underlineColor=this._updateAttrColor(M.extended.underlineColor,O[1],O[3],O[4],O[5])}return K}_processUnderline(y,B){B.extended=B.extended.clone(),(!~y||y>5)&&(y=1),B.extended.underlineStyle=y,B.fg|=268435456,y===0&&(B.fg&=-268435457),B.updateExtended()}_processSGR0(y){y.fg=t.DEFAULT_ATTR_DATA.fg,y.bg=t.DEFAULT_ATTR_DATA.bg,y.extended=y.extended.clone(),y.extended.underlineStyle=0,y.extended.underlineColor&=-67108864,y.updateExtended()}charAttributes(y){if(y.length===1&&y.params[0]===0)return this._processSGR0(this._curAttrData),!0;const B=y.length;let M;const O=this._curAttrData;for(let F=0;F<B;F++)M=y.params[F],M>=30&&M<=37?(O.fg&=-50331904,O.fg|=16777216|M-30):M>=40&&M<=47?(O.bg&=-50331904,O.bg|=16777216|M-40):M>=90&&M<=97?(O.fg&=-50331904,O.fg|=16777224|M-90):M>=100&&M<=107?(O.bg&=-50331904,O.bg|=16777224|M-100):M===0?this._processSGR0(O):M===1?O.fg|=134217728:M===3?O.bg|=67108864:M===4?(O.fg|=268435456,this._processUnderline(y.hasSubParams(F)?y.getSubParams(F)[0]:1,O)):M===5?O.fg|=536870912:M===7?O.fg|=67108864:M===8?O.fg|=1073741824:M===9?O.fg|=2147483648:M===2?O.bg|=134217728:M===21?this._processUnderline(2,O):M===22?(O.fg&=-134217729,O.bg&=-134217729):M===23?O.bg&=-67108865:M===24?(O.fg&=-268435457,this._processUnderline(0,O)):M===25?O.fg&=-536870913:M===27?O.fg&=-67108865:M===28?O.fg&=-1073741825:M===29?O.fg&=2147483647:M===39?(O.fg&=-67108864,O.fg|=16777215&t.DEFAULT_ATTR_DATA.fg):M===49?(O.bg&=-67108864,O.bg|=16777215&t.DEFAULT_ATTR_DATA.bg):M===38||M===48||M===58?F+=this._extractColor(y,F,O):M===53?O.bg|=1073741824:M===55?O.bg&=-1073741825:M===59?(O.extended=O.extended.clone(),O.extended.underlineColor=-1,O.updateExtended()):M===100?(O.fg&=-67108864,O.fg|=16777215&t.DEFAULT_ATTR_DATA.fg,O.bg&=-67108864,O.bg|=16777215&t.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",M);return!0}deviceStatus(y){switch(y.params[0]){case 5:this._coreService.triggerDataEvent(`${l.C0.ESC}[0n`);break;case 6:const B=this._activeBuffer.y+1,M=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${l.C0.ESC}[${B};${M}R`)}return!0}deviceStatusPrivate(y){if(y.params[0]===6){const B=this._activeBuffer.y+1,M=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${l.C0.ESC}[?${B};${M}R`)}return!0}softReset(y){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=t.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(y){const B=y.params[0]||1;switch(B){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}const M=B%2==1;return this._optionsService.options.cursorBlink=M,!0}setScrollRegion(y){const B=y.params[0]||1;let M;return(y.length<2||(M=y.params[1])>this._bufferService.rows||M===0)&&(M=this._bufferService.rows),M>B&&(this._activeBuffer.scrollTop=B-1,this._activeBuffer.scrollBottom=M-1,this._setCursor(0,0)),!0}windowOptions(y){if(!I(y.params[0],this._optionsService.rawOptions.windowOptions))return!0;const B=y.length>1?y.params[1]:0;switch(y.params[0]){case 14:B!==2&&this._onRequestWindowsOptionsReport.fire(R.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(R.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${l.C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:B!==0&&B!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),B!==0&&B!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:B!==0&&B!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),B!==0&&B!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0}saveCursor(y){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(y){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(y){return this._windowTitle=y,this._onTitleChange.fire(y),!0}setIconName(y){return this._iconName=y,!0}setOrReportIndexedColor(y){const B=[],M=y.split(";");for(;M.length>1;){const O=M.shift(),F=M.shift();if(/^\d+$/.exec(O)){const K=parseInt(O);if(Q(K))if(F==="?")B.push({type:0,index:K});else{const ee=(0,w.parseColor)(F);ee&&B.push({type:1,index:K,color:ee})}}}return B.length&&this._onColor.fire(B),!0}setHyperlink(y){const B=y.split(";");return!(B.length<2)&&(B[1]?this._createHyperlink(B[0],B[1]):!B[0]&&this._finishHyperlink())}_createHyperlink(y,B){this._getCurrentLinkId()&&this._finishHyperlink();const M=y.split(":");let O;const F=M.findIndex(K=>K.startsWith("id="));return F!==-1&&(O=M[F].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:O,uri:B}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(y,B){const M=y.split(";");for(let O=0;O<M.length&&!(B>=this._specialColors.length);++O,++B)if(M[O]==="?")this._onColor.fire([{type:0,index:this._specialColors[B]}]);else{const F=(0,w.parseColor)(M[O]);F&&this._onColor.fire([{type:1,index:this._specialColors[B],color:F}])}return!0}setOrReportFgColor(y){return this._setOrReportSpecialColor(y,0)}setOrReportBgColor(y){return this._setOrReportSpecialColor(y,1)}setOrReportCursorColor(y){return this._setOrReportSpecialColor(y,2)}restoreIndexedColor(y){if(!y)return this._onColor.fire([{type:2}]),!0;const B=[],M=y.split(";");for(let O=0;O<M.length;++O)if(/^\d+$/.exec(M[O])){const F=parseInt(M[O]);Q(F)&&B.push({type:2,index:F})}return B.length&&this._onColor.fire(B),!0}restoreFgColor(y){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(y){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(y){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,a.DEFAULT_CHARSET),!0}selectCharset(y){return y.length!==2?(this.selectDefaultCharset(),!0):(y[0]==="/"||this._charsetService.setgCharset(T[y[0]],a.CHARSETS[y[1]]||a.DEFAULT_CHARSET),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){const y=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,y,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=t.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=t.DEFAULT_ATTR_DATA.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal}setgLevel(y){return this._charsetService.setgLevel(y),!0}screenAlignmentPattern(){const y=new i.CellData;y.content=4194373,y.fg=this._curAttrData.fg,y.bg=this._curAttrData.bg,this._setCursor(0,0);for(let B=0;B<this._bufferService.rows;++B){const M=this._activeBuffer.ybase+this._activeBuffer.y+B,O=this._activeBuffer.lines.get(M);O&&(O.fill(y),O.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(y,B){const M=this._bufferService.buffer,O=this._optionsService.rawOptions;return(F=>(this._coreService.triggerDataEvent(`${l.C0.ESC}${F}${l.C0.ESC}\\`),!0))(y==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:y==='"p'?'P1$r61;1"p':y==="r"?`P1$r${M.scrollTop+1};${M.scrollBottom+1}r`:y==="m"?"P1$r0m":y===" q"?`P1$r${{block:2,underline:4,bar:6}[O.cursorStyle]-(O.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(y,B){this._dirtyRowTracker.markRangeDirty(y,B)}}r.InputHandler=q;let Z=class{constructor(J){this._bufferService=J,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(J){J<this.start?this.start=J:J>this.end&&(this.end=J)}markRangeDirty(J,y){J>y&&(N=J,J=y,y=N),J<this.start&&(this.start=J),y>this.end&&(this.end=y)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};function Q(J){return 0<=J&&J<256}Z=c([f(0,p.IBufferService)],Z)},844:(L,r)=>{function o(c){for(const f of c)f.dispose();c.length=0}Object.defineProperty(r,"__esModule",{value:!0}),r.getDisposeArrayDisposable=r.disposeArray=r.toDisposable=r.MutableDisposable=r.Disposable=void 0,r.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const c of this._disposables)c.dispose();this._disposables.length=0}register(c){return this._disposables.push(c),c}unregister(c){const f=this._disposables.indexOf(c);f!==-1&&this._disposables.splice(f,1)}},r.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(c){this._isDisposed||c===this._value||(this._value?.dispose(),this._value=c)}clear(){this.value=void 0}dispose(){this._isDisposed=!0,this._value?.dispose(),this._value=void 0}},r.toDisposable=function(c){return{dispose:c}},r.disposeArray=o,r.getDisposeArrayDisposable=function(c){return{dispose:()=>o(c)}}},1505:(L,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.FourKeyMap=r.TwoKeyMap=void 0;class o{constructor(){this._data={}}set(f,l,a){this._data[f]||(this._data[f]={}),this._data[f][l]=a}get(f,l){return this._data[f]?this._data[f][l]:void 0}clear(){this._data={}}}r.TwoKeyMap=o,r.FourKeyMap=class{constructor(){this._data=new o}set(c,f,l,a,_){this._data.get(c,f)||this._data.set(c,f,new o),this._data.get(c,f).set(l,a,_)}get(c,f,l,a){return this._data.get(c,f)?.get(l,a)}clear(){this._data.clear()}}},6114:(L,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.isChromeOS=r.isLinux=r.isWindows=r.isIphone=r.isIpad=r.isMac=r.getSafariVersion=r.isSafari=r.isLegacyEdge=r.isFirefox=r.isNode=void 0,r.isNode=typeof process<"u"&&"title"in process;const o=r.isNode?"node":navigator.userAgent,c=r.isNode?"node":navigator.platform;r.isFirefox=o.includes("Firefox"),r.isLegacyEdge=o.includes("Edge"),r.isSafari=/^((?!chrome|android).)*safari/i.test(o),r.getSafariVersion=function(){if(!r.isSafari)return 0;const f=o.match(/Version\/(\d+)/);return f===null||f.length<2?0:parseInt(f[1])},r.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(c),r.isIpad=c==="iPad",r.isIphone=c==="iPhone",r.isWindows=["Windows","Win16","Win32","WinCE"].includes(c),r.isLinux=c.indexOf("Linux")>=0,r.isChromeOS=/\bCrOS\b/.test(o)},6106:(L,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.SortedList=void 0;let o=0;r.SortedList=class{constructor(c){this._getKey=c,this._array=[]}clear(){this._array.length=0}insert(c){this._array.length!==0?(o=this._search(this._getKey(c)),this._array.splice(o,0,c)):this._array.push(c)}delete(c){if(this._array.length===0)return!1;const f=this._getKey(c);if(f===void 0||(o=this._search(f),o===-1)||this._getKey(this._array[o])!==f)return!1;do if(this._array[o]===c)return this._array.splice(o,1),!0;while(++o<this._array.length&&this._getKey(this._array[o])===f);return!1}*getKeyIterator(c){if(this._array.length!==0&&(o=this._search(c),!(o<0||o>=this._array.length)&&this._getKey(this._array[o])===c))do yield this._array[o];while(++o<this._array.length&&this._getKey(this._array[o])===c)}forEachByKey(c,f){if(this._array.length!==0&&(o=this._search(c),!(o<0||o>=this._array.length)&&this._getKey(this._array[o])===c))do f(this._array[o]);while(++o<this._array.length&&this._getKey(this._array[o])===c)}values(){return[...this._array].values()}_search(c){let f=0,l=this._array.length-1;for(;l>=f;){let a=f+l>>1;const _=this._getKey(this._array[a]);if(_>c)l=a-1;else{if(!(_<c)){for(;a>0&&this._getKey(this._array[a-1])===c;)a--;return a}f=a+1}}return f}}},7226:(L,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.DebouncedIdleTask=r.IdleTaskQueue=r.PriorityTaskQueue=void 0;const c=o(6114);class f{constructor(){this._tasks=[],this._i=0}enqueue(_){this._tasks.push(_),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(_){this._idleCallback=void 0;let S=0,u=0,t=_.timeRemaining(),s=0;for(;this._i<this._tasks.length;){if(S=Date.now(),this._tasks[this._i]()||this._i++,S=Math.max(1,Date.now()-S),u=Math.max(S,u),s=_.timeRemaining(),1.5*u>s)return t-S<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(t-S))}ms`),void this._start();t=s}this.clear()}}class l extends f{_requestCallback(_){return setTimeout(()=>_(this._createDeadline(16)))}_cancelCallback(_){clearTimeout(_)}_createDeadline(_){const S=Date.now()+_;return{timeRemaining:()=>Math.max(0,S-Date.now())}}}r.PriorityTaskQueue=l,r.IdleTaskQueue=!c.isNode&&"requestIdleCallback"in window?class extends f{_requestCallback(a){return requestIdleCallback(a)}_cancelCallback(a){cancelIdleCallback(a)}}:l,r.DebouncedIdleTask=class{constructor(){this._queue=new r.IdleTaskQueue}set(a){this._queue.clear(),this._queue.enqueue(a)}flush(){this._queue.flush()}}},9282:(L,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.updateWindowsModeWrappedState=void 0;const c=o(643);r.updateWindowsModeWrappedState=function(f){const l=f.buffer.lines.get(f.buffer.ybase+f.buffer.y-1),a=l?.get(f.cols-1),_=f.buffer.lines.get(f.buffer.ybase+f.buffer.y);_&&a&&(_.isWrapped=a[c.CHAR_DATA_CODE_INDEX]!==c.NULL_CELL_CODE&&a[c.CHAR_DATA_CODE_INDEX]!==c.WHITESPACE_CELL_CODE)}},3734:(L,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.ExtendedAttrs=r.AttributeData=void 0;class o{constructor(){this.fg=0,this.bg=0,this.extended=new c}static toColorRGB(l){return[l>>>16&255,l>>>8&255,255&l]}static fromColorRGB(l){return(255&l[0])<<16|(255&l[1])<<8|255&l[2]}clone(){const l=new o;return l.fg=this.fg,l.bg=this.bg,l.extended=this.extended.clone(),l}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}getUnderlineVariantOffset(){return this.extended.underlineVariantOffset}}r.AttributeData=o;class c{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(l){this._ext=l}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(l){this._ext&=-469762049,this._ext|=l<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(l){this._ext&=-67108864,this._ext|=67108863&l}get urlId(){return this._urlId}set urlId(l){this._urlId=l}get underlineVariantOffset(){const l=(3758096384&this._ext)>>29;return l<0?4294967288^l:l}set underlineVariantOffset(l){this._ext&=536870911,this._ext|=l<<29&3758096384}constructor(l=0,a=0){this._ext=0,this._urlId=0,this._ext=l,this._urlId=a}clone(){return new c(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}r.ExtendedAttrs=c},9092:(L,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.Buffer=r.MAX_BUFFER_SIZE=void 0;const c=o(6349),f=o(7226),l=o(3734),a=o(8437),_=o(4634),S=o(511),u=o(643),t=o(4863),s=o(7116);r.MAX_BUFFER_SIZE=4294967295,r.Buffer=class{constructor(e,i,h){this._hasScrollback=e,this._optionsService=i,this._bufferService=h,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=a.DEFAULT_ATTR_DATA.clone(),this.savedCharset=s.DEFAULT_CHARSET,this.markers=[],this._nullCell=S.CellData.fromCharData([0,u.NULL_CELL_CHAR,u.NULL_CELL_WIDTH,u.NULL_CELL_CODE]),this._whitespaceCell=S.CellData.fromCharData([0,u.WHITESPACE_CELL_CHAR,u.WHITESPACE_CELL_WIDTH,u.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._memoryCleanupQueue=new f.IdleTaskQueue,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new c.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(e){return e?(this._nullCell.fg=e.fg,this._nullCell.bg=e.bg,this._nullCell.extended=e.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new l.ExtendedAttrs),this._nullCell}getWhitespaceCell(e){return e?(this._whitespaceCell.fg=e.fg,this._whitespaceCell.bg=e.bg,this._whitespaceCell.extended=e.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new l.ExtendedAttrs),this._whitespaceCell}getBlankLine(e,i){return new a.BufferLine(this._bufferService.cols,this.getNullCell(e),i)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){const e=this.ybase+this.y-this.ydisp;return e>=0&&e<this._rows}_getCorrectBufferLength(e){if(!this._hasScrollback)return e;const i=e+this._optionsService.rawOptions.scrollback;return i>r.MAX_BUFFER_SIZE?r.MAX_BUFFER_SIZE:i}fillViewportRows(e){if(this.lines.length===0){e===void 0&&(e=a.DEFAULT_ATTR_DATA);let i=this._rows;for(;i--;)this.lines.push(this.getBlankLine(e))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new c.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(e,i){const h=this.getNullCell(a.DEFAULT_ATTR_DATA);let p=0;const m=this._getCorrectBufferLength(i);if(m>this.lines.maxLength&&(this.lines.maxLength=m),this.lines.length>0){if(this._cols<e)for(let v=0;v<this.lines.length;v++)p+=+this.lines.get(v).resize(e,h);let C=0;if(this._rows<i)for(let v=this._rows;v<i;v++)this.lines.length<i+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new a.BufferLine(e,h)):this.ybase>0&&this.lines.length<=this.ybase+this.y+C+1?(this.ybase--,C++,this.ydisp>0&&this.ydisp--):this.lines.push(new a.BufferLine(e,h)));else for(let v=this._rows;v>i;v--)this.lines.length>i+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(m<this.lines.maxLength){const v=this.lines.length-m;v>0&&(this.lines.trimStart(v),this.ybase=Math.max(this.ybase-v,0),this.ydisp=Math.max(this.ydisp-v,0),this.savedY=Math.max(this.savedY-v,0)),this.lines.maxLength=m}this.x=Math.min(this.x,e-1),this.y=Math.min(this.y,i-1),C&&(this.y+=C),this.savedX=Math.min(this.savedX,e-1),this.scrollTop=0}if(this.scrollBottom=i-1,this._isReflowEnabled&&(this._reflow(e,i),this._cols>e))for(let C=0;C<this.lines.length;C++)p+=+this.lines.get(C).resize(e,h);this._cols=e,this._rows=i,this._memoryCleanupQueue.clear(),p>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue(()=>this._batchedMemoryCleanup()))}_batchedMemoryCleanup(){let e=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,e=!1);let i=0;for(;this._memoryCleanupPosition<this.lines.length;)if(i+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),i>100)return!0;return e}get _isReflowEnabled(){const e=this._optionsService.rawOptions.windowsPty;return e&&e.buildNumber?this._hasScrollback&&e.backend==="conpty"&&e.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(e,i){this._cols!==e&&(e>this._cols?this._reflowLarger(e,i):this._reflowSmaller(e,i))}_reflowLarger(e,i){const h=(0,_.reflowLargerGetLinesToRemove)(this.lines,this._cols,e,this.ybase+this.y,this.getNullCell(a.DEFAULT_ATTR_DATA));if(h.length>0){const p=(0,_.reflowLargerCreateNewLayout)(this.lines,h);(0,_.reflowLargerApplyNewLayout)(this.lines,p.layout),this._reflowLargerAdjustViewport(e,i,p.countRemoved)}}_reflowLargerAdjustViewport(e,i,h){const p=this.getNullCell(a.DEFAULT_ATTR_DATA);let m=h;for(;m-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<i&&this.lines.push(new a.BufferLine(e,p))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-h,0)}_reflowSmaller(e,i){const h=this.getNullCell(a.DEFAULT_ATTR_DATA),p=[];let m=0;for(let C=this.lines.length-1;C>=0;C--){let v=this.lines.get(C);if(!v||!v.isWrapped&&v.getTrimmedLength()<=e)continue;const w=[v];for(;v.isWrapped&&C>0;)v=this.lines.get(--C),w.unshift(v);const T=this.ybase+this.y;if(T>=C&&T<C+w.length)continue;const A=w[w.length-1].getTrimmedLength(),I=(0,_.reflowSmallerGetNewLineLengths)(w,this._cols,e),R=I.length-w.length;let N;N=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+R):Math.max(0,this.lines.length-this.lines.maxLength+R);const q=[];for(let M=0;M<R;M++){const O=this.getBlankLine(a.DEFAULT_ATTR_DATA,!0);q.push(O)}q.length>0&&(p.push({start:C+w.length+m,newLines:q}),m+=q.length),w.push(...q);let Z=I.length-1,Q=I[Z];Q===0&&(Z--,Q=I[Z]);let J=w.length-R-1,y=A;for(;J>=0;){const M=Math.min(y,Q);if(w[Z]===void 0)break;if(w[Z].copyCellsFrom(w[J],y-M,Q-M,M,!0),Q-=M,Q===0&&(Z--,Q=I[Z]),y-=M,y===0){J--;const O=Math.max(J,0);y=(0,_.getWrappedLineTrimmedLength)(w,O,this._cols)}}for(let M=0;M<w.length;M++)I[M]<e&&w[M].setCell(I[M],h);let B=R-N;for(;B-- >0;)this.ybase===0?this.y<i-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+m)-i&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+R,this.ybase+i-1)}if(p.length>0){const C=[],v=[];for(let Z=0;Z<this.lines.length;Z++)v.push(this.lines.get(Z));const w=this.lines.length;let T=w-1,A=0,I=p[A];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+m);let R=0;for(let Z=Math.min(this.lines.maxLength-1,w+m-1);Z>=0;Z--)if(I&&I.start>T+R){for(let Q=I.newLines.length-1;Q>=0;Q--)this.lines.set(Z--,I.newLines[Q]);Z++,C.push({index:T+1,amount:I.newLines.length}),R+=I.newLines.length,I=p[++A]}else this.lines.set(Z,v[T--]);let N=0;for(let Z=C.length-1;Z>=0;Z--)C[Z].index+=N,this.lines.onInsertEmitter.fire(C[Z]),N+=C[Z].amount;const q=Math.max(0,w+m-this.lines.maxLength);q>0&&this.lines.onTrimEmitter.fire(q)}}translateBufferLineToString(e,i,h=0,p){const m=this.lines.get(e);return m?m.translateToString(i,h,p):""}getWrappedRangeForLine(e){let i=e,h=e;for(;i>0&&this.lines.get(i).isWrapped;)i--;for(;h+1<this.lines.length&&this.lines.get(h+1).isWrapped;)h++;return{first:i,last:h}}setupTabStops(e){for(e!=null?this.tabs[e]||(e=this.prevStop(e)):(this.tabs={},e=0);e<this._cols;e+=this._optionsService.rawOptions.tabStopWidth)this.tabs[e]=!0}prevStop(e){for(e==null&&(e=this.x);!this.tabs[--e]&&e>0;);return e>=this._cols?this._cols-1:e<0?0:e}nextStop(e){for(e==null&&(e=this.x);!this.tabs[++e]&&e<this._cols;);return e>=this._cols?this._cols-1:e<0?0:e}clearMarkers(e){this._isClearing=!0;for(let i=0;i<this.markers.length;i++)this.markers[i].line===e&&(this.markers[i].dispose(),this.markers.splice(i--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let e=0;e<this.markers.length;e++)this.markers[e].dispose(),this.markers.splice(e--,1);this._isClearing=!1}addMarker(e){const i=new t.Marker(e);return this.markers.push(i),i.register(this.lines.onTrim(h=>{i.line-=h,i.line<0&&i.dispose()})),i.register(this.lines.onInsert(h=>{i.line>=h.index&&(i.line+=h.amount)})),i.register(this.lines.onDelete(h=>{i.line>=h.index&&i.line<h.index+h.amount&&i.dispose(),i.line>h.index&&(i.line-=h.amount)})),i.register(i.onDispose(()=>this._removeMarker(i))),i}_removeMarker(e){this._isClearing||this.markers.splice(this.markers.indexOf(e),1)}}},8437:(L,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.BufferLine=r.DEFAULT_ATTR_DATA=void 0;const c=o(3734),f=o(511),l=o(643),a=o(482);r.DEFAULT_ATTR_DATA=Object.freeze(new c.AttributeData);let _=0;class S{constructor(t,s,e=!1){this.isWrapped=e,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*t);const i=s||f.CellData.fromCharData([0,l.NULL_CELL_CHAR,l.NULL_CELL_WIDTH,l.NULL_CELL_CODE]);for(let h=0;h<t;++h)this.setCell(h,i);this.length=t}get(t){const s=this._data[3*t+0],e=2097151&s;return[this._data[3*t+1],2097152&s?this._combined[t]:e?(0,a.stringFromCodePoint)(e):"",s>>22,2097152&s?this._combined[t].charCodeAt(this._combined[t].length-1):e]}set(t,s){this._data[3*t+1]=s[l.CHAR_DATA_ATTR_INDEX],s[l.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[t]=s[1],this._data[3*t+0]=2097152|t|s[l.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*t+0]=s[l.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|s[l.CHAR_DATA_WIDTH_INDEX]<<22}getWidth(t){return this._data[3*t+0]>>22}hasWidth(t){return 12582912&this._data[3*t+0]}getFg(t){return this._data[3*t+1]}getBg(t){return this._data[3*t+2]}hasContent(t){return 4194303&this._data[3*t+0]}getCodePoint(t){const s=this._data[3*t+0];return 2097152&s?this._combined[t].charCodeAt(this._combined[t].length-1):2097151&s}isCombined(t){return 2097152&this._data[3*t+0]}getString(t){const s=this._data[3*t+0];return 2097152&s?this._combined[t]:2097151&s?(0,a.stringFromCodePoint)(2097151&s):""}isProtected(t){return 536870912&this._data[3*t+2]}loadCell(t,s){return _=3*t,s.content=this._data[_+0],s.fg=this._data[_+1],s.bg=this._data[_+2],2097152&s.content&&(s.combinedData=this._combined[t]),268435456&s.bg&&(s.extended=this._extendedAttrs[t]),s}setCell(t,s){2097152&s.content&&(this._combined[t]=s.combinedData),268435456&s.bg&&(this._extendedAttrs[t]=s.extended),this._data[3*t+0]=s.content,this._data[3*t+1]=s.fg,this._data[3*t+2]=s.bg}setCellFromCodepoint(t,s,e,i){268435456&i.bg&&(this._extendedAttrs[t]=i.extended),this._data[3*t+0]=s|e<<22,this._data[3*t+1]=i.fg,this._data[3*t+2]=i.bg}addCodepointToCell(t,s,e){let i=this._data[3*t+0];2097152&i?this._combined[t]+=(0,a.stringFromCodePoint)(s):2097151&i?(this._combined[t]=(0,a.stringFromCodePoint)(2097151&i)+(0,a.stringFromCodePoint)(s),i&=-2097152,i|=2097152):i=s|4194304,e&&(i&=-12582913,i|=e<<22),this._data[3*t+0]=i}insertCells(t,s,e){if((t%=this.length)&&this.getWidth(t-1)===2&&this.setCellFromCodepoint(t-1,0,1,e),s<this.length-t){const i=new f.CellData;for(let h=this.length-t-s-1;h>=0;--h)this.setCell(t+s+h,this.loadCell(t+h,i));for(let h=0;h<s;++h)this.setCell(t+h,e)}else for(let i=t;i<this.length;++i)this.setCell(i,e);this.getWidth(this.length-1)===2&&this.setCellFromCodepoint(this.length-1,0,1,e)}deleteCells(t,s,e){if(t%=this.length,s<this.length-t){const i=new f.CellData;for(let h=0;h<this.length-t-s;++h)this.setCell(t+h,this.loadCell(t+s+h,i));for(let h=this.length-s;h<this.length;++h)this.setCell(h,e)}else for(let i=t;i<this.length;++i)this.setCell(i,e);t&&this.getWidth(t-1)===2&&this.setCellFromCodepoint(t-1,0,1,e),this.getWidth(t)!==0||this.hasContent(t)||this.setCellFromCodepoint(t,0,1,e)}replaceCells(t,s,e,i=!1){if(i)for(t&&this.getWidth(t-1)===2&&!this.isProtected(t-1)&&this.setCellFromCodepoint(t-1,0,1,e),s<this.length&&this.getWidth(s-1)===2&&!this.isProtected(s)&&this.setCellFromCodepoint(s,0,1,e);t<s&&t<this.length;)this.isProtected(t)||this.setCell(t,e),t++;else for(t&&this.getWidth(t-1)===2&&this.setCellFromCodepoint(t-1,0,1,e),s<this.length&&this.getWidth(s-1)===2&&this.setCellFromCodepoint(s,0,1,e);t<s&&t<this.length;)this.setCell(t++,e)}resize(t,s){if(t===this.length)return 4*this._data.length*2<this._data.buffer.byteLength;const e=3*t;if(t>this.length){if(this._data.buffer.byteLength>=4*e)this._data=new Uint32Array(this._data.buffer,0,e);else{const i=new Uint32Array(e);i.set(this._data),this._data=i}for(let i=this.length;i<t;++i)this.setCell(i,s)}else{this._data=this._data.subarray(0,e);const i=Object.keys(this._combined);for(let p=0;p<i.length;p++){const m=parseInt(i[p],10);m>=t&&delete this._combined[m]}const h=Object.keys(this._extendedAttrs);for(let p=0;p<h.length;p++){const m=parseInt(h[p],10);m>=t&&delete this._extendedAttrs[m]}}return this.length=t,4*e*2<this._data.buffer.byteLength}cleanupMemory(){if(4*this._data.length*2<this._data.buffer.byteLength){const t=new Uint32Array(this._data.length);return t.set(this._data),this._data=t,1}return 0}fill(t,s=!1){if(s)for(let e=0;e<this.length;++e)this.isProtected(e)||this.setCell(e,t);else{this._combined={},this._extendedAttrs={};for(let e=0;e<this.length;++e)this.setCell(e,t)}}copyFrom(t){this.length!==t.length?this._data=new Uint32Array(t._data):this._data.set(t._data),this.length=t.length,this._combined={};for(const s in t._combined)this._combined[s]=t._combined[s];this._extendedAttrs={};for(const s in t._extendedAttrs)this._extendedAttrs[s]=t._extendedAttrs[s];this.isWrapped=t.isWrapped}clone(){const t=new S(0);t._data=new Uint32Array(this._data),t.length=this.length;for(const s in this._combined)t._combined[s]=this._combined[s];for(const s in this._extendedAttrs)t._extendedAttrs[s]=this._extendedAttrs[s];return t.isWrapped=this.isWrapped,t}getTrimmedLength(){for(let t=this.length-1;t>=0;--t)if(4194303&this._data[3*t+0])return t+(this._data[3*t+0]>>22);return 0}getNoBgTrimmedLength(){for(let t=this.length-1;t>=0;--t)if(4194303&this._data[3*t+0]||50331648&this._data[3*t+2])return t+(this._data[3*t+0]>>22);return 0}copyCellsFrom(t,s,e,i,h){const p=t._data;if(h)for(let C=i-1;C>=0;C--){for(let v=0;v<3;v++)this._data[3*(e+C)+v]=p[3*(s+C)+v];268435456&p[3*(s+C)+2]&&(this._extendedAttrs[e+C]=t._extendedAttrs[s+C])}else for(let C=0;C<i;C++){for(let v=0;v<3;v++)this._data[3*(e+C)+v]=p[3*(s+C)+v];268435456&p[3*(s+C)+2]&&(this._extendedAttrs[e+C]=t._extendedAttrs[s+C])}const m=Object.keys(t._combined);for(let C=0;C<m.length;C++){const v=parseInt(m[C],10);v>=s&&(this._combined[v-s+e]=t._combined[v])}}translateToString(t,s,e,i){s=s??0,e=e??this.length,t&&(e=Math.min(e,this.getTrimmedLength())),i&&(i.length=0);let h="";for(;s<e;){const p=this._data[3*s+0],m=2097151&p,C=2097152&p?this._combined[s]:m?(0,a.stringFromCodePoint)(m):l.WHITESPACE_CELL_CHAR;if(h+=C,i)for(let v=0;v<C.length;++v)i.push(s);s+=p>>22||1}return i&&i.push(s),h}}r.BufferLine=S},4841:(L,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.getRangeLength=void 0,r.getRangeLength=function(o,c){if(o.start.y>o.end.y)throw new Error(`Buffer range end (${o.end.x}, ${o.end.y}) cannot be before start (${o.start.x}, ${o.start.y})`);return c*(o.end.y-o.start.y)+(o.end.x-o.start.x+1)}},4634:(L,r)=>{function o(c,f,l){if(f===c.length-1)return c[f].getTrimmedLength();const a=!c[f].hasContent(l-1)&&c[f].getWidth(l-1)===1,_=c[f+1].getWidth(0)===2;return a&&_?l-1:l}Object.defineProperty(r,"__esModule",{value:!0}),r.getWrappedLineTrimmedLength=r.reflowSmallerGetNewLineLengths=r.reflowLargerApplyNewLayout=r.reflowLargerCreateNewLayout=r.reflowLargerGetLinesToRemove=void 0,r.reflowLargerGetLinesToRemove=function(c,f,l,a,_){const S=[];for(let u=0;u<c.length-1;u++){let t=u,s=c.get(++t);if(!s.isWrapped)continue;const e=[c.get(u)];for(;t<c.length&&s.isWrapped;)e.push(s),s=c.get(++t);if(a>=u&&a<t){u+=e.length-1;continue}let i=0,h=o(e,i,f),p=1,m=0;for(;p<e.length;){const v=o(e,p,f),w=v-m,T=l-h,A=Math.min(w,T);e[i].copyCellsFrom(e[p],m,h,A,!1),h+=A,h===l&&(i++,h=0),m+=A,m===v&&(p++,m=0),h===0&&i!==0&&e[i-1].getWidth(l-1)===2&&(e[i].copyCellsFrom(e[i-1],l-1,h++,1,!1),e[i-1].setCell(l-1,_))}e[i].replaceCells(h,l,_);let C=0;for(let v=e.length-1;v>0&&(v>i||e[v].getTrimmedLength()===0);v--)C++;C>0&&(S.push(u+e.length-C),S.push(C)),u+=e.length-1}return S},r.reflowLargerCreateNewLayout=function(c,f){const l=[];let a=0,_=f[a],S=0;for(let u=0;u<c.length;u++)if(_===u){const t=f[++a];c.onDeleteEmitter.fire({index:u-S,amount:t}),u+=t-1,S+=t,_=f[++a]}else l.push(u);return{layout:l,countRemoved:S}},r.reflowLargerApplyNewLayout=function(c,f){const l=[];for(let a=0;a<f.length;a++)l.push(c.get(f[a]));for(let a=0;a<l.length;a++)c.set(a,l[a]);c.length=f.length},r.reflowSmallerGetNewLineLengths=function(c,f,l){const a=[],_=c.map((s,e)=>o(c,e,f)).reduce((s,e)=>s+e);let S=0,u=0,t=0;for(;t<_;){if(_-t<l){a.push(_-t);break}S+=l;const s=o(c,u,f);S>s&&(S-=s,u++);const e=c[u].getWidth(S-1)===2;e&&S--;const i=e?l-1:l;a.push(i),t+=i}return a},r.getWrappedLineTrimmedLength=o},5295:(L,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.BufferSet=void 0;const c=o(8460),f=o(844),l=o(9092);class a extends f.Disposable{constructor(S,u){super(),this._optionsService=S,this._bufferService=u,this._onBufferActivate=this.register(new c.EventEmitter),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.resize(this._bufferService.cols,this._bufferService.rows))),this.register(this._optionsService.onSpecificOptionChange("tabStopWidth",()=>this.setupTabStops()))}reset(){this._normal=new l.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new l.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(S){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(S),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(S,u){this._normal.resize(S,u),this._alt.resize(S,u),this.setupTabStops(S)}setupTabStops(S){this._normal.setupTabStops(S),this._alt.setupTabStops(S)}}r.BufferSet=a},511:(L,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.CellData=void 0;const c=o(482),f=o(643),l=o(3734);class a extends l.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new l.ExtendedAttrs,this.combinedData=""}static fromCharData(S){const u=new a;return u.setFromCharData(S),u}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,c.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(S){this.fg=S[f.CHAR_DATA_ATTR_INDEX],this.bg=0;let u=!1;if(S[f.CHAR_DATA_CHAR_INDEX].length>2)u=!0;else if(S[f.CHAR_DATA_CHAR_INDEX].length===2){const t=S[f.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=t&&t<=56319){const s=S[f.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=s&&s<=57343?this.content=1024*(t-55296)+s-56320+65536|S[f.CHAR_DATA_WIDTH_INDEX]<<22:u=!0}else u=!0}else this.content=S[f.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|S[f.CHAR_DATA_WIDTH_INDEX]<<22;u&&(this.combinedData=S[f.CHAR_DATA_CHAR_INDEX],this.content=2097152|S[f.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}r.CellData=a},643:(L,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.WHITESPACE_CELL_CODE=r.WHITESPACE_CELL_WIDTH=r.WHITESPACE_CELL_CHAR=r.NULL_CELL_CODE=r.NULL_CELL_WIDTH=r.NULL_CELL_CHAR=r.CHAR_DATA_CODE_INDEX=r.CHAR_DATA_WIDTH_INDEX=r.CHAR_DATA_CHAR_INDEX=r.CHAR_DATA_ATTR_INDEX=r.DEFAULT_EXT=r.DEFAULT_ATTR=r.DEFAULT_COLOR=void 0,r.DEFAULT_COLOR=0,r.DEFAULT_ATTR=256|r.DEFAULT_COLOR<<9,r.DEFAULT_EXT=0,r.CHAR_DATA_ATTR_INDEX=0,r.CHAR_DATA_CHAR_INDEX=1,r.CHAR_DATA_WIDTH_INDEX=2,r.CHAR_DATA_CODE_INDEX=3,r.NULL_CELL_CHAR="",r.NULL_CELL_WIDTH=1,r.NULL_CELL_CODE=0,r.WHITESPACE_CELL_CHAR=" ",r.WHITESPACE_CELL_WIDTH=1,r.WHITESPACE_CELL_CODE=32},4863:(L,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.Marker=void 0;const c=o(8460),f=o(844);class l{get id(){return this._id}constructor(_){this.line=_,this.isDisposed=!1,this._disposables=[],this._id=l._nextId++,this._onDispose=this.register(new c.EventEmitter),this.onDispose=this._onDispose.event}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),(0,f.disposeArray)(this._disposables),this._disposables.length=0)}register(_){return this._disposables.push(_),_}}r.Marker=l,l._nextId=1},7116:(L,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.DEFAULT_CHARSET=r.CHARSETS=void 0,r.CHARSETS={},r.DEFAULT_CHARSET=r.CHARSETS.B,r.CHARSETS[0]={"`":"◆",a:"▒",b:"␉",c:"␌",d:"␍",e:"␊",f:"°",g:"±",h:"␤",i:"␋",j:"┘",k:"┐",l:"┌",m:"└",n:"┼",o:"⎺",p:"⎻",q:"─",r:"⎼",s:"⎽",t:"├",u:"┤",v:"┴",w:"┬",x:"│",y:"≤",z:"≥","{":"π","|":"≠","}":"£","~":"·"},r.CHARSETS.A={"#":"£"},r.CHARSETS.B=void 0,r.CHARSETS[4]={"#":"£","@":"¾","[":"ij","\\":"½","]":"|","{":"¨","|":"f","}":"¼","~":"´"},r.CHARSETS.C=r.CHARSETS[5]={"[":"Ä","\\":"Ö","]":"Å","^":"Ü","`":"é","{":"ä","|":"ö","}":"å","~":"ü"},r.CHARSETS.R={"#":"£","@":"à","[":"°","\\":"ç","]":"§","{":"é","|":"ù","}":"è","~":"¨"},r.CHARSETS.Q={"@":"à","[":"â","\\":"ç","]":"ê","^":"î","`":"ô","{":"é","|":"ù","}":"è","~":"û"},r.CHARSETS.K={"@":"§","[":"Ä","\\":"Ö","]":"Ü","{":"ä","|":"ö","}":"ü","~":"ß"},r.CHARSETS.Y={"#":"£","@":"§","[":"°","\\":"ç","]":"é","`":"ù","{":"à","|":"ò","}":"è","~":"ì"},r.CHARSETS.E=r.CHARSETS[6]={"@":"Ä","[":"Æ","\\":"Ø","]":"Å","^":"Ü","`":"ä","{":"æ","|":"ø","}":"å","~":"ü"},r.CHARSETS.Z={"#":"£","@":"§","[":"¡","\\":"Ñ","]":"¿","{":"°","|":"ñ","}":"ç"},r.CHARSETS.H=r.CHARSETS[7]={"@":"É","[":"Ä","\\":"Ö","]":"Å","^":"Ü","`":"é","{":"ä","|":"ö","}":"å","~":"ü"},r.CHARSETS["="]={"#":"ù","@":"à","[":"é","\\":"ç","]":"ê","^":"î",_:"è","`":"ô","{":"ä","|":"ö","}":"ü","~":"û"}},2584:(L,r)=>{var o,c,f;Object.defineProperty(r,"__esModule",{value:!0}),r.C1_ESCAPED=r.C1=r.C0=void 0,function(l){l.NUL="\0",l.SOH="",l.STX="",l.ETX="",l.EOT="",l.ENQ="",l.ACK="",l.BEL="\x07",l.BS="\b",l.HT="	",l.LF=`
`,l.VT="\v",l.FF="\f",l.CR="\r",l.SO="",l.SI="",l.DLE="",l.DC1="",l.DC2="",l.DC3="",l.DC4="",l.NAK="",l.SYN="",l.ETB="",l.CAN="",l.EM="",l.SUB="",l.ESC="\x1B",l.FS="",l.GS="",l.RS="",l.US="",l.SP=" ",l.DEL=""}(o||(r.C0=o={})),function(l){l.PAD="",l.HOP="",l.BPH="",l.NBH="",l.IND="",l.NEL="",l.SSA="",l.ESA="",l.HTS="",l.HTJ="",l.VTS="",l.PLD="",l.PLU="",l.RI="",l.SS2="",l.SS3="",l.DCS="",l.PU1="",l.PU2="",l.STS="",l.CCH="",l.MW="",l.SPA="",l.EPA="",l.SOS="",l.SGCI="",l.SCI="",l.CSI="",l.ST="",l.OSC="",l.PM="",l.APC=""}(c||(r.C1=c={})),function(l){l.ST=`${o.ESC}\\`}(f||(r.C1_ESCAPED=f={}))},7399:(L,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.evaluateKeyboardEvent=void 0;const c=o(2584),f={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};r.evaluateKeyboardEvent=function(l,a,_,S){const u={type:0,cancel:!1,key:void 0},t=(l.shiftKey?1:0)|(l.altKey?2:0)|(l.ctrlKey?4:0)|(l.metaKey?8:0);switch(l.keyCode){case 0:l.key==="UIKeyInputUpArrow"?u.key=a?c.C0.ESC+"OA":c.C0.ESC+"[A":l.key==="UIKeyInputLeftArrow"?u.key=a?c.C0.ESC+"OD":c.C0.ESC+"[D":l.key==="UIKeyInputRightArrow"?u.key=a?c.C0.ESC+"OC":c.C0.ESC+"[C":l.key==="UIKeyInputDownArrow"&&(u.key=a?c.C0.ESC+"OB":c.C0.ESC+"[B");break;case 8:u.key=l.ctrlKey?"\b":c.C0.DEL,l.altKey&&(u.key=c.C0.ESC+u.key);break;case 9:if(l.shiftKey){u.key=c.C0.ESC+"[Z";break}u.key=c.C0.HT,u.cancel=!0;break;case 13:u.key=l.altKey?c.C0.ESC+c.C0.CR:c.C0.CR,u.cancel=!0;break;case 27:u.key=c.C0.ESC,l.altKey&&(u.key=c.C0.ESC+c.C0.ESC),u.cancel=!0;break;case 37:if(l.metaKey)break;t?(u.key=c.C0.ESC+"[1;"+(t+1)+"D",u.key===c.C0.ESC+"[1;3D"&&(u.key=c.C0.ESC+(_?"b":"[1;5D"))):u.key=a?c.C0.ESC+"OD":c.C0.ESC+"[D";break;case 39:if(l.metaKey)break;t?(u.key=c.C0.ESC+"[1;"+(t+1)+"C",u.key===c.C0.ESC+"[1;3C"&&(u.key=c.C0.ESC+(_?"f":"[1;5C"))):u.key=a?c.C0.ESC+"OC":c.C0.ESC+"[C";break;case 38:if(l.metaKey)break;t?(u.key=c.C0.ESC+"[1;"+(t+1)+"A",_||u.key!==c.C0.ESC+"[1;3A"||(u.key=c.C0.ESC+"[1;5A")):u.key=a?c.C0.ESC+"OA":c.C0.ESC+"[A";break;case 40:if(l.metaKey)break;t?(u.key=c.C0.ESC+"[1;"+(t+1)+"B",_||u.key!==c.C0.ESC+"[1;3B"||(u.key=c.C0.ESC+"[1;5B")):u.key=a?c.C0.ESC+"OB":c.C0.ESC+"[B";break;case 45:l.shiftKey||l.ctrlKey||(u.key=c.C0.ESC+"[2~");break;case 46:u.key=t?c.C0.ESC+"[3;"+(t+1)+"~":c.C0.ESC+"[3~";break;case 36:u.key=t?c.C0.ESC+"[1;"+(t+1)+"H":a?c.C0.ESC+"OH":c.C0.ESC+"[H";break;case 35:u.key=t?c.C0.ESC+"[1;"+(t+1)+"F":a?c.C0.ESC+"OF":c.C0.ESC+"[F";break;case 33:l.shiftKey?u.type=2:l.ctrlKey?u.key=c.C0.ESC+"[5;"+(t+1)+"~":u.key=c.C0.ESC+"[5~";break;case 34:l.shiftKey?u.type=3:l.ctrlKey?u.key=c.C0.ESC+"[6;"+(t+1)+"~":u.key=c.C0.ESC+"[6~";break;case 112:u.key=t?c.C0.ESC+"[1;"+(t+1)+"P":c.C0.ESC+"OP";break;case 113:u.key=t?c.C0.ESC+"[1;"+(t+1)+"Q":c.C0.ESC+"OQ";break;case 114:u.key=t?c.C0.ESC+"[1;"+(t+1)+"R":c.C0.ESC+"OR";break;case 115:u.key=t?c.C0.ESC+"[1;"+(t+1)+"S":c.C0.ESC+"OS";break;case 116:u.key=t?c.C0.ESC+"[15;"+(t+1)+"~":c.C0.ESC+"[15~";break;case 117:u.key=t?c.C0.ESC+"[17;"+(t+1)+"~":c.C0.ESC+"[17~";break;case 118:u.key=t?c.C0.ESC+"[18;"+(t+1)+"~":c.C0.ESC+"[18~";break;case 119:u.key=t?c.C0.ESC+"[19;"+(t+1)+"~":c.C0.ESC+"[19~";break;case 120:u.key=t?c.C0.ESC+"[20;"+(t+1)+"~":c.C0.ESC+"[20~";break;case 121:u.key=t?c.C0.ESC+"[21;"+(t+1)+"~":c.C0.ESC+"[21~";break;case 122:u.key=t?c.C0.ESC+"[23;"+(t+1)+"~":c.C0.ESC+"[23~";break;case 123:u.key=t?c.C0.ESC+"[24;"+(t+1)+"~":c.C0.ESC+"[24~";break;default:if(!l.ctrlKey||l.shiftKey||l.altKey||l.metaKey)if(_&&!S||!l.altKey||l.metaKey)!_||l.altKey||l.ctrlKey||l.shiftKey||!l.metaKey?l.key&&!l.ctrlKey&&!l.altKey&&!l.metaKey&&l.keyCode>=48&&l.key.length===1?u.key=l.key:l.key&&l.ctrlKey&&(l.key==="_"&&(u.key=c.C0.US),l.key==="@"&&(u.key=c.C0.NUL)):l.keyCode===65&&(u.type=1);else{const s=f[l.keyCode],e=s?.[l.shiftKey?1:0];if(e)u.key=c.C0.ESC+e;else if(l.keyCode>=65&&l.keyCode<=90){const i=l.ctrlKey?l.keyCode-64:l.keyCode+32;let h=String.fromCharCode(i);l.shiftKey&&(h=h.toUpperCase()),u.key=c.C0.ESC+h}else if(l.keyCode===32)u.key=c.C0.ESC+(l.ctrlKey?c.C0.NUL:" ");else if(l.key==="Dead"&&l.code.startsWith("Key")){let i=l.code.slice(3,4);l.shiftKey||(i=i.toLowerCase()),u.key=c.C0.ESC+i,u.cancel=!0}}else l.keyCode>=65&&l.keyCode<=90?u.key=String.fromCharCode(l.keyCode-64):l.keyCode===32?u.key=c.C0.NUL:l.keyCode>=51&&l.keyCode<=55?u.key=String.fromCharCode(l.keyCode-51+27):l.keyCode===56?u.key=c.C0.DEL:l.keyCode===219?u.key=c.C0.ESC:l.keyCode===220?u.key=c.C0.FS:l.keyCode===221&&(u.key=c.C0.GS)}return u}},482:(L,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.Utf8ToUtf32=r.StringToUtf32=r.utf32ToString=r.stringFromCodePoint=void 0,r.stringFromCodePoint=function(o){return o>65535?(o-=65536,String.fromCharCode(55296+(o>>10))+String.fromCharCode(o%1024+56320)):String.fromCharCode(o)},r.utf32ToString=function(o,c=0,f=o.length){let l="";for(let a=c;a<f;++a){let _=o[a];_>65535?(_-=65536,l+=String.fromCharCode(55296+(_>>10))+String.fromCharCode(_%1024+56320)):l+=String.fromCharCode(_)}return l},r.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(o,c){const f=o.length;if(!f)return 0;let l=0,a=0;if(this._interim){const _=o.charCodeAt(a++);56320<=_&&_<=57343?c[l++]=1024*(this._interim-55296)+_-56320+65536:(c[l++]=this._interim,c[l++]=_),this._interim=0}for(let _=a;_<f;++_){const S=o.charCodeAt(_);if(55296<=S&&S<=56319){if(++_>=f)return this._interim=S,l;const u=o.charCodeAt(_);56320<=u&&u<=57343?c[l++]=1024*(S-55296)+u-56320+65536:(c[l++]=S,c[l++]=u)}else S!==65279&&(c[l++]=S)}return l}},r.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(o,c){const f=o.length;if(!f)return 0;let l,a,_,S,u=0,t=0,s=0;if(this.interim[0]){let h=!1,p=this.interim[0];p&=(224&p)==192?31:(240&p)==224?15:7;let m,C=0;for(;(m=63&this.interim[++C])&&C<4;)p<<=6,p|=m;const v=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,w=v-C;for(;s<w;){if(s>=f)return 0;if(m=o[s++],(192&m)!=128){s--,h=!0;break}this.interim[C++]=m,p<<=6,p|=63&m}h||(v===2?p<128?s--:c[u++]=p:v===3?p<2048||p>=55296&&p<=57343||p===65279||(c[u++]=p):p<65536||p>1114111||(c[u++]=p)),this.interim.fill(0)}const e=f-4;let i=s;for(;i<f;){for(;!(!(i<e)||128&(l=o[i])||128&(a=o[i+1])||128&(_=o[i+2])||128&(S=o[i+3]));)c[u++]=l,c[u++]=a,c[u++]=_,c[u++]=S,i+=4;if(l=o[i++],l<128)c[u++]=l;else if((224&l)==192){if(i>=f)return this.interim[0]=l,u;if(a=o[i++],(192&a)!=128){i--;continue}if(t=(31&l)<<6|63&a,t<128){i--;continue}c[u++]=t}else if((240&l)==224){if(i>=f)return this.interim[0]=l,u;if(a=o[i++],(192&a)!=128){i--;continue}if(i>=f)return this.interim[0]=l,this.interim[1]=a,u;if(_=o[i++],(192&_)!=128){i--;continue}if(t=(15&l)<<12|(63&a)<<6|63&_,t<2048||t>=55296&&t<=57343||t===65279)continue;c[u++]=t}else if((248&l)==240){if(i>=f)return this.interim[0]=l,u;if(a=o[i++],(192&a)!=128){i--;continue}if(i>=f)return this.interim[0]=l,this.interim[1]=a,u;if(_=o[i++],(192&_)!=128){i--;continue}if(i>=f)return this.interim[0]=l,this.interim[1]=a,this.interim[2]=_,u;if(S=o[i++],(192&S)!=128){i--;continue}if(t=(7&l)<<18|(63&a)<<12|(63&_)<<6|63&S,t<65536||t>1114111)continue;c[u++]=t}}return u}}},225:(L,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.UnicodeV6=void 0;const c=o(1480),f=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],l=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]];let a;r.UnicodeV6=class{constructor(){if(this.version="6",!a){a=new Uint8Array(65536),a.fill(1),a[0]=0,a.fill(0,1,32),a.fill(0,127,160),a.fill(2,4352,4448),a[9001]=2,a[9002]=2,a.fill(2,11904,42192),a[12351]=1,a.fill(2,44032,55204),a.fill(2,63744,64256),a.fill(2,65040,65050),a.fill(2,65072,65136),a.fill(2,65280,65377),a.fill(2,65504,65511);for(let _=0;_<f.length;++_)a.fill(0,f[_][0],f[_][1]+1)}}wcwidth(_){return _<32?0:_<127?1:_<65536?a[_]:function(S,u){let t,s=0,e=u.length-1;if(S<u[0][0]||S>u[e][1])return!1;for(;e>=s;)if(t=s+e>>1,S>u[t][1])s=t+1;else{if(!(S<u[t][0]))return!0;e=t-1}return!1}(_,l)?0:_>=131072&&_<=196605||_>=196608&&_<=262141?2:1}charProperties(_,S){let u=this.wcwidth(_),t=u===0&&S!==0;if(t){const s=c.UnicodeService.extractWidth(S);s===0?t=!1:s>u&&(u=s)}return c.UnicodeService.createPropertyValue(0,u,t)}}},5981:(L,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.WriteBuffer=void 0;const c=o(8460),f=o(844);class l extends f.Disposable{constructor(_){super(),this._action=_,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this.register(new c.EventEmitter),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(_,S){if(S!==void 0&&this._syncCalls>S)return void(this._syncCalls=0);if(this._pendingData+=_.length,this._writeBuffer.push(_),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;let u;for(this._isSyncWriting=!0;u=this._writeBuffer.shift();){this._action(u);const t=this._callbacks.shift();t&&t()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(_,S){if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput)return this._didUserInput=!1,this._pendingData+=_.length,this._writeBuffer.push(_),this._callbacks.push(S),void this._innerWrite();setTimeout(()=>this._innerWrite())}this._pendingData+=_.length,this._writeBuffer.push(_),this._callbacks.push(S)}_innerWrite(_=0,S=!0){const u=_||Date.now();for(;this._writeBuffer.length>this._bufferOffset;){const t=this._writeBuffer[this._bufferOffset],s=this._action(t,S);if(s){const i=h=>Date.now()-u>=12?setTimeout(()=>this._innerWrite(0,h)):this._innerWrite(u,h);return void s.catch(h=>(queueMicrotask(()=>{throw h}),Promise.resolve(!1))).then(i)}const e=this._callbacks[this._bufferOffset];if(e&&e(),this._bufferOffset++,this._pendingData-=t.length,Date.now()-u>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(()=>this._innerWrite())):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}}r.WriteBuffer=l},5941:(L,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.toRgbString=r.parseColor=void 0;const o=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,c=/^[\da-f]+$/;function f(l,a){const _=l.toString(16),S=_.length<2?"0"+_:_;switch(a){case 4:return _[0];case 8:return S;case 12:return(S+S).slice(0,3);default:return S+S}}r.parseColor=function(l){if(!l)return;let a=l.toLowerCase();if(a.indexOf("rgb:")===0){a=a.slice(4);const _=o.exec(a);if(_){const S=_[1]?15:_[4]?255:_[7]?4095:65535;return[Math.round(parseInt(_[1]||_[4]||_[7]||_[10],16)/S*255),Math.round(parseInt(_[2]||_[5]||_[8]||_[11],16)/S*255),Math.round(parseInt(_[3]||_[6]||_[9]||_[12],16)/S*255)]}}else if(a.indexOf("#")===0&&(a=a.slice(1),c.exec(a)&&[3,6,9,12].includes(a.length))){const _=a.length/3,S=[0,0,0];for(let u=0;u<3;++u){const t=parseInt(a.slice(_*u,_*u+_),16);S[u]=_===1?t<<4:_===2?t:_===3?t>>4:t>>8}return S}},r.toRgbString=function(l,a=16){const[_,S,u]=l;return`rgb:${f(_,a)}/${f(S,a)}/${f(u,a)}`}},5770:(L,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.PAYLOAD_LIMIT=void 0,r.PAYLOAD_LIMIT=1e7},6351:(L,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.DcsHandler=r.DcsParser=void 0;const c=o(482),f=o(8742),l=o(5770),a=[];r.DcsParser=class{constructor(){this._handlers=Object.create(null),this._active=a,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=a}registerHandler(S,u){this._handlers[S]===void 0&&(this._handlers[S]=[]);const t=this._handlers[S];return t.push(u),{dispose:()=>{const s=t.indexOf(u);s!==-1&&t.splice(s,1)}}}clearHandler(S){this._handlers[S]&&delete this._handlers[S]}setHandlerFallback(S){this._handlerFb=S}reset(){if(this._active.length)for(let S=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;S>=0;--S)this._active[S].unhook(!1);this._stack.paused=!1,this._active=a,this._ident=0}hook(S,u){if(this.reset(),this._ident=S,this._active=this._handlers[S]||a,this._active.length)for(let t=this._active.length-1;t>=0;t--)this._active[t].hook(u);else this._handlerFb(this._ident,"HOOK",u)}put(S,u,t){if(this._active.length)for(let s=this._active.length-1;s>=0;s--)this._active[s].put(S,u,t);else this._handlerFb(this._ident,"PUT",(0,c.utf32ToString)(S,u,t))}unhook(S,u=!0){if(this._active.length){let t=!1,s=this._active.length-1,e=!1;if(this._stack.paused&&(s=this._stack.loopPosition-1,t=u,e=this._stack.fallThrough,this._stack.paused=!1),!e&&t===!1){for(;s>=0&&(t=this._active[s].unhook(S),t!==!0);s--)if(t instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=s,this._stack.fallThrough=!1,t;s--}for(;s>=0;s--)if(t=this._active[s].unhook(!1),t instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=s,this._stack.fallThrough=!0,t}else this._handlerFb(this._ident,"UNHOOK",S);this._active=a,this._ident=0}};const _=new f.Params;_.addParam(0),r.DcsHandler=class{constructor(S){this._handler=S,this._data="",this._params=_,this._hitLimit=!1}hook(S){this._params=S.length>1||S.params[0]?S.clone():_,this._data="",this._hitLimit=!1}put(S,u,t){this._hitLimit||(this._data+=(0,c.utf32ToString)(S,u,t),this._data.length>l.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}unhook(S){let u=!1;if(this._hitLimit)u=!1;else if(S&&(u=this._handler(this._data,this._params),u instanceof Promise))return u.then(t=>(this._params=_,this._data="",this._hitLimit=!1,t));return this._params=_,this._data="",this._hitLimit=!1,u}}},2015:(L,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.EscapeSequenceParser=r.VT500_TRANSITION_TABLE=r.TransitionTable=void 0;const c=o(844),f=o(8742),l=o(6242),a=o(6351);class _{constructor(s){this.table=new Uint8Array(s)}setDefault(s,e){this.table.fill(s<<4|e)}add(s,e,i,h){this.table[e<<8|s]=i<<4|h}addMany(s,e,i,h){for(let p=0;p<s.length;p++)this.table[e<<8|s[p]]=i<<4|h}}r.TransitionTable=_;const S=160;r.VT500_TRANSITION_TABLE=function(){const t=new _(4095),s=Array.apply(null,Array(256)).map((C,v)=>v),e=(C,v)=>s.slice(C,v),i=e(32,127),h=e(0,24);h.push(25),h.push.apply(h,e(28,32));const p=e(0,14);let m;for(m in t.setDefault(1,0),t.addMany(i,0,2,0),p)t.addMany([24,26,153,154],m,3,0),t.addMany(e(128,144),m,3,0),t.addMany(e(144,152),m,3,0),t.add(156,m,0,0),t.add(27,m,11,1),t.add(157,m,4,8),t.addMany([152,158,159],m,0,7),t.add(155,m,11,3),t.add(144,m,11,9);return t.addMany(h,0,3,0),t.addMany(h,1,3,1),t.add(127,1,0,1),t.addMany(h,8,0,8),t.addMany(h,3,3,3),t.add(127,3,0,3),t.addMany(h,4,3,4),t.add(127,4,0,4),t.addMany(h,6,3,6),t.addMany(h,5,3,5),t.add(127,5,0,5),t.addMany(h,2,3,2),t.add(127,2,0,2),t.add(93,1,4,8),t.addMany(i,8,5,8),t.add(127,8,5,8),t.addMany([156,27,24,26,7],8,6,0),t.addMany(e(28,32),8,0,8),t.addMany([88,94,95],1,0,7),t.addMany(i,7,0,7),t.addMany(h,7,0,7),t.add(156,7,0,0),t.add(127,7,0,7),t.add(91,1,11,3),t.addMany(e(64,127),3,7,0),t.addMany(e(48,60),3,8,4),t.addMany([60,61,62,63],3,9,4),t.addMany(e(48,60),4,8,4),t.addMany(e(64,127),4,7,0),t.addMany([60,61,62,63],4,0,6),t.addMany(e(32,64),6,0,6),t.add(127,6,0,6),t.addMany(e(64,127),6,0,0),t.addMany(e(32,48),3,9,5),t.addMany(e(32,48),5,9,5),t.addMany(e(48,64),5,0,6),t.addMany(e(64,127),5,7,0),t.addMany(e(32,48),4,9,5),t.addMany(e(32,48),1,9,2),t.addMany(e(32,48),2,9,2),t.addMany(e(48,127),2,10,0),t.addMany(e(48,80),1,10,0),t.addMany(e(81,88),1,10,0),t.addMany([89,90,92],1,10,0),t.addMany(e(96,127),1,10,0),t.add(80,1,11,9),t.addMany(h,9,0,9),t.add(127,9,0,9),t.addMany(e(28,32),9,0,9),t.addMany(e(32,48),9,9,12),t.addMany(e(48,60),9,8,10),t.addMany([60,61,62,63],9,9,10),t.addMany(h,11,0,11),t.addMany(e(32,128),11,0,11),t.addMany(e(28,32),11,0,11),t.addMany(h,10,0,10),t.add(127,10,0,10),t.addMany(e(28,32),10,0,10),t.addMany(e(48,60),10,8,10),t.addMany([60,61,62,63],10,0,11),t.addMany(e(32,48),10,9,12),t.addMany(h,12,0,12),t.add(127,12,0,12),t.addMany(e(28,32),12,0,12),t.addMany(e(32,48),12,9,12),t.addMany(e(48,64),12,0,11),t.addMany(e(64,127),12,12,13),t.addMany(e(64,127),10,12,13),t.addMany(e(64,127),9,12,13),t.addMany(h,13,13,13),t.addMany(i,13,13,13),t.add(127,13,0,13),t.addMany([27,156,24,26],13,14,0),t.add(S,0,2,0),t.add(S,8,5,8),t.add(S,6,0,6),t.add(S,11,0,11),t.add(S,13,13,13),t}();class u extends c.Disposable{constructor(s=r.VT500_TRANSITION_TABLE){super(),this._transitions=s,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new f.Params,this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._printHandlerFb=(e,i,h)=>{},this._executeHandlerFb=e=>{},this._csiHandlerFb=(e,i)=>{},this._escHandlerFb=e=>{},this._errorHandlerFb=e=>e,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this.register((0,c.toDisposable)(()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)})),this._oscParser=this.register(new l.OscParser),this._dcsParser=this.register(new a.DcsParser),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},()=>!0)}_identifier(s,e=[64,126]){let i=0;if(s.prefix){if(s.prefix.length>1)throw new Error("only one byte as prefix supported");if(i=s.prefix.charCodeAt(0),i&&60>i||i>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(s.intermediates){if(s.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let p=0;p<s.intermediates.length;++p){const m=s.intermediates.charCodeAt(p);if(32>m||m>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");i<<=8,i|=m}}if(s.final.length!==1)throw new Error("final must be a single byte");const h=s.final.charCodeAt(0);if(e[0]>h||h>e[1])throw new Error(`final must be in range ${e[0]} .. ${e[1]}`);return i<<=8,i|=h,i}identToString(s){const e=[];for(;s;)e.push(String.fromCharCode(255&s)),s>>=8;return e.reverse().join("")}setPrintHandler(s){this._printHandler=s}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(s,e){const i=this._identifier(s,[48,126]);this._escHandlers[i]===void 0&&(this._escHandlers[i]=[]);const h=this._escHandlers[i];return h.push(e),{dispose:()=>{const p=h.indexOf(e);p!==-1&&h.splice(p,1)}}}clearEscHandler(s){this._escHandlers[this._identifier(s,[48,126])]&&delete this._escHandlers[this._identifier(s,[48,126])]}setEscHandlerFallback(s){this._escHandlerFb=s}setExecuteHandler(s,e){this._executeHandlers[s.charCodeAt(0)]=e}clearExecuteHandler(s){this._executeHandlers[s.charCodeAt(0)]&&delete this._executeHandlers[s.charCodeAt(0)]}setExecuteHandlerFallback(s){this._executeHandlerFb=s}registerCsiHandler(s,e){const i=this._identifier(s);this._csiHandlers[i]===void 0&&(this._csiHandlers[i]=[]);const h=this._csiHandlers[i];return h.push(e),{dispose:()=>{const p=h.indexOf(e);p!==-1&&h.splice(p,1)}}}clearCsiHandler(s){this._csiHandlers[this._identifier(s)]&&delete this._csiHandlers[this._identifier(s)]}setCsiHandlerFallback(s){this._csiHandlerFb=s}registerDcsHandler(s,e){return this._dcsParser.registerHandler(this._identifier(s),e)}clearDcsHandler(s){this._dcsParser.clearHandler(this._identifier(s))}setDcsHandlerFallback(s){this._dcsParser.setHandlerFallback(s)}registerOscHandler(s,e){return this._oscParser.registerHandler(s,e)}clearOscHandler(s){this._oscParser.clearHandler(s)}setOscHandlerFallback(s){this._oscParser.setHandlerFallback(s)}setErrorHandler(s){this._errorHandler=s}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(s,e,i,h,p){this._parseStack.state=s,this._parseStack.handlers=e,this._parseStack.handlerPos=i,this._parseStack.transition=h,this._parseStack.chunkPos=p}parse(s,e,i){let h,p=0,m=0,C=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,C=this._parseStack.chunkPos+1;else{if(i===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");const v=this._parseStack.handlers;let w=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(i===!1&&w>-1){for(;w>=0&&(h=v[w](this._params),h!==!0);w--)if(h instanceof Promise)return this._parseStack.handlerPos=w,h}this._parseStack.handlers=[];break;case 4:if(i===!1&&w>-1){for(;w>=0&&(h=v[w](),h!==!0);w--)if(h instanceof Promise)return this._parseStack.handlerPos=w,h}this._parseStack.handlers=[];break;case 6:if(p=s[this._parseStack.chunkPos],h=this._dcsParser.unhook(p!==24&&p!==26,i),h)return h;p===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(p=s[this._parseStack.chunkPos],h=this._oscParser.end(p!==24&&p!==26,i),h)return h;p===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,C=this._parseStack.chunkPos+1,this.precedingJoinState=0,this.currentState=15&this._parseStack.transition}for(let v=C;v<e;++v){switch(p=s[v],m=this._transitions.table[this.currentState<<8|(p<160?p:S)],m>>4){case 2:for(let R=v+1;;++R){if(R>=e||(p=s[R])<32||p>126&&p<S){this._printHandler(s,v,R),v=R-1;break}if(++R>=e||(p=s[R])<32||p>126&&p<S){this._printHandler(s,v,R),v=R-1;break}if(++R>=e||(p=s[R])<32||p>126&&p<S){this._printHandler(s,v,R),v=R-1;break}if(++R>=e||(p=s[R])<32||p>126&&p<S){this._printHandler(s,v,R),v=R-1;break}}break;case 3:this._executeHandlers[p]?this._executeHandlers[p]():this._executeHandlerFb(p),this.precedingJoinState=0;break;case 0:break;case 1:if(this._errorHandler({position:v,code:p,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:const w=this._csiHandlers[this._collect<<8|p];let T=w?w.length-1:-1;for(;T>=0&&(h=w[T](this._params),h!==!0);T--)if(h instanceof Promise)return this._preserveStack(3,w,T,m,v),h;T<0&&this._csiHandlerFb(this._collect<<8|p,this._params),this.precedingJoinState=0;break;case 8:do switch(p){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(p-48)}while(++v<e&&(p=s[v])>47&&p<60);v--;break;case 9:this._collect<<=8,this._collect|=p;break;case 10:const A=this._escHandlers[this._collect<<8|p];let I=A?A.length-1:-1;for(;I>=0&&(h=A[I](),h!==!0);I--)if(h instanceof Promise)return this._preserveStack(4,A,I,m,v),h;I<0&&this._escHandlerFb(this._collect<<8|p),this.precedingJoinState=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|p,this._params);break;case 13:for(let R=v+1;;++R)if(R>=e||(p=s[R])===24||p===26||p===27||p>127&&p<S){this._dcsParser.put(s,v,R),v=R-1;break}break;case 14:if(h=this._dcsParser.unhook(p!==24&&p!==26),h)return this._preserveStack(6,[],0,m,v),h;p===27&&(m|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0;break;case 4:this._oscParser.start();break;case 5:for(let R=v+1;;R++)if(R>=e||(p=s[R])<32||p>127&&p<S){this._oscParser.put(s,v,R),v=R-1;break}break;case 6:if(h=this._oscParser.end(p!==24&&p!==26),h)return this._preserveStack(5,[],0,m,v),h;p===27&&(m|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0}this.currentState=15&m}}}r.EscapeSequenceParser=u},6242:(L,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.OscHandler=r.OscParser=void 0;const c=o(5770),f=o(482),l=[];r.OscParser=class{constructor(){this._state=0,this._active=l,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(a,_){this._handlers[a]===void 0&&(this._handlers[a]=[]);const S=this._handlers[a];return S.push(_),{dispose:()=>{const u=S.indexOf(_);u!==-1&&S.splice(u,1)}}}clearHandler(a){this._handlers[a]&&delete this._handlers[a]}setHandlerFallback(a){this._handlerFb=a}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=l}reset(){if(this._state===2)for(let a=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;a>=0;--a)this._active[a].end(!1);this._stack.paused=!1,this._active=l,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||l,this._active.length)for(let a=this._active.length-1;a>=0;a--)this._active[a].start();else this._handlerFb(this._id,"START")}_put(a,_,S){if(this._active.length)for(let u=this._active.length-1;u>=0;u--)this._active[u].put(a,_,S);else this._handlerFb(this._id,"PUT",(0,f.utf32ToString)(a,_,S))}start(){this.reset(),this._state=1}put(a,_,S){if(this._state!==3){if(this._state===1)for(;_<S;){const u=a[_++];if(u===59){this._state=2,this._start();break}if(u<48||57<u)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+u-48}this._state===2&&S-_>0&&this._put(a,_,S)}}end(a,_=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){let S=!1,u=this._active.length-1,t=!1;if(this._stack.paused&&(u=this._stack.loopPosition-1,S=_,t=this._stack.fallThrough,this._stack.paused=!1),!t&&S===!1){for(;u>=0&&(S=this._active[u].end(a),S!==!0);u--)if(S instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=u,this._stack.fallThrough=!1,S;u--}for(;u>=0;u--)if(S=this._active[u].end(!1),S instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=u,this._stack.fallThrough=!0,S}else this._handlerFb(this._id,"END",a);this._active=l,this._id=-1,this._state=0}}},r.OscHandler=class{constructor(a){this._handler=a,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(a,_,S){this._hitLimit||(this._data+=(0,f.utf32ToString)(a,_,S),this._data.length>c.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}end(a){let _=!1;if(this._hitLimit)_=!1;else if(a&&(_=this._handler(this._data),_ instanceof Promise))return _.then(S=>(this._data="",this._hitLimit=!1,S));return this._data="",this._hitLimit=!1,_}}},8742:(L,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.Params=void 0;const o=2147483647;class c{static fromArray(l){const a=new c;if(!l.length)return a;for(let _=Array.isArray(l[0])?1:0;_<l.length;++_){const S=l[_];if(Array.isArray(S))for(let u=0;u<S.length;++u)a.addSubParam(S[u]);else a.addParam(S)}return a}constructor(l=32,a=32){if(this.maxLength=l,this.maxSubParamsLength=a,a>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(l),this.length=0,this._subParams=new Int32Array(a),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(l),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}clone(){const l=new c(this.maxLength,this.maxSubParamsLength);return l.params.set(this.params),l.length=this.length,l._subParams.set(this._subParams),l._subParamsLength=this._subParamsLength,l._subParamsIdx.set(this._subParamsIdx),l._rejectDigits=this._rejectDigits,l._rejectSubDigits=this._rejectSubDigits,l._digitIsSub=this._digitIsSub,l}toArray(){const l=[];for(let a=0;a<this.length;++a){l.push(this.params[a]);const _=this._subParamsIdx[a]>>8,S=255&this._subParamsIdx[a];S-_>0&&l.push(Array.prototype.slice.call(this._subParams,_,S))}return l}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(l){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(l<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=l>o?o:l}}addSubParam(l){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(l<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=l>o?o:l,this._subParamsIdx[this.length-1]++}}hasSubParams(l){return(255&this._subParamsIdx[l])-(this._subParamsIdx[l]>>8)>0}getSubParams(l){const a=this._subParamsIdx[l]>>8,_=255&this._subParamsIdx[l];return _-a>0?this._subParams.subarray(a,_):null}getSubParamsAll(){const l={};for(let a=0;a<this.length;++a){const _=this._subParamsIdx[a]>>8,S=255&this._subParamsIdx[a];S-_>0&&(l[a]=this._subParams.slice(_,S))}return l}addDigit(l){let a;if(this._rejectDigits||!(a=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;const _=this._digitIsSub?this._subParams:this.params,S=_[a-1];_[a-1]=~S?Math.min(10*S+l,o):l}}r.Params=c},5741:(L,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.AddonManager=void 0,r.AddonManager=class{constructor(){this._addons=[]}dispose(){for(let o=this._addons.length-1;o>=0;o--)this._addons[o].instance.dispose()}loadAddon(o,c){const f={instance:c,dispose:c.dispose,isDisposed:!1};this._addons.push(f),c.dispose=()=>this._wrappedAddonDispose(f),c.activate(o)}_wrappedAddonDispose(o){if(o.isDisposed)return;let c=-1;for(let f=0;f<this._addons.length;f++)if(this._addons[f]===o){c=f;break}if(c===-1)throw new Error("Could not dispose an addon that has not been loaded");o.isDisposed=!0,o.dispose.apply(o.instance),this._addons.splice(c,1)}}},8771:(L,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.BufferApiView=void 0;const c=o(3785),f=o(511);r.BufferApiView=class{constructor(l,a){this._buffer=l,this.type=a}init(l){return this._buffer=l,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(l){const a=this._buffer.lines.get(l);if(a)return new c.BufferLineApiView(a)}getNullCell(){return new f.CellData}}},3785:(L,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.BufferLineApiView=void 0;const c=o(511);r.BufferLineApiView=class{constructor(f){this._line=f}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(f,l){if(!(f<0||f>=this._line.length))return l?(this._line.loadCell(f,l),l):this._line.loadCell(f,new c.CellData)}translateToString(f,l,a){return this._line.translateToString(f,l,a)}}},8285:(L,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.BufferNamespaceApi=void 0;const c=o(8771),f=o(8460),l=o(844);class a extends l.Disposable{constructor(S){super(),this._core=S,this._onBufferChange=this.register(new f.EventEmitter),this.onBufferChange=this._onBufferChange.event,this._normal=new c.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new c.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(()=>this._onBufferChange.fire(this.active))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}}r.BufferNamespaceApi=a},7975:(L,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.ParserApi=void 0,r.ParserApi=class{constructor(o){this._core=o}registerCsiHandler(o,c){return this._core.registerCsiHandler(o,f=>c(f.toArray()))}addCsiHandler(o,c){return this.registerCsiHandler(o,c)}registerDcsHandler(o,c){return this._core.registerDcsHandler(o,(f,l)=>c(f,l.toArray()))}addDcsHandler(o,c){return this.registerDcsHandler(o,c)}registerEscHandler(o,c){return this._core.registerEscHandler(o,c)}addEscHandler(o,c){return this.registerEscHandler(o,c)}registerOscHandler(o,c){return this._core.registerOscHandler(o,c)}addOscHandler(o,c){return this.registerOscHandler(o,c)}}},7090:(L,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.UnicodeApi=void 0,r.UnicodeApi=class{constructor(o){this._core=o}register(o){this._core.unicodeService.register(o)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(o){this._core.unicodeService.activeVersion=o}}},744:function(L,r,o){var c=this&&this.__decorate||function(t,s,e,i){var h,p=arguments.length,m=p<3?s:i===null?i=Object.getOwnPropertyDescriptor(s,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")m=Reflect.decorate(t,s,e,i);else for(var C=t.length-1;C>=0;C--)(h=t[C])&&(m=(p<3?h(m):p>3?h(s,e,m):h(s,e))||m);return p>3&&m&&Object.defineProperty(s,e,m),m},f=this&&this.__param||function(t,s){return function(e,i){s(e,i,t)}};Object.defineProperty(r,"__esModule",{value:!0}),r.BufferService=r.MINIMUM_ROWS=r.MINIMUM_COLS=void 0;const l=o(8460),a=o(844),_=o(5295),S=o(2585);r.MINIMUM_COLS=2,r.MINIMUM_ROWS=1;let u=r.BufferService=class extends a.Disposable{get buffer(){return this.buffers.active}constructor(t){super(),this.isUserScrolling=!1,this._onResize=this.register(new l.EventEmitter),this.onResize=this._onResize.event,this._onScroll=this.register(new l.EventEmitter),this.onScroll=this._onScroll.event,this.cols=Math.max(t.rawOptions.cols||0,r.MINIMUM_COLS),this.rows=Math.max(t.rawOptions.rows||0,r.MINIMUM_ROWS),this.buffers=this.register(new _.BufferSet(t,this))}resize(t,s){this.cols=t,this.rows=s,this.buffers.resize(t,s),this._onResize.fire({cols:t,rows:s})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(t,s=!1){const e=this.buffer;let i;i=this._cachedBlankLine,i&&i.length===this.cols&&i.getFg(0)===t.fg&&i.getBg(0)===t.bg||(i=e.getBlankLine(t,s),this._cachedBlankLine=i),i.isWrapped=s;const h=e.ybase+e.scrollTop,p=e.ybase+e.scrollBottom;if(e.scrollTop===0){const m=e.lines.isFull;p===e.lines.length-1?m?e.lines.recycle().copyFrom(i):e.lines.push(i.clone()):e.lines.splice(p+1,0,i.clone()),m?this.isUserScrolling&&(e.ydisp=Math.max(e.ydisp-1,0)):(e.ybase++,this.isUserScrolling||e.ydisp++)}else{const m=p-h+1;e.lines.shiftElements(h+1,m-1,-1),e.lines.set(p,i.clone())}this.isUserScrolling||(e.ydisp=e.ybase),this._onScroll.fire(e.ydisp)}scrollLines(t,s,e){const i=this.buffer;if(t<0){if(i.ydisp===0)return;this.isUserScrolling=!0}else t+i.ydisp>=i.ybase&&(this.isUserScrolling=!1);const h=i.ydisp;i.ydisp=Math.max(Math.min(i.ydisp+t,i.ybase),0),h!==i.ydisp&&(s||this._onScroll.fire(i.ydisp))}};r.BufferService=u=c([f(0,S.IOptionsService)],u)},7994:(L,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.CharsetService=void 0,r.CharsetService=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(o){this.glevel=o,this.charset=this._charsets[o]}setgCharset(o,c){this._charsets[o]=c,this.glevel===o&&(this.charset=c)}}},1753:function(L,r,o){var c=this&&this.__decorate||function(i,h,p,m){var C,v=arguments.length,w=v<3?h:m===null?m=Object.getOwnPropertyDescriptor(h,p):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(i,h,p,m);else for(var T=i.length-1;T>=0;T--)(C=i[T])&&(w=(v<3?C(w):v>3?C(h,p,w):C(h,p))||w);return v>3&&w&&Object.defineProperty(h,p,w),w},f=this&&this.__param||function(i,h){return function(p,m){h(p,m,i)}};Object.defineProperty(r,"__esModule",{value:!0}),r.CoreMouseService=void 0;const l=o(2585),a=o(8460),_=o(844),S={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:i=>i.button!==4&&i.action===1&&(i.ctrl=!1,i.alt=!1,i.shift=!1,!0)},VT200:{events:19,restrict:i=>i.action!==32},DRAG:{events:23,restrict:i=>i.action!==32||i.button!==3},ANY:{events:31,restrict:i=>!0}};function u(i,h){let p=(i.ctrl?16:0)|(i.shift?4:0)|(i.alt?8:0);return i.button===4?(p|=64,p|=i.action):(p|=3&i.button,4&i.button&&(p|=64),8&i.button&&(p|=128),i.action===32?p|=32:i.action!==0||h||(p|=3)),p}const t=String.fromCharCode,s={DEFAULT:i=>{const h=[u(i,!1)+32,i.col+32,i.row+32];return h[0]>255||h[1]>255||h[2]>255?"":`\x1B[M${t(h[0])}${t(h[1])}${t(h[2])}`},SGR:i=>{const h=i.action===0&&i.button!==4?"m":"M";return`\x1B[<${u(i,!0)};${i.col};${i.row}${h}`},SGR_PIXELS:i=>{const h=i.action===0&&i.button!==4?"m":"M";return`\x1B[<${u(i,!0)};${i.x};${i.y}${h}`}};let e=r.CoreMouseService=class extends _.Disposable{constructor(i,h){super(),this._bufferService=i,this._coreService=h,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._onProtocolChange=this.register(new a.EventEmitter),this.onProtocolChange=this._onProtocolChange.event;for(const p of Object.keys(S))this.addProtocol(p,S[p]);for(const p of Object.keys(s))this.addEncoding(p,s[p]);this.reset()}addProtocol(i,h){this._protocols[i]=h}addEncoding(i,h){this._encodings[i]=h}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(i){if(!this._protocols[i])throw new Error(`unknown protocol "${i}"`);this._activeProtocol=i,this._onProtocolChange.fire(this._protocols[i].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(i){if(!this._encodings[i])throw new Error(`unknown encoding "${i}"`);this._activeEncoding=i}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null}triggerMouseEvent(i){if(i.col<0||i.col>=this._bufferService.cols||i.row<0||i.row>=this._bufferService.rows||i.button===4&&i.action===32||i.button===3&&i.action!==32||i.button!==4&&(i.action===2||i.action===3)||(i.col++,i.row++,i.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,i,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(i))return!1;const h=this._encodings[this._activeEncoding](i);return h&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(h):this._coreService.triggerDataEvent(h,!0)),this._lastEvent=i,!0}explainEvents(i){return{down:!!(1&i),up:!!(2&i),drag:!!(4&i),move:!!(8&i),wheel:!!(16&i)}}_equalEvents(i,h,p){if(p){if(i.x!==h.x||i.y!==h.y)return!1}else if(i.col!==h.col||i.row!==h.row)return!1;return i.button===h.button&&i.action===h.action&&i.ctrl===h.ctrl&&i.alt===h.alt&&i.shift===h.shift}};r.CoreMouseService=e=c([f(0,l.IBufferService),f(1,l.ICoreService)],e)},6975:function(L,r,o){var c=this&&this.__decorate||function(e,i,h,p){var m,C=arguments.length,v=C<3?i:p===null?p=Object.getOwnPropertyDescriptor(i,h):p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")v=Reflect.decorate(e,i,h,p);else for(var w=e.length-1;w>=0;w--)(m=e[w])&&(v=(C<3?m(v):C>3?m(i,h,v):m(i,h))||v);return C>3&&v&&Object.defineProperty(i,h,v),v},f=this&&this.__param||function(e,i){return function(h,p){i(h,p,e)}};Object.defineProperty(r,"__esModule",{value:!0}),r.CoreService=void 0;const l=o(1439),a=o(8460),_=o(844),S=o(2585),u=Object.freeze({insertMode:!1}),t=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0});let s=r.CoreService=class extends _.Disposable{constructor(e,i,h){super(),this._bufferService=e,this._logService=i,this._optionsService=h,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this.register(new a.EventEmitter),this.onData=this._onData.event,this._onUserInput=this.register(new a.EventEmitter),this.onUserInput=this._onUserInput.event,this._onBinary=this.register(new a.EventEmitter),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this.register(new a.EventEmitter),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=(0,l.clone)(u),this.decPrivateModes=(0,l.clone)(t)}reset(){this.modes=(0,l.clone)(u),this.decPrivateModes=(0,l.clone)(t)}triggerDataEvent(e,i=!1){if(this._optionsService.rawOptions.disableStdin)return;const h=this._bufferService.buffer;i&&this._optionsService.rawOptions.scrollOnUserInput&&h.ybase!==h.ydisp&&this._onRequestScrollToBottom.fire(),i&&this._onUserInput.fire(),this._logService.debug(`sending data "${e}"`,()=>e.split("").map(p=>p.charCodeAt(0))),this._onData.fire(e)}triggerBinaryEvent(e){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${e}"`,()=>e.split("").map(i=>i.charCodeAt(0))),this._onBinary.fire(e))}};r.CoreService=s=c([f(0,S.IBufferService),f(1,S.ILogService),f(2,S.IOptionsService)],s)},9074:(L,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.DecorationService=void 0;const c=o(8055),f=o(8460),l=o(844),a=o(6106);let _=0,S=0;class u extends l.Disposable{get decorations(){return this._decorations.values()}constructor(){super(),this._decorations=new a.SortedList(e=>e?.marker.line),this._onDecorationRegistered=this.register(new f.EventEmitter),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this.register(new f.EventEmitter),this.onDecorationRemoved=this._onDecorationRemoved.event,this.register((0,l.toDisposable)(()=>this.reset()))}registerDecoration(e){if(e.marker.isDisposed)return;const i=new t(e);if(i){const h=i.marker.onDispose(()=>i.dispose());i.onDispose(()=>{i&&(this._decorations.delete(i)&&this._onDecorationRemoved.fire(i),h.dispose())}),this._decorations.insert(i),this._onDecorationRegistered.fire(i)}return i}reset(){for(const e of this._decorations.values())e.dispose();this._decorations.clear()}*getDecorationsAtCell(e,i,h){let p=0,m=0;for(const C of this._decorations.getKeyIterator(i))p=C.options.x??0,m=p+(C.options.width??1),e>=p&&e<m&&(!h||(C.options.layer??"bottom")===h)&&(yield C)}forEachDecorationAtCell(e,i,h,p){this._decorations.forEachByKey(i,m=>{_=m.options.x??0,S=_+(m.options.width??1),e>=_&&e<S&&(!h||(m.options.layer??"bottom")===h)&&p(m)})}}r.DecorationService=u;class t extends l.Disposable{get isDisposed(){return this._isDisposed}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=c.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=c.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}constructor(e){super(),this.options=e,this.onRenderEmitter=this.register(new f.EventEmitter),this.onRender=this.onRenderEmitter.event,this._onDispose=this.register(new f.EventEmitter),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=e.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}dispose(){this._onDispose.fire(),super.dispose()}}},4348:(L,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.InstantiationService=r.ServiceCollection=void 0;const c=o(2585),f=o(8343);class l{constructor(..._){this._entries=new Map;for(const[S,u]of _)this.set(S,u)}set(_,S){const u=this._entries.get(_);return this._entries.set(_,S),u}forEach(_){for(const[S,u]of this._entries.entries())_(S,u)}has(_){return this._entries.has(_)}get(_){return this._entries.get(_)}}r.ServiceCollection=l,r.InstantiationService=class{constructor(){this._services=new l,this._services.set(c.IInstantiationService,this)}setService(a,_){this._services.set(a,_)}getService(a){return this._services.get(a)}createInstance(a,..._){const S=(0,f.getServiceDependencies)(a).sort((s,e)=>s.index-e.index),u=[];for(const s of S){const e=this._services.get(s.id);if(!e)throw new Error(`[createInstance] ${a.name} depends on UNKNOWN service ${s.id}.`);u.push(e)}const t=S.length>0?S[0].index:_.length;if(_.length!==t)throw new Error(`[createInstance] First service dependency of ${a.name} at position ${t+1} conflicts with ${_.length} static arguments`);return new a(..._,...u)}}},7866:function(L,r,o){var c=this&&this.__decorate||function(t,s,e,i){var h,p=arguments.length,m=p<3?s:i===null?i=Object.getOwnPropertyDescriptor(s,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")m=Reflect.decorate(t,s,e,i);else for(var C=t.length-1;C>=0;C--)(h=t[C])&&(m=(p<3?h(m):p>3?h(s,e,m):h(s,e))||m);return p>3&&m&&Object.defineProperty(s,e,m),m},f=this&&this.__param||function(t,s){return function(e,i){s(e,i,t)}};Object.defineProperty(r,"__esModule",{value:!0}),r.traceCall=r.setTraceLogger=r.LogService=void 0;const l=o(844),a=o(2585),_={trace:a.LogLevelEnum.TRACE,debug:a.LogLevelEnum.DEBUG,info:a.LogLevelEnum.INFO,warn:a.LogLevelEnum.WARN,error:a.LogLevelEnum.ERROR,off:a.LogLevelEnum.OFF};let S,u=r.LogService=class extends l.Disposable{get logLevel(){return this._logLevel}constructor(t){super(),this._optionsService=t,this._logLevel=a.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),S=this}_updateLogLevel(){this._logLevel=_[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(t){for(let s=0;s<t.length;s++)typeof t[s]=="function"&&(t[s]=t[s]())}_log(t,s,e){this._evalLazyOptionalParams(e),t.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+s,...e)}trace(t,...s){this._logLevel<=a.LogLevelEnum.TRACE&&this._log(this._optionsService.options.logger?.trace.bind(this._optionsService.options.logger)??console.log,t,s)}debug(t,...s){this._logLevel<=a.LogLevelEnum.DEBUG&&this._log(this._optionsService.options.logger?.debug.bind(this._optionsService.options.logger)??console.log,t,s)}info(t,...s){this._logLevel<=a.LogLevelEnum.INFO&&this._log(this._optionsService.options.logger?.info.bind(this._optionsService.options.logger)??console.info,t,s)}warn(t,...s){this._logLevel<=a.LogLevelEnum.WARN&&this._log(this._optionsService.options.logger?.warn.bind(this._optionsService.options.logger)??console.warn,t,s)}error(t,...s){this._logLevel<=a.LogLevelEnum.ERROR&&this._log(this._optionsService.options.logger?.error.bind(this._optionsService.options.logger)??console.error,t,s)}};r.LogService=u=c([f(0,a.IOptionsService)],u),r.setTraceLogger=function(t){S=t},r.traceCall=function(t,s,e){if(typeof e.value!="function")throw new Error("not supported");const i=e.value;e.value=function(...h){if(S.logLevel!==a.LogLevelEnum.TRACE)return i.apply(this,h);S.trace(`GlyphRenderer#${i.name}(${h.map(m=>JSON.stringify(m)).join(", ")})`);const p=i.apply(this,h);return S.trace(`GlyphRenderer#${i.name} return`,p),p}}},7302:(L,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.OptionsService=r.DEFAULT_OPTIONS=void 0;const c=o(8460),f=o(844),l=o(6114);r.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,documentOverride:null,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rescaleOverlappingGlyphs:!1,rightClickSelectsWord:l.isMac,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:0};const a=["normal","bold","100","200","300","400","500","600","700","800","900"];class _ extends f.Disposable{constructor(u){super(),this._onOptionChange=this.register(new c.EventEmitter),this.onOptionChange=this._onOptionChange.event;const t={...r.DEFAULT_OPTIONS};for(const s in u)if(s in t)try{const e=u[s];t[s]=this._sanitizeAndValidateOption(s,e)}catch(e){console.error(e)}this.rawOptions=t,this.options={...t},this._setupOptions(),this.register((0,f.toDisposable)(()=>{this.rawOptions.linkHandler=null,this.rawOptions.documentOverride=null}))}onSpecificOptionChange(u,t){return this.onOptionChange(s=>{s===u&&t(this.rawOptions[u])})}onMultipleOptionChange(u,t){return this.onOptionChange(s=>{u.indexOf(s)!==-1&&t()})}_setupOptions(){const u=s=>{if(!(s in r.DEFAULT_OPTIONS))throw new Error(`No option with key "${s}"`);return this.rawOptions[s]},t=(s,e)=>{if(!(s in r.DEFAULT_OPTIONS))throw new Error(`No option with key "${s}"`);e=this._sanitizeAndValidateOption(s,e),this.rawOptions[s]!==e&&(this.rawOptions[s]=e,this._onOptionChange.fire(s))};for(const s in this.rawOptions){const e={get:u.bind(this,s),set:t.bind(this,s)};Object.defineProperty(this.options,s,e)}}_sanitizeAndValidateOption(u,t){switch(u){case"cursorStyle":if(t||(t=r.DEFAULT_OPTIONS[u]),!function(s){return s==="block"||s==="underline"||s==="bar"}(t))throw new Error(`"${t}" is not a valid value for ${u}`);break;case"wordSeparator":t||(t=r.DEFAULT_OPTIONS[u]);break;case"fontWeight":case"fontWeightBold":if(typeof t=="number"&&1<=t&&t<=1e3)break;t=a.includes(t)?t:r.DEFAULT_OPTIONS[u];break;case"cursorWidth":t=Math.floor(t);case"lineHeight":case"tabStopWidth":if(t<1)throw new Error(`${u} cannot be less than 1, value: ${t}`);break;case"minimumContrastRatio":t=Math.max(1,Math.min(21,Math.round(10*t)/10));break;case"scrollback":if((t=Math.min(t,4294967295))<0)throw new Error(`${u} cannot be less than 0, value: ${t}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(t<=0)throw new Error(`${u} cannot be less than or equal to 0, value: ${t}`);break;case"rows":case"cols":if(!t&&t!==0)throw new Error(`${u} must be numeric, value: ${t}`);break;case"windowsPty":t=t??{}}return t}}r.OptionsService=_},2660:function(L,r,o){var c=this&&this.__decorate||function(_,S,u,t){var s,e=arguments.length,i=e<3?S:t===null?t=Object.getOwnPropertyDescriptor(S,u):t;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(_,S,u,t);else for(var h=_.length-1;h>=0;h--)(s=_[h])&&(i=(e<3?s(i):e>3?s(S,u,i):s(S,u))||i);return e>3&&i&&Object.defineProperty(S,u,i),i},f=this&&this.__param||function(_,S){return function(u,t){S(u,t,_)}};Object.defineProperty(r,"__esModule",{value:!0}),r.OscLinkService=void 0;const l=o(2585);let a=r.OscLinkService=class{constructor(_){this._bufferService=_,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(_){const S=this._bufferService.buffer;if(_.id===void 0){const h=S.addMarker(S.ybase+S.y),p={data:_,id:this._nextId++,lines:[h]};return h.onDispose(()=>this._removeMarkerFromLink(p,h)),this._dataByLinkId.set(p.id,p),p.id}const u=_,t=this._getEntryIdKey(u),s=this._entriesWithId.get(t);if(s)return this.addLineToLink(s.id,S.ybase+S.y),s.id;const e=S.addMarker(S.ybase+S.y),i={id:this._nextId++,key:this._getEntryIdKey(u),data:u,lines:[e]};return e.onDispose(()=>this._removeMarkerFromLink(i,e)),this._entriesWithId.set(i.key,i),this._dataByLinkId.set(i.id,i),i.id}addLineToLink(_,S){const u=this._dataByLinkId.get(_);if(u&&u.lines.every(t=>t.line!==S)){const t=this._bufferService.buffer.addMarker(S);u.lines.push(t),t.onDispose(()=>this._removeMarkerFromLink(u,t))}}getLinkData(_){return this._dataByLinkId.get(_)?.data}_getEntryIdKey(_){return`${_.id};;${_.uri}`}_removeMarkerFromLink(_,S){const u=_.lines.indexOf(S);u!==-1&&(_.lines.splice(u,1),_.lines.length===0&&(_.data.id!==void 0&&this._entriesWithId.delete(_.key),this._dataByLinkId.delete(_.id)))}};r.OscLinkService=a=c([f(0,l.IBufferService)],a)},8343:(L,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.createDecorator=r.getServiceDependencies=r.serviceRegistry=void 0;const o="di$target",c="di$dependencies";r.serviceRegistry=new Map,r.getServiceDependencies=function(f){return f[c]||[]},r.createDecorator=function(f){if(r.serviceRegistry.has(f))return r.serviceRegistry.get(f);const l=function(a,_,S){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(u,t,s){t[o]===t?t[c].push({id:u,index:s}):(t[c]=[{id:u,index:s}],t[o]=t)})(l,a,S)};return l.toString=()=>f,r.serviceRegistry.set(f,l),l}},2585:(L,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.IDecorationService=r.IUnicodeService=r.IOscLinkService=r.IOptionsService=r.ILogService=r.LogLevelEnum=r.IInstantiationService=r.ICharsetService=r.ICoreService=r.ICoreMouseService=r.IBufferService=void 0;const c=o(8343);var f;r.IBufferService=(0,c.createDecorator)("BufferService"),r.ICoreMouseService=(0,c.createDecorator)("CoreMouseService"),r.ICoreService=(0,c.createDecorator)("CoreService"),r.ICharsetService=(0,c.createDecorator)("CharsetService"),r.IInstantiationService=(0,c.createDecorator)("InstantiationService"),function(l){l[l.TRACE=0]="TRACE",l[l.DEBUG=1]="DEBUG",l[l.INFO=2]="INFO",l[l.WARN=3]="WARN",l[l.ERROR=4]="ERROR",l[l.OFF=5]="OFF"}(f||(r.LogLevelEnum=f={})),r.ILogService=(0,c.createDecorator)("LogService"),r.IOptionsService=(0,c.createDecorator)("OptionsService"),r.IOscLinkService=(0,c.createDecorator)("OscLinkService"),r.IUnicodeService=(0,c.createDecorator)("UnicodeService"),r.IDecorationService=(0,c.createDecorator)("DecorationService")},1480:(L,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.UnicodeService=void 0;const c=o(8460),f=o(225);class l{static extractShouldJoin(_){return(1&_)!=0}static extractWidth(_){return _>>1&3}static extractCharKind(_){return _>>3}static createPropertyValue(_,S,u=!1){return(16777215&_)<<3|(3&S)<<1|(u?1:0)}constructor(){this._providers=Object.create(null),this._active="",this._onChange=new c.EventEmitter,this.onChange=this._onChange.event;const _=new f.UnicodeV6;this.register(_),this._active=_.version,this._activeProvider=_}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(_){if(!this._providers[_])throw new Error(`unknown Unicode version "${_}"`);this._active=_,this._activeProvider=this._providers[_],this._onChange.fire(_)}register(_){this._providers[_.version]=_}wcwidth(_){return this._activeProvider.wcwidth(_)}getStringCellWidth(_){let S=0,u=0;const t=_.length;for(let s=0;s<t;++s){let e=_.charCodeAt(s);if(55296<=e&&e<=56319){if(++s>=t)return S+this.wcwidth(e);const p=_.charCodeAt(s);56320<=p&&p<=57343?e=1024*(e-55296)+p-56320+65536:S+=this.wcwidth(p)}const i=this.charProperties(e,u);let h=l.extractWidth(i);l.extractShouldJoin(i)&&(h-=l.extractWidth(u)),S+=h,u=i}return S}charProperties(_,S){return this._activeProvider.charProperties(_,S)}}r.UnicodeService=l}},x={};function E(L){var r=x[L];if(r!==void 0)return r.exports;var o=x[L]={exports:{}};return g[L].call(o.exports,o,o.exports,E),o.exports}var D={};return(()=>{var L=D;Object.defineProperty(L,"__esModule",{value:!0}),L.Terminal=void 0;const r=E(9042),o=E(3236),c=E(844),f=E(5741),l=E(8285),a=E(7975),_=E(7090),S=["cols","rows"];class u extends c.Disposable{constructor(s){super(),this._core=this.register(new o.Terminal(s)),this._addonManager=this.register(new f.AddonManager),this._publicOptions={...this._core.options};const e=h=>this._core.options[h],i=(h,p)=>{this._checkReadonlyOptions(h),this._core.options[h]=p};for(const h in this._core.options){const p={get:e.bind(this,h),set:i.bind(this,h)};Object.defineProperty(this._publicOptions,h,p)}}_checkReadonlyOptions(s){if(S.includes(s))throw new Error(`Option "${s}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new a.ParserApi(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new _.UnicodeApi(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this.register(new l.BufferNamespaceApi(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){const s=this._core.coreService.decPrivateModes;let e="none";switch(this._core.coreMouseService.activeProtocol){case"X10":e="x10";break;case"VT200":e="vt200";break;case"DRAG":e="drag";break;case"ANY":e="any"}return{applicationCursorKeysMode:s.applicationCursorKeys,applicationKeypadMode:s.applicationKeypad,bracketedPasteMode:s.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:e,originMode:s.origin,reverseWraparoundMode:s.reverseWraparound,sendFocusMode:s.sendFocus,wraparoundMode:s.wraparound}}get options(){return this._publicOptions}set options(s){for(const e in s)this._publicOptions[e]=s[e]}blur(){this._core.blur()}focus(){this._core.focus()}input(s,e=!0){this._core.input(s,e)}resize(s,e){this._verifyIntegers(s,e),this._core.resize(s,e)}open(s){this._core.open(s)}attachCustomKeyEventHandler(s){this._core.attachCustomKeyEventHandler(s)}attachCustomWheelEventHandler(s){this._core.attachCustomWheelEventHandler(s)}registerLinkProvider(s){return this._core.registerLinkProvider(s)}registerCharacterJoiner(s){return this._checkProposedApi(),this._core.registerCharacterJoiner(s)}deregisterCharacterJoiner(s){this._checkProposedApi(),this._core.deregisterCharacterJoiner(s)}registerMarker(s=0){return this._verifyIntegers(s),this._core.registerMarker(s)}registerDecoration(s){return this._checkProposedApi(),this._verifyPositiveIntegers(s.x??0,s.width??0,s.height??0),this._core.registerDecoration(s)}hasSelection(){return this._core.hasSelection()}select(s,e,i){this._verifyIntegers(s,e,i),this._core.select(s,e,i)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(s,e){this._verifyIntegers(s,e),this._core.selectLines(s,e)}dispose(){super.dispose()}scrollLines(s){this._verifyIntegers(s),this._core.scrollLines(s)}scrollPages(s){this._verifyIntegers(s),this._core.scrollPages(s)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(s){this._verifyIntegers(s),this._core.scrollToLine(s)}clear(){this._core.clear()}write(s,e){this._core.write(s,e)}writeln(s,e){this._core.write(s),this._core.write(`\r
`,e)}paste(s){this._core.paste(s)}refresh(s,e){this._verifyIntegers(s,e),this._core.refresh(s,e)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(s){this._addonManager.loadAddon(this,s)}static get strings(){return r}_verifyIntegers(...s){for(const e of s)if(e===1/0||isNaN(e)||e%1!=0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...s){for(const e of s)if(e&&(e===1/0||isNaN(e)||e%1!=0||e<0))throw new Error("This API only accepts positive integers")}}L.Terminal=u})(),D})())}(ii)),ii.exports}var uc=dc(),si={exports:{}},Zi;function fc(){return Zi||(Zi=1,function(n,d){(function(g,x){n.exports=x()})(self,()=>(()=>{var g={};return(()=>{var x=g;Object.defineProperty(x,"__esModule",{value:!0}),x.FitAddon=void 0,x.FitAddon=class{activate(E){this._terminal=E}dispose(){}fit(){const E=this.proposeDimensions();if(!E||!this._terminal||isNaN(E.cols)||isNaN(E.rows))return;const D=this._terminal._core;this._terminal.rows===E.rows&&this._terminal.cols===E.cols||(D._renderService.clear(),this._terminal.resize(E.cols,E.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;const E=this._terminal._core,D=E._renderService.dimensions;if(D.css.cell.width===0||D.css.cell.height===0)return;const L=this._terminal.options.scrollback===0?0:E.viewport.scrollBarWidth,r=window.getComputedStyle(this._terminal.element.parentElement),o=parseInt(r.getPropertyValue("height")),c=Math.max(0,parseInt(r.getPropertyValue("width"))),f=window.getComputedStyle(this._terminal.element),l=o-(parseInt(f.getPropertyValue("padding-top"))+parseInt(f.getPropertyValue("padding-bottom"))),a=c-(parseInt(f.getPropertyValue("padding-right"))+parseInt(f.getPropertyValue("padding-left")))-L;return{cols:Math.max(2,Math.floor(a/D.css.cell.width)),rows:Math.max(1,Math.floor(l/D.css.cell.height))}}}})(),g})())}(si)),si.exports}var _c=fc(),vc=X('<div class="d-flex justify-content-end mb-2"><button type="button" class="btn mx-3" title="Fullscreen"><!></button> <button type="button" class="btn mx-3" title="Close Terminal"><!></button></div> <div class="border" style="height: calc(100vh - 280px)"></div>',1),pc=X('<form class="container login-form"><div class="container" style="max-width: 400px"><div class="form-floating mb-2"><input type="text" class="form-control" id="inpTerminalCmd"/> <label for="inpTerminalCmd">Command</label></div> <div class="form-floating mb-2"><input type="text" class="form-control" id="inpTerminalUser"/> <label for="inpTerminalUser">User</label></div> <div class="col-12"><button type="submit" class="btn btn-primary w-100"><!> Open Terminal</button></div></div></form>');function gc(n,d){Ye(d,!1);let g=he(d,"container_id",8),x,E=le(),D=le(!1);const L="sh";let r=le(L);const o="root";let c=le(o);const f=new uc.Terminal({theme:{background:"#222",cursor:"white",cursorAccent:"#222"},cursorBlink:!0}),l=new _c.FitAddon;yr(()=>{g()!==x&&(b(D)&&(ne.send("close_terminal"),S()),x=g())}),at(()=>{ne.register("spawn_terminal",()=>{a(),f.focus()},h=>Le.add({text:h,type:"error"})),ne.register("close_terminal",()=>{Le.add({text:"Terminal has been closed",type:"info"}),S()},h=>Le.add({text:h,type:"error"})),ne.register("receive_terminal_output",async h=>{f.write(new Uint8Array(await h.blob.arrayBuffer()))},h=>Le.add({text:h,type:"error"})),f.onResize(h=>{ne.send("resize_terminal",h)}),f.loadAddon(l),f.onData(h=>{ne.send("transmit_terminal_input",{data:h})})}),Ut(()=>{b(D)&&ne.send("close_terminal"),ne.unregister("spawn_terminal"),ne.unregister("close_terminal"),ne.unregister("receive_terminal_output")});function a(){b(D)&&l.fit()}async function _(){Y(D,!0),ne.send("spawn_terminal",{container_id:g(),cmd:b(r),user:b(c)}),await Ls(),f.open(b(E))}function S(){Y(D,!1),f.reset(),f.clear(),Y(r,L),Y(c,o)}function u(){b(E)?.requestFullscreen&&b(E).requestFullscreen({navigationUI:"show"})}it();var t=ir();pe("resize",Tr,a);var s=Oe(t);{var e=h=>{var p=vc(),m=Oe(p),C=P(m),v=P(C);de(v,{get icon(){return Fs},size:"lg",color:"#666"});var w=U(C,2),T=P(w);de(T,{get icon(){return Oa},size:"lg",color:"#666"});var A=U(m,2);Zr(A,I=>Y(E,I),()=>b(E)),pe("click",C,u),pe("click",w,()=>ne.send("close_terminal")),$(h,p)},i=h=>{var p=pc(),m=P(p),C=P(m),v=P(C),w=U(C,2),T=P(w),A=U(w,2),I=P(A),R=P(I);de(R,{get icon(){return ta}}),Hr(v,()=>b(r),N=>Y(r,N)),Hr(T,()=>b(c),N=>Y(c,N)),pe("submit",p,Fr(_)),dt(3,p,()=>Dt),$(h,p)};te(s,h=>{b(D)?h(e):h(i,!1)})}$(n,t),Qe()}/*!
 * Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2024 Fonticons, Inc.
 */const mc={prefix:"fab",iconName:"docker",icon:[640,512,[],"f395","M349.9 236.3h-66.1v-59.4h66.1v59.4zm0-204.3h-66.1v60.7h66.1V32zm78.2 144.8H362v59.4h66.1v-59.4zm-156.3-72.1h-66.1v60.1h66.1v-60.1zm78.1 0h-66.1v60.1h66.1v-60.1zm276.8 100c-14.4-9.7-47.6-13.2-73.1-8.4-3.3-24-16.7-44.9-41.1-63.7l-14-9.3-9.3 14c-18.4 27.8-23.4 73.6-3.7 103.8-8.7 4.7-25.8 11.1-48.4 10.7H2.4c-8.7 50.8 5.8 116.8 44 162.1 37.1 43.9 92.7 66.2 165.4 66.2 157.4 0 273.9-72.5 328.4-204.2 21.4.4 67.6.1 91.3-45.2 1.5-2.5 6.6-13.2 8.5-17.1l-13.3-8.9zm-511.1-27.9h-66v59.4h66.1v-59.4zm78.1 0h-66.1v59.4h66.1v-59.4zm78.1 0h-66.1v59.4h66.1v-59.4zm-78.1-72.1h-66.1v60.1h66.1v-60.1z"]},Sc={prefix:"fab",iconName:"github",icon:[496,512,[],"f09b","M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"]};var bc=X('<div class="d-flex align-items-center"><strong class="mx-5">Loading...</strong> <div class="spinner-border ms-auto" role="status" aria-hidden="true"></div></div>'),wc=X('<div class="card"><div class="card-body"><div class="fs-4 text-uppercase mb-3">Host</div> <div class="d-flex align-items-center mb-2"><!> </div> <div class="d-flex align-items-center mb-2"><!> </div> <div class="d-flex align-items-center mb-2"><!> </div> <div class="d-flex align-items-center mb-2"><!> </div> <div class="d-flex align-items-center mb-2"><!> </div> <div class="mt-3"><a href="https://github.com/knrdl/caasa" target="_blank" rel="noopener noreferrer" class="text-decoration-none"><!> CaaSa on Github</a></div></div></div>'),Cc=X('<div class="flex-grow-1 d-flex justify-content-center align-items-start mt-5"><!></div>');function yc(n,d){Ye(d,!1);let g=le(!0),x=le();at(()=>{ne.register("get_system_info",o=>{Y(x,o),Y(g,!1)},o=>{Y(g,!1),Le.add({text:o,type:"error"})}),ne.send("get_system_info")}),Ut(()=>{ne.unregister("get_system_info")}),it();var E=Cc(),D=P(E);{var L=o=>{var c=bc();$(o,c)},r=(o,c)=>{{var f=l=>{var a=wc(),_=P(a),S=U(P(_),2),u=P(S);de(u,{get icon(){return ha},size:"lg",style:"width: 3rem"});var t=U(u),s=U(S,2),e=P(s);de(e,{get icon(){return Ns},size:"lg",style:"width: 3rem"});var i=U(e),h=U(s,2),p=P(h);de(p,{get icon(){return Hs},size:"lg",style:"width: 3rem"});var m=U(p),C=U(h,2),v=P(C);de(v,{get icon(){return mc},size:"lg",style:"width: 3rem"});var w=U(v),T=U(C,2),A=P(T);de(A,{get icon(){return zs},size:"lg",style:"width: 3rem"});var I=U(A),R=U(T,2),N=P(R),q=P(N);de(q,{get icon(){return Sc},size:"sm"}),oe(Z=>{se(t,` ${b(x).os??""}`),se(i,` ${b(x).cpus??""} CPUs`),se(m,` ${Z??""}
          Memory`),se(w,` ${b(x).engine_version??""}`),se(I,` ${b(x).containers.running??""}/${b(x).containers.total??""} Containers running`)},[()=>gt(b(x).mem)],fe),$(l,a)};te(o,l=>{b(x)&&l(f)},c)}};te(D,o=>{b(g)?o(L):o(r,!1)})}$(n,E),Qe()}var Ec=X('<p class="mx-5 my-2">No containers found</p>'),xc=X('<button type="button" style="cursor: pointer; text-align: left"><div style="width: 10px; flex: none"></div> <div class="p-2 pe-4"><div> </div> <div> </div></div></button>'),kc=X('<p class="mx-2 my-1">No containers match search term</p>'),Lc=X('<input type="search" class="form-control svelte-6rcsrg" placeholder="Search"/> <!>',1),Dc=X('<aside class="d-flex flex-column pb-1 svelte-6rcsrg"><!></aside>');function Ji(n,d){Ye(d,!1);const g=le();let x=he(d,"containers",8),E=he(d,"selectedContainer",8);const D=Ts();let L=le("");Ct(()=>(Ae(x()),b(L)),()=>{Y(g,x()?.filter(f=>f.name.toLowerCase().replace(/\s+/g,"").includes(b(L).replace(/\s+/g,""))||f.namespace?.toLowerCase().replace(/\s+/g,"").includes(b(L).replace(/\s+/g,""))))}),wr(),it();var r=Dc(),o=P(r);{var c=f=>{var l=ir(),a=Oe(l);{var _=u=>{var t=Ec();$(u,t)},S=u=>{var t=Lc(),s=Oe(t),e=U(s,2);_t(e,1,()=>b(g),ft,(i,h)=>{var p=xc();const m=fe(()=>(Ae(E()),b(h),j(()=>E()&&E().id===b(h).id)));let C;var v=P(p);let w;var T=U(v,2),A=P(T);let I;var R=P(A),N=U(A,2),q=P(N);oe((Z,Q,J)=>{C=Ge(p,1,"btn d-flex border-top border-bottom",null,C,Z),w=Ge(v,1,"",null,w,Q),I=Ge(A,1,"text-uppercase",null,I,J),se(R,(b(h),j(()=>b(h).namespace||""))),se(q,(b(h),j(()=>b(h).name)))},[()=>({"bg-dark":b(m),"text-light":b(m)}),()=>({"bg-success":b(h).status==="running","bg-danger":["exited","dead","removing"].includes(b(h).status),"bg-warning":["created","paused","restarting"].includes(b(h).status)}),()=>({"text-muted":E()?.id!==b(h).id})],fe),pe("click",p,()=>D("select-container",b(h))),$(i,p)},i=>{var h=kc();$(i,h)}),oe(()=>Ao(s,b(L))),pe("input",s,i=>Y(L,i.currentTarget.value.toLowerCase())),$(u,t)};te(a,u=>{Ae(x()),j(()=>x().length===0)?u(_):u(S,!1)})}$(f,l)};te(o,f=>{x()&&f(c)})}$(n,r),Qe()}var Rc=X('<div class="position-absolute"><!></div>'),Ac=X('<li><button type="button">Info</button></li>'),Tc=X('<li><button type="button">Logs</button></li>'),Bc=X('<li><button type="button">Terminal</button></li>'),Mc=X('<li><button type="button">Processes</button></li>'),Oc=X('<li><button type="button">Files</button></li>'),Ic=X("<div><!></div>"),Pc=X("<div><!></div>"),Hc=X("<div><!></div>"),Fc=X("<div><!></div>"),Nc=X("<div><!></div>"),zc=X('<div class="container-md" style="overflow: hidden"><div class="card tabs"><ul class="card-header"><!> <!> <!> <!> <!></ul> <div class="card-body py-4"><!></div></div></div>'),Wc=X('<!> <div style="z-index: 100;"><button type="button" class="position-fixed top-0 bottom-0 start-0 end-0" style="background: rgba(0, 0, 0, .55);" aria-label="Hide list"></button> <!></div> <div class="d-flex pb-3 align-items-start"><aside class="d-none d-md-block me-4"><!></aside> <!></div>',1);function Uc(n,d){Ye(d,!1);const g=le();let x,E=le(!0),D=le(),L=le(),r=he(d,"showHostInfo",12),o=he(d,"showContainerListOverlay",12),c=le(null);at(()=>{ne.register("get_container_list",A=>{Y(D,A),Y(E,!1)},A=>Le.add({text:A,type:"error"})),ne.send("get_container_list"),x=setInterval(()=>{ne.send("get_container_list")},3e3)}),Ut(()=>{ne.unregister("get_container_list"),clearInterval(x)});function f(A){Y(c,null),r(!1),o(!1),Y(L,null),window.scrollTo({top:0,behavior:"smooth"}),setTimeout(()=>{Y(L,A);const I=["info","logs","procs","term","files"];for(let R of I)if(b(L)?.permissions?.includes(R)){Y(c,R);break}b(c)||(Y(L,null),Le.add({type:"warning",text:"No permissions to access container"}))},100)}function l(A){Y(c,A)}Ct(()=>b(L),()=>{Y(g,b(L)?.status==="running")}),wr(),it();var a=Wc(),_=Oe(a);{var S=A=>{Us(A,{})};te(_,A=>{b(E)&&A(S)})}var u=U(_,2);let t;var s=P(u),e=U(s,2);{var i=A=>{var I=Rc(),R=P(I);const N=fe(()=>r()?null:b(L));Ji(R,{get containers(){return b(D)},get selectedContainer(){return b(N)},$$events:{"select-container":q=>f(q.detail)}}),dt(3,I,()=>ji,()=>({y:-50,duration:200})),$(A,I)};te(e,A=>{o()&&A(i)})}var h=U(u,2),p=P(h),m=P(p);const C=fe(()=>r()?null:b(L));Ji(m,{get containers(){return b(D)},get selectedContainer(){return b(C)},$$events:{"select-container":A=>f(A.detail)}});var v=U(p,2);{var w=A=>{yc(A,{})},T=A=>{var I=zc(),R=P(I),N=P(R),q=P(N);{var Z=k=>{var z=Ac(),W=P(z);let V;oe(G=>V=Ge(W,1,"text-uppercase",null,V,G),[()=>({active:b(c)==="info"})],fe),pe("click",W,()=>l("info")),$(k,z)};te(q,k=>{b(L),j(()=>b(L)?.permissions?.includes("info"))&&k(Z)})}var Q=U(q,2);{var J=k=>{var z=Tc(),W=P(z);let V;oe(G=>V=Ge(W,1,"text-uppercase",null,V,G),[()=>({active:b(c)==="logs"})],fe),pe("click",W,()=>l("logs")),$(k,z)};te(Q,k=>{b(L),j(()=>b(L)?.permissions?.includes("logs"))&&k(J)})}var y=U(Q,2);{var B=k=>{var z=Bc(),W=P(z);let V;oe(G=>V=Ge(W,1,"text-uppercase",null,V,G),[()=>({active:b(c)==="term"})],fe),pe("click",W,()=>l("term")),$(k,z)};te(y,k=>{b(g),b(L),j(()=>b(g)&&b(L)?.permissions?.includes("term"))&&k(B)})}var M=U(y,2);{var O=k=>{var z=Mc(),W=P(z);let V;oe(G=>V=Ge(W,1,"text-uppercase",null,V,G),[()=>({active:b(c)==="procs"})],fe),pe("click",W,()=>l("procs")),$(k,z)};te(M,k=>{b(g),b(L),j(()=>b(g)&&b(L)?.permissions?.includes("procs"))&&k(O)})}var F=U(M,2);{var K=k=>{var z=Oc(),W=P(z);let V;oe(G=>V=Ge(W,1,"text-uppercase",null,V,G),[()=>({active:b(c)==="files"})],fe),pe("click",W,()=>l("files")),$(k,z)};te(F,k=>{b(g),b(L),j(()=>b(g)&&b(L)?.permissions?.includes("files"))&&k(K)})}var ee=U(N,2),re=P(ee);{var H=k=>{var z=ir(),W=Oe(z);{var V=ae=>{var ue=Ic(),ve=P(ue);const ge=fe(()=>(b(L),j(()=>b(L).permissions.includes("state"))));Bl(ve,{get container_id(){return b(L),j(()=>b(L).id)},get enable_actions(){return b(ge)}}),dt(1,ue,()=>Dt),$(ae,ue)},G=(ae,ue)=>{{var ve=ie=>{var ze=Pc(),et=P(ze);Ul(et,{get container_id(){return b(L),j(()=>b(L).id)}}),dt(1,ze,()=>Dt),$(ie,ze)},ge=(ie,ze)=>{{var et=me=>{var We=Hc(),Ie=P(We);gc(Ie,{get container_id(){return b(L),j(()=>b(L).id)}}),dt(1,We,()=>Dt),$(me,We)},vt=(me,We)=>{{var Ie=ke=>{var Xe=Fc(),pt=P(Xe);hc(pt,{get container_id(){return b(L),j(()=>b(L).id)}}),dt(1,Xe,()=>Dt),$(ke,Xe)},lt=(ke,Xe)=>{{var pt=$e=>{var je=Nc(),Ze=P(je);const St=fe(()=>(b(L),j(()=>b(L).permissions.includes("files-read")))),Ee=fe(()=>(b(L),j(()=>b(L).permissions.includes("files-write"))));sc(Ze,{get container_id(){return b(L),j(()=>b(L).id)},get allow_download(){return b(St)},get allow_upload(){return b(Ee)}}),dt(1,je,()=>Dt),$($e,je)};te(ke,$e=>{b(c)==="files"&&$e(pt)},Xe)}};te(me,ke=>{b(c)==="procs"?ke(Ie):ke(lt,!1)},We)}};te(ie,me=>{b(c)==="term"?me(et):me(vt,!1)},ze)}};te(ae,ie=>{b(c)==="logs"?ie(ve):ie(ge,!1)},ue)}};te(W,ae=>{b(c)==="info"?ae(V):ae(G,!1)})}$(k,z)};te(re,k=>{b(L)&&k(H)})}dt(3,I,()=>ji,()=>({x:300,duration:200})),$(A,I)};te(v,A=>{r()?A(w):A(T,!1)})}oe(A=>t=Ge(u,1,"d-md-none position-relative",null,t,A),[()=>({"d-none":!o()})],fe),pe("click",s,()=>o(!1)),$(n,a),Qe()}var $c=X('<a href="/#/" class="d-md-none d-flex justify-content-center align-items-center svelte-1b5nrvg"><!></a>'),jc=X('<button type="button" class="btn mx-2"><!></button>'),qc=X('<!> <main class="svelte-1b5nrvg"><header class="svelte-1b5nrvg"><!> <a href="/#/" class="d-flex justify-content-center align-items-center svelte-1b5nrvg"><span><!></span> <span class="text-black ps-2 fs-2 fw-light">Container as a Service admin</span></a> <div class="items-right svelte-1b5nrvg"><!> <!></div></header> <!></main>',1);function Kc(n,d){Ye(d,!1);let g=le(null),x=le(!0),E=le(!0),D=le(!1);at(async()=>{ne.register("ws-error",null,w=>Le.add({text:w,type:"error"})),ne.register("ws-close",null,w=>{Le.add({text:w,type:"error"}),Y(g,null),alert("Lost connection. Reconnect?"),window.location.reload()}),ne.register("webproxy_auth",({username:w})=>{Y(g,w),Y(x,!1)},w=>{Le.add({text:w,type:"error"})}),await ne.init()});function L(){ne.close(),Y(g,null),Le.add({text:"Logged out",type:"info"}),window.location.reload()}function r(){alert("An error occurred!")}it();var o=qc();pe("error",Tr,r);var c=Oe(o);Vo(c,{});var f=U(c,2),l=P(f),a=P(l);{var _=w=>{var T=$c(),A=P(T);de(A,{get icon(){return ra},color:"#123",size:"2x",style:"width: 3rem;height: 3rem;"}),pe("click",T,Fr(()=>Y(D,!b(D)))),$(w,T)};te(a,w=>{b(g)&&w(_)})}var S=U(a,2),u=P(S);let t;var s=P(u);de(s,{get icon(){return _a},color:"#123",size:"2x",style:"width: 3rem;height: 3rem;"});var e=U(S,2),i=P(e);Fa(i,{});var h=U(i,2);{var p=w=>{var T=jc(),A=P(T);de(A,{get icon(){return ea},color:"#333",size:"2x"}),oe(()=>Fe(T,"title",`Logout ${b(g)??""}`)),pe("click",T,L),$(w,T)};te(h,w=>{b(g)&&b(x)&&w(p)})}var m=U(l,2);{var C=w=>{Uc(w,{get showHostInfo(){return b(E)},set showHostInfo(T){Y(E,T)},get showContainerListOverlay(){return b(D)},set showContainerListOverlay(T){Y(D,T)},$$legacy:!0})},v=w=>{Qa(w,{$$events:{login:T=>Y(g,T.detail.username)}})};te(m,w=>{b(g)?w(C):w(v,!1)})}oe(w=>t=Ge(u,1,"",null,t,w),[()=>({"d-none":b(g),"d-md-block":b(g)})],fe),pe("click",S,Fr(()=>Y(E,!0))),$(n,o),Qe()}po(Kc,{target:document.getElementById("app")});
