var on=Object.defineProperty;var an=(n,d,g)=>d in n?on(n,d,{enumerable:!0,configurable:!0,writable:!0,value:g}):n[d]=g;var Ge=(n,d,g)=>an(n,typeof d!="symbol"?d+"":d,g);(function(){const d=document.createElement("link").relList;if(d&&d.supports&&d.supports("modulepreload"))return;for(const x of document.querySelectorAll('link[rel="modulepreload"]'))y(x);new MutationObserver(x=>{for(const D of x)if(D.type==="childList")for(const L of D.addedNodes)L.tagName==="LINK"&&L.rel==="modulepreload"&&y(L)}).observe(document,{childList:!0,subtree:!0});function g(x){const D={};return x.integrity&&(D.integrity=x.integrity),x.referrerPolicy&&(D.referrerPolicy=x.referrerPolicy),x.crossOrigin==="use-credentials"?D.credentials="include":x.crossOrigin==="anonymous"?D.credentials="omit":D.credentials="same-origin",D}function y(x){if(x.ep)return;x.ep=!0;const D=g(x);fetch(x.href,D)}})();const ln="5";var Zi;typeof window<"u"&&((Zi=window.__svelte??(window.__svelte={})).v??(Zi.v=new Set)).add(ln);let Jt=!1,cn=!1;function hn(){Jt=!0}hn();const _i=1,vi=2,Ji=4,dn=8,un=16,fn=1,_n=2,vn=4,pn=8,gn=16,mn=1,Sn=2,bn=4,Yi=1,wn=2,rt=Symbol(),Cn="http://www.w3.org/1999/xhtml",xi=!1;var Yt=Array.isArray,yn=Array.prototype.indexOf,pi=Array.from,En=Object.defineProperty,Gt=Object.getOwnPropertyDescriptor,Qi=Object.getOwnPropertyDescriptors,xn=Object.prototype,kn=Array.prototype,gi=Object.getPrototypeOf,ki=Object.isExtensible;function Ln(n){return typeof n=="function"}const Dt=()=>{};function Dn(n){return n()}function Lr(n){for(var d=0;d<n.length;d++)n[d]()}function Li(n,d){if(Array.isArray(n))return n;if(!(Symbol.iterator in n))return Array.from(n);const g=[];for(const y of n)if(g.push(y),g.length===d)break;return g}const vt=2,es=4,zr=8,Wr=16,Ot=32,Qt=64,Dr=128,nt=256,Rr=512,Je=1024,yt=2048,zt=4096,Bt=8192,Ur=16384,ts=32768,$r=65536,rs=1<<17,Rn=1<<19,is=1<<20,oi=1<<21,Mt=Symbol("$state"),An=Symbol("legacy props"),Tn=Symbol("");function ss(n){return n===this.v}function ns(n,d){return n!=n?d==d:n!==d||n!==null&&typeof n=="object"||typeof n=="function"}function mi(n){return!ns(n,this.v)}function Bn(n){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Mn(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function On(n){throw new Error("https://svelte.dev/e/effect_orphan")}function In(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Pn(n){throw new Error("https://svelte.dev/e/lifecycle_legacy_only")}function Hn(n){throw new Error("https://svelte.dev/e/props_invalid_value")}function Fn(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Nn(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function zn(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function jr(n){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}let be=null;function Di(n){be=n}function Ye(n,d=!1,g){var y=be={p:be,c:null,d:!1,e:null,m:!1,s:n,x:null,l:null};Jt&&!d&&(be.l={s:null,u:null,r1:[],r2:ur(!1)}),_s(()=>{y.d=!0})}function Qe(n){const d=be;if(d!==null){const L=d.e;if(L!==null){var g=ye,y=Ee;d.e=null;try{for(var x=0;x<L.length;x++){var D=L[x];Et(D.effect),pt(D.reaction),tr(D.fn)}}finally{Et(g),pt(y)}}be=d.p,d.m=!0}return{}}function mr(){return!Jt||be!==null&&be.l===null}function Ut(n){if(typeof n!="object"||n===null||Mt in n)return n;const d=gi(n);if(d!==xn&&d!==kn)return n;var g=new Map,y=Yt(n),x=It(0),D=Ee,L=i=>{var o=Ee;pt(D);var h=i();return pt(o),h};return y&&g.set("length",It(n.length)),new Proxy(n,{defineProperty(i,o,h){(!("value"in h)||h.configurable===!1||h.enumerable===!1||h.writable===!1)&&Fn();var _=g.get(o);return _===void 0?(_=L(()=>It(h.value)),g.set(o,_)):J(_,L(()=>Ut(h.value))),!0},deleteProperty(i,o){var h=g.get(o);if(h===void 0)o in i&&(g.set(o,L(()=>It(rt))),Qr(x));else{if(y&&typeof o=="string"){var _=g.get("length"),a=Number(o);Number.isInteger(a)&&a<_.v&&J(_,a)}J(h,rt),Qr(x)}return!0},get(i,o,h){var v;if(o===Mt)return n;var _=g.get(o),a=o in i;if(_===void 0&&(!a||(v=Gt(i,o))!=null&&v.writable)&&(_=L(()=>It(Ut(a?i[o]:rt))),g.set(o,_)),_!==void 0){var l=k(_);return l===rt?void 0:l}return Reflect.get(i,o,h)},getOwnPropertyDescriptor(i,o){var h=Reflect.getOwnPropertyDescriptor(i,o);if(h&&"value"in h){var _=g.get(o);_&&(h.value=k(_))}else if(h===void 0){var a=g.get(o),l=a==null?void 0:a.v;if(a!==void 0&&l!==rt)return{enumerable:!0,configurable:!0,value:l,writable:!0}}return h},has(i,o){var l;if(o===Mt)return!0;var h=g.get(o),_=h!==void 0&&h.v!==rt||Reflect.has(i,o);if(h!==void 0||ye!==null&&(!_||(l=Gt(i,o))!=null&&l.writable)){h===void 0&&(h=L(()=>It(_?Ut(i[o]):rt)),g.set(o,h));var a=k(h);if(a===rt)return!1}return _},set(i,o,h,_){var e;var a=g.get(o),l=o in i;if(y&&o==="length")for(var v=h;v<a.v;v+=1){var S=g.get(v+"");S!==void 0?J(S,rt):v in i&&(S=L(()=>It(rt)),g.set(v+"",S))}a===void 0?(!l||(e=Gt(i,o))!=null&&e.writable)&&(a=L(()=>It(void 0)),J(a,L(()=>Ut(h))),g.set(o,a)):(l=a.v!==rt,J(a,L(()=>Ut(h))));var u=Reflect.getOwnPropertyDescriptor(i,o);if(u!=null&&u.set&&u.set.call(_,h),!l){if(y&&typeof o=="string"){var r=g.get("length"),s=Number(o);Number.isInteger(s)&&s>=r.v&&J(r,s+1)}Qr(x)}return!0},ownKeys(i){k(x);var o=Reflect.ownKeys(i).filter(a=>{var l=g.get(a);return l===void 0||l.v!==rt});for(var[h,_]of g)_.v!==rt&&!(h in i)&&o.push(h);return o},setPrototypeOf(){Nn()}})}function Qr(n,d=1){J(n,n.v+d)}function Ri(n){try{if(n!==null&&typeof n=="object"&&Mt in n)return n[Mt]}catch{}return n}function Wn(n,d){return Object.is(Ri(n),Ri(d))}function Xt(n){var d=vt|yt,g=Ee!==null&&(Ee.f&vt)!==0?Ee:null;return ye===null||g!==null&&(g.f&nt)!==0?d|=nt:ye.f|=is,{ctx:be,deps:null,effects:null,equals:ss,f:d,fn:n,reactions:null,rv:0,v:null,wv:0,parent:g??ye}}function Ai(n){const d=Xt(n);return ws(d),d}function fe(n){const d=Xt(n);return d.equals=mi,d}function os(n){var d=n.effects;if(d!==null){n.effects=null;for(var g=0;g<d.length;g+=1)Nt(d[g])}}function Un(n){for(var d=n.parent;d!==null;){if((d.f&vt)===0)return d;d=d.parent}return null}function as(n){var d,g=ye;Et(Un(n));try{os(n),d=xs(n)}finally{Et(g)}return d}function ls(n){var d=as(n);if(n.equals(d)||(n.v=d,n.wv=ys()),!rr){var g=(Ft||(n.f&nt)!==0)&&n.deps!==null?zt:Je;gt(n,g)}}const dr=new Map;function ur(n,d){var g={f:0,v:n,reactions:null,equals:ss,rv:0,wv:0};return g}function It(n,d){const g=ur(n);return ws(g),g}function ae(n,d=!1){var y;const g=ur(n);return d||(g.equals=mi),Jt&&be!==null&&be.l!==null&&((y=be.l).s??(y.s=[])).push(g),g}function ei(n,d){return J(n,ot(()=>k(n))),d}function J(n,d,g=!1){Ee!==null&&!wt&&mr()&&(Ee.f&(vt|Wr))!==0&&!(Ze!=null&&Ze.includes(n))&&zn();let y=g?Ut(d):d;return fr(n,y)}function fr(n,d){if(!n.equals(d)){var g=n.v;rr?dr.set(n,d):dr.set(n,g),n.v=d,(n.f&vt)!==0&&((n.f&yt)!==0&&as(n),gt(n,(n.f&nt)===0?Je:zt)),n.wv=ys(),cs(n,yt),mr()&&ye!==null&&(ye.f&Je)!==0&&(ye.f&(Ot|Qt))===0&&(ht===null?eo([n]):ht.push(n))}return d}function cs(n,d){var g=n.reactions;if(g!==null)for(var y=mr(),x=g.length,D=0;D<x;D++){var L=g[D],i=L.f;(i&yt)===0&&(!y&&L===ye||(gt(L,d),(i&(Je|nt))!==0&&((i&vt)!==0?cs(L,zt):Zr(L))))}}function $n(){console.warn("https://svelte.dev/e/select_multiple_invalid_value")}let jn=!1;var Ar,hs,ds,us;function qn(){if(Ar===void 0){Ar=window,hs=/Firefox/.test(navigator.userAgent);var n=Element.prototype,d=Node.prototype,g=Text.prototype;ds=Gt(d,"firstChild").get,us=Gt(d,"nextSibling").get,ki(n)&&(n.__click=void 0,n.__className=void 0,n.__attributes=null,n.__style=void 0,n.__e=void 0),ki(g)&&(g.__t=void 0)}}function qr(n=""){return document.createTextNode(n)}function Rt(n){return ds.call(n)}function Kr(n){return us.call(n)}function P(n,d){return Rt(n)}function Be(n,d){{var g=Rt(n);return g instanceof Comment&&g.data===""?Kr(g):g}}function $(n,d=1,g=!1){let y=n;for(;d--;)y=Kr(y);return y}function Kn(n){n.textContent=""}function fs(n){ye===null&&Ee===null&&On(),Ee!==null&&(Ee.f&nt)!==0&&ye===null&&Mn(),rr&&Bn()}function Vn(n,d){var g=d.last;g===null?d.last=d.first=n:(g.next=n,n.prev=g,d.last=n)}function er(n,d,g,y=!0){var x=ye,D={ctx:be,deps:null,nodes_start:null,nodes_end:null,f:n|yt,first:null,fn:d,last:null,next:null,parent:x,prev:null,teardown:null,transitions:null,wv:0};if(g)try{Xr(D),D.f|=ts}catch(o){throw Nt(D),o}else d!==null&&Zr(D);var L=g&&D.deps===null&&D.first===null&&D.nodes_start===null&&D.teardown===null&&(D.f&(is|Dr))===0;if(!L&&y&&(x!==null&&Vn(D,x),Ee!==null&&(Ee.f&vt)!==0)){var i=Ee;(i.effects??(i.effects=[])).push(D)}return D}function _s(n){const d=er(zr,null,!1);return gt(d,Je),d.teardown=n,d}function ai(n){fs();var d=ye!==null&&(ye.f&Ot)!==0&&be!==null&&!be.m;if(d){var g=be;(g.e??(g.e=[])).push({fn:n,effect:ye,reaction:Ee})}else{var y=tr(n);return y}}function Gn(n){return fs(),br(n)}function Xn(n){const d=er(Qt,n,!0);return(g={})=>new Promise(y=>{g.outro?Tr(d,()=>{Nt(d),y(void 0)}):(Nt(d),y(void 0))})}function tr(n){return er(es,n,!1)}function Ct(n,d){var g=be,y={effect:null,ran:!1};g.l.r1.push(y),y.effect=br(()=>{n(),!y.ran&&(y.ran=!0,J(g.l.r2,!0),ot(d))})}function Sr(){var n=be;br(()=>{if(k(n.l.r2)){for(var d of n.l.r1){var g=d.effect;(g.f&Je)!==0&&gt(g,zt),ir(g)&&Xr(g),d.ran=!1}n.l.r2.v=!1}})}function br(n){return er(zr,n,!0)}function ne(n,d=[],g=Xt){const y=d.map(g);return Si(()=>n(...y.map(k)))}function Si(n,d=0){return er(zr|Wr|d,n,!0)}function _r(n,d=!0){return er(zr|Ot,n,!0,d)}function vs(n){var d=n.teardown;if(d!==null){const g=rr,y=Ee;Ti(!0),pt(null);try{d.call(null)}finally{Ti(g),pt(y)}}}function ps(n,d=!1){var g=n.first;for(n.first=n.last=null;g!==null;){var y=g.next;(g.f&Qt)!==0?g.parent=null:Nt(g,d),g=y}}function Zn(n){for(var d=n.first;d!==null;){var g=d.next;(d.f&Ot)===0&&Nt(d),d=g}}function Nt(n,d=!0){var g=!1;(d||(n.f&Rn)!==0)&&n.nodes_start!==null&&(Jn(n.nodes_start,n.nodes_end),g=!0),ps(n,d&&!g),Pr(n,0),gt(n,Ur);var y=n.transitions;if(y!==null)for(const D of y)D.stop();vs(n);var x=n.parent;x!==null&&x.first!==null&&gs(n),n.next=n.prev=n.teardown=n.ctx=n.deps=n.fn=n.nodes_start=n.nodes_end=null}function Jn(n,d){for(;n!==null;){var g=n===d?null:Kr(n);n.remove(),n=g}}function gs(n){var d=n.parent,g=n.prev,y=n.next;g!==null&&(g.next=y),y!==null&&(y.prev=g),d!==null&&(d.first===n&&(d.first=y),d.last===n&&(d.last=g))}function Tr(n,d){var g=[];bi(n,g,!0),ms(g,()=>{Nt(n),d&&d()})}function ms(n,d){var g=n.length;if(g>0){var y=()=>--g||d();for(var x of n)x.out(y)}else d()}function bi(n,d,g){if((n.f&Bt)===0){if(n.f^=Bt,n.transitions!==null)for(const L of n.transitions)(L.is_global||g)&&d.push(L);for(var y=n.first;y!==null;){var x=y.next,D=(y.f&$r)!==0||(y.f&Ot)!==0;bi(y,d,D?g:!1),y=x}}}function Br(n){Ss(n,!0)}function Ss(n,d){if((n.f&Bt)!==0){n.f^=Bt,(n.f&Je)===0&&(n.f^=Je),ir(n)&&(gt(n,yt),Zr(n));for(var g=n.first;g!==null;){var y=g.next,x=(g.f&$r)!==0||(g.f&Ot)!==0;Ss(g,x?d:!1),g=y}if(n.transitions!==null)for(const D of n.transitions)(D.is_global||d)&&D.in()}}let vr=[],li=[];function bs(){var n=vr;vr=[],Lr(n)}function Yn(){var n=li;li=[],Lr(n)}function Vr(n){vr.length===0&&queueMicrotask(bs),vr.push(n)}function Qn(){vr.length>0&&bs(),li.length>0&&Yn()}let xr=!1,Mr=!1,Or=null,$t=!1,rr=!1;function Ti(n){rr=n}let cr=[];let Ee=null,wt=!1;function pt(n){Ee=n}let ye=null;function Et(n){ye=n}let Ze=null;function ws(n){Ee!==null&&Ee.f&oi&&(Ze===null?Ze=[n]:Ze.push(n))}let Xe=null,st=0,ht=null;function eo(n){ht=n}let Cs=1,Ir=0,Ft=!1,Ht=null;function ys(){return++Cs}function ir(n){var a;var d=n.f;if((d&yt)!==0)return!0;if((d&zt)!==0){var g=n.deps,y=(d&nt)!==0;if(g!==null){var x,D,L=(d&Rr)!==0,i=y&&ye!==null&&!Ft,o=g.length;if(L||i){var h=n,_=h.parent;for(x=0;x<o;x++)D=g[x],(L||!((a=D==null?void 0:D.reactions)!=null&&a.includes(h)))&&(D.reactions??(D.reactions=[])).push(h);L&&(h.f^=Rr),i&&_!==null&&(_.f&nt)===0&&(h.f^=nt)}for(x=0;x<o;x++)if(D=g[x],ir(D)&&ls(D),D.wv>n.wv)return!0}(!y||ye!==null&&!Ft)&&gt(n,Je)}return!1}function to(n,d){for(var g=d;g!==null;){if((g.f&Dr)!==0)try{g.fn(n);return}catch{g.f^=Dr}g=g.parent}throw xr=!1,n}function Bi(n){return(n.f&Ur)===0&&(n.parent===null||(n.parent.f&Dr)===0)}function Gr(n,d,g,y){if(xr){if(g===null&&(xr=!1),Bi(d))throw n;return}if(g!==null&&(xr=!0),to(n,d),Bi(d))throw n}function Es(n,d,g=!0){var y=n.reactions;if(y!==null)for(var x=0;x<y.length;x++){var D=y[x];Ze!=null&&Ze.includes(n)||((D.f&vt)!==0?Es(D,d,!1):d===D&&(g?gt(D,yt):(D.f&Je)!==0&&gt(D,zt),Zr(D)))}}function xs(n){var v;var d=Xe,g=st,y=ht,x=Ee,D=Ft,L=Ze,i=be,o=wt,h=n.f;Xe=null,st=0,ht=null,Ft=(h&nt)!==0&&(wt||!$t||Ee===null),Ee=(h&(Ot|Qt))===0?n:null,Ze=null,Di(n.ctx),wt=!1,Ir++,n.f|=oi;try{var _=(0,n.fn)(),a=n.deps;if(Xe!==null){var l;if(Pr(n,st),a!==null&&st>0)for(a.length=st+Xe.length,l=0;l<Xe.length;l++)a[st+l]=Xe[l];else n.deps=a=Xe;if(!Ft)for(l=st;l<a.length;l++)((v=a[l]).reactions??(v.reactions=[])).push(n)}else a!==null&&st<a.length&&(Pr(n,st),a.length=st);if(mr()&&ht!==null&&!wt&&a!==null&&(n.f&(vt|zt|yt))===0)for(l=0;l<ht.length;l++)Es(ht[l],n);return x!==null&&x!==n&&(Ir++,ht!==null&&(y===null?y=ht:y.push(...ht))),_}finally{Xe=d,st=g,ht=y,Ee=x,Ft=D,Ze=L,Di(i),wt=o,n.f^=oi}}function ro(n,d){let g=d.reactions;if(g!==null){var y=yn.call(g,n);if(y!==-1){var x=g.length-1;x===0?g=d.reactions=null:(g[y]=g[x],g.pop())}}g===null&&(d.f&vt)!==0&&(Xe===null||!Xe.includes(d))&&(gt(d,zt),(d.f&(nt|Rr))===0&&(d.f^=Rr),os(d),Pr(d,0))}function Pr(n,d){var g=n.deps;if(g!==null)for(var y=d;y<g.length;y++)ro(n,g[y])}function Xr(n){var d=n.f;if((d&Ur)===0){gt(n,Je);var g=ye,y=be,x=$t;ye=n,$t=!0;try{(d&Wr)!==0?Zn(n):ps(n),vs(n);var D=xs(n);n.teardown=typeof D=="function"?D:null,n.wv=Cs;var L=n.deps,i;xi&&cn&&n.f&yt}catch(o){Gr(o,n,g,y||n.ctx)}finally{$t=x,ye=g}}}function io(){try{In()}catch(n){if(Or!==null)Gr(n,Or,null);else throw n}}function ks(){var n=$t;try{var d=0;for($t=!0;cr.length>0;){d++>1e3&&io();var g=cr,y=g.length;cr=[];for(var x=0;x<y;x++){var D=no(g[x]);so(D)}dr.clear()}}finally{Mr=!1,$t=n,Or=null}}function so(n){var d=n.length;if(d!==0)for(var g=0;g<d;g++){var y=n[g];if((y.f&(Ur|Bt))===0)try{ir(y)&&(Xr(y),y.deps===null&&y.first===null&&y.nodes_start===null&&(y.teardown===null?gs(y):y.fn=null))}catch(x){Gr(x,y,null,y.ctx)}}}function Zr(n){Mr||(Mr=!0,queueMicrotask(ks));for(var d=Or=n;d.parent!==null;){d=d.parent;var g=d.f;if((g&(Qt|Ot))!==0){if((g&Je)===0)return;d.f^=Je}}cr.push(d)}function no(n){for(var d=[],g=n;g!==null;){var y=g.f,x=(y&(Ot|Qt))!==0,D=x&&(y&Je)!==0;if(!D&&(y&Bt)===0){if((y&es)!==0)d.push(g);else if(x)g.f^=Je;else try{ir(g)&&Xr(g)}catch(o){Gr(o,g,null,g.ctx)}var L=g.first;if(L!==null){g=L;continue}}var i=g.parent;for(g=g.next;g===null&&i!==null;)g=i.next,i=i.parent}return d}function oo(n){for(var d;;){if(Qn(),cr.length===0)return d;Mr=!0,ks()}}async function Ls(){await Promise.resolve(),oo()}function k(n){var d=n.f,g=(d&vt)!==0;if(Ht!==null&&Ht.add(n),Ee!==null&&!wt){if(!(Ze!=null&&Ze.includes(n))){var y=Ee.deps;n.rv<Ir&&(n.rv=Ir,Xe===null&&y!==null&&y[st]===n?st++:Xe===null?Xe=[n]:(!Ft||!Xe.includes(n))&&Xe.push(n))}}else if(g&&n.deps===null&&n.effects===null){var x=n,D=x.parent;D!==null&&(D.f&nt)===0&&(x.f^=nt)}return g&&(x=n,ir(x)&&ls(x)),rr&&dr.has(n)?dr.get(n):n.v}function ao(n){var d=Ht;Ht=new Set;var g=Ht,y;try{if(ot(n),d!==null)for(y of Ht)d.add(y)}finally{Ht=d}return g}function lo(n){var d=ao(()=>ot(n));for(var g of d)if((g.f&rs)!==0)for(const y of g.deps||[])(y.f&vt)===0&&fr(y,y.v);else fr(g,g.v)}function ot(n){var d=wt;try{return wt=!0,n()}finally{wt=d}}const co=-7169;function gt(n,d){n.f=n.f&co|d}function Lt(n){if(!(typeof n!="object"||!n||n instanceof EventTarget)){if(Mt in n)ci(n);else if(!Array.isArray(n))for(let d in n){const g=n[d];typeof g=="object"&&g&&Mt in g&&ci(g)}}}function ci(n,d=new Set){if(typeof n=="object"&&n!==null&&!(n instanceof EventTarget)&&!d.has(n)){d.add(n),n instanceof Date&&n.getTime();for(let y in n)try{ci(n[y],d)}catch{}const g=gi(n);if(g!==Object.prototype&&g!==Array.prototype&&g!==Map.prototype&&g!==Set.prototype&&g!==Date.prototype){const y=Qi(g);for(let x in y){const D=y[x].get;if(D)try{D.call(n)}catch{}}}}}let Mi=!1;function ho(){Mi||(Mi=!0,document.addEventListener("reset",n=>{Promise.resolve().then(()=>{var d;if(!n.defaultPrevented)for(const g of n.target.elements)(d=g.__on_r)==null||d.call(g)})},{capture:!0}))}function wi(n){var d=Ee,g=ye;pt(null),Et(null);try{return n()}finally{pt(d),Et(g)}}function Ds(n,d,g,y=g){n.addEventListener(d,()=>wi(g));const x=n.__on_r;x?n.__on_r=()=>{x(),y(!0)}:n.__on_r=()=>y(!0),ho()}const uo=new Set,Oi=new Set;function fo(n,d,g,y={}){function x(D){if(y.capture||lr.call(d,D),!D.cancelBubble)return wi(()=>g==null?void 0:g.call(this,D))}return n.startsWith("pointer")||n.startsWith("touch")||n==="wheel"?Vr(()=>{d.addEventListener(n,x,y)}):d.addEventListener(n,x,y),x}function ve(n,d,g,y,x){var D={capture:y,passive:x},L=fo(n,d,g,D);(d===document.body||d===window||d===document||d instanceof HTMLMediaElement)&&_s(()=>{d.removeEventListener(n,L,D)})}function lr(n){var e;var d=this,g=d.ownerDocument,y=n.type,x=((e=n.composedPath)==null?void 0:e.call(n))||[],D=x[0]||n.target,L=0,i=n.__root;if(i){var o=x.indexOf(i);if(o!==-1&&(d===document||d===window)){n.__root=d;return}var h=x.indexOf(d);if(h===-1)return;o<=h&&(L=o)}if(D=x[L]||n.target,D!==d){En(n,"currentTarget",{configurable:!0,get(){return D||g}});var _=Ee,a=ye;pt(null),Et(null);try{for(var l,v=[];D!==null;){var S=D.assignedSlot||D.parentNode||D.host||null;try{var u=D["__"+y];if(u!=null&&(!D.disabled||n.target===D))if(Yt(u)){var[r,...s]=u;r.apply(D,[n,...s])}else u.call(D,n)}catch(t){l?v.push(t):l=t}if(n.cancelBubble||S===d||S===null)break;D=S}if(l){for(let t of v)queueMicrotask(()=>{throw t});throw l}}finally{n.__root=d,delete n.currentTarget,pt(_),Et(a)}}}function Rs(n){var d=document.createElement("template");return d.innerHTML=n.replaceAll("<!>","<!---->"),d.content}function Zt(n,d){var g=ye;g.nodes_start===null&&(g.nodes_start=n,g.nodes_end=d)}function Z(n,d){var g=(d&Yi)!==0,y=(d&wn)!==0,x,D=!n.startsWith("<!>");return()=>{x===void 0&&(x=Rs(D?n:"<!>"+n),g||(x=Rt(x)));var L=y||hs?document.importNode(x,!0):x.cloneNode(!0);if(g){var i=Rt(L),o=L.lastChild;Zt(i,o)}else Zt(L,L);return L}}function _o(n,d,g="svg"){var y=!n.startsWith("<!>"),x=(d&Yi)!==0,D=`<${g}>${y?n:"<!>"+n}</${g}>`,L;return()=>{if(!L){var i=Rs(D),o=Rt(i);if(x)for(L=document.createDocumentFragment();Rt(o);)L.appendChild(Rt(o));else L=Rt(o)}var h=L.cloneNode(!0);if(x){var _=Rt(h),a=h.lastChild;Zt(_,a)}else Zt(h,h);return h}}function jt(n,d){return _o(n,d,"svg")}function ut(n=""){{var d=qr(n+"");return Zt(d,d),d}}function sr(){var n=document.createDocumentFragment(),d=document.createComment(""),g=qr();return n.append(d,g),Zt(d,g),n}function j(n,d){n!==null&&n.before(d)}const vo=["touchstart","touchmove"];function po(n){return vo.includes(n)}let hi=!0;function ie(n,d){var g=d==null?"":typeof d=="object"?d+"":d;g!==(n.__t??(n.__t=n.nodeValue))&&(n.__t=g,n.nodeValue=g+"")}function go(n,d){return mo(n,d)}const qt=new Map;function mo(n,{target:d,anchor:g,props:y={},events:x,context:D,intro:L=!0}){qn();var i=new Set,o=a=>{for(var l=0;l<a.length;l++){var v=a[l];if(!i.has(v)){i.add(v);var S=po(v);d.addEventListener(v,lr,{passive:S});var u=qt.get(v);u===void 0?(document.addEventListener(v,lr,{passive:S}),qt.set(v,1)):qt.set(v,u+1)}}};o(pi(uo)),Oi.add(o);var h=void 0,_=Xn(()=>{var a=g??d.appendChild(qr());return _r(()=>{if(D){Ye({});var l=be;l.c=D}x&&(y.$$events=x),hi=L,h=n(a,y)||{},hi=!0,D&&Qe()}),()=>{var S;for(var l of i){d.removeEventListener(l,lr);var v=qt.get(l);--v===0?(document.removeEventListener(l,lr),qt.delete(l)):qt.set(l,v)}Oi.delete(o),a!==g&&((S=a.parentNode)==null||S.removeChild(a))}});return So.set(h,_),h}let So=new WeakMap;function at(n){be===null&&jr(),Jt&&be.l!==null?Ts(be).m.push(n):ai(()=>{const d=ot(n);if(typeof d=="function")return d})}function Wt(n){be===null&&jr(),at(()=>()=>ot(n))}function bo(n,d,{bubbles:g=!1,cancelable:y=!1}={}){return new CustomEvent(n,{detail:d,bubbles:g,cancelable:y})}function As(){const n=be;return n===null&&jr(),(d,g,y)=>{var D;const x=(D=n.s.$$events)==null?void 0:D[d];if(x){const L=Yt(x)?x.slice():[x],i=bo(d,g,y);for(const o of L)o.call(n.x,i);return!i.defaultPrevented}return!0}}function wr(n){be===null&&jr(),be.l===null&&Pn(),Ts(be).b.push(n)}function Ts(n){var d=n.l;return d.u??(d.u={a:[],b:[],m:[]})}function ee(n,d,[g,y]=[0,0]){var x=n,D=null,L=null,i=rt,o=g>0?$r:0,h=!1;const _=(l,v=!0)=>{h=!0,a(v,l)},a=(l,v)=>{i!==(i=l)&&(i?(D?Br(D):v&&(D=_r(()=>v(x))),L&&Tr(L,()=>{L=null})):(L?Br(L):v&&(L=_r(()=>v(x,[g+1,y]))),D&&Tr(D,()=>{D=null})))};Si(()=>{h=!1,d(_),h||a(null,null)},o)}function ft(n,d){return d}function wo(n,d,g,y){for(var x=[],D=d.length,L=0;L<D;L++)bi(d[L].e,x,!0);var i=D>0&&x.length===0&&g!==null;if(i){var o=g.parentNode;Kn(o),o.append(g),y.clear(),Pt(n,d[0].prev,d[D-1].next)}ms(x,()=>{for(var h=0;h<D;h++){var _=d[h];i||(y.delete(_.k),Pt(n,_.prev,_.next)),Nt(_.e,!i)}})}function _t(n,d,g,y,x,D=null){var L=n,i={flags:d,items:new Map,first:null},o=(d&Ji)!==0;if(o){var h=n;L=h.appendChild(qr())}var _=null,a=!1,l=fe(()=>{var v=g();return Yt(v)?v:v==null?[]:pi(v)});Si(()=>{var v=k(l),S=v.length;a&&S===0||(a=S===0,Co(v,i,L,x,d,y,g),D!==null&&(S===0?_?Br(_):_=_r(()=>D(L)):_!==null&&Tr(_,()=>{_=null})),k(l))})}function Co(n,d,g,y,x,D,L){var N,U,K,Y;var i=(x&dn)!==0,o=(x&(_i|vi))!==0,h=n.length,_=d.items,a=d.first,l=a,v,S=null,u,r=[],s=[],e,t,c,p;if(i)for(p=0;p<h;p+=1)e=n[p],t=D(e,p),c=_.get(t),c!==void 0&&((N=c.a)==null||N.measure(),(u??(u=new Set)).add(c));for(p=0;p<h;p+=1){if(e=n[p],t=D(e,p),c=_.get(t),c===void 0){var m=l?l.e.nodes_start:g;S=Eo(m,d,S,S===null?d.first:S.next,e,t,p,y,x,L),_.set(t,S),r=[],s=[],l=S.next;continue}if(o&&yo(c,e,p,x),(c.e.f&Bt)!==0&&(Br(c.e),i&&((U=c.a)==null||U.unfix(),(u??(u=new Set)).delete(c))),c!==l){if(v!==void 0&&v.has(c)){if(r.length<s.length){var b=s[0],f;S=b.prev;var w=r[0],A=r[r.length-1];for(f=0;f<r.length;f+=1)Ii(r[f],b,g);for(f=0;f<s.length;f+=1)v.delete(s[f]);Pt(d,w.prev,A.next),Pt(d,S,w),Pt(d,A,b),l=b,S=A,p-=1,r=[],s=[]}else v.delete(c),Ii(c,l,g),Pt(d,c.prev,c.next),Pt(d,c,S===null?d.first:S.next),Pt(d,S,c),S=c;continue}for(r=[],s=[];l!==null&&l.k!==t;)(l.e.f&Bt)===0&&(v??(v=new Set)).add(l),s.push(l),l=l.next;if(l===null)continue;c=l}r.push(c),S=c,l=c.next}if(l!==null||v!==void 0){for(var R=v===void 0?[]:pi(v);l!==null;)(l.e.f&Bt)===0&&R.push(l),l=l.next;var O=R.length;if(O>0){var T=(x&Ji)!==0&&h===0?g:null;if(i){for(p=0;p<O;p+=1)(K=R[p].a)==null||K.measure();for(p=0;p<O;p+=1)(Y=R[p].a)==null||Y.fix()}wo(d,R,T,_)}}i&&Vr(()=>{var G;if(u!==void 0)for(c of u)(G=c.a)==null||G.apply()}),ye.first=d.first&&d.first.e,ye.last=S&&S.e}function yo(n,d,g,y){(y&_i)!==0&&fr(n.v,d),(y&vi)!==0?fr(n.i,g):n.i=g}function Eo(n,d,g,y,x,D,L,i,o,h){var _=(o&_i)!==0,a=(o&un)===0,l=_?a?ae(x):ur(x):x,v=(o&vi)===0?L:ur(L),S={i:v,v:l,k:D,a:null,e:null,prev:g,next:y};try{return S.e=_r(()=>i(n,l,v,h),jn),S.e.prev=g&&g.e,S.e.next=y&&y.e,g===null?d.first=S:(g.next=S,g.e.next=S.e),y!==null&&(y.prev=S,y.e.prev=S.e),S}finally{}}function Ii(n,d,g){for(var y=n.next?n.next.e.nodes_start:g,x=d?d.e.nodes_start:g,D=n.e.nodes_start;D!==y;){var L=Kr(D);x.before(D),D=L}}function Pt(n,d,g){d===null?n.first=g:(d.next=g,d.e.next=g&&g.e),g!==null&&(g.prev=d,g.e.prev=d&&d.e)}function Hr(n,d,g,y,x){var i;var D=(i=d.$$slots)==null?void 0:i[g],L=!1;D===!0&&(D=d[g==="default"?"children":g],L=!0),D===void 0?x!==null&&x(n):D(n,L?()=>y:y)}const Pi=[...` 	
\r\fÂ \v\uFEFF`];function xo(n,d,g){var y=n==null?"":""+n;if(d&&(y=y?y+" "+d:d),g){for(var x in g)if(g[x])y=y?y+" "+x:x;else if(y.length)for(var D=x.length,L=0;(L=y.indexOf(x,L))>=0;){var i=L+D;(L===0||Pi.includes(y[L-1]))&&(i===y.length||Pi.includes(y[i]))?y=(L===0?"":y.substring(0,L))+y.substring(i+1):L=i}}return y===""?null:y}function ko(n,d){return n==null?null:String(n)}function qe(n,d,g,y,x,D){var L=n.__className;if(L!==g||L===void 0){var i=xo(g,y,D);i==null?n.removeAttribute("class"):d?n.className=i:n.setAttribute("class",i),n.__className=g}else if(D&&x!==D)for(var o in D){var h=!!D[o];(x==null||h!==!!x[o])&&n.classList.toggle(o,h)}return D}function kr(n,d,g,y){var x=n.__style;if(x!==d){var D=ko(d);D==null?n.removeAttribute("style"):n.style.cssText=D,n.__style=d}return y}function Bs(n,d,g){if(n.multiple){if(d==null)return;if(!Yt(d))return $n();for(var y of n.options)y.selected=d.includes(hr(y));return}for(y of n.options){var x=hr(y);if(Wn(x,d)){y.selected=!0;return}}(!g||d!==void 0)&&(n.selectedIndex=-1)}function Lo(n,d){tr(()=>{var g=new MutationObserver(()=>{var y=n.__value;Bs(n,y)});return g.observe(n,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{g.disconnect()}})}function Do(n,d,g=d){var y=!0;Ds(n,"change",x=>{var D=x?"[selected]":":checked",L;if(n.multiple)L=[].map.call(n.querySelectorAll(D),hr);else{var i=n.querySelector(D)??n.querySelector("option:not([disabled])");L=i&&hr(i)}g(L)}),tr(()=>{var x=d();if(Bs(n,x,y),y&&x===void 0){var D=n.querySelector(":checked");D!==null&&(x=hr(D),g(x))}n.__value=x,y=!1}),Lo(n)}function hr(n){return"__value"in n?n.__value:n.value}const Ro=Symbol("is custom element"),Ao=Symbol("is html");function To(n,d){var g=Ms(n);g.value===(g.value=d??void 0)||n.value===d&&(d!==0||n.nodeName!=="PROGRESS")||(n.value=d??"")}function Pe(n,d,g,y){var x=Ms(n);x[d]!==(x[d]=g)&&(d==="loading"&&(n[Tn]=g),g==null?n.removeAttribute(d):typeof g!="string"&&Bo(n).includes(d)?n[d]=g:n.setAttribute(d,g))}function Ms(n){return n.__attributes??(n.__attributes={[Ro]:n.nodeName.includes("-"),[Ao]:n.namespaceURI===Cn})}var Hi=new Map;function Bo(n){var d=Hi.get(n.nodeName);if(d)return d;Hi.set(n.nodeName,d=[]);for(var g,y=n,x=Element.prototype;x!==y;){g=Qi(y);for(var D in g)g[D].set&&d.push(D);y=gi(y)}return d}const Mo=()=>performance.now(),At={tick:n=>requestAnimationFrame(n),now:()=>Mo(),tasks:new Set};function Os(){const n=At.now();At.tasks.forEach(d=>{d.c(n)||(At.tasks.delete(d),d.f())}),At.tasks.size!==0&&At.tick(Os)}function Oo(n){let d;return At.tasks.size===0&&At.tick(Os),{promise:new Promise(g=>{At.tasks.add(d={c:n,f:g})}),abort(){At.tasks.delete(d)}}}function Cr(n,d){wi(()=>{n.dispatchEvent(new CustomEvent(d))})}function Io(n){if(n==="float")return"cssFloat";if(n==="offset")return"cssOffset";if(n.startsWith("--"))return n;const d=n.split("-");return d.length===1?d[0]:d[0]+d.slice(1).map(g=>g[0].toUpperCase()+g.slice(1)).join("")}function Fi(n){const d={},g=n.split(";");for(const y of g){const[x,D]=y.split(":");if(!x||D===void 0)break;const L=Io(x.trim());d[L]=D.trim()}return d}const Po=n=>n;function dt(n,d,g,y){var x=(n&mn)!==0,D=(n&Sn)!==0,L=x&&D,i=(n&bn)!==0,o=L?"both":x?"in":"out",h,_=d.inert,a=d.style.overflow,l,v;function S(){var t=Ee,c=ye;pt(null),Et(null);try{return h??(h=g()(d,(y==null?void 0:y())??{},{direction:o}))}finally{pt(t),Et(c)}}var u={is_global:i,in(){var t;if(d.inert=_,!x){v==null||v.abort(),(t=v==null?void 0:v.reset)==null||t.call(v);return}D||l==null||l.abort(),Cr(d,"introstart"),l=di(d,S(),v,1,()=>{Cr(d,"introend"),l==null||l.abort(),l=h=void 0,d.style.overflow=a})},out(t){if(!D){t==null||t(),h=void 0;return}d.inert=!0,Cr(d,"outrostart"),v=di(d,S(),l,0,()=>{Cr(d,"outroend"),t==null||t()})},stop:()=>{l==null||l.abort(),v==null||v.abort()}},r=ye;if((r.transitions??(r.transitions=[])).push(u),x&&hi){var s=i;if(!s){for(var e=r.parent;e&&(e.f&$r)!==0;)for(;(e=e.parent)&&(e.f&Wr)===0;);s=!e||(e.f&ts)!==0}s&&tr(()=>{ot(()=>u.in())})}}function di(n,d,g,y,x){var D=y===1;if(Ln(d)){var L,i=!1;return Vr(()=>{if(!i){var r=d({direction:D?"in":"out"});L=di(n,r,g,y,x)}}),{abort:()=>{i=!0,L==null||L.abort()},deactivate:()=>L.deactivate(),reset:()=>L.reset(),t:()=>L.t()}}if(g==null||g.deactivate(),!(d!=null&&d.duration))return x(),{abort:Dt,deactivate:Dt,reset:Dt,t:()=>y};const{delay:o=0,css:h,tick:_,easing:a=Po}=d;var l=[];if(D&&g===void 0&&(_&&_(0,1),h)){var v=Fi(h(0,1));l.push(v,v)}var S=()=>1-y,u=n.animate(l,{duration:o,fill:"forwards"});return u.onfinish=()=>{u.cancel();var r=(g==null?void 0:g.t())??1-y;g==null||g.abort();var s=y-r,e=d.duration*Math.abs(s),t=[];if(e>0){var c=!1;if(h)for(var p=Math.ceil(e/16.666666666666668),m=0;m<=p;m+=1){var b=r+s*a(m/p),f=Fi(h(b,1-b));t.push(f),c||(c=f.overflow==="hidden")}c&&(n.style.overflow="hidden"),S=()=>{var w=u.currentTime;return r+s*a(w/e)},_&&Oo(()=>{if(u.playState!=="running")return!1;var w=S();return _(w,1-w),!0})}u=n.animate(t,{duration:e,fill:"forwards"}),u.onfinish=()=>{S=()=>y,_==null||_(y,1-y),x()}},{abort:()=>{u&&(u.cancel(),u.effect=null,u.onfinish=Dt)},deactivate:()=>{x=Dt},reset:()=>{y===0&&(_==null||_(1,0))},t:()=>S()}}function Fr(n,d,g=d){var y=mr();Ds(n,"input",x=>{var D=x?n.defaultValue:n.value;if(D=ti(n)?ri(D):D,g(D),y&&D!==(D=d())){var L=n.selectionStart,i=n.selectionEnd;n.value=D??"",i!==null&&(n.selectionStart=L,n.selectionEnd=Math.min(i,n.value.length))}}),ot(d)==null&&n.value&&g(ti(n)?ri(n.value):n.value),br(()=>{var x=d();ti(n)&&x===ri(n.value)||n.type==="date"&&!x&&!n.value||x!==n.value&&(n.value=x??"")})}function ti(n){var d=n.type;return d==="number"||d==="range"}function ri(n){return n===""?null:+n}function Ni(n,d){return n===d||(n==null?void 0:n[Mt])===d}function Jr(n={},d,g,y){return tr(()=>{var x,D;return br(()=>{x=D,D=[],ot(()=>{n!==g(...D)&&(d(n,...D),x&&Ni(g(...x),n)&&d(null,...x))})}),()=>{Vr(()=>{D&&Ni(g(...D),n)&&d(null,...D)})}}),n}function Nr(n){return function(...d){var g=d[0];return g.preventDefault(),n==null?void 0:n.apply(this,d)}}function it(n=!1){const d=be,g=d.l.u;if(!g)return;let y=()=>Lt(d.s);if(n){let x=0,D={};const L=Xt(()=>{let i=!1;const o=d.s;for(const h in o)o[h]!==D[h]&&(D[h]=o[h],i=!0);return i&&x++,x});y=()=>k(L)}g.b.length&&Gn(()=>{zi(d,y),Lr(g.b)}),ai(()=>{const x=ot(()=>g.m.map(Dn));return()=>{for(const D of x)typeof D=="function"&&D()}}),g.a.length&&ai(()=>{zi(d,y),Lr(g.a)})}function zi(n,d){if(n.l.s)for(const g of n.l.s)k(g);d()}function Ho(n,d){var D;var g=(D=n.$$events)==null?void 0:D[d.type],y=Yt(g)?g.slice():g==null?[]:[g];for(var x of y)x.call(this,d)}function Fo(n,d,g){if(n==null)return d(void 0),Dt;const y=ot(()=>n.subscribe(d,g));return y.unsubscribe?()=>y.unsubscribe():y}const Kt=[];function No(n,d=Dt){let g=null;const y=new Set;function x(i){if(ns(n,i)&&(n=i,g)){const o=!Kt.length;for(const h of y)h[1](),Kt.push(h,n);if(o){for(let h=0;h<Kt.length;h+=2)Kt[h][0](Kt[h+1]);Kt.length=0}}}function D(i){x(i(n))}function L(i,o=Dt){const h=[i,o];return y.add(h),y.size===1&&(g=d(x,D)||Dt),i(n),()=>{y.delete(h),y.size===0&&g&&(g(),g=null)}}return{set:x,update:D,subscribe:L}}function zo(n){let d;return Fo(n,g=>d=g)(),d}let yr=!1;function Wo(n){var d=yr;try{return yr=!1,[n(),yr]}finally{yr=d}}function Wi(n){var d;return((d=n.ctx)==null?void 0:d.d)??!1}function he(n,d,g,y){var b;var x=(g&fn)!==0,D=!Jt||(g&_n)!==0,L=(g&pn)!==0,i=(g&gn)!==0,o=!1,h;L?[h,o]=Wo(()=>n[d]):h=n[d];var _=Mt in n||An in n,a=L&&(((b=Gt(n,d))==null?void 0:b.set)??(_&&d in n&&(f=>n[d]=f)))||void 0,l=y,v=!0,S=!1,u=()=>(S=!0,v&&(v=!1,i?l=ot(y):l=y),l);h===void 0&&y!==void 0&&(a&&D&&Hn(),h=u(),a&&a(h));var r;if(D)r=()=>{var f=n[d];return f===void 0?u():(v=!0,S=!1,f)};else{var s=(x?Xt:fe)(()=>n[d]);s.f|=rs,r=()=>{var f=k(s);return f!==void 0&&(l=void 0),f===void 0?l:f}}if((g&vn)===0&&D)return r;if(a){var e=n.$$legacy;return function(f,w){return arguments.length>0?((!D||!w||e||o)&&a(w?r():f),f):r()}}var t=!1,c=!1,p=ae(h),m=Xt(()=>{var f=r(),w=k(p);return t?(t=!1,c=!0,w):(c=!1,p.v=f)});return L&&k(m),x||(m.equals=mi),function(f,w){if(Ht!==null&&(t=c,r(),k(p)),arguments.length>0){const A=w?k(m):D&&L?Ut(f):f;if(!m.equals(A)){if(t=!0,J(p,A),S&&l!==void 0&&(l=A),Wi(m))return f;ot(()=>k(m))}return f}return Wi(m)?m.v:k(m)}}const Uo=10,$o=function(){let n=No([]);return setInterval(()=>{let d=zo(n);const g=Math.floor(new Date().getTime()/1e3),y=d.filter(x=>x.created_at+Uo>g);y.length!==d.length&&n.set(y)},1e3),{add(d){n.update(g=>[...g,{...d,created_at:Math.floor(new Date().getTime()/1e3)}])},remove(d){n.update(g=>g.filter(y=>y.created_at!==d.created_at||y.type!==d.type||y.text!==d.text))},subscribe:n.subscribe}},De=$o();function Is(n){const d=n-1;return d*d*d+1}function jo(n){return n<.5?4*n*n*n:.5*Math.pow(2*n-2,3)+1}function ui(n){const d=typeof n=="string"&&n.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return d?[parseFloat(d[1]),d[2]||"px"]:[n,"px"]}function qo(n,{delay:d=0,duration:g=400,easing:y=jo,amount:x=5,opacity:D=0}={}){const L=getComputedStyle(n),i=+L.opacity,o=L.filter==="none"?"":L.filter,h=i*(1-D),[_,a]=ui(x);return{delay:d,duration:g,easing:y,css:(l,v)=>`opacity: ${i-h*v}; filter: ${o} blur(${v*_}${a});`}}function Ui(n,{delay:d=0,duration:g=400,easing:y=Is,x=0,y:D=0,opacity:L=0}={}){const i=getComputedStyle(n),o=+i.opacity,h=i.transform==="none"?"":i.transform,_=o*(1-L),[a,l]=ui(x),[v,S]=ui(D);return{delay:d,duration:g,easing:y,css:(u,r)=>`
			transform: ${h} translate(${(1-u)*a}${l}, ${(1-u)*v}${S});
			opacity: ${o-_*r}`}}function Tt(n,{delay:d=0,duration:g=400,easing:y=Is,axis:x="y"}={}){const D=getComputedStyle(n),L=+D.opacity,i=x==="y"?"height":"width",o=parseFloat(D[i]),h=x==="y"?["top","bottom"]:["left","right"],_=h.map(s=>`${s[0].toUpperCase()}${s.slice(1)}`),a=parseFloat(D[`padding${_[0]}`]),l=parseFloat(D[`padding${_[1]}`]),v=parseFloat(D[`margin${_[0]}`]),S=parseFloat(D[`margin${_[1]}`]),u=parseFloat(D[`border${_[0]}Width`]),r=parseFloat(D[`border${_[1]}Width`]);return{delay:d,duration:g,easing:y,css:s=>`overflow: hidden;opacity: ${Math.min(s*20,1)*L};${i}: ${s*o}px;padding-${h[0]}: ${s*a}px;padding-${h[1]}: ${s*l}px;margin-${h[0]}: ${s*v}px;margin-${h[1]}: ${s*S}px;border-${h[0]}-width: ${s*u}px;border-${h[1]}-width: ${s*r}px;min-${i}: 0`}}var Ko=Z('<div><div class="d-flex"><div class="toast-body"> </div> <button type="button" class="btn-close btn-close-white me-2 m-auto" aria-label="remove message"></button></div></div>'),Vo=Z('<div class="position-fixed bottom-0 end-0 p-3" style="z-index: 470"></div>');function Go(n,d){Ye(d,!1);let g=ae([]);at(()=>{De.subscribe(x=>J(g,x))}),it();var y=Vo();_t(y,5,()=>k(g),ft,(x,D)=>{var L=Ko();let i;var o=P(L),h=P(o),_=P(h),a=$(h,2);ne(l=>{i=qe(L,1,"toast show align-items-center text-white border-0 mb-2",null,i,l),ie(_,k(D).text)},[()=>({"bg-danger":k(D).type==="error","bg-warning":k(D).type==="warning","bg-success":k(D).type==="success","bg-primary":k(D).type==="info"})],fe),ve("click",a,()=>De.remove(k(D))),dt(3,L,()=>Tt),j(x,L)}),j(n,y),Qe()}function $i(n,d){d&&d!=="lg"&&d!=="sm"&&d!=="xs"?n.style.fontSize=d.replace("x","em"):n.style.fontSize=""}function Xo(n,d,g,y,x,D=1,L="",i=""){let o=1,h=1;x&&(x=="horizontal"?o=-1:x=="vertical"?h=-1:o=h=-1),typeof n=="string"&&(n=parseFloat(n)),typeof d=="string"&&(d=parseFloat(d)),typeof g=="string"&&(g=parseFloat(g));const _=`${d*D}${L}`,a=`${g*D}${L}`;let l=`translate(${_},${a}) scale(${o*n},${h*n})`;return y&&(l+=` rotate(${y}${i})`),l}var Zo=jt('<title class="svelte-bvo74f"> </title>'),Jo=jt('<path class="svelte-bvo74f"></path>'),Yo=jt('<path class="svelte-bvo74f"></path><path class="svelte-bvo74f"></path>',1),Qo=jt('<svg role="img" xmlns="http://www.w3.org/2000/svg"><!><g class="svelte-bvo74f"><g class="svelte-bvo74f"><!></g></g></svg>');function de(n,d){Ye(d,!1);const g=ae(),y=ae();let x=he(d,"class",24,()=>{}),D=he(d,"id",24,()=>{}),L=he(d,"style",24,()=>{}),i=he(d,"icon",8),o=he(d,"title",24,()=>{}),h=he(d,"size",24,()=>{}),_=he(d,"color",24,()=>{}),a=he(d,"fw",8,!1),l=he(d,"pull",24,()=>{}),v=he(d,"scale",8,1),S=he(d,"translateX",8,0),u=he(d,"translateY",8,0),r=he(d,"rotate",24,()=>{}),s=he(d,"flip",24,()=>{}),e=he(d,"spin",8,!1),t=he(d,"pulse",8,!1),c=he(d,"primaryColor",8,""),p=he(d,"secondaryColor",8,""),m=he(d,"primaryOpacity",8,1),b=he(d,"secondaryOpacity",8,.4),f=he(d,"swapOpacity",8,!1),w=ae();Ct(()=>(k(w),Lt(h()),$i),()=>{k(w)&&h()&&$i(k(w),h())}),Ct(()=>Lt(i()),()=>{J(g,i()&&i().icon||[0,0,"",[],""])}),Ct(()=>(Lt(v()),Lt(S()),Lt(u()),Lt(r()),Lt(s())),()=>{J(y,Xo(v(),S(),u(),r(),s(),512))}),Sr(),it();var A=sr(),R=Be(A);{var O=T=>{var N=Qo();let U;var K=P(N);{var Y=z=>{var q=Zo(),Q=P(q);ne(()=>ie(Q,o())),j(z,q)};ee(K,z=>{o()&&z(Y)})}var G=$(K),C=P(G),B=P(C);{var M=z=>{var q=Jo();ne(()=>{Pe(q,"d",k(g)[4]),Pe(q,"fill",_()||c()||"currentColor"),Pe(q,"transform",`translate(${k(g)[0]/-2} ${k(g)[1]/-2})`)}),j(z,q)},I=z=>{var q=Yo(),Q=Be(q),te=$(Q);ne(()=>{Pe(Q,"d",k(g)[4][0]),Pe(Q,"fill",p()||_()||"currentColor"),Pe(Q,"fill-opacity",f()!=!1?m():b()),Pe(Q,"transform",`translate(${k(g)[0]/-2} ${k(g)[1]/-2})`),Pe(te,"d",k(g)[4][1]),Pe(te,"fill",c()||_()||"currentColor"),Pe(te,"fill-opacity",f()!=!1?b():m()),Pe(te,"transform",`translate(${k(g)[0]/-2} ${k(g)[1]/-2})`)}),j(z,q)};ee(B,z=>{typeof k(g)[4]=="string"?z(M):z(I,!1)})}Jr(N,z=>J(w,z),()=>k(w)),ne(z=>{Pe(N,"id",D()),U=qe(N,0,`svelte-fa svelte-fa-base ${x()??""}`,"svelte-bvo74f",U,z),kr(N,L()),Pe(N,"viewBox",`0 0 ${k(g)[0]??""} ${k(g)[1]??""}`),Pe(N,"aria-hidden",o()===void 0),Pe(G,"transform",`translate(${k(g)[0]/2} ${k(g)[1]/2})`),Pe(G,"transform-origin",`${k(g)[0]/4} 0`),Pe(C,"transform",k(y))},[()=>({pulse:t(),"svelte-fa-size-lg":h()==="lg","svelte-fa-size-sm":h()==="sm","svelte-fa-size-xs":h()==="xs","svelte-fa-fw":a(),"svelte-fa-pull-left":l()==="left","svelte-fa-pull-right":l()==="right",spin:e()})],fe),j(T,N)};ee(R,T=>{k(g)[4]&&T(O)})}j(n,A),Qe()}/*!
 * Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2024 Fonticons, Inc.
 */const ea={prefix:"fas",iconName:"right-from-bracket",icon:[512,512,["sign-out-alt"],"f2f5","M377.9 105.9L500.7 228.7c7.2 7.2 11.3 17.1 11.3 27.3s-4.1 20.1-11.3 27.3L377.9 406.1c-6.4 6.4-15 9.9-24 9.9c-18.7 0-33.9-15.2-33.9-33.9l0-62.1-128 0c-17.7 0-32-14.3-32-32l0-64c0-17.7 14.3-32 32-32l128 0 0-62.1c0-18.7 15.2-33.9 33.9-33.9c9 0 17.6 3.6 24 9.9zM160 96L96 96c-17.7 0-32 14.3-32 32l0 256c0 17.7 14.3 32 32 32l64 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-64 0c-53 0-96-43-96-96L0 128C0 75 43 32 96 32l64 0c17.7 0 32 14.3 32 32s-14.3 32-32 32z"]},ta=ea,ra={prefix:"fas",iconName:"laptop-code",icon:[640,512,[],"f5fc","M64 96c0-35.3 28.7-64 64-64l384 0c35.3 0 64 28.7 64 64l0 256-64 0 0-256L128 96l0 256-64 0L64 96zM0 403.2C0 392.6 8.6 384 19.2 384l601.6 0c10.6 0 19.2 8.6 19.2 19.2c0 42.4-34.4 76.8-76.8 76.8L76.8 480C34.4 480 0 445.6 0 403.2zM281 209l-31 31 31 31c9.4 9.4 9.4 24.6 0 33.9s-24.6 9.4-33.9 0l-48-48c-9.4-9.4-9.4-24.6 0-33.9l48-48c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9zM393 175l48 48c9.4 9.4 9.4 24.6 0 33.9l-48 48c-9.4 9.4-24.6 9.4-33.9 0s-9.4-24.6 0-33.9l31-31-31-31c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0z"]},ia={prefix:"fas",iconName:"bars",icon:[448,512,["navicon"],"f0c9","M0 96C0 78.3 14.3 64 32 64l384 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L32 128C14.3 128 0 113.7 0 96zM0 256c0-17.7 14.3-32 32-32l384 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L32 288c-17.7 0-32-14.3-32-32zM448 416c0 17.7-14.3 32-32 32L32 448c-17.7 0-32-14.3-32-32s14.3-32 32-32l384 0c17.7 0 32 14.3 32 32z"]},sa={prefix:"fas",iconName:"square-up-right",icon:[448,512,[8599,"external-link-square-alt"],"f360","M384 32c35.3 0 64 28.7 64 64l0 320c0 35.3-28.7 64-64 64L64 480c-35.3 0-64-28.7-64-64L0 96C0 60.7 28.7 32 64 32l320 0zM160 160c-6.5 0-12.3 3.9-14.8 9.9s-1.1 12.9 3.5 17.4l40 40-71 71C114 302 112 306.9 112 312s2 10 5.7 13.7l36.7 36.7c3.6 3.6 8.5 5.7 13.7 5.7s10-2 13.7-5.7l71-71 40 40c4.6 4.6 11.5 5.9 17.4 3.5s9.9-8.3 9.9-14.8l0-144c0-8.8-7.2-16-16-16l-144 0z"]},na=sa,oa={prefix:"fas",iconName:"circle-chevron-down",icon:[512,512,["chevron-circle-down"],"f13a","M256 0a256 256 0 1 0 0 512A256 256 0 1 0 256 0zM135 241c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0l87 87 87-87c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9L273 345c-9.4 9.4-24.6 9.4-33.9 0L135 241z"]},aa=oa,Ps={prefix:"fas",iconName:"memory",icon:[576,512,[],"f538","M64 64C28.7 64 0 92.7 0 128l0 7.4c0 6.8 4.4 12.6 10.1 16.3C23.3 160.3 32 175.1 32 192s-8.7 31.7-21.9 40.3C4.4 236 0 241.8 0 248.6L0 320l576 0 0-71.4c0-6.8-4.4-12.6-10.1-16.3C552.7 223.7 544 208.9 544 192s8.7-31.7 21.9-40.3c5.7-3.7 10.1-9.5 10.1-16.3l0-7.4c0-35.3-28.7-64-64-64L64 64zM576 352L0 352l0 64c0 17.7 14.3 32 32 32l48 0 0-32c0-8.8 7.2-16 16-16s16 7.2 16 16l0 32 96 0 0-32c0-8.8 7.2-16 16-16s16 7.2 16 16l0 32 96 0 0-32c0-8.8 7.2-16 16-16s16 7.2 16 16l0 32 96 0 0-32c0-8.8 7.2-16 16-16s16 7.2 16 16l0 32 48 0c17.7 0 32-14.3 32-32l0-64zM192 160l0 64c0 17.7-14.3 32-32 32s-32-14.3-32-32l0-64c0-17.7 14.3-32 32-32s32 14.3 32 32zm128 0l0 64c0 17.7-14.3 32-32 32s-32-14.3-32-32l0-64c0-17.7 14.3-32 32-32s32 14.3 32 32zm128 0l0 64c0 17.7-14.3 32-32 32s-32-14.3-32-32l0-64c0-17.7 14.3-32 32-32s32 14.3 32 32z"]},la={prefix:"fas",iconName:"folder",icon:[512,512,[128193,128447,61716,"folder-blank"],"f07b","M64 480H448c35.3 0 64-28.7 64-64V160c0-35.3-28.7-64-64-64H288c-10.1 0-19.6-4.7-25.6-12.8L243.2 57.6C231.1 41.5 212.1 32 192 32H64C28.7 32 0 60.7 0 96V416c0 35.3 28.7 64 64 64z"]},ca={prefix:"fas",iconName:"box",icon:[448,512,[128230],"f466","M50.7 58.5L0 160l208 0 0-128L93.7 32C75.5 32 58.9 42.3 50.7 58.5zM240 160l208 0L397.3 58.5C389.1 42.3 372.5 32 354.3 32L240 32l0 128zm208 32L0 192 0 416c0 35.3 28.7 64 64 64l320 0c35.3 0 64-28.7 64-64l0-224z"]},ha={prefix:"fas",iconName:"maximize",icon:[512,512,["expand-arrows-alt"],"f31e","M200 32L56 32C42.7 32 32 42.7 32 56l0 144c0 9.7 5.8 18.5 14.8 22.2s19.3 1.7 26.2-5.2l40-40 79 79-79 79L73 295c-6.9-6.9-17.2-8.9-26.2-5.2S32 302.3 32 312l0 144c0 13.3 10.7 24 24 24l144 0c9.7 0 18.5-5.8 22.2-14.8s1.7-19.3-5.2-26.2l-40-40 79-79 79 79-40 40c-6.9 6.9-8.9 17.2-5.2 26.2s12.5 14.8 22.2 14.8l144 0c13.3 0 24-10.7 24-24l0-144c0-9.7-5.8-18.5-14.8-22.2s-19.3-1.7-26.2 5.2l-40 40-79-79 79-79 40 40c6.9 6.9 17.2 8.9 26.2 5.2s14.8-12.5 14.8-22.2l0-144c0-13.3-10.7-24-24-24L312 32c-9.7 0-18.5 5.8-22.2 14.8s-1.7 19.3 5.2 26.2l40 40-79 79-79-79 40-40c6.9-6.9 8.9-17.2 5.2-26.2S209.7 32 200 32z"]},Hs=ha,da={prefix:"fas",iconName:"server",icon:[512,512,[],"f233","M64 32C28.7 32 0 60.7 0 96l0 64c0 35.3 28.7 64 64 64l384 0c35.3 0 64-28.7 64-64l0-64c0-35.3-28.7-64-64-64L64 32zm280 72a24 24 0 1 1 0 48 24 24 0 1 1 0-48zm48 24a24 24 0 1 1 48 0 24 24 0 1 1 -48 0zM64 288c-35.3 0-64 28.7-64 64l0 64c0 35.3 28.7 64 64 64l384 0c35.3 0 64-28.7 64-64l0-64c0-35.3-28.7-64-64-64L64 288zm280 72a24 24 0 1 1 0 48 24 24 0 1 1 0-48zm56 24a24 24 0 1 1 48 0 24 24 0 1 1 -48 0z"]},Fs={prefix:"fas",iconName:"microchip",icon:[512,512,[],"f2db","M176 24c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 40c-35.3 0-64 28.7-64 64l-40 0c-13.3 0-24 10.7-24 24s10.7 24 24 24l40 0 0 56-40 0c-13.3 0-24 10.7-24 24s10.7 24 24 24l40 0 0 56-40 0c-13.3 0-24 10.7-24 24s10.7 24 24 24l40 0c0 35.3 28.7 64 64 64l0 40c0 13.3 10.7 24 24 24s24-10.7 24-24l0-40 56 0 0 40c0 13.3 10.7 24 24 24s24-10.7 24-24l0-40 56 0 0 40c0 13.3 10.7 24 24 24s24-10.7 24-24l0-40c35.3 0 64-28.7 64-64l40 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-40 0 0-56 40 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-40 0 0-56 40 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-40 0c0-35.3-28.7-64-64-64l0-40c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 40-56 0 0-40c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 40-56 0 0-40zM160 128l192 0c17.7 0 32 14.3 32 32l0 192c0 17.7-14.3 32-32 32l-192 0c-17.7 0-32-14.3-32-32l0-192c0-17.7 14.3-32 32-32zm192 32l-192 0 0 192 192 0 0-192z"]},ua={prefix:"fas",iconName:"circle-chevron-up",icon:[512,512,["chevron-circle-up"],"f139","M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM377 271c9.4 9.4 9.4 24.6 0 33.9s-24.6 9.4-33.9 0l-87-87-87 87c-9.4 9.4-24.6 9.4-33.9 0s-9.4-24.6 0-33.9L239 167c9.4-9.4 24.6-9.4 33.9 0L377 271z"]},fa=ua,Ns={prefix:"fas",iconName:"box-open",icon:[640,512,[],"f49e","M58.9 42.1c3-6.1 9.6-9.6 16.3-8.7L320 64 564.8 33.4c6.7-.8 13.3 2.7 16.3 8.7l41.7 83.4c9 17.9-.6 39.6-19.8 45.1L439.6 217.3c-13.9 4-28.8-1.9-36.2-14.3L320 64 236.6 203c-7.4 12.4-22.3 18.3-36.2 14.3L37.1 170.6c-19.3-5.5-28.8-27.2-19.8-45.1L58.9 42.1zM321.1 128l54.9 91.4c14.9 24.8 44.6 36.6 72.5 28.6L576 211.6l0 167c0 22-15 41.2-36.4 46.6l-204.1 51c-10.2 2.6-20.9 2.6-31 0l-204.1-51C79 419.7 64 400.5 64 378.5l0-167L191.6 248c27.8 8 57.6-3.8 72.5-28.6L318.9 128l2.2 0z"]},_a={prefix:"fas",iconName:"arrows-rotate",icon:[512,512,[128472,"refresh","sync"],"f021","M105.1 202.6c7.7-21.8 20.2-42.3 37.8-59.8c62.5-62.5 163.8-62.5 226.3 0L386.3 160 352 160c-17.7 0-32 14.3-32 32s14.3 32 32 32l111.5 0c0 0 0 0 0 0l.4 0c17.7 0 32-14.3 32-32l0-112c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 35.2L414.4 97.6c-87.5-87.5-229.3-87.5-316.8 0C73.2 122 55.6 150.7 44.8 181.4c-5.9 16.7 2.9 34.9 19.5 40.8s34.9-2.9 40.8-19.5zM39 289.3c-5 1.5-9.8 4.2-13.7 8.2c-4 4-6.7 8.8-8.1 14c-.3 1.2-.6 2.5-.8 3.8c-.3 1.7-.4 3.4-.4 5.1L16 432c0 17.7 14.3 32 32 32s32-14.3 32-32l0-35.1 17.6 17.5c0 0 0 0 0 0c87.5 87.4 229.3 87.4 316.7 0c24.4-24.4 42.1-53.1 52.9-83.8c5.9-16.7-2.9-34.9-19.5-40.8s-34.9 2.9-40.8 19.5c-7.7 21.8-20.2 42.3-37.8 59.8c-62.5 62.5-163.8 62.5-226.3 0l-.1-.1L125.6 352l34.4 0c17.7 0 32-14.3 32-32s-14.3-32-32-32L48.4 288c-1.6 0-3.2 .1-4.8 .3s-3.1 .5-4.6 1z"]},zs=_a,va={prefix:"fas",iconName:"house-user",icon:[576,512,["home-user"],"e1b0","M575.8 255.5c0 18-15 32.1-32 32.1l-32 0 .7 160.2c.2 35.5-28.5 64.3-64 64.3l-320.4 0c-35.3 0-64-28.7-64-64l0-160.4-32 0c-18 0-32-14-32-32.1c0-9 3-17 10-24L266.4 8c7-7 15-8 22-8s15 2 21 7L564.8 231.5c8 7 12 15 11 24zM352 224a64 64 0 1 0 -128 0 64 64 0 1 0 128 0zm-96 96c-44.2 0-80 35.8-80 80c0 8.8 7.2 16 16 16l192 0c8.8 0 16-7.2 16-16c0-44.2-35.8-80-80-80l-64 0z"]},pa={prefix:"fas",iconName:"tags",icon:[512,512,[],"f02c","M345 39.1L472.8 168.4c52.4 53 52.4 138.2 0 191.2L360.8 472.9c-9.3 9.4-24.5 9.5-33.9 .2s-9.5-24.5-.2-33.9L438.6 325.9c33.9-34.3 33.9-89.4 0-123.7L310.9 72.9c-9.3-9.4-9.2-24.6 .2-33.9s24.6-9.2 33.9 .2zM0 229.5L0 80C0 53.5 21.5 32 48 32l149.5 0c17 0 33.3 6.7 45.3 18.7l168 168c25 25 25 65.5 0 90.5L277.3 442.7c-25 25-65.5 25-90.5 0l-168-168C6.7 262.7 0 246.5 0 229.5zM144 144a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z"]},ga={prefix:"fas",iconName:"terminal",icon:[576,512,[],"f120","M9.4 86.6C-3.1 74.1-3.1 53.9 9.4 41.4s32.8-12.5 45.3 0l192 192c12.5 12.5 12.5 32.8 0 45.3l-192 192c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L178.7 256 9.4 86.6zM256 416l288 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-288 0c-17.7 0-32-14.3-32-32s14.3-32 32-32z"]},ma={prefix:"fas",iconName:"tag",icon:[448,512,[127991],"f02b","M0 80L0 229.5c0 17 6.7 33.3 18.7 45.3l176 176c25 25 65.5 25 90.5 0L418.7 317.3c25-25 25-65.5 0-90.5l-176-176c-12-12-28.3-18.7-45.3-18.7L48 32C21.5 32 0 53.5 0 80zm112 32a32 32 0 1 1 0 64 32 32 0 1 1 0-64z"]},Sa={prefix:"fas",iconName:"hard-drive",icon:[512,512,[128436,"hdd"],"f0a0","M0 96C0 60.7 28.7 32 64 32l384 0c35.3 0 64 28.7 64 64l0 184.4c-17-15.2-39.4-24.4-64-24.4L64 256c-24.6 0-47 9.2-64 24.4L0 96zM64 288l384 0c35.3 0 64 28.7 64 64l0 64c0 35.3-28.7 64-64 64L64 480c-35.3 0-64-28.7-64-64l0-64c0-35.3 28.7-64 64-64zM320 416a32 32 0 1 0 0-64 32 32 0 1 0 0 64zm128-32a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z"]},ba=Sa,wa={prefix:"fas",iconName:"gear",icon:[512,512,[9881,"cog"],"f013","M495.9 166.6c3.2 8.7 .5 18.4-6.4 24.6l-43.3 39.4c1.1 8.3 1.7 16.8 1.7 25.4s-.6 17.1-1.7 25.4l43.3 39.4c6.9 6.2 9.6 15.9 6.4 24.6c-4.4 11.9-9.7 23.3-15.8 34.3l-4.7 8.1c-6.6 11-14 21.4-22.1 31.2c-5.9 7.2-15.7 9.6-24.5 6.8l-55.7-17.7c-13.4 10.3-28.2 18.9-44 25.4l-12.5 57.1c-2 9.1-9 16.3-18.2 17.8c-13.8 2.3-28 3.5-42.5 3.5s-28.7-1.2-42.5-3.5c-9.2-1.5-16.2-8.7-18.2-17.8l-12.5-57.1c-15.8-6.5-30.6-15.1-44-25.4L83.1 425.9c-8.8 2.8-18.6 .3-24.5-6.8c-8.1-9.8-15.5-20.2-22.1-31.2l-4.7-8.1c-6.1-11-11.4-22.4-15.8-34.3c-3.2-8.7-.5-18.4 6.4-24.6l43.3-39.4C64.6 273.1 64 264.6 64 256s.6-17.1 1.7-25.4L22.4 191.2c-6.9-6.2-9.6-15.9-6.4-24.6c4.4-11.9 9.7-23.3 15.8-34.3l4.7-8.1c6.6-11 14-21.4 22.1-31.2c5.9-7.2 15.7-9.6 24.5-6.8l55.7 17.7c13.4-10.3 28.2-18.9 44-25.4l12.5-57.1c2-9.1 9-16.3 18.2-17.8C227.3 1.2 241.5 0 256 0s28.7 1.2 42.5 3.5c9.2 1.5 16.2 8.7 18.2 17.8l12.5 57.1c15.8 6.5 30.6 15.1 44 25.4l55.7-17.7c8.8-2.8 18.6-.3 24.5 6.8c8.1 9.8 15.5 20.2 22.1 31.2l4.7 8.1c6.1 11 11.4 22.4 15.8 34.3zM256 336a80 80 0 1 0 0-160 80 80 0 1 0 0 160z"]},Ca=wa,ya={prefix:"fas",iconName:"clock",icon:[512,512,[128339,"clock-four"],"f017","M256 0a256 256 0 1 1 0 512A256 256 0 1 1 256 0zM232 120l0 136c0 8 4 15.5 10.7 20l96 64c11 7.4 25.9 4.4 33.3-6.7s4.4-25.9-6.7-33.3L280 243.2 280 120c0-13.3-10.7-24-24-24s-24 10.7-24 24z"]},Ea={prefix:"fas",iconName:"network-wired",icon:[640,512,[],"f6ff","M256 64l128 0 0 64-128 0 0-64zM240 0c-26.5 0-48 21.5-48 48l0 96c0 26.5 21.5 48 48 48l48 0 0 32L32 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l96 0 0 32-48 0c-26.5 0-48 21.5-48 48l0 96c0 26.5 21.5 48 48 48l160 0c26.5 0 48-21.5 48-48l0-96c0-26.5-21.5-48-48-48l-48 0 0-32 256 0 0 32-48 0c-26.5 0-48 21.5-48 48l0 96c0 26.5 21.5 48 48 48l160 0c26.5 0 48-21.5 48-48l0-96c0-26.5-21.5-48-48-48l-48 0 0-32 96 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-256 0 0-32 48 0c26.5 0 48-21.5 48-48l0-96c0-26.5-21.5-48-48-48L240 0zM96 448l0-64 128 0 0 64L96 448zm320-64l128 0 0 64-128 0 0-64z"]},xa={prefix:"fas",iconName:"download",icon:[512,512,[],"f019","M288 32c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 242.7-73.4-73.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l128 128c12.5 12.5 32.8 12.5 45.3 0l128-128c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L288 274.7 288 32zM64 352c-35.3 0-64 28.7-64 64l0 32c0 35.3 28.7 64 64 64l384 0c35.3 0 64-28.7 64-64l0-32c0-35.3-28.7-64-64-64l-101.5 0-45.3 45.3c-25 25-65.5 25-90.5 0L165.5 352 64 352zm368 56a24 24 0 1 1 0 48 24 24 0 1 1 0-48z"]},ka={prefix:"fas",iconName:"house",icon:[576,512,[127968,63498,63500,"home","home-alt","home-lg-alt"],"f015","M575.8 255.5c0 18-15 32.1-32 32.1l-32 0 .7 160.2c0 2.7-.2 5.4-.5 8.1l0 16.2c0 22.1-17.9 40-40 40l-16 0c-1.1 0-2.2 0-3.3-.1c-1.4 .1-2.8 .1-4.2 .1L416 512l-24 0c-22.1 0-40-17.9-40-40l0-24 0-64c0-17.7-14.3-32-32-32l-64 0c-17.7 0-32 14.3-32 32l0 64 0 24c0 22.1-17.9 40-40 40l-24 0-31.9 0c-1.5 0-3-.1-4.5-.2c-1.2 .1-2.4 .2-3.6 .2l-16 0c-22.1 0-40-17.9-40-40l0-112c0-.9 0-1.9 .1-2.8l0-69.7-32 0c-18 0-32-14-32-32.1c0-9 3-17 10-24L266.4 8c7-7 15-8 22-8s15 2 21 7L564.8 231.5c8 7 12 15 11 24z"]},La=ka,Da={prefix:"fas",iconName:"stop",icon:[384,512,[9209],"f04d","M0 128C0 92.7 28.7 64 64 64H320c35.3 0 64 28.7 64 64V384c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V128z"]},Ra={prefix:"fas",iconName:"sun",icon:[512,512,[9728],"f185","M361.5 1.2c5 2.1 8.6 6.6 9.6 11.9L391 121l107.9 19.8c5.3 1 9.8 4.6 11.9 9.6s1.5 10.7-1.6 15.2L446.9 256l62.3 90.3c3.1 4.5 3.7 10.2 1.6 15.2s-6.6 8.6-11.9 9.6L391 391 371.1 498.9c-1 5.3-4.6 9.8-9.6 11.9s-10.7 1.5-15.2-1.6L256 446.9l-90.3 62.3c-4.5 3.1-10.2 3.7-15.2 1.6s-8.6-6.6-9.6-11.9L121 391 13.1 371.1c-5.3-1-9.8-4.6-11.9-9.6s-1.5-10.7 1.6-15.2L65.1 256 2.8 165.7c-3.1-4.5-3.7-10.2-1.6-15.2s6.6-8.6 11.9-9.6L121 121 140.9 13.1c1-5.3 4.6-9.8 9.6-11.9s10.7-1.5 15.2 1.6L256 65.1 346.3 2.8c4.5-3.1 10.2-3.7 15.2-1.6zM160 256a96 96 0 1 1 192 0 96 96 0 1 1 -192 0zm224 0a128 128 0 1 0 -256 0 128 128 0 1 0 256 0z"]},Aa={prefix:"fas",iconName:"file",icon:[384,512,[128196,128459,61462],"f15b","M0 64C0 28.7 28.7 0 64 0L224 0l0 128c0 17.7 14.3 32 32 32l128 0 0 288c0 35.3-28.7 64-64 64L64 512c-35.3 0-64-28.7-64-64L0 64zm384 64l-128 0L256 0 384 128z"]},Ta={prefix:"fas",iconName:"play",icon:[384,512,[9654],"f04b","M73 39c-14.8-9.1-33.4-9.4-48.5-.9S0 62.6 0 80L0 432c0 17.4 9.4 33.4 24.5 41.9s33.7 8.1 48.5-.9L361 297c14.3-8.7 23-24.2 23-41s-8.7-32.2-23-41L73 39z"]},Ba={prefix:"fas",iconName:"plus",icon:[448,512,[10133,61543,"add"],"2b","M256 80c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 144L48 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l144 0 0 144c0 17.7 14.3 32 32 32s32-14.3 32-32l0-144 144 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-144 0 0-144z"]},Ma={prefix:"fas",iconName:"moon",icon:[384,512,[127769,9214],"f186","M223.5 32C100 32 0 132.3 0 256S100 480 223.5 480c60.6 0 115.5-24.2 155.8-63.4c5-4.9 6.3-12.5 3.1-18.7s-10.1-9.7-17-8.5c-9.8 1.7-19.8 2.6-30.1 2.6c-96.9 0-175.5-78.8-175.5-176c0-65.8 36-123.1 89.3-153.3c6.1-3.5 9.2-10.5 7.7-17.3s-7.3-11.9-14.3-12.5c-6.3-.5-12.6-.8-19-.8z"]},Oa={prefix:"fas",iconName:"rectangle-xmark",icon:[512,512,[62164,"rectangle-times","times-rectangle","window-close"],"f410","M64 32C28.7 32 0 60.7 0 96L0 416c0 35.3 28.7 64 64 64l384 0c35.3 0 64-28.7 64-64l0-320c0-35.3-28.7-64-64-64L64 32zM175 175c9.4-9.4 24.6-9.4 33.9 0l47 47 47-47c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9l-47 47 47 47c9.4 9.4 9.4 24.6 0 33.9s-24.6 9.4-33.9 0l-47-47-47 47c-9.4 9.4-24.6 9.4-33.9 0s-9.4-24.6 0-33.9l47-47-47-47c-9.4-9.4-9.4-24.6 0-33.9z"]},Ia=Oa,Pa={prefix:"fas",iconName:"turn-up",icon:[384,512,[10548,"level-up-alt"],"f3bf","M350 177.5c3.8-8.8 2-19-4.6-26l-136-144C204.9 2.7 198.6 0 192 0s-12.9 2.7-17.4 7.5l-136 144c-6.6 7-8.4 17.2-4.6 26s12.5 14.5 22 14.5l88 0 0 192c0 17.7-14.3 32-32 32l-80 0c-17.7 0-32 14.3-32 32l0 32c0 17.7 14.3 32 32 32l80 0c70.7 0 128-57.3 128-128l0-192 88 0c9.6 0 18.2-5.7 22-14.5z"]},Ha=Pa;var Fa=Z('<button type="button" class="btn mx-2" title="Switch Theme"><!></button>');function Na(n,d){Ye(d,!1);let g=ae();function y(){k(g)==="light"?(J(g,"dark"),document.querySelector("html").classList.add("dark")):(J(g,"light"),document.querySelector("html").classList.remove("dark"))}at(()=>{J(g,"dark"),k(g)==="dark"&&document.querySelector("html").classList.add("dark")}),it();var x=Fa(),D=P(x);{var L=o=>{de(o,{get icon(){return Ma},color:"#333",size:"2x"})},i=o=>{de(o,{get icon(){return Ra},color:"#333",size:"2x"})};ee(D,o=>{k(g)==="dark"?o(L):o(i,!1)})}ve("click",x,y),j(n,x),Qe()}var za=jt('<svg class="bi flex-shrink-0 me-2" width="24" height="24" role="img" aria-label="Danger:"><use xlink:href="#exclamation-triangle-fill"></use></svg>'),Wa=jt('<svg class="bi flex-shrink-0 me-2" width="24" height="24" role="img" aria-label="Success:"><use xlink:href="#check-circle-fill"></use></svg>'),Ua=jt('<svg class="bi flex-shrink-0 me-2" width="24" height="24" role="img" aria-label="Info:"><use xlink:href="#info-fill"></use></svg>'),$a=Z("<strong>Error:</strong>"),ja=Z('<button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>'),qa=Z('<div role="alert"><!> <div><!> <!> <!></div></div>'),Ka=Z('<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><symbol id="check-circle-fill" fill="currentColor" viewBox="0 0 16 16"><path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"></path></symbol><symbol id="info-fill" fill="currentColor" viewBox="0 0 16 16"><path d="M8 16A8 8 0 1 0 8 0akeyof Message8 8 0 0 0 0 16zm.93-9.412-1 4.705c-.07.34.029.533.304.533.194 0 .487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703 0-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381 2.29-.287zM8 5.5a1 1 0 1 1 0-2 1 1 0 0 1 0 2z"></path></symbol><symbol id="exclamation-triangle-fill" fill="currentColor" viewBox="0 0 16 16"><path d="M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5zm.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"></path></symbol></svg> <!>',1);function Va(n,d){let g=he(d,"type",8),y=he(d,"dismissible",8,!1),x=ae(!1);var D=Ka(),L=$(Be(D),2);{var i=o=>{var h=qa();let _;var a=P(h);{var l=c=>{var p=za();j(c,p)},v=(c,p)=>{{var m=f=>{var w=Wa();j(f,w)},b=(f,w)=>{{var A=R=>{var O=Ua();j(R,O)};ee(f,R=>{g()==="info"&&R(A)},w)}};ee(c,f=>{g()==="success"?f(m):f(b,!1)},p)}};ee(a,c=>{g()==="error"||g()==="warning"?c(l):c(v,!1)})}var S=$(a,2),u=P(S);{var r=c=>{var p=$a();j(c,p)};ee(u,c=>{g()==="error"&&c(r)})}var s=$(u,2);Hr(s,d,"default",{},null);var e=$(s,2);{var t=c=>{var p=ja();ve("click",p,()=>J(x,!0)),j(c,p)};ee(e,c=>{y()&&c(t)})}ne(c=>_=qe(h,1,"alert d-flex align-items-center",null,_,c),[()=>({"alert-danger":g()==="error","alert-warning":g()==="warning","alert-success":g()==="success","alert-info":g()==="info","alert-dismissible":y()})],fe),dt(3,h,()=>Tt),j(o,h)};ee(L,o=>{k(x)||o(i)})}j(n,D)}function Ga(n){switch(n.request){case"login":return`{"response": "login", "payload": {"username": "${n.payload.username}"}}`;case"get_system_info":return'{"response": "get_system_info", "payload": {"engine_version": "Docker 20.10.7", "containers": {"total": 178, "running": 170, "stopped": 0}, "os": "Ubuntu 20.04.3 LTS", "cpus": 24, "mem": 31277850624}}';case"get_container_list":return`{"response": "get_container_list", "payload": [
                {"id": "2b7eb6b9d2f7fd2dd26738500a81a16310f78e46eea2f9c2a27ed876d85d8586", "name": "CaaSa Demo", "namespace": null, "status": "running", "permissions": ["info", "info-annotations", "procs", "files-read", "files-write", "files", "logs", "state", "term"]},
                {"id": "2b7eb6b9d2f7fd2dd26738500a81a16310f78e46eea2f9c2a27ed876d85d8587", "name": "Backend", "namespace": "Cool Web App", "status": "running", "permissions": ["info", "info-annotations", "procs", "files-read", "files-write", "files", "logs", "state", "term"]},
                {"id": "2b7eb6b9d2f7fd2dd26738500a81a16310f78e46eea2f9c2a27ed876d85d8588", "name": "Gateway", "namespace": "Cool Web App", "status": "running", "permissions": ["info", "info-annotations", "procs", "files-read", "files-write", "files", "logs", "state", "term"]}
               ]}`;case"get_processes":return'{"response": "get_processes", "payload": [{"pid": "45756", "ppid": "45733", "%cpu": "0.0", "%mem": "0.0", "user": "root", "stime": "16:24", "command": "nginx: master process nginx -g daemon off;", "level": 0}, {"pid": "45822", "ppid": "45756", "%cpu": "0.0", "%mem": "0.0", "user": "systemd+", "stime": "16:24", "command": "nginx: worker process", "level": 1}, {"pid": "45823", "ppid": "45756", "%cpu": "0.0", "%mem": "0.0", "user": "systemd+", "stime": "16:24", "command": "nginx: worker process", "level": 1}, {"pid": "45824", "ppid": "45756", "%cpu": "0.0", "%mem": "0.0", "user": "systemd+", "stime": "16:24", "command": "nginx: worker process", "level": 1}, {"pid": "45825", "ppid": "45756", "%cpu": "0.0", "%mem": "0.0", "user": "systemd+", "stime": "16:24", "command": "nginx: worker process", "level": 1}, {"pid": "45826", "ppid": "45756", "%cpu": "0.0", "%mem": "0.0", "user": "systemd+", "stime": "16:24", "command": "nginx: worker process", "level": 1}, {"pid": "45827", "ppid": "45756", "%cpu": "0.0", "%mem": "0.0", "user": "systemd+", "stime": "16:24", "command": "nginx: worker process", "level": 1}, {"pid": "45828", "ppid": "45756", "%cpu": "0.0", "%mem": "0.0", "user": "systemd+", "stime": "16:24", "command": "nginx: worker process", "level": 1}, {"pid": "45829", "ppid": "45756", "%cpu": "0.0", "%mem": "0.0", "user": "systemd+", "stime": "16:24", "command": "nginx: worker process", "level": 1}, {"pid": "45830", "ppid": "45756", "%cpu": "0.0", "%mem": "0.0", "user": "systemd+", "stime": "16:24", "command": "nginx: worker process", "level": 1}, {"pid": "45831", "ppid": "45756", "%cpu": "0.0", "%mem": "0.0", "user": "systemd+", "stime": "16:24", "command": "nginx: worker process", "level": 1}, {"pid": "45832", "ppid": "45756", "%cpu": "0.0", "%mem": "0.0", "user": "systemd+", "stime": "16:24", "command": "nginx: worker process", "level": 1}, {"pid": "45833", "ppid": "45756", "%cpu": "0.0", "%mem": "0.0", "user": "systemd+", "stime": "16:24", "command": "nginx: worker process", "level": 1}, {"pid": "46825", "ppid": "45733", "%cpu": "0.0", "%mem": "0.0", "user": "root", "stime": "16:34", "command": "sh", "level": 0}]}';case"get_container_info":const d={"2b7eb6b9d2f7fd2dd26738500a81a16310f78e46eea2f9c2a27ed876d85d8586":"/caasa_demo","2b7eb6b9d2f7fd2dd26738500a81a16310f78e46eea2f9c2a27ed876d85d8587":"/cool_web_app_backend_1","2b7eb6b9d2f7fd2dd26738500a81a16310f78e46eea2f9c2a27ed876d85d8588":"/cool_web_app_gateway_1"};return`{"response": "get_container_info", "payload": {"id": "${n.payload.container_id}", "name": "${d[n.payload.container_id]}", "status": "running", "command": "/docker-entrypoint.sh nginx -g daemon off;", "created_at": "2021-12-02T10:33:16.628618832Z", "started_at": "2021-12-02T10:33:17.015866729Z", "finished_at": "0001-01-01T00:00:00Z", "crashes": 0, "env": {"PATH": "/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin", "NGINX_VERSION": "1.21.1", "NJS_VERSION": "0.6.1", "PKG_RELEASE": "1"}, "labels": {"caasa.admin.full": "user1,user2", "maintainer": "NGINX Docker Maintainers <docker-maint@nginx.com>"}, "image": {"name": "nginx:alpine", "hash": "sha256:b9e2356ea1be9452f3777a587b0b6a30bc16c295fe6190eda6a0776522f27439"}, "mem": {"used": 10452992, "max_used": 19345408, "total": 52428800}, "cpu": {"perc": ${Math.random()*10}}, "net": {"rx_bytes": 18201, "tx_bytes": 0}, "ports": ["80/tcp"]}}`;case"get_container_logs":return n.payload.onlynew?'{"response": "get_container_logs", "payload":[]}':'{"response": "get_container_logs", "payload": ["2021-12-02T10:33:17.021946340Z /docker-entrypoint.sh: /docker-entrypoint.d/ is not empty, will attempt to perform configuration","2021-12-02T10:33:17.021988550Z /docker-entrypoint.sh: Looking for shell scripts in /docker-entrypoint.d/","2021-12-02T10:33:17.023417432Z /docker-entrypoint.sh: Launching /docker-entrypoint.d/10-listen-on-ipv6-by-default.sh","2021-12-02T10:33:17.031231257Z 10-listen-on-ipv6-by-default.sh: info: Getting the checksum of /etc/nginx/conf.d/default.conf","2021-12-02T10:33:17.055742664Z 10-listen-on-ipv6-by-default.sh: info: Enabled listen on IPv6 in /etc/nginx/conf.d/default.conf","2021-12-02T10:33:17.056041305Z /docker-entrypoint.sh: Launching /docker-entrypoint.d/20-envsubst-on-templates.sh","2021-12-02T10:33:17.059979717Z /docker-entrypoint.sh: Launching /docker-entrypoint.d/30-tune-worker-processes.sh","2021-12-02T10:33:17.062059371Z /docker-entrypoint.sh: Configuration complete; ready for start up","2021-12-02T10:33:17.074027144Z 2021/12/02 10:33:17 [notice] 1#1: using the \\"epoll\\" event method","2021-12-02T10:33:17.074056600Z 2021/12/02 10:33:17 [notice] 1#1: nginx/1.21.1","2021-12-02T10:33:17.074063653Z 2021/12/02 10:33:17 [notice] 1#1: built by gcc 10.3.1 20210424 (Alpine 10.3.1_git20210424) ","2021-12-02T10:33:17.074069845Z 2021/12/02 10:33:17 [notice] 1#1: OS: Linux 5.11.0-40-generic","2021-12-02T10:33:17.074075475Z 2021/12/02 10:33:17 [notice] 1#1: getrlimit(RLIMIT_NOFILE): 1048576:1048576","2021-12-02T10:33:17.074245905Z 2021/12/02 10:33:17 [notice] 1#1: start worker processes","2021-12-02T10:33:17.074276953Z 2021/12/02 10:33:17 [notice] 1#1: start worker process 32","2021-12-02T10:33:17.074379486Z 2021/12/02 10:33:17 [notice] 1#1: start worker process 33","2021-12-02T10:33:17.074401427Z 2021/12/02 10:33:17 [notice] 1#1: start worker process 34","2021-12-02T10:33:17.074513127Z 2021/12/02 10:33:17 [notice] 1#1: start worker process 35","2021-12-02T10:33:17.074601242Z 2021/12/02 10:33:17 [notice] 1#1: start worker process 36","2021-12-02T10:33:17.074666745Z 2021/12/02 10:33:17 [notice] 1#1: start worker process 37","2021-12-02T10:33:17.074817979Z 2021/12/02 10:33:17 [notice] 1#1: start worker process 38","2021-12-02T10:33:17.074873423Z 2021/12/02 10:33:17 [notice] 1#1: start worker process 39","2021-12-02T10:33:17.075007344Z 2021/12/02 10:33:17 [notice] 1#1: start worker process 40","2021-12-02T10:33:17.075141746Z 2021/12/02 10:33:17 [notice] 1#1: start worker process 41","2021-12-02T10:33:17.075279715Z 2021/12/02 10:33:17 [notice] 1#1: start worker process 42","2021-12-02T10:33:17.075393118Z 2021/12/02 10:33:17 [notice] 1#1: start worker process 43"]}';case"get_filesystem_info":return'{"response": "get_filesystem_info", "payload": {"workdir": "", "mounts": [{"type": "bind", "destination": "/etc/ssl/certs", "readonly": true, "source": "/etc/ssl/certs"}]}}';case"get_directory_list":return n.payload.path===""||n.payload.path==="/"?'{"response": "get_directory_list", "payload": {"entries": [{"type": "f", "permissions": "rwxr-xr-x", "owner": "root", "group": "root", "filesize": "0B", "modtime": "2021-12-02 16:19:13", "name": ".dockerenv"}, {"type": "d", "permissions": "rwxr-xr-x", "owner": "root", "group": "root", "filesize": "4.0KB", "modtime": "2021-06-15 14:34:40", "name": "bin"}, {"type": "d", "permissions": "rwxr-xr-x", "owner": "root", "group": "root", "filesize": "360B", "modtime": "2021-12-02 16:19:13", "name": "dev"}, {"type": "d", "permissions": "rwxr-xr-x", "owner": "root", "group": "root", "filesize": "4.0KB", "modtime": "2021-07-06 19:40:27", "name": "docker-entrypoint.d"}, {"type": "f", "permissions": "rwxrwxr-x", "owner": "root", "group": "root", "filesize": "1.2KB", "modtime": "2021-07-06 19:40:16", "name": "docker-entrypoint.sh"}, {"type": "d", "permissions": "rwxr-xr-x", "owner": "root", "group": "root", "filesize": "4.0KB", "modtime": "2021-12-02 16:19:13", "name": "etc"}, {"type": "d", "permissions": "rwxr-xr-x", "owner": "root", "group": "root", "filesize": "4.0KB", "modtime": "2021-06-15 14:34:40", "name": "home"}, {"type": "d", "permissions": "rwxr-xr-x", "owner": "root", "group": "root", "filesize": "4.0KB", "modtime": "2021-06-15 14:34:40", "name": "lib"}, {"type": "d", "permissions": "rwxr-xr-x", "owner": "root", "group": "root", "filesize": "4.0KB", "modtime": "2021-06-15 14:34:40", "name": "media"}, {"type": "d", "permissions": "rwxr-xr-x", "owner": "root", "group": "root", "filesize": "4.0KB", "modtime": "2021-06-15 14:34:40", "name": "mnt"}, {"type": "d", "permissions": "rwxr-xr-x", "owner": "root", "group": "root", "filesize": "4.0KB", "modtime": "2021-06-15 14:34:40", "name": "opt"}, {"type": "d", "permissions": "r-xr-xr-x", "owner": "root", "group": "root", "filesize": "0B", "modtime": "2021-12-02 16:19:13", "name": "proc"}, {"type": "d", "permissions": "rwx------", "owner": "root", "group": "root", "filesize": "4.0KB", "modtime": "2021-06-15 14:34:40", "name": "root"}, {"type": "d", "permissions": "rwxr-xr-x", "owner": "root", "group": "root", "filesize": "4.0KB", "modtime": "2021-12-02 16:19:13", "name": "run"}, {"type": "d", "permissions": "rwxr-xr-x", "owner": "root", "group": "root", "filesize": "4.0KB", "modtime": "2021-06-15 14:34:40", "name": "sbin"}, {"type": "d", "permissions": "rwxr-xr-x", "owner": "root", "group": "root", "filesize": "4.0KB", "modtime": "2021-06-15 14:34:40", "name": "srv"}, {"type": "d", "permissions": "r-xr-xr-x", "owner": "root", "group": "root", "filesize": "0B", "modtime": "2021-12-02 16:19:13", "name": "sys"}, {"type": "d", "permissions": "rwxr-xr-x", "owner": "root", "group": "root", "filesize": "4.0KB", "modtime": "2021-06-15 14:34:40", "name": "usr"}, {"type": "d", "permissions": "rwxr-xr-x", "owner": "root", "group": "root", "filesize": "4.0KB", "modtime": "2021-06-15 14:34:40", "name": "var"}], "path": "/"}}':!1;case"spawn_terminal":return'{"response": "spawn_terminal", "payload": {"execId": "2680be7b4aa3c0b6599edf3521f5813a770ccec7966a59c57cfdac5b4e3b7e9a"}}';case"resize_terminal":return!0;case"transmit_terminal_input":return n.payload.data==="\r"?`56!{"response": "receive_terminal_output", "payload": null}\r
This is just a demo`:'56!{"response": "receive_terminal_output", "payload": null}'+n.payload.data;default:return!1}}class Xa{constructor(d){Ge(this,"binaryType");Ge(this,"bufferedAmount");Ge(this,"extensions");Ge(this,"onclose");Ge(this,"onerror");Ge(this,"onmessage");Ge(this,"onopen");Ge(this,"protocol");Ge(this,"readyState");Ge(this,"url");Ge(this,"CLOSED");Ge(this,"CLOSING");Ge(this,"CONNECTING");Ge(this,"OPEN")}close(d,g){}addEventListener(d,g,y){throw new Error("Method not implemented.")}removeEventListener(d,g,y){throw new Error("Method not implemented.")}dispatchEvent(d){throw new Error("Method not implemented.")}send(d){const g=JSON.parse(d),y=Ga(g),x={data:void 0,...new Event("api-mock")};if(y===!1?x.data=`{"response": "${g.request}", "error": "Sorry, command not mocked in demo"}`:y===!0||(y[0]!=="{"?x.data=new Blob([y]):x.data=y),x.data&&(setTimeout(()=>this.onmessage(x),200),typeof x.data=="string"&&x.data.includes("spawn_terminal"))){console.log("extra response for terminal");const D={data:void 0,...new Event("api-mock")};D.data=new Blob(['56!{"response": "receive_terminal_output", "payload": null}/ # ']),setTimeout(()=>this.onmessage(D),300)}}}let kt,pr={},gr={};function ji(n,d){n in pr?pr[n](d):console.error("WS-API Unknown websocket event:",n)}function Er(n,d){n in gr?gr[n](d):console.error("WS-API Unknown websocket event:",n)}function qi(){pr={},gr={}}const se={init(){try{kt&&kt.close(1e3),kt=new Xa(`${window.location.protocol.replace("http","ws")}//${window.location.host}/ws`),kt.binaryType="blob",kt.onclose=n=>{Er("ws-close",n.reason||"Connection closed"),qi()},kt.onmessage=async n=>{if(n.data instanceof Blob){const d=parseInt(await n.data.slice(0,10).text()),g=d.toString().length+1,y=await n.data.slice(g,g+d).text(),x=JSON.parse(y);x.error?Er(x.response,x.error):ji(x.response,{payload:x.payload,blob:n.data.slice(g+d)})}else{const d=JSON.parse(n.data);d.error?Er(d.response,d.error):ji(d.response,d.payload)}},kt.onerror=n=>{Er("ws-error","Connection error")}}catch(n){alert(n)}},register(n,d=null,g=null){d&&(pr[n]=d),g&&(gr[n]=g)},unregister(...n){n.forEach(d=>{delete gr[d],delete pr[d]})},send(n,d){kt.send(JSON.stringify({request:n,payload:d}))},close(){qi(),kt.close()}};var Za=Z('<div class="spinner-grow mx-2 text-light" role="status"><span class="visually-hidden">Loading...</span></div>'),Ja=Z('<div class="mt-4 text-light"> </div>'),Ya=Z('<div class="bg-outer position-fixed d-flex justify-content-center align-items-center top-0 start-0 end-0 bottom-0 svelte-1l5azpb"><div class="bg-inner d-flex flex-column rounded p-3 svelte-1l5azpb"><div class="d-flex justify-content-center align-items-center"></div> <!></div></div>');function Ws(n,d){Ye(d,!1);let g=he(d,"text",8,""),y=ae(!1);at(()=>{setTimeout(()=>J(y,!0),250)}),it();var x=sr(),D=Be(x);{var L=i=>{var o=Ya(),h=P(o),_=P(h);_t(_,4,()=>[1,2,3],ft,(v,S)=>{var u=Za();j(v,u)});var a=$(_,2);{var l=v=>{var S=Ja(),u=P(S);ne(()=>ie(u,g())),j(v,S)};ee(a,v=>{g()&&v(l)})}dt(1,o,()=>qo),j(i,o)};ee(D,i=>{k(y)&&i(L)})}j(n,x),Qe()}var Qa=Z('<!> <div class="container pt-5"><!> <form class="container login-form svelte-ur79cd"><div class="form-floating mb-2"><input type="text" class="form-control" id="loginName" placeholder=" " required autocomplete="username"/> <label for="loginName">Username</label></div> <div class="form-floating mb-2"><input type="password" class="form-control" id="loginPw" placeholder=" " required autocomplete="current-password"/> <label for="loginPw">Password</label></div> <div class="col-12"><button type="submit" class="btn btn-primary w-100">Login</button></div></form></div>',1);function el(n,d){Ye(d,!1);let g=he(d,"username",12,"admin"),y=ae("123456"),x=ae(!1),D=ae("");const L=As();at(()=>{se.register("login",({username:t})=>{L("login",{username:t})},t=>{J(x,!1),De.add({text:t,type:"error"})})}),Wt(()=>{se.unregister("login")});async function i(){J(x,!0),se.send("login",{username:g(),password:k(y)}),J(D,""),J(y,"")}it();var o=Qa(),h=Be(o);{var _=t=>{Ws(t,{})};ee(h,t=>{k(x)&&t(_)})}var a=$(h,2),l=P(a);{var v=t=>{Va(t,{type:"error",dismissible:!0,children:(c,p)=>{var m=ut();ne(()=>ie(m,k(D))),j(c,m)},$$slots:{default:!0}})};ee(l,t=>{k(D)&&t(v)})}var S=$(l,2),u=P(S),r=P(u),s=$(u,2),e=P(s);Fr(r,g),ve("input",r,()=>{g(g().toLowerCase().trim())}),Fr(e,()=>k(y),t=>J(y,t)),ve("submit",S,Nr(()=>i())),dt(3,S,()=>Tt),j(n,o),Qe()}function fi(n,d=0){return Math.round(n*10**d)/10**d}function Vt(n){const d=["","Ki","Mi","Gi","Ti"];let g=0;for(;n>=1024;)n/=1024,g++;const y=Math.max(Math.floor(Math.log10(Math.floor(n))),0);return fi(n,2-y)+" "+d[g]+"B"}function ar(n){return new Date(n).toLocaleString(void 0,{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})}function Us(n,d){var g;if((g=window==null?void 0:window.navigator)!=null&&g.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(n,d);else{const y=document.createElement("a");document.body.appendChild(y);const x=window.URL.createObjectURL(n);y.href=x,y.download=d,y.click(),setTimeout(()=>{window.URL.revokeObjectURL(x),document.body.removeChild(y)},0)}}var tl=Z('<div class="d-flex align-items-center"><strong>Loading...</strong> <div class="spinner-border ms-auto" role="status" aria-hidden="true"></div></div>'),rl=Z('<span class="spinner-grow spinner-grow-sm" role="status" aria-hidden="true"></span>'),il=Z('<button type="button" class="btn btn-outline-warning"><!> Restart</button>'),sl=Z('<span class="spinner-grow spinner-grow-sm" role="status" aria-hidden="true"></span>'),nl=Z('<button type="button" class="btn btn-outline-danger"><!> Stop</button>'),ol=Z("<!> <!>",1),al=Z('<span class="spinner-grow spinner-grow-sm" role="status" aria-hidden="true"></span>'),ll=Z('<button type="button" class="btn btn-outline-success"><!> Start</button>'),cl=Z('<div class="ms-4"><!></div>'),hl=Z('<span class="text-muted font-monospace"> </span>'),dl=Z('<a target="_blank" rel="noopener noreferrer" class="text-decoration-none"> </a>'),ul=Z('<a target="_blank" rel="noopener noreferrer" class="text-decoration-none"> </a>'),fl=Z('<div class="d-flex mb-3"><div class="icon-left ms-1 me-3 svelte-n9m8lc"><!></div> <div class="flex-grow-1"><div class="mb-1">Processor</div> <div class="progress"><div class="progress-bar text-white overflow-visible ps-1"> </div></div></div></div>'),_l=Z('<span class="badge rounded-pill bg-primary ms-2"> </span>'),vl=Z('<span class="badge rounded-pill bg-warning ms-2"> </span>'),pl=Z('<span class="badge rounded-pill bg-info ms-2"> </span>'),gl=Z('<div class="progress-bar progress-bar-striped bg-warning"></div>'),ml=Z('<div class="progress"><div class="progress-bar text-white overflow-visible ps-1"> </div> <!></div>'),Sl=Z('<div class="d-flex mb-3"><div class="icon-left ms-1 me-3 svelte-n9m8lc"><!></div> <div class="flex-grow-1"><div class="mb-1"><span class="me-2">Memory</span> <!> <!> <!></div> <!></div></div>'),bl=Z('<div class="me-5"><div class="mb-1">Network</div> <span title="Received Traffic" class="me-3"> </span> <span title="Sent Traffic"> </span></div>'),wl=Z('<span class="badge bg-dark me-2"> </span>'),Cl=Z('<div class="flex-grow-1"><div class="mb-1">Ports</div> <!></div>'),yl=Z('<div class="d-flex mb-3"><div class="icon-left ms-1 me-3 svelte-n9m8lc"><!></div> <!> <!></div>'),El=Z('<div class="fw-bold">Stopped</div> <!>',1),xl=Z('<div class="fw-bold">Started</div> ',1),kl=Z('<div class="fw-bold">Stopped</div> ',1),Ll=Z('<div class="fw-bold">Started</div> ',1),Dl=Z('<tr><td class="text-end border-end text-break"> </td><td class="text-break"> </td></tr>'),Rl=Z('<tr><td class="text-end border-end text-break"> </td><td class="text-break"> </td></tr>'),Al=Z('<div class="d-flex mb-3"><div class="icon-left ms-1 me-3 svelte-n9m8lc"><!></div> <div class="flex-grow-1 d-lg-flex" style="font-size: small"><div><table class="table table-striped border"><thead><tr><th scope="col" colspan="2" style="font-weight: normal">Environment Variables</th></tr></thead><tbody></tbody></table></div> <div><table class="table table-striped border"><thead><tr><th scope="col" colspan="2" style="font-weight: normal">Labels</th></tr></thead><tbody></tbody></table></div></div></div>'),Tl=Z('<div class="d-flex mb-3"><div class="icon-left ms-1 me-3 svelte-n9m8lc"><!></div> <div class="d-flex flex-column flex-grow-1"><div class="flex-grow-1 d-flex align-items-center justify-content-between"><div class="flex-grow-1"><div class="mb-1"><span class="me-2">Container</span> <span class="text-muted font-monospace"> </span></div> <div><h6> </h6></div></div> <!></div> <div><!> <code> </code></div></div></div> <div class="d-flex mb-3"><div class="icon-left ms-1 me-3 svelte-n9m8lc"><!></div> <div class="flex-grow-1"><div class="mb-1"><span class="me-2">Image</span> <!></div> <div><h6><!> <span class="ms-1"><!> </span></h6></div></div></div> <!> <!> <!> <div class="d-flex mb-3"><div class="icon-left ms-1 me-3 svelte-n9m8lc"><!></div> <div class="flex-grow-1 pb-5 mb-5"><div class="mb-1">Timeline</div> <div class="timeline mt-2 svelte-n9m8lc"><div class="tl-container svelte-n9m8lc" style="margin-left: 5%"><div class="popup svelte-n9m8lc"><div class="fw-bold">Created</div> </div></div> <div class="tl-container svelte-n9m8lc" style="margin-left: 27%"><div class="popup svelte-n9m8lc"><div class="fw-bold"> </div> Crashes</div></div> <div class="tl-container svelte-n9m8lc" style="margin-left: 49%"><div class="popup svelte-n9m8lc"><!></div></div> <div class="tl-container svelte-n9m8lc" style="margin-left: 71%"><div class="popup svelte-n9m8lc"><!></div></div> <div class="tl-container svelte-n9m8lc" style="margin-left: 93%"><div class="popup svelte-n9m8lc">Currently <div class="fw-bold"> </div></div></div></div></div></div> <!>',1),Bl=Z("<div><!></div>");function Ml(n,d){Ye(d,!1);const g=ae(),y=ae(),x=ae(),D=ae();let L=he(d,"enable_actions",8),i=he(d,"container_id",8),o,h,_=ae(!0),a=ae(null),l=ae();wr(()=>{i()!==o&&(o=i(),J(_,!0),J(a,null),i()&&se.send("get_container_info",{container_id:i()}))}),at(()=>{window.scrollTo({top:0,behavior:"smooth"}),se.register("get_container_info",e=>{e.id===i()&&(J(l,e),J(_,!1))},e=>De.add({text:e,type:"error"})),se.register("set_container_state",()=>{J(a,null)},e=>De.add({text:e,type:"error"})),h=setInterval(()=>{se.send("get_container_info",{container_id:i()})},3e3)}),Wt(()=>{clearInterval(h),se.unregister("get_container_info"),se.unregister("set_container_state")});function v(e){switch(se.send("set_container_state",{container_id:i(),action:e}),J(a,e),e){case"start":De.add({text:"Starting container ...",type:"success"});break;case"restart":De.add({text:"Restarting container ...",type:"info"});break;case"stop":De.add({text:"Stopping container ...",type:"info"});break}}Ct(()=>k(l),()=>{var e,t,c,p;J(g,(((t=(e=k(l))==null?void 0:e.mem)==null?void 0:t.used)||0)*100/(((p=(c=k(l))==null?void 0:c.mem)==null?void 0:p.total)||0))}),Ct(()=>k(l),()=>{var e,t,c,p;J(y,(((t=(e=k(l))==null?void 0:e.mem)==null?void 0:t.max_used)||0)*100/(((p=(c=k(l))==null?void 0:c.mem)==null?void 0:p.total)||0))}),Ct(()=>k(l),()=>{var e,t,c,p;J(x,(e=k(l))!=null&&e.image.name.includes(":")?(c=k(l))==null?void 0:c.image.name.slice(0,(t=k(l))==null?void 0:t.image.name.lastIndexOf(":")):(p=k(l))==null?void 0:p.image.name)}),Ct(()=>k(l),()=>{var e,t;J(D,(e=k(l))!=null&&e.image.name.includes(":")?(t=k(l))==null?void 0:t.image.name.split(":").pop():"latest")}),Sr(),it();var S=Bl(),u=P(S);{var r=e=>{var t=tl();j(e,t)},s=e=>{var t=Tl(),c=Be(t),p=P(c),m=P(p);de(m,{get icon(){return Ns},size:"2x"});var b=$(p,2),f=P(b),w=P(f),A=P(w),R=$(P(A),2),O=P(R),T=$(A,2),N=P(T),U=P(N),K=$(w,2);{var Y=le=>{var ce=cl(),pe=P(ce);{var Le=Se=>{var Oe=ol(),tt=Be(Oe);{var He=Ae=>{var Re=il(),Te=P(Re);{var we=Ce=>{de(Ce,{get icon(){return zs}})},Ie=Ce=>{var je=rl();j(Ce,je)};ee(Te,Ce=>{k(a)?Ce(Ie,!1):Ce(we)})}ne(()=>Re.disabled=!!k(a)),ve("click",Re,()=>v("restart")),j(Ae,Re)};ee(tt,Ae=>{(!k(a)||k(a)==="restart")&&Ae(He)})}var We=$(tt,2);{var ct=Ae=>{var Re=nl(),Te=P(Re);{var we=Ce=>{de(Ce,{get icon(){return Da}})},Ie=Ce=>{var je=sl();j(Ce,je)};ee(Te,Ce=>{k(a)?Ce(Ie,!1):Ce(we)})}ne(()=>Re.disabled=!!k(a)),ve("click",Re,()=>v("stop")),j(Ae,Re)};ee(We,Ae=>{(!k(a)||k(a)==="stop")&&Ae(ct)})}j(Se,Oe)},ze=(Se,Oe)=>{{var tt=He=>{var We=ll(),ct=P(We);{var Ae=Te=>{de(Te,{get icon(){return Ta}})},Re=Te=>{var we=al();j(Te,we)};ee(ct,Te=>{k(a)?Te(Re,!1):Te(Ae)})}ne(()=>We.disabled=!!k(a)),ve("click",We,()=>v("start")),j(He,We)};ee(Se,He=>{(!k(a)||k(a)==="start")&&He(tt)},Oe)}};ee(pe,Se=>{k(l).status==="running"?Se(Le):Se(ze,!1)})}j(le,ce)};ee(K,le=>{L()&&le(Y)})}var G=$(f,2),C=P(G);de(C,{get icon(){return ga}});var B=$(C,2),M=P(B),I=$(c,2),z=P(I),q=P(z);de(q,{get icon(){return ca},size:"2x"});var Q=$(z,2),te=P(Q),H=$(P(te),2);{var E=le=>{var ce=hl(),pe=P(ce);ne(Le=>ie(pe,Le),[()=>k(l).image.hash.substring(0,19)],fe),j(le,ce)};ee(H,le=>{var ce,pe,Le;((ce=k(l).image)==null?void 0:ce.hash)!==((Le=(pe=k(l))==null?void 0:pe.image)==null?void 0:Le.name)&&le(E)})}var W=$(te,2),F=P(W),V=P(F);{var X=le=>{var ce=dl(),pe=P(ce);ne(()=>{Pe(ce,"href",`https://hub.docker.com/_/${k(x)??""}`),ie(pe,k(x))}),j(le,ce)},oe=(le,ce)=>{{var pe=ze=>{var Se=ul(),Oe=P(Se);ne(()=>{Pe(Se,"href",`https://hub.docker.com/r/${k(x)??""}`),ie(Oe,k(x))}),j(ze,Se)},Le=ze=>{var Se=ut();ne(()=>ie(Se,k(x))),j(ze,Se)};ee(le,ze=>{k(x).match(/^\w+\/\w+$/)?ze(pe):ze(Le,!1)},ce)}};ee(V,le=>{k(x).includes("/")?le(oe,!1):le(X)})}var ue=$(V,2),_e=P(ue);de(_e,{get icon(){return ma}});var ge=$(_e),re=$(I,2);{var Fe=le=>{var ce=fl(),pe=P(ce),Le=P(pe);de(Le,{get icon(){return Fs},size:"2x"});var ze=$(pe,2),Se=$(P(ze),2),Oe=P(Se),tt=P(Oe);ne(He=>{kr(Oe,`width: ${k(l).cpu.perc??""}%`),ie(tt,`${He??""}%`)},[()=>fi(k(l).cpu.perc)],fe),j(le,ce)};ee(re,le=>{k(l).cpu&&le(Fe)})}var et=$(re,2);{var mt=le=>{var ce=Sl(),pe=P(ce),Le=P(pe);de(Le,{get icon(){return Ps},size:"2x"});var ze=$(pe,2),Se=P(ze),Oe=$(P(Se),2);{var tt=we=>{var Ie=_l(),Ce=P(Ie);ne(je=>ie(Ce,`Now ${je??""}`),[()=>Vt(k(l).mem.used)],fe),j(we,Ie)};ee(Oe,we=>{k(l).mem.used!==null&&we(tt)})}var He=$(Oe,2);{var We=we=>{var Ie=vl(),Ce=P(Ie);ne(je=>ie(Ce,`Max ${je??""}`),[()=>Vt(k(l).mem.max_used)],fe),j(we,Ie)};ee(He,we=>{k(l).mem.max_used!==null&&we(We)})}var ct=$(He,2);{var Ae=we=>{var Ie=pl(),Ce=P(Ie);ne(je=>ie(Ce,`Limit ${je??""}`),[()=>Vt(k(l).mem.total)],fe),j(we,Ie)};ee(ct,we=>{k(l).mem.total!==null&&we(Ae)})}var Re=$(Se,2);{var Te=we=>{var Ie=ml(),Ce=P(Ie),je=P(Ce),nr=$(Ce,2);{var or=xt=>{var Ei=gl();ne(()=>kr(Ei,`width: ${k(y)-k(g)}%`)),j(xt,Ei)};ee(nr,xt=>{k(l).mem.max_used!==null&&xt(or)})}ne(xt=>{kr(Ce,`width: ${k(g)??""}%; z-index: 2`),ie(je,`${xt??""}%`)},[()=>fi(k(g))],fe),j(we,Ie)};ee(Re,we=>{k(l).mem.used!==null&&k(l).mem.total!==null&&we(Te)})}j(le,ce)};ee(et,le=>{k(l).mem&&le(mt)})}var me=$(et,2);{var Ne=le=>{var ce=yl(),pe=P(ce),Le=P(pe);de(Le,{get icon(){return Ea},size:"2x"});var ze=$(pe,2);{var Se=He=>{var We=bl(),ct=$(P(We),2),Ae=P(ct),Re=$(ct,2),Te=P(Re);ne((we,Ie)=>{ie(Ae,`â¼ ${we??""}`),ie(Te,`â² ${Ie??""}`)},[()=>Vt(k(l).net.rx_bytes),()=>Vt(k(l).net.tx_bytes)],fe),j(He,We)};ee(ze,He=>{k(l).net&&He(Se)})}var Oe=$(ze,2);{var tt=He=>{var We=Cl(),ct=$(P(We),2);_t(ct,1,()=>k(l).ports,ft,(Ae,Re)=>{var Te=wl(),we=P(Te);ne(()=>ie(we,k(Re))),j(Ae,Te)}),j(He,We)};ee(Oe,He=>{var We;((We=k(l).ports)==null?void 0:We.length)>0&&He(tt)})}j(le,ce)};ee(me,le=>{var ce;(k(l).net||((ce=k(l).ports)==null?void 0:ce.length)>0)&&le(Ne)})}var Me=$(me,2),lt=P(Me),ke=P(lt);de(ke,{get icon(){return ya},size:"2x"});var Ke=$(lt,2),St=$(P(Ke),2),Ue=P(St),$e=P(Ue),Ve=$(P($e)),bt=$(Ue,2),xe=P(bt),Yr=P(xe),js=P(Yr),Ci=$(bt,2),qs=P(Ci),Ks=P(qs);{var Vs=le=>{var ce=El(),pe=$(Be(ce),2);{var Le=Se=>{var Oe=ut("Never");j(Se,Oe)},ze=Se=>{var Oe=ut();ne(tt=>ie(Oe,tt),[()=>ar(k(l).finished_at)],fe),j(Se,Oe)};ee(pe,Se=>{k(l).finished_at<k(l).created_at?Se(Le):Se(ze,!1)})}j(le,ce)},Gs=le=>{var ce=xl(),pe=$(Be(ce));ne(Le=>ie(pe,` ${Le??""}`),[()=>ar(k(l).started_at)],fe),j(le,ce)};ee(Ks,le=>{k(l).finished_at<k(l).started_at?le(Vs):le(Gs,!1)})}var yi=$(Ci,2),Xs=P(yi),Zs=P(Xs);{var Js=le=>{var ce=kl(),pe=$(Be(ce));ne(Le=>ie(pe,` ${Le??""}`),[()=>ar(k(l).finished_at)],fe),j(le,ce)},Ys=le=>{var ce=Ll(),pe=$(Be(ce));ne(Le=>ie(pe,` ${Le??""}`),[()=>ar(k(l).started_at)],fe),j(le,ce)};ee(Zs,le=>{k(l).finished_at>k(l).started_at?le(Js):le(Ys,!1)})}var Qs=$(yi,2),en=P(Qs),tn=$(P(en)),rn=P(tn),sn=$(Me,2);{var nn=le=>{var ce=Al(),pe=P(ce),Le=P(pe);de(Le,{get icon(){return pa},size:"2x"});var ze=$(pe,2),Se=P(ze),Oe=P(Se),tt=$(P(Oe));_t(tt,5,()=>Object.entries(k(l).env).sort(([Ae],[Re])=>Ae.localeCompare(Re)),ft,(Ae,Re)=>{var Te=Ai(()=>Li(k(Re),2));let we=()=>k(Te)[0],Ie=()=>k(Te)[1];var Ce=Dl(),je=P(Ce),nr=P(je),or=$(je),xt=P(or);ne(()=>{ie(nr,we()),ie(xt,Ie())}),j(Ae,Ce)});var He=$(Se,2),We=P(He),ct=$(P(We));_t(ct,5,()=>Object.entries(k(l).labels).sort(([Ae],[Re])=>Ae.localeCompare(Re)),ft,(Ae,Re)=>{var Te=Ai(()=>Li(k(Re),2));let we=()=>k(Te)[0],Ie=()=>k(Te)[1];var Ce=Rl(),je=P(Ce),nr=P(je),or=$(je),xt=P(or);ne(()=>{ie(nr,we()),ie(xt,Ie())}),j(Ae,Ce)}),j(le,ce)};ee(sn,le=>{(k(l).env||k(l).labels)&&le(nn)})}ne((le,ce,pe,Le)=>{ie(O,`#${le??""}`),ie(U,ce),ie(M,k(l).command),ie(ge,` ${k(D)??""}`),ie(Ve,` ${pe??""}`),ie(js,k(l).crashes),ie(rn,Le)},[()=>k(l).id.substring(0,12),()=>k(l).name.replace(/^\//,""),()=>ar(k(l).created_at),()=>k(l).status.charAt(0).toUpperCase()+k(l).status.slice(1).toLowerCase()],fe),j(e,t)};ee(u,e=>{k(_)?e(r):e(s,!1)})}j(n,S),Qe()}function Ol({onlyFirst:n=!1}={}){const g=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?(?:\\u0007|\\u001B\\u005C|\\u009C))","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-nq-uy=><~]))"].join("|");return new RegExp(g,n?void 0:"g")}const Il=Ol();function Pl(n){if(typeof n!="string")throw new TypeError(`Expected a \`string\`, got \`${typeof n}\``);return n.replace(Il,"")}var Hl=Z('<div class="d-flex align-items-center"><strong>Loading...</strong> <div class="spinner-border ms-auto" role="status" aria-hidden="true"></div></div>'),Fl=Z("<p>No Log Output yet ...</p>"),Nl=Z('<time class="me-1 px-1 svelte-itlo0b"><!></time>'),zl=Z('<span class="pe-3 svelte-itlo0b"><!><span class="pe-3"> </span></span>'),Wl=Z('<div class="d-flex justify-content-between align-items-center mb-2"><div><select class="form-select"><option>hide timestamps</option><option>local timestamps</option><option>raw timestamps</option></select></div> <div><button type="button" class="btn mx-1" title="Scroll to Top"><!></button> <button type="button" class="btn mx-1" title="Scroll to Bottom"><!></button> <button type="button" class="btn mx-1" title="Download shown log lines"><!></button> <button type="button" class="btn mx-1" title="Fullscreen"><!></button></div></div> <pre class="mb-0 svelte-itlo0b"></pre>',1),Ul=Z("<div><!></div>");function $l(n,d){Ye(d,!1);let g=he(d,"container_id",8),y,x=ae(),D,L=ae(!0),i=ae([]),o=ae("local");wr(()=>{g()!==y&&(y=g(),J(L,!0),J(i,[]),g()&&se.send("get_container_logs",{container_id:g()}))}),at(()=>{se.register("get_container_logs",r=>{if(J(L,!1),(r==null?void 0:r.length)>0){let s=!k(i)||k(x)&&k(x).scrollTop>=k(x).scrollHeight-k(x).clientHeight;const e=k(i).length+r.length;e>5e3&&k(i).slice(e-5e3),k(i).push(...r.map(t=>Pl(t))),s&&Ls().then(()=>ei(x,k(x).scrollTop=k(x).scrollHeight))}},r=>De.add({text:r,type:"error"})),D=setInterval(()=>{se.send("get_container_logs",{container_id:g(),onlynew:!0})},3e3)}),Wt(()=>{clearInterval(D),se.unregister("get_container_logs")});function h(){var r;(r=k(x))!=null&&r.requestFullscreen&&k(x).requestFullscreen({navigationUI:"show"})}function _(){Us(new Blob(k(i),{type:"text/plain"}),g()+".log")}function a(r){return new Date(r).toLocaleDateString(void 0,{weekday:"short",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})}it();var l=Ul(),v=P(l);{var S=r=>{var s=Hl();j(r,s)},u=(r,s)=>{{var e=c=>{var p=Fl();j(c,p)},t=c=>{var p=Wl(),m=Be(p),b=P(m),f=P(b);ne(()=>{k(o),lo(()=>{})});var w=P(f);w.value=w.__value="off";var A=$(w);A.value=A.__value="local";var R=$(A);R.value=R.__value="raw";var O=$(b,2),T=P(O),N=P(T);de(N,{get icon(){return fa},size:"lg",color:"#666"});var U=$(T,2),K=P(U);de(K,{get icon(){return aa},size:"lg",color:"#666"});var Y=$(U,2),G=P(Y);de(G,{get icon(){return xa},size:"lg",color:"#666"});var C=$(Y,2),B=P(C);de(B,{get icon(){return Hs},size:"lg",color:"#666"});var M=$(m,2);_t(M,5,()=>k(i),ft,(I,z)=>{var q=zl();const Q=fe(()=>k(z).substring(0,k(z).indexOf(" "))),te=fe(()=>k(z).substring(k(z).indexOf(" ")+1));var H=P(q);{var E=V=>{var X=Nl(),oe=P(X);{var ue=ge=>{var re=ut();ne(Fe=>ie(re,Fe),[()=>a(k(Q))],fe),j(ge,re)},_e=ge=>{var re=ut();ne(()=>ie(re,k(Q))),j(ge,re)};ee(oe,ge=>{k(o)==="local"?ge(ue):ge(_e,!1)})}ne(()=>Pe(X,"datetime",k(Q))),j(V,X)};ee(H,V=>{k(o)!=="off"&&V(E)})}var W=$(H),F=P(W);ne(()=>ie(F,k(te))),j(I,q)}),Jr(M,I=>J(x,I),()=>k(x)),Do(f,()=>k(o),I=>J(o,I)),ve("click",T,()=>ei(x,k(x).scrollTop=0)),ve("click",U,()=>ei(x,k(x).scrollTop=k(x).scrollHeight)),ve("click",Y,_),ve("click",C,h),j(c,p)};ee(r,c=>{k(i).length===0?c(e):c(t,!1)},s)}};ee(v,r=>{k(L)?r(S):r(u,!1)})}j(n,l),Qe()}var jl=Z('<div class="dropdown"><button type="button"><!></button> <ul class="dropdown-menu svelte-17q1qz7"><!></ul></div>');function Ki(n,d){let g=he(d,"btnClass",8,"secondary");var y=jl(),x=P(y),D=P(x);Hr(D,d,"button",{},o=>{de(o,{get icon(){return Ca}})});var L=$(x,2),i=P(L);Hr(i,d,"default",{},null),ne(()=>qe(x,1,`btn btn-${g()??""} dropdown-toggle`,"svelte-17q1qz7")),j(n,y)}var ql=Z('<li><button type="button"><!></button></li>');function ii(n,d){let g=he(d,"active",8,!1);var y=ql(),x=P(y);let D;var L=P(x);Hr(L,d,"default",{},null),ne(i=>D=qe(x,1,"dropdown-item",null,D,i),[()=>({active:g()})],fe),ve("click",x,function(i){Ho.call(this,d,i)}),j(n,y)}var Kl=Z('<div class="d-flex align-items-center"><strong>Loading...</strong> <div class="spinner-border ms-auto" role="status" aria-hidden="true"></div></div>'),Vl=Z('<button type="button" class="btn btn-outline-primary"><!></button>'),Gl=Z('<button type="button" class="btn btn-secondary border-dark"> </button>'),Xl=Z("<!> <!>",1),Zl=Z('<span slot="button" class="me-1"><!> Add</span>'),Jl=Z('<!> <input type="file" style="display: none"/>',1),Yl=Z('<span class="badge bg-warning ms-2">readonly</span>'),Ql=Z('<div class="d-flex justify-content-between align-items-center"><span> </span> <span><!> <span class="badge bg-secondary ms-2"> </span></span></div>'),ec=Z('<span slot="button" class="me-1"><!> Volumes</span>'),tc=Z('<div class="ms-4"><!></div>'),rc=Z('<tr><td><!> <wbr/> </td><td class="text-end" style="word-break: break-all"><!></td><td class="text-center"> <wbr/> </td><td class="text-center"> </td><td class="text-center font-monospace" style="word-break: break-all"> </td></tr>'),ic=Z('<div class="d-flex justify-content-between align-items-center"><div class="d-flex"><div class="btn-group me-1"><!> <button type="button" class="btn btn-outline-primary"><!></button></div> <div class="btn-group mx-2" role="group"></div></div> <div class="d-flex"><!> <!></div></div> <table class="table table-hover"><thead><tr><th scope="col">Name</th><th scope="col" class="text-end">Size</th><th scope="col" class="text-center">Owner</th><th scope="col" class="text-center">Modified</th><th scope="col" class="text-center">Permissions</th></tr></thead><tbody></tbody></table>',1),sc=Z('<div style="overflow-x:auto"><!></div>');function nc(n,d){Ye(d,!1);const g=ae();let y=he(d,"container_id",8),x=he(d,"allow_download",8),D=he(d,"allow_upload",8),L=ae(),i=ae(!0),o,h=ae("/"),_=ae(null),a=ae(null);wr(()=>{y()!==o&&(o=y(),J(i,!0),J(h,"/"),J(_,null),J(a,null),y()&&se.send("get_filesystem_info",{container_id:y()}))}),at(()=>{se.register("get_filesystem_info",p=>{v(p.workdir),J(a,p)},p=>De.add({text:p,type:"error"})),se.register("get_directory_list",p=>{window.scrollTo({top:0,behavior:"smooth"}),J(_,p.entries),J(h,p.path),J(i,!1)},p=>{De.add({text:p,type:"error"}),J(_,null),J(i,!1)}),se.register("download_file",p=>{Us(p.blob,p.payload.path.split("/").pop())},p=>De.add({text:p,type:"error"})),se.register("create_folder",()=>{v(k(h))},p=>De.add({text:p,type:"error"})),se.register("upload_file",()=>{v(k(h))},p=>De.add({text:p,type:"error"}))}),Wt(()=>{se.unregister("get_filesystem_info"),se.unregister("get_directory_list"),se.unregister("create_folder"),se.unregister("upload_file"),se.unregister("download_file")});function l(p){let m=k(h);m.endsWith("/")||(m+="/"),m+=p,v(m)}function v(p){J(h,p),se.send("get_directory_list",{container_id:y(),path:p}),J(i,!0),J(_,null)}function S(p){x()&&se.send("download_file",{container_id:y(),path:`${k(h)}/${p}`})}function u(){const p=prompt("Folder name:");p&&se.send("create_folder",{container_id:y(),path:`${k(h)}/${p}`})}async function r(){var b;const p=f=>new Promise((w,A)=>{const R=new FileReader;R.readAsDataURL(f),R.onload=()=>w(R.result.split(",")[1]),R.onerror=O=>A(O)}),m=(b=k(L).files)==null?void 0:b[0];m&&confirm(`Upload file "${m.name}"?`)&&se.send("upload_file",{container_id:y(),path:`${k(h)}/${m.name}`,content:await p(m)})}Ct(()=>k(h),()=>{J(g,()=>{const p=[],m=k(h).split("/");let b="";for(const f of m)f&&(b+="/"+f,p.push({segment:f,totalPath:b}));return p.unshift({segment:"/",totalPath:"/"}),p})}),Sr(),it();var s=sc(),e=P(s);{var t=p=>{var m=Kl();j(p,m)},c=p=>{var m=ic(),b=Be(m),f=P(b),w=P(f),A=P(w);{var R=I=>{var z=Vl(),q=P(z);de(q,{get icon(){return La}}),ve("click",z,()=>v(k(a).workdir)),j(I,z)};ee(A,I=>{k(a)&&I(R)})}var O=$(A,2),T=P(O);de(T,{get icon(){return zs}});var N=$(w,2);_t(N,5,()=>k(g)(),ft,(I,z)=>{var q=Gl(),Q=P(q);ne(()=>ie(Q,k(z).segment||"/")),ve("click",q,()=>v(k(z).totalPath)),j(I,q)});var U=$(f,2),K=P(U);{var Y=I=>{var z=Jl(),q=Be(z);Ki(q,{btnClass:"outline-primary",children:(te,H)=>{var E=Xl(),W=Be(E);ii(W,{$$events:{click:u},children:(V,X)=>{var oe=ut("Add Folder");j(V,oe)},$$slots:{default:!0}});var F=$(W,2);ii(F,{$$events:{click:()=>k(L).click()},children:(V,X)=>{var oe=ut("Upload File");j(V,oe)},$$slots:{default:!0}}),j(te,E)},$$slots:{default:!0,button:(te,H)=>{var E=Zl(),W=P(E);de(W,{get icon(){return Ba}}),j(te,E)}}});var Q=$(q,2);Jr(Q,te=>J(L,te),()=>k(L)),ve("change",Q,r),j(I,z)};ee(K,I=>{D()&&I(Y)})}var G=$(K,2);{var C=I=>{var z=tc(),q=P(z);Ki(q,{children:(Q,te)=>{var H=sr(),E=Be(H);_t(E,1,()=>k(a).mounts,ft,(W,F)=>{ii(W,{$$events:{click:()=>v(k(F).destination)},children:(V,X)=>{var oe=Ql(),ue=P(oe),_e=P(ue),ge=$(ue,2),re=P(ge);{var Fe=me=>{var Ne=Yl();j(me,Ne)};ee(re,me=>{k(F).readonly&&me(Fe)})}var et=$(re,2),mt=P(et);ne(()=>{ie(_e,k(F).destination),ie(mt,k(F).type)}),j(V,oe)},$$slots:{default:!0}})}),j(Q,H)},$$slots:{default:!0,button:(Q,te)=>{var H=ec(),E=P(H);de(E,{get icon(){return ba}}),j(Q,H)}}}),j(I,z)};ee(G,I=>{var z;k(a)&&((z=k(a).mounts)==null?void 0:z.length)>0&&I(C)})}var B=$(b,2),M=$(P(B));_t(M,5,()=>k(_)||[],ft,(I,z)=>{var q=rc();let Q;var te=P(q),H=P(te);{var E=me=>{de(me,{get icon(){return la},size:"lg",color:"#3B6"})},W=(me,Ne)=>{{var Me=ke=>{de(ke,{get icon(){return Aa},size:"lg",color:"#36B"})},lt=(ke,Ke)=>{{var St=$e=>{de($e,{get icon(){return na},size:"lg",color:"#B36"})},Ue=$e=>{var Ve=ut();ne(()=>ie(Ve,k(z).type)),j($e,Ve)};ee(ke,$e=>{k(z).type==="l"?$e(St):$e(Ue,!1)},Ke)}};ee(me,ke=>{k(z).type==="f"?ke(Me):ke(lt,!1)},Ne)}};ee(H,me=>{k(z).type==="d"?me(E):me(W,!1)})}var F=$(H,3),V=$(te),X=P(V);{var oe=me=>{var Ne=ut();ne(()=>ie(Ne,k(z).filesize)),j(me,Ne)};ee(X,me=>{k(z).type==="f"&&me(oe)})}var ue=$(V),_e=P(ue),ge=$(_e,2,!0),re=$(ue),Fe=P(re),et=$(re),mt=P(et);ne(me=>{Q=qe(q,1,"svelte-1hbb9tz",null,Q,me),ie(F,` ${k(z).name??""}`),ie(_e,`${k(z).owner??""} `),ie(ge,k(z).group),ie(Fe,k(z).modtime),ie(mt,k(z).permissions)},[()=>({clickable:k(z).type==="d"||x()})],fe),ve("click",q,()=>k(z).type==="d"?l(k(z).name):S(k(z).name)),j(I,q)}),ve("click",O,()=>v(k(h))),j(p,m)};ee(e,p=>{k(i)?p(t):p(c,!1)})}j(n,s),Qe()}var oc=Z('<div class="d-flex align-items-center"><strong>Loading...</strong> <div class="spinner-border ms-auto" role="status" aria-hidden="true"></div></div>'),ac=Z('<div style="width: 2rem" class="me-2 d-flex justify-content-end align-items-center"><!></div>'),lc=Z('<tr><td class="text-end"> </td><td class="text-end"><!></td><td class="text-end"><!></td><td class="text-center"> </td><td class="text-center"> </td><td class="text-start"><div class="d-flex"><!> <div class="font-monospace"> </div></div></td></tr>'),cc=Z('<table class="table table-striped"><thead><tr><th scope="col" class="text-end" title="Process ID">PID</th><th scope="col" class="text-end" title="Processor Usage">CPU</th><th scope="col" class="text-end">Memory</th><th scope="col" class="text-center">Started At</th><th scope="col" class="text-center">User</th><th scope="col" class="text-start">Command</th></tr></thead><tbody></tbody></table>'),hc=Z('<div style="overflow-x:auto"><!></div>');function dc(n,d){Ye(d,!1);let g=he(d,"container_id",8),y,x,D=ae(!0),L=ae(null);wr(()=>{g()!==y&&(y=g(),J(D,!0),J(L,null),g()&&se.send("get_processes",{container_id:g()}))}),at(()=>{se.register("get_processes",l=>{J(L,l),J(D,!1)},l=>De.add({text:l,type:"error"})),x=setInterval(()=>{se.send("get_processes",{container_id:g()})},3e3)}),Wt(()=>{clearInterval(x),se.unregister("get_processes")});function i(l,v){return l??v}it();var o=hc(),h=P(o);{var _=l=>{var v=oc();j(l,v)},a=l=>{var v=cc(),S=$(P(v));_t(S,5,()=>k(L)||[],ft,(u,r)=>{var s=lc(),e=P(s),t=P(e),c=$(e),p=P(c);{var m=C=>{var B=ut();ne(()=>ie(B,`${k(r)["%cpu"]??""}%`)),j(C,B)};ee(p,C=>{i(k(r)["%cpu"],null)&&C(m)})}var b=$(c),f=P(b);{var w=C=>{var B=ut();ne(()=>ie(B,`${k(r)["%mem"]??""}%`)),j(C,B)};ee(f,C=>{i(k(r)["%mem"],null)&&C(w)})}var A=$(b),R=P(A),O=$(A),T=P(O),N=$(O),U=P(N),K=P(U);_t(K,1,()=>Array(k(r).level),ft,(C,B,M)=>{var I=ac(),z=P(I);{var q=Q=>{de(Q,{get icon(){return Ha},rotate:90})};ee(z,Q=>{parseInt(k(r).level)===M+1&&Q(q)})}j(C,I)});var Y=$(K,2),G=P(Y);ne((C,B)=>{ie(t,k(r).pid),ie(R,C),ie(T,B),ie(G,k(r).command)},[()=>i(k(r).stime,""),()=>i(k(r).user,"")],fe),j(u,s)}),j(l,v)};ee(h,l=>{k(D)?l(_):l(a,!1)})}j(n,o),Qe()}var si={exports:{}},Vi;function uc(){return Vi||(Vi=1,function(n,d){(function(g,y){n.exports=y()})(globalThis,()=>(()=>{var g={4567:function(L,i,o){var h=this&&this.__decorate||function(e,t,c,p){var m,b=arguments.length,f=b<3?t:p===null?p=Object.getOwnPropertyDescriptor(t,c):p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")f=Reflect.decorate(e,t,c,p);else for(var w=e.length-1;w>=0;w--)(m=e[w])&&(f=(b<3?m(f):b>3?m(t,c,f):m(t,c))||f);return b>3&&f&&Object.defineProperty(t,c,f),f},_=this&&this.__param||function(e,t){return function(c,p){t(c,p,e)}};Object.defineProperty(i,"__esModule",{value:!0}),i.AccessibilityManager=void 0;const a=o(9042),l=o(9924),v=o(844),S=o(4725),u=o(2585),r=o(3656);let s=i.AccessibilityManager=class extends v.Disposable{constructor(e,t,c,p){super(),this._terminal=e,this._coreBrowserService=c,this._renderService=p,this._rowColumns=new WeakMap,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="",this._accessibilityContainer=this._coreBrowserService.mainDocument.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=this._coreBrowserService.mainDocument.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let m=0;m<this._terminal.rows;m++)this._rowElements[m]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[m]);if(this._topBoundaryFocusListener=m=>this._handleBoundaryFocus(m,0),this._bottomBoundaryFocusListener=m=>this._handleBoundaryFocus(m,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions(),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=this._coreBrowserService.mainDocument.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this.register(new l.TimeBasedDebouncer(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this.register(this._terminal.onResize(m=>this._handleResize(m.rows))),this.register(this._terminal.onRender(m=>this._refreshRows(m.start,m.end))),this.register(this._terminal.onScroll(()=>this._refreshRows())),this.register(this._terminal.onA11yChar(m=>this._handleChar(m))),this.register(this._terminal.onLineFeed(()=>this._handleChar(`
`))),this.register(this._terminal.onA11yTab(m=>this._handleTab(m))),this.register(this._terminal.onKey(m=>this._handleKey(m.key))),this.register(this._terminal.onBlur(()=>this._clearLiveRegion())),this.register(this._renderService.onDimensionsChange(()=>this._refreshRowsDimensions())),this.register((0,r.addDisposableDomListener)(document,"selectionchange",()=>this._handleSelectionChange())),this.register(this._coreBrowserService.onDprChange(()=>this._refreshRowsDimensions())),this._refreshRows(),this.register((0,v.toDisposable)(()=>{this._accessibilityContainer.remove(),this._rowElements.length=0}))}_handleTab(e){for(let t=0;t<e;t++)this._handleChar(" ")}_handleChar(e){this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==e&&(this._charsToAnnounce+=e):this._charsToAnnounce+=e,e===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=a.tooMuchOutput)))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0}_handleKey(e){this._clearLiveRegion(),new RegExp("\\p{Control}","u").test(e)||this._charsToConsume.push(e)}_refreshRows(e,t){this._liveRegionDebouncer.refresh(e,t,this._terminal.rows)}_renderRows(e,t){const c=this._terminal.buffer,p=c.lines.length.toString();for(let m=e;m<=t;m++){const b=c.lines.get(c.ydisp+m),f=[],w=(b==null?void 0:b.translateToString(!0,void 0,void 0,f))||"",A=(c.ydisp+m+1).toString(),R=this._rowElements[m];R&&(w.length===0?(R.innerText="Â ",this._rowColumns.set(R,[0,1])):(R.textContent=w,this._rowColumns.set(R,f)),R.setAttribute("aria-posinset",A),R.setAttribute("aria-setsize",p))}this._announceCharacters()}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(e,t){const c=e.target,p=this._rowElements[t===0?1:this._rowElements.length-2];if(c.getAttribute("aria-posinset")===(t===0?"1":`${this._terminal.buffer.lines.length}`)||e.relatedTarget!==p)return;let m,b;if(t===0?(m=c,b=this._rowElements.pop(),this._rowContainer.removeChild(b)):(m=this._rowElements.shift(),b=c,this._rowContainer.removeChild(m)),m.removeEventListener("focus",this._topBoundaryFocusListener),b.removeEventListener("focus",this._bottomBoundaryFocusListener),t===0){const f=this._createAccessibilityTreeNode();this._rowElements.unshift(f),this._rowContainer.insertAdjacentElement("afterbegin",f)}else{const f=this._createAccessibilityTreeNode();this._rowElements.push(f),this._rowContainer.appendChild(f)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(t===0?-1:1),this._rowElements[t===0?1:this._rowElements.length-2].focus(),e.preventDefault(),e.stopImmediatePropagation()}_handleSelectionChange(){var w;if(this._rowElements.length===0)return;const e=document.getSelection();if(!e)return;if(e.isCollapsed)return void(this._rowContainer.contains(e.anchorNode)&&this._terminal.clearSelection());if(!e.anchorNode||!e.focusNode)return void console.error("anchorNode and/or focusNode are null");let t={node:e.anchorNode,offset:e.anchorOffset},c={node:e.focusNode,offset:e.focusOffset};if((t.node.compareDocumentPosition(c.node)&Node.DOCUMENT_POSITION_PRECEDING||t.node===c.node&&t.offset>c.offset)&&([t,c]=[c,t]),t.node.compareDocumentPosition(this._rowElements[0])&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_FOLLOWING)&&(t={node:this._rowElements[0].childNodes[0],offset:0}),!this._rowContainer.contains(t.node))return;const p=this._rowElements.slice(-1)[0];if(c.node.compareDocumentPosition(p)&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_PRECEDING)&&(c={node:p,offset:((w=p.textContent)==null?void 0:w.length)??0}),!this._rowContainer.contains(c.node))return;const m=({node:A,offset:R})=>{const O=A instanceof Text?A.parentNode:A;let T=parseInt(O==null?void 0:O.getAttribute("aria-posinset"),10)-1;if(isNaN(T))return console.warn("row is invalid. Race condition?"),null;const N=this._rowColumns.get(O);if(!N)return console.warn("columns is null. Race condition?"),null;let U=R<N.length?N[R]:N.slice(-1)[0]+1;return U>=this._terminal.cols&&(++T,U=0),{row:T,column:U}},b=m(t),f=m(c);if(b&&f){if(b.row>f.row||b.row===f.row&&b.column>=f.column)throw new Error("invalid range");this._terminal.select(b.column,b.row,(f.row-b.row)*this._terminal.cols-b.column+f.column)}}_handleResize(e){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let t=this._rowContainer.children.length;t<this._terminal.rows;t++)this._rowElements[t]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[t]);for(;this._rowElements.length>e;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){const e=this._coreBrowserService.mainDocument.createElement("div");return e.setAttribute("role","listitem"),e.tabIndex=-1,this._refreshRowDimensions(e),e}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){this._accessibilityContainer.style.width=`${this._renderService.dimensions.css.canvas.width}px`,this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let e=0;e<this._terminal.rows;e++)this._refreshRowDimensions(this._rowElements[e])}}_refreshRowDimensions(e){e.style.height=`${this._renderService.dimensions.css.cell.height}px`}};i.AccessibilityManager=s=h([_(1,u.IInstantiationService),_(2,S.ICoreBrowserService),_(3,S.IRenderService)],s)},3614:(L,i)=>{function o(l){return l.replace(/\r?\n/g,"\r")}function h(l,v){return v?"\x1B[200~"+l+"\x1B[201~":l}function _(l,v,S,u){l=h(l=o(l),S.decPrivateModes.bracketedPasteMode&&u.rawOptions.ignoreBracketedPasteMode!==!0),S.triggerDataEvent(l,!0),v.value=""}function a(l,v,S){const u=S.getBoundingClientRect(),r=l.clientX-u.left-10,s=l.clientY-u.top-10;v.style.width="20px",v.style.height="20px",v.style.left=`${r}px`,v.style.top=`${s}px`,v.style.zIndex="1000",v.focus()}Object.defineProperty(i,"__esModule",{value:!0}),i.rightClickHandler=i.moveTextAreaUnderMouseCursor=i.paste=i.handlePasteEvent=i.copyHandler=i.bracketTextForPaste=i.prepareTextForTerminal=void 0,i.prepareTextForTerminal=o,i.bracketTextForPaste=h,i.copyHandler=function(l,v){l.clipboardData&&l.clipboardData.setData("text/plain",v.selectionText),l.preventDefault()},i.handlePasteEvent=function(l,v,S,u){l.stopPropagation(),l.clipboardData&&_(l.clipboardData.getData("text/plain"),v,S,u)},i.paste=_,i.moveTextAreaUnderMouseCursor=a,i.rightClickHandler=function(l,v,S,u,r){a(l,v,S),r&&u.rightClickSelect(l),v.value=u.selectionText,v.select()}},7239:(L,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ColorContrastCache=void 0;const h=o(1505);i.ColorContrastCache=class{constructor(){this._color=new h.TwoKeyMap,this._css=new h.TwoKeyMap}setCss(_,a,l){this._css.set(_,a,l)}getCss(_,a){return this._css.get(_,a)}setColor(_,a,l){this._color.set(_,a,l)}getColor(_,a){return this._color.get(_,a)}clear(){this._color.clear(),this._css.clear()}}},3656:(L,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.addDisposableDomListener=void 0,i.addDisposableDomListener=function(o,h,_,a){o.addEventListener(h,_,a);let l=!1;return{dispose:()=>{l||(l=!0,o.removeEventListener(h,_,a))}}}},3551:function(L,i,o){var h=this&&this.__decorate||function(s,e,t,c){var p,m=arguments.length,b=m<3?e:c===null?c=Object.getOwnPropertyDescriptor(e,t):c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(s,e,t,c);else for(var f=s.length-1;f>=0;f--)(p=s[f])&&(b=(m<3?p(b):m>3?p(e,t,b):p(e,t))||b);return m>3&&b&&Object.defineProperty(e,t,b),b},_=this&&this.__param||function(s,e){return function(t,c){e(t,c,s)}};Object.defineProperty(i,"__esModule",{value:!0}),i.Linkifier=void 0;const a=o(3656),l=o(8460),v=o(844),S=o(2585),u=o(4725);let r=i.Linkifier=class extends v.Disposable{get currentLink(){return this._currentLink}constructor(s,e,t,c,p){super(),this._element=s,this._mouseService=e,this._renderService=t,this._bufferService=c,this._linkProviderService=p,this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this.register(new l.EventEmitter),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this.register(new l.EventEmitter),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this.register((0,v.getDisposeArrayDisposable)(this._linkCacheDisposables)),this.register((0,v.toDisposable)(()=>{var m;this._lastMouseEvent=void 0,(m=this._activeProviderReplies)==null||m.clear()})),this.register(this._bufferService.onResize(()=>{this._clearCurrentLink(),this._wasResized=!0})),this.register((0,a.addDisposableDomListener)(this._element,"mouseleave",()=>{this._isMouseOut=!0,this._clearCurrentLink()})),this.register((0,a.addDisposableDomListener)(this._element,"mousemove",this._handleMouseMove.bind(this))),this.register((0,a.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,a.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))}_handleMouseMove(s){this._lastMouseEvent=s;const e=this._positionFromMouseEvent(s,this._element,this._mouseService);if(!e)return;this._isMouseOut=!1;const t=s.composedPath();for(let c=0;c<t.length;c++){const p=t[c];if(p.classList.contains("xterm"))break;if(p.classList.contains("xterm-hover"))return}this._lastBufferCell&&e.x===this._lastBufferCell.x&&e.y===this._lastBufferCell.y||(this._handleHover(e),this._lastBufferCell=e)}_handleHover(s){if(this._activeLine!==s.y||this._wasResized)return this._clearCurrentLink(),this._askForLink(s,!1),void(this._wasResized=!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,s)||(this._clearCurrentLink(),this._askForLink(s,!0))}_askForLink(s,e){var c,p;this._activeProviderReplies&&e||((c=this._activeProviderReplies)==null||c.forEach(m=>{m==null||m.forEach(b=>{b.link.dispose&&b.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=s.y);let t=!1;for(const[m,b]of this._linkProviderService.linkProviders.entries())e?(p=this._activeProviderReplies)!=null&&p.get(m)&&(t=this._checkLinkProviderResult(m,s,t)):b.provideLinks(s.y,f=>{var A,R;if(this._isMouseOut)return;const w=f==null?void 0:f.map(O=>({link:O}));(A=this._activeProviderReplies)==null||A.set(m,w),t=this._checkLinkProviderResult(m,s,t),((R=this._activeProviderReplies)==null?void 0:R.size)===this._linkProviderService.linkProviders.length&&this._removeIntersectingLinks(s.y,this._activeProviderReplies)})}_removeIntersectingLinks(s,e){const t=new Set;for(let c=0;c<e.size;c++){const p=e.get(c);if(p)for(let m=0;m<p.length;m++){const b=p[m],f=b.link.range.start.y<s?0:b.link.range.start.x,w=b.link.range.end.y>s?this._bufferService.cols:b.link.range.end.x;for(let A=f;A<=w;A++){if(t.has(A)){p.splice(m--,1);break}t.add(A)}}}}_checkLinkProviderResult(s,e,t){var m;if(!this._activeProviderReplies)return t;const c=this._activeProviderReplies.get(s);let p=!1;for(let b=0;b<s;b++)this._activeProviderReplies.has(b)&&!this._activeProviderReplies.get(b)||(p=!0);if(!p&&c){const b=c.find(f=>this._linkAtPosition(f.link,e));b&&(t=!0,this._handleNewLink(b))}if(this._activeProviderReplies.size===this._linkProviderService.linkProviders.length&&!t)for(let b=0;b<this._activeProviderReplies.size;b++){const f=(m=this._activeProviderReplies.get(b))==null?void 0:m.find(w=>this._linkAtPosition(w.link,e));if(f){t=!0,this._handleNewLink(f);break}}return t}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(s){if(!this._currentLink)return;const e=this._positionFromMouseEvent(s,this._element,this._mouseService);e&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,e)&&this._currentLink.link.activate(s,this._currentLink.link.text)}_clearCurrentLink(s,e){this._currentLink&&this._lastMouseEvent&&(!s||!e||this._currentLink.link.range.start.y>=s&&this._currentLink.link.range.end.y<=e)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,v.disposeArray)(this._linkCacheDisposables))}_handleNewLink(s){if(!this._lastMouseEvent)return;const e=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);e&&this._linkAtPosition(s.link,e)&&(this._currentLink=s,this._currentLink.state={decorations:{underline:s.link.decorations===void 0||s.link.decorations.underline,pointerCursor:s.link.decorations===void 0||s.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,s.link,this._lastMouseEvent),s.link.decorations={},Object.defineProperties(s.link.decorations,{pointerCursor:{get:()=>{var t,c;return(c=(t=this._currentLink)==null?void 0:t.state)==null?void 0:c.decorations.pointerCursor},set:t=>{var c;(c=this._currentLink)!=null&&c.state&&this._currentLink.state.decorations.pointerCursor!==t&&(this._currentLink.state.decorations.pointerCursor=t,this._currentLink.state.isHovered&&this._element.classList.toggle("xterm-cursor-pointer",t))}},underline:{get:()=>{var t,c;return(c=(t=this._currentLink)==null?void 0:t.state)==null?void 0:c.decorations.underline},set:t=>{var c,p,m;(c=this._currentLink)!=null&&c.state&&((m=(p=this._currentLink)==null?void 0:p.state)==null?void 0:m.decorations.underline)!==t&&(this._currentLink.state.decorations.underline=t,this._currentLink.state.isHovered&&this._fireUnderlineEvent(s.link,t))}}}),this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange(t=>{if(!this._currentLink)return;const c=t.start===0?0:t.start+1+this._bufferService.buffer.ydisp,p=this._bufferService.buffer.ydisp+1+t.end;if(this._currentLink.link.range.start.y>=c&&this._currentLink.link.range.end.y<=p&&(this._clearCurrentLink(c,p),this._lastMouseEvent)){const m=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);m&&this._askForLink(m,!1)}})))}_linkHover(s,e,t){var c;(c=this._currentLink)!=null&&c.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(e,!0),this._currentLink.state.decorations.pointerCursor&&s.classList.add("xterm-cursor-pointer")),e.hover&&e.hover(t,e.text)}_fireUnderlineEvent(s,e){const t=s.range,c=this._bufferService.buffer.ydisp,p=this._createLinkUnderlineEvent(t.start.x-1,t.start.y-c-1,t.end.x,t.end.y-c-1,void 0);(e?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(p)}_linkLeave(s,e,t){var c;(c=this._currentLink)!=null&&c.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(e,!1),this._currentLink.state.decorations.pointerCursor&&s.classList.remove("xterm-cursor-pointer")),e.leave&&e.leave(t,e.text)}_linkAtPosition(s,e){const t=s.range.start.y*this._bufferService.cols+s.range.start.x,c=s.range.end.y*this._bufferService.cols+s.range.end.x,p=e.y*this._bufferService.cols+e.x;return t<=p&&p<=c}_positionFromMouseEvent(s,e,t){const c=t.getCoords(s,e,this._bufferService.cols,this._bufferService.rows);if(c)return{x:c[0],y:c[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(s,e,t,c,p){return{x1:s,y1:e,x2:t,y2:c,cols:this._bufferService.cols,fg:p}}};i.Linkifier=r=h([_(1,u.IMouseService),_(2,u.IRenderService),_(3,S.IBufferService),_(4,u.ILinkProviderService)],r)},9042:(L,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.tooMuchOutput=i.promptLabel=void 0,i.promptLabel="Terminal input",i.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},3730:function(L,i,o){var h=this&&this.__decorate||function(u,r,s,e){var t,c=arguments.length,p=c<3?r:e===null?e=Object.getOwnPropertyDescriptor(r,s):e;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")p=Reflect.decorate(u,r,s,e);else for(var m=u.length-1;m>=0;m--)(t=u[m])&&(p=(c<3?t(p):c>3?t(r,s,p):t(r,s))||p);return c>3&&p&&Object.defineProperty(r,s,p),p},_=this&&this.__param||function(u,r){return function(s,e){r(s,e,u)}};Object.defineProperty(i,"__esModule",{value:!0}),i.OscLinkProvider=void 0;const a=o(511),l=o(2585);let v=i.OscLinkProvider=class{constructor(u,r,s){this._bufferService=u,this._optionsService=r,this._oscLinkService=s}provideLinks(u,r){var w;const s=this._bufferService.buffer.lines.get(u-1);if(!s)return void r(void 0);const e=[],t=this._optionsService.rawOptions.linkHandler,c=new a.CellData,p=s.getTrimmedLength();let m=-1,b=-1,f=!1;for(let A=0;A<p;A++)if(b!==-1||s.hasContent(A)){if(s.loadCell(A,c),c.hasExtendedAttrs()&&c.extended.urlId){if(b===-1){b=A,m=c.extended.urlId;continue}f=c.extended.urlId!==m}else b!==-1&&(f=!0);if(f||b!==-1&&A===p-1){const R=(w=this._oscLinkService.getLinkData(m))==null?void 0:w.uri;if(R){const O={start:{x:b+1,y:u},end:{x:A+(f||A!==p-1?0:1),y:u}};let T=!1;if(!(t!=null&&t.allowNonHttpProtocols))try{const N=new URL(R);["http:","https:"].includes(N.protocol)||(T=!0)}catch{T=!0}T||e.push({text:R,range:O,activate:(N,U)=>t?t.activate(N,U,O):S(0,U),hover:(N,U)=>{var K;return(K=t==null?void 0:t.hover)==null?void 0:K.call(t,N,U,O)},leave:(N,U)=>{var K;return(K=t==null?void 0:t.leave)==null?void 0:K.call(t,N,U,O)}})}f=!1,c.hasExtendedAttrs()&&c.extended.urlId?(b=A,m=c.extended.urlId):(b=-1,m=-1)}}r(e)}};function S(u,r){if(confirm(`Do you want to navigate to ${r}?

WARNING: This link could potentially be dangerous`)){const s=window.open();if(s){try{s.opener=null}catch{}s.location.href=r}else console.warn("Opening link blocked as opener could not be cleared")}}i.OscLinkProvider=v=h([_(0,l.IBufferService),_(1,l.IOptionsService),_(2,l.IOscLinkService)],v)},6193:(L,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.RenderDebouncer=void 0,i.RenderDebouncer=class{constructor(o,h){this._renderCallback=o,this._coreBrowserService=h,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(o){return this._refreshCallbacks.push(o),this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh())),this._animationFrame}refresh(o,h,_){this._rowCount=_,o=o!==void 0?o:0,h=h!==void 0?h:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,o):o,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,h):h,this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return void this._runRefreshCallbacks();const o=Math.max(this._rowStart,0),h=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(o,h),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(const o of this._refreshCallbacks)o(0);this._refreshCallbacks=[]}}},3236:(L,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Terminal=void 0;const h=o(3614),_=o(3656),a=o(3551),l=o(9042),v=o(3730),S=o(1680),u=o(3107),r=o(5744),s=o(2950),e=o(1296),t=o(428),c=o(4269),p=o(5114),m=o(8934),b=o(3230),f=o(9312),w=o(4725),A=o(6731),R=o(8055),O=o(8969),T=o(8460),N=o(844),U=o(6114),K=o(8437),Y=o(2584),G=o(7399),C=o(5941),B=o(9074),M=o(2585),I=o(5435),z=o(4567),q=o(779);class Q extends O.CoreTerminal{get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}constructor(H={}){super(H),this.browser=U,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this.register(new N.MutableDisposable),this._onCursorMove=this.register(new T.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onKey=this.register(new T.EventEmitter),this.onKey=this._onKey.event,this._onRender=this.register(new T.EventEmitter),this.onRender=this._onRender.event,this._onSelectionChange=this.register(new T.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this.register(new T.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onBell=this.register(new T.EventEmitter),this.onBell=this._onBell.event,this._onFocus=this.register(new T.EventEmitter),this._onBlur=this.register(new T.EventEmitter),this._onA11yCharEmitter=this.register(new T.EventEmitter),this._onA11yTabEmitter=this.register(new T.EventEmitter),this._onWillOpen=this.register(new T.EventEmitter),this._setup(),this._decorationService=this._instantiationService.createInstance(B.DecorationService),this._instantiationService.setService(M.IDecorationService,this._decorationService),this._linkProviderService=this._instantiationService.createInstance(q.LinkProviderService),this._instantiationService.setService(w.ILinkProviderService,this._linkProviderService),this._linkProviderService.registerLinkProvider(this._instantiationService.createInstance(v.OscLinkProvider)),this.register(this._inputHandler.onRequestBell(()=>this._onBell.fire())),this.register(this._inputHandler.onRequestRefreshRows((E,W)=>this.refresh(E,W))),this.register(this._inputHandler.onRequestSendFocus(()=>this._reportFocus())),this.register(this._inputHandler.onRequestReset(()=>this.reset())),this.register(this._inputHandler.onRequestWindowsOptionsReport(E=>this._reportWindowsOptions(E))),this.register(this._inputHandler.onColor(E=>this._handleColorEvent(E))),this.register((0,T.forwardEvent)(this._inputHandler.onCursorMove,this._onCursorMove)),this.register((0,T.forwardEvent)(this._inputHandler.onTitleChange,this._onTitleChange)),this.register((0,T.forwardEvent)(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this.register((0,T.forwardEvent)(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this.register(this._bufferService.onResize(E=>this._afterResize(E.cols,E.rows))),this.register((0,N.toDisposable)(()=>{var E,W;this._customKeyEventHandler=void 0,(W=(E=this.element)==null?void 0:E.parentNode)==null||W.removeChild(this.element)}))}_handleColorEvent(H){if(this._themeService)for(const E of H){let W,F="";switch(E.index){case 256:W="foreground",F="10";break;case 257:W="background",F="11";break;case 258:W="cursor",F="12";break;default:W="ansi",F="4;"+E.index}switch(E.type){case 0:const V=R.color.toColorRGB(W==="ansi"?this._themeService.colors.ansi[E.index]:this._themeService.colors[W]);this.coreService.triggerDataEvent(`${Y.C0.ESC}]${F};${(0,C.toRgbString)(V)}${Y.C1_ESCAPED.ST}`);break;case 1:if(W==="ansi")this._themeService.modifyColors(X=>X.ansi[E.index]=R.channels.toColor(...E.color));else{const X=W;this._themeService.modifyColors(oe=>oe[X]=R.channels.toColor(...E.color))}break;case 2:this._themeService.restoreColor(E.index)}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(H){H?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(z.AccessibilityManager,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(H){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(Y.C0.ESC+"[I"),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){var H;return(H=this.textarea)==null?void 0:H.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(Y.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;const H=this.buffer.ybase+this.buffer.y,E=this.buffer.lines.get(H);if(!E)return;const W=Math.min(this.buffer.x,this.cols-1),F=this._renderService.dimensions.css.cell.height,V=E.getWidth(W),X=this._renderService.dimensions.css.cell.width*V,oe=this.buffer.y*this._renderService.dimensions.css.cell.height,ue=W*this._renderService.dimensions.css.cell.width;this.textarea.style.left=ue+"px",this.textarea.style.top=oe+"px",this.textarea.style.width=X+"px",this.textarea.style.height=F+"px",this.textarea.style.lineHeight=F+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this.register((0,_.addDisposableDomListener)(this.element,"copy",E=>{this.hasSelection()&&(0,h.copyHandler)(E,this._selectionService)}));const H=E=>(0,h.handlePasteEvent)(E,this.textarea,this.coreService,this.optionsService);this.register((0,_.addDisposableDomListener)(this.textarea,"paste",H)),this.register((0,_.addDisposableDomListener)(this.element,"paste",H)),U.isFirefox?this.register((0,_.addDisposableDomListener)(this.element,"mousedown",E=>{E.button===2&&(0,h.rightClickHandler)(E,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})):this.register((0,_.addDisposableDomListener)(this.element,"contextmenu",E=>{(0,h.rightClickHandler)(E,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})),U.isLinux&&this.register((0,_.addDisposableDomListener)(this.element,"auxclick",E=>{E.button===1&&(0,h.moveTextAreaUnderMouseCursor)(E,this.textarea,this.screenElement)}))}_bindKeys(){this.register((0,_.addDisposableDomListener)(this.textarea,"keyup",H=>this._keyUp(H),!0)),this.register((0,_.addDisposableDomListener)(this.textarea,"keydown",H=>this._keyDown(H),!0)),this.register((0,_.addDisposableDomListener)(this.textarea,"keypress",H=>this._keyPress(H),!0)),this.register((0,_.addDisposableDomListener)(this.textarea,"compositionstart",()=>this._compositionHelper.compositionstart())),this.register((0,_.addDisposableDomListener)(this.textarea,"compositionupdate",H=>this._compositionHelper.compositionupdate(H))),this.register((0,_.addDisposableDomListener)(this.textarea,"compositionend",()=>this._compositionHelper.compositionend())),this.register((0,_.addDisposableDomListener)(this.textarea,"input",H=>this._inputEvent(H),!0)),this.register(this.onRender(()=>this._compositionHelper.updateCompositionElements()))}open(H){var W;if(!H)throw new Error("Terminal requires a parent element.");if(H.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),((W=this.element)==null?void 0:W.ownerDocument.defaultView)&&this._coreBrowserService)return void(this.element.ownerDocument.defaultView!==this._coreBrowserService.window&&(this._coreBrowserService.window=this.element.ownerDocument.defaultView));this._document=H.ownerDocument,this.options.documentOverride&&this.options.documentOverride instanceof Document&&(this._document=this.optionsService.rawOptions.documentOverride),this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),H.appendChild(this.element);const E=this._document.createDocumentFragment();this._viewportElement=this._document.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),E.appendChild(this._viewportElement),this._viewportScrollArea=this._document.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=this._document.createElement("div"),this.screenElement.classList.add("xterm-screen"),this.register((0,_.addDisposableDomListener)(this.screenElement,"mousemove",F=>this.updateCursorStyle(F))),this._helperContainer=this._document.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),E.appendChild(this.screenElement),this.textarea=this._document.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",l.promptLabel),U.isChromeOS||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._coreBrowserService=this.register(this._instantiationService.createInstance(p.CoreBrowserService,this.textarea,H.ownerDocument.defaultView??window,this._document??typeof window<"u"?window.document:null)),this._instantiationService.setService(w.ICoreBrowserService,this._coreBrowserService),this.register((0,_.addDisposableDomListener)(this.textarea,"focus",F=>this._handleTextAreaFocus(F))),this.register((0,_.addDisposableDomListener)(this.textarea,"blur",()=>this._handleTextAreaBlur())),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(t.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(w.ICharSizeService,this._charSizeService),this._themeService=this._instantiationService.createInstance(A.ThemeService),this._instantiationService.setService(w.IThemeService,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(c.CharacterJoinerService),this._instantiationService.setService(w.ICharacterJoinerService,this._characterJoinerService),this._renderService=this.register(this._instantiationService.createInstance(b.RenderService,this.rows,this.screenElement)),this._instantiationService.setService(w.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange(F=>this._onRender.fire(F))),this.onResize(F=>this._renderService.resize(F.cols,F.rows)),this._compositionView=this._document.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(s.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this._mouseService=this._instantiationService.createInstance(m.MouseService),this._instantiationService.setService(w.IMouseService,this._mouseService),this.linkifier=this.register(this._instantiationService.createInstance(a.Linkifier,this.screenElement)),this.element.appendChild(E);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this.viewport=this._instantiationService.createInstance(S.Viewport,this._viewportElement,this._viewportScrollArea),this.viewport.onRequestScrollLines(F=>this.scrollLines(F.amount,F.suppressScrollEvent,1)),this.register(this._inputHandler.onRequestSyncScrollBar(()=>this.viewport.syncScrollArea())),this.register(this.viewport),this.register(this.onCursorMove(()=>{this._renderService.handleCursorMove(),this._syncTextArea()})),this.register(this.onResize(()=>this._renderService.handleResize(this.cols,this.rows))),this.register(this.onBlur(()=>this._renderService.handleBlur())),this.register(this.onFocus(()=>this._renderService.handleFocus())),this.register(this._renderService.onDimensionsChange(()=>this.viewport.syncScrollArea())),this._selectionService=this.register(this._instantiationService.createInstance(f.SelectionService,this.element,this.screenElement,this.linkifier)),this._instantiationService.setService(w.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines(F=>this.scrollLines(F.amount,F.suppressScrollEvent))),this.register(this._selectionService.onSelectionChange(()=>this._onSelectionChange.fire())),this.register(this._selectionService.onRequestRedraw(F=>this._renderService.handleSelectionChanged(F.start,F.end,F.columnSelectMode))),this.register(this._selectionService.onLinuxMouseSelection(F=>{this.textarea.value=F,this.textarea.focus(),this.textarea.select()})),this.register(this._onScroll.event(F=>{this.viewport.syncScrollArea(),this._selectionService.refresh()})),this.register((0,_.addDisposableDomListener)(this._viewportElement,"scroll",()=>this._selectionService.refresh())),this.register(this._instantiationService.createInstance(u.BufferDecorationRenderer,this.screenElement)),this.register((0,_.addDisposableDomListener)(this.element,"mousedown",F=>this._selectionService.handleMouseDown(F))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(z.AccessibilityManager,this)),this.register(this.optionsService.onSpecificOptionChange("screenReaderMode",F=>this._handleScreenReaderModeOptionChange(F))),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(r.OverviewRulerRenderer,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRulerWidth",F=>{!this._overviewRulerRenderer&&F&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(r.OverviewRulerRenderer,this._viewportElement,this.screenElement)))}),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(e.DomRenderer,this,this._document,this.element,this.screenElement,this._viewportElement,this._helperContainer,this.linkifier)}bindMouse(){const H=this,E=this.element;function W(X){const oe=H._mouseService.getMouseReportCoords(X,H.screenElement);if(!oe)return!1;let ue,_e;switch(X.overrideType||X.type){case"mousemove":_e=32,X.buttons===void 0?(ue=3,X.button!==void 0&&(ue=X.button<3?X.button:3)):ue=1&X.buttons?0:4&X.buttons?1:2&X.buttons?2:3;break;case"mouseup":_e=0,ue=X.button<3?X.button:3;break;case"mousedown":_e=1,ue=X.button<3?X.button:3;break;case"wheel":if(H._customWheelEventHandler&&H._customWheelEventHandler(X)===!1||H.viewport.getLinesScrolled(X)===0)return!1;_e=X.deltaY<0?0:1,ue=4;break;default:return!1}return!(_e===void 0||ue===void 0||ue>4)&&H.coreMouseService.triggerMouseEvent({col:oe.col,row:oe.row,x:oe.x,y:oe.y,button:ue,action:_e,ctrl:X.ctrlKey,alt:X.altKey,shift:X.shiftKey})}const F={mouseup:null,wheel:null,mousedrag:null,mousemove:null},V={mouseup:X=>(W(X),X.buttons||(this._document.removeEventListener("mouseup",F.mouseup),F.mousedrag&&this._document.removeEventListener("mousemove",F.mousedrag)),this.cancel(X)),wheel:X=>(W(X),this.cancel(X,!0)),mousedrag:X=>{X.buttons&&W(X)},mousemove:X=>{X.buttons||W(X)}};this.register(this.coreMouseService.onProtocolChange(X=>{X?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(X)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),8&X?F.mousemove||(E.addEventListener("mousemove",V.mousemove),F.mousemove=V.mousemove):(E.removeEventListener("mousemove",F.mousemove),F.mousemove=null),16&X?F.wheel||(E.addEventListener("wheel",V.wheel,{passive:!1}),F.wheel=V.wheel):(E.removeEventListener("wheel",F.wheel),F.wheel=null),2&X?F.mouseup||(F.mouseup=V.mouseup):(this._document.removeEventListener("mouseup",F.mouseup),F.mouseup=null),4&X?F.mousedrag||(F.mousedrag=V.mousedrag):(this._document.removeEventListener("mousemove",F.mousedrag),F.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,_.addDisposableDomListener)(E,"mousedown",X=>{if(X.preventDefault(),this.focus(),this.coreMouseService.areMouseEventsActive&&!this._selectionService.shouldForceSelection(X))return W(X),F.mouseup&&this._document.addEventListener("mouseup",F.mouseup),F.mousedrag&&this._document.addEventListener("mousemove",F.mousedrag),this.cancel(X)})),this.register((0,_.addDisposableDomListener)(E,"wheel",X=>{if(!F.wheel){if(this._customWheelEventHandler&&this._customWheelEventHandler(X)===!1)return!1;if(!this.buffer.hasScrollback){const oe=this.viewport.getLinesScrolled(X);if(oe===0)return;const ue=Y.C0.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(X.deltaY<0?"A":"B");let _e="";for(let ge=0;ge<Math.abs(oe);ge++)_e+=ue;return this.coreService.triggerDataEvent(_e,!0),this.cancel(X,!0)}return this.viewport.handleWheel(X)?this.cancel(X):void 0}},{passive:!1})),this.register((0,_.addDisposableDomListener)(E,"touchstart",X=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchStart(X),this.cancel(X)},{passive:!0})),this.register((0,_.addDisposableDomListener)(E,"touchmove",X=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchMove(X)?void 0:this.cancel(X)},{passive:!1}))}refresh(H,E){var W;(W=this._renderService)==null||W.refreshRows(H,E)}updateCursorStyle(H){var E;(E=this._selectionService)!=null&&E.shouldColumnSelect(H)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(H,E,W=0){var F;W===1?(super.scrollLines(H,E,W),this.refresh(0,this.rows-1)):(F=this.viewport)==null||F.scrollLines(H)}paste(H){(0,h.paste)(H,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(H){this._customKeyEventHandler=H}attachCustomWheelEventHandler(H){this._customWheelEventHandler=H}registerLinkProvider(H){return this._linkProviderService.registerLinkProvider(H)}registerCharacterJoiner(H){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");const E=this._characterJoinerService.register(H);return this.refresh(0,this.rows-1),E}deregisterCharacterJoiner(H){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(H)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(H){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+H)}registerDecoration(H){return this._decorationService.registerDecoration(H)}hasSelection(){return!!this._selectionService&&this._selectionService.hasSelection}select(H,E,W){this._selectionService.setSelection(H,E,W)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(this._selectionService&&this._selectionService.hasSelection)return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){var H;(H=this._selectionService)==null||H.clearSelection()}selectAll(){var H;(H=this._selectionService)==null||H.selectAll()}selectLines(H,E){var W;(W=this._selectionService)==null||W.selectLines(H,E)}_keyDown(H){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(H)===!1)return!1;const E=this.browser.isMac&&this.options.macOptionIsMeta&&H.altKey;if(!E&&!this._compositionHelper.keydown(H))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;E||H.key!=="Dead"&&H.key!=="AltGraph"||(this._unprocessedDeadKey=!0);const W=(0,G.evaluateKeyboardEvent)(H,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(H),W.type===3||W.type===2){const F=this.rows-1;return this.scrollLines(W.type===2?-F:F),this.cancel(H,!0)}return W.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,H)||(W.cancel&&this.cancel(H,!0),!W.key||!!(H.key&&!H.ctrlKey&&!H.altKey&&!H.metaKey&&H.key.length===1&&H.key.charCodeAt(0)>=65&&H.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(W.key!==Y.C0.ETX&&W.key!==Y.C0.CR||(this.textarea.value=""),this._onKey.fire({key:W.key,domEvent:H}),this._showCursor(),this.coreService.triggerDataEvent(W.key,!0),!this.optionsService.rawOptions.screenReaderMode||H.altKey||H.ctrlKey?this.cancel(H,!0):void(this._keyDownHandled=!0))))}_isThirdLevelShift(H,E){const W=H.isMac&&!this.options.macOptionIsMeta&&E.altKey&&!E.ctrlKey&&!E.metaKey||H.isWindows&&E.altKey&&E.ctrlKey&&!E.metaKey||H.isWindows&&E.getModifierState("AltGraph");return E.type==="keypress"?W:W&&(!E.keyCode||E.keyCode>47)}_keyUp(H){this._keyDownSeen=!1,this._customKeyEventHandler&&this._customKeyEventHandler(H)===!1||(function(E){return E.keyCode===16||E.keyCode===17||E.keyCode===18}(H)||this.focus(),this.updateCursorStyle(H),this._keyPressHandled=!1)}_keyPress(H){let E;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(H)===!1)return!1;if(this.cancel(H),H.charCode)E=H.charCode;else if(H.which===null||H.which===void 0)E=H.keyCode;else{if(H.which===0||H.charCode===0)return!1;E=H.which}return!(!E||(H.altKey||H.ctrlKey||H.metaKey)&&!this._isThirdLevelShift(this.browser,H)||(E=String.fromCharCode(E),this._onKey.fire({key:E,domEvent:H}),this._showCursor(),this.coreService.triggerDataEvent(E,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))}_inputEvent(H){if(H.data&&H.inputType==="insertText"&&(!H.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;const E=H.data;return this.coreService.triggerDataEvent(E,!0),this.cancel(H),!0}return!1}resize(H,E){H!==this.cols||E!==this.rows?super.resize(H,E):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()}_afterResize(H,E){var W,F;(W=this._charSizeService)==null||W.measure(),(F=this.viewport)==null||F.syncScrollArea(!0)}clear(){var H;if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let E=1;E<this.rows;E++)this.buffer.lines.push(this.buffer.getBlankLine(K.DEFAULT_ATTR_DATA));this._onScroll.fire({position:this.buffer.ydisp,source:0}),(H=this.viewport)==null||H.reset(),this.refresh(0,this.rows-1)}}reset(){var E,W;this.options.rows=this.rows,this.options.cols=this.cols;const H=this._customKeyEventHandler;this._setup(),super.reset(),(E=this._selectionService)==null||E.reset(),this._decorationService.reset(),(W=this.viewport)==null||W.reset(),this._customKeyEventHandler=H,this.refresh(0,this.rows-1)}clearTextureAtlas(){var H;(H=this._renderService)==null||H.clearTextureAtlas()}_reportFocus(){var H;(H=this.element)!=null&&H.classList.contains("focus")?this.coreService.triggerDataEvent(Y.C0.ESC+"[I"):this.coreService.triggerDataEvent(Y.C0.ESC+"[O")}_reportWindowsOptions(H){if(this._renderService)switch(H){case I.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:const E=this._renderService.dimensions.css.canvas.width.toFixed(0),W=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${Y.C0.ESC}[4;${W};${E}t`);break;case I.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:const F=this._renderService.dimensions.css.cell.width.toFixed(0),V=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${Y.C0.ESC}[6;${V};${F}t`)}}cancel(H,E){if(this.options.cancelEvents||E)return H.preventDefault(),H.stopPropagation(),!1}}i.Terminal=Q},9924:(L,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.TimeBasedDebouncer=void 0,i.TimeBasedDebouncer=class{constructor(o,h=1e3){this._renderCallback=o,this._debounceThresholdMS=h,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(o,h,_){this._rowCount=_,o=o!==void 0?o:0,h=h!==void 0?h:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,o):o,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,h):h;const a=Date.now();if(a-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=a,this._innerRefresh();else if(!this._additionalRefreshRequested){const l=a-this._lastRefreshMs,v=this._debounceThresholdMS-l;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(()=>{this._lastRefreshMs=Date.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0},v)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;const o=Math.max(this._rowStart,0),h=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(o,h)}}},1680:function(L,i,o){var h=this&&this.__decorate||function(s,e,t,c){var p,m=arguments.length,b=m<3?e:c===null?c=Object.getOwnPropertyDescriptor(e,t):c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(s,e,t,c);else for(var f=s.length-1;f>=0;f--)(p=s[f])&&(b=(m<3?p(b):m>3?p(e,t,b):p(e,t))||b);return m>3&&b&&Object.defineProperty(e,t,b),b},_=this&&this.__param||function(s,e){return function(t,c){e(t,c,s)}};Object.defineProperty(i,"__esModule",{value:!0}),i.Viewport=void 0;const a=o(3656),l=o(4725),v=o(8460),S=o(844),u=o(2585);let r=i.Viewport=class extends S.Disposable{constructor(s,e,t,c,p,m,b,f){super(),this._viewportElement=s,this._scrollArea=e,this._bufferService=t,this._optionsService=c,this._charSizeService=p,this._renderService=m,this._coreBrowserService=b,this.scrollBarWidth=0,this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._wheelPartialScroll=0,this._refreshAnimationFrame=null,this._ignoreNextScrollEvent=!1,this._smoothScrollState={startTime:0,origin:-1,target:-1},this._onRequestScrollLines=this.register(new v.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this.register((0,a.addDisposableDomListener)(this._viewportElement,"scroll",this._handleScroll.bind(this))),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(w=>this._activeBuffer=w.activeBuffer)),this._renderDimensions=this._renderService.dimensions,this.register(this._renderService.onDimensionsChange(w=>this._renderDimensions=w)),this._handleThemeChange(f.colors),this.register(f.onChangeColors(w=>this._handleThemeChange(w))),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.syncScrollArea())),setTimeout(()=>this.syncScrollArea())}_handleThemeChange(s){this._viewportElement.style.backgroundColor=s.background.css}reset(){this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._coreBrowserService.window.requestAnimationFrame(()=>this.syncScrollArea())}_refresh(s){if(s)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&this._coreBrowserService.window.cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderDimensions.device.cell.height/this._coreBrowserService.dpr,this._currentDeviceCellHeight=this._renderDimensions.device.cell.height,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;const e=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderDimensions.css.canvas.height);this._lastRecordedBufferHeight!==e&&(this._lastRecordedBufferHeight=e,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}const s=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==s&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=s),this._refreshAnimationFrame=null}syncScrollArea(s=!1){if(this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(s);this._lastRecordedViewportHeight===this._renderService.dimensions.css.canvas.height&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.device.cell.height===this._currentDeviceCellHeight||this._refresh(s)}_handleScroll(s){if(this._lastScrollTop=this._viewportElement.scrollTop,!this._viewportElement.offsetParent)return;if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._onRequestScrollLines.fire({amount:0,suppressScrollEvent:!0});const e=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._onRequestScrollLines.fire({amount:e,suppressScrollEvent:!0})}_smoothScroll(){if(this._isDisposed||this._smoothScrollState.origin===-1||this._smoothScrollState.target===-1)return;const s=this._smoothScrollPercent();this._viewportElement.scrollTop=this._smoothScrollState.origin+Math.round(s*(this._smoothScrollState.target-this._smoothScrollState.origin)),s<1?this._coreBrowserService.window.requestAnimationFrame(()=>this._smoothScroll()):this._clearSmoothScrollState()}_smoothScrollPercent(){return this._optionsService.rawOptions.smoothScrollDuration&&this._smoothScrollState.startTime?Math.max(Math.min((Date.now()-this._smoothScrollState.startTime)/this._optionsService.rawOptions.smoothScrollDuration,1),0):1}_clearSmoothScrollState(){this._smoothScrollState.startTime=0,this._smoothScrollState.origin=-1,this._smoothScrollState.target=-1}_bubbleScroll(s,e){const t=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(e<0&&this._viewportElement.scrollTop!==0||e>0&&t<this._lastRecordedBufferHeight)||(s.cancelable&&s.preventDefault(),!1)}handleWheel(s){const e=this._getPixelsScrolled(s);return e!==0&&(this._optionsService.rawOptions.smoothScrollDuration?(this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target===-1?this._smoothScrollState.target=this._viewportElement.scrollTop+e:this._smoothScrollState.target+=e,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()):this._viewportElement.scrollTop+=e,this._bubbleScroll(s,e))}scrollLines(s){if(s!==0)if(this._optionsService.rawOptions.smoothScrollDuration){const e=s*this._currentRowHeight;this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target=this._smoothScrollState.origin+e,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()}else this._onRequestScrollLines.fire({amount:s,suppressScrollEvent:!1})}_getPixelsScrolled(s){if(s.deltaY===0||s.shiftKey)return 0;let e=this._applyScrollModifier(s.deltaY,s);return s.deltaMode===WheelEvent.DOM_DELTA_LINE?e*=this._currentRowHeight:s.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(e*=this._currentRowHeight*this._bufferService.rows),e}getBufferElements(s,e){var f;let t,c="";const p=[],m=e??this._bufferService.buffer.lines.length,b=this._bufferService.buffer.lines;for(let w=s;w<m;w++){const A=b.get(w);if(!A)continue;const R=(f=b.get(w+1))==null?void 0:f.isWrapped;if(c+=A.translateToString(!R),!R||w===b.length-1){const O=document.createElement("div");O.textContent=c,p.push(O),c.length>0&&(t=O),c=""}}return{bufferElements:p,cursorElement:t}}getLinesScrolled(s){if(s.deltaY===0||s.shiftKey)return 0;let e=this._applyScrollModifier(s.deltaY,s);return s.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(e/=this._currentRowHeight+0,this._wheelPartialScroll+=e,e=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):s.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(e*=this._bufferService.rows),e}_applyScrollModifier(s,e){const t=this._optionsService.rawOptions.fastScrollModifier;return t==="alt"&&e.altKey||t==="ctrl"&&e.ctrlKey||t==="shift"&&e.shiftKey?s*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:s*this._optionsService.rawOptions.scrollSensitivity}handleTouchStart(s){this._lastTouchY=s.touches[0].pageY}handleTouchMove(s){const e=this._lastTouchY-s.touches[0].pageY;return this._lastTouchY=s.touches[0].pageY,e!==0&&(this._viewportElement.scrollTop+=e,this._bubbleScroll(s,e))}};i.Viewport=r=h([_(2,u.IBufferService),_(3,u.IOptionsService),_(4,l.ICharSizeService),_(5,l.IRenderService),_(6,l.ICoreBrowserService),_(7,l.IThemeService)],r)},3107:function(L,i,o){var h=this&&this.__decorate||function(u,r,s,e){var t,c=arguments.length,p=c<3?r:e===null?e=Object.getOwnPropertyDescriptor(r,s):e;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")p=Reflect.decorate(u,r,s,e);else for(var m=u.length-1;m>=0;m--)(t=u[m])&&(p=(c<3?t(p):c>3?t(r,s,p):t(r,s))||p);return c>3&&p&&Object.defineProperty(r,s,p),p},_=this&&this.__param||function(u,r){return function(s,e){r(s,e,u)}};Object.defineProperty(i,"__esModule",{value:!0}),i.BufferDecorationRenderer=void 0;const a=o(4725),l=o(844),v=o(2585);let S=i.BufferDecorationRenderer=class extends l.Disposable{constructor(u,r,s,e,t){super(),this._screenElement=u,this._bufferService=r,this._coreBrowserService=s,this._decorationService=e,this._renderService=t,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this.register(this._renderService.onRenderedViewportChange(()=>this._doRefreshDecorations())),this.register(this._renderService.onDimensionsChange(()=>{this._dimensionsChanged=!0,this._queueRefresh()})),this.register(this._coreBrowserService.onDprChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt})),this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh())),this.register(this._decorationService.onDecorationRemoved(c=>this._removeDecoration(c))),this.register((0,l.toDisposable)(()=>{this._container.remove(),this._decorationElements.clear()}))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback(()=>{this._doRefreshDecorations(),this._animationFrame=void 0}))}_doRefreshDecorations(){for(const u of this._decorationService.decorations)this._renderDecoration(u);this._dimensionsChanged=!1}_renderDecoration(u){this._refreshStyle(u),this._dimensionsChanged&&this._refreshXPosition(u)}_createElement(u){var e;const r=this._coreBrowserService.mainDocument.createElement("div");r.classList.add("xterm-decoration"),r.classList.toggle("xterm-decoration-top-layer",((e=u==null?void 0:u.options)==null?void 0:e.layer)==="top"),r.style.width=`${Math.round((u.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,r.style.height=(u.options.height||1)*this._renderService.dimensions.css.cell.height+"px",r.style.top=(u.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height+"px",r.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;const s=u.options.x??0;return s&&s>this._bufferService.cols&&(r.style.display="none"),this._refreshXPosition(u,r),r}_refreshStyle(u){const r=u.marker.line-this._bufferService.buffers.active.ydisp;if(r<0||r>=this._bufferService.rows)u.element&&(u.element.style.display="none",u.onRenderEmitter.fire(u.element));else{let s=this._decorationElements.get(u);s||(s=this._createElement(u),u.element=s,this._decorationElements.set(u,s),this._container.appendChild(s),u.onDispose(()=>{this._decorationElements.delete(u),s.remove()})),s.style.top=r*this._renderService.dimensions.css.cell.height+"px",s.style.display=this._altBufferIsActive?"none":"block",u.onRenderEmitter.fire(s)}}_refreshXPosition(u,r=u.element){if(!r)return;const s=u.options.x??0;(u.options.anchor||"left")==="right"?r.style.right=s?s*this._renderService.dimensions.css.cell.width+"px":"":r.style.left=s?s*this._renderService.dimensions.css.cell.width+"px":""}_removeDecoration(u){var r;(r=this._decorationElements.get(u))==null||r.remove(),this._decorationElements.delete(u),u.dispose()}};i.BufferDecorationRenderer=S=h([_(1,v.IBufferService),_(2,a.ICoreBrowserService),_(3,v.IDecorationService),_(4,a.IRenderService)],S)},5871:(L,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ColorZoneStore=void 0,i.ColorZoneStore=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(o){if(o.options.overviewRulerOptions){for(const h of this._zones)if(h.color===o.options.overviewRulerOptions.color&&h.position===o.options.overviewRulerOptions.position){if(this._lineIntersectsZone(h,o.marker.line))return;if(this._lineAdjacentToZone(h,o.marker.line,o.options.overviewRulerOptions.position))return void this._addLineToZone(h,o.marker.line)}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=o.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=o.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=o.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=o.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:o.options.overviewRulerOptions.color,position:o.options.overviewRulerOptions.position,startBufferLine:o.marker.line,endBufferLine:o.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(o){this._linePadding=o}_lineIntersectsZone(o,h){return h>=o.startBufferLine&&h<=o.endBufferLine}_lineAdjacentToZone(o,h,_){return h>=o.startBufferLine-this._linePadding[_||"full"]&&h<=o.endBufferLine+this._linePadding[_||"full"]}_addLineToZone(o,h){o.startBufferLine=Math.min(o.startBufferLine,h),o.endBufferLine=Math.max(o.endBufferLine,h)}}},5744:function(L,i,o){var h=this&&this.__decorate||function(t,c,p,m){var b,f=arguments.length,w=f<3?c:m===null?m=Object.getOwnPropertyDescriptor(c,p):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(t,c,p,m);else for(var A=t.length-1;A>=0;A--)(b=t[A])&&(w=(f<3?b(w):f>3?b(c,p,w):b(c,p))||w);return f>3&&w&&Object.defineProperty(c,p,w),w},_=this&&this.__param||function(t,c){return function(p,m){c(p,m,t)}};Object.defineProperty(i,"__esModule",{value:!0}),i.OverviewRulerRenderer=void 0;const a=o(5871),l=o(4725),v=o(844),S=o(2585),u={full:0,left:0,center:0,right:0},r={full:0,left:0,center:0,right:0},s={full:0,left:0,center:0,right:0};let e=i.OverviewRulerRenderer=class extends v.Disposable{get _width(){return this._optionsService.options.overviewRulerWidth||0}constructor(t,c,p,m,b,f,w){var R;super(),this._viewportElement=t,this._screenElement=c,this._bufferService=p,this._decorationService=m,this._renderService=b,this._optionsService=f,this._coreBrowserService=w,this._colorZoneStore=new a.ColorZoneStore,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=this._coreBrowserService.mainDocument.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),(R=this._viewportElement.parentElement)==null||R.insertBefore(this._canvas,this._viewportElement);const A=this._canvas.getContext("2d");if(!A)throw new Error("Ctx cannot be null");this._ctx=A,this._registerDecorationListeners(),this._registerBufferChangeListeners(),this._registerDimensionChangeListeners(),this.register((0,v.toDisposable)(()=>{var O;(O=this._canvas)==null||O.remove()}))}_registerDecorationListeners(){this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh(void 0,!0))),this.register(this._decorationService.onDecorationRemoved(()=>this._queueRefresh(void 0,!0)))}_registerBufferChangeListeners(){this.register(this._renderService.onRenderedViewportChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"})),this.register(this._bufferService.onScroll(()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())}))}_registerDimensionChangeListeners(){this.register(this._renderService.onRender(()=>{this._containerHeight&&this._containerHeight===this._screenElement.clientHeight||(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)})),this.register(this._optionsService.onSpecificOptionChange("overviewRulerWidth",()=>this._queueRefresh(!0))),this.register(this._coreBrowserService.onDprChange(()=>this._queueRefresh(!0))),this._queueRefresh(!0)}_refreshDrawConstants(){const t=Math.floor(this._canvas.width/3),c=Math.ceil(this._canvas.width/3);r.full=this._canvas.width,r.left=t,r.center=c,r.right=t,this._refreshDrawHeightConstants(),s.full=0,s.left=0,s.center=r.left,s.right=r.left+r.center}_refreshDrawHeightConstants(){u.full=Math.round(2*this._coreBrowserService.dpr);const t=this._canvas.height/this._bufferService.buffer.lines.length,c=Math.round(Math.max(Math.min(t,12),6)*this._coreBrowserService.dpr);u.left=c,u.center=c,u.right=c}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*u.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*u.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*u.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*u.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowserService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowserService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(const c of this._decorationService.decorations)this._colorZoneStore.addDecoration(c);this._ctx.lineWidth=1;const t=this._colorZoneStore.zones;for(const c of t)c.position!=="full"&&this._renderColorZone(c);for(const c of t)c.position==="full"&&this._renderColorZone(c);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderColorZone(t){this._ctx.fillStyle=t.color,this._ctx.fillRect(s[t.position||"full"],Math.round((this._canvas.height-1)*(t.startBufferLine/this._bufferService.buffers.active.lines.length)-u[t.position||"full"]/2),r[t.position||"full"],Math.round((this._canvas.height-1)*((t.endBufferLine-t.startBufferLine)/this._bufferService.buffers.active.lines.length)+u[t.position||"full"]))}_queueRefresh(t,c){this._shouldUpdateDimensions=t||this._shouldUpdateDimensions,this._shouldUpdateAnchor=c||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._refreshDecorations(),this._animationFrame=void 0}))}};i.OverviewRulerRenderer=e=h([_(2,S.IBufferService),_(3,S.IDecorationService),_(4,l.IRenderService),_(5,S.IOptionsService),_(6,l.ICoreBrowserService)],e)},2950:function(L,i,o){var h=this&&this.__decorate||function(u,r,s,e){var t,c=arguments.length,p=c<3?r:e===null?e=Object.getOwnPropertyDescriptor(r,s):e;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")p=Reflect.decorate(u,r,s,e);else for(var m=u.length-1;m>=0;m--)(t=u[m])&&(p=(c<3?t(p):c>3?t(r,s,p):t(r,s))||p);return c>3&&p&&Object.defineProperty(r,s,p),p},_=this&&this.__param||function(u,r){return function(s,e){r(s,e,u)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CompositionHelper=void 0;const a=o(4725),l=o(2585),v=o(2584);let S=i.CompositionHelper=class{get isComposing(){return this._isComposing}constructor(u,r,s,e,t,c){this._textarea=u,this._compositionView=r,this._bufferService=s,this._optionsService=e,this._coreService=t,this._renderService=c,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(u){this._compositionView.textContent=u.data,this.updateCompositionElements(),setTimeout(()=>{this._compositionPosition.end=this._textarea.value.length},0)}compositionend(){this._finalizeComposition(!0)}keydown(u){if(this._isComposing||this._isSendingComposition){if(u.keyCode===229||u.keyCode===16||u.keyCode===17||u.keyCode===18)return!1;this._finalizeComposition(!1)}return u.keyCode!==229||(this._handleAnyTextareaChanges(),!1)}_finalizeComposition(u){if(this._compositionView.classList.remove("active"),this._isComposing=!1,u){const r={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(()=>{if(this._isSendingComposition){let s;this._isSendingComposition=!1,r.start+=this._dataAlreadySent.length,s=this._isComposing?this._textarea.value.substring(r.start,r.end):this._textarea.value.substring(r.start),s.length>0&&this._coreService.triggerDataEvent(s,!0)}},0)}else{this._isSendingComposition=!1;const r=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(r,!0)}}_handleAnyTextareaChanges(){const u=this._textarea.value;setTimeout(()=>{if(!this._isComposing){const r=this._textarea.value,s=r.replace(u,"");this._dataAlreadySent=s,r.length>u.length?this._coreService.triggerDataEvent(s,!0):r.length<u.length?this._coreService.triggerDataEvent(`${v.C0.DEL}`,!0):r.length===u.length&&r!==u&&this._coreService.triggerDataEvent(r,!0)}},0)}updateCompositionElements(u){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){const r=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),s=this._renderService.dimensions.css.cell.height,e=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,t=r*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=t+"px",this._compositionView.style.top=e+"px",this._compositionView.style.height=s+"px",this._compositionView.style.lineHeight=s+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";const c=this._compositionView.getBoundingClientRect();this._textarea.style.left=t+"px",this._textarea.style.top=e+"px",this._textarea.style.width=Math.max(c.width,1)+"px",this._textarea.style.height=Math.max(c.height,1)+"px",this._textarea.style.lineHeight=c.height+"px"}u||setTimeout(()=>this.updateCompositionElements(!0),0)}}};i.CompositionHelper=S=h([_(2,l.IBufferService),_(3,l.IOptionsService),_(4,l.ICoreService),_(5,a.IRenderService)],S)},9806:(L,i)=>{function o(h,_,a){const l=a.getBoundingClientRect(),v=h.getComputedStyle(a),S=parseInt(v.getPropertyValue("padding-left")),u=parseInt(v.getPropertyValue("padding-top"));return[_.clientX-l.left-S,_.clientY-l.top-u]}Object.defineProperty(i,"__esModule",{value:!0}),i.getCoords=i.getCoordsRelativeToElement=void 0,i.getCoordsRelativeToElement=o,i.getCoords=function(h,_,a,l,v,S,u,r,s){if(!S)return;const e=o(h,_,a);return e?(e[0]=Math.ceil((e[0]+(s?u/2:0))/u),e[1]=Math.ceil(e[1]/r),e[0]=Math.min(Math.max(e[0],1),l+(s?1:0)),e[1]=Math.min(Math.max(e[1],1),v),e):void 0}},9504:(L,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.moveToCellSequence=void 0;const h=o(2584);function _(r,s,e,t){const c=r-a(r,e),p=s-a(s,e),m=Math.abs(c-p)-function(b,f,w){let A=0;const R=b-a(b,w),O=f-a(f,w);for(let T=0;T<Math.abs(R-O);T++){const N=l(b,f)==="A"?-1:1,U=w.buffer.lines.get(R+N*T);U!=null&&U.isWrapped&&A++}return A}(r,s,e);return u(m,S(l(r,s),t))}function a(r,s){let e=0,t=s.buffer.lines.get(r),c=t==null?void 0:t.isWrapped;for(;c&&r>=0&&r<s.rows;)e++,t=s.buffer.lines.get(--r),c=t==null?void 0:t.isWrapped;return e}function l(r,s){return r>s?"A":"B"}function v(r,s,e,t,c,p){let m=r,b=s,f="";for(;m!==e||b!==t;)m+=c?1:-1,c&&m>p.cols-1?(f+=p.buffer.translateBufferLineToString(b,!1,r,m),m=0,r=0,b++):!c&&m<0&&(f+=p.buffer.translateBufferLineToString(b,!1,0,r+1),m=p.cols-1,r=m,b--);return f+p.buffer.translateBufferLineToString(b,!1,r,m)}function S(r,s){const e=s?"O":"[";return h.C0.ESC+e+r}function u(r,s){r=Math.floor(r);let e="";for(let t=0;t<r;t++)e+=s;return e}i.moveToCellSequence=function(r,s,e,t){const c=e.buffer.x,p=e.buffer.y;if(!e.buffer.hasScrollback)return function(f,w,A,R,O,T){return _(w,R,O,T).length===0?"":u(v(f,w,f,w-a(w,O),!1,O).length,S("D",T))}(c,p,0,s,e,t)+_(p,s,e,t)+function(f,w,A,R,O,T){let N;N=_(w,R,O,T).length>0?R-a(R,O):w;const U=R,K=function(Y,G,C,B,M,I){let z;return z=_(C,B,M,I).length>0?B-a(B,M):G,Y<C&&z<=B||Y>=C&&z<B?"C":"D"}(f,w,A,R,O,T);return u(v(f,N,A,U,K==="C",O).length,S(K,T))}(c,p,r,s,e,t);let m;if(p===s)return m=c>r?"D":"C",u(Math.abs(c-r),S(m,t));m=p>s?"D":"C";const b=Math.abs(p-s);return u(function(f,w){return w.cols-f}(p>s?r:c,e)+(b-1)*e.cols+1+((p>s?c:r)-1),S(m,t))}},1296:function(L,i,o){var h=this&&this.__decorate||function(T,N,U,K){var Y,G=arguments.length,C=G<3?N:K===null?K=Object.getOwnPropertyDescriptor(N,U):K;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(T,N,U,K);else for(var B=T.length-1;B>=0;B--)(Y=T[B])&&(C=(G<3?Y(C):G>3?Y(N,U,C):Y(N,U))||C);return G>3&&C&&Object.defineProperty(N,U,C),C},_=this&&this.__param||function(T,N){return function(U,K){N(U,K,T)}};Object.defineProperty(i,"__esModule",{value:!0}),i.DomRenderer=void 0;const a=o(3787),l=o(2550),v=o(2223),S=o(6171),u=o(6052),r=o(4725),s=o(8055),e=o(8460),t=o(844),c=o(2585),p="xterm-dom-renderer-owner-",m="xterm-rows",b="xterm-fg-",f="xterm-bg-",w="xterm-focus",A="xterm-selection";let R=1,O=i.DomRenderer=class extends t.Disposable{constructor(T,N,U,K,Y,G,C,B,M,I,z,q,Q){super(),this._terminal=T,this._document=N,this._element=U,this._screenElement=K,this._viewportElement=Y,this._helperContainer=G,this._linkifier2=C,this._charSizeService=M,this._optionsService=I,this._bufferService=z,this._coreBrowserService=q,this._themeService=Q,this._terminalClass=R++,this._rowElements=[],this._selectionRenderModel=(0,u.createSelectionRenderModel)(),this.onRequestRedraw=this.register(new e.EventEmitter).event,this._rowContainer=this._document.createElement("div"),this._rowContainer.classList.add(m),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=this._document.createElement("div"),this._selectionContainer.classList.add(A),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=(0,S.createRenderDimensions)(),this._updateDimensions(),this.register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._themeService.onChangeColors(te=>this._injectCss(te))),this._injectCss(this._themeService.colors),this._rowFactory=B.createInstance(a.DomRendererRowFactory,document),this._element.classList.add(p+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this.register(this._linkifier2.onShowLinkUnderline(te=>this._handleLinkHover(te))),this.register(this._linkifier2.onHideLinkUnderline(te=>this._handleLinkLeave(te))),this.register((0,t.toDisposable)(()=>{this._element.classList.remove(p+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()})),this._widthCache=new l.WidthCache(this._document,this._helperContainer),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){const T=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*T,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*T),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/T),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/T),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(const U of this._rowElements)U.style.width=`${this.dimensions.css.canvas.width}px`,U.style.height=`${this.dimensions.css.cell.height}px`,U.style.lineHeight=`${this.dimensions.css.cell.height}px`,U.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));const N=`${this._terminalSelector} .${m} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=N,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(T){this._themeStyleElement||(this._themeStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let N=`${this._terminalSelector} .${m} { color: ${T.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;N+=`${this._terminalSelector} .${m} .xterm-dim { color: ${s.color.multiplyOpacity(T.foreground,.5).css};}`,N+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`;const U=`blink_underline_${this._terminalClass}`,K=`blink_bar_${this._terminalClass}`,Y=`blink_block_${this._terminalClass}`;N+=`@keyframes ${U} { 50% {  border-bottom-style: hidden; }}`,N+=`@keyframes ${K} { 50% {  box-shadow: none; }}`,N+=`@keyframes ${Y} { 0% {  background-color: ${T.cursor.css};  color: ${T.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${T.cursor.css}; }}`,N+=`${this._terminalSelector} .${m}.${w} .xterm-cursor.xterm-cursor-blink.xterm-cursor-underline { animation: ${U} 1s step-end infinite;}${this._terminalSelector} .${m}.${w} .xterm-cursor.xterm-cursor-blink.xterm-cursor-bar { animation: ${K} 1s step-end infinite;}${this._terminalSelector} .${m}.${w} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: ${Y} 1s step-end infinite;}${this._terminalSelector} .${m} .xterm-cursor.xterm-cursor-block { background-color: ${T.cursor.css}; color: ${T.cursorAccent.css};}${this._terminalSelector} .${m} .xterm-cursor.xterm-cursor-block:not(.xterm-cursor-blink) { background-color: ${T.cursor.css} !important; color: ${T.cursorAccent.css} !important;}${this._terminalSelector} .${m} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${T.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${m} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${T.cursor.css} inset;}${this._terminalSelector} .${m} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${T.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,N+=`${this._terminalSelector} .${A} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${A} div { position: absolute; background-color: ${T.selectionBackgroundOpaque.css};}${this._terminalSelector} .${A} div { position: absolute; background-color: ${T.selectionInactiveBackgroundOpaque.css};}`;for(const[G,C]of T.ansi.entries())N+=`${this._terminalSelector} .${b}${G} { color: ${C.css}; }${this._terminalSelector} .${b}${G}.xterm-dim { color: ${s.color.multiplyOpacity(C,.5).css}; }${this._terminalSelector} .${f}${G} { background-color: ${C.css}; }`;N+=`${this._terminalSelector} .${b}${v.INVERTED_DEFAULT_COLOR} { color: ${s.color.opaque(T.background).css}; }${this._terminalSelector} .${b}${v.INVERTED_DEFAULT_COLOR}.xterm-dim { color: ${s.color.multiplyOpacity(s.color.opaque(T.background),.5).css}; }${this._terminalSelector} .${f}${v.INVERTED_DEFAULT_COLOR} { background-color: ${T.foreground.css}; }`,this._themeStyleElement.textContent=N}_setDefaultSpacing(){const T=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${T}px`,this._rowFactory.defaultSpacing=T}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(T,N){for(let U=this._rowElements.length;U<=N;U++){const K=this._document.createElement("div");this._rowContainer.appendChild(K),this._rowElements.push(K)}for(;this._rowElements.length>N;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(T,N){this._refreshRowElements(T,N),this._updateDimensions(),this.handleSelectionChanged(this._selectionRenderModel.selectionStart,this._selectionRenderModel.selectionEnd,this._selectionRenderModel.columnSelectMode)}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(w),this.renderRows(0,this._bufferService.rows-1)}handleFocus(){this._rowContainer.classList.add(w),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(T,N,U){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(T,N,U),this.renderRows(0,this._bufferService.rows-1),!T||!N)return;this._selectionRenderModel.update(this._terminal,T,N,U);const K=this._selectionRenderModel.viewportStartRow,Y=this._selectionRenderModel.viewportEndRow,G=this._selectionRenderModel.viewportCappedStartRow,C=this._selectionRenderModel.viewportCappedEndRow;if(G>=this._bufferService.rows||C<0)return;const B=this._document.createDocumentFragment();if(U){const M=T[0]>N[0];B.appendChild(this._createSelectionElement(G,M?N[0]:T[0],M?T[0]:N[0],C-G+1))}else{const M=K===G?T[0]:0,I=G===Y?N[0]:this._bufferService.cols;B.appendChild(this._createSelectionElement(G,M,I));const z=C-G-1;if(B.appendChild(this._createSelectionElement(G+1,0,this._bufferService.cols,z)),G!==C){const q=Y===C?N[0]:this._bufferService.cols;B.appendChild(this._createSelectionElement(C,0,q))}}this._selectionContainer.appendChild(B)}_createSelectionElement(T,N,U,K=1){const Y=this._document.createElement("div"),G=N*this.dimensions.css.cell.width;let C=this.dimensions.css.cell.width*(U-N);return G+C>this.dimensions.css.canvas.width&&(C=this.dimensions.css.canvas.width-G),Y.style.height=K*this.dimensions.css.cell.height+"px",Y.style.top=T*this.dimensions.css.cell.height+"px",Y.style.left=`${G}px`,Y.style.width=`${C}px`,Y}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(const T of this._rowElements)T.replaceChildren()}renderRows(T,N){const U=this._bufferService.buffer,K=U.ybase+U.y,Y=Math.min(U.x,this._bufferService.cols-1),G=this._optionsService.rawOptions.cursorBlink,C=this._optionsService.rawOptions.cursorStyle,B=this._optionsService.rawOptions.cursorInactiveStyle;for(let M=T;M<=N;M++){const I=M+U.ydisp,z=this._rowElements[M],q=U.lines.get(I);if(!z||!q)break;z.replaceChildren(...this._rowFactory.createRow(q,I,I===K,C,B,Y,G,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${p}${this._terminalClass}`}_handleLinkHover(T){this._setCellUnderline(T.x1,T.x2,T.y1,T.y2,T.cols,!0)}_handleLinkLeave(T){this._setCellUnderline(T.x1,T.x2,T.y1,T.y2,T.cols,!1)}_setCellUnderline(T,N,U,K,Y,G){U<0&&(T=0),K<0&&(N=0);const C=this._bufferService.rows-1;U=Math.max(Math.min(U,C),0),K=Math.max(Math.min(K,C),0),Y=Math.min(Y,this._bufferService.cols);const B=this._bufferService.buffer,M=B.ybase+B.y,I=Math.min(B.x,Y-1),z=this._optionsService.rawOptions.cursorBlink,q=this._optionsService.rawOptions.cursorStyle,Q=this._optionsService.rawOptions.cursorInactiveStyle;for(let te=U;te<=K;++te){const H=te+B.ydisp,E=this._rowElements[te],W=B.lines.get(H);if(!E||!W)break;E.replaceChildren(...this._rowFactory.createRow(W,H,H===M,q,Q,I,z,this.dimensions.css.cell.width,this._widthCache,G?te===U?T:0:-1,G?(te===K?N:Y)-1:-1))}}};i.DomRenderer=O=h([_(7,c.IInstantiationService),_(8,r.ICharSizeService),_(9,c.IOptionsService),_(10,c.IBufferService),_(11,r.ICoreBrowserService),_(12,r.IThemeService)],O)},3787:function(L,i,o){var h=this&&this.__decorate||function(m,b,f,w){var A,R=arguments.length,O=R<3?b:w===null?w=Object.getOwnPropertyDescriptor(b,f):w;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")O=Reflect.decorate(m,b,f,w);else for(var T=m.length-1;T>=0;T--)(A=m[T])&&(O=(R<3?A(O):R>3?A(b,f,O):A(b,f))||O);return R>3&&O&&Object.defineProperty(b,f,O),O},_=this&&this.__param||function(m,b){return function(f,w){b(f,w,m)}};Object.defineProperty(i,"__esModule",{value:!0}),i.DomRendererRowFactory=void 0;const a=o(2223),l=o(643),v=o(511),S=o(2585),u=o(8055),r=o(4725),s=o(4269),e=o(6171),t=o(3734);let c=i.DomRendererRowFactory=class{constructor(m,b,f,w,A,R,O){this._document=m,this._characterJoinerService=b,this._optionsService=f,this._coreBrowserService=w,this._coreService=A,this._decorationService=R,this._themeService=O,this._workCell=new v.CellData,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(m,b,f){this._selectionStart=m,this._selectionEnd=b,this._columnSelectMode=f}createRow(m,b,f,w,A,R,O,T,N,U,K){const Y=[],G=this._characterJoinerService.getJoinedCharacters(b),C=this._themeService.colors;let B,M=m.getNoBgTrimmedLength();f&&M<R+1&&(M=R+1);let I=0,z="",q=0,Q=0,te=0,H=!1,E=0,W=!1,F=0;const V=[],X=U!==-1&&K!==-1;for(let oe=0;oe<M;oe++){m.loadCell(oe,this._workCell);let ue=this._workCell.getWidth();if(ue===0)continue;let _e=!1,ge=oe,re=this._workCell;if(G.length>0&&oe===G[0][0]){_e=!0;const xe=G.shift();re=new s.JoinedCellData(this._workCell,m.translateToString(!0,xe[0],xe[1]),xe[1]-xe[0]),ge=xe[1]-1,ue=re.getWidth()}const Fe=this._isCellInSelection(oe,b),et=f&&oe===R,mt=X&&oe>=U&&oe<=K;let me=!1;this._decorationService.forEachDecorationAtCell(oe,b,void 0,xe=>{me=!0});let Ne=re.getChars()||l.WHITESPACE_CELL_CHAR;if(Ne===" "&&(re.isUnderline()||re.isOverline())&&(Ne="Â "),F=ue*T-N.get(Ne,re.isBold(),re.isItalic()),B){if(I&&(Fe&&W||!Fe&&!W&&re.bg===q)&&(Fe&&W&&C.selectionForeground||re.fg===Q)&&re.extended.ext===te&&mt===H&&F===E&&!et&&!_e&&!me){re.isInvisible()?z+=l.WHITESPACE_CELL_CHAR:z+=Ne,I++;continue}I&&(B.textContent=z),B=this._document.createElement("span"),I=0,z=""}else B=this._document.createElement("span");if(q=re.bg,Q=re.fg,te=re.extended.ext,H=mt,E=F,W=Fe,_e&&R>=oe&&R<=ge&&(R=oe),!this._coreService.isCursorHidden&&et&&this._coreService.isCursorInitialized){if(V.push("xterm-cursor"),this._coreBrowserService.isFocused)O&&V.push("xterm-cursor-blink"),V.push(w==="bar"?"xterm-cursor-bar":w==="underline"?"xterm-cursor-underline":"xterm-cursor-block");else if(A)switch(A){case"outline":V.push("xterm-cursor-outline");break;case"block":V.push("xterm-cursor-block");break;case"bar":V.push("xterm-cursor-bar");break;case"underline":V.push("xterm-cursor-underline")}}if(re.isBold()&&V.push("xterm-bold"),re.isItalic()&&V.push("xterm-italic"),re.isDim()&&V.push("xterm-dim"),z=re.isInvisible()?l.WHITESPACE_CELL_CHAR:re.getChars()||l.WHITESPACE_CELL_CHAR,re.isUnderline()&&(V.push(`xterm-underline-${re.extended.underlineStyle}`),z===" "&&(z="Â "),!re.isUnderlineColorDefault()))if(re.isUnderlineColorRGB())B.style.textDecorationColor=`rgb(${t.AttributeData.toColorRGB(re.getUnderlineColor()).join(",")})`;else{let xe=re.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&re.isBold()&&xe<8&&(xe+=8),B.style.textDecorationColor=C.ansi[xe].css}re.isOverline()&&(V.push("xterm-overline"),z===" "&&(z="Â ")),re.isStrikethrough()&&V.push("xterm-strikethrough"),mt&&(B.style.textDecoration="underline");let Me=re.getFgColor(),lt=re.getFgColorMode(),ke=re.getBgColor(),Ke=re.getBgColorMode();const St=!!re.isInverse();if(St){const xe=Me;Me=ke,ke=xe;const Yr=lt;lt=Ke,Ke=Yr}let Ue,$e,Ve,bt=!1;switch(this._decorationService.forEachDecorationAtCell(oe,b,void 0,xe=>{xe.options.layer!=="top"&&bt||(xe.backgroundColorRGB&&(Ke=50331648,ke=xe.backgroundColorRGB.rgba>>8&16777215,Ue=xe.backgroundColorRGB),xe.foregroundColorRGB&&(lt=50331648,Me=xe.foregroundColorRGB.rgba>>8&16777215,$e=xe.foregroundColorRGB),bt=xe.options.layer==="top")}),!bt&&Fe&&(Ue=this._coreBrowserService.isFocused?C.selectionBackgroundOpaque:C.selectionInactiveBackgroundOpaque,ke=Ue.rgba>>8&16777215,Ke=50331648,bt=!0,C.selectionForeground&&(lt=50331648,Me=C.selectionForeground.rgba>>8&16777215,$e=C.selectionForeground)),bt&&V.push("xterm-decoration-top"),Ke){case 16777216:case 33554432:Ve=C.ansi[ke],V.push(`xterm-bg-${ke}`);break;case 50331648:Ve=u.channels.toColor(ke>>16,ke>>8&255,255&ke),this._addStyle(B,`background-color:#${p((ke>>>0).toString(16),"0",6)}`);break;default:St?(Ve=C.foreground,V.push(`xterm-bg-${a.INVERTED_DEFAULT_COLOR}`)):Ve=C.background}switch(Ue||re.isDim()&&(Ue=u.color.multiplyOpacity(Ve,.5)),lt){case 16777216:case 33554432:re.isBold()&&Me<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(Me+=8),this._applyMinimumContrast(B,Ve,C.ansi[Me],re,Ue,void 0)||V.push(`xterm-fg-${Me}`);break;case 50331648:const xe=u.channels.toColor(Me>>16&255,Me>>8&255,255&Me);this._applyMinimumContrast(B,Ve,xe,re,Ue,$e)||this._addStyle(B,`color:#${p(Me.toString(16),"0",6)}`);break;default:this._applyMinimumContrast(B,Ve,C.foreground,re,Ue,$e)||St&&V.push(`xterm-fg-${a.INVERTED_DEFAULT_COLOR}`)}V.length&&(B.className=V.join(" "),V.length=0),et||_e||me?B.textContent=z:I++,F!==this.defaultSpacing&&(B.style.letterSpacing=`${F}px`),Y.push(B),oe=ge}return B&&I&&(B.textContent=z),Y}_applyMinimumContrast(m,b,f,w,A,R){if(this._optionsService.rawOptions.minimumContrastRatio===1||(0,e.treatGlyphAsBackgroundColor)(w.getCode()))return!1;const O=this._getContrastCache(w);let T;if(A||R||(T=O.getColor(b.rgba,f.rgba)),T===void 0){const N=this._optionsService.rawOptions.minimumContrastRatio/(w.isDim()?2:1);T=u.color.ensureContrastRatio(A||b,R||f,N),O.setColor((A||b).rgba,(R||f).rgba,T??null)}return!!T&&(this._addStyle(m,`color:${T.css}`),!0)}_getContrastCache(m){return m.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(m,b){m.setAttribute("style",`${m.getAttribute("style")||""}${b};`)}_isCellInSelection(m,b){const f=this._selectionStart,w=this._selectionEnd;return!(!f||!w)&&(this._columnSelectMode?f[0]<=w[0]?m>=f[0]&&b>=f[1]&&m<w[0]&&b<=w[1]:m<f[0]&&b>=f[1]&&m>=w[0]&&b<=w[1]:b>f[1]&&b<w[1]||f[1]===w[1]&&b===f[1]&&m>=f[0]&&m<w[0]||f[1]<w[1]&&b===w[1]&&m<w[0]||f[1]<w[1]&&b===f[1]&&m>=f[0])}};function p(m,b,f){for(;m.length<f;)m=b+m;return m}i.DomRendererRowFactory=c=h([_(1,r.ICharacterJoinerService),_(2,S.IOptionsService),_(3,r.ICoreBrowserService),_(4,S.ICoreService),_(5,S.IDecorationService),_(6,r.IThemeService)],c)},2550:(L,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.WidthCache=void 0,i.WidthCache=class{constructor(o,h){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=o.createElement("div"),this._container.classList.add("xterm-width-cache-measure-container"),this._container.setAttribute("aria-hidden","true"),this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";const _=o.createElement("span");_.classList.add("xterm-char-measure-element");const a=o.createElement("span");a.classList.add("xterm-char-measure-element"),a.style.fontWeight="bold";const l=o.createElement("span");l.classList.add("xterm-char-measure-element"),l.style.fontStyle="italic";const v=o.createElement("span");v.classList.add("xterm-char-measure-element"),v.style.fontWeight="bold",v.style.fontStyle="italic",this._measureElements=[_,a,l,v],this._container.appendChild(_),this._container.appendChild(a),this._container.appendChild(l),this._container.appendChild(v),h.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(o,h,_,a){o===this._font&&h===this._fontSize&&_===this._weight&&a===this._weightBold||(this._font=o,this._fontSize=h,this._weight=_,this._weightBold=a,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${_}`,this._measureElements[1].style.fontWeight=`${a}`,this._measureElements[2].style.fontWeight=`${_}`,this._measureElements[3].style.fontWeight=`${a}`,this.clear())}get(o,h,_){let a=0;if(!h&&!_&&o.length===1&&(a=o.charCodeAt(0))<256){if(this._flat[a]!==-9999)return this._flat[a];const S=this._measure(o,0);return S>0&&(this._flat[a]=S),S}let l=o;h&&(l+="B"),_&&(l+="I");let v=this._holey.get(l);if(v===void 0){let S=0;h&&(S|=1),_&&(S|=2),v=this._measure(o,S),v>0&&this._holey.set(l,v)}return v}_measure(o,h){const _=this._measureElements[h];return _.textContent=o.repeat(32),_.offsetWidth/32}}},2223:(L,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.TEXT_BASELINE=i.DIM_OPACITY=i.INVERTED_DEFAULT_COLOR=void 0;const h=o(6114);i.INVERTED_DEFAULT_COLOR=257,i.DIM_OPACITY=.5,i.TEXT_BASELINE=h.isFirefox||h.isLegacyEdge?"bottom":"ideographic"},6171:(L,i)=>{function o(_){return 57508<=_&&_<=57558}function h(_){return _>=128512&&_<=128591||_>=127744&&_<=128511||_>=128640&&_<=128767||_>=9728&&_<=9983||_>=9984&&_<=10175||_>=65024&&_<=65039||_>=129280&&_<=129535||_>=127462&&_<=127487}Object.defineProperty(i,"__esModule",{value:!0}),i.computeNextVariantOffset=i.createRenderDimensions=i.treatGlyphAsBackgroundColor=i.allowRescaling=i.isEmoji=i.isRestrictedPowerlineGlyph=i.isPowerlineGlyph=i.throwIfFalsy=void 0,i.throwIfFalsy=function(_){if(!_)throw new Error("value must not be falsy");return _},i.isPowerlineGlyph=o,i.isRestrictedPowerlineGlyph=function(_){return 57520<=_&&_<=57527},i.isEmoji=h,i.allowRescaling=function(_,a,l,v){return a===1&&l>Math.ceil(1.5*v)&&_!==void 0&&_>255&&!h(_)&&!o(_)&&!function(S){return 57344<=S&&S<=63743}(_)},i.treatGlyphAsBackgroundColor=function(_){return o(_)||function(a){return 9472<=a&&a<=9631}(_)},i.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}},i.computeNextVariantOffset=function(_,a,l=0){return(_-(2*Math.round(a)-l))%(2*Math.round(a))}},6052:(L,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.createSelectionRenderModel=void 0;class o{constructor(){this.clear()}clear(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}update(_,a,l,v=!1){if(this.selectionStart=a,this.selectionEnd=l,!a||!l||a[0]===l[0]&&a[1]===l[1])return void this.clear();const S=_.buffers.active.ydisp,u=a[1]-S,r=l[1]-S,s=Math.max(u,0),e=Math.min(r,_.rows-1);s>=_.rows||e<0?this.clear():(this.hasSelection=!0,this.columnSelectMode=v,this.viewportStartRow=u,this.viewportEndRow=r,this.viewportCappedStartRow=s,this.viewportCappedEndRow=e,this.startCol=a[0],this.endCol=l[0])}isCellSelected(_,a,l){return!!this.hasSelection&&(l-=_.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?a>=this.startCol&&l>=this.viewportCappedStartRow&&a<this.endCol&&l<=this.viewportCappedEndRow:a<this.startCol&&l>=this.viewportCappedStartRow&&a>=this.endCol&&l<=this.viewportCappedEndRow:l>this.viewportStartRow&&l<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&l===this.viewportStartRow&&a>=this.startCol&&a<this.endCol||this.viewportStartRow<this.viewportEndRow&&l===this.viewportEndRow&&a<this.endCol||this.viewportStartRow<this.viewportEndRow&&l===this.viewportStartRow&&a>=this.startCol)}}i.createSelectionRenderModel=function(){return new o}},456:(L,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.SelectionModel=void 0,i.SelectionModel=class{constructor(o){this._bufferService=o,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){const o=this.selectionStart[0]+this.selectionStartLength;return o>this._bufferService.cols?o%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(o/this._bufferService.cols)-1]:[o%this._bufferService.cols,this.selectionStart[1]+Math.floor(o/this._bufferService.cols)]:[o,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){const o=this.selectionStart[0]+this.selectionStartLength;return o>this._bufferService.cols?[o%this._bufferService.cols,this.selectionStart[1]+Math.floor(o/this._bufferService.cols)]:[Math.max(o,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){const o=this.selectionStart,h=this.selectionEnd;return!(!o||!h)&&(o[1]>h[1]||o[1]===h[1]&&o[0]>h[0])}handleTrim(o){return this.selectionStart&&(this.selectionStart[1]-=o),this.selectionEnd&&(this.selectionEnd[1]-=o),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}}},428:function(L,i,o){var h=this&&this.__decorate||function(e,t,c,p){var m,b=arguments.length,f=b<3?t:p===null?p=Object.getOwnPropertyDescriptor(t,c):p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")f=Reflect.decorate(e,t,c,p);else for(var w=e.length-1;w>=0;w--)(m=e[w])&&(f=(b<3?m(f):b>3?m(t,c,f):m(t,c))||f);return b>3&&f&&Object.defineProperty(t,c,f),f},_=this&&this.__param||function(e,t){return function(c,p){t(c,p,e)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CharSizeService=void 0;const a=o(2585),l=o(8460),v=o(844);let S=i.CharSizeService=class extends v.Disposable{get hasValidSize(){return this.width>0&&this.height>0}constructor(e,t,c){super(),this._optionsService=c,this.width=0,this.height=0,this._onCharSizeChange=this.register(new l.EventEmitter),this.onCharSizeChange=this._onCharSizeChange.event;try{this._measureStrategy=this.register(new s(this._optionsService))}catch{this._measureStrategy=this.register(new r(e,t,this._optionsService))}this.register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],()=>this.measure()))}measure(){const e=this._measureStrategy.measure();e.width===this.width&&e.height===this.height||(this.width=e.width,this.height=e.height,this._onCharSizeChange.fire())}};i.CharSizeService=S=h([_(2,a.IOptionsService)],S);class u extends v.Disposable{constructor(){super(...arguments),this._result={width:0,height:0}}_validateAndSet(t,c){t!==void 0&&t>0&&c!==void 0&&c>0&&(this._result.width=t,this._result.height=c)}}class r extends u{constructor(t,c,p){super(),this._document=t,this._parentElement=c,this._optionsService=p,this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){return this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`,this._validateAndSet(Number(this._measureElement.offsetWidth)/32,Number(this._measureElement.offsetHeight)),this._result}}class s extends u{constructor(t){super(),this._optionsService=t,this._canvas=new OffscreenCanvas(100,100),this._ctx=this._canvas.getContext("2d");const c=this._ctx.measureText("W");if(!("width"in c&&"fontBoundingBoxAscent"in c&&"fontBoundingBoxDescent"in c))throw new Error("Required font metrics not supported")}measure(){this._ctx.font=`${this._optionsService.rawOptions.fontSize}px ${this._optionsService.rawOptions.fontFamily}`;const t=this._ctx.measureText("W");return this._validateAndSet(t.width,t.fontBoundingBoxAscent+t.fontBoundingBoxDescent),this._result}}},4269:function(L,i,o){var h=this&&this.__decorate||function(s,e,t,c){var p,m=arguments.length,b=m<3?e:c===null?c=Object.getOwnPropertyDescriptor(e,t):c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(s,e,t,c);else for(var f=s.length-1;f>=0;f--)(p=s[f])&&(b=(m<3?p(b):m>3?p(e,t,b):p(e,t))||b);return m>3&&b&&Object.defineProperty(e,t,b),b},_=this&&this.__param||function(s,e){return function(t,c){e(t,c,s)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CharacterJoinerService=i.JoinedCellData=void 0;const a=o(3734),l=o(643),v=o(511),S=o(2585);class u extends a.AttributeData{constructor(e,t,c){super(),this.content=0,this.combinedData="",this.fg=e.fg,this.bg=e.bg,this.combinedData=t,this._width=c}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(e){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}i.JoinedCellData=u;let r=i.CharacterJoinerService=class $s{constructor(e){this._bufferService=e,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new v.CellData}register(e){const t={id:this._nextCharacterJoinerId++,handler:e};return this._characterJoiners.push(t),t.id}deregister(e){for(let t=0;t<this._characterJoiners.length;t++)if(this._characterJoiners[t].id===e)return this._characterJoiners.splice(t,1),!0;return!1}getJoinedCharacters(e){if(this._characterJoiners.length===0)return[];const t=this._bufferService.buffer.lines.get(e);if(!t||t.length===0)return[];const c=[],p=t.translateToString(!0);let m=0,b=0,f=0,w=t.getFg(0),A=t.getBg(0);for(let R=0;R<t.getTrimmedLength();R++)if(t.loadCell(R,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==w||this._workCell.bg!==A){if(R-m>1){const O=this._getJoinedRanges(p,f,b,t,m);for(let T=0;T<O.length;T++)c.push(O[T])}m=R,f=b,w=this._workCell.fg,A=this._workCell.bg}b+=this._workCell.getChars().length||l.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-m>1){const R=this._getJoinedRanges(p,f,b,t,m);for(let O=0;O<R.length;O++)c.push(R[O])}return c}_getJoinedRanges(e,t,c,p,m){const b=e.substring(t,c);let f=[];try{f=this._characterJoiners[0].handler(b)}catch(w){console.error(w)}for(let w=1;w<this._characterJoiners.length;w++)try{const A=this._characterJoiners[w].handler(b);for(let R=0;R<A.length;R++)$s._mergeRanges(f,A[R])}catch(A){console.error(A)}return this._stringRangesToCellRanges(f,p,m),f}_stringRangesToCellRanges(e,t,c){let p=0,m=!1,b=0,f=e[p];if(f){for(let w=c;w<this._bufferService.cols;w++){const A=t.getWidth(w),R=t.getString(w).length||l.WHITESPACE_CELL_CHAR.length;if(A!==0){if(!m&&f[0]<=b&&(f[0]=w,m=!0),f[1]<=b){if(f[1]=w,f=e[++p],!f)break;f[0]<=b?(f[0]=w,m=!0):m=!1}b+=R}}f&&(f[1]=this._bufferService.cols)}}static _mergeRanges(e,t){let c=!1;for(let p=0;p<e.length;p++){const m=e[p];if(c){if(t[1]<=m[0])return e[p-1][1]=t[1],e;if(t[1]<=m[1])return e[p-1][1]=Math.max(t[1],m[1]),e.splice(p,1),e;e.splice(p,1),p--}else{if(t[1]<=m[0])return e.splice(p,0,t),e;if(t[1]<=m[1])return m[0]=Math.min(t[0],m[0]),e;t[0]<m[1]&&(m[0]=Math.min(t[0],m[0]),c=!0)}}return c?e[e.length-1][1]=t[1]:e.push(t),e}};i.CharacterJoinerService=r=h([_(0,S.IBufferService)],r)},5114:(L,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CoreBrowserService=void 0;const h=o(844),_=o(8460),a=o(3656);class l extends h.Disposable{constructor(u,r,s){super(),this._textarea=u,this._window=r,this.mainDocument=s,this._isFocused=!1,this._cachedIsFocused=void 0,this._screenDprMonitor=new v(this._window),this._onDprChange=this.register(new _.EventEmitter),this.onDprChange=this._onDprChange.event,this._onWindowChange=this.register(new _.EventEmitter),this.onWindowChange=this._onWindowChange.event,this.register(this.onWindowChange(e=>this._screenDprMonitor.setWindow(e))),this.register((0,_.forwardEvent)(this._screenDprMonitor.onDprChange,this._onDprChange)),this._textarea.addEventListener("focus",()=>this._isFocused=!0),this._textarea.addEventListener("blur",()=>this._isFocused=!1)}get window(){return this._window}set window(u){this._window!==u&&(this._window=u,this._onWindowChange.fire(this._window))}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask(()=>this._cachedIsFocused=void 0)),this._cachedIsFocused}}i.CoreBrowserService=l;class v extends h.Disposable{constructor(u){super(),this._parentWindow=u,this._windowResizeListener=this.register(new h.MutableDisposable),this._onDprChange=this.register(new _.EventEmitter),this.onDprChange=this._onDprChange.event,this._outerListener=()=>this._setDprAndFireIfDiffers(),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._updateDpr(),this._setWindowResizeListener(),this.register((0,h.toDisposable)(()=>this.clearListener()))}setWindow(u){this._parentWindow=u,this._setWindowResizeListener(),this._setDprAndFireIfDiffers()}_setWindowResizeListener(){this._windowResizeListener.value=(0,a.addDisposableDomListener)(this._parentWindow,"resize",()=>this._setDprAndFireIfDiffers())}_setDprAndFireIfDiffers(){this._parentWindow.devicePixelRatio!==this._currentDevicePixelRatio&&this._onDprChange.fire(this._parentWindow.devicePixelRatio),this._updateDpr()}_updateDpr(){var u;this._outerListener&&((u=this._resolutionMediaMatchList)==null||u.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){this._resolutionMediaMatchList&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._outerListener=void 0)}}},779:(L,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.LinkProviderService=void 0;const h=o(844);class _ extends h.Disposable{constructor(){super(),this.linkProviders=[],this.register((0,h.toDisposable)(()=>this.linkProviders.length=0))}registerLinkProvider(l){return this.linkProviders.push(l),{dispose:()=>{const v=this.linkProviders.indexOf(l);v!==-1&&this.linkProviders.splice(v,1)}}}}i.LinkProviderService=_},8934:function(L,i,o){var h=this&&this.__decorate||function(S,u,r,s){var e,t=arguments.length,c=t<3?u:s===null?s=Object.getOwnPropertyDescriptor(u,r):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(S,u,r,s);else for(var p=S.length-1;p>=0;p--)(e=S[p])&&(c=(t<3?e(c):t>3?e(u,r,c):e(u,r))||c);return t>3&&c&&Object.defineProperty(u,r,c),c},_=this&&this.__param||function(S,u){return function(r,s){u(r,s,S)}};Object.defineProperty(i,"__esModule",{value:!0}),i.MouseService=void 0;const a=o(4725),l=o(9806);let v=i.MouseService=class{constructor(S,u){this._renderService=S,this._charSizeService=u}getCoords(S,u,r,s,e){return(0,l.getCoords)(window,S,u,r,s,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,e)}getMouseReportCoords(S,u){const r=(0,l.getCoordsRelativeToElement)(window,S,u);if(this._charSizeService.hasValidSize)return r[0]=Math.min(Math.max(r[0],0),this._renderService.dimensions.css.canvas.width-1),r[1]=Math.min(Math.max(r[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(r[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(r[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(r[0]),y:Math.floor(r[1])}}};i.MouseService=v=h([_(0,a.IRenderService),_(1,a.ICharSizeService)],v)},3230:function(L,i,o){var h=this&&this.__decorate||function(e,t,c,p){var m,b=arguments.length,f=b<3?t:p===null?p=Object.getOwnPropertyDescriptor(t,c):p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")f=Reflect.decorate(e,t,c,p);else for(var w=e.length-1;w>=0;w--)(m=e[w])&&(f=(b<3?m(f):b>3?m(t,c,f):m(t,c))||f);return b>3&&f&&Object.defineProperty(t,c,f),f},_=this&&this.__param||function(e,t){return function(c,p){t(c,p,e)}};Object.defineProperty(i,"__esModule",{value:!0}),i.RenderService=void 0;const a=o(6193),l=o(4725),v=o(8460),S=o(844),u=o(7226),r=o(2585);let s=i.RenderService=class extends S.Disposable{get dimensions(){return this._renderer.value.dimensions}constructor(e,t,c,p,m,b,f,w){super(),this._rowCount=e,this._charSizeService=p,this._renderer=this.register(new S.MutableDisposable),this._pausedResizeTask=new u.DebouncedIdleTask,this._observerDisposable=this.register(new S.MutableDisposable),this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this.register(new v.EventEmitter),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this.register(new v.EventEmitter),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this.register(new v.EventEmitter),this.onRender=this._onRender.event,this._onRefreshRequest=this.register(new v.EventEmitter),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new a.RenderDebouncer((A,R)=>this._renderRows(A,R),f),this.register(this._renderDebouncer),this.register(f.onDprChange(()=>this.handleDevicePixelRatioChange())),this.register(b.onResize(()=>this._fullRefresh())),this.register(b.buffers.onBufferActivate(()=>{var A;return(A=this._renderer.value)==null?void 0:A.clear()})),this.register(c.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._charSizeService.onCharSizeChange(()=>this.handleCharSizeChanged())),this.register(m.onDecorationRegistered(()=>this._fullRefresh())),this.register(m.onDecorationRemoved(()=>this._fullRefresh())),this.register(c.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio","rescaleOverlappingGlyphs"],()=>{this.clear(),this.handleResize(b.cols,b.rows),this._fullRefresh()})),this.register(c.onMultipleOptionChange(["cursorBlink","cursorStyle"],()=>this.refreshRows(b.buffer.y,b.buffer.y,!0))),this.register(w.onChangeColors(()=>this._fullRefresh())),this._registerIntersectionObserver(f.window,t),this.register(f.onWindowChange(A=>this._registerIntersectionObserver(A,t)))}_registerIntersectionObserver(e,t){if("IntersectionObserver"in e){const c=new e.IntersectionObserver(p=>this._handleIntersectionChange(p[p.length-1]),{threshold:0});c.observe(t),this._observerDisposable.value=(0,S.toDisposable)(()=>c.disconnect())}}_handleIntersectionChange(e){this._isPaused=e.isIntersecting===void 0?e.intersectionRatio===0:!e.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(e,t,c=!1){this._isPaused?this._needsFullRefresh=!0:(c||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(e,t,this._rowCount))}_renderRows(e,t){this._renderer.value&&(e=Math.min(e,this._rowCount-1),t=Math.min(t,this._rowCount-1),this._renderer.value.renderRows(e,t),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:e,end:t}),this._onRender.fire({start:e,end:t}),this._isNextRenderRedrawOnly=!0)}resize(e,t){this._rowCount=t,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(e){this._renderer.value=e,this._renderer.value&&(this._renderer.value.onRequestRedraw(t=>this.refreshRows(t.start,t.end,!0)),this._needsSelectionRefresh=!0,this._fullRefresh())}addRefreshCallback(e){return this._renderDebouncer.addRefreshCallback(e)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){var e,t;this._renderer.value&&((t=(e=this._renderer.value).clearTextureAtlas)==null||t.call(e),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(e,t){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set(()=>{var c;return(c=this._renderer.value)==null?void 0:c.handleResize(e,t)}):this._renderer.value.handleResize(e,t),this._fullRefresh())}handleCharSizeChanged(){var e;(e=this._renderer.value)==null||e.handleCharSizeChanged()}handleBlur(){var e;(e=this._renderer.value)==null||e.handleBlur()}handleFocus(){var e;(e=this._renderer.value)==null||e.handleFocus()}handleSelectionChanged(e,t,c){var p;this._selectionState.start=e,this._selectionState.end=t,this._selectionState.columnSelectMode=c,(p=this._renderer.value)==null||p.handleSelectionChanged(e,t,c)}handleCursorMove(){var e;(e=this._renderer.value)==null||e.handleCursorMove()}clear(){var e;(e=this._renderer.value)==null||e.clear()}};i.RenderService=s=h([_(2,r.IOptionsService),_(3,l.ICharSizeService),_(4,r.IDecorationService),_(5,r.IBufferService),_(6,l.ICoreBrowserService),_(7,l.IThemeService)],s)},9312:function(L,i,o){var h=this&&this.__decorate||function(f,w,A,R){var O,T=arguments.length,N=T<3?w:R===null?R=Object.getOwnPropertyDescriptor(w,A):R;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")N=Reflect.decorate(f,w,A,R);else for(var U=f.length-1;U>=0;U--)(O=f[U])&&(N=(T<3?O(N):T>3?O(w,A,N):O(w,A))||N);return T>3&&N&&Object.defineProperty(w,A,N),N},_=this&&this.__param||function(f,w){return function(A,R){w(A,R,f)}};Object.defineProperty(i,"__esModule",{value:!0}),i.SelectionService=void 0;const a=o(9806),l=o(9504),v=o(456),S=o(4725),u=o(8460),r=o(844),s=o(6114),e=o(4841),t=o(511),c=o(2585),p="Â ",m=new RegExp(p,"g");let b=i.SelectionService=class extends r.Disposable{constructor(f,w,A,R,O,T,N,U,K){super(),this._element=f,this._screenElement=w,this._linkifier=A,this._bufferService=R,this._coreService=O,this._mouseService=T,this._optionsService=N,this._renderService=U,this._coreBrowserService=K,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new t.CellData,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this.register(new u.EventEmitter),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this.register(new u.EventEmitter),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this.register(new u.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this.register(new u.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=Y=>this._handleMouseMove(Y),this._mouseUpListener=Y=>this._handleMouseUp(Y),this._coreService.onUserInput(()=>{this.hasSelection&&this.clearSelection()}),this._trimListener=this._bufferService.buffer.lines.onTrim(Y=>this._handleTrim(Y)),this.register(this._bufferService.buffers.onBufferActivate(Y=>this._handleBufferActivate(Y))),this.enable(),this._model=new v.SelectionModel(this._bufferService),this._activeSelectionMode=0,this.register((0,r.toDisposable)(()=>{this._removeMouseDownListeners()}))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){const f=this._model.finalSelectionStart,w=this._model.finalSelectionEnd;return!(!f||!w||f[0]===w[0]&&f[1]===w[1])}get selectionText(){const f=this._model.finalSelectionStart,w=this._model.finalSelectionEnd;if(!f||!w)return"";const A=this._bufferService.buffer,R=[];if(this._activeSelectionMode===3){if(f[0]===w[0])return"";const O=f[0]<w[0]?f[0]:w[0],T=f[0]<w[0]?w[0]:f[0];for(let N=f[1];N<=w[1];N++){const U=A.translateBufferLineToString(N,!0,O,T);R.push(U)}}else{const O=f[1]===w[1]?w[0]:void 0;R.push(A.translateBufferLineToString(f[1],!0,f[0],O));for(let T=f[1]+1;T<=w[1]-1;T++){const N=A.lines.get(T),U=A.translateBufferLineToString(T,!0);N!=null&&N.isWrapped?R[R.length-1]+=U:R.push(U)}if(f[1]!==w[1]){const T=A.lines.get(w[1]),N=A.translateBufferLineToString(w[1],!0,0,w[0]);T&&T.isWrapped?R[R.length-1]+=N:R.push(N)}}return R.map(O=>O.replace(m," ")).join(s.isWindows?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(f){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._refresh())),s.isLinux&&f&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(f){const w=this._getMouseBufferCoords(f),A=this._model.finalSelectionStart,R=this._model.finalSelectionEnd;return!!(A&&R&&w)&&this._areCoordsInSelection(w,A,R)}isCellInSelection(f,w){const A=this._model.finalSelectionStart,R=this._model.finalSelectionEnd;return!(!A||!R)&&this._areCoordsInSelection([f,w],A,R)}_areCoordsInSelection(f,w,A){return f[1]>w[1]&&f[1]<A[1]||w[1]===A[1]&&f[1]===w[1]&&f[0]>=w[0]&&f[0]<A[0]||w[1]<A[1]&&f[1]===A[1]&&f[0]<A[0]||w[1]<A[1]&&f[1]===w[1]&&f[0]>=w[0]}_selectWordAtCursor(f,w){var O,T;const A=(T=(O=this._linkifier.currentLink)==null?void 0:O.link)==null?void 0:T.range;if(A)return this._model.selectionStart=[A.start.x-1,A.start.y-1],this._model.selectionStartLength=(0,e.getRangeLength)(A,this._bufferService.cols),this._model.selectionEnd=void 0,!0;const R=this._getMouseBufferCoords(f);return!!R&&(this._selectWordAt(R,w),this._model.selectionEnd=void 0,!0)}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(f,w){this._model.clearSelection(),f=Math.max(f,0),w=Math.min(w,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,f],this._model.selectionEnd=[this._bufferService.cols,w],this.refresh(),this._onSelectionChange.fire()}_handleTrim(f){this._model.handleTrim(f)&&this.refresh()}_getMouseBufferCoords(f){const w=this._mouseService.getCoords(f,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(w)return w[0]--,w[1]--,w[1]+=this._bufferService.buffer.ydisp,w}_getMouseEventScrollAmount(f){let w=(0,a.getCoordsRelativeToElement)(this._coreBrowserService.window,f,this._screenElement)[1];const A=this._renderService.dimensions.css.canvas.height;return w>=0&&w<=A?0:(w>A&&(w-=A),w=Math.min(Math.max(w,-50),50),w/=50,w/Math.abs(w)+Math.round(14*w))}shouldForceSelection(f){return s.isMac?f.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:f.shiftKey}handleMouseDown(f){if(this._mouseDownTimeStamp=f.timeStamp,(f.button!==2||!this.hasSelection)&&f.button===0){if(!this._enabled){if(!this.shouldForceSelection(f))return;f.stopPropagation()}f.preventDefault(),this._dragScrollAmount=0,this._enabled&&f.shiftKey?this._handleIncrementalClick(f):f.detail===1?this._handleSingleClick(f):f.detail===2?this._handleDoubleClick(f):f.detail===3&&this._handleTripleClick(f),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval(()=>this._dragScroll(),50)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(f){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(f))}_handleSingleClick(f){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(f)?3:0,this._model.selectionStart=this._getMouseBufferCoords(f),!this._model.selectionStart)return;this._model.selectionEnd=void 0;const w=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);w&&w.length!==this._model.selectionStart[0]&&w.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(f){this._selectWordAtCursor(f,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(f){const w=this._getMouseBufferCoords(f);w&&(this._activeSelectionMode=2,this._selectLineAt(w[1]))}shouldColumnSelect(f){return f.altKey&&!(s.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(f){if(f.stopImmediatePropagation(),!this._model.selectionStart)return;const w=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(f),!this._model.selectionEnd)return void this.refresh(!0);this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(f),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));const A=this._bufferService.buffer;if(this._model.selectionEnd[1]<A.lines.length){const R=A.lines.get(this._model.selectionEnd[1]);R&&R.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]<this._bufferService.cols&&this._model.selectionEnd[0]++}w&&w[0]===this._model.selectionEnd[0]&&w[1]===this._model.selectionEnd[1]||this.refresh(!0)}_dragScroll(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});const f=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(f.ydisp+this._bufferService.rows,f.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=f.ydisp),this.refresh()}}_handleMouseUp(f){const w=f.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&w<500&&f.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){const A=this._mouseService.getCoords(f,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(A&&A[0]!==void 0&&A[1]!==void 0){const R=(0,l.moveToCellSequence)(A[0]-1,A[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(R,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){const f=this._model.finalSelectionStart,w=this._model.finalSelectionEnd,A=!(!f||!w||f[0]===w[0]&&f[1]===w[1]);A?f&&w&&(this._oldSelectionStart&&this._oldSelectionEnd&&f[0]===this._oldSelectionStart[0]&&f[1]===this._oldSelectionStart[1]&&w[0]===this._oldSelectionEnd[0]&&w[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(f,w,A)):this._oldHasSelection&&this._fireOnSelectionChange(f,w,A)}_fireOnSelectionChange(f,w,A){this._oldSelectionStart=f,this._oldSelectionEnd=w,this._oldHasSelection=A,this._onSelectionChange.fire()}_handleBufferActivate(f){this.clearSelection(),this._trimListener.dispose(),this._trimListener=f.activeBuffer.lines.onTrim(w=>this._handleTrim(w))}_convertViewportColToCharacterIndex(f,w){let A=w;for(let R=0;w>=R;R++){const O=f.loadCell(R,this._workCell).getChars().length;this._workCell.getWidth()===0?A--:O>1&&w!==R&&(A+=O-1)}return A}setSelection(f,w,A){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[f,w],this._model.selectionStartLength=A,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(f){this._isClickInSelection(f)||(this._selectWordAtCursor(f,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(f,w,A=!0,R=!0){if(f[0]>=this._bufferService.cols)return;const O=this._bufferService.buffer,T=O.lines.get(f[1]);if(!T)return;const N=O.translateBufferLineToString(f[1],!1);let U=this._convertViewportColToCharacterIndex(T,f[0]),K=U;const Y=f[0]-U;let G=0,C=0,B=0,M=0;if(N.charAt(U)===" "){for(;U>0&&N.charAt(U-1)===" ";)U--;for(;K<N.length&&N.charAt(K+1)===" ";)K++}else{let q=f[0],Q=f[0];T.getWidth(q)===0&&(G++,q--),T.getWidth(Q)===2&&(C++,Q++);const te=T.getString(Q).length;for(te>1&&(M+=te-1,K+=te-1);q>0&&U>0&&!this._isCharWordSeparator(T.loadCell(q-1,this._workCell));){T.loadCell(q-1,this._workCell);const H=this._workCell.getChars().length;this._workCell.getWidth()===0?(G++,q--):H>1&&(B+=H-1,U-=H-1),U--,q--}for(;Q<T.length&&K+1<N.length&&!this._isCharWordSeparator(T.loadCell(Q+1,this._workCell));){T.loadCell(Q+1,this._workCell);const H=this._workCell.getChars().length;this._workCell.getWidth()===2?(C++,Q++):H>1&&(M+=H-1,K+=H-1),K++,Q++}}K++;let I=U+Y-G+B,z=Math.min(this._bufferService.cols,K-U+G+C-B-M);if(w||N.slice(U,K).trim()!==""){if(A&&I===0&&T.getCodePoint(0)!==32){const q=O.lines.get(f[1]-1);if(q&&T.isWrapped&&q.getCodePoint(this._bufferService.cols-1)!==32){const Q=this._getWordAt([this._bufferService.cols-1,f[1]-1],!1,!0,!1);if(Q){const te=this._bufferService.cols-Q.start;I-=te,z+=te}}}if(R&&I+z===this._bufferService.cols&&T.getCodePoint(this._bufferService.cols-1)!==32){const q=O.lines.get(f[1]+1);if(q!=null&&q.isWrapped&&q.getCodePoint(0)!==32){const Q=this._getWordAt([0,f[1]+1],!1,!1,!0);Q&&(z+=Q.length)}}return{start:I,length:z}}}_selectWordAt(f,w){const A=this._getWordAt(f,w);if(A){for(;A.start<0;)A.start+=this._bufferService.cols,f[1]--;this._model.selectionStart=[A.start,f[1]],this._model.selectionStartLength=A.length}}_selectToWordAt(f){const w=this._getWordAt(f,!0);if(w){let A=f[1];for(;w.start<0;)w.start+=this._bufferService.cols,A--;if(!this._model.areSelectionValuesReversed())for(;w.start+w.length>this._bufferService.cols;)w.length-=this._bufferService.cols,A++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?w.start:w.start+w.length,A]}}_isCharWordSeparator(f){return f.getWidth()!==0&&this._optionsService.rawOptions.wordSeparator.indexOf(f.getChars())>=0}_selectLineAt(f){const w=this._bufferService.buffer.getWrappedRangeForLine(f),A={start:{x:0,y:w.first},end:{x:this._bufferService.cols-1,y:w.last}};this._model.selectionStart=[0,w.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,e.getRangeLength)(A,this._bufferService.cols)}};i.SelectionService=b=h([_(3,c.IBufferService),_(4,c.ICoreService),_(5,S.IMouseService),_(6,c.IOptionsService),_(7,S.IRenderService),_(8,S.ICoreBrowserService)],b)},4725:(L,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ILinkProviderService=i.IThemeService=i.ICharacterJoinerService=i.ISelectionService=i.IRenderService=i.IMouseService=i.ICoreBrowserService=i.ICharSizeService=void 0;const h=o(8343);i.ICharSizeService=(0,h.createDecorator)("CharSizeService"),i.ICoreBrowserService=(0,h.createDecorator)("CoreBrowserService"),i.IMouseService=(0,h.createDecorator)("MouseService"),i.IRenderService=(0,h.createDecorator)("RenderService"),i.ISelectionService=(0,h.createDecorator)("SelectionService"),i.ICharacterJoinerService=(0,h.createDecorator)("CharacterJoinerService"),i.IThemeService=(0,h.createDecorator)("ThemeService"),i.ILinkProviderService=(0,h.createDecorator)("LinkProviderService")},6731:function(L,i,o){var h=this&&this.__decorate||function(b,f,w,A){var R,O=arguments.length,T=O<3?f:A===null?A=Object.getOwnPropertyDescriptor(f,w):A;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")T=Reflect.decorate(b,f,w,A);else for(var N=b.length-1;N>=0;N--)(R=b[N])&&(T=(O<3?R(T):O>3?R(f,w,T):R(f,w))||T);return O>3&&T&&Object.defineProperty(f,w,T),T},_=this&&this.__param||function(b,f){return function(w,A){f(w,A,b)}};Object.defineProperty(i,"__esModule",{value:!0}),i.ThemeService=i.DEFAULT_ANSI_COLORS=void 0;const a=o(7239),l=o(8055),v=o(8460),S=o(844),u=o(2585),r=l.css.toColor("#ffffff"),s=l.css.toColor("#000000"),e=l.css.toColor("#ffffff"),t=l.css.toColor("#000000"),c={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};i.DEFAULT_ANSI_COLORS=Object.freeze((()=>{const b=[l.css.toColor("#2e3436"),l.css.toColor("#cc0000"),l.css.toColor("#4e9a06"),l.css.toColor("#c4a000"),l.css.toColor("#3465a4"),l.css.toColor("#75507b"),l.css.toColor("#06989a"),l.css.toColor("#d3d7cf"),l.css.toColor("#555753"),l.css.toColor("#ef2929"),l.css.toColor("#8ae234"),l.css.toColor("#fce94f"),l.css.toColor("#729fcf"),l.css.toColor("#ad7fa8"),l.css.toColor("#34e2e2"),l.css.toColor("#eeeeec")],f=[0,95,135,175,215,255];for(let w=0;w<216;w++){const A=f[w/36%6|0],R=f[w/6%6|0],O=f[w%6];b.push({css:l.channels.toCss(A,R,O),rgba:l.channels.toRgba(A,R,O)})}for(let w=0;w<24;w++){const A=8+10*w;b.push({css:l.channels.toCss(A,A,A),rgba:l.channels.toRgba(A,A,A)})}return b})());let p=i.ThemeService=class extends S.Disposable{get colors(){return this._colors}constructor(b){super(),this._optionsService=b,this._contrastCache=new a.ColorContrastCache,this._halfContrastCache=new a.ColorContrastCache,this._onChangeColors=this.register(new v.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:r,background:s,cursor:e,cursorAccent:t,selectionForeground:void 0,selectionBackgroundTransparent:c,selectionBackgroundOpaque:l.color.blend(s,c),selectionInactiveBackgroundTransparent:c,selectionInactiveBackgroundOpaque:l.color.blend(s,c),ansi:i.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",()=>this._contrastCache.clear())),this.register(this._optionsService.onSpecificOptionChange("theme",()=>this._setTheme(this._optionsService.rawOptions.theme)))}_setTheme(b={}){const f=this._colors;if(f.foreground=m(b.foreground,r),f.background=m(b.background,s),f.cursor=m(b.cursor,e),f.cursorAccent=m(b.cursorAccent,t),f.selectionBackgroundTransparent=m(b.selectionBackground,c),f.selectionBackgroundOpaque=l.color.blend(f.background,f.selectionBackgroundTransparent),f.selectionInactiveBackgroundTransparent=m(b.selectionInactiveBackground,f.selectionBackgroundTransparent),f.selectionInactiveBackgroundOpaque=l.color.blend(f.background,f.selectionInactiveBackgroundTransparent),f.selectionForeground=b.selectionForeground?m(b.selectionForeground,l.NULL_COLOR):void 0,f.selectionForeground===l.NULL_COLOR&&(f.selectionForeground=void 0),l.color.isOpaque(f.selectionBackgroundTransparent)&&(f.selectionBackgroundTransparent=l.color.opacity(f.selectionBackgroundTransparent,.3)),l.color.isOpaque(f.selectionInactiveBackgroundTransparent)&&(f.selectionInactiveBackgroundTransparent=l.color.opacity(f.selectionInactiveBackgroundTransparent,.3)),f.ansi=i.DEFAULT_ANSI_COLORS.slice(),f.ansi[0]=m(b.black,i.DEFAULT_ANSI_COLORS[0]),f.ansi[1]=m(b.red,i.DEFAULT_ANSI_COLORS[1]),f.ansi[2]=m(b.green,i.DEFAULT_ANSI_COLORS[2]),f.ansi[3]=m(b.yellow,i.DEFAULT_ANSI_COLORS[3]),f.ansi[4]=m(b.blue,i.DEFAULT_ANSI_COLORS[4]),f.ansi[5]=m(b.magenta,i.DEFAULT_ANSI_COLORS[5]),f.ansi[6]=m(b.cyan,i.DEFAULT_ANSI_COLORS[6]),f.ansi[7]=m(b.white,i.DEFAULT_ANSI_COLORS[7]),f.ansi[8]=m(b.brightBlack,i.DEFAULT_ANSI_COLORS[8]),f.ansi[9]=m(b.brightRed,i.DEFAULT_ANSI_COLORS[9]),f.ansi[10]=m(b.brightGreen,i.DEFAULT_ANSI_COLORS[10]),f.ansi[11]=m(b.brightYellow,i.DEFAULT_ANSI_COLORS[11]),f.ansi[12]=m(b.brightBlue,i.DEFAULT_ANSI_COLORS[12]),f.ansi[13]=m(b.brightMagenta,i.DEFAULT_ANSI_COLORS[13]),f.ansi[14]=m(b.brightCyan,i.DEFAULT_ANSI_COLORS[14]),f.ansi[15]=m(b.brightWhite,i.DEFAULT_ANSI_COLORS[15]),b.extendedAnsi){const w=Math.min(f.ansi.length-16,b.extendedAnsi.length);for(let A=0;A<w;A++)f.ansi[A+16]=m(b.extendedAnsi[A],i.DEFAULT_ANSI_COLORS[A+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(b){this._restoreColor(b),this._onChangeColors.fire(this.colors)}_restoreColor(b){if(b!==void 0)switch(b){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[b]=this._restoreColors.ansi[b]}else for(let f=0;f<this._restoreColors.ansi.length;++f)this._colors.ansi[f]=this._restoreColors.ansi[f]}modifyColors(b){b(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function m(b,f){if(b!==void 0)try{return l.css.toColor(b)}catch{}return f}i.ThemeService=p=h([_(0,u.IOptionsService)],p)},6349:(L,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CircularList=void 0;const h=o(8460),_=o(844);class a extends _.Disposable{constructor(v){super(),this._maxLength=v,this.onDeleteEmitter=this.register(new h.EventEmitter),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this.register(new h.EventEmitter),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this.register(new h.EventEmitter),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(v){if(this._maxLength===v)return;const S=new Array(v);for(let u=0;u<Math.min(v,this.length);u++)S[u]=this._array[this._getCyclicIndex(u)];this._array=S,this._maxLength=v,this._startIndex=0}get length(){return this._length}set length(v){if(v>this._length)for(let S=this._length;S<v;S++)this._array[S]=void 0;this._length=v}get(v){return this._array[this._getCyclicIndex(v)]}set(v,S){this._array[this._getCyclicIndex(v)]=S}push(v){this._array[this._getCyclicIndex(this._length)]=v,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(v,S,...u){if(S){for(let r=v;r<this._length-S;r++)this._array[this._getCyclicIndex(r)]=this._array[this._getCyclicIndex(r+S)];this._length-=S,this.onDeleteEmitter.fire({index:v,amount:S})}for(let r=this._length-1;r>=v;r--)this._array[this._getCyclicIndex(r+u.length)]=this._array[this._getCyclicIndex(r)];for(let r=0;r<u.length;r++)this._array[this._getCyclicIndex(v+r)]=u[r];if(u.length&&this.onInsertEmitter.fire({index:v,amount:u.length}),this._length+u.length>this._maxLength){const r=this._length+u.length-this._maxLength;this._startIndex+=r,this._length=this._maxLength,this.onTrimEmitter.fire(r)}else this._length+=u.length}trimStart(v){v>this._length&&(v=this._length),this._startIndex+=v,this._length-=v,this.onTrimEmitter.fire(v)}shiftElements(v,S,u){if(!(S<=0)){if(v<0||v>=this._length)throw new Error("start argument out of range");if(v+u<0)throw new Error("Cannot shift elements in list beyond index 0");if(u>0){for(let s=S-1;s>=0;s--)this.set(v+s+u,this.get(v+s));const r=v+S+u-this._length;if(r>0)for(this._length+=r;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let r=0;r<S;r++)this.set(v+r+u,this.get(v+r))}}_getCyclicIndex(v){return(this._startIndex+v)%this._maxLength}}i.CircularList=a},1439:(L,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.clone=void 0,i.clone=function o(h,_=5){if(typeof h!="object")return h;const a=Array.isArray(h)?[]:{};for(const l in h)a[l]=_<=1?h[l]:h[l]&&o(h[l],_-1);return a}},8055:(L,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.contrastRatio=i.toPaddedHex=i.rgba=i.rgb=i.css=i.color=i.channels=i.NULL_COLOR=void 0;let o=0,h=0,_=0,a=0;var l,v,S,u,r;function s(t){const c=t.toString(16);return c.length<2?"0"+c:c}function e(t,c){return t<c?(c+.05)/(t+.05):(t+.05)/(c+.05)}i.NULL_COLOR={css:"#00000000",rgba:0},function(t){t.toCss=function(c,p,m,b){return b!==void 0?`#${s(c)}${s(p)}${s(m)}${s(b)}`:`#${s(c)}${s(p)}${s(m)}`},t.toRgba=function(c,p,m,b=255){return(c<<24|p<<16|m<<8|b)>>>0},t.toColor=function(c,p,m,b){return{css:t.toCss(c,p,m,b),rgba:t.toRgba(c,p,m,b)}}}(l||(i.channels=l={})),function(t){function c(p,m){return a=Math.round(255*m),[o,h,_]=r.toChannels(p.rgba),{css:l.toCss(o,h,_,a),rgba:l.toRgba(o,h,_,a)}}t.blend=function(p,m){if(a=(255&m.rgba)/255,a===1)return{css:m.css,rgba:m.rgba};const b=m.rgba>>24&255,f=m.rgba>>16&255,w=m.rgba>>8&255,A=p.rgba>>24&255,R=p.rgba>>16&255,O=p.rgba>>8&255;return o=A+Math.round((b-A)*a),h=R+Math.round((f-R)*a),_=O+Math.round((w-O)*a),{css:l.toCss(o,h,_),rgba:l.toRgba(o,h,_)}},t.isOpaque=function(p){return(255&p.rgba)==255},t.ensureContrastRatio=function(p,m,b){const f=r.ensureContrastRatio(p.rgba,m.rgba,b);if(f)return l.toColor(f>>24&255,f>>16&255,f>>8&255)},t.opaque=function(p){const m=(255|p.rgba)>>>0;return[o,h,_]=r.toChannels(m),{css:l.toCss(o,h,_),rgba:m}},t.opacity=c,t.multiplyOpacity=function(p,m){return a=255&p.rgba,c(p,a*m/255)},t.toColorRGB=function(p){return[p.rgba>>24&255,p.rgba>>16&255,p.rgba>>8&255]}}(v||(i.color=v={})),function(t){let c,p;try{const m=document.createElement("canvas");m.width=1,m.height=1;const b=m.getContext("2d",{willReadFrequently:!0});b&&(c=b,c.globalCompositeOperation="copy",p=c.createLinearGradient(0,0,1,1))}catch{}t.toColor=function(m){if(m.match(/#[\da-f]{3,8}/i))switch(m.length){case 4:return o=parseInt(m.slice(1,2).repeat(2),16),h=parseInt(m.slice(2,3).repeat(2),16),_=parseInt(m.slice(3,4).repeat(2),16),l.toColor(o,h,_);case 5:return o=parseInt(m.slice(1,2).repeat(2),16),h=parseInt(m.slice(2,3).repeat(2),16),_=parseInt(m.slice(3,4).repeat(2),16),a=parseInt(m.slice(4,5).repeat(2),16),l.toColor(o,h,_,a);case 7:return{css:m,rgba:(parseInt(m.slice(1),16)<<8|255)>>>0};case 9:return{css:m,rgba:parseInt(m.slice(1),16)>>>0}}const b=m.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(b)return o=parseInt(b[1]),h=parseInt(b[2]),_=parseInt(b[3]),a=Math.round(255*(b[5]===void 0?1:parseFloat(b[5]))),l.toColor(o,h,_,a);if(!c||!p)throw new Error("css.toColor: Unsupported css format");if(c.fillStyle=p,c.fillStyle=m,typeof c.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(c.fillRect(0,0,1,1),[o,h,_,a]=c.getImageData(0,0,1,1).data,a!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:l.toRgba(o,h,_,a),css:m}}}(S||(i.css=S={})),function(t){function c(p,m,b){const f=p/255,w=m/255,A=b/255;return .2126*(f<=.03928?f/12.92:Math.pow((f+.055)/1.055,2.4))+.7152*(w<=.03928?w/12.92:Math.pow((w+.055)/1.055,2.4))+.0722*(A<=.03928?A/12.92:Math.pow((A+.055)/1.055,2.4))}t.relativeLuminance=function(p){return c(p>>16&255,p>>8&255,255&p)},t.relativeLuminance2=c}(u||(i.rgb=u={})),function(t){function c(m,b,f){const w=m>>24&255,A=m>>16&255,R=m>>8&255;let O=b>>24&255,T=b>>16&255,N=b>>8&255,U=e(u.relativeLuminance2(O,T,N),u.relativeLuminance2(w,A,R));for(;U<f&&(O>0||T>0||N>0);)O-=Math.max(0,Math.ceil(.1*O)),T-=Math.max(0,Math.ceil(.1*T)),N-=Math.max(0,Math.ceil(.1*N)),U=e(u.relativeLuminance2(O,T,N),u.relativeLuminance2(w,A,R));return(O<<24|T<<16|N<<8|255)>>>0}function p(m,b,f){const w=m>>24&255,A=m>>16&255,R=m>>8&255;let O=b>>24&255,T=b>>16&255,N=b>>8&255,U=e(u.relativeLuminance2(O,T,N),u.relativeLuminance2(w,A,R));for(;U<f&&(O<255||T<255||N<255);)O=Math.min(255,O+Math.ceil(.1*(255-O))),T=Math.min(255,T+Math.ceil(.1*(255-T))),N=Math.min(255,N+Math.ceil(.1*(255-N))),U=e(u.relativeLuminance2(O,T,N),u.relativeLuminance2(w,A,R));return(O<<24|T<<16|N<<8|255)>>>0}t.blend=function(m,b){if(a=(255&b)/255,a===1)return b;const f=b>>24&255,w=b>>16&255,A=b>>8&255,R=m>>24&255,O=m>>16&255,T=m>>8&255;return o=R+Math.round((f-R)*a),h=O+Math.round((w-O)*a),_=T+Math.round((A-T)*a),l.toRgba(o,h,_)},t.ensureContrastRatio=function(m,b,f){const w=u.relativeLuminance(m>>8),A=u.relativeLuminance(b>>8);if(e(w,A)<f){if(A<w){const T=c(m,b,f),N=e(w,u.relativeLuminance(T>>8));if(N<f){const U=p(m,b,f);return N>e(w,u.relativeLuminance(U>>8))?T:U}return T}const R=p(m,b,f),O=e(w,u.relativeLuminance(R>>8));if(O<f){const T=c(m,b,f);return O>e(w,u.relativeLuminance(T>>8))?R:T}return R}},t.reduceLuminance=c,t.increaseLuminance=p,t.toChannels=function(m){return[m>>24&255,m>>16&255,m>>8&255,255&m]}}(r||(i.rgba=r={})),i.toPaddedHex=s,i.contrastRatio=e},8969:(L,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CoreTerminal=void 0;const h=o(844),_=o(2585),a=o(4348),l=o(7866),v=o(744),S=o(7302),u=o(6975),r=o(8460),s=o(1753),e=o(1480),t=o(7994),c=o(9282),p=o(5435),m=o(5981),b=o(2660);let f=!1;class w extends h.Disposable{get onScroll(){return this._onScrollApi||(this._onScrollApi=this.register(new r.EventEmitter),this._onScroll.event(R=>{var O;(O=this._onScrollApi)==null||O.fire(R.position)})),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(R){for(const O in R)this.optionsService.options[O]=R[O]}constructor(R){super(),this._windowsWrappingHeuristics=this.register(new h.MutableDisposable),this._onBinary=this.register(new r.EventEmitter),this.onBinary=this._onBinary.event,this._onData=this.register(new r.EventEmitter),this.onData=this._onData.event,this._onLineFeed=this.register(new r.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onResize=this.register(new r.EventEmitter),this.onResize=this._onResize.event,this._onWriteParsed=this.register(new r.EventEmitter),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this.register(new r.EventEmitter),this._instantiationService=new a.InstantiationService,this.optionsService=this.register(new S.OptionsService(R)),this._instantiationService.setService(_.IOptionsService,this.optionsService),this._bufferService=this.register(this._instantiationService.createInstance(v.BufferService)),this._instantiationService.setService(_.IBufferService,this._bufferService),this._logService=this.register(this._instantiationService.createInstance(l.LogService)),this._instantiationService.setService(_.ILogService,this._logService),this.coreService=this.register(this._instantiationService.createInstance(u.CoreService)),this._instantiationService.setService(_.ICoreService,this.coreService),this.coreMouseService=this.register(this._instantiationService.createInstance(s.CoreMouseService)),this._instantiationService.setService(_.ICoreMouseService,this.coreMouseService),this.unicodeService=this.register(this._instantiationService.createInstance(e.UnicodeService)),this._instantiationService.setService(_.IUnicodeService,this.unicodeService),this._charsetService=this._instantiationService.createInstance(t.CharsetService),this._instantiationService.setService(_.ICharsetService,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(b.OscLinkService),this._instantiationService.setService(_.IOscLinkService,this._oscLinkService),this._inputHandler=this.register(new p.InputHandler(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this.register((0,r.forwardEvent)(this._inputHandler.onLineFeed,this._onLineFeed)),this.register(this._inputHandler),this.register((0,r.forwardEvent)(this._bufferService.onResize,this._onResize)),this.register((0,r.forwardEvent)(this.coreService.onData,this._onData)),this.register((0,r.forwardEvent)(this.coreService.onBinary,this._onBinary)),this.register(this.coreService.onRequestScrollToBottom(()=>this.scrollToBottom())),this.register(this.coreService.onUserInput(()=>this._writeBuffer.handleUserInput())),this.register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],()=>this._handleWindowsPtyOptionChange())),this.register(this._bufferService.onScroll(O=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this.register(this._inputHandler.onScroll(O=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this._writeBuffer=this.register(new m.WriteBuffer((O,T)=>this._inputHandler.parse(O,T))),this.register((0,r.forwardEvent)(this._writeBuffer.onWriteParsed,this._onWriteParsed))}write(R,O){this._writeBuffer.write(R,O)}writeSync(R,O){this._logService.logLevel<=_.LogLevelEnum.WARN&&!f&&(this._logService.warn("writeSync is unreliable and will be removed soon."),f=!0),this._writeBuffer.writeSync(R,O)}input(R,O=!0){this.coreService.triggerDataEvent(R,O)}resize(R,O){isNaN(R)||isNaN(O)||(R=Math.max(R,v.MINIMUM_COLS),O=Math.max(O,v.MINIMUM_ROWS),this._bufferService.resize(R,O))}scroll(R,O=!1){this._bufferService.scroll(R,O)}scrollLines(R,O,T){this._bufferService.scrollLines(R,O,T)}scrollPages(R){this.scrollLines(R*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(R){const O=R-this._bufferService.buffer.ydisp;O!==0&&this.scrollLines(O)}registerEscHandler(R,O){return this._inputHandler.registerEscHandler(R,O)}registerDcsHandler(R,O){return this._inputHandler.registerDcsHandler(R,O)}registerCsiHandler(R,O){return this._inputHandler.registerCsiHandler(R,O)}registerOscHandler(R,O){return this._inputHandler.registerOscHandler(R,O)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let R=!1;const O=this.optionsService.rawOptions.windowsPty;O&&O.buildNumber!==void 0&&O.buildNumber!==void 0?R=O.backend==="conpty"&&O.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(R=!0),R?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){const R=[];R.push(this.onLineFeed(c.updateWindowsModeWrappedState.bind(null,this._bufferService))),R.push(this.registerCsiHandler({final:"H"},()=>((0,c.updateWindowsModeWrappedState)(this._bufferService),!1))),this._windowsWrappingHeuristics.value=(0,h.toDisposable)(()=>{for(const O of R)O.dispose()})}}}i.CoreTerminal=w},8460:(L,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.runAndSubscribe=i.forwardEvent=i.EventEmitter=void 0,i.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=o=>(this._listeners.push(o),{dispose:()=>{if(!this._disposed){for(let h=0;h<this._listeners.length;h++)if(this._listeners[h]===o)return void this._listeners.splice(h,1)}}})),this._event}fire(o,h){const _=[];for(let a=0;a<this._listeners.length;a++)_.push(this._listeners[a]);for(let a=0;a<_.length;a++)_[a].call(void 0,o,h)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},i.forwardEvent=function(o,h){return o(_=>h.fire(_))},i.runAndSubscribe=function(o,h){return h(void 0),o(_=>h(_))}},5435:function(L,i,o){var h=this&&this.__decorate||function(G,C,B,M){var I,z=arguments.length,q=z<3?C:M===null?M=Object.getOwnPropertyDescriptor(C,B):M;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")q=Reflect.decorate(G,C,B,M);else for(var Q=G.length-1;Q>=0;Q--)(I=G[Q])&&(q=(z<3?I(q):z>3?I(C,B,q):I(C,B))||q);return z>3&&q&&Object.defineProperty(C,B,q),q},_=this&&this.__param||function(G,C){return function(B,M){C(B,M,G)}};Object.defineProperty(i,"__esModule",{value:!0}),i.InputHandler=i.WindowsOptionsReportType=void 0;const a=o(2584),l=o(7116),v=o(2015),S=o(844),u=o(482),r=o(8437),s=o(8460),e=o(643),t=o(511),c=o(3734),p=o(2585),m=o(1480),b=o(6242),f=o(6351),w=o(5941),A={"(":0,")":1,"*":2,"+":3,"-":1,".":2},R=131072;function O(G,C){if(G>24)return C.setWinLines||!1;switch(G){case 1:return!!C.restoreWin;case 2:return!!C.minimizeWin;case 3:return!!C.setWinPosition;case 4:return!!C.setWinSizePixels;case 5:return!!C.raiseWin;case 6:return!!C.lowerWin;case 7:return!!C.refreshWin;case 8:return!!C.setWinSizeChars;case 9:return!!C.maximizeWin;case 10:return!!C.fullscreenWin;case 11:return!!C.getWinState;case 13:return!!C.getWinPosition;case 14:return!!C.getWinSizePixels;case 15:return!!C.getScreenSizePixels;case 16:return!!C.getCellSizePixels;case 18:return!!C.getWinSizeChars;case 19:return!!C.getScreenSizeChars;case 20:return!!C.getIconTitle;case 21:return!!C.getWinTitle;case 22:return!!C.pushTitle;case 23:return!!C.popTitle;case 24:return!!C.setWinLines}return!1}var T;(function(G){G[G.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",G[G.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(T||(i.WindowsOptionsReportType=T={}));let N=0;class U extends S.Disposable{getAttrData(){return this._curAttrData}constructor(C,B,M,I,z,q,Q,te,H=new v.EscapeSequenceParser){super(),this._bufferService=C,this._charsetService=B,this._coreService=M,this._logService=I,this._optionsService=z,this._oscLinkService=q,this._coreMouseService=Q,this._unicodeService=te,this._parser=H,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new u.StringToUtf32,this._utf8Decoder=new u.Utf8ToUtf32,this._workCell=new t.CellData,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=r.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=r.DEFAULT_ATTR_DATA.clone(),this._onRequestBell=this.register(new s.EventEmitter),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this.register(new s.EventEmitter),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this.register(new s.EventEmitter),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this.register(new s.EventEmitter),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this.register(new s.EventEmitter),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this.register(new s.EventEmitter),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this.register(new s.EventEmitter),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this.register(new s.EventEmitter),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this.register(new s.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this.register(new s.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onScroll=this.register(new s.EventEmitter),this.onScroll=this._onScroll.event,this._onTitleChange=this.register(new s.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onColor=this.register(new s.EventEmitter),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this.register(this._parser),this._dirtyRowTracker=new K(this._bufferService),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(E=>this._activeBuffer=E.activeBuffer)),this._parser.setCsiHandlerFallback((E,W)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(E),params:W.toArray()})}),this._parser.setEscHandlerFallback(E=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(E)})}),this._parser.setExecuteHandlerFallback(E=>{this._logService.debug("Unknown EXECUTE code: ",{code:E})}),this._parser.setOscHandlerFallback((E,W,F)=>{this._logService.debug("Unknown OSC code: ",{identifier:E,action:W,data:F})}),this._parser.setDcsHandlerFallback((E,W,F)=>{W==="HOOK"&&(F=F.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(E),action:W,payload:F})}),this._parser.setPrintHandler((E,W,F)=>this.print(E,W,F)),this._parser.registerCsiHandler({final:"@"},E=>this.insertChars(E)),this._parser.registerCsiHandler({intermediates:" ",final:"@"},E=>this.scrollLeft(E)),this._parser.registerCsiHandler({final:"A"},E=>this.cursorUp(E)),this._parser.registerCsiHandler({intermediates:" ",final:"A"},E=>this.scrollRight(E)),this._parser.registerCsiHandler({final:"B"},E=>this.cursorDown(E)),this._parser.registerCsiHandler({final:"C"},E=>this.cursorForward(E)),this._parser.registerCsiHandler({final:"D"},E=>this.cursorBackward(E)),this._parser.registerCsiHandler({final:"E"},E=>this.cursorNextLine(E)),this._parser.registerCsiHandler({final:"F"},E=>this.cursorPrecedingLine(E)),this._parser.registerCsiHandler({final:"G"},E=>this.cursorCharAbsolute(E)),this._parser.registerCsiHandler({final:"H"},E=>this.cursorPosition(E)),this._parser.registerCsiHandler({final:"I"},E=>this.cursorForwardTab(E)),this._parser.registerCsiHandler({final:"J"},E=>this.eraseInDisplay(E,!1)),this._parser.registerCsiHandler({prefix:"?",final:"J"},E=>this.eraseInDisplay(E,!0)),this._parser.registerCsiHandler({final:"K"},E=>this.eraseInLine(E,!1)),this._parser.registerCsiHandler({prefix:"?",final:"K"},E=>this.eraseInLine(E,!0)),this._parser.registerCsiHandler({final:"L"},E=>this.insertLines(E)),this._parser.registerCsiHandler({final:"M"},E=>this.deleteLines(E)),this._parser.registerCsiHandler({final:"P"},E=>this.deleteChars(E)),this._parser.registerCsiHandler({final:"S"},E=>this.scrollUp(E)),this._parser.registerCsiHandler({final:"T"},E=>this.scrollDown(E)),this._parser.registerCsiHandler({final:"X"},E=>this.eraseChars(E)),this._parser.registerCsiHandler({final:"Z"},E=>this.cursorBackwardTab(E)),this._parser.registerCsiHandler({final:"`"},E=>this.charPosAbsolute(E)),this._parser.registerCsiHandler({final:"a"},E=>this.hPositionRelative(E)),this._parser.registerCsiHandler({final:"b"},E=>this.repeatPrecedingCharacter(E)),this._parser.registerCsiHandler({final:"c"},E=>this.sendDeviceAttributesPrimary(E)),this._parser.registerCsiHandler({prefix:">",final:"c"},E=>this.sendDeviceAttributesSecondary(E)),this._parser.registerCsiHandler({final:"d"},E=>this.linePosAbsolute(E)),this._parser.registerCsiHandler({final:"e"},E=>this.vPositionRelative(E)),this._parser.registerCsiHandler({final:"f"},E=>this.hVPosition(E)),this._parser.registerCsiHandler({final:"g"},E=>this.tabClear(E)),this._parser.registerCsiHandler({final:"h"},E=>this.setMode(E)),this._parser.registerCsiHandler({prefix:"?",final:"h"},E=>this.setModePrivate(E)),this._parser.registerCsiHandler({final:"l"},E=>this.resetMode(E)),this._parser.registerCsiHandler({prefix:"?",final:"l"},E=>this.resetModePrivate(E)),this._parser.registerCsiHandler({final:"m"},E=>this.charAttributes(E)),this._parser.registerCsiHandler({final:"n"},E=>this.deviceStatus(E)),this._parser.registerCsiHandler({prefix:"?",final:"n"},E=>this.deviceStatusPrivate(E)),this._parser.registerCsiHandler({intermediates:"!",final:"p"},E=>this.softReset(E)),this._parser.registerCsiHandler({intermediates:" ",final:"q"},E=>this.setCursorStyle(E)),this._parser.registerCsiHandler({final:"r"},E=>this.setScrollRegion(E)),this._parser.registerCsiHandler({final:"s"},E=>this.saveCursor(E)),this._parser.registerCsiHandler({final:"t"},E=>this.windowOptions(E)),this._parser.registerCsiHandler({final:"u"},E=>this.restoreCursor(E)),this._parser.registerCsiHandler({intermediates:"'",final:"}"},E=>this.insertColumns(E)),this._parser.registerCsiHandler({intermediates:"'",final:"~"},E=>this.deleteColumns(E)),this._parser.registerCsiHandler({intermediates:'"',final:"q"},E=>this.selectProtected(E)),this._parser.registerCsiHandler({intermediates:"$",final:"p"},E=>this.requestMode(E,!0)),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},E=>this.requestMode(E,!1)),this._parser.setExecuteHandler(a.C0.BEL,()=>this.bell()),this._parser.setExecuteHandler(a.C0.LF,()=>this.lineFeed()),this._parser.setExecuteHandler(a.C0.VT,()=>this.lineFeed()),this._parser.setExecuteHandler(a.C0.FF,()=>this.lineFeed()),this._parser.setExecuteHandler(a.C0.CR,()=>this.carriageReturn()),this._parser.setExecuteHandler(a.C0.BS,()=>this.backspace()),this._parser.setExecuteHandler(a.C0.HT,()=>this.tab()),this._parser.setExecuteHandler(a.C0.SO,()=>this.shiftOut()),this._parser.setExecuteHandler(a.C0.SI,()=>this.shiftIn()),this._parser.setExecuteHandler(a.C1.IND,()=>this.index()),this._parser.setExecuteHandler(a.C1.NEL,()=>this.nextLine()),this._parser.setExecuteHandler(a.C1.HTS,()=>this.tabSet()),this._parser.registerOscHandler(0,new b.OscHandler(E=>(this.setTitle(E),this.setIconName(E),!0))),this._parser.registerOscHandler(1,new b.OscHandler(E=>this.setIconName(E))),this._parser.registerOscHandler(2,new b.OscHandler(E=>this.setTitle(E))),this._parser.registerOscHandler(4,new b.OscHandler(E=>this.setOrReportIndexedColor(E))),this._parser.registerOscHandler(8,new b.OscHandler(E=>this.setHyperlink(E))),this._parser.registerOscHandler(10,new b.OscHandler(E=>this.setOrReportFgColor(E))),this._parser.registerOscHandler(11,new b.OscHandler(E=>this.setOrReportBgColor(E))),this._parser.registerOscHandler(12,new b.OscHandler(E=>this.setOrReportCursorColor(E))),this._parser.registerOscHandler(104,new b.OscHandler(E=>this.restoreIndexedColor(E))),this._parser.registerOscHandler(110,new b.OscHandler(E=>this.restoreFgColor(E))),this._parser.registerOscHandler(111,new b.OscHandler(E=>this.restoreBgColor(E))),this._parser.registerOscHandler(112,new b.OscHandler(E=>this.restoreCursorColor(E))),this._parser.registerEscHandler({final:"7"},()=>this.saveCursor()),this._parser.registerEscHandler({final:"8"},()=>this.restoreCursor()),this._parser.registerEscHandler({final:"D"},()=>this.index()),this._parser.registerEscHandler({final:"E"},()=>this.nextLine()),this._parser.registerEscHandler({final:"H"},()=>this.tabSet()),this._parser.registerEscHandler({final:"M"},()=>this.reverseIndex()),this._parser.registerEscHandler({final:"="},()=>this.keypadApplicationMode()),this._parser.registerEscHandler({final:">"},()=>this.keypadNumericMode()),this._parser.registerEscHandler({final:"c"},()=>this.fullReset()),this._parser.registerEscHandler({final:"n"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"o"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"|"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"}"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"~"},()=>this.setgLevel(1)),this._parser.registerEscHandler({intermediates:"%",final:"@"},()=>this.selectDefaultCharset()),this._parser.registerEscHandler({intermediates:"%",final:"G"},()=>this.selectDefaultCharset());for(const E in l.CHARSETS)this._parser.registerEscHandler({intermediates:"(",final:E},()=>this.selectCharset("("+E)),this._parser.registerEscHandler({intermediates:")",final:E},()=>this.selectCharset(")"+E)),this._parser.registerEscHandler({intermediates:"*",final:E},()=>this.selectCharset("*"+E)),this._parser.registerEscHandler({intermediates:"+",final:E},()=>this.selectCharset("+"+E)),this._parser.registerEscHandler({intermediates:"-",final:E},()=>this.selectCharset("-"+E)),this._parser.registerEscHandler({intermediates:".",final:E},()=>this.selectCharset("."+E)),this._parser.registerEscHandler({intermediates:"/",final:E},()=>this.selectCharset("/"+E));this._parser.registerEscHandler({intermediates:"#",final:"8"},()=>this.screenAlignmentPattern()),this._parser.setErrorHandler(E=>(this._logService.error("Parsing error: ",E),E)),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new f.DcsHandler((E,W)=>this.requestStatusString(E,W)))}_preserveStack(C,B,M,I){this._parseStack.paused=!0,this._parseStack.cursorStartX=C,this._parseStack.cursorStartY=B,this._parseStack.decodedLength=M,this._parseStack.position=I}_logSlowResolvingAsync(C){this._logService.logLevel<=p.LogLevelEnum.WARN&&Promise.race([C,new Promise((B,M)=>setTimeout(()=>M("#SLOW_TIMEOUT"),5e3))]).catch(B=>{if(B!=="#SLOW_TIMEOUT")throw B;console.warn("async parser handler taking longer than 5000 ms")})}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(C,B){let M,I=this._activeBuffer.x,z=this._activeBuffer.y,q=0;const Q=this._parseStack.paused;if(Q){if(M=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,B))return this._logSlowResolvingAsync(M),M;I=this._parseStack.cursorStartX,z=this._parseStack.cursorStartY,this._parseStack.paused=!1,C.length>R&&(q=this._parseStack.position+R)}if(this._logService.logLevel<=p.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof C=="string"?` "${C}"`:` "${Array.prototype.map.call(C,E=>String.fromCharCode(E)).join("")}"`),typeof C=="string"?C.split("").map(E=>E.charCodeAt(0)):C),this._parseBuffer.length<C.length&&this._parseBuffer.length<R&&(this._parseBuffer=new Uint32Array(Math.min(C.length,R))),Q||this._dirtyRowTracker.clearRange(),C.length>R)for(let E=q;E<C.length;E+=R){const W=E+R<C.length?E+R:C.length,F=typeof C=="string"?this._stringDecoder.decode(C.substring(E,W),this._parseBuffer):this._utf8Decoder.decode(C.subarray(E,W),this._parseBuffer);if(M=this._parser.parse(this._parseBuffer,F))return this._preserveStack(I,z,F,E),this._logSlowResolvingAsync(M),M}else if(!Q){const E=typeof C=="string"?this._stringDecoder.decode(C,this._parseBuffer):this._utf8Decoder.decode(C,this._parseBuffer);if(M=this._parser.parse(this._parseBuffer,E))return this._preserveStack(I,z,E,0),this._logSlowResolvingAsync(M),M}this._activeBuffer.x===I&&this._activeBuffer.y===z||this._onCursorMove.fire();const te=this._dirtyRowTracker.end+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp),H=this._dirtyRowTracker.start+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp);H<this._bufferService.rows&&this._onRequestRefreshRows.fire(Math.min(H,this._bufferService.rows-1),Math.min(te,this._bufferService.rows-1))}print(C,B,M){let I,z;const q=this._charsetService.charset,Q=this._optionsService.rawOptions.screenReaderMode,te=this._bufferService.cols,H=this._coreService.decPrivateModes.wraparound,E=this._coreService.modes.insertMode,W=this._curAttrData;let F=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&M-B>0&&F.getWidth(this._activeBuffer.x-1)===2&&F.setCellFromCodepoint(this._activeBuffer.x-1,0,1,W);let V=this._parser.precedingJoinState;for(let X=B;X<M;++X){if(I=C[X],I<127&&q){const ge=q[String.fromCharCode(I)];ge&&(I=ge.charCodeAt(0))}const oe=this._unicodeService.charProperties(I,V);z=m.UnicodeService.extractWidth(oe);const ue=m.UnicodeService.extractShouldJoin(oe),_e=ue?m.UnicodeService.extractWidth(V):0;if(V=oe,Q&&this._onA11yChar.fire((0,u.stringFromCodePoint)(I)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),this._activeBuffer.x+z-_e>te){if(H){const ge=F;let re=this._activeBuffer.x-_e;for(this._activeBuffer.x=_e,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),F=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y),_e>0&&F instanceof r.BufferLine&&F.copyCellsFrom(ge,re,0,_e,!1);re<te;)ge.setCellFromCodepoint(re++,0,1,W)}else if(this._activeBuffer.x=te-1,z===2)continue}if(ue&&this._activeBuffer.x){const ge=F.getWidth(this._activeBuffer.x-1)?1:2;F.addCodepointToCell(this._activeBuffer.x-ge,I,z);for(let re=z-_e;--re>=0;)F.setCellFromCodepoint(this._activeBuffer.x++,0,0,W)}else if(E&&(F.insertCells(this._activeBuffer.x,z-_e,this._activeBuffer.getNullCell(W)),F.getWidth(te-1)===2&&F.setCellFromCodepoint(te-1,e.NULL_CELL_CODE,e.NULL_CELL_WIDTH,W)),F.setCellFromCodepoint(this._activeBuffer.x++,I,z,W),z>0)for(;--z;)F.setCellFromCodepoint(this._activeBuffer.x++,0,0,W)}this._parser.precedingJoinState=V,this._activeBuffer.x<te&&M-B>0&&F.getWidth(this._activeBuffer.x)===0&&!F.hasContent(this._activeBuffer.x)&&F.setCellFromCodepoint(this._activeBuffer.x,0,1,W),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(C,B){return C.final!=="t"||C.prefix||C.intermediates?this._parser.registerCsiHandler(C,B):this._parser.registerCsiHandler(C,M=>!O(M.params[0],this._optionsService.rawOptions.windowOptions)||B(M))}registerDcsHandler(C,B){return this._parser.registerDcsHandler(C,new f.DcsHandler(B))}registerEscHandler(C,B){return this._parser.registerEscHandler(C,B)}registerOscHandler(C,B){return this._parser.registerOscHandler(C,new b.OscHandler(B))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){var C;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&((C=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))!=null&&C.isWrapped)){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;const B=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);B.hasWidth(this._activeBuffer.x)&&!B.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;const C=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-C),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(C=this._bufferService.cols-1){this._activeBuffer.x=Math.min(C,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(C,B){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=C,this._activeBuffer.y=this._activeBuffer.scrollTop+B):(this._activeBuffer.x=C,this._activeBuffer.y=B),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(C,B){this._restrictCursor(),this._setCursor(this._activeBuffer.x+C,this._activeBuffer.y+B)}cursorUp(C){const B=this._activeBuffer.y-this._activeBuffer.scrollTop;return B>=0?this._moveCursor(0,-Math.min(B,C.params[0]||1)):this._moveCursor(0,-(C.params[0]||1)),!0}cursorDown(C){const B=this._activeBuffer.scrollBottom-this._activeBuffer.y;return B>=0?this._moveCursor(0,Math.min(B,C.params[0]||1)):this._moveCursor(0,C.params[0]||1),!0}cursorForward(C){return this._moveCursor(C.params[0]||1,0),!0}cursorBackward(C){return this._moveCursor(-(C.params[0]||1),0),!0}cursorNextLine(C){return this.cursorDown(C),this._activeBuffer.x=0,!0}cursorPrecedingLine(C){return this.cursorUp(C),this._activeBuffer.x=0,!0}cursorCharAbsolute(C){return this._setCursor((C.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(C){return this._setCursor(C.length>=2?(C.params[1]||1)-1:0,(C.params[0]||1)-1),!0}charPosAbsolute(C){return this._setCursor((C.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(C){return this._moveCursor(C.params[0]||1,0),!0}linePosAbsolute(C){return this._setCursor(this._activeBuffer.x,(C.params[0]||1)-1),!0}vPositionRelative(C){return this._moveCursor(0,C.params[0]||1),!0}hVPosition(C){return this.cursorPosition(C),!0}tabClear(C){const B=C.params[0];return B===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:B===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(C){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let B=C.params[0]||1;for(;B--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(C){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let B=C.params[0]||1;for(;B--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(C){const B=C.params[0];return B===1&&(this._curAttrData.bg|=536870912),B!==2&&B!==0||(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(C,B,M,I=!1,z=!1){const q=this._activeBuffer.lines.get(this._activeBuffer.ybase+C);q.replaceCells(B,M,this._activeBuffer.getNullCell(this._eraseAttrData()),z),I&&(q.isWrapped=!1)}_resetBufferLine(C,B=!1){const M=this._activeBuffer.lines.get(this._activeBuffer.ybase+C);M&&(M.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),B),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+C),M.isWrapped=!1)}eraseInDisplay(C,B=!1){let M;switch(this._restrictCursor(this._bufferService.cols),C.params[0]){case 0:for(M=this._activeBuffer.y,this._dirtyRowTracker.markDirty(M),this._eraseInBufferLine(M++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,B);M<this._bufferService.rows;M++)this._resetBufferLine(M,B);this._dirtyRowTracker.markDirty(M);break;case 1:for(M=this._activeBuffer.y,this._dirtyRowTracker.markDirty(M),this._eraseInBufferLine(M,0,this._activeBuffer.x+1,!0,B),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(M+1).isWrapped=!1);M--;)this._resetBufferLine(M,B);this._dirtyRowTracker.markDirty(0);break;case 2:for(M=this._bufferService.rows,this._dirtyRowTracker.markDirty(M-1);M--;)this._resetBufferLine(M,B);this._dirtyRowTracker.markDirty(0);break;case 3:const I=this._activeBuffer.lines.length-this._bufferService.rows;I>0&&(this._activeBuffer.lines.trimStart(I),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-I,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-I,0),this._onScroll.fire(0))}return!0}eraseInLine(C,B=!1){switch(this._restrictCursor(this._bufferService.cols),C.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,B);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,B);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,B)}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(C){this._restrictCursor();let B=C.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const M=this._activeBuffer.ybase+this._activeBuffer.y,I=this._bufferService.rows-1-this._activeBuffer.scrollBottom,z=this._bufferService.rows-1+this._activeBuffer.ybase-I+1;for(;B--;)this._activeBuffer.lines.splice(z-1,1),this._activeBuffer.lines.splice(M,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(C){this._restrictCursor();let B=C.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const M=this._activeBuffer.ybase+this._activeBuffer.y;let I;for(I=this._bufferService.rows-1-this._activeBuffer.scrollBottom,I=this._bufferService.rows-1+this._activeBuffer.ybase-I;B--;)this._activeBuffer.lines.splice(M,1),this._activeBuffer.lines.splice(I,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(C){this._restrictCursor();const B=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return B&&(B.insertCells(this._activeBuffer.x,C.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(C){this._restrictCursor();const B=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return B&&(B.deleteCells(this._activeBuffer.x,C.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(C){let B=C.params[0]||1;for(;B--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(C){let B=C.params[0]||1;for(;B--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(r.DEFAULT_ATTR_DATA));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(C){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const B=C.params[0]||1;for(let M=this._activeBuffer.scrollTop;M<=this._activeBuffer.scrollBottom;++M){const I=this._activeBuffer.lines.get(this._activeBuffer.ybase+M);I.deleteCells(0,B,this._activeBuffer.getNullCell(this._eraseAttrData())),I.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(C){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const B=C.params[0]||1;for(let M=this._activeBuffer.scrollTop;M<=this._activeBuffer.scrollBottom;++M){const I=this._activeBuffer.lines.get(this._activeBuffer.ybase+M);I.insertCells(0,B,this._activeBuffer.getNullCell(this._eraseAttrData())),I.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(C){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const B=C.params[0]||1;for(let M=this._activeBuffer.scrollTop;M<=this._activeBuffer.scrollBottom;++M){const I=this._activeBuffer.lines.get(this._activeBuffer.ybase+M);I.insertCells(this._activeBuffer.x,B,this._activeBuffer.getNullCell(this._eraseAttrData())),I.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(C){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const B=C.params[0]||1;for(let M=this._activeBuffer.scrollTop;M<=this._activeBuffer.scrollBottom;++M){const I=this._activeBuffer.lines.get(this._activeBuffer.ybase+M);I.deleteCells(this._activeBuffer.x,B,this._activeBuffer.getNullCell(this._eraseAttrData())),I.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(C){this._restrictCursor();const B=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return B&&(B.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(C.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(C){const B=this._parser.precedingJoinState;if(!B)return!0;const M=C.params[0]||1,I=m.UnicodeService.extractWidth(B),z=this._activeBuffer.x-I,q=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).getString(z),Q=new Uint32Array(q.length*M);let te=0;for(let E=0;E<q.length;){const W=q.codePointAt(E)||0;Q[te++]=W,E+=W>65535?2:1}let H=te;for(let E=1;E<M;++E)Q.copyWithin(H,0,te),H+=te;return this.print(Q,0,H),!0}sendDeviceAttributesPrimary(C){return C.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(a.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(a.C0.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(C){return C.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(a.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(a.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(C.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(a.C0.ESC+"[>83;40003;0c")),!0}_is(C){return(this._optionsService.rawOptions.termName+"").indexOf(C)===0}setMode(C){for(let B=0;B<C.length;B++)switch(C.params[B]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0}return!0}setModePrivate(C){for(let B=0;B<C.length;B++)switch(C.params[B]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,l.DEFAULT_CHARSET),this._charsetService.setgCharset(1,l.DEFAULT_CHARSET),this._charsetService.setgCharset(2,l.DEFAULT_CHARSET),this._charsetService.setgCharset(3,l.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0}resetMode(C){for(let B=0;B<C.length;B++)switch(C.params[B]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1}return!0}resetModePrivate(C){for(let B=0;B<C.length;B++)switch(C.params[B]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),C.params[B]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0}requestMode(C,B){const M=this._coreService.decPrivateModes,{activeProtocol:I,activeEncoding:z}=this._coreMouseService,q=this._coreService,{buffers:Q,cols:te}=this._bufferService,{active:H,alt:E}=Q,W=this._optionsService.rawOptions,F=ue=>ue?1:2,V=C.params[0];return X=V,oe=B?V===2?4:V===4?F(q.modes.insertMode):V===12?3:V===20?F(W.convertEol):0:V===1?F(M.applicationCursorKeys):V===3?W.windowOptions.setWinLines?te===80?2:te===132?1:0:0:V===6?F(M.origin):V===7?F(M.wraparound):V===8?3:V===9?F(I==="X10"):V===12?F(W.cursorBlink):V===25?F(!q.isCursorHidden):V===45?F(M.reverseWraparound):V===66?F(M.applicationKeypad):V===67?4:V===1e3?F(I==="VT200"):V===1002?F(I==="DRAG"):V===1003?F(I==="ANY"):V===1004?F(M.sendFocus):V===1005?4:V===1006?F(z==="SGR"):V===1015?4:V===1016?F(z==="SGR_PIXELS"):V===1048?1:V===47||V===1047||V===1049?F(H===E):V===2004?F(M.bracketedPasteMode):0,q.triggerDataEvent(`${a.C0.ESC}[${B?"":"?"}${X};${oe}$y`),!0;var X,oe}_updateAttrColor(C,B,M,I,z){return B===2?(C|=50331648,C&=-16777216,C|=c.AttributeData.fromColorRGB([M,I,z])):B===5&&(C&=-50331904,C|=33554432|255&M),C}_extractColor(C,B,M){const I=[0,0,-1,0,0,0];let z=0,q=0;do{if(I[q+z]=C.params[B+q],C.hasSubParams(B+q)){const Q=C.getSubParams(B+q);let te=0;do I[1]===5&&(z=1),I[q+te+1+z]=Q[te];while(++te<Q.length&&te+q+1+z<I.length);break}if(I[1]===5&&q+z>=2||I[1]===2&&q+z>=5)break;I[1]&&(z=1)}while(++q+B<C.length&&q+z<I.length);for(let Q=2;Q<I.length;++Q)I[Q]===-1&&(I[Q]=0);switch(I[0]){case 38:M.fg=this._updateAttrColor(M.fg,I[1],I[3],I[4],I[5]);break;case 48:M.bg=this._updateAttrColor(M.bg,I[1],I[3],I[4],I[5]);break;case 58:M.extended=M.extended.clone(),M.extended.underlineColor=this._updateAttrColor(M.extended.underlineColor,I[1],I[3],I[4],I[5])}return q}_processUnderline(C,B){B.extended=B.extended.clone(),(!~C||C>5)&&(C=1),B.extended.underlineStyle=C,B.fg|=268435456,C===0&&(B.fg&=-268435457),B.updateExtended()}_processSGR0(C){C.fg=r.DEFAULT_ATTR_DATA.fg,C.bg=r.DEFAULT_ATTR_DATA.bg,C.extended=C.extended.clone(),C.extended.underlineStyle=0,C.extended.underlineColor&=-67108864,C.updateExtended()}charAttributes(C){if(C.length===1&&C.params[0]===0)return this._processSGR0(this._curAttrData),!0;const B=C.length;let M;const I=this._curAttrData;for(let z=0;z<B;z++)M=C.params[z],M>=30&&M<=37?(I.fg&=-50331904,I.fg|=16777216|M-30):M>=40&&M<=47?(I.bg&=-50331904,I.bg|=16777216|M-40):M>=90&&M<=97?(I.fg&=-50331904,I.fg|=16777224|M-90):M>=100&&M<=107?(I.bg&=-50331904,I.bg|=16777224|M-100):M===0?this._processSGR0(I):M===1?I.fg|=134217728:M===3?I.bg|=67108864:M===4?(I.fg|=268435456,this._processUnderline(C.hasSubParams(z)?C.getSubParams(z)[0]:1,I)):M===5?I.fg|=536870912:M===7?I.fg|=67108864:M===8?I.fg|=1073741824:M===9?I.fg|=2147483648:M===2?I.bg|=134217728:M===21?this._processUnderline(2,I):M===22?(I.fg&=-134217729,I.bg&=-134217729):M===23?I.bg&=-67108865:M===24?(I.fg&=-268435457,this._processUnderline(0,I)):M===25?I.fg&=-536870913:M===27?I.fg&=-67108865:M===28?I.fg&=-1073741825:M===29?I.fg&=2147483647:M===39?(I.fg&=-67108864,I.fg|=16777215&r.DEFAULT_ATTR_DATA.fg):M===49?(I.bg&=-67108864,I.bg|=16777215&r.DEFAULT_ATTR_DATA.bg):M===38||M===48||M===58?z+=this._extractColor(C,z,I):M===53?I.bg|=1073741824:M===55?I.bg&=-1073741825:M===59?(I.extended=I.extended.clone(),I.extended.underlineColor=-1,I.updateExtended()):M===100?(I.fg&=-67108864,I.fg|=16777215&r.DEFAULT_ATTR_DATA.fg,I.bg&=-67108864,I.bg|=16777215&r.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",M);return!0}deviceStatus(C){switch(C.params[0]){case 5:this._coreService.triggerDataEvent(`${a.C0.ESC}[0n`);break;case 6:const B=this._activeBuffer.y+1,M=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${a.C0.ESC}[${B};${M}R`)}return!0}deviceStatusPrivate(C){if(C.params[0]===6){const B=this._activeBuffer.y+1,M=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${a.C0.ESC}[?${B};${M}R`)}return!0}softReset(C){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=r.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(C){const B=C.params[0]||1;switch(B){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}const M=B%2==1;return this._optionsService.options.cursorBlink=M,!0}setScrollRegion(C){const B=C.params[0]||1;let M;return(C.length<2||(M=C.params[1])>this._bufferService.rows||M===0)&&(M=this._bufferService.rows),M>B&&(this._activeBuffer.scrollTop=B-1,this._activeBuffer.scrollBottom=M-1,this._setCursor(0,0)),!0}windowOptions(C){if(!O(C.params[0],this._optionsService.rawOptions.windowOptions))return!0;const B=C.length>1?C.params[1]:0;switch(C.params[0]){case 14:B!==2&&this._onRequestWindowsOptionsReport.fire(T.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(T.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${a.C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:B!==0&&B!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),B!==0&&B!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:B!==0&&B!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),B!==0&&B!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0}saveCursor(C){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(C){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(C){return this._windowTitle=C,this._onTitleChange.fire(C),!0}setIconName(C){return this._iconName=C,!0}setOrReportIndexedColor(C){const B=[],M=C.split(";");for(;M.length>1;){const I=M.shift(),z=M.shift();if(/^\d+$/.exec(I)){const q=parseInt(I);if(Y(q))if(z==="?")B.push({type:0,index:q});else{const Q=(0,w.parseColor)(z);Q&&B.push({type:1,index:q,color:Q})}}}return B.length&&this._onColor.fire(B),!0}setHyperlink(C){const B=C.split(";");return!(B.length<2)&&(B[1]?this._createHyperlink(B[0],B[1]):!B[0]&&this._finishHyperlink())}_createHyperlink(C,B){this._getCurrentLinkId()&&this._finishHyperlink();const M=C.split(":");let I;const z=M.findIndex(q=>q.startsWith("id="));return z!==-1&&(I=M[z].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:I,uri:B}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(C,B){const M=C.split(";");for(let I=0;I<M.length&&!(B>=this._specialColors.length);++I,++B)if(M[I]==="?")this._onColor.fire([{type:0,index:this._specialColors[B]}]);else{const z=(0,w.parseColor)(M[I]);z&&this._onColor.fire([{type:1,index:this._specialColors[B],color:z}])}return!0}setOrReportFgColor(C){return this._setOrReportSpecialColor(C,0)}setOrReportBgColor(C){return this._setOrReportSpecialColor(C,1)}setOrReportCursorColor(C){return this._setOrReportSpecialColor(C,2)}restoreIndexedColor(C){if(!C)return this._onColor.fire([{type:2}]),!0;const B=[],M=C.split(";");for(let I=0;I<M.length;++I)if(/^\d+$/.exec(M[I])){const z=parseInt(M[I]);Y(z)&&B.push({type:2,index:z})}return B.length&&this._onColor.fire(B),!0}restoreFgColor(C){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(C){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(C){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,l.DEFAULT_CHARSET),!0}selectCharset(C){return C.length!==2?(this.selectDefaultCharset(),!0):(C[0]==="/"||this._charsetService.setgCharset(A[C[0]],l.CHARSETS[C[1]]||l.DEFAULT_CHARSET),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){const C=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,C,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=r.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=r.DEFAULT_ATTR_DATA.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal}setgLevel(C){return this._charsetService.setgLevel(C),!0}screenAlignmentPattern(){const C=new t.CellData;C.content=4194373,C.fg=this._curAttrData.fg,C.bg=this._curAttrData.bg,this._setCursor(0,0);for(let B=0;B<this._bufferService.rows;++B){const M=this._activeBuffer.ybase+this._activeBuffer.y+B,I=this._activeBuffer.lines.get(M);I&&(I.fill(C),I.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(C,B){const M=this._bufferService.buffer,I=this._optionsService.rawOptions;return(z=>(this._coreService.triggerDataEvent(`${a.C0.ESC}${z}${a.C0.ESC}\\`),!0))(C==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:C==='"p'?'P1$r61;1"p':C==="r"?`P1$r${M.scrollTop+1};${M.scrollBottom+1}r`:C==="m"?"P1$r0m":C===" q"?`P1$r${{block:2,underline:4,bar:6}[I.cursorStyle]-(I.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(C,B){this._dirtyRowTracker.markRangeDirty(C,B)}}i.InputHandler=U;let K=class{constructor(G){this._bufferService=G,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(G){G<this.start?this.start=G:G>this.end&&(this.end=G)}markRangeDirty(G,C){G>C&&(N=G,G=C,C=N),G<this.start&&(this.start=G),C>this.end&&(this.end=C)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};function Y(G){return 0<=G&&G<256}K=h([_(0,p.IBufferService)],K)},844:(L,i)=>{function o(h){for(const _ of h)_.dispose();h.length=0}Object.defineProperty(i,"__esModule",{value:!0}),i.getDisposeArrayDisposable=i.disposeArray=i.toDisposable=i.MutableDisposable=i.Disposable=void 0,i.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const h of this._disposables)h.dispose();this._disposables.length=0}register(h){return this._disposables.push(h),h}unregister(h){const _=this._disposables.indexOf(h);_!==-1&&this._disposables.splice(_,1)}},i.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(h){var _;this._isDisposed||h===this._value||((_=this._value)==null||_.dispose(),this._value=h)}clear(){this.value=void 0}dispose(){var h;this._isDisposed=!0,(h=this._value)==null||h.dispose(),this._value=void 0}},i.toDisposable=function(h){return{dispose:h}},i.disposeArray=o,i.getDisposeArrayDisposable=function(h){return{dispose:()=>o(h)}}},1505:(L,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.FourKeyMap=i.TwoKeyMap=void 0;class o{constructor(){this._data={}}set(_,a,l){this._data[_]||(this._data[_]={}),this._data[_][a]=l}get(_,a){return this._data[_]?this._data[_][a]:void 0}clear(){this._data={}}}i.TwoKeyMap=o,i.FourKeyMap=class{constructor(){this._data=new o}set(h,_,a,l,v){this._data.get(h,_)||this._data.set(h,_,new o),this._data.get(h,_).set(a,l,v)}get(h,_,a,l){var v;return(v=this._data.get(h,_))==null?void 0:v.get(a,l)}clear(){this._data.clear()}}},6114:(L,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.isChromeOS=i.isLinux=i.isWindows=i.isIphone=i.isIpad=i.isMac=i.getSafariVersion=i.isSafari=i.isLegacyEdge=i.isFirefox=i.isNode=void 0,i.isNode=typeof process<"u"&&"title"in process;const o=i.isNode?"node":navigator.userAgent,h=i.isNode?"node":navigator.platform;i.isFirefox=o.includes("Firefox"),i.isLegacyEdge=o.includes("Edge"),i.isSafari=/^((?!chrome|android).)*safari/i.test(o),i.getSafariVersion=function(){if(!i.isSafari)return 0;const _=o.match(/Version\/(\d+)/);return _===null||_.length<2?0:parseInt(_[1])},i.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(h),i.isIpad=h==="iPad",i.isIphone=h==="iPhone",i.isWindows=["Windows","Win16","Win32","WinCE"].includes(h),i.isLinux=h.indexOf("Linux")>=0,i.isChromeOS=/\bCrOS\b/.test(o)},6106:(L,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.SortedList=void 0;let o=0;i.SortedList=class{constructor(h){this._getKey=h,this._array=[]}clear(){this._array.length=0}insert(h){this._array.length!==0?(o=this._search(this._getKey(h)),this._array.splice(o,0,h)):this._array.push(h)}delete(h){if(this._array.length===0)return!1;const _=this._getKey(h);if(_===void 0||(o=this._search(_),o===-1)||this._getKey(this._array[o])!==_)return!1;do if(this._array[o]===h)return this._array.splice(o,1),!0;while(++o<this._array.length&&this._getKey(this._array[o])===_);return!1}*getKeyIterator(h){if(this._array.length!==0&&(o=this._search(h),!(o<0||o>=this._array.length)&&this._getKey(this._array[o])===h))do yield this._array[o];while(++o<this._array.length&&this._getKey(this._array[o])===h)}forEachByKey(h,_){if(this._array.length!==0&&(o=this._search(h),!(o<0||o>=this._array.length)&&this._getKey(this._array[o])===h))do _(this._array[o]);while(++o<this._array.length&&this._getKey(this._array[o])===h)}values(){return[...this._array].values()}_search(h){let _=0,a=this._array.length-1;for(;a>=_;){let l=_+a>>1;const v=this._getKey(this._array[l]);if(v>h)a=l-1;else{if(!(v<h)){for(;l>0&&this._getKey(this._array[l-1])===h;)l--;return l}_=l+1}}return _}}},7226:(L,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DebouncedIdleTask=i.IdleTaskQueue=i.PriorityTaskQueue=void 0;const h=o(6114);class _{constructor(){this._tasks=[],this._i=0}enqueue(v){this._tasks.push(v),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(v){this._idleCallback=void 0;let S=0,u=0,r=v.timeRemaining(),s=0;for(;this._i<this._tasks.length;){if(S=Date.now(),this._tasks[this._i]()||this._i++,S=Math.max(1,Date.now()-S),u=Math.max(S,u),s=v.timeRemaining(),1.5*u>s)return r-S<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(r-S))}ms`),void this._start();r=s}this.clear()}}class a extends _{_requestCallback(v){return setTimeout(()=>v(this._createDeadline(16)))}_cancelCallback(v){clearTimeout(v)}_createDeadline(v){const S=Date.now()+v;return{timeRemaining:()=>Math.max(0,S-Date.now())}}}i.PriorityTaskQueue=a,i.IdleTaskQueue=!h.isNode&&"requestIdleCallback"in window?class extends _{_requestCallback(l){return requestIdleCallback(l)}_cancelCallback(l){cancelIdleCallback(l)}}:a,i.DebouncedIdleTask=class{constructor(){this._queue=new i.IdleTaskQueue}set(l){this._queue.clear(),this._queue.enqueue(l)}flush(){this._queue.flush()}}},9282:(L,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.updateWindowsModeWrappedState=void 0;const h=o(643);i.updateWindowsModeWrappedState=function(_){const a=_.buffer.lines.get(_.buffer.ybase+_.buffer.y-1),l=a==null?void 0:a.get(_.cols-1),v=_.buffer.lines.get(_.buffer.ybase+_.buffer.y);v&&l&&(v.isWrapped=l[h.CHAR_DATA_CODE_INDEX]!==h.NULL_CELL_CODE&&l[h.CHAR_DATA_CODE_INDEX]!==h.WHITESPACE_CELL_CODE)}},3734:(L,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ExtendedAttrs=i.AttributeData=void 0;class o{constructor(){this.fg=0,this.bg=0,this.extended=new h}static toColorRGB(a){return[a>>>16&255,a>>>8&255,255&a]}static fromColorRGB(a){return(255&a[0])<<16|(255&a[1])<<8|255&a[2]}clone(){const a=new o;return a.fg=this.fg,a.bg=this.bg,a.extended=this.extended.clone(),a}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}getUnderlineVariantOffset(){return this.extended.underlineVariantOffset}}i.AttributeData=o;class h{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(a){this._ext=a}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(a){this._ext&=-469762049,this._ext|=a<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(a){this._ext&=-67108864,this._ext|=67108863&a}get urlId(){return this._urlId}set urlId(a){this._urlId=a}get underlineVariantOffset(){const a=(3758096384&this._ext)>>29;return a<0?4294967288^a:a}set underlineVariantOffset(a){this._ext&=536870911,this._ext|=a<<29&3758096384}constructor(a=0,l=0){this._ext=0,this._urlId=0,this._ext=a,this._urlId=l}clone(){return new h(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}i.ExtendedAttrs=h},9092:(L,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Buffer=i.MAX_BUFFER_SIZE=void 0;const h=o(6349),_=o(7226),a=o(3734),l=o(8437),v=o(4634),S=o(511),u=o(643),r=o(4863),s=o(7116);i.MAX_BUFFER_SIZE=4294967295,i.Buffer=class{constructor(e,t,c){this._hasScrollback=e,this._optionsService=t,this._bufferService=c,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=l.DEFAULT_ATTR_DATA.clone(),this.savedCharset=s.DEFAULT_CHARSET,this.markers=[],this._nullCell=S.CellData.fromCharData([0,u.NULL_CELL_CHAR,u.NULL_CELL_WIDTH,u.NULL_CELL_CODE]),this._whitespaceCell=S.CellData.fromCharData([0,u.WHITESPACE_CELL_CHAR,u.WHITESPACE_CELL_WIDTH,u.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._memoryCleanupQueue=new _.IdleTaskQueue,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new h.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(e){return e?(this._nullCell.fg=e.fg,this._nullCell.bg=e.bg,this._nullCell.extended=e.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new a.ExtendedAttrs),this._nullCell}getWhitespaceCell(e){return e?(this._whitespaceCell.fg=e.fg,this._whitespaceCell.bg=e.bg,this._whitespaceCell.extended=e.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new a.ExtendedAttrs),this._whitespaceCell}getBlankLine(e,t){return new l.BufferLine(this._bufferService.cols,this.getNullCell(e),t)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){const e=this.ybase+this.y-this.ydisp;return e>=0&&e<this._rows}_getCorrectBufferLength(e){if(!this._hasScrollback)return e;const t=e+this._optionsService.rawOptions.scrollback;return t>i.MAX_BUFFER_SIZE?i.MAX_BUFFER_SIZE:t}fillViewportRows(e){if(this.lines.length===0){e===void 0&&(e=l.DEFAULT_ATTR_DATA);let t=this._rows;for(;t--;)this.lines.push(this.getBlankLine(e))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new h.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(e,t){const c=this.getNullCell(l.DEFAULT_ATTR_DATA);let p=0;const m=this._getCorrectBufferLength(t);if(m>this.lines.maxLength&&(this.lines.maxLength=m),this.lines.length>0){if(this._cols<e)for(let f=0;f<this.lines.length;f++)p+=+this.lines.get(f).resize(e,c);let b=0;if(this._rows<t)for(let f=this._rows;f<t;f++)this.lines.length<t+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new l.BufferLine(e,c)):this.ybase>0&&this.lines.length<=this.ybase+this.y+b+1?(this.ybase--,b++,this.ydisp>0&&this.ydisp--):this.lines.push(new l.BufferLine(e,c)));else for(let f=this._rows;f>t;f--)this.lines.length>t+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(m<this.lines.maxLength){const f=this.lines.length-m;f>0&&(this.lines.trimStart(f),this.ybase=Math.max(this.ybase-f,0),this.ydisp=Math.max(this.ydisp-f,0),this.savedY=Math.max(this.savedY-f,0)),this.lines.maxLength=m}this.x=Math.min(this.x,e-1),this.y=Math.min(this.y,t-1),b&&(this.y+=b),this.savedX=Math.min(this.savedX,e-1),this.scrollTop=0}if(this.scrollBottom=t-1,this._isReflowEnabled&&(this._reflow(e,t),this._cols>e))for(let b=0;b<this.lines.length;b++)p+=+this.lines.get(b).resize(e,c);this._cols=e,this._rows=t,this._memoryCleanupQueue.clear(),p>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue(()=>this._batchedMemoryCleanup()))}_batchedMemoryCleanup(){let e=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,e=!1);let t=0;for(;this._memoryCleanupPosition<this.lines.length;)if(t+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),t>100)return!0;return e}get _isReflowEnabled(){const e=this._optionsService.rawOptions.windowsPty;return e&&e.buildNumber?this._hasScrollback&&e.backend==="conpty"&&e.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(e,t){this._cols!==e&&(e>this._cols?this._reflowLarger(e,t):this._reflowSmaller(e,t))}_reflowLarger(e,t){const c=(0,v.reflowLargerGetLinesToRemove)(this.lines,this._cols,e,this.ybase+this.y,this.getNullCell(l.DEFAULT_ATTR_DATA));if(c.length>0){const p=(0,v.reflowLargerCreateNewLayout)(this.lines,c);(0,v.reflowLargerApplyNewLayout)(this.lines,p.layout),this._reflowLargerAdjustViewport(e,t,p.countRemoved)}}_reflowLargerAdjustViewport(e,t,c){const p=this.getNullCell(l.DEFAULT_ATTR_DATA);let m=c;for(;m-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<t&&this.lines.push(new l.BufferLine(e,p))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-c,0)}_reflowSmaller(e,t){const c=this.getNullCell(l.DEFAULT_ATTR_DATA),p=[];let m=0;for(let b=this.lines.length-1;b>=0;b--){let f=this.lines.get(b);if(!f||!f.isWrapped&&f.getTrimmedLength()<=e)continue;const w=[f];for(;f.isWrapped&&b>0;)f=this.lines.get(--b),w.unshift(f);const A=this.ybase+this.y;if(A>=b&&A<b+w.length)continue;const R=w[w.length-1].getTrimmedLength(),O=(0,v.reflowSmallerGetNewLineLengths)(w,this._cols,e),T=O.length-w.length;let N;N=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+T):Math.max(0,this.lines.length-this.lines.maxLength+T);const U=[];for(let M=0;M<T;M++){const I=this.getBlankLine(l.DEFAULT_ATTR_DATA,!0);U.push(I)}U.length>0&&(p.push({start:b+w.length+m,newLines:U}),m+=U.length),w.push(...U);let K=O.length-1,Y=O[K];Y===0&&(K--,Y=O[K]);let G=w.length-T-1,C=R;for(;G>=0;){const M=Math.min(C,Y);if(w[K]===void 0)break;if(w[K].copyCellsFrom(w[G],C-M,Y-M,M,!0),Y-=M,Y===0&&(K--,Y=O[K]),C-=M,C===0){G--;const I=Math.max(G,0);C=(0,v.getWrappedLineTrimmedLength)(w,I,this._cols)}}for(let M=0;M<w.length;M++)O[M]<e&&w[M].setCell(O[M],c);let B=T-N;for(;B-- >0;)this.ybase===0?this.y<t-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+m)-t&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+T,this.ybase+t-1)}if(p.length>0){const b=[],f=[];for(let K=0;K<this.lines.length;K++)f.push(this.lines.get(K));const w=this.lines.length;let A=w-1,R=0,O=p[R];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+m);let T=0;for(let K=Math.min(this.lines.maxLength-1,w+m-1);K>=0;K--)if(O&&O.start>A+T){for(let Y=O.newLines.length-1;Y>=0;Y--)this.lines.set(K--,O.newLines[Y]);K++,b.push({index:A+1,amount:O.newLines.length}),T+=O.newLines.length,O=p[++R]}else this.lines.set(K,f[A--]);let N=0;for(let K=b.length-1;K>=0;K--)b[K].index+=N,this.lines.onInsertEmitter.fire(b[K]),N+=b[K].amount;const U=Math.max(0,w+m-this.lines.maxLength);U>0&&this.lines.onTrimEmitter.fire(U)}}translateBufferLineToString(e,t,c=0,p){const m=this.lines.get(e);return m?m.translateToString(t,c,p):""}getWrappedRangeForLine(e){let t=e,c=e;for(;t>0&&this.lines.get(t).isWrapped;)t--;for(;c+1<this.lines.length&&this.lines.get(c+1).isWrapped;)c++;return{first:t,last:c}}setupTabStops(e){for(e!=null?this.tabs[e]||(e=this.prevStop(e)):(this.tabs={},e=0);e<this._cols;e+=this._optionsService.rawOptions.tabStopWidth)this.tabs[e]=!0}prevStop(e){for(e==null&&(e=this.x);!this.tabs[--e]&&e>0;);return e>=this._cols?this._cols-1:e<0?0:e}nextStop(e){for(e==null&&(e=this.x);!this.tabs[++e]&&e<this._cols;);return e>=this._cols?this._cols-1:e<0?0:e}clearMarkers(e){this._isClearing=!0;for(let t=0;t<this.markers.length;t++)this.markers[t].line===e&&(this.markers[t].dispose(),this.markers.splice(t--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let e=0;e<this.markers.length;e++)this.markers[e].dispose(),this.markers.splice(e--,1);this._isClearing=!1}addMarker(e){const t=new r.Marker(e);return this.markers.push(t),t.register(this.lines.onTrim(c=>{t.line-=c,t.line<0&&t.dispose()})),t.register(this.lines.onInsert(c=>{t.line>=c.index&&(t.line+=c.amount)})),t.register(this.lines.onDelete(c=>{t.line>=c.index&&t.line<c.index+c.amount&&t.dispose(),t.line>c.index&&(t.line-=c.amount)})),t.register(t.onDispose(()=>this._removeMarker(t))),t}_removeMarker(e){this._isClearing||this.markers.splice(this.markers.indexOf(e),1)}}},8437:(L,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferLine=i.DEFAULT_ATTR_DATA=void 0;const h=o(3734),_=o(511),a=o(643),l=o(482);i.DEFAULT_ATTR_DATA=Object.freeze(new h.AttributeData);let v=0;class S{constructor(r,s,e=!1){this.isWrapped=e,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*r);const t=s||_.CellData.fromCharData([0,a.NULL_CELL_CHAR,a.NULL_CELL_WIDTH,a.NULL_CELL_CODE]);for(let c=0;c<r;++c)this.setCell(c,t);this.length=r}get(r){const s=this._data[3*r+0],e=2097151&s;return[this._data[3*r+1],2097152&s?this._combined[r]:e?(0,l.stringFromCodePoint)(e):"",s>>22,2097152&s?this._combined[r].charCodeAt(this._combined[r].length-1):e]}set(r,s){this._data[3*r+1]=s[a.CHAR_DATA_ATTR_INDEX],s[a.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[r]=s[1],this._data[3*r+0]=2097152|r|s[a.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*r+0]=s[a.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|s[a.CHAR_DATA_WIDTH_INDEX]<<22}getWidth(r){return this._data[3*r+0]>>22}hasWidth(r){return 12582912&this._data[3*r+0]}getFg(r){return this._data[3*r+1]}getBg(r){return this._data[3*r+2]}hasContent(r){return 4194303&this._data[3*r+0]}getCodePoint(r){const s=this._data[3*r+0];return 2097152&s?this._combined[r].charCodeAt(this._combined[r].length-1):2097151&s}isCombined(r){return 2097152&this._data[3*r+0]}getString(r){const s=this._data[3*r+0];return 2097152&s?this._combined[r]:2097151&s?(0,l.stringFromCodePoint)(2097151&s):""}isProtected(r){return 536870912&this._data[3*r+2]}loadCell(r,s){return v=3*r,s.content=this._data[v+0],s.fg=this._data[v+1],s.bg=this._data[v+2],2097152&s.content&&(s.combinedData=this._combined[r]),268435456&s.bg&&(s.extended=this._extendedAttrs[r]),s}setCell(r,s){2097152&s.content&&(this._combined[r]=s.combinedData),268435456&s.bg&&(this._extendedAttrs[r]=s.extended),this._data[3*r+0]=s.content,this._data[3*r+1]=s.fg,this._data[3*r+2]=s.bg}setCellFromCodepoint(r,s,e,t){268435456&t.bg&&(this._extendedAttrs[r]=t.extended),this._data[3*r+0]=s|e<<22,this._data[3*r+1]=t.fg,this._data[3*r+2]=t.bg}addCodepointToCell(r,s,e){let t=this._data[3*r+0];2097152&t?this._combined[r]+=(0,l.stringFromCodePoint)(s):2097151&t?(this._combined[r]=(0,l.stringFromCodePoint)(2097151&t)+(0,l.stringFromCodePoint)(s),t&=-2097152,t|=2097152):t=s|4194304,e&&(t&=-12582913,t|=e<<22),this._data[3*r+0]=t}insertCells(r,s,e){if((r%=this.length)&&this.getWidth(r-1)===2&&this.setCellFromCodepoint(r-1,0,1,e),s<this.length-r){const t=new _.CellData;for(let c=this.length-r-s-1;c>=0;--c)this.setCell(r+s+c,this.loadCell(r+c,t));for(let c=0;c<s;++c)this.setCell(r+c,e)}else for(let t=r;t<this.length;++t)this.setCell(t,e);this.getWidth(this.length-1)===2&&this.setCellFromCodepoint(this.length-1,0,1,e)}deleteCells(r,s,e){if(r%=this.length,s<this.length-r){const t=new _.CellData;for(let c=0;c<this.length-r-s;++c)this.setCell(r+c,this.loadCell(r+s+c,t));for(let c=this.length-s;c<this.length;++c)this.setCell(c,e)}else for(let t=r;t<this.length;++t)this.setCell(t,e);r&&this.getWidth(r-1)===2&&this.setCellFromCodepoint(r-1,0,1,e),this.getWidth(r)!==0||this.hasContent(r)||this.setCellFromCodepoint(r,0,1,e)}replaceCells(r,s,e,t=!1){if(t)for(r&&this.getWidth(r-1)===2&&!this.isProtected(r-1)&&this.setCellFromCodepoint(r-1,0,1,e),s<this.length&&this.getWidth(s-1)===2&&!this.isProtected(s)&&this.setCellFromCodepoint(s,0,1,e);r<s&&r<this.length;)this.isProtected(r)||this.setCell(r,e),r++;else for(r&&this.getWidth(r-1)===2&&this.setCellFromCodepoint(r-1,0,1,e),s<this.length&&this.getWidth(s-1)===2&&this.setCellFromCodepoint(s,0,1,e);r<s&&r<this.length;)this.setCell(r++,e)}resize(r,s){if(r===this.length)return 4*this._data.length*2<this._data.buffer.byteLength;const e=3*r;if(r>this.length){if(this._data.buffer.byteLength>=4*e)this._data=new Uint32Array(this._data.buffer,0,e);else{const t=new Uint32Array(e);t.set(this._data),this._data=t}for(let t=this.length;t<r;++t)this.setCell(t,s)}else{this._data=this._data.subarray(0,e);const t=Object.keys(this._combined);for(let p=0;p<t.length;p++){const m=parseInt(t[p],10);m>=r&&delete this._combined[m]}const c=Object.keys(this._extendedAttrs);for(let p=0;p<c.length;p++){const m=parseInt(c[p],10);m>=r&&delete this._extendedAttrs[m]}}return this.length=r,4*e*2<this._data.buffer.byteLength}cleanupMemory(){if(4*this._data.length*2<this._data.buffer.byteLength){const r=new Uint32Array(this._data.length);return r.set(this._data),this._data=r,1}return 0}fill(r,s=!1){if(s)for(let e=0;e<this.length;++e)this.isProtected(e)||this.setCell(e,r);else{this._combined={},this._extendedAttrs={};for(let e=0;e<this.length;++e)this.setCell(e,r)}}copyFrom(r){this.length!==r.length?this._data=new Uint32Array(r._data):this._data.set(r._data),this.length=r.length,this._combined={};for(const s in r._combined)this._combined[s]=r._combined[s];this._extendedAttrs={};for(const s in r._extendedAttrs)this._extendedAttrs[s]=r._extendedAttrs[s];this.isWrapped=r.isWrapped}clone(){const r=new S(0);r._data=new Uint32Array(this._data),r.length=this.length;for(const s in this._combined)r._combined[s]=this._combined[s];for(const s in this._extendedAttrs)r._extendedAttrs[s]=this._extendedAttrs[s];return r.isWrapped=this.isWrapped,r}getTrimmedLength(){for(let r=this.length-1;r>=0;--r)if(4194303&this._data[3*r+0])return r+(this._data[3*r+0]>>22);return 0}getNoBgTrimmedLength(){for(let r=this.length-1;r>=0;--r)if(4194303&this._data[3*r+0]||50331648&this._data[3*r+2])return r+(this._data[3*r+0]>>22);return 0}copyCellsFrom(r,s,e,t,c){const p=r._data;if(c)for(let b=t-1;b>=0;b--){for(let f=0;f<3;f++)this._data[3*(e+b)+f]=p[3*(s+b)+f];268435456&p[3*(s+b)+2]&&(this._extendedAttrs[e+b]=r._extendedAttrs[s+b])}else for(let b=0;b<t;b++){for(let f=0;f<3;f++)this._data[3*(e+b)+f]=p[3*(s+b)+f];268435456&p[3*(s+b)+2]&&(this._extendedAttrs[e+b]=r._extendedAttrs[s+b])}const m=Object.keys(r._combined);for(let b=0;b<m.length;b++){const f=parseInt(m[b],10);f>=s&&(this._combined[f-s+e]=r._combined[f])}}translateToString(r,s,e,t){s=s??0,e=e??this.length,r&&(e=Math.min(e,this.getTrimmedLength())),t&&(t.length=0);let c="";for(;s<e;){const p=this._data[3*s+0],m=2097151&p,b=2097152&p?this._combined[s]:m?(0,l.stringFromCodePoint)(m):a.WHITESPACE_CELL_CHAR;if(c+=b,t)for(let f=0;f<b.length;++f)t.push(s);s+=p>>22||1}return t&&t.push(s),c}}i.BufferLine=S},4841:(L,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.getRangeLength=void 0,i.getRangeLength=function(o,h){if(o.start.y>o.end.y)throw new Error(`Buffer range end (${o.end.x}, ${o.end.y}) cannot be before start (${o.start.x}, ${o.start.y})`);return h*(o.end.y-o.start.y)+(o.end.x-o.start.x+1)}},4634:(L,i)=>{function o(h,_,a){if(_===h.length-1)return h[_].getTrimmedLength();const l=!h[_].hasContent(a-1)&&h[_].getWidth(a-1)===1,v=h[_+1].getWidth(0)===2;return l&&v?a-1:a}Object.defineProperty(i,"__esModule",{value:!0}),i.getWrappedLineTrimmedLength=i.reflowSmallerGetNewLineLengths=i.reflowLargerApplyNewLayout=i.reflowLargerCreateNewLayout=i.reflowLargerGetLinesToRemove=void 0,i.reflowLargerGetLinesToRemove=function(h,_,a,l,v){const S=[];for(let u=0;u<h.length-1;u++){let r=u,s=h.get(++r);if(!s.isWrapped)continue;const e=[h.get(u)];for(;r<h.length&&s.isWrapped;)e.push(s),s=h.get(++r);if(l>=u&&l<r){u+=e.length-1;continue}let t=0,c=o(e,t,_),p=1,m=0;for(;p<e.length;){const f=o(e,p,_),w=f-m,A=a-c,R=Math.min(w,A);e[t].copyCellsFrom(e[p],m,c,R,!1),c+=R,c===a&&(t++,c=0),m+=R,m===f&&(p++,m=0),c===0&&t!==0&&e[t-1].getWidth(a-1)===2&&(e[t].copyCellsFrom(e[t-1],a-1,c++,1,!1),e[t-1].setCell(a-1,v))}e[t].replaceCells(c,a,v);let b=0;for(let f=e.length-1;f>0&&(f>t||e[f].getTrimmedLength()===0);f--)b++;b>0&&(S.push(u+e.length-b),S.push(b)),u+=e.length-1}return S},i.reflowLargerCreateNewLayout=function(h,_){const a=[];let l=0,v=_[l],S=0;for(let u=0;u<h.length;u++)if(v===u){const r=_[++l];h.onDeleteEmitter.fire({index:u-S,amount:r}),u+=r-1,S+=r,v=_[++l]}else a.push(u);return{layout:a,countRemoved:S}},i.reflowLargerApplyNewLayout=function(h,_){const a=[];for(let l=0;l<_.length;l++)a.push(h.get(_[l]));for(let l=0;l<a.length;l++)h.set(l,a[l]);h.length=_.length},i.reflowSmallerGetNewLineLengths=function(h,_,a){const l=[],v=h.map((s,e)=>o(h,e,_)).reduce((s,e)=>s+e);let S=0,u=0,r=0;for(;r<v;){if(v-r<a){l.push(v-r);break}S+=a;const s=o(h,u,_);S>s&&(S-=s,u++);const e=h[u].getWidth(S-1)===2;e&&S--;const t=e?a-1:a;l.push(t),r+=t}return l},i.getWrappedLineTrimmedLength=o},5295:(L,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferSet=void 0;const h=o(8460),_=o(844),a=o(9092);class l extends _.Disposable{constructor(S,u){super(),this._optionsService=S,this._bufferService=u,this._onBufferActivate=this.register(new h.EventEmitter),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.resize(this._bufferService.cols,this._bufferService.rows))),this.register(this._optionsService.onSpecificOptionChange("tabStopWidth",()=>this.setupTabStops()))}reset(){this._normal=new a.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new a.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(S){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(S),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(S,u){this._normal.resize(S,u),this._alt.resize(S,u),this.setupTabStops(S)}setupTabStops(S){this._normal.setupTabStops(S),this._alt.setupTabStops(S)}}i.BufferSet=l},511:(L,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CellData=void 0;const h=o(482),_=o(643),a=o(3734);class l extends a.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new a.ExtendedAttrs,this.combinedData=""}static fromCharData(S){const u=new l;return u.setFromCharData(S),u}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,h.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(S){this.fg=S[_.CHAR_DATA_ATTR_INDEX],this.bg=0;let u=!1;if(S[_.CHAR_DATA_CHAR_INDEX].length>2)u=!0;else if(S[_.CHAR_DATA_CHAR_INDEX].length===2){const r=S[_.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=r&&r<=56319){const s=S[_.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=s&&s<=57343?this.content=1024*(r-55296)+s-56320+65536|S[_.CHAR_DATA_WIDTH_INDEX]<<22:u=!0}else u=!0}else this.content=S[_.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|S[_.CHAR_DATA_WIDTH_INDEX]<<22;u&&(this.combinedData=S[_.CHAR_DATA_CHAR_INDEX],this.content=2097152|S[_.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}i.CellData=l},643:(L,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.WHITESPACE_CELL_CODE=i.WHITESPACE_CELL_WIDTH=i.WHITESPACE_CELL_CHAR=i.NULL_CELL_CODE=i.NULL_CELL_WIDTH=i.NULL_CELL_CHAR=i.CHAR_DATA_CODE_INDEX=i.CHAR_DATA_WIDTH_INDEX=i.CHAR_DATA_CHAR_INDEX=i.CHAR_DATA_ATTR_INDEX=i.DEFAULT_EXT=i.DEFAULT_ATTR=i.DEFAULT_COLOR=void 0,i.DEFAULT_COLOR=0,i.DEFAULT_ATTR=256|i.DEFAULT_COLOR<<9,i.DEFAULT_EXT=0,i.CHAR_DATA_ATTR_INDEX=0,i.CHAR_DATA_CHAR_INDEX=1,i.CHAR_DATA_WIDTH_INDEX=2,i.CHAR_DATA_CODE_INDEX=3,i.NULL_CELL_CHAR="",i.NULL_CELL_WIDTH=1,i.NULL_CELL_CODE=0,i.WHITESPACE_CELL_CHAR=" ",i.WHITESPACE_CELL_WIDTH=1,i.WHITESPACE_CELL_CODE=32},4863:(L,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Marker=void 0;const h=o(8460),_=o(844);class a{get id(){return this._id}constructor(v){this.line=v,this.isDisposed=!1,this._disposables=[],this._id=a._nextId++,this._onDispose=this.register(new h.EventEmitter),this.onDispose=this._onDispose.event}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),(0,_.disposeArray)(this._disposables),this._disposables.length=0)}register(v){return this._disposables.push(v),v}}i.Marker=a,a._nextId=1},7116:(L,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DEFAULT_CHARSET=i.CHARSETS=void 0,i.CHARSETS={},i.DEFAULT_CHARSET=i.CHARSETS.B,i.CHARSETS[0]={"`":"â",a:"â",b:"â",c:"â",d:"â",e:"â",f:"Â°",g:"Â±",h:"â¤",i:"â",j:"â",k:"â",l:"â",m:"â",n:"â¼",o:"âº",p:"â»",q:"â",r:"â¼",s:"â½",t:"â",u:"â¤",v:"â´",w:"â¬",x:"â",y:"â¤",z:"â¥","{":"Ï","|":"â ","}":"Â£","~":"Â·"},i.CHARSETS.A={"#":"Â£"},i.CHARSETS.B=void 0,i.CHARSETS[4]={"#":"Â£","@":"Â¾","[":"ij","\\":"Â½","]":"|","{":"Â¨","|":"f","}":"Â¼","~":"Â´"},i.CHARSETS.C=i.CHARSETS[5]={"[":"Ã","\\":"Ã","]":"Ã","^":"Ã","`":"Ã©","{":"Ã¤","|":"Ã¶","}":"Ã¥","~":"Ã¼"},i.CHARSETS.R={"#":"Â£","@":"Ã ","[":"Â°","\\":"Ã§","]":"Â§","{":"Ã©","|":"Ã¹","}":"Ã¨","~":"Â¨"},i.CHARSETS.Q={"@":"Ã ","[":"Ã¢","\\":"Ã§","]":"Ãª","^":"Ã®","`":"Ã´","{":"Ã©","|":"Ã¹","}":"Ã¨","~":"Ã»"},i.CHARSETS.K={"@":"Â§","[":"Ã","\\":"Ã","]":"Ã","{":"Ã¤","|":"Ã¶","}":"Ã¼","~":"Ã"},i.CHARSETS.Y={"#":"Â£","@":"Â§","[":"Â°","\\":"Ã§","]":"Ã©","`":"Ã¹","{":"Ã ","|":"Ã²","}":"Ã¨","~":"Ã¬"},i.CHARSETS.E=i.CHARSETS[6]={"@":"Ã","[":"Ã","\\":"Ã","]":"Ã","^":"Ã","`":"Ã¤","{":"Ã¦","|":"Ã¸","}":"Ã¥","~":"Ã¼"},i.CHARSETS.Z={"#":"Â£","@":"Â§","[":"Â¡","\\":"Ã","]":"Â¿","{":"Â°","|":"Ã±","}":"Ã§"},i.CHARSETS.H=i.CHARSETS[7]={"@":"Ã","[":"Ã","\\":"Ã","]":"Ã","^":"Ã","`":"Ã©","{":"Ã¤","|":"Ã¶","}":"Ã¥","~":"Ã¼"},i.CHARSETS["="]={"#":"Ã¹","@":"Ã ","[":"Ã©","\\":"Ã§","]":"Ãª","^":"Ã®",_:"Ã¨","`":"Ã´","{":"Ã¤","|":"Ã¶","}":"Ã¼","~":"Ã»"}},2584:(L,i)=>{var o,h,_;Object.defineProperty(i,"__esModule",{value:!0}),i.C1_ESCAPED=i.C1=i.C0=void 0,function(a){a.NUL="\0",a.SOH="",a.STX="",a.ETX="",a.EOT="",a.ENQ="",a.ACK="",a.BEL="\x07",a.BS="\b",a.HT="	",a.LF=`
`,a.VT="\v",a.FF="\f",a.CR="\r",a.SO="",a.SI="",a.DLE="",a.DC1="",a.DC2="",a.DC3="",a.DC4="",a.NAK="",a.SYN="",a.ETB="",a.CAN="",a.EM="",a.SUB="",a.ESC="\x1B",a.FS="",a.GS="",a.RS="",a.US="",a.SP=" ",a.DEL=""}(o||(i.C0=o={})),function(a){a.PAD="Â",a.HOP="Â",a.BPH="Â",a.NBH="Â",a.IND="Â",a.NEL="Â",a.SSA="Â",a.ESA="Â",a.HTS="Â",a.HTJ="Â",a.VTS="Â",a.PLD="Â",a.PLU="Â",a.RI="Â",a.SS2="Â",a.SS3="Â",a.DCS="Â",a.PU1="Â",a.PU2="Â",a.STS="Â",a.CCH="Â",a.MW="Â",a.SPA="Â",a.EPA="Â",a.SOS="Â",a.SGCI="Â",a.SCI="Â",a.CSI="Â",a.ST="Â",a.OSC="Â",a.PM="Â",a.APC="Â"}(h||(i.C1=h={})),function(a){a.ST=`${o.ESC}\\`}(_||(i.C1_ESCAPED=_={}))},7399:(L,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.evaluateKeyboardEvent=void 0;const h=o(2584),_={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};i.evaluateKeyboardEvent=function(a,l,v,S){const u={type:0,cancel:!1,key:void 0},r=(a.shiftKey?1:0)|(a.altKey?2:0)|(a.ctrlKey?4:0)|(a.metaKey?8:0);switch(a.keyCode){case 0:a.key==="UIKeyInputUpArrow"?u.key=l?h.C0.ESC+"OA":h.C0.ESC+"[A":a.key==="UIKeyInputLeftArrow"?u.key=l?h.C0.ESC+"OD":h.C0.ESC+"[D":a.key==="UIKeyInputRightArrow"?u.key=l?h.C0.ESC+"OC":h.C0.ESC+"[C":a.key==="UIKeyInputDownArrow"&&(u.key=l?h.C0.ESC+"OB":h.C0.ESC+"[B");break;case 8:u.key=a.ctrlKey?"\b":h.C0.DEL,a.altKey&&(u.key=h.C0.ESC+u.key);break;case 9:if(a.shiftKey){u.key=h.C0.ESC+"[Z";break}u.key=h.C0.HT,u.cancel=!0;break;case 13:u.key=a.altKey?h.C0.ESC+h.C0.CR:h.C0.CR,u.cancel=!0;break;case 27:u.key=h.C0.ESC,a.altKey&&(u.key=h.C0.ESC+h.C0.ESC),u.cancel=!0;break;case 37:if(a.metaKey)break;r?(u.key=h.C0.ESC+"[1;"+(r+1)+"D",u.key===h.C0.ESC+"[1;3D"&&(u.key=h.C0.ESC+(v?"b":"[1;5D"))):u.key=l?h.C0.ESC+"OD":h.C0.ESC+"[D";break;case 39:if(a.metaKey)break;r?(u.key=h.C0.ESC+"[1;"+(r+1)+"C",u.key===h.C0.ESC+"[1;3C"&&(u.key=h.C0.ESC+(v?"f":"[1;5C"))):u.key=l?h.C0.ESC+"OC":h.C0.ESC+"[C";break;case 38:if(a.metaKey)break;r?(u.key=h.C0.ESC+"[1;"+(r+1)+"A",v||u.key!==h.C0.ESC+"[1;3A"||(u.key=h.C0.ESC+"[1;5A")):u.key=l?h.C0.ESC+"OA":h.C0.ESC+"[A";break;case 40:if(a.metaKey)break;r?(u.key=h.C0.ESC+"[1;"+(r+1)+"B",v||u.key!==h.C0.ESC+"[1;3B"||(u.key=h.C0.ESC+"[1;5B")):u.key=l?h.C0.ESC+"OB":h.C0.ESC+"[B";break;case 45:a.shiftKey||a.ctrlKey||(u.key=h.C0.ESC+"[2~");break;case 46:u.key=r?h.C0.ESC+"[3;"+(r+1)+"~":h.C0.ESC+"[3~";break;case 36:u.key=r?h.C0.ESC+"[1;"+(r+1)+"H":l?h.C0.ESC+"OH":h.C0.ESC+"[H";break;case 35:u.key=r?h.C0.ESC+"[1;"+(r+1)+"F":l?h.C0.ESC+"OF":h.C0.ESC+"[F";break;case 33:a.shiftKey?u.type=2:a.ctrlKey?u.key=h.C0.ESC+"[5;"+(r+1)+"~":u.key=h.C0.ESC+"[5~";break;case 34:a.shiftKey?u.type=3:a.ctrlKey?u.key=h.C0.ESC+"[6;"+(r+1)+"~":u.key=h.C0.ESC+"[6~";break;case 112:u.key=r?h.C0.ESC+"[1;"+(r+1)+"P":h.C0.ESC+"OP";break;case 113:u.key=r?h.C0.ESC+"[1;"+(r+1)+"Q":h.C0.ESC+"OQ";break;case 114:u.key=r?h.C0.ESC+"[1;"+(r+1)+"R":h.C0.ESC+"OR";break;case 115:u.key=r?h.C0.ESC+"[1;"+(r+1)+"S":h.C0.ESC+"OS";break;case 116:u.key=r?h.C0.ESC+"[15;"+(r+1)+"~":h.C0.ESC+"[15~";break;case 117:u.key=r?h.C0.ESC+"[17;"+(r+1)+"~":h.C0.ESC+"[17~";break;case 118:u.key=r?h.C0.ESC+"[18;"+(r+1)+"~":h.C0.ESC+"[18~";break;case 119:u.key=r?h.C0.ESC+"[19;"+(r+1)+"~":h.C0.ESC+"[19~";break;case 120:u.key=r?h.C0.ESC+"[20;"+(r+1)+"~":h.C0.ESC+"[20~";break;case 121:u.key=r?h.C0.ESC+"[21;"+(r+1)+"~":h.C0.ESC+"[21~";break;case 122:u.key=r?h.C0.ESC+"[23;"+(r+1)+"~":h.C0.ESC+"[23~";break;case 123:u.key=r?h.C0.ESC+"[24;"+(r+1)+"~":h.C0.ESC+"[24~";break;default:if(!a.ctrlKey||a.shiftKey||a.altKey||a.metaKey)if(v&&!S||!a.altKey||a.metaKey)!v||a.altKey||a.ctrlKey||a.shiftKey||!a.metaKey?a.key&&!a.ctrlKey&&!a.altKey&&!a.metaKey&&a.keyCode>=48&&a.key.length===1?u.key=a.key:a.key&&a.ctrlKey&&(a.key==="_"&&(u.key=h.C0.US),a.key==="@"&&(u.key=h.C0.NUL)):a.keyCode===65&&(u.type=1);else{const s=_[a.keyCode],e=s==null?void 0:s[a.shiftKey?1:0];if(e)u.key=h.C0.ESC+e;else if(a.keyCode>=65&&a.keyCode<=90){const t=a.ctrlKey?a.keyCode-64:a.keyCode+32;let c=String.fromCharCode(t);a.shiftKey&&(c=c.toUpperCase()),u.key=h.C0.ESC+c}else if(a.keyCode===32)u.key=h.C0.ESC+(a.ctrlKey?h.C0.NUL:" ");else if(a.key==="Dead"&&a.code.startsWith("Key")){let t=a.code.slice(3,4);a.shiftKey||(t=t.toLowerCase()),u.key=h.C0.ESC+t,u.cancel=!0}}else a.keyCode>=65&&a.keyCode<=90?u.key=String.fromCharCode(a.keyCode-64):a.keyCode===32?u.key=h.C0.NUL:a.keyCode>=51&&a.keyCode<=55?u.key=String.fromCharCode(a.keyCode-51+27):a.keyCode===56?u.key=h.C0.DEL:a.keyCode===219?u.key=h.C0.ESC:a.keyCode===220?u.key=h.C0.FS:a.keyCode===221&&(u.key=h.C0.GS)}return u}},482:(L,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Utf8ToUtf32=i.StringToUtf32=i.utf32ToString=i.stringFromCodePoint=void 0,i.stringFromCodePoint=function(o){return o>65535?(o-=65536,String.fromCharCode(55296+(o>>10))+String.fromCharCode(o%1024+56320)):String.fromCharCode(o)},i.utf32ToString=function(o,h=0,_=o.length){let a="";for(let l=h;l<_;++l){let v=o[l];v>65535?(v-=65536,a+=String.fromCharCode(55296+(v>>10))+String.fromCharCode(v%1024+56320)):a+=String.fromCharCode(v)}return a},i.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(o,h){const _=o.length;if(!_)return 0;let a=0,l=0;if(this._interim){const v=o.charCodeAt(l++);56320<=v&&v<=57343?h[a++]=1024*(this._interim-55296)+v-56320+65536:(h[a++]=this._interim,h[a++]=v),this._interim=0}for(let v=l;v<_;++v){const S=o.charCodeAt(v);if(55296<=S&&S<=56319){if(++v>=_)return this._interim=S,a;const u=o.charCodeAt(v);56320<=u&&u<=57343?h[a++]=1024*(S-55296)+u-56320+65536:(h[a++]=S,h[a++]=u)}else S!==65279&&(h[a++]=S)}return a}},i.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(o,h){const _=o.length;if(!_)return 0;let a,l,v,S,u=0,r=0,s=0;if(this.interim[0]){let c=!1,p=this.interim[0];p&=(224&p)==192?31:(240&p)==224?15:7;let m,b=0;for(;(m=63&this.interim[++b])&&b<4;)p<<=6,p|=m;const f=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,w=f-b;for(;s<w;){if(s>=_)return 0;if(m=o[s++],(192&m)!=128){s--,c=!0;break}this.interim[b++]=m,p<<=6,p|=63&m}c||(f===2?p<128?s--:h[u++]=p:f===3?p<2048||p>=55296&&p<=57343||p===65279||(h[u++]=p):p<65536||p>1114111||(h[u++]=p)),this.interim.fill(0)}const e=_-4;let t=s;for(;t<_;){for(;!(!(t<e)||128&(a=o[t])||128&(l=o[t+1])||128&(v=o[t+2])||128&(S=o[t+3]));)h[u++]=a,h[u++]=l,h[u++]=v,h[u++]=S,t+=4;if(a=o[t++],a<128)h[u++]=a;else if((224&a)==192){if(t>=_)return this.interim[0]=a,u;if(l=o[t++],(192&l)!=128){t--;continue}if(r=(31&a)<<6|63&l,r<128){t--;continue}h[u++]=r}else if((240&a)==224){if(t>=_)return this.interim[0]=a,u;if(l=o[t++],(192&l)!=128){t--;continue}if(t>=_)return this.interim[0]=a,this.interim[1]=l,u;if(v=o[t++],(192&v)!=128){t--;continue}if(r=(15&a)<<12|(63&l)<<6|63&v,r<2048||r>=55296&&r<=57343||r===65279)continue;h[u++]=r}else if((248&a)==240){if(t>=_)return this.interim[0]=a,u;if(l=o[t++],(192&l)!=128){t--;continue}if(t>=_)return this.interim[0]=a,this.interim[1]=l,u;if(v=o[t++],(192&v)!=128){t--;continue}if(t>=_)return this.interim[0]=a,this.interim[1]=l,this.interim[2]=v,u;if(S=o[t++],(192&S)!=128){t--;continue}if(r=(7&a)<<18|(63&l)<<12|(63&v)<<6|63&S,r<65536||r>1114111)continue;h[u++]=r}}return u}}},225:(L,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.UnicodeV6=void 0;const h=o(1480),_=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],a=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]];let l;i.UnicodeV6=class{constructor(){if(this.version="6",!l){l=new Uint8Array(65536),l.fill(1),l[0]=0,l.fill(0,1,32),l.fill(0,127,160),l.fill(2,4352,4448),l[9001]=2,l[9002]=2,l.fill(2,11904,42192),l[12351]=1,l.fill(2,44032,55204),l.fill(2,63744,64256),l.fill(2,65040,65050),l.fill(2,65072,65136),l.fill(2,65280,65377),l.fill(2,65504,65511);for(let v=0;v<_.length;++v)l.fill(0,_[v][0],_[v][1]+1)}}wcwidth(v){return v<32?0:v<127?1:v<65536?l[v]:function(S,u){let r,s=0,e=u.length-1;if(S<u[0][0]||S>u[e][1])return!1;for(;e>=s;)if(r=s+e>>1,S>u[r][1])s=r+1;else{if(!(S<u[r][0]))return!0;e=r-1}return!1}(v,a)?0:v>=131072&&v<=196605||v>=196608&&v<=262141?2:1}charProperties(v,S){let u=this.wcwidth(v),r=u===0&&S!==0;if(r){const s=h.UnicodeService.extractWidth(S);s===0?r=!1:s>u&&(u=s)}return h.UnicodeService.createPropertyValue(0,u,r)}}},5981:(L,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.WriteBuffer=void 0;const h=o(8460),_=o(844);class a extends _.Disposable{constructor(v){super(),this._action=v,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this.register(new h.EventEmitter),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(v,S){if(S!==void 0&&this._syncCalls>S)return void(this._syncCalls=0);if(this._pendingData+=v.length,this._writeBuffer.push(v),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;let u;for(this._isSyncWriting=!0;u=this._writeBuffer.shift();){this._action(u);const r=this._callbacks.shift();r&&r()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(v,S){if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput)return this._didUserInput=!1,this._pendingData+=v.length,this._writeBuffer.push(v),this._callbacks.push(S),void this._innerWrite();setTimeout(()=>this._innerWrite())}this._pendingData+=v.length,this._writeBuffer.push(v),this._callbacks.push(S)}_innerWrite(v=0,S=!0){const u=v||Date.now();for(;this._writeBuffer.length>this._bufferOffset;){const r=this._writeBuffer[this._bufferOffset],s=this._action(r,S);if(s){const t=c=>Date.now()-u>=12?setTimeout(()=>this._innerWrite(0,c)):this._innerWrite(u,c);return void s.catch(c=>(queueMicrotask(()=>{throw c}),Promise.resolve(!1))).then(t)}const e=this._callbacks[this._bufferOffset];if(e&&e(),this._bufferOffset++,this._pendingData-=r.length,Date.now()-u>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(()=>this._innerWrite())):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}}i.WriteBuffer=a},5941:(L,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.toRgbString=i.parseColor=void 0;const o=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,h=/^[\da-f]+$/;function _(a,l){const v=a.toString(16),S=v.length<2?"0"+v:v;switch(l){case 4:return v[0];case 8:return S;case 12:return(S+S).slice(0,3);default:return S+S}}i.parseColor=function(a){if(!a)return;let l=a.toLowerCase();if(l.indexOf("rgb:")===0){l=l.slice(4);const v=o.exec(l);if(v){const S=v[1]?15:v[4]?255:v[7]?4095:65535;return[Math.round(parseInt(v[1]||v[4]||v[7]||v[10],16)/S*255),Math.round(parseInt(v[2]||v[5]||v[8]||v[11],16)/S*255),Math.round(parseInt(v[3]||v[6]||v[9]||v[12],16)/S*255)]}}else if(l.indexOf("#")===0&&(l=l.slice(1),h.exec(l)&&[3,6,9,12].includes(l.length))){const v=l.length/3,S=[0,0,0];for(let u=0;u<3;++u){const r=parseInt(l.slice(v*u,v*u+v),16);S[u]=v===1?r<<4:v===2?r:v===3?r>>4:r>>8}return S}},i.toRgbString=function(a,l=16){const[v,S,u]=a;return`rgb:${_(v,l)}/${_(S,l)}/${_(u,l)}`}},5770:(L,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.PAYLOAD_LIMIT=void 0,i.PAYLOAD_LIMIT=1e7},6351:(L,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DcsHandler=i.DcsParser=void 0;const h=o(482),_=o(8742),a=o(5770),l=[];i.DcsParser=class{constructor(){this._handlers=Object.create(null),this._active=l,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=l}registerHandler(S,u){this._handlers[S]===void 0&&(this._handlers[S]=[]);const r=this._handlers[S];return r.push(u),{dispose:()=>{const s=r.indexOf(u);s!==-1&&r.splice(s,1)}}}clearHandler(S){this._handlers[S]&&delete this._handlers[S]}setHandlerFallback(S){this._handlerFb=S}reset(){if(this._active.length)for(let S=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;S>=0;--S)this._active[S].unhook(!1);this._stack.paused=!1,this._active=l,this._ident=0}hook(S,u){if(this.reset(),this._ident=S,this._active=this._handlers[S]||l,this._active.length)for(let r=this._active.length-1;r>=0;r--)this._active[r].hook(u);else this._handlerFb(this._ident,"HOOK",u)}put(S,u,r){if(this._active.length)for(let s=this._active.length-1;s>=0;s--)this._active[s].put(S,u,r);else this._handlerFb(this._ident,"PUT",(0,h.utf32ToString)(S,u,r))}unhook(S,u=!0){if(this._active.length){let r=!1,s=this._active.length-1,e=!1;if(this._stack.paused&&(s=this._stack.loopPosition-1,r=u,e=this._stack.fallThrough,this._stack.paused=!1),!e&&r===!1){for(;s>=0&&(r=this._active[s].unhook(S),r!==!0);s--)if(r instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=s,this._stack.fallThrough=!1,r;s--}for(;s>=0;s--)if(r=this._active[s].unhook(!1),r instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=s,this._stack.fallThrough=!0,r}else this._handlerFb(this._ident,"UNHOOK",S);this._active=l,this._ident=0}};const v=new _.Params;v.addParam(0),i.DcsHandler=class{constructor(S){this._handler=S,this._data="",this._params=v,this._hitLimit=!1}hook(S){this._params=S.length>1||S.params[0]?S.clone():v,this._data="",this._hitLimit=!1}put(S,u,r){this._hitLimit||(this._data+=(0,h.utf32ToString)(S,u,r),this._data.length>a.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}unhook(S){let u=!1;if(this._hitLimit)u=!1;else if(S&&(u=this._handler(this._data,this._params),u instanceof Promise))return u.then(r=>(this._params=v,this._data="",this._hitLimit=!1,r));return this._params=v,this._data="",this._hitLimit=!1,u}}},2015:(L,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.EscapeSequenceParser=i.VT500_TRANSITION_TABLE=i.TransitionTable=void 0;const h=o(844),_=o(8742),a=o(6242),l=o(6351);class v{constructor(s){this.table=new Uint8Array(s)}setDefault(s,e){this.table.fill(s<<4|e)}add(s,e,t,c){this.table[e<<8|s]=t<<4|c}addMany(s,e,t,c){for(let p=0;p<s.length;p++)this.table[e<<8|s[p]]=t<<4|c}}i.TransitionTable=v;const S=160;i.VT500_TRANSITION_TABLE=function(){const r=new v(4095),s=Array.apply(null,Array(256)).map((b,f)=>f),e=(b,f)=>s.slice(b,f),t=e(32,127),c=e(0,24);c.push(25),c.push.apply(c,e(28,32));const p=e(0,14);let m;for(m in r.setDefault(1,0),r.addMany(t,0,2,0),p)r.addMany([24,26,153,154],m,3,0),r.addMany(e(128,144),m,3,0),r.addMany(e(144,152),m,3,0),r.add(156,m,0,0),r.add(27,m,11,1),r.add(157,m,4,8),r.addMany([152,158,159],m,0,7),r.add(155,m,11,3),r.add(144,m,11,9);return r.addMany(c,0,3,0),r.addMany(c,1,3,1),r.add(127,1,0,1),r.addMany(c,8,0,8),r.addMany(c,3,3,3),r.add(127,3,0,3),r.addMany(c,4,3,4),r.add(127,4,0,4),r.addMany(c,6,3,6),r.addMany(c,5,3,5),r.add(127,5,0,5),r.addMany(c,2,3,2),r.add(127,2,0,2),r.add(93,1,4,8),r.addMany(t,8,5,8),r.add(127,8,5,8),r.addMany([156,27,24,26,7],8,6,0),r.addMany(e(28,32),8,0,8),r.addMany([88,94,95],1,0,7),r.addMany(t,7,0,7),r.addMany(c,7,0,7),r.add(156,7,0,0),r.add(127,7,0,7),r.add(91,1,11,3),r.addMany(e(64,127),3,7,0),r.addMany(e(48,60),3,8,4),r.addMany([60,61,62,63],3,9,4),r.addMany(e(48,60),4,8,4),r.addMany(e(64,127),4,7,0),r.addMany([60,61,62,63],4,0,6),r.addMany(e(32,64),6,0,6),r.add(127,6,0,6),r.addMany(e(64,127),6,0,0),r.addMany(e(32,48),3,9,5),r.addMany(e(32,48),5,9,5),r.addMany(e(48,64),5,0,6),r.addMany(e(64,127),5,7,0),r.addMany(e(32,48),4,9,5),r.addMany(e(32,48),1,9,2),r.addMany(e(32,48),2,9,2),r.addMany(e(48,127),2,10,0),r.addMany(e(48,80),1,10,0),r.addMany(e(81,88),1,10,0),r.addMany([89,90,92],1,10,0),r.addMany(e(96,127),1,10,0),r.add(80,1,11,9),r.addMany(c,9,0,9),r.add(127,9,0,9),r.addMany(e(28,32),9,0,9),r.addMany(e(32,48),9,9,12),r.addMany(e(48,60),9,8,10),r.addMany([60,61,62,63],9,9,10),r.addMany(c,11,0,11),r.addMany(e(32,128),11,0,11),r.addMany(e(28,32),11,0,11),r.addMany(c,10,0,10),r.add(127,10,0,10),r.addMany(e(28,32),10,0,10),r.addMany(e(48,60),10,8,10),r.addMany([60,61,62,63],10,0,11),r.addMany(e(32,48),10,9,12),r.addMany(c,12,0,12),r.add(127,12,0,12),r.addMany(e(28,32),12,0,12),r.addMany(e(32,48),12,9,12),r.addMany(e(48,64),12,0,11),r.addMany(e(64,127),12,12,13),r.addMany(e(64,127),10,12,13),r.addMany(e(64,127),9,12,13),r.addMany(c,13,13,13),r.addMany(t,13,13,13),r.add(127,13,0,13),r.addMany([27,156,24,26],13,14,0),r.add(S,0,2,0),r.add(S,8,5,8),r.add(S,6,0,6),r.add(S,11,0,11),r.add(S,13,13,13),r}();class u extends h.Disposable{constructor(s=i.VT500_TRANSITION_TABLE){super(),this._transitions=s,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new _.Params,this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._printHandlerFb=(e,t,c)=>{},this._executeHandlerFb=e=>{},this._csiHandlerFb=(e,t)=>{},this._escHandlerFb=e=>{},this._errorHandlerFb=e=>e,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this.register((0,h.toDisposable)(()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)})),this._oscParser=this.register(new a.OscParser),this._dcsParser=this.register(new l.DcsParser),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},()=>!0)}_identifier(s,e=[64,126]){let t=0;if(s.prefix){if(s.prefix.length>1)throw new Error("only one byte as prefix supported");if(t=s.prefix.charCodeAt(0),t&&60>t||t>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(s.intermediates){if(s.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let p=0;p<s.intermediates.length;++p){const m=s.intermediates.charCodeAt(p);if(32>m||m>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");t<<=8,t|=m}}if(s.final.length!==1)throw new Error("final must be a single byte");const c=s.final.charCodeAt(0);if(e[0]>c||c>e[1])throw new Error(`final must be in range ${e[0]} .. ${e[1]}`);return t<<=8,t|=c,t}identToString(s){const e=[];for(;s;)e.push(String.fromCharCode(255&s)),s>>=8;return e.reverse().join("")}setPrintHandler(s){this._printHandler=s}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(s,e){const t=this._identifier(s,[48,126]);this._escHandlers[t]===void 0&&(this._escHandlers[t]=[]);const c=this._escHandlers[t];return c.push(e),{dispose:()=>{const p=c.indexOf(e);p!==-1&&c.splice(p,1)}}}clearEscHandler(s){this._escHandlers[this._identifier(s,[48,126])]&&delete this._escHandlers[this._identifier(s,[48,126])]}setEscHandlerFallback(s){this._escHandlerFb=s}setExecuteHandler(s,e){this._executeHandlers[s.charCodeAt(0)]=e}clearExecuteHandler(s){this._executeHandlers[s.charCodeAt(0)]&&delete this._executeHandlers[s.charCodeAt(0)]}setExecuteHandlerFallback(s){this._executeHandlerFb=s}registerCsiHandler(s,e){const t=this._identifier(s);this._csiHandlers[t]===void 0&&(this._csiHandlers[t]=[]);const c=this._csiHandlers[t];return c.push(e),{dispose:()=>{const p=c.indexOf(e);p!==-1&&c.splice(p,1)}}}clearCsiHandler(s){this._csiHandlers[this._identifier(s)]&&delete this._csiHandlers[this._identifier(s)]}setCsiHandlerFallback(s){this._csiHandlerFb=s}registerDcsHandler(s,e){return this._dcsParser.registerHandler(this._identifier(s),e)}clearDcsHandler(s){this._dcsParser.clearHandler(this._identifier(s))}setDcsHandlerFallback(s){this._dcsParser.setHandlerFallback(s)}registerOscHandler(s,e){return this._oscParser.registerHandler(s,e)}clearOscHandler(s){this._oscParser.clearHandler(s)}setOscHandlerFallback(s){this._oscParser.setHandlerFallback(s)}setErrorHandler(s){this._errorHandler=s}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(s,e,t,c,p){this._parseStack.state=s,this._parseStack.handlers=e,this._parseStack.handlerPos=t,this._parseStack.transition=c,this._parseStack.chunkPos=p}parse(s,e,t){let c,p=0,m=0,b=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,b=this._parseStack.chunkPos+1;else{if(t===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");const f=this._parseStack.handlers;let w=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(t===!1&&w>-1){for(;w>=0&&(c=f[w](this._params),c!==!0);w--)if(c instanceof Promise)return this._parseStack.handlerPos=w,c}this._parseStack.handlers=[];break;case 4:if(t===!1&&w>-1){for(;w>=0&&(c=f[w](),c!==!0);w--)if(c instanceof Promise)return this._parseStack.handlerPos=w,c}this._parseStack.handlers=[];break;case 6:if(p=s[this._parseStack.chunkPos],c=this._dcsParser.unhook(p!==24&&p!==26,t),c)return c;p===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(p=s[this._parseStack.chunkPos],c=this._oscParser.end(p!==24&&p!==26,t),c)return c;p===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,b=this._parseStack.chunkPos+1,this.precedingJoinState=0,this.currentState=15&this._parseStack.transition}for(let f=b;f<e;++f){switch(p=s[f],m=this._transitions.table[this.currentState<<8|(p<160?p:S)],m>>4){case 2:for(let T=f+1;;++T){if(T>=e||(p=s[T])<32||p>126&&p<S){this._printHandler(s,f,T),f=T-1;break}if(++T>=e||(p=s[T])<32||p>126&&p<S){this._printHandler(s,f,T),f=T-1;break}if(++T>=e||(p=s[T])<32||p>126&&p<S){this._printHandler(s,f,T),f=T-1;break}if(++T>=e||(p=s[T])<32||p>126&&p<S){this._printHandler(s,f,T),f=T-1;break}}break;case 3:this._executeHandlers[p]?this._executeHandlers[p]():this._executeHandlerFb(p),this.precedingJoinState=0;break;case 0:break;case 1:if(this._errorHandler({position:f,code:p,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:const w=this._csiHandlers[this._collect<<8|p];let A=w?w.length-1:-1;for(;A>=0&&(c=w[A](this._params),c!==!0);A--)if(c instanceof Promise)return this._preserveStack(3,w,A,m,f),c;A<0&&this._csiHandlerFb(this._collect<<8|p,this._params),this.precedingJoinState=0;break;case 8:do switch(p){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(p-48)}while(++f<e&&(p=s[f])>47&&p<60);f--;break;case 9:this._collect<<=8,this._collect|=p;break;case 10:const R=this._escHandlers[this._collect<<8|p];let O=R?R.length-1:-1;for(;O>=0&&(c=R[O](),c!==!0);O--)if(c instanceof Promise)return this._preserveStack(4,R,O,m,f),c;O<0&&this._escHandlerFb(this._collect<<8|p),this.precedingJoinState=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|p,this._params);break;case 13:for(let T=f+1;;++T)if(T>=e||(p=s[T])===24||p===26||p===27||p>127&&p<S){this._dcsParser.put(s,f,T),f=T-1;break}break;case 14:if(c=this._dcsParser.unhook(p!==24&&p!==26),c)return this._preserveStack(6,[],0,m,f),c;p===27&&(m|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0;break;case 4:this._oscParser.start();break;case 5:for(let T=f+1;;T++)if(T>=e||(p=s[T])<32||p>127&&p<S){this._oscParser.put(s,f,T),f=T-1;break}break;case 6:if(c=this._oscParser.end(p!==24&&p!==26),c)return this._preserveStack(5,[],0,m,f),c;p===27&&(m|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0}this.currentState=15&m}}}i.EscapeSequenceParser=u},6242:(L,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.OscHandler=i.OscParser=void 0;const h=o(5770),_=o(482),a=[];i.OscParser=class{constructor(){this._state=0,this._active=a,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(l,v){this._handlers[l]===void 0&&(this._handlers[l]=[]);const S=this._handlers[l];return S.push(v),{dispose:()=>{const u=S.indexOf(v);u!==-1&&S.splice(u,1)}}}clearHandler(l){this._handlers[l]&&delete this._handlers[l]}setHandlerFallback(l){this._handlerFb=l}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=a}reset(){if(this._state===2)for(let l=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;l>=0;--l)this._active[l].end(!1);this._stack.paused=!1,this._active=a,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||a,this._active.length)for(let l=this._active.length-1;l>=0;l--)this._active[l].start();else this._handlerFb(this._id,"START")}_put(l,v,S){if(this._active.length)for(let u=this._active.length-1;u>=0;u--)this._active[u].put(l,v,S);else this._handlerFb(this._id,"PUT",(0,_.utf32ToString)(l,v,S))}start(){this.reset(),this._state=1}put(l,v,S){if(this._state!==3){if(this._state===1)for(;v<S;){const u=l[v++];if(u===59){this._state=2,this._start();break}if(u<48||57<u)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+u-48}this._state===2&&S-v>0&&this._put(l,v,S)}}end(l,v=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){let S=!1,u=this._active.length-1,r=!1;if(this._stack.paused&&(u=this._stack.loopPosition-1,S=v,r=this._stack.fallThrough,this._stack.paused=!1),!r&&S===!1){for(;u>=0&&(S=this._active[u].end(l),S!==!0);u--)if(S instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=u,this._stack.fallThrough=!1,S;u--}for(;u>=0;u--)if(S=this._active[u].end(!1),S instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=u,this._stack.fallThrough=!0,S}else this._handlerFb(this._id,"END",l);this._active=a,this._id=-1,this._state=0}}},i.OscHandler=class{constructor(l){this._handler=l,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(l,v,S){this._hitLimit||(this._data+=(0,_.utf32ToString)(l,v,S),this._data.length>h.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}end(l){let v=!1;if(this._hitLimit)v=!1;else if(l&&(v=this._handler(this._data),v instanceof Promise))return v.then(S=>(this._data="",this._hitLimit=!1,S));return this._data="",this._hitLimit=!1,v}}},8742:(L,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Params=void 0;const o=2147483647;class h{static fromArray(a){const l=new h;if(!a.length)return l;for(let v=Array.isArray(a[0])?1:0;v<a.length;++v){const S=a[v];if(Array.isArray(S))for(let u=0;u<S.length;++u)l.addSubParam(S[u]);else l.addParam(S)}return l}constructor(a=32,l=32){if(this.maxLength=a,this.maxSubParamsLength=l,l>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(a),this.length=0,this._subParams=new Int32Array(l),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(a),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}clone(){const a=new h(this.maxLength,this.maxSubParamsLength);return a.params.set(this.params),a.length=this.length,a._subParams.set(this._subParams),a._subParamsLength=this._subParamsLength,a._subParamsIdx.set(this._subParamsIdx),a._rejectDigits=this._rejectDigits,a._rejectSubDigits=this._rejectSubDigits,a._digitIsSub=this._digitIsSub,a}toArray(){const a=[];for(let l=0;l<this.length;++l){a.push(this.params[l]);const v=this._subParamsIdx[l]>>8,S=255&this._subParamsIdx[l];S-v>0&&a.push(Array.prototype.slice.call(this._subParams,v,S))}return a}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(a){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(a<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=a>o?o:a}}addSubParam(a){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(a<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=a>o?o:a,this._subParamsIdx[this.length-1]++}}hasSubParams(a){return(255&this._subParamsIdx[a])-(this._subParamsIdx[a]>>8)>0}getSubParams(a){const l=this._subParamsIdx[a]>>8,v=255&this._subParamsIdx[a];return v-l>0?this._subParams.subarray(l,v):null}getSubParamsAll(){const a={};for(let l=0;l<this.length;++l){const v=this._subParamsIdx[l]>>8,S=255&this._subParamsIdx[l];S-v>0&&(a[l]=this._subParams.slice(v,S))}return a}addDigit(a){let l;if(this._rejectDigits||!(l=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;const v=this._digitIsSub?this._subParams:this.params,S=v[l-1];v[l-1]=~S?Math.min(10*S+a,o):a}}i.Params=h},5741:(L,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.AddonManager=void 0,i.AddonManager=class{constructor(){this._addons=[]}dispose(){for(let o=this._addons.length-1;o>=0;o--)this._addons[o].instance.dispose()}loadAddon(o,h){const _={instance:h,dispose:h.dispose,isDisposed:!1};this._addons.push(_),h.dispose=()=>this._wrappedAddonDispose(_),h.activate(o)}_wrappedAddonDispose(o){if(o.isDisposed)return;let h=-1;for(let _=0;_<this._addons.length;_++)if(this._addons[_]===o){h=_;break}if(h===-1)throw new Error("Could not dispose an addon that has not been loaded");o.isDisposed=!0,o.dispose.apply(o.instance),this._addons.splice(h,1)}}},8771:(L,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferApiView=void 0;const h=o(3785),_=o(511);i.BufferApiView=class{constructor(a,l){this._buffer=a,this.type=l}init(a){return this._buffer=a,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(a){const l=this._buffer.lines.get(a);if(l)return new h.BufferLineApiView(l)}getNullCell(){return new _.CellData}}},3785:(L,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferLineApiView=void 0;const h=o(511);i.BufferLineApiView=class{constructor(_){this._line=_}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(_,a){if(!(_<0||_>=this._line.length))return a?(this._line.loadCell(_,a),a):this._line.loadCell(_,new h.CellData)}translateToString(_,a,l){return this._line.translateToString(_,a,l)}}},8285:(L,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferNamespaceApi=void 0;const h=o(8771),_=o(8460),a=o(844);class l extends a.Disposable{constructor(S){super(),this._core=S,this._onBufferChange=this.register(new _.EventEmitter),this.onBufferChange=this._onBufferChange.event,this._normal=new h.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new h.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(()=>this._onBufferChange.fire(this.active))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}}i.BufferNamespaceApi=l},7975:(L,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ParserApi=void 0,i.ParserApi=class{constructor(o){this._core=o}registerCsiHandler(o,h){return this._core.registerCsiHandler(o,_=>h(_.toArray()))}addCsiHandler(o,h){return this.registerCsiHandler(o,h)}registerDcsHandler(o,h){return this._core.registerDcsHandler(o,(_,a)=>h(_,a.toArray()))}addDcsHandler(o,h){return this.registerDcsHandler(o,h)}registerEscHandler(o,h){return this._core.registerEscHandler(o,h)}addEscHandler(o,h){return this.registerEscHandler(o,h)}registerOscHandler(o,h){return this._core.registerOscHandler(o,h)}addOscHandler(o,h){return this.registerOscHandler(o,h)}}},7090:(L,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.UnicodeApi=void 0,i.UnicodeApi=class{constructor(o){this._core=o}register(o){this._core.unicodeService.register(o)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(o){this._core.unicodeService.activeVersion=o}}},744:function(L,i,o){var h=this&&this.__decorate||function(r,s,e,t){var c,p=arguments.length,m=p<3?s:t===null?t=Object.getOwnPropertyDescriptor(s,e):t;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")m=Reflect.decorate(r,s,e,t);else for(var b=r.length-1;b>=0;b--)(c=r[b])&&(m=(p<3?c(m):p>3?c(s,e,m):c(s,e))||m);return p>3&&m&&Object.defineProperty(s,e,m),m},_=this&&this.__param||function(r,s){return function(e,t){s(e,t,r)}};Object.defineProperty(i,"__esModule",{value:!0}),i.BufferService=i.MINIMUM_ROWS=i.MINIMUM_COLS=void 0;const a=o(8460),l=o(844),v=o(5295),S=o(2585);i.MINIMUM_COLS=2,i.MINIMUM_ROWS=1;let u=i.BufferService=class extends l.Disposable{get buffer(){return this.buffers.active}constructor(r){super(),this.isUserScrolling=!1,this._onResize=this.register(new a.EventEmitter),this.onResize=this._onResize.event,this._onScroll=this.register(new a.EventEmitter),this.onScroll=this._onScroll.event,this.cols=Math.max(r.rawOptions.cols||0,i.MINIMUM_COLS),this.rows=Math.max(r.rawOptions.rows||0,i.MINIMUM_ROWS),this.buffers=this.register(new v.BufferSet(r,this))}resize(r,s){this.cols=r,this.rows=s,this.buffers.resize(r,s),this._onResize.fire({cols:r,rows:s})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(r,s=!1){const e=this.buffer;let t;t=this._cachedBlankLine,t&&t.length===this.cols&&t.getFg(0)===r.fg&&t.getBg(0)===r.bg||(t=e.getBlankLine(r,s),this._cachedBlankLine=t),t.isWrapped=s;const c=e.ybase+e.scrollTop,p=e.ybase+e.scrollBottom;if(e.scrollTop===0){const m=e.lines.isFull;p===e.lines.length-1?m?e.lines.recycle().copyFrom(t):e.lines.push(t.clone()):e.lines.splice(p+1,0,t.clone()),m?this.isUserScrolling&&(e.ydisp=Math.max(e.ydisp-1,0)):(e.ybase++,this.isUserScrolling||e.ydisp++)}else{const m=p-c+1;e.lines.shiftElements(c+1,m-1,-1),e.lines.set(p,t.clone())}this.isUserScrolling||(e.ydisp=e.ybase),this._onScroll.fire(e.ydisp)}scrollLines(r,s,e){const t=this.buffer;if(r<0){if(t.ydisp===0)return;this.isUserScrolling=!0}else r+t.ydisp>=t.ybase&&(this.isUserScrolling=!1);const c=t.ydisp;t.ydisp=Math.max(Math.min(t.ydisp+r,t.ybase),0),c!==t.ydisp&&(s||this._onScroll.fire(t.ydisp))}};i.BufferService=u=h([_(0,S.IOptionsService)],u)},7994:(L,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CharsetService=void 0,i.CharsetService=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(o){this.glevel=o,this.charset=this._charsets[o]}setgCharset(o,h){this._charsets[o]=h,this.glevel===o&&(this.charset=h)}}},1753:function(L,i,o){var h=this&&this.__decorate||function(t,c,p,m){var b,f=arguments.length,w=f<3?c:m===null?m=Object.getOwnPropertyDescriptor(c,p):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(t,c,p,m);else for(var A=t.length-1;A>=0;A--)(b=t[A])&&(w=(f<3?b(w):f>3?b(c,p,w):b(c,p))||w);return f>3&&w&&Object.defineProperty(c,p,w),w},_=this&&this.__param||function(t,c){return function(p,m){c(p,m,t)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CoreMouseService=void 0;const a=o(2585),l=o(8460),v=o(844),S={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:t=>t.button!==4&&t.action===1&&(t.ctrl=!1,t.alt=!1,t.shift=!1,!0)},VT200:{events:19,restrict:t=>t.action!==32},DRAG:{events:23,restrict:t=>t.action!==32||t.button!==3},ANY:{events:31,restrict:t=>!0}};function u(t,c){let p=(t.ctrl?16:0)|(t.shift?4:0)|(t.alt?8:0);return t.button===4?(p|=64,p|=t.action):(p|=3&t.button,4&t.button&&(p|=64),8&t.button&&(p|=128),t.action===32?p|=32:t.action!==0||c||(p|=3)),p}const r=String.fromCharCode,s={DEFAULT:t=>{const c=[u(t,!1)+32,t.col+32,t.row+32];return c[0]>255||c[1]>255||c[2]>255?"":`\x1B[M${r(c[0])}${r(c[1])}${r(c[2])}`},SGR:t=>{const c=t.action===0&&t.button!==4?"m":"M";return`\x1B[<${u(t,!0)};${t.col};${t.row}${c}`},SGR_PIXELS:t=>{const c=t.action===0&&t.button!==4?"m":"M";return`\x1B[<${u(t,!0)};${t.x};${t.y}${c}`}};let e=i.CoreMouseService=class extends v.Disposable{constructor(t,c){super(),this._bufferService=t,this._coreService=c,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._onProtocolChange=this.register(new l.EventEmitter),this.onProtocolChange=this._onProtocolChange.event;for(const p of Object.keys(S))this.addProtocol(p,S[p]);for(const p of Object.keys(s))this.addEncoding(p,s[p]);this.reset()}addProtocol(t,c){this._protocols[t]=c}addEncoding(t,c){this._encodings[t]=c}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(t){if(!this._protocols[t])throw new Error(`unknown protocol "${t}"`);this._activeProtocol=t,this._onProtocolChange.fire(this._protocols[t].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(t){if(!this._encodings[t])throw new Error(`unknown encoding "${t}"`);this._activeEncoding=t}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null}triggerMouseEvent(t){if(t.col<0||t.col>=this._bufferService.cols||t.row<0||t.row>=this._bufferService.rows||t.button===4&&t.action===32||t.button===3&&t.action!==32||t.button!==4&&(t.action===2||t.action===3)||(t.col++,t.row++,t.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,t,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(t))return!1;const c=this._encodings[this._activeEncoding](t);return c&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(c):this._coreService.triggerDataEvent(c,!0)),this._lastEvent=t,!0}explainEvents(t){return{down:!!(1&t),up:!!(2&t),drag:!!(4&t),move:!!(8&t),wheel:!!(16&t)}}_equalEvents(t,c,p){if(p){if(t.x!==c.x||t.y!==c.y)return!1}else if(t.col!==c.col||t.row!==c.row)return!1;return t.button===c.button&&t.action===c.action&&t.ctrl===c.ctrl&&t.alt===c.alt&&t.shift===c.shift}};i.CoreMouseService=e=h([_(0,a.IBufferService),_(1,a.ICoreService)],e)},6975:function(L,i,o){var h=this&&this.__decorate||function(e,t,c,p){var m,b=arguments.length,f=b<3?t:p===null?p=Object.getOwnPropertyDescriptor(t,c):p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")f=Reflect.decorate(e,t,c,p);else for(var w=e.length-1;w>=0;w--)(m=e[w])&&(f=(b<3?m(f):b>3?m(t,c,f):m(t,c))||f);return b>3&&f&&Object.defineProperty(t,c,f),f},_=this&&this.__param||function(e,t){return function(c,p){t(c,p,e)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CoreService=void 0;const a=o(1439),l=o(8460),v=o(844),S=o(2585),u=Object.freeze({insertMode:!1}),r=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0});let s=i.CoreService=class extends v.Disposable{constructor(e,t,c){super(),this._bufferService=e,this._logService=t,this._optionsService=c,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this.register(new l.EventEmitter),this.onData=this._onData.event,this._onUserInput=this.register(new l.EventEmitter),this.onUserInput=this._onUserInput.event,this._onBinary=this.register(new l.EventEmitter),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this.register(new l.EventEmitter),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=(0,a.clone)(u),this.decPrivateModes=(0,a.clone)(r)}reset(){this.modes=(0,a.clone)(u),this.decPrivateModes=(0,a.clone)(r)}triggerDataEvent(e,t=!1){if(this._optionsService.rawOptions.disableStdin)return;const c=this._bufferService.buffer;t&&this._optionsService.rawOptions.scrollOnUserInput&&c.ybase!==c.ydisp&&this._onRequestScrollToBottom.fire(),t&&this._onUserInput.fire(),this._logService.debug(`sending data "${e}"`,()=>e.split("").map(p=>p.charCodeAt(0))),this._onData.fire(e)}triggerBinaryEvent(e){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${e}"`,()=>e.split("").map(t=>t.charCodeAt(0))),this._onBinary.fire(e))}};i.CoreService=s=h([_(0,S.IBufferService),_(1,S.ILogService),_(2,S.IOptionsService)],s)},9074:(L,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DecorationService=void 0;const h=o(8055),_=o(8460),a=o(844),l=o(6106);let v=0,S=0;class u extends a.Disposable{get decorations(){return this._decorations.values()}constructor(){super(),this._decorations=new l.SortedList(e=>e==null?void 0:e.marker.line),this._onDecorationRegistered=this.register(new _.EventEmitter),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this.register(new _.EventEmitter),this.onDecorationRemoved=this._onDecorationRemoved.event,this.register((0,a.toDisposable)(()=>this.reset()))}registerDecoration(e){if(e.marker.isDisposed)return;const t=new r(e);if(t){const c=t.marker.onDispose(()=>t.dispose());t.onDispose(()=>{t&&(this._decorations.delete(t)&&this._onDecorationRemoved.fire(t),c.dispose())}),this._decorations.insert(t),this._onDecorationRegistered.fire(t)}return t}reset(){for(const e of this._decorations.values())e.dispose();this._decorations.clear()}*getDecorationsAtCell(e,t,c){let p=0,m=0;for(const b of this._decorations.getKeyIterator(t))p=b.options.x??0,m=p+(b.options.width??1),e>=p&&e<m&&(!c||(b.options.layer??"bottom")===c)&&(yield b)}forEachDecorationAtCell(e,t,c,p){this._decorations.forEachByKey(t,m=>{v=m.options.x??0,S=v+(m.options.width??1),e>=v&&e<S&&(!c||(m.options.layer??"bottom")===c)&&p(m)})}}i.DecorationService=u;class r extends a.Disposable{get isDisposed(){return this._isDisposed}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=h.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=h.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}constructor(e){super(),this.options=e,this.onRenderEmitter=this.register(new _.EventEmitter),this.onRender=this.onRenderEmitter.event,this._onDispose=this.register(new _.EventEmitter),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=e.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}dispose(){this._onDispose.fire(),super.dispose()}}},4348:(L,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.InstantiationService=i.ServiceCollection=void 0;const h=o(2585),_=o(8343);class a{constructor(...v){this._entries=new Map;for(const[S,u]of v)this.set(S,u)}set(v,S){const u=this._entries.get(v);return this._entries.set(v,S),u}forEach(v){for(const[S,u]of this._entries.entries())v(S,u)}has(v){return this._entries.has(v)}get(v){return this._entries.get(v)}}i.ServiceCollection=a,i.InstantiationService=class{constructor(){this._services=new a,this._services.set(h.IInstantiationService,this)}setService(l,v){this._services.set(l,v)}getService(l){return this._services.get(l)}createInstance(l,...v){const S=(0,_.getServiceDependencies)(l).sort((s,e)=>s.index-e.index),u=[];for(const s of S){const e=this._services.get(s.id);if(!e)throw new Error(`[createInstance] ${l.name} depends on UNKNOWN service ${s.id}.`);u.push(e)}const r=S.length>0?S[0].index:v.length;if(v.length!==r)throw new Error(`[createInstance] First service dependency of ${l.name} at position ${r+1} conflicts with ${v.length} static arguments`);return new l(...v,...u)}}},7866:function(L,i,o){var h=this&&this.__decorate||function(r,s,e,t){var c,p=arguments.length,m=p<3?s:t===null?t=Object.getOwnPropertyDescriptor(s,e):t;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")m=Reflect.decorate(r,s,e,t);else for(var b=r.length-1;b>=0;b--)(c=r[b])&&(m=(p<3?c(m):p>3?c(s,e,m):c(s,e))||m);return p>3&&m&&Object.defineProperty(s,e,m),m},_=this&&this.__param||function(r,s){return function(e,t){s(e,t,r)}};Object.defineProperty(i,"__esModule",{value:!0}),i.traceCall=i.setTraceLogger=i.LogService=void 0;const a=o(844),l=o(2585),v={trace:l.LogLevelEnum.TRACE,debug:l.LogLevelEnum.DEBUG,info:l.LogLevelEnum.INFO,warn:l.LogLevelEnum.WARN,error:l.LogLevelEnum.ERROR,off:l.LogLevelEnum.OFF};let S,u=i.LogService=class extends a.Disposable{get logLevel(){return this._logLevel}constructor(r){super(),this._optionsService=r,this._logLevel=l.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),S=this}_updateLogLevel(){this._logLevel=v[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(r){for(let s=0;s<r.length;s++)typeof r[s]=="function"&&(r[s]=r[s]())}_log(r,s,e){this._evalLazyOptionalParams(e),r.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+s,...e)}trace(r,...s){var e;this._logLevel<=l.LogLevelEnum.TRACE&&this._log(((e=this._optionsService.options.logger)==null?void 0:e.trace.bind(this._optionsService.options.logger))??console.log,r,s)}debug(r,...s){var e;this._logLevel<=l.LogLevelEnum.DEBUG&&this._log(((e=this._optionsService.options.logger)==null?void 0:e.debug.bind(this._optionsService.options.logger))??console.log,r,s)}info(r,...s){var e;this._logLevel<=l.LogLevelEnum.INFO&&this._log(((e=this._optionsService.options.logger)==null?void 0:e.info.bind(this._optionsService.options.logger))??console.info,r,s)}warn(r,...s){var e;this._logLevel<=l.LogLevelEnum.WARN&&this._log(((e=this._optionsService.options.logger)==null?void 0:e.warn.bind(this._optionsService.options.logger))??console.warn,r,s)}error(r,...s){var e;this._logLevel<=l.LogLevelEnum.ERROR&&this._log(((e=this._optionsService.options.logger)==null?void 0:e.error.bind(this._optionsService.options.logger))??console.error,r,s)}};i.LogService=u=h([_(0,l.IOptionsService)],u),i.setTraceLogger=function(r){S=r},i.traceCall=function(r,s,e){if(typeof e.value!="function")throw new Error("not supported");const t=e.value;e.value=function(...c){if(S.logLevel!==l.LogLevelEnum.TRACE)return t.apply(this,c);S.trace(`GlyphRenderer#${t.name}(${c.map(m=>JSON.stringify(m)).join(", ")})`);const p=t.apply(this,c);return S.trace(`GlyphRenderer#${t.name} return`,p),p}}},7302:(L,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.OptionsService=i.DEFAULT_OPTIONS=void 0;const h=o(8460),_=o(844),a=o(6114);i.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,documentOverride:null,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rescaleOverlappingGlyphs:!1,rightClickSelectsWord:a.isMac,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:0};const l=["normal","bold","100","200","300","400","500","600","700","800","900"];class v extends _.Disposable{constructor(u){super(),this._onOptionChange=this.register(new h.EventEmitter),this.onOptionChange=this._onOptionChange.event;const r={...i.DEFAULT_OPTIONS};for(const s in u)if(s in r)try{const e=u[s];r[s]=this._sanitizeAndValidateOption(s,e)}catch(e){console.error(e)}this.rawOptions=r,this.options={...r},this._setupOptions(),this.register((0,_.toDisposable)(()=>{this.rawOptions.linkHandler=null,this.rawOptions.documentOverride=null}))}onSpecificOptionChange(u,r){return this.onOptionChange(s=>{s===u&&r(this.rawOptions[u])})}onMultipleOptionChange(u,r){return this.onOptionChange(s=>{u.indexOf(s)!==-1&&r()})}_setupOptions(){const u=s=>{if(!(s in i.DEFAULT_OPTIONS))throw new Error(`No option with key "${s}"`);return this.rawOptions[s]},r=(s,e)=>{if(!(s in i.DEFAULT_OPTIONS))throw new Error(`No option with key "${s}"`);e=this._sanitizeAndValidateOption(s,e),this.rawOptions[s]!==e&&(this.rawOptions[s]=e,this._onOptionChange.fire(s))};for(const s in this.rawOptions){const e={get:u.bind(this,s),set:r.bind(this,s)};Object.defineProperty(this.options,s,e)}}_sanitizeAndValidateOption(u,r){switch(u){case"cursorStyle":if(r||(r=i.DEFAULT_OPTIONS[u]),!function(s){return s==="block"||s==="underline"||s==="bar"}(r))throw new Error(`"${r}" is not a valid value for ${u}`);break;case"wordSeparator":r||(r=i.DEFAULT_OPTIONS[u]);break;case"fontWeight":case"fontWeightBold":if(typeof r=="number"&&1<=r&&r<=1e3)break;r=l.includes(r)?r:i.DEFAULT_OPTIONS[u];break;case"cursorWidth":r=Math.floor(r);case"lineHeight":case"tabStopWidth":if(r<1)throw new Error(`${u} cannot be less than 1, value: ${r}`);break;case"minimumContrastRatio":r=Math.max(1,Math.min(21,Math.round(10*r)/10));break;case"scrollback":if((r=Math.min(r,4294967295))<0)throw new Error(`${u} cannot be less than 0, value: ${r}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(r<=0)throw new Error(`${u} cannot be less than or equal to 0, value: ${r}`);break;case"rows":case"cols":if(!r&&r!==0)throw new Error(`${u} must be numeric, value: ${r}`);break;case"windowsPty":r=r??{}}return r}}i.OptionsService=v},2660:function(L,i,o){var h=this&&this.__decorate||function(v,S,u,r){var s,e=arguments.length,t=e<3?S:r===null?r=Object.getOwnPropertyDescriptor(S,u):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(v,S,u,r);else for(var c=v.length-1;c>=0;c--)(s=v[c])&&(t=(e<3?s(t):e>3?s(S,u,t):s(S,u))||t);return e>3&&t&&Object.defineProperty(S,u,t),t},_=this&&this.__param||function(v,S){return function(u,r){S(u,r,v)}};Object.defineProperty(i,"__esModule",{value:!0}),i.OscLinkService=void 0;const a=o(2585);let l=i.OscLinkService=class{constructor(v){this._bufferService=v,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(v){const S=this._bufferService.buffer;if(v.id===void 0){const c=S.addMarker(S.ybase+S.y),p={data:v,id:this._nextId++,lines:[c]};return c.onDispose(()=>this._removeMarkerFromLink(p,c)),this._dataByLinkId.set(p.id,p),p.id}const u=v,r=this._getEntryIdKey(u),s=this._entriesWithId.get(r);if(s)return this.addLineToLink(s.id,S.ybase+S.y),s.id;const e=S.addMarker(S.ybase+S.y),t={id:this._nextId++,key:this._getEntryIdKey(u),data:u,lines:[e]};return e.onDispose(()=>this._removeMarkerFromLink(t,e)),this._entriesWithId.set(t.key,t),this._dataByLinkId.set(t.id,t),t.id}addLineToLink(v,S){const u=this._dataByLinkId.get(v);if(u&&u.lines.every(r=>r.line!==S)){const r=this._bufferService.buffer.addMarker(S);u.lines.push(r),r.onDispose(()=>this._removeMarkerFromLink(u,r))}}getLinkData(v){var S;return(S=this._dataByLinkId.get(v))==null?void 0:S.data}_getEntryIdKey(v){return`${v.id};;${v.uri}`}_removeMarkerFromLink(v,S){const u=v.lines.indexOf(S);u!==-1&&(v.lines.splice(u,1),v.lines.length===0&&(v.data.id!==void 0&&this._entriesWithId.delete(v.key),this._dataByLinkId.delete(v.id)))}};i.OscLinkService=l=h([_(0,a.IBufferService)],l)},8343:(L,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.createDecorator=i.getServiceDependencies=i.serviceRegistry=void 0;const o="di$target",h="di$dependencies";i.serviceRegistry=new Map,i.getServiceDependencies=function(_){return _[h]||[]},i.createDecorator=function(_){if(i.serviceRegistry.has(_))return i.serviceRegistry.get(_);const a=function(l,v,S){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(u,r,s){r[o]===r?r[h].push({id:u,index:s}):(r[h]=[{id:u,index:s}],r[o]=r)})(a,l,S)};return a.toString=()=>_,i.serviceRegistry.set(_,a),a}},2585:(L,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.IDecorationService=i.IUnicodeService=i.IOscLinkService=i.IOptionsService=i.ILogService=i.LogLevelEnum=i.IInstantiationService=i.ICharsetService=i.ICoreService=i.ICoreMouseService=i.IBufferService=void 0;const h=o(8343);var _;i.IBufferService=(0,h.createDecorator)("BufferService"),i.ICoreMouseService=(0,h.createDecorator)("CoreMouseService"),i.ICoreService=(0,h.createDecorator)("CoreService"),i.ICharsetService=(0,h.createDecorator)("CharsetService"),i.IInstantiationService=(0,h.createDecorator)("InstantiationService"),function(a){a[a.TRACE=0]="TRACE",a[a.DEBUG=1]="DEBUG",a[a.INFO=2]="INFO",a[a.WARN=3]="WARN",a[a.ERROR=4]="ERROR",a[a.OFF=5]="OFF"}(_||(i.LogLevelEnum=_={})),i.ILogService=(0,h.createDecorator)("LogService"),i.IOptionsService=(0,h.createDecorator)("OptionsService"),i.IOscLinkService=(0,h.createDecorator)("OscLinkService"),i.IUnicodeService=(0,h.createDecorator)("UnicodeService"),i.IDecorationService=(0,h.createDecorator)("DecorationService")},1480:(L,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.UnicodeService=void 0;const h=o(8460),_=o(225);class a{static extractShouldJoin(v){return(1&v)!=0}static extractWidth(v){return v>>1&3}static extractCharKind(v){return v>>3}static createPropertyValue(v,S,u=!1){return(16777215&v)<<3|(3&S)<<1|(u?1:0)}constructor(){this._providers=Object.create(null),this._active="",this._onChange=new h.EventEmitter,this.onChange=this._onChange.event;const v=new _.UnicodeV6;this.register(v),this._active=v.version,this._activeProvider=v}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(v){if(!this._providers[v])throw new Error(`unknown Unicode version "${v}"`);this._active=v,this._activeProvider=this._providers[v],this._onChange.fire(v)}register(v){this._providers[v.version]=v}wcwidth(v){return this._activeProvider.wcwidth(v)}getStringCellWidth(v){let S=0,u=0;const r=v.length;for(let s=0;s<r;++s){let e=v.charCodeAt(s);if(55296<=e&&e<=56319){if(++s>=r)return S+this.wcwidth(e);const p=v.charCodeAt(s);56320<=p&&p<=57343?e=1024*(e-55296)+p-56320+65536:S+=this.wcwidth(p)}const t=this.charProperties(e,u);let c=a.extractWidth(t);a.extractShouldJoin(t)&&(c-=a.extractWidth(u)),S+=c,u=t}return S}charProperties(v,S){return this._activeProvider.charProperties(v,S)}}i.UnicodeService=a}},y={};function x(L){var i=y[L];if(i!==void 0)return i.exports;var o=y[L]={exports:{}};return g[L].call(o.exports,o,o.exports,x),o.exports}var D={};return(()=>{var L=D;Object.defineProperty(L,"__esModule",{value:!0}),L.Terminal=void 0;const i=x(9042),o=x(3236),h=x(844),_=x(5741),a=x(8285),l=x(7975),v=x(7090),S=["cols","rows"];class u extends h.Disposable{constructor(s){super(),this._core=this.register(new o.Terminal(s)),this._addonManager=this.register(new _.AddonManager),this._publicOptions={...this._core.options};const e=c=>this._core.options[c],t=(c,p)=>{this._checkReadonlyOptions(c),this._core.options[c]=p};for(const c in this._core.options){const p={get:e.bind(this,c),set:t.bind(this,c)};Object.defineProperty(this._publicOptions,c,p)}}_checkReadonlyOptions(s){if(S.includes(s))throw new Error(`Option "${s}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new l.ParserApi(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new v.UnicodeApi(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this.register(new a.BufferNamespaceApi(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){const s=this._core.coreService.decPrivateModes;let e="none";switch(this._core.coreMouseService.activeProtocol){case"X10":e="x10";break;case"VT200":e="vt200";break;case"DRAG":e="drag";break;case"ANY":e="any"}return{applicationCursorKeysMode:s.applicationCursorKeys,applicationKeypadMode:s.applicationKeypad,bracketedPasteMode:s.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:e,originMode:s.origin,reverseWraparoundMode:s.reverseWraparound,sendFocusMode:s.sendFocus,wraparoundMode:s.wraparound}}get options(){return this._publicOptions}set options(s){for(const e in s)this._publicOptions[e]=s[e]}blur(){this._core.blur()}focus(){this._core.focus()}input(s,e=!0){this._core.input(s,e)}resize(s,e){this._verifyIntegers(s,e),this._core.resize(s,e)}open(s){this._core.open(s)}attachCustomKeyEventHandler(s){this._core.attachCustomKeyEventHandler(s)}attachCustomWheelEventHandler(s){this._core.attachCustomWheelEventHandler(s)}registerLinkProvider(s){return this._core.registerLinkProvider(s)}registerCharacterJoiner(s){return this._checkProposedApi(),this._core.registerCharacterJoiner(s)}deregisterCharacterJoiner(s){this._checkProposedApi(),this._core.deregisterCharacterJoiner(s)}registerMarker(s=0){return this._verifyIntegers(s),this._core.registerMarker(s)}registerDecoration(s){return this._checkProposedApi(),this._verifyPositiveIntegers(s.x??0,s.width??0,s.height??0),this._core.registerDecoration(s)}hasSelection(){return this._core.hasSelection()}select(s,e,t){this._verifyIntegers(s,e,t),this._core.select(s,e,t)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(s,e){this._verifyIntegers(s,e),this._core.selectLines(s,e)}dispose(){super.dispose()}scrollLines(s){this._verifyIntegers(s),this._core.scrollLines(s)}scrollPages(s){this._verifyIntegers(s),this._core.scrollPages(s)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(s){this._verifyIntegers(s),this._core.scrollToLine(s)}clear(){this._core.clear()}write(s,e){this._core.write(s,e)}writeln(s,e){this._core.write(s),this._core.write(`\r
`,e)}paste(s){this._core.paste(s)}refresh(s,e){this._verifyIntegers(s,e),this._core.refresh(s,e)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(s){this._addonManager.loadAddon(this,s)}static get strings(){return i}_verifyIntegers(...s){for(const e of s)if(e===1/0||isNaN(e)||e%1!=0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...s){for(const e of s)if(e&&(e===1/0||isNaN(e)||e%1!=0||e<0))throw new Error("This API only accepts positive integers")}}L.Terminal=u})(),D})())}(si)),si.exports}var fc=uc(),ni={exports:{}},Gi;function _c(){return Gi||(Gi=1,function(n,d){(function(g,y){n.exports=y()})(self,()=>(()=>{var g={};return(()=>{var y=g;Object.defineProperty(y,"__esModule",{value:!0}),y.FitAddon=void 0,y.FitAddon=class{activate(x){this._terminal=x}dispose(){}fit(){const x=this.proposeDimensions();if(!x||!this._terminal||isNaN(x.cols)||isNaN(x.rows))return;const D=this._terminal._core;this._terminal.rows===x.rows&&this._terminal.cols===x.cols||(D._renderService.clear(),this._terminal.resize(x.cols,x.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;const x=this._terminal._core,D=x._renderService.dimensions;if(D.css.cell.width===0||D.css.cell.height===0)return;const L=this._terminal.options.scrollback===0?0:x.viewport.scrollBarWidth,i=window.getComputedStyle(this._terminal.element.parentElement),o=parseInt(i.getPropertyValue("height")),h=Math.max(0,parseInt(i.getPropertyValue("width"))),_=window.getComputedStyle(this._terminal.element),a=o-(parseInt(_.getPropertyValue("padding-top"))+parseInt(_.getPropertyValue("padding-bottom"))),l=h-(parseInt(_.getPropertyValue("padding-right"))+parseInt(_.getPropertyValue("padding-left")))-L;return{cols:Math.max(2,Math.floor(l/D.css.cell.width)),rows:Math.max(1,Math.floor(a/D.css.cell.height))}}}})(),g})())}(ni)),ni.exports}var vc=_c(),pc=Z('<div class="d-flex justify-content-end mb-2"><button type="button" class="btn mx-3" title="Fullscreen"><!></button> <button type="button" class="btn mx-3" title="Close Terminal"><!></button></div> <div class="border" style="height: calc(100vh - 280px)"></div>',1),gc=Z('<form class="container login-form"><div class="container" style="max-width: 400px"><div class="form-floating mb-2"><input type="text" class="form-control" id="inpTerminalCmd"/> <label for="inpTerminalCmd">Command</label></div> <div class="form-floating mb-2"><input type="text" class="form-control" id="inpTerminalUser"/> <label for="inpTerminalUser">User</label></div> <div class="col-12"><button type="submit" class="btn btn-primary w-100"><!> Open Terminal</button></div></div></form>');function mc(n,d){Ye(d,!1);let g=he(d,"container_id",8),y,x=ae(),D=ae(!1);const L="sh";let i=ae(L);const o="root";let h=ae(o);const _=new fc.Terminal({theme:{background:"#222",cursor:"white",cursorAccent:"#222"},cursorBlink:!0}),a=new vc.FitAddon;wr(()=>{g()!==y&&(k(D)&&(se.send("close_terminal"),S()),y=g())}),at(()=>{se.register("spawn_terminal",()=>{l(),_.focus()},c=>De.add({text:c,type:"error"})),se.register("close_terminal",()=>{De.add({text:"Terminal has been closed",type:"info"}),S()},c=>De.add({text:c,type:"error"})),se.register("receive_terminal_output",async c=>{_.write(new Uint8Array(await c.blob.arrayBuffer()))},c=>De.add({text:c,type:"error"})),_.onResize(c=>{se.send("resize_terminal",c)}),_.loadAddon(a),_.onData(c=>{se.send("transmit_terminal_input",{data:c})})}),Wt(()=>{k(D)&&se.send("close_terminal"),se.unregister("spawn_terminal"),se.unregister("close_terminal"),se.unregister("receive_terminal_output")});function l(){k(D)&&a.fit()}async function v(){J(D,!0),se.send("spawn_terminal",{container_id:g(),cmd:k(i),user:k(h)}),await Ls(),_.open(k(x))}function S(){J(D,!1),_.reset(),_.clear(),J(i,L),J(h,o)}function u(){var c;(c=k(x))!=null&&c.requestFullscreen&&k(x).requestFullscreen({navigationUI:"show"})}it();var r=sr();ve("resize",Ar,l);var s=Be(r);{var e=c=>{var p=pc(),m=Be(p),b=P(m),f=P(b);de(f,{get icon(){return Hs},size:"lg",color:"#666"});var w=$(b,2),A=P(w);de(A,{get icon(){return Ia},size:"lg",color:"#666"});var R=$(m,2);Jr(R,O=>J(x,O),()=>k(x)),ve("click",b,u),ve("click",w,()=>se.send("close_terminal")),j(c,p)},t=c=>{var p=gc(),m=P(p),b=P(m),f=P(b),w=$(b,2),A=P(w),R=$(w,2),O=P(R),T=P(O);de(T,{get icon(){return ra}}),Fr(f,()=>k(i),N=>J(i,N)),Fr(A,()=>k(h),N=>J(h,N)),ve("submit",p,Nr(v)),dt(3,p,()=>Tt),j(c,p)};ee(s,c=>{k(D)?c(e):c(t,!1)})}j(n,r),Qe()}/*!
 * Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2024 Fonticons, Inc.
 */const Sc={prefix:"fab",iconName:"docker",icon:[640,512,[],"f395","M349.9 236.3h-66.1v-59.4h66.1v59.4zm0-204.3h-66.1v60.7h66.1V32zm78.2 144.8H362v59.4h66.1v-59.4zm-156.3-72.1h-66.1v60.1h66.1v-60.1zm78.1 0h-66.1v60.1h66.1v-60.1zm276.8 100c-14.4-9.7-47.6-13.2-73.1-8.4-3.3-24-16.7-44.9-41.1-63.7l-14-9.3-9.3 14c-18.4 27.8-23.4 73.6-3.7 103.8-8.7 4.7-25.8 11.1-48.4 10.7H2.4c-8.7 50.8 5.8 116.8 44 162.1 37.1 43.9 92.7 66.2 165.4 66.2 157.4 0 273.9-72.5 328.4-204.2 21.4.4 67.6.1 91.3-45.2 1.5-2.5 6.6-13.2 8.5-17.1l-13.3-8.9zm-511.1-27.9h-66v59.4h66.1v-59.4zm78.1 0h-66.1v59.4h66.1v-59.4zm78.1 0h-66.1v59.4h66.1v-59.4zm-78.1-72.1h-66.1v60.1h66.1v-60.1z"]},bc={prefix:"fab",iconName:"github",icon:[496,512,[],"f09b","M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"]};var wc=Z('<div class="d-flex align-items-center"><strong class="mx-5">Loading...</strong> <div class="spinner-border ms-auto" role="status" aria-hidden="true"></div></div>'),Cc=Z('<div class="card"><div class="card-body"><div class="fs-4 text-uppercase mb-3">Host</div> <div class="d-flex align-items-center mb-2"><!> </div> <div class="d-flex align-items-center mb-2"><!> </div> <div class="d-flex align-items-center mb-2"><!> </div> <div class="d-flex align-items-center mb-2"><!> </div> <div class="d-flex align-items-center mb-2"><!> </div> <div class="mt-3"><a href="https://github.com/knrdl/caasa" target="_blank" rel="noopener noreferrer" class="text-decoration-none"><!> CaaSa on Github</a></div></div></div>'),yc=Z('<div class="flex-grow-1 d-flex justify-content-center align-items-start mt-5"><!></div>');function Ec(n,d){Ye(d,!1);let g=ae(!0),y=ae();at(()=>{se.register("get_system_info",o=>{J(y,o),J(g,!1)},o=>{J(g,!1),De.add({text:o,type:"error"})}),se.send("get_system_info")}),Wt(()=>{se.unregister("get_system_info")}),it();var x=yc(),D=P(x);{var L=o=>{var h=wc();j(o,h)},i=(o,h)=>{{var _=a=>{var l=Cc(),v=P(l),S=$(P(v),2),u=P(S);de(u,{get icon(){return da},size:"lg",style:"width: 3rem"});var r=$(u),s=$(S,2),e=P(s);de(e,{get icon(){return Fs},size:"lg",style:"width: 3rem"});var t=$(e),c=$(s,2),p=P(c);de(p,{get icon(){return Ps},size:"lg",style:"width: 3rem"});var m=$(p),b=$(c,2),f=P(b);de(f,{get icon(){return Sc},size:"lg",style:"width: 3rem"});var w=$(f),A=$(b,2),R=P(A);de(R,{get icon(){return Ns},size:"lg",style:"width: 3rem"});var O=$(R),T=$(A,2),N=P(T),U=P(N);de(U,{get icon(){return bc},size:"sm"}),ne(K=>{ie(r,` ${k(y).os??""}`),ie(t,` ${k(y).cpus??""} CPUs`),ie(m,` ${K??""}
          Memory`),ie(w,` ${k(y).engine_version??""}`),ie(O,` ${k(y).containers.running??""}/${k(y).containers.total??""} Containers running`)},[()=>Vt(k(y).mem)],fe),j(a,l)};ee(o,a=>{k(y)&&a(_)},h)}};ee(D,o=>{k(g)?o(L):o(i,!1)})}j(n,x),Qe()}var xc=Z('<p class="mx-5 my-2">No containers found</p>'),kc=Z('<button type="button" style="cursor: pointer; text-align: left"><div style="width: 10px; flex: none"></div> <div class="p-2 pe-4"><div> </div> <div> </div></div></button>'),Lc=Z('<p class="mx-2 my-1">No containers match search term</p>'),Dc=Z('<input type="search" class="form-control svelte-6rcsrg" placeholder="Search"/> <!>',1),Rc=Z('<aside class="d-flex flex-column pb-1 svelte-6rcsrg"><!></aside>');function Xi(n,d){Ye(d,!1);const g=ae();let y=he(d,"containers",8),x=he(d,"selectedContainer",8);const D=As();let L=ae("");Ct(()=>(Lt(y()),k(L)),()=>{var _;J(g,(_=y())==null?void 0:_.filter(a=>{var l;return a.name.toLowerCase().replace(/\s+/g,"").includes(k(L).replace(/\s+/g,""))||((l=a.namespace)==null?void 0:l.toLowerCase().replace(/\s+/g,"").includes(k(L).replace(/\s+/g,"")))}))}),Sr(),it();var i=Rc(),o=P(i);{var h=_=>{var a=sr(),l=Be(a);{var v=u=>{var r=xc();j(u,r)},S=u=>{var r=Dc(),s=Be(r),e=$(s,2);_t(e,1,()=>k(g),ft,(t,c)=>{var p=kc();const m=fe(()=>x()&&x().id===k(c).id);let b;var f=P(p);let w;var A=$(f,2),R=P(A);let O;var T=P(R),N=$(R,2),U=P(N);ne((K,Y,G)=>{b=qe(p,1,"btn d-flex border-top border-bottom",null,b,K),w=qe(f,1,"",null,w,Y),O=qe(R,1,"text-uppercase",null,O,G),ie(T,k(c).namespace||""),ie(U,k(c).name)},[()=>({"bg-dark":k(m),"text-light":k(m)}),()=>({"bg-success":k(c).status==="running","bg-danger":["exited","dead","removing"].includes(k(c).status),"bg-warning":["created","paused","restarting"].includes(k(c).status)}),()=>{var K;return{"text-muted":((K=x())==null?void 0:K.id)!==k(c).id}}],fe),ve("click",p,()=>D("select-container",k(c))),j(t,p)},t=>{var c=Lc();j(t,c)}),ne(()=>To(s,k(L))),ve("input",s,t=>J(L,t.currentTarget.value.toLowerCase())),j(u,r)};ee(l,u=>{y().length===0?u(v):u(S,!1)})}j(_,a)};ee(o,_=>{y()&&_(h)})}j(n,i),Qe()}var Ac=Z('<div class="position-absolute"><!></div>'),Tc=Z('<li><button type="button">Info</button></li>'),Bc=Z('<li><button type="button">Logs</button></li>'),Mc=Z('<li><button type="button">Terminal</button></li>'),Oc=Z('<li><button type="button">Processes</button></li>'),Ic=Z('<li><button type="button">Files</button></li>'),Pc=Z("<div><!></div>"),Hc=Z("<div><!></div>"),Fc=Z("<div><!></div>"),Nc=Z("<div><!></div>"),zc=Z("<div><!></div>"),Wc=Z('<div class="container-md" style="overflow: hidden"><div class="card tabs"><ul class="card-header"><!> <!> <!> <!> <!></ul> <div class="card-body py-4"><!></div></div></div>'),Uc=Z('<!> <div style="z-index: 100;"><button type="button" class="position-fixed top-0 bottom-0 start-0 end-0" style="background: rgba(0, 0, 0, .55);" aria-label="Hide list"></button> <!></div> <div class="d-flex pb-3 align-items-start"><aside class="d-none d-md-block me-4"><!></aside> <!></div>',1);function $c(n,d){Ye(d,!1);const g=ae();let y,x=ae(!0),D=ae(),L=ae(),i=he(d,"showHostInfo",12),o=he(d,"showContainerListOverlay",12),h=ae(null);at(()=>{se.register("get_container_list",R=>{J(D,R),J(x,!1)},R=>De.add({text:R,type:"error"})),se.send("get_container_list"),y=setInterval(()=>{se.send("get_container_list")},3e3)}),Wt(()=>{se.unregister("get_container_list"),clearInterval(y)});function _(R){J(h,null),i(!1),o(!1),J(L,null),window.scrollTo({top:0,behavior:"smooth"}),setTimeout(()=>{var T,N;J(L,R);const O=["info","logs","procs","term","files"];for(let U of O)if((N=(T=k(L))==null?void 0:T.permissions)!=null&&N.includes(U)){J(h,U);break}k(h)||(J(L,null),De.add({type:"warning",text:"No permissions to access container"}))},100)}function a(R){J(h,R)}Ct(()=>k(L),()=>{var R;J(g,((R=k(L))==null?void 0:R.status)==="running")}),Sr(),it();var l=Uc(),v=Be(l);{var S=R=>{Ws(R,{})};ee(v,R=>{k(x)&&R(S)})}var u=$(v,2);let r;var s=P(u),e=$(s,2);{var t=R=>{var O=Ac(),T=P(O);const N=fe(()=>i()?null:k(L));Xi(T,{get containers(){return k(D)},get selectedContainer(){return k(N)},$$events:{"select-container":U=>_(U.detail)}}),dt(3,O,()=>Ui,()=>({y:-50,duration:200})),j(R,O)};ee(e,R=>{o()&&R(t)})}var c=$(u,2),p=P(c),m=P(p);const b=fe(()=>i()?null:k(L));Xi(m,{get containers(){return k(D)},get selectedContainer(){return k(b)},$$events:{"select-container":R=>_(R.detail)}});var f=$(p,2);{var w=R=>{Ec(R,{})},A=R=>{var O=Wc(),T=P(O),N=P(T),U=P(N);{var K=E=>{var W=Tc(),F=P(W);let V;ne(X=>V=qe(F,1,"text-uppercase",null,V,X),[()=>({active:k(h)==="info"})],fe),ve("click",F,()=>a("info")),j(E,W)};ee(U,E=>{var W,F;(F=(W=k(L))==null?void 0:W.permissions)!=null&&F.includes("info")&&E(K)})}var Y=$(U,2);{var G=E=>{var W=Bc(),F=P(W);let V;ne(X=>V=qe(F,1,"text-uppercase",null,V,X),[()=>({active:k(h)==="logs"})],fe),ve("click",F,()=>a("logs")),j(E,W)};ee(Y,E=>{var W,F;(F=(W=k(L))==null?void 0:W.permissions)!=null&&F.includes("logs")&&E(G)})}var C=$(Y,2);{var B=E=>{var W=Mc(),F=P(W);let V;ne(X=>V=qe(F,1,"text-uppercase",null,V,X),[()=>({active:k(h)==="term"})],fe),ve("click",F,()=>a("term")),j(E,W)};ee(C,E=>{var W,F;k(g)&&((F=(W=k(L))==null?void 0:W.permissions)!=null&&F.includes("term"))&&E(B)})}var M=$(C,2);{var I=E=>{var W=Oc(),F=P(W);let V;ne(X=>V=qe(F,1,"text-uppercase",null,V,X),[()=>({active:k(h)==="procs"})],fe),ve("click",F,()=>a("procs")),j(E,W)};ee(M,E=>{var W,F;k(g)&&((F=(W=k(L))==null?void 0:W.permissions)!=null&&F.includes("procs"))&&E(I)})}var z=$(M,2);{var q=E=>{var W=Ic(),F=P(W);let V;ne(X=>V=qe(F,1,"text-uppercase",null,V,X),[()=>({active:k(h)==="files"})],fe),ve("click",F,()=>a("files")),j(E,W)};ee(z,E=>{var W,F;k(g)&&((F=(W=k(L))==null?void 0:W.permissions)!=null&&F.includes("files"))&&E(q)})}var Q=$(N,2),te=P(Q);{var H=E=>{var W=sr(),F=Be(W);{var V=oe=>{var ue=Pc(),_e=P(ue);const ge=fe(()=>k(L).permissions.includes("state"));Ml(_e,{get container_id(){return k(L).id},get enable_actions(){return k(ge)}}),dt(1,ue,()=>Tt),j(oe,ue)},X=(oe,ue)=>{{var _e=re=>{var Fe=Hc(),et=P(Fe);$l(et,{get container_id(){return k(L).id}}),dt(1,Fe,()=>Tt),j(re,Fe)},ge=(re,Fe)=>{{var et=me=>{var Ne=Fc(),Me=P(Ne);mc(Me,{get container_id(){return k(L).id}}),dt(1,Ne,()=>Tt),j(me,Ne)},mt=(me,Ne)=>{{var Me=ke=>{var Ke=Nc(),St=P(Ke);dc(St,{get container_id(){return k(L).id}}),dt(1,Ke,()=>Tt),j(ke,Ke)},lt=(ke,Ke)=>{{var St=Ue=>{var $e=zc(),Ve=P($e);const bt=fe(()=>k(L).permissions.includes("files-read")),xe=fe(()=>k(L).permissions.includes("files-write"));nc(Ve,{get container_id(){return k(L).id},get allow_download(){return k(bt)},get allow_upload(){return k(xe)}}),dt(1,$e,()=>Tt),j(Ue,$e)};ee(ke,Ue=>{k(h)==="files"&&Ue(St)},Ke)}};ee(me,ke=>{k(h)==="procs"?ke(Me):ke(lt,!1)},Ne)}};ee(re,me=>{k(h)==="term"?me(et):me(mt,!1)},Fe)}};ee(oe,re=>{k(h)==="logs"?re(_e):re(ge,!1)},ue)}};ee(F,oe=>{k(h)==="info"?oe(V):oe(X,!1)})}j(E,W)};ee(te,E=>{k(L)&&E(H)})}dt(3,O,()=>Ui,()=>({x:300,duration:200})),j(R,O)};ee(f,R=>{i()?R(w):R(A,!1)})}ne(R=>r=qe(u,1,"d-md-none position-relative",null,r,R),[()=>({"d-none":!o()})],fe),ve("click",s,()=>o(!1)),j(n,l),Qe()}var jc=Z('<a href="/#/" class="d-md-none d-flex justify-content-center align-items-center svelte-1b5nrvg"><!></a>'),qc=Z('<button type="button" class="btn mx-2"><!></button>'),Kc=Z('<!> <main class="svelte-1b5nrvg"><header class="svelte-1b5nrvg"><!> <a href="/#/" class="d-flex justify-content-center align-items-center svelte-1b5nrvg"><span><!></span> <span class="text-black ps-2 fs-2 fw-light">Container as a Service admin</span></a> <div class="items-right svelte-1b5nrvg"><!> <!></div></header> <!></main>',1);function Vc(n,d){Ye(d,!1);let g=ae(null),y=ae(!0),x=ae(!0),D=ae(!1);at(async()=>{se.register("ws-error",null,w=>De.add({text:w,type:"error"})),se.register("ws-close",null,w=>{De.add({text:w,type:"error"}),J(g,null),alert("Lost connection. Reconnect?"),window.location.reload()}),se.register("webproxy_auth",({username:w})=>{J(g,w),J(y,!1)},w=>{De.add({text:w,type:"error"})}),await se.init()});function L(){se.close(),J(g,null),De.add({text:"Logged out",type:"info"}),window.location.reload()}function i(){alert("An error occurred!")}it();var o=Kc();ve("error",Ar,i);var h=Be(o);Go(h,{});var _=$(h,2),a=P(_),l=P(a);{var v=w=>{var A=jc(),R=P(A);de(R,{get icon(){return ia},color:"#123",size:"2x",style:"width: 3rem;height: 3rem;"}),ve("click",A,Nr(()=>J(D,!k(D)))),j(w,A)};ee(l,w=>{k(g)&&w(v)})}var S=$(l,2),u=P(S);let r;var s=P(u);de(s,{get icon(){return va},color:"#123",size:"2x",style:"width: 3rem;height: 3rem;"});var e=$(S,2),t=P(e);Na(t,{});var c=$(t,2);{var p=w=>{var A=qc(),R=P(A);de(R,{get icon(){return ta},color:"#333",size:"2x"}),ne(()=>Pe(A,"title",`Logout ${k(g)??""}`)),ve("click",A,L),j(w,A)};ee(c,w=>{k(g)&&k(y)&&w(p)})}var m=$(a,2);{var b=w=>{$c(w,{get showHostInfo(){return k(x)},set showHostInfo(A){J(x,A)},get showContainerListOverlay(){return k(D)},set showContainerListOverlay(A){J(D,A)},$$legacy:!0})},f=w=>{el(w,{$$events:{login:A=>J(g,A.detail.username)}})};ee(m,w=>{k(g)?w(b):w(f,!1)})}ne(w=>r=qe(u,1,"",null,r,w),[()=>({"d-none":k(g),"d-md-block":k(g)})],fe),ve("click",S,Nr(()=>J(x,!0))),j(n,o),Qe()}go(Vc,{target:document.getElementById("app")});
