var tn=Object.defineProperty;var rn=(n,u,p)=>u in n?tn(n,u,{enumerable:!0,configurable:!0,writable:!0,value:p}):n[u]=p;var Ke=(n,u,p)=>rn(n,typeof u!="symbol"?u+"":u,p);(function(){const u=document.createElement("link").relList;if(u&&u.supports&&u.supports("modulepreload"))return;for(const x of document.querySelectorAll('link[rel="modulepreload"]'))y(x);new MutationObserver(x=>{for(const R of x)if(R.type==="childList")for(const D of R.addedNodes)D.tagName==="LINK"&&D.rel==="modulepreload"&&y(D)}).observe(document,{childList:!0,subtree:!0});function p(x){const R={};return x.integrity&&(R.integrity=x.integrity),x.referrerPolicy&&(R.referrerPolicy=x.referrerPolicy),x.crossOrigin==="use-credentials"?R.credentials="include":x.crossOrigin==="anonymous"?R.credentials="omit":R.credentials="same-origin",R}function y(x){if(x.ep)return;x.ep=!0;const R=p(x);fetch(x.href,R)}})();const sn="5";var Gi;typeof window<"u"&&((Gi=window.__svelte??(window.__svelte={})).v??(Gi.v=new Set)).add(sn);let Xt=!1,nn=!1;function on(){Xt=!0}on();const fi=1,_i=2,Xi=4,an=8,ln=16,cn=1,hn=2,dn=4,un=8,fn=16,_n=1,vn=2,pn=4,Zi=1,gn=2,et=Symbol(),mn="http://www.w3.org/1999/xhtml",Ei=!1,gt=2,Yi=4,Nr=8,Wr=16,Bt=32,Zt=64,Lr=128,dt=256,Dr=512,tt=1024,Mt=2048,Ut=4096,At=8192,Ur=16384,Ji=32768,$r=65536,Qi=1<<17,Sn=1<<19,es=1<<20,ni=1<<21,Tt=Symbol("$state"),bn=Symbol("legacy props"),Cn=Symbol("");var pr=Array.isArray,yn=Array.prototype.indexOf,vi=Array.from,wn=Object.defineProperty,Vt=Object.getOwnPropertyDescriptor,ts=Object.getOwnPropertyDescriptors,En=Object.prototype,xn=Array.prototype,pi=Object.getPrototypeOf,xi=Object.isExtensible;function kn(n){return typeof n=="function"}const kt=()=>{};function Ln(n){return n()}function Rr(n){for(var u=0;u<n.length;u++)n[u]()}let lr=[],oi=[];function rs(){var n=lr;lr=[],Rr(n)}function Dn(){var n=oi;oi=[],Rr(n)}function jr(n){lr.length===0&&queueMicrotask(rs),lr.push(n)}function ki(){lr.length>0&&rs(),oi.length>0&&Dn()}function is(n){return n===this.v}function ss(n,u){return n!=n?u==u:n!==u||n!==null&&typeof n=="object"||typeof n=="function"}function gi(n){return!ss(n,this.v)}function Rn(n){throw new Error("https://svelte.dev/e/effect_in_teardown")}function An(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Tn(n){throw new Error("https://svelte.dev/e/effect_orphan")}function Bn(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Mn(n){throw new Error("https://svelte.dev/e/lifecycle_legacy_only")}function On(n){throw new Error("https://svelte.dev/e/props_invalid_value")}function Pn(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function In(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Hn(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function Nt(n,u){if(typeof n!="object"||n===null||Tt in n)return n;const p=pi(n);if(p!==En&&p!==xn)return n;var y=new Map,x=pr(n),R=Ot(0),D=Se,i=a=>{var l=Se;_t(D);var _;return _=a(),_t(l),_};return x&&y.set("length",Ot(n.length)),new Proxy(n,{defineProperty(a,l,_){(!("value"in _)||_.configurable===!1||_.enumerable===!1||_.writable===!1)&&Pn();var o=y.get(l);return o===void 0?(o=i(()=>Ot(_.value)),y.set(l,o)):Y(o,i(()=>Nt(_.value))),!0},deleteProperty(a,l){var _=y.get(l);if(_===void 0)l in a&&y.set(l,i(()=>Ot(et)));else{if(x&&typeof l=="string"){var o=y.get("length"),c=Number(l);Number.isInteger(c)&&c<o.v&&Y(o,c)}Y(_,et),Li(R)}return!0},get(a,l,_){var m;if(l===Tt)return n;var o=y.get(l),c=l in a;if(o===void 0&&(!c||(m=Vt(a,l))!=null&&m.writable)&&(o=i(()=>Ot(Nt(c?a[l]:et))),y.set(l,o)),o!==void 0){var v=k(o);return v===et?void 0:v}return Reflect.get(a,l,_)},getOwnPropertyDescriptor(a,l){var _=Reflect.getOwnPropertyDescriptor(a,l);if(_&&"value"in _){var o=y.get(l);o&&(_.value=k(o))}else if(_===void 0){var c=y.get(l),v=c==null?void 0:c.v;if(c!==void 0&&v!==et)return{enumerable:!0,configurable:!0,value:v,writable:!0}}return _},has(a,l){var v;if(l===Tt)return!0;var _=y.get(l),o=_!==void 0&&_.v!==et||Reflect.has(a,l);if(_!==void 0||ye!==null&&(!o||(v=Vt(a,l))!=null&&v.writable)){_===void 0&&(_=i(()=>Ot(o?Nt(a[l]):et)),y.set(l,_));var c=k(_);if(c===et)return!1}return o},set(a,l,_,o){var r;var c=y.get(l),v=l in a;if(x&&l==="length")for(var m=_;m<c.v;m+=1){var g=y.get(m+"");g!==void 0?Y(g,et):m in a&&(g=i(()=>Ot(et)),y.set(m+"",g))}c===void 0?(!v||(r=Vt(a,l))!=null&&r.writable)&&(c=i(()=>Ot(void 0)),Y(c,i(()=>Nt(_))),y.set(l,c)):(v=c.v!==et,Y(c,i(()=>Nt(_))));var e=Reflect.getOwnPropertyDescriptor(a,l);if(e!=null&&e.set&&e.set.call(o,_),!v){if(x&&typeof l=="string"){var s=y.get("length"),t=Number(l);Number.isInteger(t)&&t>=s.v&&Y(s,t+1)}Li(R)}return!0},ownKeys(a){k(R);var l=Reflect.ownKeys(a).filter(c=>{var v=y.get(c);return v===void 0||v.v!==et});for(var[_,o]of y)o.v!==et&&!(_ in a)&&l.push(_);return l},setPrototypeOf(){In()}})}function Li(n,u=1){Y(n,n.v+u)}function Di(n){try{if(n!==null&&typeof n=="object"&&Tt in n)return n[Tt]}catch{}return n}function Fn(n,u){return Object.is(Di(n),Di(u))}const cr=new Map;function hr(n,u){var p={f:0,v:n,reactions:null,equals:is,rv:0,wv:0};return p}function Ot(n,u){const p=hr(n);return qn(p),p}function oe(n,u=!1){var y;const p=hr(n);return u||(p.equals=gi),Xt&&Ce!==null&&Ce.l!==null&&((y=Ce.l).s??(y.s=[])).push(p),p}function Qr(n,u){return Y(n,st(()=>k(n))),u}function Y(n,u,p=!1){Se!==null&&!bt&&br()&&(Se.f&(gt|Wr))!==0&&!(Ge!=null&&Ge.includes(n))&&Hn();let y=p?Nt(u):u;return dr(n,y)}function dr(n,u){if(!n.equals(u)){var p=n.v;gr?cr.set(n,u):cr.set(n,p),n.v=u,n.wv=us(),ns(n,Mt),br()&&ye!==null&&(ye.f&tt)!==0&&(ye.f&(Bt|Zt))===0&&(lt===null?Kn([n]):lt.push(n))}return u}function ns(n,u){var p=n.reactions;if(p!==null)for(var y=br(),x=p.length,R=0;R<x;R++){var D=p[R],i=D.f;(i&Mt)===0&&(!y&&D===ye||(mt(D,u),(i&(tt|dt))!==0&&((i&gt)!==0?ns(D,Ut):Xr(D))))}}function ur(n){var u=gt|Mt,p=Se!==null&&(Se.f&gt)!==0?Se:null;return ye===null||p!==null&&(p.f&dt)!==0?u|=dt:ye.f|=es,{ctx:Ce,deps:null,effects:null,equals:is,f:u,fn:n,reactions:null,rv:0,v:null,wv:0,parent:p??ye}}function ue(n){const u=ur(n);return u.equals=gi,u}function os(n){var u=n.effects;if(u!==null){n.effects=null;for(var p=0;p<u.length;p+=1)Ft(u[p])}}function zn(n){for(var u=n.parent;u!==null;){if((u.f&gt)===0)return u;u=u.parent}return null}function Nn(n){var u,p=ye;yt(zn(n));try{os(n),u=_s(n)}finally{yt(p)}return u}function as(n){var u=Nn(n),p=(Ht||(n.f&dt)!==0)&&n.deps!==null?Ut:tt;mt(n,p),n.equals(u)||(n.v=u,n.wv=us())}let Wn=!1;var Ar,ls,cs,hs;function Un(){if(Ar===void 0){Ar=window,ls=/Firefox/.test(navigator.userAgent);var n=Element.prototype,u=Node.prototype,p=Text.prototype;cs=Vt(u,"firstChild").get,hs=Vt(u,"nextSibling").get,xi(n)&&(n.__click=void 0,n.__className=void 0,n.__attributes=null,n.__style=void 0,n.__e=void 0),xi(p)&&(p.__t=void 0)}}function qr(n=""){return document.createTextNode(n)}function Lt(n){return cs.call(n)}function Kr(n){return hs.call(n)}function I(n,u){return Lt(n)}function Be(n,u){{var p=Lt(n);return p instanceof Comment&&p.data===""?Kr(p):p}}function j(n,u=1,p=!1){let y=n;for(;u--;)y=Kr(y);return y}function $n(n){n.textContent=""}let xr=!1,Tr=!1,Br=null,Wt=!1,gr=!1;function Ri(n){gr=n}let or=[];let Se=null,bt=!1;function _t(n){Se=n}let ye=null;function yt(n){ye=n}let Ge=null;function jn(n){Ge=n}function qn(n){Se!==null&&Se.f&ni&&(Ge===null?jn([n]):Ge.push(n))}let Ve=null,it=0,lt=null;function Kn(n){lt=n}let ds=1,Mr=0,Ht=!1,It=null;function us(){return++ds}function Yt(n){var o;var u=n.f;if((u&Mt)!==0)return!0;if((u&Ut)!==0){var p=n.deps,y=(u&dt)!==0;if(p!==null){var x,R,D=(u&Dr)!==0,i=y&&ye!==null&&!Ht,a=p.length;if(D||i){var l=n,_=l.parent;for(x=0;x<a;x++)R=p[x],(D||!((o=R==null?void 0:R.reactions)!=null&&o.includes(l)))&&(R.reactions??(R.reactions=[])).push(l);D&&(l.f^=Dr),i&&_!==null&&(_.f&dt)===0&&(l.f^=dt)}for(x=0;x<a;x++)if(R=p[x],Yt(R)&&as(R),R.wv>n.wv)return!0}(!y||ye!==null&&!Ht)&&mt(n,tt)}return!1}function Vn(n,u){for(var p=u;p!==null;){if((p.f&Lr)!==0)try{p.fn(n);return}catch{p.f^=Lr}p=p.parent}throw xr=!1,n}function Gn(n){return(n.f&Ur)===0&&(n.parent===null||(n.parent.f&Lr)===0)}function Vr(n,u,p,y){if(xr){if(p===null&&(xr=!1),Gn(u))throw n;return}p!==null&&(xr=!0);{Vn(n,u);return}}function fs(n,u,p=!0){var y=n.reactions;if(y!==null)for(var x=0;x<y.length;x++){var R=y[x];Ge!=null&&Ge.includes(n)||((R.f&gt)!==0?fs(R,u,!1):u===R&&(p?mt(R,Mt):(R.f&tt)!==0&&mt(R,Ut),Xr(R)))}}function _s(n){var v;var u=Ve,p=it,y=lt,x=Se,R=Ht,D=Ge,i=Ce,a=bt,l=n.f;Ve=null,it=0,lt=null,Ht=(l&dt)!==0&&(bt||!Wt||Se===null),Se=(l&(Bt|Zt))===0?n:null,Ge=null,Ai(n.ctx),bt=!1,Mr++,n.f|=ni;try{var _=(0,n.fn)(),o=n.deps;if(Ve!==null){var c;if(Or(n,it),o!==null&&it>0)for(o.length=it+Ve.length,c=0;c<Ve.length;c++)o[it+c]=Ve[c];else n.deps=o=Ve;if(!Ht)for(c=it;c<o.length;c++)((v=o[c]).reactions??(v.reactions=[])).push(n)}else o!==null&&it<o.length&&(Or(n,it),o.length=it);if(br()&&lt!==null&&!bt&&o!==null&&(n.f&(gt|Ut|Mt))===0)for(c=0;c<lt.length;c++)fs(lt[c],n);return x!==null&&(Mr++,lt!==null&&(y===null?y=lt:y.push(...lt))),_}finally{Ve=u,it=p,lt=y,Se=x,Ht=R,Ge=D,Ai(i),bt=a,n.f^=ni}}function Xn(n,u){let p=u.reactions;if(p!==null){var y=yn.call(p,n);if(y!==-1){var x=p.length-1;x===0?p=u.reactions=null:(p[y]=p[x],p.pop())}}p===null&&(u.f&gt)!==0&&(Ve===null||!Ve.includes(u))&&(mt(u,Ut),(u.f&(dt|Dr))===0&&(u.f^=Dr),os(u),Or(u,0))}function Or(n,u){var p=n.deps;if(p!==null)for(var y=u;y<p.length;y++)Xn(n,p[y])}function Gr(n){var u=n.f;if((u&Ur)===0){mt(n,tt);var p=ye,y=Ce,x=Wt;ye=n,Wt=!0;try{(u&Wr)!==0?oo(n):bs(n),Ss(n);var R=_s(n);n.teardown=typeof R=="function"?R:null,n.wv=ds;var D=n.deps,i;Ei&&nn&&n.f&Mt}catch(a){Vr(a,n,p,y||n.ctx)}finally{Wt=x,ye=p}}}function Zn(){try{Bn()}catch(n){if(Br!==null)Vr(n,Br,null);else throw n}}function vs(){var n=Wt;try{var u=0;for(Wt=!0;or.length>0;){u++>1e3&&Zn();var p=or,y=p.length;or=[];for(var x=0;x<y;x++){var R=Jn(p[x]);Yn(R)}cr.clear()}}finally{Tr=!1,Wt=n,Br=null}}function Yn(n){var u=n.length;if(u!==0)for(var p=0;p<u;p++){var y=n[p];if((y.f&(Ur|At))===0)try{Yt(y)&&(Gr(y),y.deps===null&&y.first===null&&y.nodes_start===null&&(y.teardown===null?Cs(y):y.fn=null))}catch(x){Vr(x,y,null,y.ctx)}}}function Xr(n){Tr||(Tr=!0,queueMicrotask(vs));for(var u=Br=n;u.parent!==null;){u=u.parent;var p=u.f;if((p&(Zt|Bt))!==0){if((p&tt)===0)return;u.f^=tt}}or.push(u)}function Jn(n){for(var u=[],p=n;p!==null;){var y=p.f,x=(y&(Bt|Zt))!==0,R=x&&(y&tt)!==0;if(!R&&(y&At)===0){if((y&Yi)!==0)u.push(p);else if(x)p.f^=tt;else{var D=Se;try{Se=p,Yt(p)&&Gr(p)}catch(l){Vr(l,p,null,p.ctx)}finally{Se=D}}var i=p.first;if(i!==null){p=i;continue}}var a=p.parent;for(p=p.next;p===null&&a!==null;)p=a.next,a=a.parent}return u}function Qn(n){var u;for(ki();or.length>0;)Tr=!0,vs(),ki();return u}async function ps(){await Promise.resolve(),Qn()}function k(n){var u=n.f,p=(u&gt)!==0;if(It!==null&&It.add(n),Se!==null&&!bt){if(!(Ge!=null&&Ge.includes(n))){var y=Se.deps;n.rv<Mr&&(n.rv=Mr,Ve===null&&y!==null&&y[it]===n?it++:Ve===null?Ve=[n]:(!Ht||!Ve.includes(n))&&Ve.push(n))}}else if(p&&n.deps===null&&n.effects===null){var x=n,R=x.parent;R!==null&&(R.f&dt)===0&&(x.f^=dt)}return p&&(x=n,Yt(x)&&as(x)),gr&&cr.has(n)?cr.get(n):n.v}function eo(n){var u=It;It=new Set;var p=It,y;try{if(st(n),u!==null)for(y of It)u.add(y)}finally{It=u}return p}function to(n){var u=eo(()=>st(n));for(var p of u)if((p.f&Qi)!==0)for(const y of p.deps||[])(y.f&gt)===0&&dr(y,y.v);else dr(p,p.v)}function st(n){var u=bt;try{return bt=!0,n()}finally{bt=u}}const ro=-7169;function mt(n,u){n.f=n.f&ro|u}function xt(n){if(!(typeof n!="object"||!n||n instanceof EventTarget)){if(Tt in n)ai(n);else if(!Array.isArray(n))for(let u in n){const p=n[u];typeof p=="object"&&p&&Tt in p&&ai(p)}}}function ai(n,u=new Set){if(typeof n=="object"&&n!==null&&!(n instanceof EventTarget)&&!u.has(n)){u.add(n),n instanceof Date&&n.getTime();for(let y in n)try{ai(n[y],u)}catch{}const p=pi(n);if(p!==Object.prototype&&p!==Array.prototype&&p!==Map.prototype&&p!==Set.prototype&&p!==Date.prototype){const y=ts(p);for(let x in y){const R=y[x].get;if(R)try{R.call(n)}catch{}}}}}function gs(n){ye===null&&Se===null&&Tn(),Se!==null&&(Se.f&dt)!==0&&ye===null&&An(),gr&&Rn()}function io(n,u){var p=u.last;p===null?u.last=u.first=n:(p.next=n,n.prev=p,u.last=n)}function Jt(n,u,p,y=!0){var x=ye,R={ctx:Ce,deps:null,nodes_start:null,nodes_end:null,f:n|Mt,first:null,fn:u,last:null,next:null,parent:x,prev:null,teardown:null,transitions:null,wv:0};if(p)try{Gr(R),R.f|=Ji}catch(a){throw Ft(R),a}else u!==null&&Xr(R);var D=p&&R.deps===null&&R.first===null&&R.nodes_start===null&&R.teardown===null&&(R.f&(es|Lr))===0;if(!D&&y&&(x!==null&&io(R,x),Se!==null&&(Se.f&gt)!==0)){var i=Se;(i.effects??(i.effects=[])).push(R)}return R}function ms(n){const u=Jt(Nr,null,!1);return mt(u,tt),u.teardown=n,u}function li(n){gs();var u=ye!==null&&(ye.f&Bt)!==0&&Ce!==null&&!Ce.m;if(u){var p=Ce;(p.e??(p.e=[])).push({fn:n,effect:ye,reaction:Se})}else{var y=Qt(n);return y}}function so(n){return gs(),Sr(n)}function no(n){const u=Jt(Zt,n,!0);return(p={})=>new Promise(y=>{p.outro?Pr(u,()=>{Ft(u),y(void 0)}):(Ft(u),y(void 0))})}function Qt(n){return Jt(Yi,n,!1)}function Ct(n,u){var p=Ce,y={effect:null,ran:!1};p.l.r1.push(y),y.effect=Sr(()=>{n(),!y.ran&&(y.ran=!0,Y(p.l.r2,!0),st(u))})}function mr(){var n=Ce;Sr(()=>{if(k(n.l.r2)){for(var u of n.l.r1){var p=u.effect;(p.f&tt)!==0&&mt(p,Ut),Yt(p)&&Gr(p),u.ran=!1}n.l.r2.v=!1}})}function Sr(n){return Jt(Nr,n,!0)}function se(n,u=[],p=ur){const y=u.map(p);return mi(()=>n(...y.map(k)))}function mi(n,u=0){return Jt(Nr|Wr|u,n,!0)}function fr(n,u=!0){return Jt(Nr|Bt,n,!0,u)}function Ss(n){var u=n.teardown;if(u!==null){const p=gr,y=Se;Ri(!0),_t(null);try{u.call(null)}finally{Ri(p),_t(y)}}}function bs(n,u=!1){var p=n.first;for(n.first=n.last=null;p!==null;){var y=p.next;(p.f&Zt)!==0?p.parent=null:Ft(p,u),p=y}}function oo(n){for(var u=n.first;u!==null;){var p=u.next;(u.f&Bt)===0&&Ft(u),u=p}}function Ft(n,u=!0){var p=!1;if((u||(n.f&Sn)!==0)&&n.nodes_start!==null){for(var y=n.nodes_start,x=n.nodes_end;y!==null;){var R=y===x?null:Kr(y);y.remove(),y=R}p=!0}bs(n,u&&!p),Or(n,0),mt(n,Ur);var D=n.transitions;if(D!==null)for(const a of D)a.stop();Ss(n);var i=n.parent;i!==null&&i.first!==null&&Cs(n),n.next=n.prev=n.teardown=n.ctx=n.deps=n.fn=n.nodes_start=n.nodes_end=null}function Cs(n){var u=n.parent,p=n.prev,y=n.next;p!==null&&(p.next=y),y!==null&&(y.prev=p),u!==null&&(u.first===n&&(u.first=y),u.last===n&&(u.last=p))}function Pr(n,u){var p=[];Si(n,p,!0),ys(p,()=>{Ft(n),u&&u()})}function ys(n,u){var p=n.length;if(p>0){var y=()=>--p||u();for(var x of n)x.out(y)}else u()}function Si(n,u,p){if((n.f&At)===0){if(n.f^=At,n.transitions!==null)for(const D of n.transitions)(D.is_global||p)&&u.push(D);for(var y=n.first;y!==null;){var x=y.next,R=(y.f&$r)!==0||(y.f&Bt)!==0;Si(y,u,R?p:!1),y=x}}}function Ir(n){ws(n,!0)}function ws(n,u){if((n.f&At)!==0){n.f^=At,(n.f&tt)===0&&(n.f^=tt),Yt(n)&&(mt(n,Mt),Xr(n));for(var p=n.first;p!==null;){var y=p.next,x=(p.f&$r)!==0||(p.f&Bt)!==0;ws(p,x?u:!1),p=y}if(n.transitions!==null)for(const R of n.transitions)(R.is_global||u)&&R.in()}}function Zr(n){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}let Ce=null;function Ai(n){Ce=n}function Xe(n,u=!1,p){var y=Ce={p:Ce,c:null,d:!1,e:null,m:!1,s:n,x:null,l:null};Xt&&!u&&(Ce.l={s:null,u:null,r1:[],r2:hr(!1)}),ms(()=>{y.d=!0})}function Ze(n){const u=Ce;if(u!==null){const D=u.e;if(D!==null){var p=ye,y=Se;u.e=null;try{for(var x=0;x<D.length;x++){var R=D[x];yt(R.effect),_t(R.reaction),Qt(R.fn)}}finally{yt(p),_t(y)}}Ce=u.p,u.m=!0}return{}}function br(){return!Xt||Ce!==null&&Ce.l===null}const ao=["touchstart","touchmove"];function lo(n){return ao.includes(n)}let Ti=!1;function co(){Ti||(Ti=!0,document.addEventListener("reset",n=>{Promise.resolve().then(()=>{var u;if(!n.defaultPrevented)for(const p of n.target.elements)(u=p.__on_r)==null||u.call(p)})},{capture:!0}))}function bi(n){var u=Se,p=ye;_t(null),yt(null);try{return n()}finally{_t(u),yt(p)}}function Es(n,u,p,y=p){n.addEventListener(u,()=>bi(p));const x=n.__on_r;x?n.__on_r=()=>{x(),y(!0)}:n.__on_r=()=>y(!0),co()}const ho=new Set,Bi=new Set;function uo(n,u,p,y={}){function x(R){if(y.capture||nr.call(u,R),!R.cancelBubble)return bi(()=>p==null?void 0:p.call(this,R))}return n.startsWith("pointer")||n.startsWith("touch")||n==="wheel"?jr(()=>{u.addEventListener(n,x,y)}):u.addEventListener(n,x,y),x}function fe(n,u,p,y,x){var R={capture:y,passive:x},D=uo(n,u,p,R);(u===document.body||u===window||u===document)&&ms(()=>{u.removeEventListener(n,D,R)})}function nr(n){var t;var u=this,p=u.ownerDocument,y=n.type,x=((t=n.composedPath)==null?void 0:t.call(n))||[],R=x[0]||n.target,D=0,i=n.__root;if(i){var a=x.indexOf(i);if(a!==-1&&(u===document||u===window)){n.__root=u;return}var l=x.indexOf(u);if(l===-1)return;a<=l&&(D=a)}if(R=x[D]||n.target,R!==u){wn(n,"currentTarget",{configurable:!0,get(){return R||p}});var _=Se,o=ye;_t(null),yt(null);try{for(var c,v=[];R!==null;){var m=R.assignedSlot||R.parentNode||R.host||null;try{var g=R["__"+y];if(g!=null&&(!R.disabled||n.target===R))if(pr(g)){var[e,...s]=g;e.apply(R,[n,...s])}else g.call(R,n)}catch(r){c?v.push(r):c=r}if(n.cancelBubble||m===u||m===null)break;R=m}if(c){for(let r of v)queueMicrotask(()=>{throw r});throw c}}finally{n.__root=u,delete n.currentTarget,_t(_),yt(o)}}}function xs(n){var u=document.createElement("template");return u.innerHTML=n,u.content}function Gt(n,u){var p=ye;p.nodes_start===null&&(p.nodes_start=n,p.nodes_end=u)}function G(n,u){var p=(u&Zi)!==0,y=(u&gn)!==0,x,R=!n.startsWith("<!>");return()=>{x===void 0&&(x=xs(R?n:"<!>"+n),p||(x=Lt(x)));var D=y||ls?document.importNode(x,!0):x.cloneNode(!0);if(p){var i=Lt(D),a=D.lastChild;Gt(i,a)}else Gt(D,D);return D}}function $t(n,u,p="svg"){var y=!n.startsWith("<!>"),x=(u&Zi)!==0,R=`<${p}>${y?n:"<!>"+n}</${p}>`,D;return()=>{if(!D){var i=xs(R),a=Lt(i);if(x)for(D=document.createDocumentFragment();Lt(a);)D.appendChild(Lt(a));else D=Lt(a)}var l=D.cloneNode(!0);if(x){var _=Lt(l),o=l.lastChild;Gt(_,o)}else Gt(l,l);return l}}function ht(n=""){{var u=qr(n+"");return Gt(u,u),u}}function er(){var n=document.createDocumentFragment(),u=document.createComment(""),p=qr();return n.append(u,p),Gt(u,p),n}function V(n,u){n!==null&&n.before(u)}let ci=!0;function re(n,u){var p=u==null?"":typeof u=="object"?u+"":u;p!==(n.__t??(n.__t=n.nodeValue))&&(n.__t=p,n.nodeValue=p+"")}function fo(n,u){return _o(n,u)}const jt=new Map;function _o(n,{target:u,anchor:p,props:y={},events:x,context:R,intro:D=!0}){Un();var i=new Set,a=o=>{for(var c=0;c<o.length;c++){var v=o[c];if(!i.has(v)){i.add(v);var m=lo(v);u.addEventListener(v,nr,{passive:m});var g=jt.get(v);g===void 0?(document.addEventListener(v,nr,{passive:m}),jt.set(v,1)):jt.set(v,g+1)}}};a(vi(ho)),Bi.add(a);var l=void 0,_=no(()=>{var o=p??u.appendChild(qr());return fr(()=>{if(R){Xe({});var c=Ce;c.c=R}x&&(y.$$events=x),ci=D,l=n(o,y)||{},ci=!0,R&&Ze()}),()=>{var m;for(var c of i){u.removeEventListener(c,nr);var v=jt.get(c);--v===0?(document.removeEventListener(c,nr),jt.delete(c)):jt.set(c,v)}Bi.delete(a),o!==p&&((m=o.parentNode)==null||m.removeChild(o))}});return vo.set(l,_),l}let vo=new WeakMap;function Q(n,u,[p,y]=[0,0]){var x=n,R=null,D=null,i=et,a=p>0?$r:0,l=!1;const _=(c,v=!0)=>{l=!0,o(v,c)},o=(c,v)=>{i!==(i=c)&&(i?(R?Ir(R):v&&(R=fr(()=>v(x))),D&&Pr(D,()=>{D=null})):(D?Ir(D):v&&(D=fr(()=>v(x,[p+1,y]))),R&&Pr(R,()=>{R=null})))};mi(()=>{l=!1,u(_),l||o(null,null)},a)}function ut(n,u){return u}function po(n,u,p,y){for(var x=[],R=u.length,D=0;D<R;D++)Si(u[D].e,x,!0);var i=R>0&&x.length===0&&p!==null;if(i){var a=p.parentNode;$n(a),a.append(p),y.clear(),Pt(n,u[0].prev,u[R-1].next)}ys(x,()=>{for(var l=0;l<R;l++){var _=u[l];i||(y.delete(_.k),Pt(n,_.prev,_.next)),Ft(_.e,!i)}})}function ft(n,u,p,y,x,R=null){var D=n,i={flags:u,items:new Map,first:null},a=(u&Xi)!==0;if(a){var l=n;D=l.appendChild(qr())}var _=null,o=!1,c=ue(()=>{var v=p();return pr(v)?v:v==null?[]:vi(v)});mi(()=>{var v=k(c),m=v.length;o&&m===0||(o=m===0,go(v,i,D,x,u,y,p),R!==null&&(m===0?_?Ir(_):_=fr(()=>R(D)):_!==null&&Pr(_,()=>{_=null})),k(c))})}function go(n,u,p,y,x,R,D){var N,W,q,K;var i=(x&an)!==0,a=(x&(fi|_i))!==0,l=n.length,_=u.items,o=u.first,c=o,v,m=null,g,e=[],s=[],t,r,h,d;if(i)for(d=0;d<l;d+=1)t=n[d],r=R(t,d),h=_.get(r),h!==void 0&&((N=h.a)==null||N.measure(),(g??(g=new Set)).add(h));for(d=0;d<l;d+=1){if(t=n[d],r=R(t,d),h=_.get(r),h===void 0){var b=c?c.e.nodes_start:p;m=So(b,u,m,m===null?u.first:m.next,t,r,d,y,x,D),_.set(r,m),e=[],s=[],c=m.next;continue}if(a&&mo(h,t,d,x),(h.e.f&At)!==0&&(Ir(h.e),i&&((W=h.a)==null||W.unfix(),(g??(g=new Set)).delete(h))),h!==c){if(v!==void 0&&v.has(h)){if(e.length<s.length){var C=s[0],f;m=C.prev;var S=e[0],L=e[e.length-1];for(f=0;f<e.length;f+=1)Mi(e[f],C,p);for(f=0;f<s.length;f+=1)v.delete(s[f]);Pt(u,S.prev,L.next),Pt(u,m,S),Pt(u,L,C),c=C,m=L,d-=1,e=[],s=[]}else v.delete(h),Mi(h,c,p),Pt(u,h.prev,h.next),Pt(u,h,m===null?u.first:m.next),Pt(u,m,h),m=h;continue}for(e=[],s=[];c!==null&&c.k!==r;)(c.e.f&At)===0&&(v??(v=new Set)).add(c),s.push(c),c=c.next;if(c===null)continue;h=c}e.push(h),m=h,c=h.next}if(c!==null||v!==void 0){for(var T=v===void 0?[]:vi(v);c!==null;)(c.e.f&At)===0&&T.push(c),c=c.next;var A=T.length;if(A>0){var O=(x&Xi)!==0&&l===0?p:null;if(i){for(d=0;d<A;d+=1)(q=T[d].a)==null||q.measure();for(d=0;d<A;d+=1)(K=T[d].a)==null||K.fix()}po(u,T,O,_)}}i&&jr(()=>{var E;if(g!==void 0)for(h of g)(E=h.a)==null||E.apply()}),ye.first=u.first&&u.first.e,ye.last=m&&m.e}function mo(n,u,p,y){(y&fi)!==0&&dr(n.v,u),(y&_i)!==0?dr(n.i,p):n.i=p}function So(n,u,p,y,x,R,D,i,a,l){var _=(a&fi)!==0,o=(a&ln)===0,c=_?o?oe(x):hr(x):x,v=(a&_i)===0?D:hr(D),m={i:v,v:c,k:R,a:null,e:null,prev:p,next:y};try{return m.e=fr(()=>i(n,c,v,l),Wn),m.e.prev=p&&p.e,m.e.next=y&&y.e,p===null?u.first=m:(p.next=m,p.e.next=m.e),y!==null&&(y.prev=m,y.e.prev=m.e),m}finally{}}function Mi(n,u,p){for(var y=n.next?n.next.e.nodes_start:p,x=u?u.e.nodes_start:p,R=n.e.nodes_start;R!==y;){var D=Kr(R);x.before(R),R=D}}function Pt(n,u,p){u===null?n.first=p:(u.next=p,u.e.next=p&&p.e),p!==null&&(p.prev=u,p.e.prev=u&&u.e)}function Hr(n,u,p,y,x){var i;var R=(i=u.$$slots)==null?void 0:i[p],D=!1;R===!0&&(R=u[p==="default"?"children":p],D=!0),R===void 0?x!==null&&x(n):R(n,D?()=>y:y)}const Oi=[...` 	
\r\fÂ \v\uFEFF`];function bo(n,u,p){var y=n==null?"":""+n;if(u&&(y=y?y+" "+u:u),p){for(var x in p)if(p[x])y=y?y+" "+x:x;else if(y.length)for(var R=x.length,D=0;(D=y.indexOf(x,D))>=0;){var i=D+R;(D===0||Oi.includes(y[D-1]))&&(i===y.length||Oi.includes(y[i]))?y=(D===0?"":y.substring(0,D))+y.substring(i+1):D=i}}return y===""?null:y}function Co(n,u){return n==null?null:String(n)}function $e(n,u,p,y,x,R){var D=n.__className;if(D!==p||D===void 0){var i=bo(p,y,R);i==null?n.removeAttribute("class"):u?n.className=i:n.setAttribute("class",i),n.__className=p}else if(R&&x!==R)for(var a in R){var l=!!R[a];(x==null||l!==!!x[a])&&n.classList.toggle(a,l)}return R}function kr(n,u,p,y){var x=n.__style;if(x!==u){var R=Co(u);R==null?n.removeAttribute("style"):n.style.cssText=R,n.__style=u}return y}const yo=Symbol("is custom element"),wo=Symbol("is html");function Eo(n,u){var p=ks(n);p.value===(p.value=u??void 0)||n.value===u&&(u!==0||n.nodeName!=="PROGRESS")||(n.value=u??"")}function Pe(n,u,p,y){var x=ks(n);x[u]!==(x[u]=p)&&(u==="loading"&&(n[Cn]=p),p==null?n.removeAttribute(u):typeof p!="string"&&xo(n).includes(u)?n[u]=p:n.setAttribute(u,p))}function ks(n){return n.__attributes??(n.__attributes={[yo]:n.nodeName.includes("-"),[wo]:n.namespaceURI===mn})}var Pi=new Map;function xo(n){var u=Pi.get(n.nodeName);if(u)return u;Pi.set(n.nodeName,u=[]);for(var p,y=n,x=Element.prototype;x!==y;){p=ts(y);for(var R in p)p[R].set&&u.push(R);y=pi(y)}return u}const ko=()=>performance.now(),Dt={tick:n=>requestAnimationFrame(n),now:()=>ko(),tasks:new Set};function Ls(){const n=Dt.now();Dt.tasks.forEach(u=>{u.c(n)||(Dt.tasks.delete(u),u.f())}),Dt.tasks.size!==0&&Dt.tick(Ls)}function Lo(n){let u;return Dt.tasks.size===0&&Dt.tick(Ls),{promise:new Promise(p=>{Dt.tasks.add(u={c:n,f:p})}),abort(){Dt.tasks.delete(u)}}}function yr(n,u){bi(()=>{n.dispatchEvent(new CustomEvent(u))})}function Do(n){if(n==="float")return"cssFloat";if(n==="offset")return"cssOffset";if(n.startsWith("--"))return n;const u=n.split("-");return u.length===1?u[0]:u[0]+u.slice(1).map(p=>p[0].toUpperCase()+p.slice(1)).join("")}function Ii(n){const u={},p=n.split(";");for(const y of p){const[x,R]=y.split(":");if(!x||R===void 0)break;const D=Do(x.trim());u[D]=R.trim()}return u}const Ro=n=>n;function ct(n,u,p,y){var x=(n&_n)!==0,R=(n&vn)!==0,D=x&&R,i=(n&pn)!==0,a=D?"both":x?"in":"out",l,_=u.inert,o=u.style.overflow,c,v;function m(){var r=Se,h=ye;_t(null),yt(null);try{return l??(l=p()(u,(y==null?void 0:y())??{},{direction:a}))}finally{_t(r),yt(h)}}var g={is_global:i,in(){var r;if(u.inert=_,!x){v==null||v.abort(),(r=v==null?void 0:v.reset)==null||r.call(v);return}R||c==null||c.abort(),yr(u,"introstart"),c=hi(u,m(),v,1,()=>{yr(u,"introend"),c==null||c.abort(),c=l=void 0,u.style.overflow=o})},out(r){if(!R){r==null||r(),l=void 0;return}u.inert=!0,yr(u,"outrostart"),v=hi(u,m(),c,0,()=>{yr(u,"outroend"),r==null||r()})},stop:()=>{c==null||c.abort(),v==null||v.abort()}},e=ye;if((e.transitions??(e.transitions=[])).push(g),x&&ci){var s=i;if(!s){for(var t=e.parent;t&&(t.f&$r)!==0;)for(;(t=t.parent)&&(t.f&Wr)===0;);s=!t||(t.f&Ji)!==0}s&&Qt(()=>{st(()=>g.in())})}}function hi(n,u,p,y,x){var R=y===1;if(kn(u)){var D,i=!1;return jr(()=>{if(!i){var e=u({direction:R?"in":"out"});D=hi(n,e,p,y,x)}}),{abort:()=>{i=!0,D==null||D.abort()},deactivate:()=>D.deactivate(),reset:()=>D.reset(),t:()=>D.t()}}if(p==null||p.deactivate(),!(u!=null&&u.duration))return x(),{abort:kt,deactivate:kt,reset:kt,t:()=>y};const{delay:a=0,css:l,tick:_,easing:o=Ro}=u;var c=[];if(R&&p===void 0&&(_&&_(0,1),l)){var v=Ii(l(0,1));c.push(v,v)}var m=()=>1-y,g=n.animate(c,{duration:a});return g.onfinish=()=>{var e=(p==null?void 0:p.t())??1-y;p==null||p.abort();var s=y-e,t=u.duration*Math.abs(s),r=[];if(t>0){var h=!1;if(l)for(var d=Math.ceil(t/16.666666666666668),b=0;b<=d;b+=1){var C=e+s*o(b/d),f=Ii(l(C,1-C));r.push(f),h||(h=f.overflow==="hidden")}h&&(n.style.overflow="hidden"),m=()=>{var S=g.currentTime;return e+s*o(S/t)},_&&Lo(()=>{if(g.playState!=="running")return!1;var S=m();return _(S,1-S),!0})}g=n.animate(r,{duration:t,fill:"forwards"}),g.onfinish=()=>{m=()=>y,_==null||_(y,1-y),x()}},{abort:()=>{g&&(g.cancel(),g.effect=null,g.onfinish=kt)},deactivate:()=>{x=kt},reset:()=>{y===0&&(_==null||_(1,0))},t:()=>m()}}function Fr(n,u,p=u){var y=br();Es(n,"input",x=>{var R=x?n.defaultValue:n.value;if(R=ei(n)?ti(R):R,p(R),y&&R!==(R=u())){var D=n.selectionStart,i=n.selectionEnd;n.value=R??"",i!==null&&(n.selectionStart=D,n.selectionEnd=Math.min(i,n.value.length))}}),st(u)==null&&n.value&&p(ei(n)?ti(n.value):n.value),Sr(()=>{var x=u();ei(n)&&x===ti(n.value)||n.type==="date"&&!x&&!n.value||x!==n.value&&(n.value=x??"")})}function ei(n){var u=n.type;return u==="number"||u==="range"}function ti(n){return n===""?null:+n}function Ds(n,u,p){if(n.multiple)return Bo(n,u);for(var y of n.options){var x=ar(y);if(Fn(x,u)){y.selected=!0;return}}(!p||u!==void 0)&&(n.selectedIndex=-1)}function Ao(n,u){Qt(()=>{var p=new MutationObserver(()=>{var y=n.__value;Ds(n,y)});return p.observe(n,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{p.disconnect()}})}function To(n,u,p=u){var y=!0;Es(n,"change",x=>{var R=x?"[selected]":":checked",D;if(n.multiple)D=[].map.call(n.querySelectorAll(R),ar);else{var i=n.querySelector(R)??n.querySelector("option:not([disabled])");D=i&&ar(i)}p(D)}),Qt(()=>{var x=u();if(Ds(n,x,y),y&&x===void 0){var R=n.querySelector(":checked");R!==null&&(x=ar(R),p(x))}n.__value=x,y=!1}),Ao(n)}function Bo(n,u){for(var p of n.options)p.selected=~u.indexOf(ar(p))}function ar(n){return"__value"in n?n.__value:n.value}function Hi(n,u){return n===u||(n==null?void 0:n[Tt])===u}function Yr(n={},u,p,y){return Qt(()=>{var x,R;return Sr(()=>{x=R,R=[],st(()=>{n!==p(...R)&&(u(n,...R),x&&Hi(p(...x),n)&&u(null,...x))})}),()=>{jr(()=>{R&&Hi(p(...R),n)&&u(null,...R)})}}),n}function zr(n){return function(...u){var p=u[0];return p.preventDefault(),n==null?void 0:n.apply(this,u)}}function rt(n=!1){const u=Ce,p=u.l.u;if(!p)return;let y=()=>xt(u.s);if(n){let x=0,R={};const D=ur(()=>{let i=!1;const a=u.s;for(const l in a)a[l]!==R[l]&&(R[l]=a[l],i=!0);return i&&x++,x});y=()=>k(D)}p.b.length&&so(()=>{Fi(u,y),Rr(p.b)}),li(()=>{const x=st(()=>p.m.map(Ln));return()=>{for(const R of x)typeof R=="function"&&R()}}),p.a.length&&li(()=>{Fi(u,y),Rr(p.a)})}function Fi(n,u){if(n.l.s)for(const p of n.l.s)k(p);u()}function Mo(n,u){var R;var p=(R=n.$$events)==null?void 0:R[u.type],y=pr(p)?p.slice():p==null?[]:[p];for(var x of y)x.call(this,u)}function nt(n){Ce===null&&Zr(),Xt&&Ce.l!==null?As(Ce).m.push(n):li(()=>{const u=st(n);if(typeof u=="function")return u})}function zt(n){Ce===null&&Zr(),nt(()=>()=>st(n))}function Oo(n,u,{bubbles:p=!1,cancelable:y=!1}={}){return new CustomEvent(n,{detail:u,bubbles:p,cancelable:y})}function Rs(){const n=Ce;return n===null&&Zr(),(u,p,y)=>{var R;const x=(R=n.s.$$events)==null?void 0:R[u];if(x){const D=pr(x)?x.slice():[x],i=Oo(u,p,y);for(const a of D)a.call(n.x,i);return!i.defaultPrevented}return!0}}function Cr(n){Ce===null&&Zr(),Ce.l===null&&Mn(),As(Ce).b.push(n)}function As(n){var u=n.l;return u.u??(u.u={a:[],b:[],m:[]})}function Po(n,u,p){if(n==null)return u(void 0),kt;const y=st(()=>n.subscribe(u,p));return y.unsubscribe?()=>y.unsubscribe():y}const qt=[];function Io(n,u=kt){let p=null;const y=new Set;function x(i){if(ss(n,i)&&(n=i,p)){const a=!qt.length;for(const l of y)l[1](),qt.push(l,n);if(a){for(let l=0;l<qt.length;l+=2)qt[l][0](qt[l+1]);qt.length=0}}}function R(i){x(i(n))}function D(i,a=kt){const l=[i,a];return y.add(l),y.size===1&&(p=u(x,R)||kt),i(n),()=>{y.delete(l),y.size===0&&p&&(p(),p=null)}}return{set:x,update:R,subscribe:D}}function Ho(n){let u;return Po(n,p=>u=p)(),u}let wr=!1;function Fo(n){var u=wr;try{return wr=!1,[n(),wr]}finally{wr=u}}function zi(n){var u;return((u=n.ctx)==null?void 0:u.d)??!1}function he(n,u,p,y){var C;var x=(p&cn)!==0,R=!Xt||(p&hn)!==0,D=(p&un)!==0,i=(p&fn)!==0,a=!1,l;D?[l,a]=Fo(()=>n[u]):l=n[u];var _=Tt in n||bn in n,o=D&&(((C=Vt(n,u))==null?void 0:C.set)??(_&&u in n&&(f=>n[u]=f)))||void 0,c=y,v=!0,m=!1,g=()=>(m=!0,v&&(v=!1,i?c=st(y):c=y),c);l===void 0&&y!==void 0&&(o&&R&&On(),l=g(),o&&o(l));var e;if(R)e=()=>{var f=n[u];return f===void 0?g():(v=!0,m=!1,f)};else{var s=(x?ur:ue)(()=>n[u]);s.f|=Qi,e=()=>{var f=k(s);return f!==void 0&&(c=void 0),f===void 0?c:f}}if((p&dn)===0)return e;if(o){var t=n.$$legacy;return function(f,S){return arguments.length>0?((!R||!S||t||a)&&o(S?e():f),f):e()}}var r=!1,h=!1,d=oe(l),b=ur(()=>{var f=e(),S=k(d);return r?(r=!1,h=!0,S):(h=!1,d.v=f)});return D&&k(b),x||(b.equals=gi),function(f,S){if(It!==null&&(r=h,e(),k(d)),arguments.length>0){const L=S?k(b):R&&D?Nt(f):f;if(!b.equals(L)){if(r=!0,Y(d,L),m&&c!==void 0&&(c=L),zi(b))return f;st(()=>k(b))}return f}return zi(b)?b.v:k(b)}}const zo=10,No=function(){let n=Io([]);return setInterval(()=>{let u=Ho(n);const p=Math.floor(new Date().getTime()/1e3),y=u.filter(x=>x.created_at+zo>p);y.length!==u.length&&n.set(y)},1e3),{add(u){n.update(p=>[...p,{...u,created_at:Math.floor(new Date().getTime()/1e3)}])},remove(u){n.update(p=>p.filter(y=>y.created_at!==u.created_at||y.type!==u.type||y.text!==u.text))},subscribe:n.subscribe}},De=No();function Ts(n){const u=n-1;return u*u*u+1}function Wo(n){return n<.5?4*n*n*n:.5*Math.pow(2*n-2,3)+1}function di(n){const u=typeof n=="string"&&n.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return u?[parseFloat(u[1]),u[2]||"px"]:[n,"px"]}function Uo(n,{delay:u=0,duration:p=400,easing:y=Wo,amount:x=5,opacity:R=0}={}){const D=getComputedStyle(n),i=+D.opacity,a=D.filter==="none"?"":D.filter,l=i*(1-R),[_,o]=di(x);return{delay:u,duration:p,easing:y,css:(c,v)=>`opacity: ${i-l*v}; filter: ${a} blur(${v*_}${o});`}}function Ni(n,{delay:u=0,duration:p=400,easing:y=Ts,x=0,y:R=0,opacity:D=0}={}){const i=getComputedStyle(n),a=+i.opacity,l=i.transform==="none"?"":i.transform,_=a*(1-D),[o,c]=di(x),[v,m]=di(R);return{delay:u,duration:p,easing:y,css:(g,e)=>`
			transform: ${l} translate(${(1-g)*o}${c}, ${(1-g)*v}${m});
			opacity: ${a-_*e}`}}function Rt(n,{delay:u=0,duration:p=400,easing:y=Ts,axis:x="y"}={}){const R=getComputedStyle(n),D=+R.opacity,i=x==="y"?"height":"width",a=parseFloat(R[i]),l=x==="y"?["top","bottom"]:["left","right"],_=l.map(s=>`${s[0].toUpperCase()}${s.slice(1)}`),o=parseFloat(R[`padding${_[0]}`]),c=parseFloat(R[`padding${_[1]}`]),v=parseFloat(R[`margin${_[0]}`]),m=parseFloat(R[`margin${_[1]}`]),g=parseFloat(R[`border${_[0]}Width`]),e=parseFloat(R[`border${_[1]}Width`]);return{delay:u,duration:p,easing:y,css:s=>`overflow: hidden;opacity: ${Math.min(s*20,1)*D};${i}: ${s*a}px;padding-${l[0]}: ${s*o}px;padding-${l[1]}: ${s*c}px;margin-${l[0]}: ${s*v}px;margin-${l[1]}: ${s*m}px;border-${l[0]}-width: ${s*g}px;border-${l[1]}-width: ${s*e}px;min-${i}: 0`}}var $o=G('<div><div class="d-flex"><div class="toast-body"> </div> <button type="button" class="btn-close btn-close-white me-2 m-auto" aria-label="remove message"></button></div></div>'),jo=G('<div class="position-fixed bottom-0 end-0 p-3" style="z-index: 470"></div>');function qo(n,u){Xe(u,!1);let p=oe([]);nt(()=>{De.subscribe(x=>Y(p,x))}),rt();var y=jo();ft(y,5,()=>k(p),ut,(x,R)=>{var D=$o();let i;var a=I(D),l=I(a),_=I(l),o=j(l,2);se(c=>{i=$e(D,1,"toast show align-items-center text-white border-0 mb-2",null,i,c),re(_,k(R).text)},[()=>({"bg-danger":k(R).type==="error","bg-warning":k(R).type==="warning","bg-success":k(R).type==="success","bg-primary":k(R).type==="info"})],ue),fe("click",o,()=>De.remove(k(R))),ct(3,D,()=>Rt),V(x,D)}),V(n,y),Ze()}function Wi(n,u){u&&u!=="lg"&&u!=="sm"&&u!=="xs"?n.style.fontSize=u.replace("x","em"):n.style.fontSize=""}function Ko(n,u,p,y,x,R=1,D="",i=""){let a=1,l=1;x&&(x=="horizontal"?a=-1:x=="vertical"?l=-1:a=l=-1),typeof n=="string"&&(n=parseFloat(n)),typeof u=="string"&&(u=parseFloat(u)),typeof p=="string"&&(p=parseFloat(p));const _=`${u*R}${D}`,o=`${p*R}${D}`;let c=`translate(${_},${o}) scale(${a*n},${l*n})`;return y&&(c+=` rotate(${y}${i})`),c}var Vo=$t('<title class="svelte-bvo74f"> </title>'),Go=$t('<path class="svelte-bvo74f"></path>'),Xo=$t('<path class="svelte-bvo74f"></path><path class="svelte-bvo74f"></path>',1),Zo=$t('<svg aria-hidden="true" role="img" xmlns="http://www.w3.org/2000/svg"><!><g class="svelte-bvo74f"><g class="svelte-bvo74f"><!></g></g></svg>');function de(n,u){Xe(u,!1);const p=oe(),y=oe();let x=he(u,"class",24,()=>{}),R=he(u,"id",24,()=>{}),D=he(u,"style",24,()=>{}),i=he(u,"icon",8),a=he(u,"title",24,()=>{}),l=he(u,"size",24,()=>{}),_=he(u,"color",24,()=>{}),o=he(u,"fw",8,!1),c=he(u,"pull",24,()=>{}),v=he(u,"scale",8,1),m=he(u,"translateX",8,0),g=he(u,"translateY",8,0),e=he(u,"rotate",24,()=>{}),s=he(u,"flip",24,()=>{}),t=he(u,"spin",8,!1),r=he(u,"pulse",8,!1),h=he(u,"primaryColor",8,""),d=he(u,"secondaryColor",8,""),b=he(u,"primaryOpacity",8,1),C=he(u,"secondaryOpacity",8,.4),f=he(u,"swapOpacity",8,!1),S=oe();Ct(()=>(k(S),xt(l()),Wi),()=>{k(S)&&l()&&Wi(k(S),l())}),Ct(()=>xt(i()),()=>{Y(p,i()&&i().icon||[0,0,"",[],""])}),Ct(()=>(xt(v()),xt(m()),xt(g()),xt(e()),xt(s())),()=>{Y(y,Ko(v(),m(),g(),e(),s(),512))}),mr(),rt();var L=er(),T=Be(L);{var A=O=>{var N=Zo();let W;var q=I(N);{var K=U=>{var J=Vo(),X=I(J);se(()=>re(X,a())),V(U,J)};Q(q,U=>{a()&&U(K)})}var E=j(q),B=I(E),M=I(B);{var P=U=>{var J=Go();se(()=>{Pe(J,"d",k(p)[4]),Pe(J,"fill",_()||h()||"currentColor"),Pe(J,"transform",`translate(${k(p)[0]/-2} ${k(p)[1]/-2})`)}),V(U,J)},$=U=>{var J=Xo(),X=Be(J),ae=j(X);se(()=>{Pe(X,"d",k(p)[4][0]),Pe(X,"fill",d()||_()||"currentColor"),Pe(X,"fill-opacity",f()!=!1?b():C()),Pe(X,"transform",`translate(${k(p)[0]/-2} ${k(p)[1]/-2})`),Pe(ae,"d",k(p)[4][1]),Pe(ae,"fill",h()||_()||"currentColor"),Pe(ae,"fill-opacity",f()!=!1?C():b()),Pe(ae,"transform",`translate(${k(p)[0]/-2} ${k(p)[1]/-2})`)}),V(U,J)};Q(M,U=>{typeof k(p)[4]=="string"?U(P):U($,!1)})}Yr(N,U=>Y(S,U),()=>k(S)),se(U=>{Pe(N,"id",R()),W=$e(N,0,`svelte-fa svelte-fa-base ${x()??""}`,"svelte-bvo74f",W,U),kr(N,D()),Pe(N,"viewBox",`0 0 ${k(p)[0]??""} ${k(p)[1]??""}`),Pe(E,"transform",`translate(${k(p)[0]/2} ${k(p)[1]/2})`),Pe(E,"transform-origin",`${k(p)[0]/4} 0`),Pe(B,"transform",k(y))},[()=>({pulse:r(),"svelte-fa-size-lg":l()==="lg","svelte-fa-size-sm":l()==="sm","svelte-fa-size-xs":l()==="xs","svelte-fa-fw":o(),"svelte-fa-pull-left":c()==="left","svelte-fa-pull-right":c()==="right",spin:t()})],ue),V(O,N)};Q(T,O=>{k(p)[4]&&O(A)})}V(n,L),Ze()}/*!
 * Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2024 Fonticons, Inc.
 */const Yo={prefix:"fas",iconName:"right-from-bracket",icon:[512,512,["sign-out-alt"],"f2f5","M377.9 105.9L500.7 228.7c7.2 7.2 11.3 17.1 11.3 27.3s-4.1 20.1-11.3 27.3L377.9 406.1c-6.4 6.4-15 9.9-24 9.9c-18.7 0-33.9-15.2-33.9-33.9l0-62.1-128 0c-17.7 0-32-14.3-32-32l0-64c0-17.7 14.3-32 32-32l128 0 0-62.1c0-18.7 15.2-33.9 33.9-33.9c9 0 17.6 3.6 24 9.9zM160 96L96 96c-17.7 0-32 14.3-32 32l0 256c0 17.7 14.3 32 32 32l64 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-64 0c-53 0-96-43-96-96L0 128C0 75 43 32 96 32l64 0c17.7 0 32 14.3 32 32s-14.3 32-32 32z"]},Jo=Yo,Qo={prefix:"fas",iconName:"laptop-code",icon:[640,512,[],"f5fc","M64 96c0-35.3 28.7-64 64-64l384 0c35.3 0 64 28.7 64 64l0 256-64 0 0-256L128 96l0 256-64 0L64 96zM0 403.2C0 392.6 8.6 384 19.2 384l601.6 0c10.6 0 19.2 8.6 19.2 19.2c0 42.4-34.4 76.8-76.8 76.8L76.8 480C34.4 480 0 445.6 0 403.2zM281 209l-31 31 31 31c9.4 9.4 9.4 24.6 0 33.9s-24.6 9.4-33.9 0l-48-48c-9.4-9.4-9.4-24.6 0-33.9l48-48c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9zM393 175l48 48c9.4 9.4 9.4 24.6 0 33.9l-48 48c-9.4 9.4-24.6 9.4-33.9 0s-9.4-24.6 0-33.9l31-31-31-31c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0z"]},ea={prefix:"fas",iconName:"bars",icon:[448,512,["navicon"],"f0c9","M0 96C0 78.3 14.3 64 32 64l384 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L32 128C14.3 128 0 113.7 0 96zM0 256c0-17.7 14.3-32 32-32l384 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L32 288c-17.7 0-32-14.3-32-32zM448 416c0 17.7-14.3 32-32 32L32 448c-17.7 0-32-14.3-32-32s14.3-32 32-32l384 0c17.7 0 32 14.3 32 32z"]},ta={prefix:"fas",iconName:"square-up-right",icon:[448,512,[8599,"external-link-square-alt"],"f360","M384 32c35.3 0 64 28.7 64 64l0 320c0 35.3-28.7 64-64 64L64 480c-35.3 0-64-28.7-64-64L0 96C0 60.7 28.7 32 64 32l320 0zM160 160c-6.5 0-12.3 3.9-14.8 9.9s-1.1 12.9 3.5 17.4l40 40-71 71C114 302 112 306.9 112 312s2 10 5.7 13.7l36.7 36.7c3.6 3.6 8.5 5.7 13.7 5.7s10-2 13.7-5.7l71-71 40 40c4.6 4.6 11.5 5.9 17.4 3.5s9.9-8.3 9.9-14.8l0-144c0-8.8-7.2-16-16-16l-144 0z"]},ra=ta,ia={prefix:"fas",iconName:"circle-chevron-down",icon:[512,512,["chevron-circle-down"],"f13a","M256 0a256 256 0 1 0 0 512A256 256 0 1 0 256 0zM135 241c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0l87 87 87-87c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9L273 345c-9.4 9.4-24.6 9.4-33.9 0L135 241z"]},sa=ia,Bs={prefix:"fas",iconName:"memory",icon:[576,512,[],"f538","M64 64C28.7 64 0 92.7 0 128l0 7.4c0 6.8 4.4 12.6 10.1 16.3C23.3 160.3 32 175.1 32 192s-8.7 31.7-21.9 40.3C4.4 236 0 241.8 0 248.6L0 320l576 0 0-71.4c0-6.8-4.4-12.6-10.1-16.3C552.7 223.7 544 208.9 544 192s8.7-31.7 21.9-40.3c5.7-3.7 10.1-9.5 10.1-16.3l0-7.4c0-35.3-28.7-64-64-64L64 64zM576 352L0 352l0 64c0 17.7 14.3 32 32 32l48 0 0-32c0-8.8 7.2-16 16-16s16 7.2 16 16l0 32 96 0 0-32c0-8.8 7.2-16 16-16s16 7.2 16 16l0 32 96 0 0-32c0-8.8 7.2-16 16-16s16 7.2 16 16l0 32 96 0 0-32c0-8.8 7.2-16 16-16s16 7.2 16 16l0 32 48 0c17.7 0 32-14.3 32-32l0-64zM192 160l0 64c0 17.7-14.3 32-32 32s-32-14.3-32-32l0-64c0-17.7 14.3-32 32-32s32 14.3 32 32zm128 0l0 64c0 17.7-14.3 32-32 32s-32-14.3-32-32l0-64c0-17.7 14.3-32 32-32s32 14.3 32 32zm128 0l0 64c0 17.7-14.3 32-32 32s-32-14.3-32-32l0-64c0-17.7 14.3-32 32-32s32 14.3 32 32z"]},na={prefix:"fas",iconName:"folder",icon:[512,512,[128193,128447,61716,"folder-blank"],"f07b","M64 480H448c35.3 0 64-28.7 64-64V160c0-35.3-28.7-64-64-64H288c-10.1 0-19.6-4.7-25.6-12.8L243.2 57.6C231.1 41.5 212.1 32 192 32H64C28.7 32 0 60.7 0 96V416c0 35.3 28.7 64 64 64z"]},oa={prefix:"fas",iconName:"box",icon:[448,512,[128230],"f466","M50.7 58.5L0 160l208 0 0-128L93.7 32C75.5 32 58.9 42.3 50.7 58.5zM240 160l208 0L397.3 58.5C389.1 42.3 372.5 32 354.3 32L240 32l0 128zm208 32L0 192 0 416c0 35.3 28.7 64 64 64l320 0c35.3 0 64-28.7 64-64l0-224z"]},aa={prefix:"fas",iconName:"maximize",icon:[512,512,["expand-arrows-alt"],"f31e","M200 32L56 32C42.7 32 32 42.7 32 56l0 144c0 9.7 5.8 18.5 14.8 22.2s19.3 1.7 26.2-5.2l40-40 79 79-79 79L73 295c-6.9-6.9-17.2-8.9-26.2-5.2S32 302.3 32 312l0 144c0 13.3 10.7 24 24 24l144 0c9.7 0 18.5-5.8 22.2-14.8s1.7-19.3-5.2-26.2l-40-40 79-79 79 79-40 40c-6.9 6.9-8.9 17.2-5.2 26.2s12.5 14.8 22.2 14.8l144 0c13.3 0 24-10.7 24-24l0-144c0-9.7-5.8-18.5-14.8-22.2s-19.3-1.7-26.2 5.2l-40 40-79-79 79-79 40 40c6.9 6.9 17.2 8.9 26.2 5.2s14.8-12.5 14.8-22.2l0-144c0-13.3-10.7-24-24-24L312 32c-9.7 0-18.5 5.8-22.2 14.8s-1.7 19.3 5.2 26.2l40 40-79 79-79-79 40-40c6.9-6.9 8.9-17.2 5.2-26.2S209.7 32 200 32z"]},Ms=aa,la={prefix:"fas",iconName:"server",icon:[512,512,[],"f233","M64 32C28.7 32 0 60.7 0 96l0 64c0 35.3 28.7 64 64 64l384 0c35.3 0 64-28.7 64-64l0-64c0-35.3-28.7-64-64-64L64 32zm280 72a24 24 0 1 1 0 48 24 24 0 1 1 0-48zm48 24a24 24 0 1 1 48 0 24 24 0 1 1 -48 0zM64 288c-35.3 0-64 28.7-64 64l0 64c0 35.3 28.7 64 64 64l384 0c35.3 0 64-28.7 64-64l0-64c0-35.3-28.7-64-64-64L64 288zm280 72a24 24 0 1 1 0 48 24 24 0 1 1 0-48zm56 24a24 24 0 1 1 48 0 24 24 0 1 1 -48 0z"]},Os={prefix:"fas",iconName:"microchip",icon:[512,512,[],"f2db","M176 24c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 40c-35.3 0-64 28.7-64 64l-40 0c-13.3 0-24 10.7-24 24s10.7 24 24 24l40 0 0 56-40 0c-13.3 0-24 10.7-24 24s10.7 24 24 24l40 0 0 56-40 0c-13.3 0-24 10.7-24 24s10.7 24 24 24l40 0c0 35.3 28.7 64 64 64l0 40c0 13.3 10.7 24 24 24s24-10.7 24-24l0-40 56 0 0 40c0 13.3 10.7 24 24 24s24-10.7 24-24l0-40 56 0 0 40c0 13.3 10.7 24 24 24s24-10.7 24-24l0-40c35.3 0 64-28.7 64-64l40 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-40 0 0-56 40 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-40 0 0-56 40 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-40 0c0-35.3-28.7-64-64-64l0-40c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 40-56 0 0-40c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 40-56 0 0-40zM160 128l192 0c17.7 0 32 14.3 32 32l0 192c0 17.7-14.3 32-32 32l-192 0c-17.7 0-32-14.3-32-32l0-192c0-17.7 14.3-32 32-32zm192 32l-192 0 0 192 192 0 0-192z"]},ca={prefix:"fas",iconName:"circle-chevron-up",icon:[512,512,["chevron-circle-up"],"f139","M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM377 271c9.4 9.4 9.4 24.6 0 33.9s-24.6 9.4-33.9 0l-87-87-87 87c-9.4 9.4-24.6 9.4-33.9 0s-9.4-24.6 0-33.9L239 167c9.4-9.4 24.6-9.4 33.9 0L377 271z"]},ha=ca,Ps={prefix:"fas",iconName:"box-open",icon:[640,512,[],"f49e","M58.9 42.1c3-6.1 9.6-9.6 16.3-8.7L320 64 564.8 33.4c6.7-.8 13.3 2.7 16.3 8.7l41.7 83.4c9 17.9-.6 39.6-19.8 45.1L439.6 217.3c-13.9 4-28.8-1.9-36.2-14.3L320 64 236.6 203c-7.4 12.4-22.3 18.3-36.2 14.3L37.1 170.6c-19.3-5.5-28.8-27.2-19.8-45.1L58.9 42.1zM321.1 128l54.9 91.4c14.9 24.8 44.6 36.6 72.5 28.6L576 211.6l0 167c0 22-15 41.2-36.4 46.6l-204.1 51c-10.2 2.6-20.9 2.6-31 0l-204.1-51C79 419.7 64 400.5 64 378.5l0-167L191.6 248c27.8 8 57.6-3.8 72.5-28.6L318.9 128l2.2 0z"]},da={prefix:"fas",iconName:"arrows-rotate",icon:[512,512,[128472,"refresh","sync"],"f021","M105.1 202.6c7.7-21.8 20.2-42.3 37.8-59.8c62.5-62.5 163.8-62.5 226.3 0L386.3 160 352 160c-17.7 0-32 14.3-32 32s14.3 32 32 32l111.5 0c0 0 0 0 0 0l.4 0c17.7 0 32-14.3 32-32l0-112c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 35.2L414.4 97.6c-87.5-87.5-229.3-87.5-316.8 0C73.2 122 55.6 150.7 44.8 181.4c-5.9 16.7 2.9 34.9 19.5 40.8s34.9-2.9 40.8-19.5zM39 289.3c-5 1.5-9.8 4.2-13.7 8.2c-4 4-6.7 8.8-8.1 14c-.3 1.2-.6 2.5-.8 3.8c-.3 1.7-.4 3.4-.4 5.1L16 432c0 17.7 14.3 32 32 32s32-14.3 32-32l0-35.1 17.6 17.5c0 0 0 0 0 0c87.5 87.4 229.3 87.4 316.7 0c24.4-24.4 42.1-53.1 52.9-83.8c5.9-16.7-2.9-34.9-19.5-40.8s-34.9 2.9-40.8 19.5c-7.7 21.8-20.2 42.3-37.8 59.8c-62.5 62.5-163.8 62.5-226.3 0l-.1-.1L125.6 352l34.4 0c17.7 0 32-14.3 32-32s-14.3-32-32-32L48.4 288c-1.6 0-3.2 .1-4.8 .3s-3.1 .5-4.6 1z"]},Is=da,ua={prefix:"fas",iconName:"house-user",icon:[576,512,["home-user"],"e1b0","M575.8 255.5c0 18-15 32.1-32 32.1l-32 0 .7 160.2c.2 35.5-28.5 64.3-64 64.3l-320.4 0c-35.3 0-64-28.7-64-64l0-160.4-32 0c-18 0-32-14-32-32.1c0-9 3-17 10-24L266.4 8c7-7 15-8 22-8s15 2 21 7L564.8 231.5c8 7 12 15 11 24zM352 224a64 64 0 1 0 -128 0 64 64 0 1 0 128 0zm-96 96c-44.2 0-80 35.8-80 80c0 8.8 7.2 16 16 16l192 0c8.8 0 16-7.2 16-16c0-44.2-35.8-80-80-80l-64 0z"]},fa={prefix:"fas",iconName:"tags",icon:[512,512,[],"f02c","M345 39.1L472.8 168.4c52.4 53 52.4 138.2 0 191.2L360.8 472.9c-9.3 9.4-24.5 9.5-33.9 .2s-9.5-24.5-.2-33.9L438.6 325.9c33.9-34.3 33.9-89.4 0-123.7L310.9 72.9c-9.3-9.4-9.2-24.6 .2-33.9s24.6-9.2 33.9 .2zM0 229.5L0 80C0 53.5 21.5 32 48 32l149.5 0c17 0 33.3 6.7 45.3 18.7l168 168c25 25 25 65.5 0 90.5L277.3 442.7c-25 25-65.5 25-90.5 0l-168-168C6.7 262.7 0 246.5 0 229.5zM144 144a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z"]},_a={prefix:"fas",iconName:"terminal",icon:[576,512,[],"f120","M9.4 86.6C-3.1 74.1-3.1 53.9 9.4 41.4s32.8-12.5 45.3 0l192 192c12.5 12.5 12.5 32.8 0 45.3l-192 192c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L178.7 256 9.4 86.6zM256 416l288 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-288 0c-17.7 0-32-14.3-32-32s14.3-32 32-32z"]},va={prefix:"fas",iconName:"tag",icon:[448,512,[127991],"f02b","M0 80L0 229.5c0 17 6.7 33.3 18.7 45.3l176 176c25 25 65.5 25 90.5 0L418.7 317.3c25-25 25-65.5 0-90.5l-176-176c-12-12-28.3-18.7-45.3-18.7L48 32C21.5 32 0 53.5 0 80zm112 32a32 32 0 1 1 0 64 32 32 0 1 1 0-64z"]},pa={prefix:"fas",iconName:"hard-drive",icon:[512,512,[128436,"hdd"],"f0a0","M0 96C0 60.7 28.7 32 64 32l384 0c35.3 0 64 28.7 64 64l0 184.4c-17-15.2-39.4-24.4-64-24.4L64 256c-24.6 0-47 9.2-64 24.4L0 96zM64 288l384 0c35.3 0 64 28.7 64 64l0 64c0 35.3-28.7 64-64 64L64 480c-35.3 0-64-28.7-64-64l0-64c0-35.3 28.7-64 64-64zM320 416a32 32 0 1 0 0-64 32 32 0 1 0 0 64zm128-32a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z"]},ga=pa,ma={prefix:"fas",iconName:"gear",icon:[512,512,[9881,"cog"],"f013","M495.9 166.6c3.2 8.7 .5 18.4-6.4 24.6l-43.3 39.4c1.1 8.3 1.7 16.8 1.7 25.4s-.6 17.1-1.7 25.4l43.3 39.4c6.9 6.2 9.6 15.9 6.4 24.6c-4.4 11.9-9.7 23.3-15.8 34.3l-4.7 8.1c-6.6 11-14 21.4-22.1 31.2c-5.9 7.2-15.7 9.6-24.5 6.8l-55.7-17.7c-13.4 10.3-28.2 18.9-44 25.4l-12.5 57.1c-2 9.1-9 16.3-18.2 17.8c-13.8 2.3-28 3.5-42.5 3.5s-28.7-1.2-42.5-3.5c-9.2-1.5-16.2-8.7-18.2-17.8l-12.5-57.1c-15.8-6.5-30.6-15.1-44-25.4L83.1 425.9c-8.8 2.8-18.6 .3-24.5-6.8c-8.1-9.8-15.5-20.2-22.1-31.2l-4.7-8.1c-6.1-11-11.4-22.4-15.8-34.3c-3.2-8.7-.5-18.4 6.4-24.6l43.3-39.4C64.6 273.1 64 264.6 64 256s.6-17.1 1.7-25.4L22.4 191.2c-6.9-6.2-9.6-15.9-6.4-24.6c4.4-11.9 9.7-23.3 15.8-34.3l4.7-8.1c6.6-11 14-21.4 22.1-31.2c5.9-7.2 15.7-9.6 24.5-6.8l55.7 17.7c13.4-10.3 28.2-18.9 44-25.4l12.5-57.1c2-9.1 9-16.3 18.2-17.8C227.3 1.2 241.5 0 256 0s28.7 1.2 42.5 3.5c9.2 1.5 16.2 8.7 18.2 17.8l12.5 57.1c15.8 6.5 30.6 15.1 44 25.4l55.7-17.7c8.8-2.8 18.6-.3 24.5 6.8c8.1 9.8 15.5 20.2 22.1 31.2l4.7 8.1c6.1 11 11.4 22.4 15.8 34.3zM256 336a80 80 0 1 0 0-160 80 80 0 1 0 0 160z"]},Sa=ma,ba={prefix:"fas",iconName:"clock",icon:[512,512,[128339,"clock-four"],"f017","M256 0a256 256 0 1 1 0 512A256 256 0 1 1 256 0zM232 120l0 136c0 8 4 15.5 10.7 20l96 64c11 7.4 25.9 4.4 33.3-6.7s4.4-25.9-6.7-33.3L280 243.2 280 120c0-13.3-10.7-24-24-24s-24 10.7-24 24z"]},Ca={prefix:"fas",iconName:"network-wired",icon:[640,512,[],"f6ff","M256 64l128 0 0 64-128 0 0-64zM240 0c-26.5 0-48 21.5-48 48l0 96c0 26.5 21.5 48 48 48l48 0 0 32L32 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l96 0 0 32-48 0c-26.5 0-48 21.5-48 48l0 96c0 26.5 21.5 48 48 48l160 0c26.5 0 48-21.5 48-48l0-96c0-26.5-21.5-48-48-48l-48 0 0-32 256 0 0 32-48 0c-26.5 0-48 21.5-48 48l0 96c0 26.5 21.5 48 48 48l160 0c26.5 0 48-21.5 48-48l0-96c0-26.5-21.5-48-48-48l-48 0 0-32 96 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-256 0 0-32 48 0c26.5 0 48-21.5 48-48l0-96c0-26.5-21.5-48-48-48L240 0zM96 448l0-64 128 0 0 64L96 448zm320-64l128 0 0 64-128 0 0-64z"]},ya={prefix:"fas",iconName:"download",icon:[512,512,[],"f019","M288 32c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 242.7-73.4-73.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l128 128c12.5 12.5 32.8 12.5 45.3 0l128-128c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L288 274.7 288 32zM64 352c-35.3 0-64 28.7-64 64l0 32c0 35.3 28.7 64 64 64l384 0c35.3 0 64-28.7 64-64l0-32c0-35.3-28.7-64-64-64l-101.5 0-45.3 45.3c-25 25-65.5 25-90.5 0L165.5 352 64 352zm368 56a24 24 0 1 1 0 48 24 24 0 1 1 0-48z"]},wa={prefix:"fas",iconName:"house",icon:[576,512,[127968,63498,63500,"home","home-alt","home-lg-alt"],"f015","M575.8 255.5c0 18-15 32.1-32 32.1l-32 0 .7 160.2c0 2.7-.2 5.4-.5 8.1l0 16.2c0 22.1-17.9 40-40 40l-16 0c-1.1 0-2.2 0-3.3-.1c-1.4 .1-2.8 .1-4.2 .1L416 512l-24 0c-22.1 0-40-17.9-40-40l0-24 0-64c0-17.7-14.3-32-32-32l-64 0c-17.7 0-32 14.3-32 32l0 64 0 24c0 22.1-17.9 40-40 40l-24 0-31.9 0c-1.5 0-3-.1-4.5-.2c-1.2 .1-2.4 .2-3.6 .2l-16 0c-22.1 0-40-17.9-40-40l0-112c0-.9 0-1.9 .1-2.8l0-69.7-32 0c-18 0-32-14-32-32.1c0-9 3-17 10-24L266.4 8c7-7 15-8 22-8s15 2 21 7L564.8 231.5c8 7 12 15 11 24z"]},Ea=wa,xa={prefix:"fas",iconName:"stop",icon:[384,512,[9209],"f04d","M0 128C0 92.7 28.7 64 64 64H320c35.3 0 64 28.7 64 64V384c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V128z"]},ka={prefix:"fas",iconName:"sun",icon:[512,512,[9728],"f185","M361.5 1.2c5 2.1 8.6 6.6 9.6 11.9L391 121l107.9 19.8c5.3 1 9.8 4.6 11.9 9.6s1.5 10.7-1.6 15.2L446.9 256l62.3 90.3c3.1 4.5 3.7 10.2 1.6 15.2s-6.6 8.6-11.9 9.6L391 391 371.1 498.9c-1 5.3-4.6 9.8-9.6 11.9s-10.7 1.5-15.2-1.6L256 446.9l-90.3 62.3c-4.5 3.1-10.2 3.7-15.2 1.6s-8.6-6.6-9.6-11.9L121 391 13.1 371.1c-5.3-1-9.8-4.6-11.9-9.6s-1.5-10.7 1.6-15.2L65.1 256 2.8 165.7c-3.1-4.5-3.7-10.2-1.6-15.2s6.6-8.6 11.9-9.6L121 121 140.9 13.1c1-5.3 4.6-9.8 9.6-11.9s10.7-1.5 15.2 1.6L256 65.1 346.3 2.8c4.5-3.1 10.2-3.7 15.2-1.6zM160 256a96 96 0 1 1 192 0 96 96 0 1 1 -192 0zm224 0a128 128 0 1 0 -256 0 128 128 0 1 0 256 0z"]},La={prefix:"fas",iconName:"file",icon:[384,512,[128196,128459,61462],"f15b","M0 64C0 28.7 28.7 0 64 0L224 0l0 128c0 17.7 14.3 32 32 32l128 0 0 288c0 35.3-28.7 64-64 64L64 512c-35.3 0-64-28.7-64-64L0 64zm384 64l-128 0L256 0 384 128z"]},Da={prefix:"fas",iconName:"play",icon:[384,512,[9654],"f04b","M73 39c-14.8-9.1-33.4-9.4-48.5-.9S0 62.6 0 80L0 432c0 17.4 9.4 33.4 24.5 41.9s33.7 8.1 48.5-.9L361 297c14.3-8.7 23-24.2 23-41s-8.7-32.2-23-41L73 39z"]},Ra={prefix:"fas",iconName:"plus",icon:[448,512,[10133,61543,"add"],"2b","M256 80c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 144L48 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l144 0 0 144c0 17.7 14.3 32 32 32s32-14.3 32-32l0-144 144 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-144 0 0-144z"]},Aa={prefix:"fas",iconName:"moon",icon:[384,512,[127769,9214],"f186","M223.5 32C100 32 0 132.3 0 256S100 480 223.5 480c60.6 0 115.5-24.2 155.8-63.4c5-4.9 6.3-12.5 3.1-18.7s-10.1-9.7-17-8.5c-9.8 1.7-19.8 2.6-30.1 2.6c-96.9 0-175.5-78.8-175.5-176c0-65.8 36-123.1 89.3-153.3c6.1-3.5 9.2-10.5 7.7-17.3s-7.3-11.9-14.3-12.5c-6.3-.5-12.6-.8-19-.8z"]},Ta={prefix:"fas",iconName:"rectangle-xmark",icon:[512,512,[62164,"rectangle-times","times-rectangle","window-close"],"f410","M64 32C28.7 32 0 60.7 0 96L0 416c0 35.3 28.7 64 64 64l384 0c35.3 0 64-28.7 64-64l0-320c0-35.3-28.7-64-64-64L64 32zM175 175c9.4-9.4 24.6-9.4 33.9 0l47 47 47-47c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9l-47 47 47 47c9.4 9.4 9.4 24.6 0 33.9s-24.6 9.4-33.9 0l-47-47-47 47c-9.4 9.4-24.6 9.4-33.9 0s-9.4-24.6 0-33.9l47-47-47-47c-9.4-9.4-9.4-24.6 0-33.9z"]},Ba=Ta,Ma={prefix:"fas",iconName:"turn-up",icon:[384,512,[10548,"level-up-alt"],"f3bf","M350 177.5c3.8-8.8 2-19-4.6-26l-136-144C204.9 2.7 198.6 0 192 0s-12.9 2.7-17.4 7.5l-136 144c-6.6 7-8.4 17.2-4.6 26s12.5 14.5 22 14.5l88 0 0 192c0 17.7-14.3 32-32 32l-80 0c-17.7 0-32 14.3-32 32l0 32c0 17.7 14.3 32 32 32l80 0c70.7 0 128-57.3 128-128l0-192 88 0c9.6 0 18.2-5.7 22-14.5z"]},Oa=Ma;var Pa=G('<button type="button" class="btn mx-2" title="Switch Theme"><!></button>');function Ia(n,u){Xe(u,!1);let p=oe();function y(){k(p)==="light"?(Y(p,"dark"),document.querySelector("html").classList.add("dark")):(Y(p,"light"),document.querySelector("html").classList.remove("dark"))}nt(()=>{Y(p,"dark"),k(p)==="dark"&&document.querySelector("html").classList.add("dark")}),rt();var x=Pa(),R=I(x);{var D=a=>{de(a,{icon:Aa,color:"#333",size:"2x"})},i=a=>{de(a,{icon:ka,color:"#333",size:"2x"})};Q(R,a=>{k(p)==="dark"?a(D):a(i,!1)})}fe("click",x,y),V(n,x),Ze()}var Ha=$t('<svg class="bi flex-shrink-0 me-2" width="24" height="24" role="img" aria-label="Danger:"><use xlink:href="#exclamation-triangle-fill"></use></svg>'),Fa=$t('<svg class="bi flex-shrink-0 me-2" width="24" height="24" role="img" aria-label="Success:"><use xlink:href="#check-circle-fill"></use></svg>'),za=$t('<svg class="bi flex-shrink-0 me-2" width="24" height="24" role="img" aria-label="Info:"><use xlink:href="#info-fill"></use></svg>'),Na=G("<strong>Error:</strong>"),Wa=G('<button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>'),Ua=G('<div role="alert"><!> <div><!> <!> <!></div></div>'),$a=G('<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><symbol id="check-circle-fill" fill="currentColor" viewBox="0 0 16 16"><path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"></path></symbol><symbol id="info-fill" fill="currentColor" viewBox="0 0 16 16"><path d="M8 16A8 8 0 1 0 8 0akeyof Message8 8 0 0 0 0 16zm.93-9.412-1 4.705c-.07.34.029.533.304.533.194 0 .487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703 0-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381 2.29-.287zM8 5.5a1 1 0 1 1 0-2 1 1 0 0 1 0 2z"></path></symbol><symbol id="exclamation-triangle-fill" fill="currentColor" viewBox="0 0 16 16"><path d="M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5zm.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"></path></symbol></svg> <!>',1);function ja(n,u){let p=he(u,"type",8),y=he(u,"dismissible",8,!1),x=oe(!1);var R=$a(),D=j(Be(R),2);{var i=a=>{var l=Ua();let _;var o=I(l);{var c=h=>{var d=Ha();V(h,d)},v=(h,d)=>{{var b=f=>{var S=Fa();V(f,S)},C=(f,S)=>{{var L=T=>{var A=za();V(T,A)};Q(f,T=>{p()==="info"&&T(L)},S)}};Q(h,f=>{p()==="success"?f(b):f(C,!1)},d)}};Q(o,h=>{p()==="error"||p()==="warning"?h(c):h(v,!1)})}var m=j(o,2),g=I(m);{var e=h=>{var d=Na();V(h,d)};Q(g,h=>{p()==="error"&&h(e)})}var s=j(g,2);Hr(s,u,"default",{},null);var t=j(s,2);{var r=h=>{var d=Wa();fe("click",d,()=>Y(x,!0)),V(h,d)};Q(t,h=>{y()&&h(r)})}se(h=>_=$e(l,1,"alert d-flex align-items-center",null,_,h),[()=>({"alert-danger":p()==="error","alert-warning":p()==="warning","alert-success":p()==="success","alert-info":p()==="info","alert-dismissible":y()})],ue),ct(3,l,()=>Rt),V(a,l)};Q(D,a=>{k(x)||a(i)})}V(n,R)}function qa(n){switch(n.request){case"login":return`{"response": "login", "payload": {"username": "${n.payload.username}"}}`;case"get_system_info":return'{"response": "get_system_info", "payload": {"engine_version": "Docker 20.10.7", "containers": {"total": 178, "running": 170, "stopped": 0}, "os": "Ubuntu 20.04.3 LTS", "cpus": 24, "mem": 31277850624}}';case"get_container_list":return`{"response": "get_container_list", "payload": [
                {"id": "2b7eb6b9d2f7fd2dd26738500a81a16310f78e46eea2f9c2a27ed876d85d8586", "name": "CaaSa Demo", "namespace": null, "status": "running", "permissions": ["info", "info-annotations", "procs", "files-read", "files-write", "files", "logs", "state", "term"]},
                {"id": "2b7eb6b9d2f7fd2dd26738500a81a16310f78e46eea2f9c2a27ed876d85d8587", "name": "Backend", "namespace": "Cool Web App", "status": "running", "permissions": ["info", "info-annotations", "procs", "files-read", "files-write", "files", "logs", "state", "term"]},
                {"id": "2b7eb6b9d2f7fd2dd26738500a81a16310f78e46eea2f9c2a27ed876d85d8588", "name": "Gateway", "namespace": "Cool Web App", "status": "running", "permissions": ["info", "info-annotations", "procs", "files-read", "files-write", "files", "logs", "state", "term"]}
               ]}`;case"get_processes":return'{"response": "get_processes", "payload": [{"pid": "45756", "ppid": "45733", "%cpu": "0.0", "%mem": "0.0", "user": "root", "stime": "16:24", "command": "nginx: master process nginx -g daemon off;", "level": 0}, {"pid": "45822", "ppid": "45756", "%cpu": "0.0", "%mem": "0.0", "user": "systemd+", "stime": "16:24", "command": "nginx: worker process", "level": 1}, {"pid": "45823", "ppid": "45756", "%cpu": "0.0", "%mem": "0.0", "user": "systemd+", "stime": "16:24", "command": "nginx: worker process", "level": 1}, {"pid": "45824", "ppid": "45756", "%cpu": "0.0", "%mem": "0.0", "user": "systemd+", "stime": "16:24", "command": "nginx: worker process", "level": 1}, {"pid": "45825", "ppid": "45756", "%cpu": "0.0", "%mem": "0.0", "user": "systemd+", "stime": "16:24", "command": "nginx: worker process", "level": 1}, {"pid": "45826", "ppid": "45756", "%cpu": "0.0", "%mem": "0.0", "user": "systemd+", "stime": "16:24", "command": "nginx: worker process", "level": 1}, {"pid": "45827", "ppid": "45756", "%cpu": "0.0", "%mem": "0.0", "user": "systemd+", "stime": "16:24", "command": "nginx: worker process", "level": 1}, {"pid": "45828", "ppid": "45756", "%cpu": "0.0", "%mem": "0.0", "user": "systemd+", "stime": "16:24", "command": "nginx: worker process", "level": 1}, {"pid": "45829", "ppid": "45756", "%cpu": "0.0", "%mem": "0.0", "user": "systemd+", "stime": "16:24", "command": "nginx: worker process", "level": 1}, {"pid": "45830", "ppid": "45756", "%cpu": "0.0", "%mem": "0.0", "user": "systemd+", "stime": "16:24", "command": "nginx: worker process", "level": 1}, {"pid": "45831", "ppid": "45756", "%cpu": "0.0", "%mem": "0.0", "user": "systemd+", "stime": "16:24", "command": "nginx: worker process", "level": 1}, {"pid": "45832", "ppid": "45756", "%cpu": "0.0", "%mem": "0.0", "user": "systemd+", "stime": "16:24", "command": "nginx: worker process", "level": 1}, {"pid": "45833", "ppid": "45756", "%cpu": "0.0", "%mem": "0.0", "user": "systemd+", "stime": "16:24", "command": "nginx: worker process", "level": 1}, {"pid": "46825", "ppid": "45733", "%cpu": "0.0", "%mem": "0.0", "user": "root", "stime": "16:34", "command": "sh", "level": 0}]}';case"get_container_info":const u={"2b7eb6b9d2f7fd2dd26738500a81a16310f78e46eea2f9c2a27ed876d85d8586":"/caasa_demo","2b7eb6b9d2f7fd2dd26738500a81a16310f78e46eea2f9c2a27ed876d85d8587":"/cool_web_app_backend_1","2b7eb6b9d2f7fd2dd26738500a81a16310f78e46eea2f9c2a27ed876d85d8588":"/cool_web_app_gateway_1"};return`{"response": "get_container_info", "payload": {"id": "${n.payload.container_id}", "name": "${u[n.payload.container_id]}", "status": "running", "command": "/docker-entrypoint.sh nginx -g daemon off;", "created_at": "2021-12-02T10:33:16.628618832Z", "started_at": "2021-12-02T10:33:17.015866729Z", "finished_at": "0001-01-01T00:00:00Z", "crashes": 0, "env": {"PATH": "/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin", "NGINX_VERSION": "1.21.1", "NJS_VERSION": "0.6.1", "PKG_RELEASE": "1"}, "labels": {"caasa.admin.full": "user1,user2", "maintainer": "NGINX Docker Maintainers <docker-maint@nginx.com>"}, "image": {"name": "nginx:alpine", "hash": "sha256:b9e2356ea1be9452f3777a587b0b6a30bc16c295fe6190eda6a0776522f27439"}, "mem": {"used": 10452992, "max_used": 19345408, "total": 52428800}, "cpu": {"perc": ${Math.random()*10}}, "net": {"rx_bytes": 18201, "tx_bytes": 0}, "ports": ["80/tcp"]}}`;case"get_container_logs":return n.payload.onlynew?'{"response": "get_container_logs", "payload":[]}':'{"response": "get_container_logs", "payload": ["2021-12-02T10:33:17.021946340Z /docker-entrypoint.sh: /docker-entrypoint.d/ is not empty, will attempt to perform configuration","2021-12-02T10:33:17.021988550Z /docker-entrypoint.sh: Looking for shell scripts in /docker-entrypoint.d/","2021-12-02T10:33:17.023417432Z /docker-entrypoint.sh: Launching /docker-entrypoint.d/10-listen-on-ipv6-by-default.sh","2021-12-02T10:33:17.031231257Z 10-listen-on-ipv6-by-default.sh: info: Getting the checksum of /etc/nginx/conf.d/default.conf","2021-12-02T10:33:17.055742664Z 10-listen-on-ipv6-by-default.sh: info: Enabled listen on IPv6 in /etc/nginx/conf.d/default.conf","2021-12-02T10:33:17.056041305Z /docker-entrypoint.sh: Launching /docker-entrypoint.d/20-envsubst-on-templates.sh","2021-12-02T10:33:17.059979717Z /docker-entrypoint.sh: Launching /docker-entrypoint.d/30-tune-worker-processes.sh","2021-12-02T10:33:17.062059371Z /docker-entrypoint.sh: Configuration complete; ready for start up","2021-12-02T10:33:17.074027144Z 2021/12/02 10:33:17 [notice] 1#1: using the \\"epoll\\" event method","2021-12-02T10:33:17.074056600Z 2021/12/02 10:33:17 [notice] 1#1: nginx/1.21.1","2021-12-02T10:33:17.074063653Z 2021/12/02 10:33:17 [notice] 1#1: built by gcc 10.3.1 20210424 (Alpine 10.3.1_git20210424) ","2021-12-02T10:33:17.074069845Z 2021/12/02 10:33:17 [notice] 1#1: OS: Linux 5.11.0-40-generic","2021-12-02T10:33:17.074075475Z 2021/12/02 10:33:17 [notice] 1#1: getrlimit(RLIMIT_NOFILE): 1048576:1048576","2021-12-02T10:33:17.074245905Z 2021/12/02 10:33:17 [notice] 1#1: start worker processes","2021-12-02T10:33:17.074276953Z 2021/12/02 10:33:17 [notice] 1#1: start worker process 32","2021-12-02T10:33:17.074379486Z 2021/12/02 10:33:17 [notice] 1#1: start worker process 33","2021-12-02T10:33:17.074401427Z 2021/12/02 10:33:17 [notice] 1#1: start worker process 34","2021-12-02T10:33:17.074513127Z 2021/12/02 10:33:17 [notice] 1#1: start worker process 35","2021-12-02T10:33:17.074601242Z 2021/12/02 10:33:17 [notice] 1#1: start worker process 36","2021-12-02T10:33:17.074666745Z 2021/12/02 10:33:17 [notice] 1#1: start worker process 37","2021-12-02T10:33:17.074817979Z 2021/12/02 10:33:17 [notice] 1#1: start worker process 38","2021-12-02T10:33:17.074873423Z 2021/12/02 10:33:17 [notice] 1#1: start worker process 39","2021-12-02T10:33:17.075007344Z 2021/12/02 10:33:17 [notice] 1#1: start worker process 40","2021-12-02T10:33:17.075141746Z 2021/12/02 10:33:17 [notice] 1#1: start worker process 41","2021-12-02T10:33:17.075279715Z 2021/12/02 10:33:17 [notice] 1#1: start worker process 42","2021-12-02T10:33:17.075393118Z 2021/12/02 10:33:17 [notice] 1#1: start worker process 43"]}';case"get_filesystem_info":return'{"response": "get_filesystem_info", "payload": {"workdir": "", "mounts": [{"type": "bind", "destination": "/etc/ssl/certs", "readonly": true, "source": "/etc/ssl/certs"}]}}';case"get_directory_list":return n.payload.path===""||n.payload.path==="/"?'{"response": "get_directory_list", "payload": {"entries": [{"type": "f", "permissions": "rwxr-xr-x", "owner": "root", "group": "root", "filesize": "0B", "modtime": "2021-12-02 16:19:13", "name": ".dockerenv"}, {"type": "d", "permissions": "rwxr-xr-x", "owner": "root", "group": "root", "filesize": "4.0KB", "modtime": "2021-06-15 14:34:40", "name": "bin"}, {"type": "d", "permissions": "rwxr-xr-x", "owner": "root", "group": "root", "filesize": "360B", "modtime": "2021-12-02 16:19:13", "name": "dev"}, {"type": "d", "permissions": "rwxr-xr-x", "owner": "root", "group": "root", "filesize": "4.0KB", "modtime": "2021-07-06 19:40:27", "name": "docker-entrypoint.d"}, {"type": "f", "permissions": "rwxrwxr-x", "owner": "root", "group": "root", "filesize": "1.2KB", "modtime": "2021-07-06 19:40:16", "name": "docker-entrypoint.sh"}, {"type": "d", "permissions": "rwxr-xr-x", "owner": "root", "group": "root", "filesize": "4.0KB", "modtime": "2021-12-02 16:19:13", "name": "etc"}, {"type": "d", "permissions": "rwxr-xr-x", "owner": "root", "group": "root", "filesize": "4.0KB", "modtime": "2021-06-15 14:34:40", "name": "home"}, {"type": "d", "permissions": "rwxr-xr-x", "owner": "root", "group": "root", "filesize": "4.0KB", "modtime": "2021-06-15 14:34:40", "name": "lib"}, {"type": "d", "permissions": "rwxr-xr-x", "owner": "root", "group": "root", "filesize": "4.0KB", "modtime": "2021-06-15 14:34:40", "name": "media"}, {"type": "d", "permissions": "rwxr-xr-x", "owner": "root", "group": "root", "filesize": "4.0KB", "modtime": "2021-06-15 14:34:40", "name": "mnt"}, {"type": "d", "permissions": "rwxr-xr-x", "owner": "root", "group": "root", "filesize": "4.0KB", "modtime": "2021-06-15 14:34:40", "name": "opt"}, {"type": "d", "permissions": "r-xr-xr-x", "owner": "root", "group": "root", "filesize": "0B", "modtime": "2021-12-02 16:19:13", "name": "proc"}, {"type": "d", "permissions": "rwx------", "owner": "root", "group": "root", "filesize": "4.0KB", "modtime": "2021-06-15 14:34:40", "name": "root"}, {"type": "d", "permissions": "rwxr-xr-x", "owner": "root", "group": "root", "filesize": "4.0KB", "modtime": "2021-12-02 16:19:13", "name": "run"}, {"type": "d", "permissions": "rwxr-xr-x", "owner": "root", "group": "root", "filesize": "4.0KB", "modtime": "2021-06-15 14:34:40", "name": "sbin"}, {"type": "d", "permissions": "rwxr-xr-x", "owner": "root", "group": "root", "filesize": "4.0KB", "modtime": "2021-06-15 14:34:40", "name": "srv"}, {"type": "d", "permissions": "r-xr-xr-x", "owner": "root", "group": "root", "filesize": "0B", "modtime": "2021-12-02 16:19:13", "name": "sys"}, {"type": "d", "permissions": "rwxr-xr-x", "owner": "root", "group": "root", "filesize": "4.0KB", "modtime": "2021-06-15 14:34:40", "name": "usr"}, {"type": "d", "permissions": "rwxr-xr-x", "owner": "root", "group": "root", "filesize": "4.0KB", "modtime": "2021-06-15 14:34:40", "name": "var"}], "path": "/"}}':!1;case"spawn_terminal":return'{"response": "spawn_terminal", "payload": {"execId": "2680be7b4aa3c0b6599edf3521f5813a770ccec7966a59c57cfdac5b4e3b7e9a"}}';case"resize_terminal":return!0;case"transmit_terminal_input":return n.payload.data==="\r"?`56!{"response": "receive_terminal_output", "payload": null}\r
This is just a demo`:'56!{"response": "receive_terminal_output", "payload": null}'+n.payload.data;default:return!1}}class Ka{constructor(u){Ke(this,"binaryType");Ke(this,"bufferedAmount");Ke(this,"extensions");Ke(this,"onclose");Ke(this,"onerror");Ke(this,"onmessage");Ke(this,"onopen");Ke(this,"protocol");Ke(this,"readyState");Ke(this,"url");Ke(this,"CLOSED");Ke(this,"CLOSING");Ke(this,"CONNECTING");Ke(this,"OPEN")}close(u,p){}addEventListener(u,p,y){throw new Error("Method not implemented.")}removeEventListener(u,p,y){throw new Error("Method not implemented.")}dispatchEvent(u){throw new Error("Method not implemented.")}send(u){const p=JSON.parse(u),y=qa(p),x={data:void 0,...new Event("api-mock")};if(y===!1?x.data=`{"response": "${p.request}", "error": "Sorry, command not mocked in demo"}`:y===!0||(y[0]!=="{"?x.data=new Blob([y]):x.data=y),x.data&&(setTimeout(()=>this.onmessage(x),200),typeof x.data=="string"&&x.data.includes("spawn_terminal"))){console.log("extra response for terminal");const R={data:void 0,...new Event("api-mock")};R.data=new Blob(['56!{"response": "receive_terminal_output", "payload": null}/ # ']),setTimeout(()=>this.onmessage(R),300)}}}let Et,_r={},vr={};function Ui(n,u){n in _r?_r[n](u):console.error("WS-API Unknown websocket event:",n)}function Er(n,u){n in vr?vr[n](u):console.error("WS-API Unknown websocket event:",n)}function $i(){_r={},vr={}}const ie={init(){try{Et&&Et.close(1e3),Et=new Ka(`${window.location.protocol.replace("http","ws")}//${window.location.host}/ws`),Et.binaryType="blob",Et.onclose=n=>{Er("ws-close",n.reason||"Connection closed"),$i()},Et.onmessage=async n=>{if(n.data instanceof Blob){const u=parseInt(await n.data.slice(0,10).text()),p=u.toString().length+1,y=await n.data.slice(p,p+u).text(),x=JSON.parse(y);x.error?Er(x.response,x.error):Ui(x.response,{payload:x.payload,blob:n.data.slice(p+u)})}else{const u=JSON.parse(n.data);u.error?Er(u.response,u.error):Ui(u.response,u.payload)}},Et.onerror=n=>{Er("ws-error","Connection error")}}catch(n){alert(n)}},register(n,u=null,p=null){u&&(_r[n]=u),p&&(vr[n]=p)},unregister(...n){n.forEach(u=>{delete vr[u],delete _r[u]})},send(n,u){Et.send(JSON.stringify({request:n,payload:u}))},close(){$i(),Et.close()}};var Va=G('<div class="spinner-grow mx-2 text-light" role="status"><span class="visually-hidden">Loading...</span></div>'),Ga=G('<div class="mt-4 text-light"> </div>'),Xa=G('<div class="bg-outer position-fixed d-flex justify-content-center align-items-center top-0 start-0 end-0 bottom-0 svelte-1l5azpb"><div class="bg-inner d-flex flex-column rounded p-3 svelte-1l5azpb"><div class="d-flex justify-content-center align-items-center"></div> <!></div></div>');function Hs(n,u){Xe(u,!1);let p=he(u,"text",8,""),y=oe(!1);nt(()=>{setTimeout(()=>Y(y,!0),250)}),rt();var x=er(),R=Be(x);{var D=i=>{var a=Xa(),l=I(a),_=I(l);ft(_,4,()=>[1,2,3],ut,(v,m)=>{var g=Va();V(v,g)});var o=j(_,2);{var c=v=>{var m=Ga(),g=I(m);se(()=>re(g,p())),V(v,m)};Q(o,v=>{p()&&v(c)})}ct(1,a,()=>Uo),V(i,a)};Q(R,i=>{k(y)&&i(D)})}V(n,x),Ze()}var Za=G('<!> <div class="container pt-5"><!> <form class="container login-form svelte-ur79cd"><div class="form-floating mb-2"><input type="text" class="form-control" id="loginName" placeholder=" " required autocomplete="username"> <label for="loginName">Username</label></div> <div class="form-floating mb-2"><input type="password" class="form-control" id="loginPw" placeholder=" " required autocomplete="current-password"> <label for="loginPw">Password</label></div> <div class="col-12"><button type="submit" class="btn btn-primary w-100">Login</button></div></form></div>',1);function Ya(n,u){Xe(u,!1);let p=he(u,"username",12,"admin"),y=oe("123456"),x=oe(!1),R=oe("");const D=Rs();nt(()=>{ie.register("login",({username:r})=>{D("login",{username:r})},r=>{Y(x,!1),De.add({text:r,type:"error"})})}),zt(()=>{ie.unregister("login")});async function i(){Y(x,!0),ie.send("login",{username:p(),password:k(y)}),Y(R,""),Y(y,"")}rt();var a=Za(),l=Be(a);{var _=r=>{Hs(r,{})};Q(l,r=>{k(x)&&r(_)})}var o=j(l,2),c=I(o);{var v=r=>{ja(r,{type:"error",dismissible:!0,children:(h,d)=>{var b=ht();se(()=>re(b,k(R))),V(h,b)},$$slots:{default:!0}})};Q(c,r=>{k(R)&&r(v)})}var m=j(c,2),g=I(m),e=I(g),s=j(g,2),t=I(s);Fr(e,p),fe("input",e,()=>{p(p().toLowerCase().trim())}),Fr(t,()=>k(y),r=>Y(y,r)),fe("submit",m,zr(()=>i())),ct(3,m,()=>Rt),V(n,a),Ze()}function ui(n,u=0){return Math.round(n*10**u)/10**u}function Kt(n){const u=["","Ki","Mi","Gi","Ti"];let p=0;for(;n>=1024;)n/=1024,p++;const y=Math.max(Math.floor(Math.log10(Math.floor(n))),0);return ui(n,2-y)+" "+u[p]+"B"}function sr(n){return new Date(n).toLocaleString(void 0,{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})}function Fs(n,u){var p;if((p=window==null?void 0:window.navigator)!=null&&p.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(n,u);else{const y=document.createElement("a");document.body.appendChild(y);const x=window.URL.createObjectURL(n);y.href=x,y.download=u,y.click(),setTimeout(()=>{window.URL.revokeObjectURL(x),document.body.removeChild(y)},0)}}var Ja=G('<div class="d-flex align-items-center"><strong>Loading...</strong> <div class="spinner-border ms-auto" role="status" aria-hidden="true"></div></div>'),Qa=G('<span class="spinner-grow spinner-grow-sm" role="status" aria-hidden="true"></span>'),el=G('<button type="button" class="btn btn-outline-warning"><!> Restart</button>'),tl=G('<span class="spinner-grow spinner-grow-sm" role="status" aria-hidden="true"></span>'),rl=G('<button type="button" class="btn btn-outline-danger"><!> Stop</button>'),il=G("<!> <!>",1),sl=G('<span class="spinner-grow spinner-grow-sm" role="status" aria-hidden="true"></span>'),nl=G('<button type="button" class="btn btn-outline-success"><!> Start</button>'),ol=G('<div class="ms-4"><!></div>'),al=G('<span class="text-muted font-monospace"> </span>'),ll=G('<a target="_blank" rel="noopener noreferrer" class="text-decoration-none"> </a>'),cl=G('<a target="_blank" rel="noopener noreferrer" class="text-decoration-none"> </a>'),hl=G('<div class="d-flex mb-3"><div class="icon-left ms-1 me-3 svelte-n9m8lc"><!></div> <div class="flex-grow-1"><div class="mb-1">Processor</div> <div class="progress"><div class="progress-bar text-white overflow-visible ps-1"> </div></div></div></div>'),dl=G('<span class="badge rounded-pill bg-primary ms-2"> </span>'),ul=G('<span class="badge rounded-pill bg-warning ms-2"> </span>'),fl=G('<span class="badge rounded-pill bg-info ms-2"> </span>'),_l=G('<div class="progress-bar progress-bar-striped bg-warning"></div>'),vl=G('<div class="progress"><div class="progress-bar text-white overflow-visible ps-1"> </div> <!></div>'),pl=G('<div class="d-flex mb-3"><div class="icon-left ms-1 me-3 svelte-n9m8lc"><!></div> <div class="flex-grow-1"><div class="mb-1"><span class="me-2">Memory</span> <!> <!> <!></div> <!></div></div>'),gl=G('<span class="badge bg-dark me-2"> </span>'),ml=G('<div class="flex-grow-1"><div class="mb-1">Ports</div> <!></div>'),Sl=G('<div class="d-flex mb-3"><div class="icon-left ms-1 me-3 svelte-n9m8lc"><!></div> <div class="me-5"><div class="mb-1">Network</div> <span title="Received Traffic" class="me-3"> </span> <span title="Sent Traffic"> </span></div> <!></div>'),bl=G('<div class="fw-bold">Stopped</div> <!>',1),Cl=G('<div class="fw-bold">Started</div> ',1),yl=G('<div class="fw-bold">Stopped</div> ',1),wl=G('<div class="fw-bold">Started</div> ',1),El=G('<tr><td class="text-end border-end text-break"> </td><td class="text-break"> </td></tr>'),xl=G('<tr><td class="text-end border-end text-break"> </td><td class="text-break"> </td></tr>'),kl=G('<div class="d-flex mb-3"><div class="icon-left ms-1 me-3 svelte-n9m8lc"><!></div> <div class="flex-grow-1 d-lg-flex" style="font-size: small"><div><table class="table table-striped border"><thead><tr><th scope="col" colspan="2" style="font-weight: normal">Environment Variables</th></tr></thead><tbody></tbody></table></div> <div><table class="table table-striped border"><thead><tr><th scope="col" colspan="2" style="font-weight: normal">Labels</th></tr></thead><tbody></tbody></table></div></div></div>'),Ll=G('<div class="d-flex mb-3"><div class="icon-left ms-1 me-3 svelte-n9m8lc"><!></div> <div class="d-flex flex-column flex-grow-1"><div class="flex-grow-1 d-flex align-items-center justify-content-between"><div class="flex-grow-1"><div class="mb-1"><span class="me-2">Container</span> <span class="text-muted font-monospace"> </span></div> <div><h6> </h6></div></div> <!></div> <div><!> <code> </code></div></div></div> <div class="d-flex mb-3"><div class="icon-left ms-1 me-3 svelte-n9m8lc"><!></div> <div class="flex-grow-1"><div class="mb-1"><span class="me-2">Image</span> <!></div> <div><h6><!> <span class="ms-1"><!> </span></h6></div></div></div> <!> <!> <!> <div class="d-flex mb-3"><div class="icon-left ms-1 me-3 svelte-n9m8lc"><!></div> <div class="flex-grow-1 pb-5 mb-5"><div class="mb-1">Timeline</div> <div class="timeline mt-2 svelte-n9m8lc"><div class="tl-container svelte-n9m8lc" style="margin-left: 5%"><div class="popup svelte-n9m8lc"><div class="fw-bold">Created</div> </div></div> <div class="tl-container svelte-n9m8lc" style="margin-left: 27%"><div class="popup svelte-n9m8lc"><div class="fw-bold"> </div> Crashes</div></div> <div class="tl-container svelte-n9m8lc" style="margin-left: 49%"><div class="popup svelte-n9m8lc"><!></div></div> <div class="tl-container svelte-n9m8lc" style="margin-left: 71%"><div class="popup svelte-n9m8lc"><!></div></div> <div class="tl-container svelte-n9m8lc" style="margin-left: 93%"><div class="popup svelte-n9m8lc">Currently <div class="fw-bold"> </div></div></div></div></div></div> <!>',1),Dl=G("<div><!></div>");function Rl(n,u){Xe(u,!1);const p=oe(),y=oe(),x=oe(),R=oe();let D=he(u,"enable_actions",8),i=he(u,"container_id",8),a,l,_=oe(!0),o=oe(null),c=oe();Cr(()=>{i()!==a&&(a=i(),Y(_,!0),Y(o,null),i()&&ie.send("get_container_info",{container_id:i()}))}),nt(()=>{window.scrollTo({top:0,behavior:"smooth"}),ie.register("get_container_info",t=>{t.id===i()&&(Y(c,t),Y(_,!1))},t=>De.add({text:t,type:"error"})),ie.register("set_container_state",()=>{Y(o,null)},t=>De.add({text:t,type:"error"})),l=setInterval(()=>{ie.send("get_container_info",{container_id:i()})},3e3)}),zt(()=>{clearInterval(l),ie.unregister("get_container_info"),ie.unregister("set_container_state")});function v(t){switch(ie.send("set_container_state",{container_id:i(),action:t}),Y(o,t),t){case"start":De.add({text:"Starting container ...",type:"success"});break;case"restart":De.add({text:"Restarting container ...",type:"info"});break;case"stop":De.add({text:"Stopping container ...",type:"info"});break}}Ct(()=>k(c),()=>{var t,r,h,d;Y(p,((r=(t=k(c))==null?void 0:t.mem)==null?void 0:r.used)*100/((d=(h=k(c))==null?void 0:h.mem)==null?void 0:d.total))}),Ct(()=>k(c),()=>{var t,r,h,d;Y(y,((r=(t=k(c))==null?void 0:t.mem)==null?void 0:r.max_used)*100/((d=(h=k(c))==null?void 0:h.mem)==null?void 0:d.total))}),Ct(()=>k(c),()=>{var t,r,h,d;Y(x,(t=k(c))!=null&&t.image.name.includes(":")?(h=k(c))==null?void 0:h.image.name.slice(0,(r=k(c))==null?void 0:r.image.name.lastIndexOf(":")):(d=k(c))==null?void 0:d.image.name)}),Ct(()=>k(c),()=>{var t,r;Y(R,(t=k(c))!=null&&t.image.name.includes(":")?(r=k(c))==null?void 0:r.image.name.split(":").pop():"latest")}),mr(),rt();var m=Dl(),g=I(m);{var e=t=>{var r=Ja();V(t,r)},s=t=>{var r=Ll(),h=Be(r),d=I(h),b=I(d);de(b,{icon:Ps,size:"2x"});var C=j(d,2),f=I(C),S=I(f),L=I(S),T=j(I(L),2),A=I(T),O=j(L,2),N=I(O),W=I(N),q=j(S,2);{var K=le=>{var ce=ol(),ve=I(ce);{var Le=ge=>{var Oe=il(),Je=Be(Oe);{var Qe=Re=>{var me=el(),ze=I(me);{var xe=pe=>{de(pe,{icon:Is})},Te=pe=>{var We=Qa();V(pe,We)};Q(ze,pe=>{k(o)?pe(Te,!1):pe(xe)})}se(()=>me.disabled=!!k(o)),fe("click",me,()=>v("restart")),V(Re,me)};Q(Je,Re=>{(!k(o)||k(o)==="restart")&&Re(Qe)})}var at=j(Je,2);{var wt=Re=>{var me=rl(),ze=I(me);{var xe=pe=>{de(pe,{icon:xa})},Te=pe=>{var We=tl();V(pe,We)};Q(ze,pe=>{k(o)?pe(Te,!1):pe(xe)})}se(()=>me.disabled=!!k(o)),fe("click",me,()=>v("stop")),V(Re,me)};Q(at,Re=>{(!k(o)||k(o)==="stop")&&Re(wt)})}V(ge,Oe)},Fe=(ge,Oe)=>{{var Je=Qe=>{var at=nl(),wt=I(at);{var Re=ze=>{de(ze,{icon:Da})},me=ze=>{var xe=sl();V(ze,xe)};Q(wt,ze=>{k(o)?ze(me,!1):ze(Re)})}se(()=>at.disabled=!!k(o)),fe("click",at,()=>v("start")),V(Qe,at)};Q(ge,Qe=>{(!k(o)||k(o)==="start")&&Qe(Je)},Oe)}};Q(ve,ge=>{k(c).status==="running"?ge(Le):ge(Fe,!1)})}V(le,ce)};Q(q,le=>{D()&&le(K)})}var E=j(f,2),B=I(E);de(B,{icon:_a});var M=j(B,2),P=I(M),$=j(h,2),U=I($),J=I(U);de(J,{icon:oa,size:"2x"});var X=j(U,2),ae=I(X),w=j(I(ae),2);{var H=le=>{var ce=al(),ve=I(ce);se(Le=>re(ve,Le),[()=>k(c).image.hash.substring(0,19)],ue),V(le,ce)};Q(w,le=>{var ce,ve,Le;((ce=k(c).image)==null?void 0:ce.hash)!==((Le=(ve=k(c))==null?void 0:ve.image)==null?void 0:Le.name)&&le(H)})}var z=j(ae,2),F=I(z),ee=I(F);{var Z=le=>{var ce=ll(),ve=I(ce);se(()=>{Pe(ce,"href",`https://hub.docker.com/_/${k(x)??""}`),re(ve,k(x))}),V(le,ce)},ne=(le,ce)=>{{var ve=Fe=>{var ge=cl(),Oe=I(ge);se(()=>{Pe(ge,"href",`https://hub.docker.com/r/${k(x)??""}`),re(Oe,k(x))}),V(Fe,ge)},Le=Fe=>{var ge=ht();se(()=>re(ge,k(x))),V(Fe,ge)};Q(le,Fe=>{k(x).match(/^\w+\/\w+$/)?Fe(ve):Fe(Le,!1)},ce)}};Q(ee,le=>{k(x).includes("/")?le(ne,!1):le(Z)})}var _e=j(ee,2),we=I(_e);de(we,{icon:va});var Ae=j(we),te=j($,2);{var Ie=le=>{var ce=hl(),ve=I(ce),Le=I(ve);de(Le,{icon:Os,size:"2x"});var Fe=j(ve,2),ge=j(I(Fe),2),Oe=I(ge),Je=I(Oe);se(Qe=>{kr(Oe,`width: ${k(c).cpu.perc??""}%`),re(Je,`${Qe??""}%`)},[()=>ui(k(c).cpu.perc)],ue),V(le,ce)};Q(te,le=>{k(c).cpu&&le(Ie)})}var Ye=j(te,2);{var vt=le=>{var ce=pl(),ve=I(ce),Le=I(ve);de(Le,{icon:Bs,size:"2x"});var Fe=j(ve,2),ge=I(Fe),Oe=j(I(ge),2);{var Je=xe=>{var Te=dl(),pe=I(Te);se(We=>re(pe,`Now ${We??""}`),[()=>Kt(k(c).mem.used)],ue),V(xe,Te)};Q(Oe,xe=>{k(c).mem.used!==null&&xe(Je)})}var Qe=j(Oe,2);{var at=xe=>{var Te=ul(),pe=I(Te);se(We=>re(pe,`Max ${We??""}`),[()=>Kt(k(c).mem.max_used)],ue),V(xe,Te)};Q(Qe,xe=>{k(c).mem.max_used!==null&&xe(at)})}var wt=j(Qe,2);{var Re=xe=>{var Te=fl(),pe=I(Te);se(We=>re(pe,`Limit ${We??""}`),[()=>Kt(k(c).mem.total)],ue),V(xe,Te)};Q(wt,xe=>{k(c).mem.total!==null&&xe(Re)})}var me=j(ge,2);{var ze=xe=>{var Te=vl(),pe=I(Te),We=I(pe),tr=j(pe,2);{var rr=ir=>{var wi=_l();se(()=>kr(wi,`width: ${k(y)-k(p)}%`)),V(ir,wi)};Q(tr,ir=>{k(c).mem.max_used!==null&&ir(rr)})}se(ir=>{kr(pe,`width: ${k(p)??""}%; z-index: 2`),re(We,`${ir??""}%`)},[()=>ui(k(p))],ue),V(xe,Te)};Q(me,xe=>{k(c).mem.used!==null&&k(c).mem.total!==null&&xe(ze)})}V(le,ce)};Q(Ye,le=>{k(c).mem&&le(vt)})}var be=j(Ye,2);{var He=le=>{var ce=Sl(),ve=I(ce),Le=I(ve);de(Le,{icon:Ca,size:"2x"});var Fe=j(ve,2),ge=j(I(Fe),2),Oe=I(ge),Je=j(ge,2),Qe=I(Je),at=j(Fe,2);{var wt=Re=>{var me=ml(),ze=j(I(me),2);ft(ze,1,()=>k(c).ports,ut,(xe,Te)=>{var pe=gl(),We=I(pe);se(()=>re(We,k(Te))),V(xe,pe)}),V(Re,me)};Q(at,Re=>{var me;((me=k(c).ports)==null?void 0:me.length)>0&&Re(wt)})}se((Re,me)=>{re(Oe,`â¼ ${Re??""}`),re(Qe,`â² ${me??""}`)},[()=>Kt(k(c).net.rx_bytes),()=>Kt(k(c).net.tx_bytes)],ue),V(le,ce)};Q(be,le=>{k(c).net&&le(He)})}var Me=j(be,2),ot=I(Me),ke=I(ot);de(ke,{icon:ba,size:"2x"});var je=j(ot,2),pt=j(I(je),2),Ne=I(pt),Ue=I(Ne),qe=j(I(Ue)),St=j(Ne,2),Ee=I(St),Jr=I(Ee),Ns=I(Jr),Ci=j(St,2),Ws=I(Ci),Us=I(Ws);{var $s=le=>{var ce=bl(),ve=j(Be(ce),2);{var Le=ge=>{var Oe=ht("Never");V(ge,Oe)},Fe=ge=>{var Oe=ht();se(Je=>re(Oe,Je),[()=>sr(k(c).finished_at)],ue),V(ge,Oe)};Q(ve,ge=>{k(c).finished_at<k(c).created_at?ge(Le):ge(Fe,!1)})}V(le,ce)},js=le=>{var ce=Cl(),ve=j(Be(ce));se(Le=>re(ve,` ${Le??""}`),[()=>sr(k(c).started_at)],ue),V(le,ce)};Q(Us,le=>{k(c).finished_at<k(c).started_at?le($s):le(js,!1)})}var yi=j(Ci,2),qs=I(yi),Ks=I(qs);{var Vs=le=>{var ce=yl(),ve=j(Be(ce));se(Le=>re(ve,` ${Le??""}`),[()=>sr(k(c).finished_at)],ue),V(le,ce)},Gs=le=>{var ce=wl(),ve=j(Be(ce));se(Le=>re(ve,` ${Le??""}`),[()=>sr(k(c).started_at)],ue),V(le,ce)};Q(Ks,le=>{k(c).finished_at>k(c).started_at?le(Vs):le(Gs,!1)})}var Xs=j(yi,2),Zs=I(Xs),Ys=j(I(Zs)),Js=I(Ys),Qs=j(Me,2);{var en=le=>{var ce=kl(),ve=I(ce),Le=I(ve);de(Le,{icon:fa,size:"2x"});var Fe=j(ve,2),ge=I(Fe),Oe=I(ge),Je=j(I(Oe));ft(Je,5,()=>Object.entries(k(c).env).sort(([Re],[me])=>Re.localeCompare(me)),ut,(Re,me)=>{let ze=()=>k(me)[0],xe=()=>k(me)[1];var Te=El(),pe=I(Te),We=I(pe),tr=j(pe),rr=I(tr);se(()=>{re(We,ze()),re(rr,xe())}),V(Re,Te)});var Qe=j(ge,2),at=I(Qe),wt=j(I(at));ft(wt,5,()=>Object.entries(k(c).labels).sort(([Re],[me])=>Re.localeCompare(me)),ut,(Re,me)=>{let ze=()=>k(me)[0],xe=()=>k(me)[1];var Te=xl(),pe=I(Te),We=I(pe),tr=j(pe),rr=I(tr);se(()=>{re(We,ze()),re(rr,xe())}),V(Re,Te)}),V(le,ce)};Q(Qs,le=>{(k(c).env||k(c).labels)&&le(en)})}se((le,ce,ve,Le)=>{re(A,`#${le??""}`),re(W,ce),re(P,k(c).command),re(Ae,` ${k(R)??""}`),re(qe,` ${ve??""}`),re(Ns,k(c).crashes),re(Js,Le)},[()=>k(c).id.substring(0,12),()=>k(c).name.replace(/^\//,""),()=>sr(k(c).created_at),()=>k(c).status.charAt(0).toUpperCase()+k(c).status.slice(1).toLowerCase()],ue),V(t,r)};Q(g,t=>{k(_)?t(e):t(s,!1)})}V(n,m),Ze()}function Al({onlyFirst:n=!1}={}){const p=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?(?:\\u0007|\\u001B\\u005C|\\u009C))","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-nq-uy=><~]))"].join("|");return new RegExp(p,n?void 0:"g")}const Tl=Al();function Bl(n){if(typeof n!="string")throw new TypeError(`Expected a \`string\`, got \`${typeof n}\``);return n.replace(Tl,"")}var Ml=G('<div class="d-flex align-items-center"><strong>Loading...</strong> <div class="spinner-border ms-auto" role="status" aria-hidden="true"></div></div>'),Ol=G("<p>No Log Output yet ...</p>"),Pl=G('<time class="me-1 px-1 svelte-itlo0b"><!></time>'),Il=G('<span class="pe-3 svelte-itlo0b"><!><span class="pe-3"> </span></span>'),Hl=G('<div class="d-flex justify-content-between align-items-center mb-2"><div><select class="form-select"><option>hide timestamps</option><option>local timestamps</option><option>raw timestamps</option></select></div> <div><button type="button" class="btn mx-1" title="Scroll to Top"><!></button> <button type="button" class="btn mx-1" title="Scroll to Bottom"><!></button> <button type="button" class="btn mx-1" title="Download shown log lines"><!></button> <button type="button" class="btn mx-1" title="Fullscreen"><!></button></div></div> <pre class="mb-0 svelte-itlo0b"></pre>',1),Fl=G("<div><!></div>");function zl(n,u){Xe(u,!1);let p=he(u,"container_id",8),y,x=oe(),R,D=oe(!0),i=oe([]),a=oe("local");Cr(()=>{p()!==y&&(y=p(),Y(D,!0),Y(i,[]),p()&&ie.send("get_container_logs",{container_id:p()}))}),nt(()=>{ie.register("get_container_logs",e=>{if(Y(D,!1),(e==null?void 0:e.length)>0){let s=!k(i)||k(x)&&k(x).scrollTop>=k(x).scrollHeight-k(x).clientHeight;const t=k(i).length+e.length;t>5e3&&k(i).slice(t-5e3),k(i).push(...e.map(r=>Bl(r))),s&&ps().then(()=>Qr(x,k(x).scrollTop=k(x).scrollHeight))}},e=>De.add({text:e,type:"error"})),R=setInterval(()=>{ie.send("get_container_logs",{container_id:p(),onlynew:!0})},3e3)}),zt(()=>{clearInterval(R),ie.unregister("get_container_logs")});function l(){var e;(e=k(x))!=null&&e.requestFullscreen&&k(x).requestFullscreen({navigationUI:"show"})}function _(){Fs(new Blob(k(i),{type:"text/plain"}),p()+".log")}function o(e){return new Date(e).toLocaleDateString(void 0,{weekday:"short",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})}rt();var c=Fl(),v=I(c);{var m=e=>{var s=Ml();V(e,s)},g=(e,s)=>{{var t=h=>{var d=Ol();V(h,d)},r=h=>{var d=Hl(),b=Be(d),C=I(b),f=I(C);se(()=>{k(a),to(()=>{})});var S=I(f);S.value=(S.__value="off")==null?"":"off";var L=j(S);L.value=(L.__value="local")==null?"":"local";var T=j(L);T.value=(T.__value="raw")==null?"":"raw";var A=j(C,2),O=I(A),N=I(O);de(N,{icon:ha,size:"lg",color:"#666"});var W=j(O,2),q=I(W);de(q,{icon:sa,size:"lg",color:"#666"});var K=j(W,2),E=I(K);de(E,{icon:ya,size:"lg",color:"#666"});var B=j(K,2),M=I(B);de(M,{icon:Ms,size:"lg",color:"#666"});var P=j(b,2);ft(P,5,()=>k(i),ut,($,U)=>{var J=Il();const X=ue(()=>k(U).substring(0,k(U).indexOf(" "))),ae=ue(()=>k(U).substring(k(U).indexOf(" ")+1));var w=I(J);{var H=ee=>{var Z=Pl(),ne=I(Z);{var _e=Ae=>{var te=ht();se(Ie=>re(te,Ie),[()=>o(k(X))],ue),V(Ae,te)},we=Ae=>{var te=ht();se(()=>re(te,k(X))),V(Ae,te)};Q(ne,Ae=>{k(a)==="local"?Ae(_e):Ae(we,!1)})}se(()=>Pe(Z,"datetime",k(X))),V(ee,Z)};Q(w,ee=>{k(a)!=="off"&&ee(H)})}var z=j(w),F=I(z);se(()=>re(F,k(ae))),V($,J)}),Yr(P,$=>Y(x,$),()=>k(x)),To(f,()=>k(a),$=>Y(a,$)),fe("click",O,()=>Qr(x,k(x).scrollTop=0)),fe("click",W,()=>Qr(x,k(x).scrollTop=k(x).scrollHeight)),fe("click",K,_),fe("click",B,l),V(h,d)};Q(e,h=>{k(i).length===0?h(t):h(r,!1)},s)}};Q(v,e=>{k(D)?e(m):e(g,!1)})}V(n,c),Ze()}var Nl=G('<div class="dropdown"><button type="button"><!></button> <ul class="dropdown-menu svelte-17q1qz7"><!></ul></div>');function ji(n,u){let p=he(u,"btnClass",8,"secondary");var y=Nl(),x=I(y),R=I(x);Hr(R,u,"button",{},a=>{de(a,{icon:Sa})});var D=j(x,2),i=I(D);Hr(i,u,"default",{},null),se(()=>$e(x,1,`btn btn-${p()??""} dropdown-toggle`,"svelte-17q1qz7")),V(n,y)}var Wl=G('<li><button type="button"><!></button></li>');function ri(n,u){let p=he(u,"active",8,!1);var y=Wl(),x=I(y);let R;var D=I(x);Hr(D,u,"default",{},null),se(i=>R=$e(x,1,"dropdown-item",null,R,i),[()=>({active:p()})],ue),fe("click",x,function(i){Mo.call(this,u,i)}),V(n,y)}var Ul=G('<div class="d-flex align-items-center"><strong>Loading...</strong> <div class="spinner-border ms-auto" role="status" aria-hidden="true"></div></div>'),$l=G('<button type="button" class="btn btn-outline-primary"><!></button>'),jl=G('<button type="button" class="btn btn-secondary border-dark"> </button>'),ql=G("<!> <!>",1),Kl=G('<span slot="button" class="me-1"><!> Add</span>'),Vl=G('<!> <input type="file" style="display: none">',1),Gl=G('<span class="badge bg-warning ms-2">readonly</span>'),Xl=G('<div class="d-flex justify-content-between align-items-center"><span> </span> <span><!> <span class="badge bg-secondary ms-2"> </span></span></div>'),Zl=G('<span slot="button" class="me-1"><!> Volumes</span>'),Yl=G('<div class="ms-4"><!></div>'),Jl=G('<tr><td><!> <wbr> </td><td class="text-end" style="word-break: break-all"><!></td><td class="text-center"> <wbr> </td><td class="text-center"> </td><td class="text-center font-monospace" style="word-break: break-all"> </td></tr>'),Ql=G('<div class="d-flex justify-content-between align-items-center"><div class="d-flex"><div class="btn-group me-1"><!> <button type="button" class="btn btn-outline-primary"><!></button></div> <div class="btn-group mx-2" role="group"></div></div> <div class="d-flex"><!> <!></div></div> <table class="table table-hover"><thead><tr><th scope="col">Name</th><th scope="col" class="text-end">Size</th><th scope="col" class="text-center">Owner</th><th scope="col" class="text-center">Modified</th><th scope="col" class="text-center">Permissions</th></tr></thead><tbody></tbody></table>',1),ec=G('<div style="overflow-x:auto"><!></div>');function tc(n,u){Xe(u,!1);const p=oe();let y=he(u,"container_id",8),x=he(u,"allow_download",8),R=he(u,"allow_upload",8),D=oe(),i=oe(!0),a,l=oe("/"),_=oe(null),o=oe(null);Cr(()=>{y()!==a&&(a=y(),Y(i,!0),Y(l,"/"),Y(_,null),Y(o,null),y()&&ie.send("get_filesystem_info",{container_id:y()}))}),nt(()=>{ie.register("get_filesystem_info",d=>{v(d.workdir),Y(o,d)},d=>De.add({text:d,type:"error"})),ie.register("get_directory_list",d=>{window.scrollTo({top:0,behavior:"smooth"}),Y(_,d.entries),Y(l,d.path),Y(i,!1)},d=>{De.add({text:d,type:"error"}),Y(_,null),Y(i,!1)}),ie.register("download_file",d=>{Fs(d.blob,d.payload.path.split("/").pop())},d=>De.add({text:d,type:"error"})),ie.register("create_folder",()=>{v(k(l))},d=>De.add({text:d,type:"error"})),ie.register("upload_file",()=>{v(k(l))},d=>De.add({text:d,type:"error"}))}),zt(()=>{ie.unregister("get_filesystem_info"),ie.unregister("get_directory_list"),ie.unregister("create_folder"),ie.unregister("upload_file"),ie.unregister("download_file")});function c(d){let b=k(l);b.endsWith("/")||(b+="/"),b+=d,v(b)}function v(d){Y(l,d),ie.send("get_directory_list",{container_id:y(),path:d}),Y(i,!0),Y(_,null)}function m(d){x()&&ie.send("download_file",{container_id:y(),path:`${k(l)}/${d}`})}function g(){const d=prompt("Folder name:");d&&ie.send("create_folder",{container_id:y(),path:`${k(l)}/${d}`})}async function e(){var C;const d=f=>new Promise((S,L)=>{const T=new FileReader;T.readAsDataURL(f),T.onload=()=>S(T.result.split(",")[1]),T.onerror=A=>L(A)}),b=(C=k(D).files)==null?void 0:C[0];b&&confirm(`Upload file "${b.name}"?`)&&ie.send("upload_file",{container_id:y(),path:`${k(l)}/${b.name}`,content:await d(b)})}Ct(()=>k(l),()=>{Y(p,()=>{const d=[],b=k(l).split("/");let C="";for(const f of b)f&&(C+="/"+f,d.push({segment:f,totalPath:C}));return d.unshift({segment:"/",totalPath:"/"}),d})}),mr(),rt();var s=ec(),t=I(s);{var r=d=>{var b=Ul();V(d,b)},h=d=>{var b=Ql(),C=Be(b),f=I(C),S=I(f),L=I(S);{var T=$=>{var U=$l(),J=I(U);de(J,{icon:Ea}),fe("click",U,()=>v(k(o).workdir)),V($,U)};Q(L,$=>{k(o)&&$(T)})}var A=j(L,2),O=I(A);de(O,{icon:Is});var N=j(S,2);ft(N,5,()=>k(p)(),ut,($,U)=>{var J=jl(),X=I(J);se(()=>re(X,k(U).segment||"/")),fe("click",J,()=>v(k(U).totalPath)),V($,J)});var W=j(f,2),q=I(W);{var K=$=>{var U=Vl(),J=Be(U);ji(J,{btnClass:"outline-primary",children:(ae,w)=>{var H=ql(),z=Be(H);ri(z,{$$events:{click:g},children:(ee,Z)=>{var ne=ht("Add Folder");V(ee,ne)},$$slots:{default:!0}});var F=j(z,2);ri(F,{$$events:{click:()=>k(D).click()},children:(ee,Z)=>{var ne=ht("Upload File");V(ee,ne)},$$slots:{default:!0}}),V(ae,H)},$$slots:{default:!0,button:(ae,w)=>{var H=Kl(),z=I(H);de(z,{icon:Ra}),V(ae,H)}}});var X=j(J,2);Yr(X,ae=>Y(D,ae),()=>k(D)),fe("change",X,e),V($,U)};Q(q,$=>{R()&&$(K)})}var E=j(q,2);{var B=$=>{var U=Yl(),J=I(U);ji(J,{children:(X,ae)=>{var w=er(),H=Be(w);ft(H,1,()=>k(o).mounts,ut,(z,F)=>{ri(z,{$$events:{click:()=>v(k(F).destination)},children:(ee,Z)=>{var ne=Xl(),_e=I(ne),we=I(_e),Ae=j(_e,2),te=I(Ae);{var Ie=be=>{var He=Gl();V(be,He)};Q(te,be=>{k(F).readonly&&be(Ie)})}var Ye=j(te,2),vt=I(Ye);se(()=>{re(we,k(F).destination),re(vt,k(F).type)}),V(ee,ne)},$$slots:{default:!0}})}),V(X,w)},$$slots:{default:!0,button:(X,ae)=>{var w=Zl(),H=I(w);de(H,{icon:ga}),V(X,w)}}}),V($,U)};Q(E,$=>{var U;k(o)&&((U=k(o).mounts)==null?void 0:U.length)>0&&$(B)})}var M=j(C,2),P=j(I(M));ft(P,5,()=>k(_)||[],ut,($,U)=>{var J=Jl();let X;var ae=I(J),w=I(ae);{var H=be=>{de(be,{icon:na,size:"lg",color:"#3B6"})},z=(be,He)=>{{var Me=ke=>{de(ke,{icon:La,size:"lg",color:"#36B"})},ot=(ke,je)=>{{var pt=Ue=>{de(Ue,{icon:ra,size:"lg",color:"#B36"})},Ne=Ue=>{var qe=ht();se(()=>re(qe,k(U).type)),V(Ue,qe)};Q(ke,Ue=>{k(U).type==="l"?Ue(pt):Ue(Ne,!1)},je)}};Q(be,ke=>{k(U).type==="f"?ke(Me):ke(ot,!1)},He)}};Q(w,be=>{k(U).type==="d"?be(H):be(z,!1)})}var F=j(w,3),ee=j(ae),Z=I(ee);{var ne=be=>{var He=ht();se(()=>re(He,k(U).filesize)),V(be,He)};Q(Z,be=>{k(U).type==="f"&&be(ne)})}var _e=j(ee),we=I(_e),Ae=j(we,2,!0),te=j(_e),Ie=I(te),Ye=j(te),vt=I(Ye);se(be=>{X=$e(J,1,"svelte-1hbb9tz",null,X,be),re(F,` ${k(U).name??""}`),re(we,`${k(U).owner??""} `),re(Ae,k(U).group),re(Ie,k(U).modtime),re(vt,k(U).permissions)},[()=>({clickable:k(U).type==="d"||x()})],ue),fe("click",J,()=>k(U).type==="d"?c(k(U).name):m(k(U).name)),V($,J)}),fe("click",A,()=>v(k(l))),V(d,b)};Q(t,d=>{k(i)?d(r):d(h,!1)})}V(n,s),Ze()}var rc=G('<div class="d-flex align-items-center"><strong>Loading...</strong> <div class="spinner-border ms-auto" role="status" aria-hidden="true"></div></div>'),ic=G('<div style="width: 2rem" class="me-2 d-flex justify-content-end align-items-center"><!></div>'),sc=G('<tr><td class="text-end"> </td><td class="text-end"><!></td><td class="text-end"><!></td><td class="text-center"> </td><td class="text-center"> </td><td class="text-start"><div class="d-flex"><!> <div class="font-monospace"> </div></div></td></tr>'),nc=G('<table class="table table-striped"><thead><tr><th scope="col" class="text-end" title="Process ID">PID</th><th scope="col" class="text-end" title="Processor Usage">CPU</th><th scope="col" class="text-end">Memory</th><th scope="col" class="text-center">Started At</th><th scope="col" class="text-center">User</th><th scope="col" class="text-start">Command</th></tr></thead><tbody></tbody></table>'),oc=G('<div style="overflow-x:auto"><!></div>');function ac(n,u){Xe(u,!1);let p=he(u,"container_id",8),y,x,R=oe(!0),D=oe(null);Cr(()=>{p()!==y&&(y=p(),Y(R,!0),Y(D,null),p()&&ie.send("get_processes",{container_id:p()}))}),nt(()=>{ie.register("get_processes",c=>{Y(D,c),Y(R,!1)},c=>De.add({text:c,type:"error"})),x=setInterval(()=>{ie.send("get_processes",{container_id:p()})},3e3)}),zt(()=>{clearInterval(x),ie.unregister("get_processes")});function i(c,v){return c??v}rt();var a=oc(),l=I(a);{var _=c=>{var v=rc();V(c,v)},o=c=>{var v=nc(),m=j(I(v));ft(m,5,()=>k(D)||[],ut,(g,e)=>{var s=sc(),t=I(s),r=I(t),h=j(t),d=I(h);{var b=B=>{var M=ht();se(()=>re(M,`${k(e)["%cpu"]??""}%`)),V(B,M)};Q(d,B=>{i(k(e)["%cpu"],null)&&B(b)})}var C=j(h),f=I(C);{var S=B=>{var M=ht();se(()=>re(M,`${k(e)["%mem"]??""}%`)),V(B,M)};Q(f,B=>{i(k(e)["%mem"],null)&&B(S)})}var L=j(C),T=I(L),A=j(L),O=I(A),N=j(A),W=I(N),q=I(W);ft(q,1,()=>Array(k(e).level),ut,(B,M,P)=>{var $=ic(),U=I($);{var J=X=>{de(X,{icon:Oa,rotate:90})};Q(U,X=>{parseInt(k(e).level)===P+1&&X(J)})}V(B,$)});var K=j(q,2),E=I(K);se((B,M)=>{re(r,k(e).pid),re(T,B),re(O,M),re(E,k(e).command)},[()=>i(k(e).stime,""),()=>i(k(e).user,"")],ue),V(g,s)}),V(c,v)};Q(l,c=>{k(R)?c(_):c(o,!1)})}V(n,a),Ze()}var ii={exports:{}},qi;function lc(){return qi||(qi=1,function(n,u){(function(p,y){n.exports=y()})(self,()=>(()=>{var p={4567:function(D,i,a){var l=this&&this.__decorate||function(r,h,d,b){var C,f=arguments.length,S=f<3?h:b===null?b=Object.getOwnPropertyDescriptor(h,d):b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(r,h,d,b);else for(var L=r.length-1;L>=0;L--)(C=r[L])&&(S=(f<3?C(S):f>3?C(h,d,S):C(h,d))||S);return f>3&&S&&Object.defineProperty(h,d,S),S},_=this&&this.__param||function(r,h){return function(d,b){h(d,b,r)}};Object.defineProperty(i,"__esModule",{value:!0}),i.AccessibilityManager=void 0;const o=a(9042),c=a(6114),v=a(9924),m=a(844),g=a(5596),e=a(4725),s=a(3656);let t=i.AccessibilityManager=class extends m.Disposable{constructor(r,h){super(),this._terminal=r,this._renderService=h,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="",this._accessibilityContainer=document.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=document.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let d=0;d<this._terminal.rows;d++)this._rowElements[d]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[d]);if(this._topBoundaryFocusListener=d=>this._handleBoundaryFocus(d,0),this._bottomBoundaryFocusListener=d=>this._handleBoundaryFocus(d,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions(),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=document.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this.register(new v.TimeBasedDebouncer(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this.register(this._terminal.onResize(d=>this._handleResize(d.rows))),this.register(this._terminal.onRender(d=>this._refreshRows(d.start,d.end))),this.register(this._terminal.onScroll(()=>this._refreshRows())),this.register(this._terminal.onA11yChar(d=>this._handleChar(d))),this.register(this._terminal.onLineFeed(()=>this._handleChar(`
`))),this.register(this._terminal.onA11yTab(d=>this._handleTab(d))),this.register(this._terminal.onKey(d=>this._handleKey(d.key))),this.register(this._terminal.onBlur(()=>this._clearLiveRegion())),this.register(this._renderService.onDimensionsChange(()=>this._refreshRowsDimensions())),this._screenDprMonitor=new g.ScreenDprMonitor(window),this.register(this._screenDprMonitor),this._screenDprMonitor.setListener(()=>this._refreshRowsDimensions()),this.register((0,s.addDisposableDomListener)(window,"resize",()=>this._refreshRowsDimensions())),this._refreshRows(),this.register((0,m.toDisposable)(()=>{this._accessibilityContainer.remove(),this._rowElements.length=0}))}_handleTab(r){for(let h=0;h<r;h++)this._handleChar(" ")}_handleChar(r){this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==r&&(this._charsToAnnounce+=r):this._charsToAnnounce+=r,r===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=o.tooMuchOutput)),c.isMac&&this._liveRegion.textContent&&this._liveRegion.textContent.length>0&&!this._liveRegion.parentNode&&setTimeout(()=>{this._accessibilityContainer.appendChild(this._liveRegion)},0))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0,c.isMac&&this._liveRegion.remove()}_handleKey(r){this._clearLiveRegion(),new RegExp("\\p{Control}","u").test(r)||this._charsToConsume.push(r)}_refreshRows(r,h){this._liveRegionDebouncer.refresh(r,h,this._terminal.rows)}_renderRows(r,h){const d=this._terminal.buffer,b=d.lines.length.toString();for(let C=r;C<=h;C++){const f=d.translateBufferLineToString(d.ydisp+C,!0),S=(d.ydisp+C+1).toString(),L=this._rowElements[C];L&&(f.length===0?L.innerText="Â ":L.textContent=f,L.setAttribute("aria-posinset",S),L.setAttribute("aria-setsize",b))}this._announceCharacters()}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(r,h){const d=r.target,b=this._rowElements[h===0?1:this._rowElements.length-2];if(d.getAttribute("aria-posinset")===(h===0?"1":`${this._terminal.buffer.lines.length}`)||r.relatedTarget!==b)return;let C,f;if(h===0?(C=d,f=this._rowElements.pop(),this._rowContainer.removeChild(f)):(C=this._rowElements.shift(),f=d,this._rowContainer.removeChild(C)),C.removeEventListener("focus",this._topBoundaryFocusListener),f.removeEventListener("focus",this._bottomBoundaryFocusListener),h===0){const S=this._createAccessibilityTreeNode();this._rowElements.unshift(S),this._rowContainer.insertAdjacentElement("afterbegin",S)}else{const S=this._createAccessibilityTreeNode();this._rowElements.push(S),this._rowContainer.appendChild(S)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(h===0?-1:1),this._rowElements[h===0?1:this._rowElements.length-2].focus(),r.preventDefault(),r.stopImmediatePropagation()}_handleResize(r){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let h=this._rowContainer.children.length;h<this._terminal.rows;h++)this._rowElements[h]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[h]);for(;this._rowElements.length>r;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){const r=document.createElement("div");return r.setAttribute("role","listitem"),r.tabIndex=-1,this._refreshRowDimensions(r),r}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){this._accessibilityContainer.style.width=`${this._renderService.dimensions.css.canvas.width}px`,this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let r=0;r<this._terminal.rows;r++)this._refreshRowDimensions(this._rowElements[r])}}_refreshRowDimensions(r){r.style.height=`${this._renderService.dimensions.css.cell.height}px`}};i.AccessibilityManager=t=l([_(1,e.IRenderService)],t)},3614:(D,i)=>{function a(c){return c.replace(/\r?\n/g,"\r")}function l(c,v){return v?"\x1B[200~"+c+"\x1B[201~":c}function _(c,v,m,g){c=l(c=a(c),m.decPrivateModes.bracketedPasteMode&&g.rawOptions.ignoreBracketedPasteMode!==!0),m.triggerDataEvent(c,!0),v.value=""}function o(c,v,m){const g=m.getBoundingClientRect(),e=c.clientX-g.left-10,s=c.clientY-g.top-10;v.style.width="20px",v.style.height="20px",v.style.left=`${e}px`,v.style.top=`${s}px`,v.style.zIndex="1000",v.focus()}Object.defineProperty(i,"__esModule",{value:!0}),i.rightClickHandler=i.moveTextAreaUnderMouseCursor=i.paste=i.handlePasteEvent=i.copyHandler=i.bracketTextForPaste=i.prepareTextForTerminal=void 0,i.prepareTextForTerminal=a,i.bracketTextForPaste=l,i.copyHandler=function(c,v){c.clipboardData&&c.clipboardData.setData("text/plain",v.selectionText),c.preventDefault()},i.handlePasteEvent=function(c,v,m,g){c.stopPropagation(),c.clipboardData&&_(c.clipboardData.getData("text/plain"),v,m,g)},i.paste=_,i.moveTextAreaUnderMouseCursor=o,i.rightClickHandler=function(c,v,m,g,e){o(c,v,m),e&&g.rightClickSelect(c),v.value=g.selectionText,v.select()}},7239:(D,i,a)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ColorContrastCache=void 0;const l=a(1505);i.ColorContrastCache=class{constructor(){this._color=new l.TwoKeyMap,this._css=new l.TwoKeyMap}setCss(_,o,c){this._css.set(_,o,c)}getCss(_,o){return this._css.get(_,o)}setColor(_,o,c){this._color.set(_,o,c)}getColor(_,o){return this._color.get(_,o)}clear(){this._color.clear(),this._css.clear()}}},3656:(D,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.addDisposableDomListener=void 0,i.addDisposableDomListener=function(a,l,_,o){a.addEventListener(l,_,o);let c=!1;return{dispose:()=>{c||(c=!0,a.removeEventListener(l,_,o))}}}},6465:function(D,i,a){var l=this&&this.__decorate||function(e,s,t,r){var h,d=arguments.length,b=d<3?s:r===null?r=Object.getOwnPropertyDescriptor(s,t):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(e,s,t,r);else for(var C=e.length-1;C>=0;C--)(h=e[C])&&(b=(d<3?h(b):d>3?h(s,t,b):h(s,t))||b);return d>3&&b&&Object.defineProperty(s,t,b),b},_=this&&this.__param||function(e,s){return function(t,r){s(t,r,e)}};Object.defineProperty(i,"__esModule",{value:!0}),i.Linkifier2=void 0;const o=a(3656),c=a(8460),v=a(844),m=a(2585);let g=i.Linkifier2=class extends v.Disposable{get currentLink(){return this._currentLink}constructor(e){super(),this._bufferService=e,this._linkProviders=[],this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this.register(new c.EventEmitter),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this.register(new c.EventEmitter),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this.register((0,v.getDisposeArrayDisposable)(this._linkCacheDisposables)),this.register((0,v.toDisposable)(()=>{this._lastMouseEvent=void 0})),this.register(this._bufferService.onResize(()=>{this._clearCurrentLink(),this._wasResized=!0}))}registerLinkProvider(e){return this._linkProviders.push(e),{dispose:()=>{const s=this._linkProviders.indexOf(e);s!==-1&&this._linkProviders.splice(s,1)}}}attachToDom(e,s,t){this._element=e,this._mouseService=s,this._renderService=t,this.register((0,o.addDisposableDomListener)(this._element,"mouseleave",()=>{this._isMouseOut=!0,this._clearCurrentLink()})),this.register((0,o.addDisposableDomListener)(this._element,"mousemove",this._handleMouseMove.bind(this))),this.register((0,o.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,o.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))}_handleMouseMove(e){if(this._lastMouseEvent=e,!this._element||!this._mouseService)return;const s=this._positionFromMouseEvent(e,this._element,this._mouseService);if(!s)return;this._isMouseOut=!1;const t=e.composedPath();for(let r=0;r<t.length;r++){const h=t[r];if(h.classList.contains("xterm"))break;if(h.classList.contains("xterm-hover"))return}this._lastBufferCell&&s.x===this._lastBufferCell.x&&s.y===this._lastBufferCell.y||(this._handleHover(s),this._lastBufferCell=s)}_handleHover(e){if(this._activeLine!==e.y||this._wasResized)return this._clearCurrentLink(),this._askForLink(e,!1),void(this._wasResized=!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,e)||(this._clearCurrentLink(),this._askForLink(e,!0))}_askForLink(e,s){var t,r;this._activeProviderReplies&&s||((t=this._activeProviderReplies)===null||t===void 0||t.forEach(d=>{d==null||d.forEach(b=>{b.link.dispose&&b.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=e.y);let h=!1;for(const[d,b]of this._linkProviders.entries())s?!((r=this._activeProviderReplies)===null||r===void 0)&&r.get(d)&&(h=this._checkLinkProviderResult(d,e,h)):b.provideLinks(e.y,C=>{var f,S;if(this._isMouseOut)return;const L=C==null?void 0:C.map(T=>({link:T}));(f=this._activeProviderReplies)===null||f===void 0||f.set(d,L),h=this._checkLinkProviderResult(d,e,h),((S=this._activeProviderReplies)===null||S===void 0?void 0:S.size)===this._linkProviders.length&&this._removeIntersectingLinks(e.y,this._activeProviderReplies)})}_removeIntersectingLinks(e,s){const t=new Set;for(let r=0;r<s.size;r++){const h=s.get(r);if(h)for(let d=0;d<h.length;d++){const b=h[d],C=b.link.range.start.y<e?0:b.link.range.start.x,f=b.link.range.end.y>e?this._bufferService.cols:b.link.range.end.x;for(let S=C;S<=f;S++){if(t.has(S)){h.splice(d--,1);break}t.add(S)}}}}_checkLinkProviderResult(e,s,t){var r;if(!this._activeProviderReplies)return t;const h=this._activeProviderReplies.get(e);let d=!1;for(let b=0;b<e;b++)this._activeProviderReplies.has(b)&&!this._activeProviderReplies.get(b)||(d=!0);if(!d&&h){const b=h.find(C=>this._linkAtPosition(C.link,s));b&&(t=!0,this._handleNewLink(b))}if(this._activeProviderReplies.size===this._linkProviders.length&&!t)for(let b=0;b<this._activeProviderReplies.size;b++){const C=(r=this._activeProviderReplies.get(b))===null||r===void 0?void 0:r.find(f=>this._linkAtPosition(f.link,s));if(C){t=!0,this._handleNewLink(C);break}}return t}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(e){if(!this._element||!this._mouseService||!this._currentLink)return;const s=this._positionFromMouseEvent(e,this._element,this._mouseService);s&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,s)&&this._currentLink.link.activate(e,this._currentLink.link.text)}_clearCurrentLink(e,s){this._element&&this._currentLink&&this._lastMouseEvent&&(!e||!s||this._currentLink.link.range.start.y>=e&&this._currentLink.link.range.end.y<=s)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,v.disposeArray)(this._linkCacheDisposables))}_handleNewLink(e){if(!this._element||!this._lastMouseEvent||!this._mouseService)return;const s=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);s&&this._linkAtPosition(e.link,s)&&(this._currentLink=e,this._currentLink.state={decorations:{underline:e.link.decorations===void 0||e.link.decorations.underline,pointerCursor:e.link.decorations===void 0||e.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,e.link,this._lastMouseEvent),e.link.decorations={},Object.defineProperties(e.link.decorations,{pointerCursor:{get:()=>{var t,r;return(r=(t=this._currentLink)===null||t===void 0?void 0:t.state)===null||r===void 0?void 0:r.decorations.pointerCursor},set:t=>{var r,h;!((r=this._currentLink)===null||r===void 0)&&r.state&&this._currentLink.state.decorations.pointerCursor!==t&&(this._currentLink.state.decorations.pointerCursor=t,this._currentLink.state.isHovered&&((h=this._element)===null||h===void 0||h.classList.toggle("xterm-cursor-pointer",t)))}},underline:{get:()=>{var t,r;return(r=(t=this._currentLink)===null||t===void 0?void 0:t.state)===null||r===void 0?void 0:r.decorations.underline},set:t=>{var r,h,d;!((r=this._currentLink)===null||r===void 0)&&r.state&&((d=(h=this._currentLink)===null||h===void 0?void 0:h.state)===null||d===void 0?void 0:d.decorations.underline)!==t&&(this._currentLink.state.decorations.underline=t,this._currentLink.state.isHovered&&this._fireUnderlineEvent(e.link,t))}}}),this._renderService&&this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange(t=>{if(!this._currentLink)return;const r=t.start===0?0:t.start+1+this._bufferService.buffer.ydisp,h=this._bufferService.buffer.ydisp+1+t.end;if(this._currentLink.link.range.start.y>=r&&this._currentLink.link.range.end.y<=h&&(this._clearCurrentLink(r,h),this._lastMouseEvent&&this._element)){const d=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);d&&this._askForLink(d,!1)}})))}_linkHover(e,s,t){var r;!((r=this._currentLink)===null||r===void 0)&&r.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(s,!0),this._currentLink.state.decorations.pointerCursor&&e.classList.add("xterm-cursor-pointer")),s.hover&&s.hover(t,s.text)}_fireUnderlineEvent(e,s){const t=e.range,r=this._bufferService.buffer.ydisp,h=this._createLinkUnderlineEvent(t.start.x-1,t.start.y-r-1,t.end.x,t.end.y-r-1,void 0);(s?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(h)}_linkLeave(e,s,t){var r;!((r=this._currentLink)===null||r===void 0)&&r.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(s,!1),this._currentLink.state.decorations.pointerCursor&&e.classList.remove("xterm-cursor-pointer")),s.leave&&s.leave(t,s.text)}_linkAtPosition(e,s){const t=e.range.start.y*this._bufferService.cols+e.range.start.x,r=e.range.end.y*this._bufferService.cols+e.range.end.x,h=s.y*this._bufferService.cols+s.x;return t<=h&&h<=r}_positionFromMouseEvent(e,s,t){const r=t.getCoords(e,s,this._bufferService.cols,this._bufferService.rows);if(r)return{x:r[0],y:r[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(e,s,t,r,h){return{x1:e,y1:s,x2:t,y2:r,cols:this._bufferService.cols,fg:h}}};i.Linkifier2=g=l([_(0,m.IBufferService)],g)},9042:(D,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.tooMuchOutput=i.promptLabel=void 0,i.promptLabel="Terminal input",i.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},3730:function(D,i,a){var l=this&&this.__decorate||function(g,e,s,t){var r,h=arguments.length,d=h<3?e:t===null?t=Object.getOwnPropertyDescriptor(e,s):t;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(g,e,s,t);else for(var b=g.length-1;b>=0;b--)(r=g[b])&&(d=(h<3?r(d):h>3?r(e,s,d):r(e,s))||d);return h>3&&d&&Object.defineProperty(e,s,d),d},_=this&&this.__param||function(g,e){return function(s,t){e(s,t,g)}};Object.defineProperty(i,"__esModule",{value:!0}),i.OscLinkProvider=void 0;const o=a(511),c=a(2585);let v=i.OscLinkProvider=class{constructor(g,e,s){this._bufferService=g,this._optionsService=e,this._oscLinkService=s}provideLinks(g,e){var s;const t=this._bufferService.buffer.lines.get(g-1);if(!t)return void e(void 0);const r=[],h=this._optionsService.rawOptions.linkHandler,d=new o.CellData,b=t.getTrimmedLength();let C=-1,f=-1,S=!1;for(let L=0;L<b;L++)if(f!==-1||t.hasContent(L)){if(t.loadCell(L,d),d.hasExtendedAttrs()&&d.extended.urlId){if(f===-1){f=L,C=d.extended.urlId;continue}S=d.extended.urlId!==C}else f!==-1&&(S=!0);if(S||f!==-1&&L===b-1){const T=(s=this._oscLinkService.getLinkData(C))===null||s===void 0?void 0:s.uri;if(T){const A={start:{x:f+1,y:g},end:{x:L+(S||L!==b-1?0:1),y:g}};let O=!1;if(!(h!=null&&h.allowNonHttpProtocols))try{const N=new URL(T);["http:","https:"].includes(N.protocol)||(O=!0)}catch{O=!0}O||r.push({text:T,range:A,activate:(N,W)=>h?h.activate(N,W,A):m(0,W),hover:(N,W)=>{var q;return(q=h==null?void 0:h.hover)===null||q===void 0?void 0:q.call(h,N,W,A)},leave:(N,W)=>{var q;return(q=h==null?void 0:h.leave)===null||q===void 0?void 0:q.call(h,N,W,A)}})}S=!1,d.hasExtendedAttrs()&&d.extended.urlId?(f=L,C=d.extended.urlId):(f=-1,C=-1)}}e(r)}};function m(g,e){if(confirm(`Do you want to navigate to ${e}?

WARNING: This link could potentially be dangerous`)){const s=window.open();if(s){try{s.opener=null}catch{}s.location.href=e}else console.warn("Opening link blocked as opener could not be cleared")}}i.OscLinkProvider=v=l([_(0,c.IBufferService),_(1,c.IOptionsService),_(2,c.IOscLinkService)],v)},6193:(D,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.RenderDebouncer=void 0,i.RenderDebouncer=class{constructor(a,l){this._parentWindow=a,this._renderCallback=l,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._parentWindow.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(a){return this._refreshCallbacks.push(a),this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame(()=>this._innerRefresh())),this._animationFrame}refresh(a,l,_){this._rowCount=_,a=a!==void 0?a:0,l=l!==void 0?l:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,a):a,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,l):l,this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return void this._runRefreshCallbacks();const a=Math.max(this._rowStart,0),l=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(a,l),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(const a of this._refreshCallbacks)a(0);this._refreshCallbacks=[]}}},5596:(D,i,a)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ScreenDprMonitor=void 0;const l=a(844);class _ extends l.Disposable{constructor(c){super(),this._parentWindow=c,this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this.register((0,l.toDisposable)(()=>{this.clearListener()}))}setListener(c){this._listener&&this.clearListener(),this._listener=c,this._outerListener=()=>{this._listener&&(this._listener(this._parentWindow.devicePixelRatio,this._currentDevicePixelRatio),this._updateDpr())},this._updateDpr()}_updateDpr(){var c;this._outerListener&&((c=this._resolutionMediaMatchList)===null||c===void 0||c.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){this._resolutionMediaMatchList&&this._listener&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._listener=void 0,this._outerListener=void 0)}}i.ScreenDprMonitor=_},3236:(D,i,a)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Terminal=void 0;const l=a(3614),_=a(3656),o=a(6465),c=a(9042),v=a(3730),m=a(1680),g=a(3107),e=a(5744),s=a(2950),t=a(1296),r=a(428),h=a(4269),d=a(5114),b=a(8934),C=a(3230),f=a(9312),S=a(4725),L=a(6731),T=a(8055),A=a(8969),O=a(8460),N=a(844),W=a(6114),q=a(8437),K=a(2584),E=a(7399),B=a(5941),M=a(9074),P=a(2585),$=a(5435),U=a(4567),J=typeof window<"u"?window.document:null;class X extends A.CoreTerminal{get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}constructor(w={}){super(w),this.browser=W,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this.register(new N.MutableDisposable),this._onCursorMove=this.register(new O.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onKey=this.register(new O.EventEmitter),this.onKey=this._onKey.event,this._onRender=this.register(new O.EventEmitter),this.onRender=this._onRender.event,this._onSelectionChange=this.register(new O.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this.register(new O.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onBell=this.register(new O.EventEmitter),this.onBell=this._onBell.event,this._onFocus=this.register(new O.EventEmitter),this._onBlur=this.register(new O.EventEmitter),this._onA11yCharEmitter=this.register(new O.EventEmitter),this._onA11yTabEmitter=this.register(new O.EventEmitter),this._onWillOpen=this.register(new O.EventEmitter),this._setup(),this.linkifier2=this.register(this._instantiationService.createInstance(o.Linkifier2)),this.linkifier2.registerLinkProvider(this._instantiationService.createInstance(v.OscLinkProvider)),this._decorationService=this._instantiationService.createInstance(M.DecorationService),this._instantiationService.setService(P.IDecorationService,this._decorationService),this.register(this._inputHandler.onRequestBell(()=>this._onBell.fire())),this.register(this._inputHandler.onRequestRefreshRows((H,z)=>this.refresh(H,z))),this.register(this._inputHandler.onRequestSendFocus(()=>this._reportFocus())),this.register(this._inputHandler.onRequestReset(()=>this.reset())),this.register(this._inputHandler.onRequestWindowsOptionsReport(H=>this._reportWindowsOptions(H))),this.register(this._inputHandler.onColor(H=>this._handleColorEvent(H))),this.register((0,O.forwardEvent)(this._inputHandler.onCursorMove,this._onCursorMove)),this.register((0,O.forwardEvent)(this._inputHandler.onTitleChange,this._onTitleChange)),this.register((0,O.forwardEvent)(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this.register((0,O.forwardEvent)(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this.register(this._bufferService.onResize(H=>this._afterResize(H.cols,H.rows))),this.register((0,N.toDisposable)(()=>{var H,z;this._customKeyEventHandler=void 0,(z=(H=this.element)===null||H===void 0?void 0:H.parentNode)===null||z===void 0||z.removeChild(this.element)}))}_handleColorEvent(w){if(this._themeService)for(const H of w){let z,F="";switch(H.index){case 256:z="foreground",F="10";break;case 257:z="background",F="11";break;case 258:z="cursor",F="12";break;default:z="ansi",F="4;"+H.index}switch(H.type){case 0:const ee=T.color.toColorRGB(z==="ansi"?this._themeService.colors.ansi[H.index]:this._themeService.colors[z]);this.coreService.triggerDataEvent(`${K.C0.ESC}]${F};${(0,B.toRgbString)(ee)}${K.C1_ESCAPED.ST}`);break;case 1:if(z==="ansi")this._themeService.modifyColors(Z=>Z.ansi[H.index]=T.rgba.toColor(...H.color));else{const Z=z;this._themeService.modifyColors(ne=>ne[Z]=T.rgba.toColor(...H.color))}break;case 2:this._themeService.restoreColor(H.index)}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(w){w?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(U.AccessibilityManager,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(w){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(K.C0.ESC+"[I"),this.updateCursorStyle(w),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){var w;return(w=this.textarea)===null||w===void 0?void 0:w.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(K.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;const w=this.buffer.ybase+this.buffer.y,H=this.buffer.lines.get(w);if(!H)return;const z=Math.min(this.buffer.x,this.cols-1),F=this._renderService.dimensions.css.cell.height,ee=H.getWidth(z),Z=this._renderService.dimensions.css.cell.width*ee,ne=this.buffer.y*this._renderService.dimensions.css.cell.height,_e=z*this._renderService.dimensions.css.cell.width;this.textarea.style.left=_e+"px",this.textarea.style.top=ne+"px",this.textarea.style.width=Z+"px",this.textarea.style.height=F+"px",this.textarea.style.lineHeight=F+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this.register((0,_.addDisposableDomListener)(this.element,"copy",H=>{this.hasSelection()&&(0,l.copyHandler)(H,this._selectionService)}));const w=H=>(0,l.handlePasteEvent)(H,this.textarea,this.coreService,this.optionsService);this.register((0,_.addDisposableDomListener)(this.textarea,"paste",w)),this.register((0,_.addDisposableDomListener)(this.element,"paste",w)),W.isFirefox?this.register((0,_.addDisposableDomListener)(this.element,"mousedown",H=>{H.button===2&&(0,l.rightClickHandler)(H,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})):this.register((0,_.addDisposableDomListener)(this.element,"contextmenu",H=>{(0,l.rightClickHandler)(H,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})),W.isLinux&&this.register((0,_.addDisposableDomListener)(this.element,"auxclick",H=>{H.button===1&&(0,l.moveTextAreaUnderMouseCursor)(H,this.textarea,this.screenElement)}))}_bindKeys(){this.register((0,_.addDisposableDomListener)(this.textarea,"keyup",w=>this._keyUp(w),!0)),this.register((0,_.addDisposableDomListener)(this.textarea,"keydown",w=>this._keyDown(w),!0)),this.register((0,_.addDisposableDomListener)(this.textarea,"keypress",w=>this._keyPress(w),!0)),this.register((0,_.addDisposableDomListener)(this.textarea,"compositionstart",()=>this._compositionHelper.compositionstart())),this.register((0,_.addDisposableDomListener)(this.textarea,"compositionupdate",w=>this._compositionHelper.compositionupdate(w))),this.register((0,_.addDisposableDomListener)(this.textarea,"compositionend",()=>this._compositionHelper.compositionend())),this.register((0,_.addDisposableDomListener)(this.textarea,"input",w=>this._inputEvent(w),!0)),this.register(this.onRender(()=>this._compositionHelper.updateCompositionElements()))}open(w){var H;if(!w)throw new Error("Terminal requires a parent element.");w.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this._document=w.ownerDocument,this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),w.appendChild(this.element);const z=J.createDocumentFragment();this._viewportElement=J.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),z.appendChild(this._viewportElement),this._viewportScrollArea=J.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=J.createElement("div"),this.screenElement.classList.add("xterm-screen"),this._helperContainer=J.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),z.appendChild(this.screenElement),this.textarea=J.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",c.promptLabel),W.isChromeOS||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._coreBrowserService=this._instantiationService.createInstance(d.CoreBrowserService,this.textarea,(H=this._document.defaultView)!==null&&H!==void 0?H:window),this._instantiationService.setService(S.ICoreBrowserService,this._coreBrowserService),this.register((0,_.addDisposableDomListener)(this.textarea,"focus",F=>this._handleTextAreaFocus(F))),this.register((0,_.addDisposableDomListener)(this.textarea,"blur",()=>this._handleTextAreaBlur())),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(r.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(S.ICharSizeService,this._charSizeService),this._themeService=this._instantiationService.createInstance(L.ThemeService),this._instantiationService.setService(S.IThemeService,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(h.CharacterJoinerService),this._instantiationService.setService(S.ICharacterJoinerService,this._characterJoinerService),this._renderService=this.register(this._instantiationService.createInstance(C.RenderService,this.rows,this.screenElement)),this._instantiationService.setService(S.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange(F=>this._onRender.fire(F))),this.onResize(F=>this._renderService.resize(F.cols,F.rows)),this._compositionView=J.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(s.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this.element.appendChild(z);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this._mouseService=this._instantiationService.createInstance(b.MouseService),this._instantiationService.setService(S.IMouseService,this._mouseService),this.viewport=this._instantiationService.createInstance(m.Viewport,this._viewportElement,this._viewportScrollArea),this.viewport.onRequestScrollLines(F=>this.scrollLines(F.amount,F.suppressScrollEvent,1)),this.register(this._inputHandler.onRequestSyncScrollBar(()=>this.viewport.syncScrollArea())),this.register(this.viewport),this.register(this.onCursorMove(()=>{this._renderService.handleCursorMove(),this._syncTextArea()})),this.register(this.onResize(()=>this._renderService.handleResize(this.cols,this.rows))),this.register(this.onBlur(()=>this._renderService.handleBlur())),this.register(this.onFocus(()=>this._renderService.handleFocus())),this.register(this._renderService.onDimensionsChange(()=>this.viewport.syncScrollArea())),this._selectionService=this.register(this._instantiationService.createInstance(f.SelectionService,this.element,this.screenElement,this.linkifier2)),this._instantiationService.setService(S.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines(F=>this.scrollLines(F.amount,F.suppressScrollEvent))),this.register(this._selectionService.onSelectionChange(()=>this._onSelectionChange.fire())),this.register(this._selectionService.onRequestRedraw(F=>this._renderService.handleSelectionChanged(F.start,F.end,F.columnSelectMode))),this.register(this._selectionService.onLinuxMouseSelection(F=>{this.textarea.value=F,this.textarea.focus(),this.textarea.select()})),this.register(this._onScroll.event(F=>{this.viewport.syncScrollArea(),this._selectionService.refresh()})),this.register((0,_.addDisposableDomListener)(this._viewportElement,"scroll",()=>this._selectionService.refresh())),this.linkifier2.attachToDom(this.screenElement,this._mouseService,this._renderService),this.register(this._instantiationService.createInstance(g.BufferDecorationRenderer,this.screenElement)),this.register((0,_.addDisposableDomListener)(this.element,"mousedown",F=>this._selectionService.handleMouseDown(F))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(U.AccessibilityManager,this)),this.register(this.optionsService.onSpecificOptionChange("screenReaderMode",F=>this._handleScreenReaderModeOptionChange(F))),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(e.OverviewRulerRenderer,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRulerWidth",F=>{!this._overviewRulerRenderer&&F&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(e.OverviewRulerRenderer,this._viewportElement,this.screenElement)))}),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(t.DomRenderer,this.element,this.screenElement,this._viewportElement,this.linkifier2)}bindMouse(){const w=this,H=this.element;function z(Z){const ne=w._mouseService.getMouseReportCoords(Z,w.screenElement);if(!ne)return!1;let _e,we;switch(Z.overrideType||Z.type){case"mousemove":we=32,Z.buttons===void 0?(_e=3,Z.button!==void 0&&(_e=Z.button<3?Z.button:3)):_e=1&Z.buttons?0:4&Z.buttons?1:2&Z.buttons?2:3;break;case"mouseup":we=0,_e=Z.button<3?Z.button:3;break;case"mousedown":we=1,_e=Z.button<3?Z.button:3;break;case"wheel":if(w.viewport.getLinesScrolled(Z)===0)return!1;we=Z.deltaY<0?0:1,_e=4;break;default:return!1}return!(we===void 0||_e===void 0||_e>4)&&w.coreMouseService.triggerMouseEvent({col:ne.col,row:ne.row,x:ne.x,y:ne.y,button:_e,action:we,ctrl:Z.ctrlKey,alt:Z.altKey,shift:Z.shiftKey})}const F={mouseup:null,wheel:null,mousedrag:null,mousemove:null},ee={mouseup:Z=>(z(Z),Z.buttons||(this._document.removeEventListener("mouseup",F.mouseup),F.mousedrag&&this._document.removeEventListener("mousemove",F.mousedrag)),this.cancel(Z)),wheel:Z=>(z(Z),this.cancel(Z,!0)),mousedrag:Z=>{Z.buttons&&z(Z)},mousemove:Z=>{Z.buttons||z(Z)}};this.register(this.coreMouseService.onProtocolChange(Z=>{Z?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(Z)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),8&Z?F.mousemove||(H.addEventListener("mousemove",ee.mousemove),F.mousemove=ee.mousemove):(H.removeEventListener("mousemove",F.mousemove),F.mousemove=null),16&Z?F.wheel||(H.addEventListener("wheel",ee.wheel,{passive:!1}),F.wheel=ee.wheel):(H.removeEventListener("wheel",F.wheel),F.wheel=null),2&Z?F.mouseup||(H.addEventListener("mouseup",ee.mouseup),F.mouseup=ee.mouseup):(this._document.removeEventListener("mouseup",F.mouseup),H.removeEventListener("mouseup",F.mouseup),F.mouseup=null),4&Z?F.mousedrag||(F.mousedrag=ee.mousedrag):(this._document.removeEventListener("mousemove",F.mousedrag),F.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,_.addDisposableDomListener)(H,"mousedown",Z=>{if(Z.preventDefault(),this.focus(),this.coreMouseService.areMouseEventsActive&&!this._selectionService.shouldForceSelection(Z))return z(Z),F.mouseup&&this._document.addEventListener("mouseup",F.mouseup),F.mousedrag&&this._document.addEventListener("mousemove",F.mousedrag),this.cancel(Z)})),this.register((0,_.addDisposableDomListener)(H,"wheel",Z=>{if(!F.wheel){if(!this.buffer.hasScrollback){const ne=this.viewport.getLinesScrolled(Z);if(ne===0)return;const _e=K.C0.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(Z.deltaY<0?"A":"B");let we="";for(let Ae=0;Ae<Math.abs(ne);Ae++)we+=_e;return this.coreService.triggerDataEvent(we,!0),this.cancel(Z,!0)}return this.viewport.handleWheel(Z)?this.cancel(Z):void 0}},{passive:!1})),this.register((0,_.addDisposableDomListener)(H,"touchstart",Z=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchStart(Z),this.cancel(Z)},{passive:!0})),this.register((0,_.addDisposableDomListener)(H,"touchmove",Z=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchMove(Z)?void 0:this.cancel(Z)},{passive:!1}))}refresh(w,H){var z;(z=this._renderService)===null||z===void 0||z.refreshRows(w,H)}updateCursorStyle(w){var H;!((H=this._selectionService)===null||H===void 0)&&H.shouldColumnSelect(w)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(w,H,z=0){var F;z===1?(super.scrollLines(w,H,z),this.refresh(0,this.rows-1)):(F=this.viewport)===null||F===void 0||F.scrollLines(w)}paste(w){(0,l.paste)(w,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(w){this._customKeyEventHandler=w}registerLinkProvider(w){return this.linkifier2.registerLinkProvider(w)}registerCharacterJoiner(w){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");const H=this._characterJoinerService.register(w);return this.refresh(0,this.rows-1),H}deregisterCharacterJoiner(w){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(w)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(w){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+w)}registerDecoration(w){return this._decorationService.registerDecoration(w)}hasSelection(){return!!this._selectionService&&this._selectionService.hasSelection}select(w,H,z){this._selectionService.setSelection(w,H,z)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(this._selectionService&&this._selectionService.hasSelection)return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){var w;(w=this._selectionService)===null||w===void 0||w.clearSelection()}selectAll(){var w;(w=this._selectionService)===null||w===void 0||w.selectAll()}selectLines(w,H){var z;(z=this._selectionService)===null||z===void 0||z.selectLines(w,H)}_keyDown(w){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(w)===!1)return!1;const H=this.browser.isMac&&this.options.macOptionIsMeta&&w.altKey;if(!H&&!this._compositionHelper.keydown(w))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;H||w.key!=="Dead"&&w.key!=="AltGraph"||(this._unprocessedDeadKey=!0);const z=(0,E.evaluateKeyboardEvent)(w,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(w),z.type===3||z.type===2){const F=this.rows-1;return this.scrollLines(z.type===2?-F:F),this.cancel(w,!0)}return z.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,w)||(z.cancel&&this.cancel(w,!0),!z.key||!!(w.key&&!w.ctrlKey&&!w.altKey&&!w.metaKey&&w.key.length===1&&w.key.charCodeAt(0)>=65&&w.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(z.key!==K.C0.ETX&&z.key!==K.C0.CR||(this.textarea.value=""),this._onKey.fire({key:z.key,domEvent:w}),this._showCursor(),this.coreService.triggerDataEvent(z.key,!0),!this.optionsService.rawOptions.screenReaderMode||w.altKey||w.ctrlKey?this.cancel(w,!0):void(this._keyDownHandled=!0))))}_isThirdLevelShift(w,H){const z=w.isMac&&!this.options.macOptionIsMeta&&H.altKey&&!H.ctrlKey&&!H.metaKey||w.isWindows&&H.altKey&&H.ctrlKey&&!H.metaKey||w.isWindows&&H.getModifierState("AltGraph");return H.type==="keypress"?z:z&&(!H.keyCode||H.keyCode>47)}_keyUp(w){this._keyDownSeen=!1,this._customKeyEventHandler&&this._customKeyEventHandler(w)===!1||(function(H){return H.keyCode===16||H.keyCode===17||H.keyCode===18}(w)||this.focus(),this.updateCursorStyle(w),this._keyPressHandled=!1)}_keyPress(w){let H;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(w)===!1)return!1;if(this.cancel(w),w.charCode)H=w.charCode;else if(w.which===null||w.which===void 0)H=w.keyCode;else{if(w.which===0||w.charCode===0)return!1;H=w.which}return!(!H||(w.altKey||w.ctrlKey||w.metaKey)&&!this._isThirdLevelShift(this.browser,w)||(H=String.fromCharCode(H),this._onKey.fire({key:H,domEvent:w}),this._showCursor(),this.coreService.triggerDataEvent(H,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))}_inputEvent(w){if(w.data&&w.inputType==="insertText"&&(!w.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;const H=w.data;return this.coreService.triggerDataEvent(H,!0),this.cancel(w),!0}return!1}resize(w,H){w!==this.cols||H!==this.rows?super.resize(w,H):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()}_afterResize(w,H){var z,F;(z=this._charSizeService)===null||z===void 0||z.measure(),(F=this.viewport)===null||F===void 0||F.syncScrollArea(!0)}clear(){var w;if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let H=1;H<this.rows;H++)this.buffer.lines.push(this.buffer.getBlankLine(q.DEFAULT_ATTR_DATA));this._onScroll.fire({position:this.buffer.ydisp,source:0}),(w=this.viewport)===null||w===void 0||w.reset(),this.refresh(0,this.rows-1)}}reset(){var w,H;this.options.rows=this.rows,this.options.cols=this.cols;const z=this._customKeyEventHandler;this._setup(),super.reset(),(w=this._selectionService)===null||w===void 0||w.reset(),this._decorationService.reset(),(H=this.viewport)===null||H===void 0||H.reset(),this._customKeyEventHandler=z,this.refresh(0,this.rows-1)}clearTextureAtlas(){var w;(w=this._renderService)===null||w===void 0||w.clearTextureAtlas()}_reportFocus(){var w;!((w=this.element)===null||w===void 0)&&w.classList.contains("focus")?this.coreService.triggerDataEvent(K.C0.ESC+"[I"):this.coreService.triggerDataEvent(K.C0.ESC+"[O")}_reportWindowsOptions(w){if(this._renderService)switch(w){case $.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:const H=this._renderService.dimensions.css.canvas.width.toFixed(0),z=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${K.C0.ESC}[4;${z};${H}t`);break;case $.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:const F=this._renderService.dimensions.css.cell.width.toFixed(0),ee=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${K.C0.ESC}[6;${ee};${F}t`)}}cancel(w,H){if(this.options.cancelEvents||H)return w.preventDefault(),w.stopPropagation(),!1}}i.Terminal=X},9924:(D,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.TimeBasedDebouncer=void 0,i.TimeBasedDebouncer=class{constructor(a,l=1e3){this._renderCallback=a,this._debounceThresholdMS=l,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(a,l,_){this._rowCount=_,a=a!==void 0?a:0,l=l!==void 0?l:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,a):a,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,l):l;const o=Date.now();if(o-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=o,this._innerRefresh();else if(!this._additionalRefreshRequested){const c=o-this._lastRefreshMs,v=this._debounceThresholdMS-c;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(()=>{this._lastRefreshMs=Date.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0},v)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;const a=Math.max(this._rowStart,0),l=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(a,l)}}},1680:function(D,i,a){var l=this&&this.__decorate||function(s,t,r,h){var d,b=arguments.length,C=b<3?t:h===null?h=Object.getOwnPropertyDescriptor(t,r):h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(s,t,r,h);else for(var f=s.length-1;f>=0;f--)(d=s[f])&&(C=(b<3?d(C):b>3?d(t,r,C):d(t,r))||C);return b>3&&C&&Object.defineProperty(t,r,C),C},_=this&&this.__param||function(s,t){return function(r,h){t(r,h,s)}};Object.defineProperty(i,"__esModule",{value:!0}),i.Viewport=void 0;const o=a(3656),c=a(4725),v=a(8460),m=a(844),g=a(2585);let e=i.Viewport=class extends m.Disposable{constructor(s,t,r,h,d,b,C,f){super(),this._viewportElement=s,this._scrollArea=t,this._bufferService=r,this._optionsService=h,this._charSizeService=d,this._renderService=b,this._coreBrowserService=C,this.scrollBarWidth=0,this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._wheelPartialScroll=0,this._refreshAnimationFrame=null,this._ignoreNextScrollEvent=!1,this._smoothScrollState={startTime:0,origin:-1,target:-1},this._onRequestScrollLines=this.register(new v.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this.register((0,o.addDisposableDomListener)(this._viewportElement,"scroll",this._handleScroll.bind(this))),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(S=>this._activeBuffer=S.activeBuffer)),this._renderDimensions=this._renderService.dimensions,this.register(this._renderService.onDimensionsChange(S=>this._renderDimensions=S)),this._handleThemeChange(f.colors),this.register(f.onChangeColors(S=>this._handleThemeChange(S))),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.syncScrollArea())),setTimeout(()=>this.syncScrollArea())}_handleThemeChange(s){this._viewportElement.style.backgroundColor=s.background.css}reset(){this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._coreBrowserService.window.requestAnimationFrame(()=>this.syncScrollArea())}_refresh(s){if(s)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&this._coreBrowserService.window.cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderService.dimensions.device.cell.height/this._coreBrowserService.dpr,this._currentDeviceCellHeight=this._renderService.dimensions.device.cell.height,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;const t=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderService.dimensions.css.canvas.height);this._lastRecordedBufferHeight!==t&&(this._lastRecordedBufferHeight=t,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}const s=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==s&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=s),this._refreshAnimationFrame=null}syncScrollArea(s=!1){if(this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(s);this._lastRecordedViewportHeight===this._renderService.dimensions.css.canvas.height&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.device.cell.height===this._currentDeviceCellHeight||this._refresh(s)}_handleScroll(s){if(this._lastScrollTop=this._viewportElement.scrollTop,!this._viewportElement.offsetParent)return;if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._onRequestScrollLines.fire({amount:0,suppressScrollEvent:!0});const t=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._onRequestScrollLines.fire({amount:t,suppressScrollEvent:!0})}_smoothScroll(){if(this._isDisposed||this._smoothScrollState.origin===-1||this._smoothScrollState.target===-1)return;const s=this._smoothScrollPercent();this._viewportElement.scrollTop=this._smoothScrollState.origin+Math.round(s*(this._smoothScrollState.target-this._smoothScrollState.origin)),s<1?this._coreBrowserService.window.requestAnimationFrame(()=>this._smoothScroll()):this._clearSmoothScrollState()}_smoothScrollPercent(){return this._optionsService.rawOptions.smoothScrollDuration&&this._smoothScrollState.startTime?Math.max(Math.min((Date.now()-this._smoothScrollState.startTime)/this._optionsService.rawOptions.smoothScrollDuration,1),0):1}_clearSmoothScrollState(){this._smoothScrollState.startTime=0,this._smoothScrollState.origin=-1,this._smoothScrollState.target=-1}_bubbleScroll(s,t){const r=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(t<0&&this._viewportElement.scrollTop!==0||t>0&&r<this._lastRecordedBufferHeight)||(s.cancelable&&s.preventDefault(),!1)}handleWheel(s){const t=this._getPixelsScrolled(s);return t!==0&&(this._optionsService.rawOptions.smoothScrollDuration?(this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target===-1?this._smoothScrollState.target=this._viewportElement.scrollTop+t:this._smoothScrollState.target+=t,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()):this._viewportElement.scrollTop+=t,this._bubbleScroll(s,t))}scrollLines(s){if(s!==0)if(this._optionsService.rawOptions.smoothScrollDuration){const t=s*this._currentRowHeight;this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target=this._smoothScrollState.origin+t,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()}else this._onRequestScrollLines.fire({amount:s,suppressScrollEvent:!1})}_getPixelsScrolled(s){if(s.deltaY===0||s.shiftKey)return 0;let t=this._applyScrollModifier(s.deltaY,s);return s.deltaMode===WheelEvent.DOM_DELTA_LINE?t*=this._currentRowHeight:s.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(t*=this._currentRowHeight*this._bufferService.rows),t}getBufferElements(s,t){var r;let h,d="";const b=[],C=t??this._bufferService.buffer.lines.length,f=this._bufferService.buffer.lines;for(let S=s;S<C;S++){const L=f.get(S);if(!L)continue;const T=(r=f.get(S+1))===null||r===void 0?void 0:r.isWrapped;if(d+=L.translateToString(!T),!T||S===f.length-1){const A=document.createElement("div");A.textContent=d,b.push(A),d.length>0&&(h=A),d=""}}return{bufferElements:b,cursorElement:h}}getLinesScrolled(s){if(s.deltaY===0||s.shiftKey)return 0;let t=this._applyScrollModifier(s.deltaY,s);return s.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(t/=this._currentRowHeight+0,this._wheelPartialScroll+=t,t=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):s.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(t*=this._bufferService.rows),t}_applyScrollModifier(s,t){const r=this._optionsService.rawOptions.fastScrollModifier;return r==="alt"&&t.altKey||r==="ctrl"&&t.ctrlKey||r==="shift"&&t.shiftKey?s*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:s*this._optionsService.rawOptions.scrollSensitivity}handleTouchStart(s){this._lastTouchY=s.touches[0].pageY}handleTouchMove(s){const t=this._lastTouchY-s.touches[0].pageY;return this._lastTouchY=s.touches[0].pageY,t!==0&&(this._viewportElement.scrollTop+=t,this._bubbleScroll(s,t))}};i.Viewport=e=l([_(2,g.IBufferService),_(3,g.IOptionsService),_(4,c.ICharSizeService),_(5,c.IRenderService),_(6,c.ICoreBrowserService),_(7,c.IThemeService)],e)},3107:function(D,i,a){var l=this&&this.__decorate||function(e,s,t,r){var h,d=arguments.length,b=d<3?s:r===null?r=Object.getOwnPropertyDescriptor(s,t):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(e,s,t,r);else for(var C=e.length-1;C>=0;C--)(h=e[C])&&(b=(d<3?h(b):d>3?h(s,t,b):h(s,t))||b);return d>3&&b&&Object.defineProperty(s,t,b),b},_=this&&this.__param||function(e,s){return function(t,r){s(t,r,e)}};Object.defineProperty(i,"__esModule",{value:!0}),i.BufferDecorationRenderer=void 0;const o=a(3656),c=a(4725),v=a(844),m=a(2585);let g=i.BufferDecorationRenderer=class extends v.Disposable{constructor(e,s,t,r){super(),this._screenElement=e,this._bufferService=s,this._decorationService=t,this._renderService=r,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this.register(this._renderService.onRenderedViewportChange(()=>this._doRefreshDecorations())),this.register(this._renderService.onDimensionsChange(()=>{this._dimensionsChanged=!0,this._queueRefresh()})),this.register((0,o.addDisposableDomListener)(window,"resize",()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt})),this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh())),this.register(this._decorationService.onDecorationRemoved(h=>this._removeDecoration(h))),this.register((0,v.toDisposable)(()=>{this._container.remove(),this._decorationElements.clear()}))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback(()=>{this._doRefreshDecorations(),this._animationFrame=void 0}))}_doRefreshDecorations(){for(const e of this._decorationService.decorations)this._renderDecoration(e);this._dimensionsChanged=!1}_renderDecoration(e){this._refreshStyle(e),this._dimensionsChanged&&this._refreshXPosition(e)}_createElement(e){var s,t;const r=document.createElement("div");r.classList.add("xterm-decoration"),r.classList.toggle("xterm-decoration-top-layer",((s=e==null?void 0:e.options)===null||s===void 0?void 0:s.layer)==="top"),r.style.width=`${Math.round((e.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,r.style.height=(e.options.height||1)*this._renderService.dimensions.css.cell.height+"px",r.style.top=(e.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height+"px",r.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;const h=(t=e.options.x)!==null&&t!==void 0?t:0;return h&&h>this._bufferService.cols&&(r.style.display="none"),this._refreshXPosition(e,r),r}_refreshStyle(e){const s=e.marker.line-this._bufferService.buffers.active.ydisp;if(s<0||s>=this._bufferService.rows)e.element&&(e.element.style.display="none",e.onRenderEmitter.fire(e.element));else{let t=this._decorationElements.get(e);t||(t=this._createElement(e),e.element=t,this._decorationElements.set(e,t),this._container.appendChild(t),e.onDispose(()=>{this._decorationElements.delete(e),t.remove()})),t.style.top=s*this._renderService.dimensions.css.cell.height+"px",t.style.display=this._altBufferIsActive?"none":"block",e.onRenderEmitter.fire(t)}}_refreshXPosition(e,s=e.element){var t;if(!s)return;const r=(t=e.options.x)!==null&&t!==void 0?t:0;(e.options.anchor||"left")==="right"?s.style.right=r?r*this._renderService.dimensions.css.cell.width+"px":"":s.style.left=r?r*this._renderService.dimensions.css.cell.width+"px":""}_removeDecoration(e){var s;(s=this._decorationElements.get(e))===null||s===void 0||s.remove(),this._decorationElements.delete(e),e.dispose()}};i.BufferDecorationRenderer=g=l([_(1,m.IBufferService),_(2,m.IDecorationService),_(3,c.IRenderService)],g)},5871:(D,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ColorZoneStore=void 0,i.ColorZoneStore=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(a){if(a.options.overviewRulerOptions){for(const l of this._zones)if(l.color===a.options.overviewRulerOptions.color&&l.position===a.options.overviewRulerOptions.position){if(this._lineIntersectsZone(l,a.marker.line))return;if(this._lineAdjacentToZone(l,a.marker.line,a.options.overviewRulerOptions.position))return void this._addLineToZone(l,a.marker.line)}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=a.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=a.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=a.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=a.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:a.options.overviewRulerOptions.color,position:a.options.overviewRulerOptions.position,startBufferLine:a.marker.line,endBufferLine:a.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(a){this._linePadding=a}_lineIntersectsZone(a,l){return l>=a.startBufferLine&&l<=a.endBufferLine}_lineAdjacentToZone(a,l,_){return l>=a.startBufferLine-this._linePadding[_||"full"]&&l<=a.endBufferLine+this._linePadding[_||"full"]}_addLineToZone(a,l){a.startBufferLine=Math.min(a.startBufferLine,l),a.endBufferLine=Math.max(a.endBufferLine,l)}}},5744:function(D,i,a){var l=this&&this.__decorate||function(h,d,b,C){var f,S=arguments.length,L=S<3?d:C===null?C=Object.getOwnPropertyDescriptor(d,b):C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(h,d,b,C);else for(var T=h.length-1;T>=0;T--)(f=h[T])&&(L=(S<3?f(L):S>3?f(d,b,L):f(d,b))||L);return S>3&&L&&Object.defineProperty(d,b,L),L},_=this&&this.__param||function(h,d){return function(b,C){d(b,C,h)}};Object.defineProperty(i,"__esModule",{value:!0}),i.OverviewRulerRenderer=void 0;const o=a(5871),c=a(3656),v=a(4725),m=a(844),g=a(2585),e={full:0,left:0,center:0,right:0},s={full:0,left:0,center:0,right:0},t={full:0,left:0,center:0,right:0};let r=i.OverviewRulerRenderer=class extends m.Disposable{get _width(){return this._optionsService.options.overviewRulerWidth||0}constructor(h,d,b,C,f,S,L){var T;super(),this._viewportElement=h,this._screenElement=d,this._bufferService=b,this._decorationService=C,this._renderService=f,this._optionsService=S,this._coreBrowseService=L,this._colorZoneStore=new o.ColorZoneStore,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=document.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),(T=this._viewportElement.parentElement)===null||T===void 0||T.insertBefore(this._canvas,this._viewportElement);const A=this._canvas.getContext("2d");if(!A)throw new Error("Ctx cannot be null");this._ctx=A,this._registerDecorationListeners(),this._registerBufferChangeListeners(),this._registerDimensionChangeListeners(),this.register((0,m.toDisposable)(()=>{var O;(O=this._canvas)===null||O===void 0||O.remove()}))}_registerDecorationListeners(){this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh(void 0,!0))),this.register(this._decorationService.onDecorationRemoved(()=>this._queueRefresh(void 0,!0)))}_registerBufferChangeListeners(){this.register(this._renderService.onRenderedViewportChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"})),this.register(this._bufferService.onScroll(()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())}))}_registerDimensionChangeListeners(){this.register(this._renderService.onRender(()=>{this._containerHeight&&this._containerHeight===this._screenElement.clientHeight||(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)})),this.register(this._optionsService.onSpecificOptionChange("overviewRulerWidth",()=>this._queueRefresh(!0))),this.register((0,c.addDisposableDomListener)(this._coreBrowseService.window,"resize",()=>this._queueRefresh(!0))),this._queueRefresh(!0)}_refreshDrawConstants(){const h=Math.floor(this._canvas.width/3),d=Math.ceil(this._canvas.width/3);s.full=this._canvas.width,s.left=h,s.center=d,s.right=h,this._refreshDrawHeightConstants(),t.full=0,t.left=0,t.center=s.left,t.right=s.left+s.center}_refreshDrawHeightConstants(){e.full=Math.round(2*this._coreBrowseService.dpr);const h=this._canvas.height/this._bufferService.buffer.lines.length,d=Math.round(Math.max(Math.min(h,12),6)*this._coreBrowseService.dpr);e.left=d,e.center=d,e.right=d}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*e.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*e.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*e.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*e.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowseService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowseService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(const d of this._decorationService.decorations)this._colorZoneStore.addDecoration(d);this._ctx.lineWidth=1;const h=this._colorZoneStore.zones;for(const d of h)d.position!=="full"&&this._renderColorZone(d);for(const d of h)d.position==="full"&&this._renderColorZone(d);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderColorZone(h){this._ctx.fillStyle=h.color,this._ctx.fillRect(t[h.position||"full"],Math.round((this._canvas.height-1)*(h.startBufferLine/this._bufferService.buffers.active.lines.length)-e[h.position||"full"]/2),s[h.position||"full"],Math.round((this._canvas.height-1)*((h.endBufferLine-h.startBufferLine)/this._bufferService.buffers.active.lines.length)+e[h.position||"full"]))}_queueRefresh(h,d){this._shouldUpdateDimensions=h||this._shouldUpdateDimensions,this._shouldUpdateAnchor=d||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowseService.window.requestAnimationFrame(()=>{this._refreshDecorations(),this._animationFrame=void 0}))}};i.OverviewRulerRenderer=r=l([_(2,g.IBufferService),_(3,g.IDecorationService),_(4,v.IRenderService),_(5,g.IOptionsService),_(6,v.ICoreBrowserService)],r)},2950:function(D,i,a){var l=this&&this.__decorate||function(g,e,s,t){var r,h=arguments.length,d=h<3?e:t===null?t=Object.getOwnPropertyDescriptor(e,s):t;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(g,e,s,t);else for(var b=g.length-1;b>=0;b--)(r=g[b])&&(d=(h<3?r(d):h>3?r(e,s,d):r(e,s))||d);return h>3&&d&&Object.defineProperty(e,s,d),d},_=this&&this.__param||function(g,e){return function(s,t){e(s,t,g)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CompositionHelper=void 0;const o=a(4725),c=a(2585),v=a(2584);let m=i.CompositionHelper=class{get isComposing(){return this._isComposing}constructor(g,e,s,t,r,h){this._textarea=g,this._compositionView=e,this._bufferService=s,this._optionsService=t,this._coreService=r,this._renderService=h,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(g){this._compositionView.textContent=g.data,this.updateCompositionElements(),setTimeout(()=>{this._compositionPosition.end=this._textarea.value.length},0)}compositionend(){this._finalizeComposition(!0)}keydown(g){if(this._isComposing||this._isSendingComposition){if(g.keyCode===229||g.keyCode===16||g.keyCode===17||g.keyCode===18)return!1;this._finalizeComposition(!1)}return g.keyCode!==229||(this._handleAnyTextareaChanges(),!1)}_finalizeComposition(g){if(this._compositionView.classList.remove("active"),this._isComposing=!1,g){const e={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(()=>{if(this._isSendingComposition){let s;this._isSendingComposition=!1,e.start+=this._dataAlreadySent.length,s=this._isComposing?this._textarea.value.substring(e.start,e.end):this._textarea.value.substring(e.start),s.length>0&&this._coreService.triggerDataEvent(s,!0)}},0)}else{this._isSendingComposition=!1;const e=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(e,!0)}}_handleAnyTextareaChanges(){const g=this._textarea.value;setTimeout(()=>{if(!this._isComposing){const e=this._textarea.value,s=e.replace(g,"");this._dataAlreadySent=s,e.length>g.length?this._coreService.triggerDataEvent(s,!0):e.length<g.length?this._coreService.triggerDataEvent(`${v.C0.DEL}`,!0):e.length===g.length&&e!==g&&this._coreService.triggerDataEvent(e,!0)}},0)}updateCompositionElements(g){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){const e=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),s=this._renderService.dimensions.css.cell.height,t=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,r=e*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=r+"px",this._compositionView.style.top=t+"px",this._compositionView.style.height=s+"px",this._compositionView.style.lineHeight=s+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";const h=this._compositionView.getBoundingClientRect();this._textarea.style.left=r+"px",this._textarea.style.top=t+"px",this._textarea.style.width=Math.max(h.width,1)+"px",this._textarea.style.height=Math.max(h.height,1)+"px",this._textarea.style.lineHeight=h.height+"px"}g||setTimeout(()=>this.updateCompositionElements(!0),0)}}};i.CompositionHelper=m=l([_(2,c.IBufferService),_(3,c.IOptionsService),_(4,c.ICoreService),_(5,o.IRenderService)],m)},9806:(D,i)=>{function a(l,_,o){const c=o.getBoundingClientRect(),v=l.getComputedStyle(o),m=parseInt(v.getPropertyValue("padding-left")),g=parseInt(v.getPropertyValue("padding-top"));return[_.clientX-c.left-m,_.clientY-c.top-g]}Object.defineProperty(i,"__esModule",{value:!0}),i.getCoords=i.getCoordsRelativeToElement=void 0,i.getCoordsRelativeToElement=a,i.getCoords=function(l,_,o,c,v,m,g,e,s){if(!m)return;const t=a(l,_,o);return t?(t[0]=Math.ceil((t[0]+(s?g/2:0))/g),t[1]=Math.ceil(t[1]/e),t[0]=Math.min(Math.max(t[0],1),c+(s?1:0)),t[1]=Math.min(Math.max(t[1],1),v),t):void 0}},9504:(D,i,a)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.moveToCellSequence=void 0;const l=a(2584);function _(e,s,t,r){const h=e-o(e,t),d=s-o(s,t),b=Math.abs(h-d)-function(C,f,S){let L=0;const T=C-o(C,S),A=f-o(f,S);for(let O=0;O<Math.abs(T-A);O++){const N=c(C,f)==="A"?-1:1,W=S.buffer.lines.get(T+N*O);W!=null&&W.isWrapped&&L++}return L}(e,s,t);return g(b,m(c(e,s),r))}function o(e,s){let t=0,r=s.buffer.lines.get(e),h=r==null?void 0:r.isWrapped;for(;h&&e>=0&&e<s.rows;)t++,r=s.buffer.lines.get(--e),h=r==null?void 0:r.isWrapped;return t}function c(e,s){return e>s?"A":"B"}function v(e,s,t,r,h,d){let b=e,C=s,f="";for(;b!==t||C!==r;)b+=h?1:-1,h&&b>d.cols-1?(f+=d.buffer.translateBufferLineToString(C,!1,e,b),b=0,e=0,C++):!h&&b<0&&(f+=d.buffer.translateBufferLineToString(C,!1,0,e+1),b=d.cols-1,e=b,C--);return f+d.buffer.translateBufferLineToString(C,!1,e,b)}function m(e,s){const t=s?"O":"[";return l.C0.ESC+t+e}function g(e,s){e=Math.floor(e);let t="";for(let r=0;r<e;r++)t+=s;return t}i.moveToCellSequence=function(e,s,t,r){const h=t.buffer.x,d=t.buffer.y;if(!t.buffer.hasScrollback)return function(f,S,L,T,A,O){return _(S,T,A,O).length===0?"":g(v(f,S,f,S-o(S,A),!1,A).length,m("D",O))}(h,d,0,s,t,r)+_(d,s,t,r)+function(f,S,L,T,A,O){let N;N=_(S,T,A,O).length>0?T-o(T,A):S;const W=T,q=function(K,E,B,M,P,$){let U;return U=_(B,M,P,$).length>0?M-o(M,P):E,K<B&&U<=M||K>=B&&U<M?"C":"D"}(f,S,L,T,A,O);return g(v(f,N,L,W,q==="C",A).length,m(q,O))}(h,d,e,s,t,r);let b;if(d===s)return b=h>e?"D":"C",g(Math.abs(h-e),m(b,r));b=d>s?"D":"C";const C=Math.abs(d-s);return g(function(f,S){return S.cols-f}(d>s?e:h,t)+(C-1)*t.cols+1+((d>s?h:e)-1),m(b,r))}},1296:function(D,i,a){var l=this&&this.__decorate||function(A,O,N,W){var q,K=arguments.length,E=K<3?O:W===null?W=Object.getOwnPropertyDescriptor(O,N):W;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(A,O,N,W);else for(var B=A.length-1;B>=0;B--)(q=A[B])&&(E=(K<3?q(E):K>3?q(O,N,E):q(O,N))||E);return K>3&&E&&Object.defineProperty(O,N,E),E},_=this&&this.__param||function(A,O){return function(N,W){O(N,W,A)}};Object.defineProperty(i,"__esModule",{value:!0}),i.DomRenderer=void 0;const o=a(3787),c=a(2550),v=a(2223),m=a(6171),g=a(4725),e=a(8055),s=a(8460),t=a(844),r=a(2585),h="xterm-dom-renderer-owner-",d="xterm-rows",b="xterm-fg-",C="xterm-bg-",f="xterm-focus",S="xterm-selection";let L=1,T=i.DomRenderer=class extends t.Disposable{constructor(A,O,N,W,q,K,E,B,M,P){super(),this._element=A,this._screenElement=O,this._viewportElement=N,this._linkifier2=W,this._charSizeService=K,this._optionsService=E,this._bufferService=B,this._coreBrowserService=M,this._themeService=P,this._terminalClass=L++,this._rowElements=[],this.onRequestRedraw=this.register(new s.EventEmitter).event,this._rowContainer=document.createElement("div"),this._rowContainer.classList.add(d),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=document.createElement("div"),this._selectionContainer.classList.add(S),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=(0,m.createRenderDimensions)(),this._updateDimensions(),this.register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._themeService.onChangeColors($=>this._injectCss($))),this._injectCss(this._themeService.colors),this._rowFactory=q.createInstance(o.DomRendererRowFactory,document),this._element.classList.add(h+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this.register(this._linkifier2.onShowLinkUnderline($=>this._handleLinkHover($))),this.register(this._linkifier2.onHideLinkUnderline($=>this._handleLinkLeave($))),this.register((0,t.toDisposable)(()=>{this._element.classList.remove(h+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()})),this._widthCache=new c.WidthCache(document),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){const A=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*A,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*A),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/A),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/A),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(const N of this._rowElements)N.style.width=`${this.dimensions.css.canvas.width}px`,N.style.height=`${this.dimensions.css.cell.height}px`,N.style.lineHeight=`${this.dimensions.css.cell.height}px`,N.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));const O=`${this._terminalSelector} .${d} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=O,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(A){this._themeStyleElement||(this._themeStyleElement=document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let O=`${this._terminalSelector} .${d} { color: ${A.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;O+=`${this._terminalSelector} .${d} .xterm-dim { color: ${e.color.multiplyOpacity(A.foreground,.5).css};}`,O+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`,O+="@keyframes blink_box_shadow_"+this._terminalClass+" { 50% {  border-bottom-style: hidden; }}",O+="@keyframes blink_block_"+this._terminalClass+` { 0% {  background-color: ${A.cursor.css};  color: ${A.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${A.cursor.css}; }}`,O+=`${this._terminalSelector} .${d}.${f} .xterm-cursor.xterm-cursor-blink:not(.xterm-cursor-block) { animation: blink_box_shadow_`+this._terminalClass+` 1s step-end infinite;}${this._terminalSelector} .${d}.${f} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: blink_block_`+this._terminalClass+` 1s step-end infinite;}${this._terminalSelector} .${d} .xterm-cursor.xterm-cursor-block { background-color: ${A.cursor.css}; color: ${A.cursorAccent.css};}${this._terminalSelector} .${d} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${A.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${d} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${A.cursor.css} inset;}${this._terminalSelector} .${d} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${A.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,O+=`${this._terminalSelector} .${S} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${S} div { position: absolute; background-color: ${A.selectionBackgroundOpaque.css};}${this._terminalSelector} .${S} div { position: absolute; background-color: ${A.selectionInactiveBackgroundOpaque.css};}`;for(const[N,W]of A.ansi.entries())O+=`${this._terminalSelector} .${b}${N} { color: ${W.css}; }${this._terminalSelector} .${b}${N}.xterm-dim { color: ${e.color.multiplyOpacity(W,.5).css}; }${this._terminalSelector} .${C}${N} { background-color: ${W.css}; }`;O+=`${this._terminalSelector} .${b}${v.INVERTED_DEFAULT_COLOR} { color: ${e.color.opaque(A.background).css}; }${this._terminalSelector} .${b}${v.INVERTED_DEFAULT_COLOR}.xterm-dim { color: ${e.color.multiplyOpacity(e.color.opaque(A.background),.5).css}; }${this._terminalSelector} .${C}${v.INVERTED_DEFAULT_COLOR} { background-color: ${A.foreground.css}; }`,this._themeStyleElement.textContent=O}_setDefaultSpacing(){const A=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${A}px`,this._rowFactory.defaultSpacing=A}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(A,O){for(let N=this._rowElements.length;N<=O;N++){const W=document.createElement("div");this._rowContainer.appendChild(W),this._rowElements.push(W)}for(;this._rowElements.length>O;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(A,O){this._refreshRowElements(A,O),this._updateDimensions()}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(f)}handleFocus(){this._rowContainer.classList.add(f),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(A,O,N){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(A,O,N),this.renderRows(0,this._bufferService.rows-1),!A||!O)return;const W=A[1]-this._bufferService.buffer.ydisp,q=O[1]-this._bufferService.buffer.ydisp,K=Math.max(W,0),E=Math.min(q,this._bufferService.rows-1);if(K>=this._bufferService.rows||E<0)return;const B=document.createDocumentFragment();if(N){const M=A[0]>O[0];B.appendChild(this._createSelectionElement(K,M?O[0]:A[0],M?A[0]:O[0],E-K+1))}else{const M=W===K?A[0]:0,P=K===q?O[0]:this._bufferService.cols;B.appendChild(this._createSelectionElement(K,M,P));const $=E-K-1;if(B.appendChild(this._createSelectionElement(K+1,0,this._bufferService.cols,$)),K!==E){const U=q===E?O[0]:this._bufferService.cols;B.appendChild(this._createSelectionElement(E,0,U))}}this._selectionContainer.appendChild(B)}_createSelectionElement(A,O,N,W=1){const q=document.createElement("div");return q.style.height=W*this.dimensions.css.cell.height+"px",q.style.top=A*this.dimensions.css.cell.height+"px",q.style.left=O*this.dimensions.css.cell.width+"px",q.style.width=this.dimensions.css.cell.width*(N-O)+"px",q}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(const A of this._rowElements)A.replaceChildren()}renderRows(A,O){const N=this._bufferService.buffer,W=N.ybase+N.y,q=Math.min(N.x,this._bufferService.cols-1),K=this._optionsService.rawOptions.cursorBlink,E=this._optionsService.rawOptions.cursorStyle,B=this._optionsService.rawOptions.cursorInactiveStyle;for(let M=A;M<=O;M++){const P=M+N.ydisp,$=this._rowElements[M],U=N.lines.get(P);if(!$||!U)break;$.replaceChildren(...this._rowFactory.createRow(U,P,P===W,E,B,q,K,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${h}${this._terminalClass}`}_handleLinkHover(A){this._setCellUnderline(A.x1,A.x2,A.y1,A.y2,A.cols,!0)}_handleLinkLeave(A){this._setCellUnderline(A.x1,A.x2,A.y1,A.y2,A.cols,!1)}_setCellUnderline(A,O,N,W,q,K){N<0&&(A=0),W<0&&(O=0);const E=this._bufferService.rows-1;N=Math.max(Math.min(N,E),0),W=Math.max(Math.min(W,E),0),q=Math.min(q,this._bufferService.cols);const B=this._bufferService.buffer,M=B.ybase+B.y,P=Math.min(B.x,q-1),$=this._optionsService.rawOptions.cursorBlink,U=this._optionsService.rawOptions.cursorStyle,J=this._optionsService.rawOptions.cursorInactiveStyle;for(let X=N;X<=W;++X){const ae=X+B.ydisp,w=this._rowElements[X],H=B.lines.get(ae);if(!w||!H)break;w.replaceChildren(...this._rowFactory.createRow(H,ae,ae===M,U,J,P,$,this.dimensions.css.cell.width,this._widthCache,K?X===N?A:0:-1,K?(X===W?O:q)-1:-1))}}};i.DomRenderer=T=l([_(4,r.IInstantiationService),_(5,g.ICharSizeService),_(6,r.IOptionsService),_(7,r.IBufferService),_(8,g.ICoreBrowserService),_(9,g.IThemeService)],T)},3787:function(D,i,a){var l=this&&this.__decorate||function(b,C,f,S){var L,T=arguments.length,A=T<3?C:S===null?S=Object.getOwnPropertyDescriptor(C,f):S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")A=Reflect.decorate(b,C,f,S);else for(var O=b.length-1;O>=0;O--)(L=b[O])&&(A=(T<3?L(A):T>3?L(C,f,A):L(C,f))||A);return T>3&&A&&Object.defineProperty(C,f,A),A},_=this&&this.__param||function(b,C){return function(f,S){C(f,S,b)}};Object.defineProperty(i,"__esModule",{value:!0}),i.DomRendererRowFactory=void 0;const o=a(2223),c=a(643),v=a(511),m=a(2585),g=a(8055),e=a(4725),s=a(4269),t=a(6171),r=a(3734);let h=i.DomRendererRowFactory=class{constructor(b,C,f,S,L,T,A){this._document=b,this._characterJoinerService=C,this._optionsService=f,this._coreBrowserService=S,this._coreService=L,this._decorationService=T,this._themeService=A,this._workCell=new v.CellData,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(b,C,f){this._selectionStart=b,this._selectionEnd=C,this._columnSelectMode=f}createRow(b,C,f,S,L,T,A,O,N,W,q){const K=[],E=this._characterJoinerService.getJoinedCharacters(C),B=this._themeService.colors;let M,P=b.getNoBgTrimmedLength();f&&P<T+1&&(P=T+1);let $=0,U="",J=0,X=0,ae=0,w=!1,H=0,z=!1,F=0;const ee=[],Z=W!==-1&&q!==-1;for(let ne=0;ne<P;ne++){b.loadCell(ne,this._workCell);let _e=this._workCell.getWidth();if(_e===0)continue;let we=!1,Ae=ne,te=this._workCell;if(E.length>0&&ne===E[0][0]){we=!0;const Ee=E.shift();te=new s.JoinedCellData(this._workCell,b.translateToString(!0,Ee[0],Ee[1]),Ee[1]-Ee[0]),Ae=Ee[1]-1,_e=te.getWidth()}const Ie=this._isCellInSelection(ne,C),Ye=f&&ne===T,vt=Z&&ne>=W&&ne<=q;let be=!1;this._decorationService.forEachDecorationAtCell(ne,C,void 0,Ee=>{be=!0});let He=te.getChars()||c.WHITESPACE_CELL_CHAR;if(He===" "&&(te.isUnderline()||te.isOverline())&&(He="Â "),F=_e*O-N.get(He,te.isBold(),te.isItalic()),M){if($&&(Ie&&z||!Ie&&!z&&te.bg===J)&&(Ie&&z&&B.selectionForeground||te.fg===X)&&te.extended.ext===ae&&vt===w&&F===H&&!Ye&&!we&&!be){U+=He,$++;continue}$&&(M.textContent=U),M=this._document.createElement("span"),$=0,U=""}else M=this._document.createElement("span");if(J=te.bg,X=te.fg,ae=te.extended.ext,w=vt,H=F,z=Ie,we&&T>=ne&&T<=Ae&&(T=ne),!this._coreService.isCursorHidden&&Ye){if(ee.push("xterm-cursor"),this._coreBrowserService.isFocused)A&&ee.push("xterm-cursor-blink"),ee.push(S==="bar"?"xterm-cursor-bar":S==="underline"?"xterm-cursor-underline":"xterm-cursor-block");else if(L)switch(L){case"outline":ee.push("xterm-cursor-outline");break;case"block":ee.push("xterm-cursor-block");break;case"bar":ee.push("xterm-cursor-bar");break;case"underline":ee.push("xterm-cursor-underline")}}if(te.isBold()&&ee.push("xterm-bold"),te.isItalic()&&ee.push("xterm-italic"),te.isDim()&&ee.push("xterm-dim"),U=te.isInvisible()?c.WHITESPACE_CELL_CHAR:te.getChars()||c.WHITESPACE_CELL_CHAR,te.isUnderline()&&(ee.push(`xterm-underline-${te.extended.underlineStyle}`),U===" "&&(U="Â "),!te.isUnderlineColorDefault()))if(te.isUnderlineColorRGB())M.style.textDecorationColor=`rgb(${r.AttributeData.toColorRGB(te.getUnderlineColor()).join(",")})`;else{let Ee=te.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&te.isBold()&&Ee<8&&(Ee+=8),M.style.textDecorationColor=B.ansi[Ee].css}te.isOverline()&&(ee.push("xterm-overline"),U===" "&&(U="Â ")),te.isStrikethrough()&&ee.push("xterm-strikethrough"),vt&&(M.style.textDecoration="underline");let Me=te.getFgColor(),ot=te.getFgColorMode(),ke=te.getBgColor(),je=te.getBgColorMode();const pt=!!te.isInverse();if(pt){const Ee=Me;Me=ke,ke=Ee;const Jr=ot;ot=je,je=Jr}let Ne,Ue,qe,St=!1;switch(this._decorationService.forEachDecorationAtCell(ne,C,void 0,Ee=>{Ee.options.layer!=="top"&&St||(Ee.backgroundColorRGB&&(je=50331648,ke=Ee.backgroundColorRGB.rgba>>8&16777215,Ne=Ee.backgroundColorRGB),Ee.foregroundColorRGB&&(ot=50331648,Me=Ee.foregroundColorRGB.rgba>>8&16777215,Ue=Ee.foregroundColorRGB),St=Ee.options.layer==="top")}),!St&&Ie&&(Ne=this._coreBrowserService.isFocused?B.selectionBackgroundOpaque:B.selectionInactiveBackgroundOpaque,ke=Ne.rgba>>8&16777215,je=50331648,St=!0,B.selectionForeground&&(ot=50331648,Me=B.selectionForeground.rgba>>8&16777215,Ue=B.selectionForeground)),St&&ee.push("xterm-decoration-top"),je){case 16777216:case 33554432:qe=B.ansi[ke],ee.push(`xterm-bg-${ke}`);break;case 50331648:qe=g.rgba.toColor(ke>>16,ke>>8&255,255&ke),this._addStyle(M,`background-color:#${d((ke>>>0).toString(16),"0",6)}`);break;default:pt?(qe=B.foreground,ee.push(`xterm-bg-${o.INVERTED_DEFAULT_COLOR}`)):qe=B.background}switch(Ne||te.isDim()&&(Ne=g.color.multiplyOpacity(qe,.5)),ot){case 16777216:case 33554432:te.isBold()&&Me<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(Me+=8),this._applyMinimumContrast(M,qe,B.ansi[Me],te,Ne,void 0)||ee.push(`xterm-fg-${Me}`);break;case 50331648:const Ee=g.rgba.toColor(Me>>16&255,Me>>8&255,255&Me);this._applyMinimumContrast(M,qe,Ee,te,Ne,Ue)||this._addStyle(M,`color:#${d(Me.toString(16),"0",6)}`);break;default:this._applyMinimumContrast(M,qe,B.foreground,te,Ne,void 0)||pt&&ee.push(`xterm-fg-${o.INVERTED_DEFAULT_COLOR}`)}ee.length&&(M.className=ee.join(" "),ee.length=0),Ye||we||be?M.textContent=U:$++,F!==this.defaultSpacing&&(M.style.letterSpacing=`${F}px`),K.push(M),ne=Ae}return M&&$&&(M.textContent=U),K}_applyMinimumContrast(b,C,f,S,L,T){if(this._optionsService.rawOptions.minimumContrastRatio===1||(0,t.excludeFromContrastRatioDemands)(S.getCode()))return!1;const A=this._getContrastCache(S);let O;if(L||T||(O=A.getColor(C.rgba,f.rgba)),O===void 0){const N=this._optionsService.rawOptions.minimumContrastRatio/(S.isDim()?2:1);O=g.color.ensureContrastRatio(L||C,T||f,N),A.setColor((L||C).rgba,(T||f).rgba,O??null)}return!!O&&(this._addStyle(b,`color:${O.css}`),!0)}_getContrastCache(b){return b.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(b,C){b.setAttribute("style",`${b.getAttribute("style")||""}${C};`)}_isCellInSelection(b,C){const f=this._selectionStart,S=this._selectionEnd;return!(!f||!S)&&(this._columnSelectMode?f[0]<=S[0]?b>=f[0]&&C>=f[1]&&b<S[0]&&C<=S[1]:b<f[0]&&C>=f[1]&&b>=S[0]&&C<=S[1]:C>f[1]&&C<S[1]||f[1]===S[1]&&C===f[1]&&b>=f[0]&&b<S[0]||f[1]<S[1]&&C===S[1]&&b<S[0]||f[1]<S[1]&&C===f[1]&&b>=f[0])}};function d(b,C,f){for(;b.length<f;)b=C+b;return b}i.DomRendererRowFactory=h=l([_(1,e.ICharacterJoinerService),_(2,m.IOptionsService),_(3,e.ICoreBrowserService),_(4,m.ICoreService),_(5,m.IDecorationService),_(6,e.IThemeService)],h)},2550:(D,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.WidthCache=void 0,i.WidthCache=class{constructor(a){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=a.createElement("div"),this._container.style.position="absolute",this._container.style.top="-50000px",this._container.style.width="50000px",this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";const l=a.createElement("span"),_=a.createElement("span");_.style.fontWeight="bold";const o=a.createElement("span");o.style.fontStyle="italic";const c=a.createElement("span");c.style.fontWeight="bold",c.style.fontStyle="italic",this._measureElements=[l,_,o,c],this._container.appendChild(l),this._container.appendChild(_),this._container.appendChild(o),this._container.appendChild(c),a.body.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(a,l,_,o){a===this._font&&l===this._fontSize&&_===this._weight&&o===this._weightBold||(this._font=a,this._fontSize=l,this._weight=_,this._weightBold=o,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${_}`,this._measureElements[1].style.fontWeight=`${o}`,this._measureElements[2].style.fontWeight=`${_}`,this._measureElements[3].style.fontWeight=`${o}`,this.clear())}get(a,l,_){let o=0;if(!l&&!_&&a.length===1&&(o=a.charCodeAt(0))<256)return this._flat[o]!==-9999?this._flat[o]:this._flat[o]=this._measure(a,0);let c=a;l&&(c+="B"),_&&(c+="I");let v=this._holey.get(c);if(v===void 0){let m=0;l&&(m|=1),_&&(m|=2),v=this._measure(a,m),this._holey.set(c,v)}return v}_measure(a,l){const _=this._measureElements[l];return _.textContent=a.repeat(32),_.offsetWidth/32}}},2223:(D,i,a)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.TEXT_BASELINE=i.DIM_OPACITY=i.INVERTED_DEFAULT_COLOR=void 0;const l=a(6114);i.INVERTED_DEFAULT_COLOR=257,i.DIM_OPACITY=.5,i.TEXT_BASELINE=l.isFirefox||l.isLegacyEdge?"bottom":"ideographic"},6171:(D,i)=>{function a(l){return 57508<=l&&l<=57558}Object.defineProperty(i,"__esModule",{value:!0}),i.createRenderDimensions=i.excludeFromContrastRatioDemands=i.isRestrictedPowerlineGlyph=i.isPowerlineGlyph=i.throwIfFalsy=void 0,i.throwIfFalsy=function(l){if(!l)throw new Error("value must not be falsy");return l},i.isPowerlineGlyph=a,i.isRestrictedPowerlineGlyph=function(l){return 57520<=l&&l<=57527},i.excludeFromContrastRatioDemands=function(l){return a(l)||function(_){return 9472<=_&&_<=9631}(l)},i.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}}},456:(D,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.SelectionModel=void 0,i.SelectionModel=class{constructor(a){this._bufferService=a,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){const a=this.selectionStart[0]+this.selectionStartLength;return a>this._bufferService.cols?a%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(a/this._bufferService.cols)-1]:[a%this._bufferService.cols,this.selectionStart[1]+Math.floor(a/this._bufferService.cols)]:[a,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){const a=this.selectionStart[0]+this.selectionStartLength;return a>this._bufferService.cols?[a%this._bufferService.cols,this.selectionStart[1]+Math.floor(a/this._bufferService.cols)]:[Math.max(a,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){const a=this.selectionStart,l=this.selectionEnd;return!(!a||!l)&&(a[1]>l[1]||a[1]===l[1]&&a[0]>l[0])}handleTrim(a){return this.selectionStart&&(this.selectionStart[1]-=a),this.selectionEnd&&(this.selectionEnd[1]-=a),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}}},428:function(D,i,a){var l=this&&this.__decorate||function(e,s,t,r){var h,d=arguments.length,b=d<3?s:r===null?r=Object.getOwnPropertyDescriptor(s,t):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(e,s,t,r);else for(var C=e.length-1;C>=0;C--)(h=e[C])&&(b=(d<3?h(b):d>3?h(s,t,b):h(s,t))||b);return d>3&&b&&Object.defineProperty(s,t,b),b},_=this&&this.__param||function(e,s){return function(t,r){s(t,r,e)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CharSizeService=void 0;const o=a(2585),c=a(8460),v=a(844);let m=i.CharSizeService=class extends v.Disposable{get hasValidSize(){return this.width>0&&this.height>0}constructor(e,s,t){super(),this._optionsService=t,this.width=0,this.height=0,this._onCharSizeChange=this.register(new c.EventEmitter),this.onCharSizeChange=this._onCharSizeChange.event,this._measureStrategy=new g(e,s,this._optionsService),this.register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],()=>this.measure()))}measure(){const e=this._measureStrategy.measure();e.width===this.width&&e.height===this.height||(this.width=e.width,this.height=e.height,this._onCharSizeChange.fire())}};i.CharSizeService=m=l([_(2,o.IOptionsService)],m);class g{constructor(s,t,r){this._document=s,this._parentElement=t,this._optionsService=r,this._result={width:0,height:0},this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`;const s={height:Number(this._measureElement.offsetHeight),width:Number(this._measureElement.offsetWidth)};return s.width!==0&&s.height!==0&&(this._result.width=s.width/32,this._result.height=Math.ceil(s.height)),this._result}}},4269:function(D,i,a){var l=this&&this.__decorate||function(s,t,r,h){var d,b=arguments.length,C=b<3?t:h===null?h=Object.getOwnPropertyDescriptor(t,r):h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(s,t,r,h);else for(var f=s.length-1;f>=0;f--)(d=s[f])&&(C=(b<3?d(C):b>3?d(t,r,C):d(t,r))||C);return b>3&&C&&Object.defineProperty(t,r,C),C},_=this&&this.__param||function(s,t){return function(r,h){t(r,h,s)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CharacterJoinerService=i.JoinedCellData=void 0;const o=a(3734),c=a(643),v=a(511),m=a(2585);class g extends o.AttributeData{constructor(t,r,h){super(),this.content=0,this.combinedData="",this.fg=t.fg,this.bg=t.bg,this.combinedData=r,this._width=h}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(t){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}i.JoinedCellData=g;let e=i.CharacterJoinerService=class zs{constructor(t){this._bufferService=t,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new v.CellData}register(t){const r={id:this._nextCharacterJoinerId++,handler:t};return this._characterJoiners.push(r),r.id}deregister(t){for(let r=0;r<this._characterJoiners.length;r++)if(this._characterJoiners[r].id===t)return this._characterJoiners.splice(r,1),!0;return!1}getJoinedCharacters(t){if(this._characterJoiners.length===0)return[];const r=this._bufferService.buffer.lines.get(t);if(!r||r.length===0)return[];const h=[],d=r.translateToString(!0);let b=0,C=0,f=0,S=r.getFg(0),L=r.getBg(0);for(let T=0;T<r.getTrimmedLength();T++)if(r.loadCell(T,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==S||this._workCell.bg!==L){if(T-b>1){const A=this._getJoinedRanges(d,f,C,r,b);for(let O=0;O<A.length;O++)h.push(A[O])}b=T,f=C,S=this._workCell.fg,L=this._workCell.bg}C+=this._workCell.getChars().length||c.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-b>1){const T=this._getJoinedRanges(d,f,C,r,b);for(let A=0;A<T.length;A++)h.push(T[A])}return h}_getJoinedRanges(t,r,h,d,b){const C=t.substring(r,h);let f=[];try{f=this._characterJoiners[0].handler(C)}catch(S){console.error(S)}for(let S=1;S<this._characterJoiners.length;S++)try{const L=this._characterJoiners[S].handler(C);for(let T=0;T<L.length;T++)zs._mergeRanges(f,L[T])}catch(L){console.error(L)}return this._stringRangesToCellRanges(f,d,b),f}_stringRangesToCellRanges(t,r,h){let d=0,b=!1,C=0,f=t[d];if(f){for(let S=h;S<this._bufferService.cols;S++){const L=r.getWidth(S),T=r.getString(S).length||c.WHITESPACE_CELL_CHAR.length;if(L!==0){if(!b&&f[0]<=C&&(f[0]=S,b=!0),f[1]<=C){if(f[1]=S,f=t[++d],!f)break;f[0]<=C?(f[0]=S,b=!0):b=!1}C+=T}}f&&(f[1]=this._bufferService.cols)}}static _mergeRanges(t,r){let h=!1;for(let d=0;d<t.length;d++){const b=t[d];if(h){if(r[1]<=b[0])return t[d-1][1]=r[1],t;if(r[1]<=b[1])return t[d-1][1]=Math.max(r[1],b[1]),t.splice(d,1),t;t.splice(d,1),d--}else{if(r[1]<=b[0])return t.splice(d,0,r),t;if(r[1]<=b[1])return b[0]=Math.min(r[0],b[0]),t;r[0]<b[1]&&(b[0]=Math.min(r[0],b[0]),h=!0)}}return h?t[t.length-1][1]=r[1]:t.push(r),t}};i.CharacterJoinerService=e=l([_(0,m.IBufferService)],e)},5114:(D,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CoreBrowserService=void 0,i.CoreBrowserService=class{constructor(a,l){this._textarea=a,this.window=l,this._isFocused=!1,this._cachedIsFocused=void 0,this._textarea.addEventListener("focus",()=>this._isFocused=!0),this._textarea.addEventListener("blur",()=>this._isFocused=!1)}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask(()=>this._cachedIsFocused=void 0)),this._cachedIsFocused}}},8934:function(D,i,a){var l=this&&this.__decorate||function(m,g,e,s){var t,r=arguments.length,h=r<3?g:s===null?s=Object.getOwnPropertyDescriptor(g,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(m,g,e,s);else for(var d=m.length-1;d>=0;d--)(t=m[d])&&(h=(r<3?t(h):r>3?t(g,e,h):t(g,e))||h);return r>3&&h&&Object.defineProperty(g,e,h),h},_=this&&this.__param||function(m,g){return function(e,s){g(e,s,m)}};Object.defineProperty(i,"__esModule",{value:!0}),i.MouseService=void 0;const o=a(4725),c=a(9806);let v=i.MouseService=class{constructor(m,g){this._renderService=m,this._charSizeService=g}getCoords(m,g,e,s,t){return(0,c.getCoords)(window,m,g,e,s,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,t)}getMouseReportCoords(m,g){const e=(0,c.getCoordsRelativeToElement)(window,m,g);if(this._charSizeService.hasValidSize)return e[0]=Math.min(Math.max(e[0],0),this._renderService.dimensions.css.canvas.width-1),e[1]=Math.min(Math.max(e[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(e[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(e[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(e[0]),y:Math.floor(e[1])}}};i.MouseService=v=l([_(0,o.IRenderService),_(1,o.ICharSizeService)],v)},3230:function(D,i,a){var l=this&&this.__decorate||function(h,d,b,C){var f,S=arguments.length,L=S<3?d:C===null?C=Object.getOwnPropertyDescriptor(d,b):C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(h,d,b,C);else for(var T=h.length-1;T>=0;T--)(f=h[T])&&(L=(S<3?f(L):S>3?f(d,b,L):f(d,b))||L);return S>3&&L&&Object.defineProperty(d,b,L),L},_=this&&this.__param||function(h,d){return function(b,C){d(b,C,h)}};Object.defineProperty(i,"__esModule",{value:!0}),i.RenderService=void 0;const o=a(3656),c=a(6193),v=a(5596),m=a(4725),g=a(8460),e=a(844),s=a(7226),t=a(2585);let r=i.RenderService=class extends e.Disposable{get dimensions(){return this._renderer.value.dimensions}constructor(h,d,b,C,f,S,L,T){if(super(),this._rowCount=h,this._charSizeService=C,this._renderer=this.register(new e.MutableDisposable),this._pausedResizeTask=new s.DebouncedIdleTask,this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this.register(new g.EventEmitter),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this.register(new g.EventEmitter),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this.register(new g.EventEmitter),this.onRender=this._onRender.event,this._onRefreshRequest=this.register(new g.EventEmitter),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new c.RenderDebouncer(L.window,(A,O)=>this._renderRows(A,O)),this.register(this._renderDebouncer),this._screenDprMonitor=new v.ScreenDprMonitor(L.window),this._screenDprMonitor.setListener(()=>this.handleDevicePixelRatioChange()),this.register(this._screenDprMonitor),this.register(S.onResize(()=>this._fullRefresh())),this.register(S.buffers.onBufferActivate(()=>{var A;return(A=this._renderer.value)===null||A===void 0?void 0:A.clear()})),this.register(b.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._charSizeService.onCharSizeChange(()=>this.handleCharSizeChanged())),this.register(f.onDecorationRegistered(()=>this._fullRefresh())),this.register(f.onDecorationRemoved(()=>this._fullRefresh())),this.register(b.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio"],()=>{this.clear(),this.handleResize(S.cols,S.rows),this._fullRefresh()})),this.register(b.onMultipleOptionChange(["cursorBlink","cursorStyle"],()=>this.refreshRows(S.buffer.y,S.buffer.y,!0))),this.register((0,o.addDisposableDomListener)(L.window,"resize",()=>this.handleDevicePixelRatioChange())),this.register(T.onChangeColors(()=>this._fullRefresh())),"IntersectionObserver"in L.window){const A=new L.window.IntersectionObserver(O=>this._handleIntersectionChange(O[O.length-1]),{threshold:0});A.observe(d),this.register({dispose:()=>A.disconnect()})}}_handleIntersectionChange(h){this._isPaused=h.isIntersecting===void 0?h.intersectionRatio===0:!h.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(h,d,b=!1){this._isPaused?this._needsFullRefresh=!0:(b||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(h,d,this._rowCount))}_renderRows(h,d){this._renderer.value&&(h=Math.min(h,this._rowCount-1),d=Math.min(d,this._rowCount-1),this._renderer.value.renderRows(h,d),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:h,end:d}),this._onRender.fire({start:h,end:d}),this._isNextRenderRedrawOnly=!0)}resize(h,d){this._rowCount=d,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(h){this._renderer.value=h,this._renderer.value.onRequestRedraw(d=>this.refreshRows(d.start,d.end,!0)),this._needsSelectionRefresh=!0,this._fullRefresh()}addRefreshCallback(h){return this._renderDebouncer.addRefreshCallback(h)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){var h,d;this._renderer.value&&((d=(h=this._renderer.value).clearTextureAtlas)===null||d===void 0||d.call(h),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(h,d){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set(()=>this._renderer.value.handleResize(h,d)):this._renderer.value.handleResize(h,d),this._fullRefresh())}handleCharSizeChanged(){var h;(h=this._renderer.value)===null||h===void 0||h.handleCharSizeChanged()}handleBlur(){var h;(h=this._renderer.value)===null||h===void 0||h.handleBlur()}handleFocus(){var h;(h=this._renderer.value)===null||h===void 0||h.handleFocus()}handleSelectionChanged(h,d,b){var C;this._selectionState.start=h,this._selectionState.end=d,this._selectionState.columnSelectMode=b,(C=this._renderer.value)===null||C===void 0||C.handleSelectionChanged(h,d,b)}handleCursorMove(){var h;(h=this._renderer.value)===null||h===void 0||h.handleCursorMove()}clear(){var h;(h=this._renderer.value)===null||h===void 0||h.clear()}};i.RenderService=r=l([_(2,t.IOptionsService),_(3,m.ICharSizeService),_(4,t.IDecorationService),_(5,t.IBufferService),_(6,m.ICoreBrowserService),_(7,m.IThemeService)],r)},9312:function(D,i,a){var l=this&&this.__decorate||function(f,S,L,T){var A,O=arguments.length,N=O<3?S:T===null?T=Object.getOwnPropertyDescriptor(S,L):T;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")N=Reflect.decorate(f,S,L,T);else for(var W=f.length-1;W>=0;W--)(A=f[W])&&(N=(O<3?A(N):O>3?A(S,L,N):A(S,L))||N);return O>3&&N&&Object.defineProperty(S,L,N),N},_=this&&this.__param||function(f,S){return function(L,T){S(L,T,f)}};Object.defineProperty(i,"__esModule",{value:!0}),i.SelectionService=void 0;const o=a(9806),c=a(9504),v=a(456),m=a(4725),g=a(8460),e=a(844),s=a(6114),t=a(4841),r=a(511),h=a(2585),d="Â ",b=new RegExp(d,"g");let C=i.SelectionService=class extends e.Disposable{constructor(f,S,L,T,A,O,N,W,q){super(),this._element=f,this._screenElement=S,this._linkifier=L,this._bufferService=T,this._coreService=A,this._mouseService=O,this._optionsService=N,this._renderService=W,this._coreBrowserService=q,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new r.CellData,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this.register(new g.EventEmitter),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this.register(new g.EventEmitter),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this.register(new g.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this.register(new g.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=K=>this._handleMouseMove(K),this._mouseUpListener=K=>this._handleMouseUp(K),this._coreService.onUserInput(()=>{this.hasSelection&&this.clearSelection()}),this._trimListener=this._bufferService.buffer.lines.onTrim(K=>this._handleTrim(K)),this.register(this._bufferService.buffers.onBufferActivate(K=>this._handleBufferActivate(K))),this.enable(),this._model=new v.SelectionModel(this._bufferService),this._activeSelectionMode=0,this.register((0,e.toDisposable)(()=>{this._removeMouseDownListeners()}))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){const f=this._model.finalSelectionStart,S=this._model.finalSelectionEnd;return!(!f||!S||f[0]===S[0]&&f[1]===S[1])}get selectionText(){const f=this._model.finalSelectionStart,S=this._model.finalSelectionEnd;if(!f||!S)return"";const L=this._bufferService.buffer,T=[];if(this._activeSelectionMode===3){if(f[0]===S[0])return"";const A=f[0]<S[0]?f[0]:S[0],O=f[0]<S[0]?S[0]:f[0];for(let N=f[1];N<=S[1];N++){const W=L.translateBufferLineToString(N,!0,A,O);T.push(W)}}else{const A=f[1]===S[1]?S[0]:void 0;T.push(L.translateBufferLineToString(f[1],!0,f[0],A));for(let O=f[1]+1;O<=S[1]-1;O++){const N=L.lines.get(O),W=L.translateBufferLineToString(O,!0);N!=null&&N.isWrapped?T[T.length-1]+=W:T.push(W)}if(f[1]!==S[1]){const O=L.lines.get(S[1]),N=L.translateBufferLineToString(S[1],!0,0,S[0]);O&&O.isWrapped?T[T.length-1]+=N:T.push(N)}}return T.map(A=>A.replace(b," ")).join(s.isWindows?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(f){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._refresh())),s.isLinux&&f&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(f){const S=this._getMouseBufferCoords(f),L=this._model.finalSelectionStart,T=this._model.finalSelectionEnd;return!!(L&&T&&S)&&this._areCoordsInSelection(S,L,T)}isCellInSelection(f,S){const L=this._model.finalSelectionStart,T=this._model.finalSelectionEnd;return!(!L||!T)&&this._areCoordsInSelection([f,S],L,T)}_areCoordsInSelection(f,S,L){return f[1]>S[1]&&f[1]<L[1]||S[1]===L[1]&&f[1]===S[1]&&f[0]>=S[0]&&f[0]<L[0]||S[1]<L[1]&&f[1]===L[1]&&f[0]<L[0]||S[1]<L[1]&&f[1]===S[1]&&f[0]>=S[0]}_selectWordAtCursor(f,S){var L,T;const A=(T=(L=this._linkifier.currentLink)===null||L===void 0?void 0:L.link)===null||T===void 0?void 0:T.range;if(A)return this._model.selectionStart=[A.start.x-1,A.start.y-1],this._model.selectionStartLength=(0,t.getRangeLength)(A,this._bufferService.cols),this._model.selectionEnd=void 0,!0;const O=this._getMouseBufferCoords(f);return!!O&&(this._selectWordAt(O,S),this._model.selectionEnd=void 0,!0)}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(f,S){this._model.clearSelection(),f=Math.max(f,0),S=Math.min(S,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,f],this._model.selectionEnd=[this._bufferService.cols,S],this.refresh(),this._onSelectionChange.fire()}_handleTrim(f){this._model.handleTrim(f)&&this.refresh()}_getMouseBufferCoords(f){const S=this._mouseService.getCoords(f,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(S)return S[0]--,S[1]--,S[1]+=this._bufferService.buffer.ydisp,S}_getMouseEventScrollAmount(f){let S=(0,o.getCoordsRelativeToElement)(this._coreBrowserService.window,f,this._screenElement)[1];const L=this._renderService.dimensions.css.canvas.height;return S>=0&&S<=L?0:(S>L&&(S-=L),S=Math.min(Math.max(S,-50),50),S/=50,S/Math.abs(S)+Math.round(14*S))}shouldForceSelection(f){return s.isMac?f.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:f.shiftKey}handleMouseDown(f){if(this._mouseDownTimeStamp=f.timeStamp,(f.button!==2||!this.hasSelection)&&f.button===0){if(!this._enabled){if(!this.shouldForceSelection(f))return;f.stopPropagation()}f.preventDefault(),this._dragScrollAmount=0,this._enabled&&f.shiftKey?this._handleIncrementalClick(f):f.detail===1?this._handleSingleClick(f):f.detail===2?this._handleDoubleClick(f):f.detail===3&&this._handleTripleClick(f),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval(()=>this._dragScroll(),50)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(f){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(f))}_handleSingleClick(f){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(f)?3:0,this._model.selectionStart=this._getMouseBufferCoords(f),!this._model.selectionStart)return;this._model.selectionEnd=void 0;const S=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);S&&S.length!==this._model.selectionStart[0]&&S.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(f){this._selectWordAtCursor(f,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(f){const S=this._getMouseBufferCoords(f);S&&(this._activeSelectionMode=2,this._selectLineAt(S[1]))}shouldColumnSelect(f){return f.altKey&&!(s.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(f){if(f.stopImmediatePropagation(),!this._model.selectionStart)return;const S=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(f),!this._model.selectionEnd)return void this.refresh(!0);this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(f),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));const L=this._bufferService.buffer;if(this._model.selectionEnd[1]<L.lines.length){const T=L.lines.get(this._model.selectionEnd[1]);T&&T.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]++}S&&S[0]===this._model.selectionEnd[0]&&S[1]===this._model.selectionEnd[1]||this.refresh(!0)}_dragScroll(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});const f=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(f.ydisp+this._bufferService.rows,f.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=f.ydisp),this.refresh()}}_handleMouseUp(f){const S=f.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&S<500&&f.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){const L=this._mouseService.getCoords(f,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(L&&L[0]!==void 0&&L[1]!==void 0){const T=(0,c.moveToCellSequence)(L[0]-1,L[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(T,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){const f=this._model.finalSelectionStart,S=this._model.finalSelectionEnd,L=!(!f||!S||f[0]===S[0]&&f[1]===S[1]);L?f&&S&&(this._oldSelectionStart&&this._oldSelectionEnd&&f[0]===this._oldSelectionStart[0]&&f[1]===this._oldSelectionStart[1]&&S[0]===this._oldSelectionEnd[0]&&S[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(f,S,L)):this._oldHasSelection&&this._fireOnSelectionChange(f,S,L)}_fireOnSelectionChange(f,S,L){this._oldSelectionStart=f,this._oldSelectionEnd=S,this._oldHasSelection=L,this._onSelectionChange.fire()}_handleBufferActivate(f){this.clearSelection(),this._trimListener.dispose(),this._trimListener=f.activeBuffer.lines.onTrim(S=>this._handleTrim(S))}_convertViewportColToCharacterIndex(f,S){let L=S;for(let T=0;S>=T;T++){const A=f.loadCell(T,this._workCell).getChars().length;this._workCell.getWidth()===0?L--:A>1&&S!==T&&(L+=A-1)}return L}setSelection(f,S,L){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[f,S],this._model.selectionStartLength=L,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(f){this._isClickInSelection(f)||(this._selectWordAtCursor(f,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(f,S,L=!0,T=!0){if(f[0]>=this._bufferService.cols)return;const A=this._bufferService.buffer,O=A.lines.get(f[1]);if(!O)return;const N=A.translateBufferLineToString(f[1],!1);let W=this._convertViewportColToCharacterIndex(O,f[0]),q=W;const K=f[0]-W;let E=0,B=0,M=0,P=0;if(N.charAt(W)===" "){for(;W>0&&N.charAt(W-1)===" ";)W--;for(;q<N.length&&N.charAt(q+1)===" ";)q++}else{let J=f[0],X=f[0];O.getWidth(J)===0&&(E++,J--),O.getWidth(X)===2&&(B++,X++);const ae=O.getString(X).length;for(ae>1&&(P+=ae-1,q+=ae-1);J>0&&W>0&&!this._isCharWordSeparator(O.loadCell(J-1,this._workCell));){O.loadCell(J-1,this._workCell);const w=this._workCell.getChars().length;this._workCell.getWidth()===0?(E++,J--):w>1&&(M+=w-1,W-=w-1),W--,J--}for(;X<O.length&&q+1<N.length&&!this._isCharWordSeparator(O.loadCell(X+1,this._workCell));){O.loadCell(X+1,this._workCell);const w=this._workCell.getChars().length;this._workCell.getWidth()===2?(B++,X++):w>1&&(P+=w-1,q+=w-1),q++,X++}}q++;let $=W+K-E+M,U=Math.min(this._bufferService.cols,q-W+E+B-M-P);if(S||N.slice(W,q).trim()!==""){if(L&&$===0&&O.getCodePoint(0)!==32){const J=A.lines.get(f[1]-1);if(J&&O.isWrapped&&J.getCodePoint(this._bufferService.cols-1)!==32){const X=this._getWordAt([this._bufferService.cols-1,f[1]-1],!1,!0,!1);if(X){const ae=this._bufferService.cols-X.start;$-=ae,U+=ae}}}if(T&&$+U===this._bufferService.cols&&O.getCodePoint(this._bufferService.cols-1)!==32){const J=A.lines.get(f[1]+1);if(J!=null&&J.isWrapped&&J.getCodePoint(0)!==32){const X=this._getWordAt([0,f[1]+1],!1,!1,!0);X&&(U+=X.length)}}return{start:$,length:U}}}_selectWordAt(f,S){const L=this._getWordAt(f,S);if(L){for(;L.start<0;)L.start+=this._bufferService.cols,f[1]--;this._model.selectionStart=[L.start,f[1]],this._model.selectionStartLength=L.length}}_selectToWordAt(f){const S=this._getWordAt(f,!0);if(S){let L=f[1];for(;S.start<0;)S.start+=this._bufferService.cols,L--;if(!this._model.areSelectionValuesReversed())for(;S.start+S.length>this._bufferService.cols;)S.length-=this._bufferService.cols,L++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?S.start:S.start+S.length,L]}}_isCharWordSeparator(f){return f.getWidth()!==0&&this._optionsService.rawOptions.wordSeparator.indexOf(f.getChars())>=0}_selectLineAt(f){const S=this._bufferService.buffer.getWrappedRangeForLine(f),L={start:{x:0,y:S.first},end:{x:this._bufferService.cols-1,y:S.last}};this._model.selectionStart=[0,S.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,t.getRangeLength)(L,this._bufferService.cols)}};i.SelectionService=C=l([_(3,h.IBufferService),_(4,h.ICoreService),_(5,m.IMouseService),_(6,h.IOptionsService),_(7,m.IRenderService),_(8,m.ICoreBrowserService)],C)},4725:(D,i,a)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.IThemeService=i.ICharacterJoinerService=i.ISelectionService=i.IRenderService=i.IMouseService=i.ICoreBrowserService=i.ICharSizeService=void 0;const l=a(8343);i.ICharSizeService=(0,l.createDecorator)("CharSizeService"),i.ICoreBrowserService=(0,l.createDecorator)("CoreBrowserService"),i.IMouseService=(0,l.createDecorator)("MouseService"),i.IRenderService=(0,l.createDecorator)("RenderService"),i.ISelectionService=(0,l.createDecorator)("SelectionService"),i.ICharacterJoinerService=(0,l.createDecorator)("CharacterJoinerService"),i.IThemeService=(0,l.createDecorator)("ThemeService")},6731:function(D,i,a){var l=this&&this.__decorate||function(C,f,S,L){var T,A=arguments.length,O=A<3?f:L===null?L=Object.getOwnPropertyDescriptor(f,S):L;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")O=Reflect.decorate(C,f,S,L);else for(var N=C.length-1;N>=0;N--)(T=C[N])&&(O=(A<3?T(O):A>3?T(f,S,O):T(f,S))||O);return A>3&&O&&Object.defineProperty(f,S,O),O},_=this&&this.__param||function(C,f){return function(S,L){f(S,L,C)}};Object.defineProperty(i,"__esModule",{value:!0}),i.ThemeService=i.DEFAULT_ANSI_COLORS=void 0;const o=a(7239),c=a(8055),v=a(8460),m=a(844),g=a(2585),e=c.css.toColor("#ffffff"),s=c.css.toColor("#000000"),t=c.css.toColor("#ffffff"),r=c.css.toColor("#000000"),h={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};i.DEFAULT_ANSI_COLORS=Object.freeze((()=>{const C=[c.css.toColor("#2e3436"),c.css.toColor("#cc0000"),c.css.toColor("#4e9a06"),c.css.toColor("#c4a000"),c.css.toColor("#3465a4"),c.css.toColor("#75507b"),c.css.toColor("#06989a"),c.css.toColor("#d3d7cf"),c.css.toColor("#555753"),c.css.toColor("#ef2929"),c.css.toColor("#8ae234"),c.css.toColor("#fce94f"),c.css.toColor("#729fcf"),c.css.toColor("#ad7fa8"),c.css.toColor("#34e2e2"),c.css.toColor("#eeeeec")],f=[0,95,135,175,215,255];for(let S=0;S<216;S++){const L=f[S/36%6|0],T=f[S/6%6|0],A=f[S%6];C.push({css:c.channels.toCss(L,T,A),rgba:c.channels.toRgba(L,T,A)})}for(let S=0;S<24;S++){const L=8+10*S;C.push({css:c.channels.toCss(L,L,L),rgba:c.channels.toRgba(L,L,L)})}return C})());let d=i.ThemeService=class extends m.Disposable{get colors(){return this._colors}constructor(C){super(),this._optionsService=C,this._contrastCache=new o.ColorContrastCache,this._halfContrastCache=new o.ColorContrastCache,this._onChangeColors=this.register(new v.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:e,background:s,cursor:t,cursorAccent:r,selectionForeground:void 0,selectionBackgroundTransparent:h,selectionBackgroundOpaque:c.color.blend(s,h),selectionInactiveBackgroundTransparent:h,selectionInactiveBackgroundOpaque:c.color.blend(s,h),ansi:i.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",()=>this._contrastCache.clear())),this.register(this._optionsService.onSpecificOptionChange("theme",()=>this._setTheme(this._optionsService.rawOptions.theme)))}_setTheme(C={}){const f=this._colors;if(f.foreground=b(C.foreground,e),f.background=b(C.background,s),f.cursor=b(C.cursor,t),f.cursorAccent=b(C.cursorAccent,r),f.selectionBackgroundTransparent=b(C.selectionBackground,h),f.selectionBackgroundOpaque=c.color.blend(f.background,f.selectionBackgroundTransparent),f.selectionInactiveBackgroundTransparent=b(C.selectionInactiveBackground,f.selectionBackgroundTransparent),f.selectionInactiveBackgroundOpaque=c.color.blend(f.background,f.selectionInactiveBackgroundTransparent),f.selectionForeground=C.selectionForeground?b(C.selectionForeground,c.NULL_COLOR):void 0,f.selectionForeground===c.NULL_COLOR&&(f.selectionForeground=void 0),c.color.isOpaque(f.selectionBackgroundTransparent)&&(f.selectionBackgroundTransparent=c.color.opacity(f.selectionBackgroundTransparent,.3)),c.color.isOpaque(f.selectionInactiveBackgroundTransparent)&&(f.selectionInactiveBackgroundTransparent=c.color.opacity(f.selectionInactiveBackgroundTransparent,.3)),f.ansi=i.DEFAULT_ANSI_COLORS.slice(),f.ansi[0]=b(C.black,i.DEFAULT_ANSI_COLORS[0]),f.ansi[1]=b(C.red,i.DEFAULT_ANSI_COLORS[1]),f.ansi[2]=b(C.green,i.DEFAULT_ANSI_COLORS[2]),f.ansi[3]=b(C.yellow,i.DEFAULT_ANSI_COLORS[3]),f.ansi[4]=b(C.blue,i.DEFAULT_ANSI_COLORS[4]),f.ansi[5]=b(C.magenta,i.DEFAULT_ANSI_COLORS[5]),f.ansi[6]=b(C.cyan,i.DEFAULT_ANSI_COLORS[6]),f.ansi[7]=b(C.white,i.DEFAULT_ANSI_COLORS[7]),f.ansi[8]=b(C.brightBlack,i.DEFAULT_ANSI_COLORS[8]),f.ansi[9]=b(C.brightRed,i.DEFAULT_ANSI_COLORS[9]),f.ansi[10]=b(C.brightGreen,i.DEFAULT_ANSI_COLORS[10]),f.ansi[11]=b(C.brightYellow,i.DEFAULT_ANSI_COLORS[11]),f.ansi[12]=b(C.brightBlue,i.DEFAULT_ANSI_COLORS[12]),f.ansi[13]=b(C.brightMagenta,i.DEFAULT_ANSI_COLORS[13]),f.ansi[14]=b(C.brightCyan,i.DEFAULT_ANSI_COLORS[14]),f.ansi[15]=b(C.brightWhite,i.DEFAULT_ANSI_COLORS[15]),C.extendedAnsi){const S=Math.min(f.ansi.length-16,C.extendedAnsi.length);for(let L=0;L<S;L++)f.ansi[L+16]=b(C.extendedAnsi[L],i.DEFAULT_ANSI_COLORS[L+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(C){this._restoreColor(C),this._onChangeColors.fire(this.colors)}_restoreColor(C){if(C!==void 0)switch(C){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[C]=this._restoreColors.ansi[C]}else for(let f=0;f<this._restoreColors.ansi.length;++f)this._colors.ansi[f]=this._restoreColors.ansi[f]}modifyColors(C){C(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function b(C,f){if(C!==void 0)try{return c.css.toColor(C)}catch{}return f}i.ThemeService=d=l([_(0,g.IOptionsService)],d)},6349:(D,i,a)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CircularList=void 0;const l=a(8460),_=a(844);class o extends _.Disposable{constructor(v){super(),this._maxLength=v,this.onDeleteEmitter=this.register(new l.EventEmitter),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this.register(new l.EventEmitter),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this.register(new l.EventEmitter),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(v){if(this._maxLength===v)return;const m=new Array(v);for(let g=0;g<Math.min(v,this.length);g++)m[g]=this._array[this._getCyclicIndex(g)];this._array=m,this._maxLength=v,this._startIndex=0}get length(){return this._length}set length(v){if(v>this._length)for(let m=this._length;m<v;m++)this._array[m]=void 0;this._length=v}get(v){return this._array[this._getCyclicIndex(v)]}set(v,m){this._array[this._getCyclicIndex(v)]=m}push(v){this._array[this._getCyclicIndex(this._length)]=v,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(v,m,...g){if(m){for(let e=v;e<this._length-m;e++)this._array[this._getCyclicIndex(e)]=this._array[this._getCyclicIndex(e+m)];this._length-=m,this.onDeleteEmitter.fire({index:v,amount:m})}for(let e=this._length-1;e>=v;e--)this._array[this._getCyclicIndex(e+g.length)]=this._array[this._getCyclicIndex(e)];for(let e=0;e<g.length;e++)this._array[this._getCyclicIndex(v+e)]=g[e];if(g.length&&this.onInsertEmitter.fire({index:v,amount:g.length}),this._length+g.length>this._maxLength){const e=this._length+g.length-this._maxLength;this._startIndex+=e,this._length=this._maxLength,this.onTrimEmitter.fire(e)}else this._length+=g.length}trimStart(v){v>this._length&&(v=this._length),this._startIndex+=v,this._length-=v,this.onTrimEmitter.fire(v)}shiftElements(v,m,g){if(!(m<=0)){if(v<0||v>=this._length)throw new Error("start argument out of range");if(v+g<0)throw new Error("Cannot shift elements in list beyond index 0");if(g>0){for(let s=m-1;s>=0;s--)this.set(v+s+g,this.get(v+s));const e=v+m+g-this._length;if(e>0)for(this._length+=e;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let e=0;e<m;e++)this.set(v+e+g,this.get(v+e))}}_getCyclicIndex(v){return(this._startIndex+v)%this._maxLength}}i.CircularList=o},1439:(D,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.clone=void 0,i.clone=function a(l,_=5){if(typeof l!="object")return l;const o=Array.isArray(l)?[]:{};for(const c in l)o[c]=_<=1?l[c]:l[c]&&a(l[c],_-1);return o}},8055:(D,i,a)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.contrastRatio=i.toPaddedHex=i.rgba=i.rgb=i.css=i.color=i.channels=i.NULL_COLOR=void 0;const l=a(6114);let _=0,o=0,c=0,v=0;var m,g,e,s,t;function r(d){const b=d.toString(16);return b.length<2?"0"+b:b}function h(d,b){return d<b?(b+.05)/(d+.05):(d+.05)/(b+.05)}i.NULL_COLOR={css:"#00000000",rgba:0},function(d){d.toCss=function(b,C,f,S){return S!==void 0?`#${r(b)}${r(C)}${r(f)}${r(S)}`:`#${r(b)}${r(C)}${r(f)}`},d.toRgba=function(b,C,f,S=255){return(b<<24|C<<16|f<<8|S)>>>0}}(m||(i.channels=m={})),function(d){function b(C,f){return v=Math.round(255*f),[_,o,c]=t.toChannels(C.rgba),{css:m.toCss(_,o,c,v),rgba:m.toRgba(_,o,c,v)}}d.blend=function(C,f){if(v=(255&f.rgba)/255,v===1)return{css:f.css,rgba:f.rgba};const S=f.rgba>>24&255,L=f.rgba>>16&255,T=f.rgba>>8&255,A=C.rgba>>24&255,O=C.rgba>>16&255,N=C.rgba>>8&255;return _=A+Math.round((S-A)*v),o=O+Math.round((L-O)*v),c=N+Math.round((T-N)*v),{css:m.toCss(_,o,c),rgba:m.toRgba(_,o,c)}},d.isOpaque=function(C){return(255&C.rgba)==255},d.ensureContrastRatio=function(C,f,S){const L=t.ensureContrastRatio(C.rgba,f.rgba,S);if(L)return t.toColor(L>>24&255,L>>16&255,L>>8&255)},d.opaque=function(C){const f=(255|C.rgba)>>>0;return[_,o,c]=t.toChannels(f),{css:m.toCss(_,o,c),rgba:f}},d.opacity=b,d.multiplyOpacity=function(C,f){return v=255&C.rgba,b(C,v*f/255)},d.toColorRGB=function(C){return[C.rgba>>24&255,C.rgba>>16&255,C.rgba>>8&255]}}(g||(i.color=g={})),function(d){let b,C;if(!l.isNode){const f=document.createElement("canvas");f.width=1,f.height=1;const S=f.getContext("2d",{willReadFrequently:!0});S&&(b=S,b.globalCompositeOperation="copy",C=b.createLinearGradient(0,0,1,1))}d.toColor=function(f){if(f.match(/#[\da-f]{3,8}/i))switch(f.length){case 4:return _=parseInt(f.slice(1,2).repeat(2),16),o=parseInt(f.slice(2,3).repeat(2),16),c=parseInt(f.slice(3,4).repeat(2),16),t.toColor(_,o,c);case 5:return _=parseInt(f.slice(1,2).repeat(2),16),o=parseInt(f.slice(2,3).repeat(2),16),c=parseInt(f.slice(3,4).repeat(2),16),v=parseInt(f.slice(4,5).repeat(2),16),t.toColor(_,o,c,v);case 7:return{css:f,rgba:(parseInt(f.slice(1),16)<<8|255)>>>0};case 9:return{css:f,rgba:parseInt(f.slice(1),16)>>>0}}const S=f.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(S)return _=parseInt(S[1]),o=parseInt(S[2]),c=parseInt(S[3]),v=Math.round(255*(S[5]===void 0?1:parseFloat(S[5]))),t.toColor(_,o,c,v);if(!b||!C)throw new Error("css.toColor: Unsupported css format");if(b.fillStyle=C,b.fillStyle=f,typeof b.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(b.fillRect(0,0,1,1),[_,o,c,v]=b.getImageData(0,0,1,1).data,v!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:m.toRgba(_,o,c,v),css:f}}}(e||(i.css=e={})),function(d){function b(C,f,S){const L=C/255,T=f/255,A=S/255;return .2126*(L<=.03928?L/12.92:Math.pow((L+.055)/1.055,2.4))+.7152*(T<=.03928?T/12.92:Math.pow((T+.055)/1.055,2.4))+.0722*(A<=.03928?A/12.92:Math.pow((A+.055)/1.055,2.4))}d.relativeLuminance=function(C){return b(C>>16&255,C>>8&255,255&C)},d.relativeLuminance2=b}(s||(i.rgb=s={})),function(d){function b(f,S,L){const T=f>>24&255,A=f>>16&255,O=f>>8&255;let N=S>>24&255,W=S>>16&255,q=S>>8&255,K=h(s.relativeLuminance2(N,W,q),s.relativeLuminance2(T,A,O));for(;K<L&&(N>0||W>0||q>0);)N-=Math.max(0,Math.ceil(.1*N)),W-=Math.max(0,Math.ceil(.1*W)),q-=Math.max(0,Math.ceil(.1*q)),K=h(s.relativeLuminance2(N,W,q),s.relativeLuminance2(T,A,O));return(N<<24|W<<16|q<<8|255)>>>0}function C(f,S,L){const T=f>>24&255,A=f>>16&255,O=f>>8&255;let N=S>>24&255,W=S>>16&255,q=S>>8&255,K=h(s.relativeLuminance2(N,W,q),s.relativeLuminance2(T,A,O));for(;K<L&&(N<255||W<255||q<255);)N=Math.min(255,N+Math.ceil(.1*(255-N))),W=Math.min(255,W+Math.ceil(.1*(255-W))),q=Math.min(255,q+Math.ceil(.1*(255-q))),K=h(s.relativeLuminance2(N,W,q),s.relativeLuminance2(T,A,O));return(N<<24|W<<16|q<<8|255)>>>0}d.ensureContrastRatio=function(f,S,L){const T=s.relativeLuminance(f>>8),A=s.relativeLuminance(S>>8);if(h(T,A)<L){if(A<T){const W=b(f,S,L),q=h(T,s.relativeLuminance(W>>8));if(q<L){const K=C(f,S,L);return q>h(T,s.relativeLuminance(K>>8))?W:K}return W}const O=C(f,S,L),N=h(T,s.relativeLuminance(O>>8));if(N<L){const W=b(f,S,L);return N>h(T,s.relativeLuminance(W>>8))?O:W}return O}},d.reduceLuminance=b,d.increaseLuminance=C,d.toChannels=function(f){return[f>>24&255,f>>16&255,f>>8&255,255&f]},d.toColor=function(f,S,L,T){return{css:m.toCss(f,S,L,T),rgba:m.toRgba(f,S,L,T)}}}(t||(i.rgba=t={})),i.toPaddedHex=r,i.contrastRatio=h},8969:(D,i,a)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CoreTerminal=void 0;const l=a(844),_=a(2585),o=a(4348),c=a(7866),v=a(744),m=a(7302),g=a(6975),e=a(8460),s=a(1753),t=a(1480),r=a(7994),h=a(9282),d=a(5435),b=a(5981),C=a(2660);let f=!1;class S extends l.Disposable{get onScroll(){return this._onScrollApi||(this._onScrollApi=this.register(new e.EventEmitter),this._onScroll.event(T=>{var A;(A=this._onScrollApi)===null||A===void 0||A.fire(T.position)})),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(T){for(const A in T)this.optionsService.options[A]=T[A]}constructor(T){super(),this._windowsWrappingHeuristics=this.register(new l.MutableDisposable),this._onBinary=this.register(new e.EventEmitter),this.onBinary=this._onBinary.event,this._onData=this.register(new e.EventEmitter),this.onData=this._onData.event,this._onLineFeed=this.register(new e.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onResize=this.register(new e.EventEmitter),this.onResize=this._onResize.event,this._onWriteParsed=this.register(new e.EventEmitter),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this.register(new e.EventEmitter),this._instantiationService=new o.InstantiationService,this.optionsService=this.register(new m.OptionsService(T)),this._instantiationService.setService(_.IOptionsService,this.optionsService),this._bufferService=this.register(this._instantiationService.createInstance(v.BufferService)),this._instantiationService.setService(_.IBufferService,this._bufferService),this._logService=this.register(this._instantiationService.createInstance(c.LogService)),this._instantiationService.setService(_.ILogService,this._logService),this.coreService=this.register(this._instantiationService.createInstance(g.CoreService)),this._instantiationService.setService(_.ICoreService,this.coreService),this.coreMouseService=this.register(this._instantiationService.createInstance(s.CoreMouseService)),this._instantiationService.setService(_.ICoreMouseService,this.coreMouseService),this.unicodeService=this.register(this._instantiationService.createInstance(t.UnicodeService)),this._instantiationService.setService(_.IUnicodeService,this.unicodeService),this._charsetService=this._instantiationService.createInstance(r.CharsetService),this._instantiationService.setService(_.ICharsetService,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(C.OscLinkService),this._instantiationService.setService(_.IOscLinkService,this._oscLinkService),this._inputHandler=this.register(new d.InputHandler(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this.register((0,e.forwardEvent)(this._inputHandler.onLineFeed,this._onLineFeed)),this.register(this._inputHandler),this.register((0,e.forwardEvent)(this._bufferService.onResize,this._onResize)),this.register((0,e.forwardEvent)(this.coreService.onData,this._onData)),this.register((0,e.forwardEvent)(this.coreService.onBinary,this._onBinary)),this.register(this.coreService.onRequestScrollToBottom(()=>this.scrollToBottom())),this.register(this.coreService.onUserInput(()=>this._writeBuffer.handleUserInput())),this.register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],()=>this._handleWindowsPtyOptionChange())),this.register(this._bufferService.onScroll(A=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this.register(this._inputHandler.onScroll(A=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this._writeBuffer=this.register(new b.WriteBuffer((A,O)=>this._inputHandler.parse(A,O))),this.register((0,e.forwardEvent)(this._writeBuffer.onWriteParsed,this._onWriteParsed))}write(T,A){this._writeBuffer.write(T,A)}writeSync(T,A){this._logService.logLevel<=_.LogLevelEnum.WARN&&!f&&(this._logService.warn("writeSync is unreliable and will be removed soon."),f=!0),this._writeBuffer.writeSync(T,A)}resize(T,A){isNaN(T)||isNaN(A)||(T=Math.max(T,v.MINIMUM_COLS),A=Math.max(A,v.MINIMUM_ROWS),this._bufferService.resize(T,A))}scroll(T,A=!1){this._bufferService.scroll(T,A)}scrollLines(T,A,O){this._bufferService.scrollLines(T,A,O)}scrollPages(T){this.scrollLines(T*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(T){const A=T-this._bufferService.buffer.ydisp;A!==0&&this.scrollLines(A)}registerEscHandler(T,A){return this._inputHandler.registerEscHandler(T,A)}registerDcsHandler(T,A){return this._inputHandler.registerDcsHandler(T,A)}registerCsiHandler(T,A){return this._inputHandler.registerCsiHandler(T,A)}registerOscHandler(T,A){return this._inputHandler.registerOscHandler(T,A)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let T=!1;const A=this.optionsService.rawOptions.windowsPty;A&&A.buildNumber!==void 0&&A.buildNumber!==void 0?T=A.backend==="conpty"&&A.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(T=!0),T?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){const T=[];T.push(this.onLineFeed(h.updateWindowsModeWrappedState.bind(null,this._bufferService))),T.push(this.registerCsiHandler({final:"H"},()=>((0,h.updateWindowsModeWrappedState)(this._bufferService),!1))),this._windowsWrappingHeuristics.value=(0,l.toDisposable)(()=>{for(const A of T)A.dispose()})}}}i.CoreTerminal=S},8460:(D,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.forwardEvent=i.EventEmitter=void 0,i.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=a=>(this._listeners.push(a),{dispose:()=>{if(!this._disposed){for(let l=0;l<this._listeners.length;l++)if(this._listeners[l]===a)return void this._listeners.splice(l,1)}}})),this._event}fire(a,l){const _=[];for(let o=0;o<this._listeners.length;o++)_.push(this._listeners[o]);for(let o=0;o<_.length;o++)_[o].call(void 0,a,l)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},i.forwardEvent=function(a,l){return a(_=>l.fire(_))}},5435:function(D,i,a){var l=this&&this.__decorate||function(K,E,B,M){var P,$=arguments.length,U=$<3?E:M===null?M=Object.getOwnPropertyDescriptor(E,B):M;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")U=Reflect.decorate(K,E,B,M);else for(var J=K.length-1;J>=0;J--)(P=K[J])&&(U=($<3?P(U):$>3?P(E,B,U):P(E,B))||U);return $>3&&U&&Object.defineProperty(E,B,U),U},_=this&&this.__param||function(K,E){return function(B,M){E(B,M,K)}};Object.defineProperty(i,"__esModule",{value:!0}),i.InputHandler=i.WindowsOptionsReportType=void 0;const o=a(2584),c=a(7116),v=a(2015),m=a(844),g=a(482),e=a(8437),s=a(8460),t=a(643),r=a(511),h=a(3734),d=a(2585),b=a(6242),C=a(6351),f=a(5941),S={"(":0,")":1,"*":2,"+":3,"-":1,".":2},L=131072;function T(K,E){if(K>24)return E.setWinLines||!1;switch(K){case 1:return!!E.restoreWin;case 2:return!!E.minimizeWin;case 3:return!!E.setWinPosition;case 4:return!!E.setWinSizePixels;case 5:return!!E.raiseWin;case 6:return!!E.lowerWin;case 7:return!!E.refreshWin;case 8:return!!E.setWinSizeChars;case 9:return!!E.maximizeWin;case 10:return!!E.fullscreenWin;case 11:return!!E.getWinState;case 13:return!!E.getWinPosition;case 14:return!!E.getWinSizePixels;case 15:return!!E.getScreenSizePixels;case 16:return!!E.getCellSizePixels;case 18:return!!E.getWinSizeChars;case 19:return!!E.getScreenSizeChars;case 20:return!!E.getIconTitle;case 21:return!!E.getWinTitle;case 22:return!!E.pushTitle;case 23:return!!E.popTitle;case 24:return!!E.setWinLines}return!1}var A;(function(K){K[K.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",K[K.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(A||(i.WindowsOptionsReportType=A={}));let O=0;class N extends m.Disposable{getAttrData(){return this._curAttrData}constructor(E,B,M,P,$,U,J,X,ae=new v.EscapeSequenceParser){super(),this._bufferService=E,this._charsetService=B,this._coreService=M,this._logService=P,this._optionsService=$,this._oscLinkService=U,this._coreMouseService=J,this._unicodeService=X,this._parser=ae,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new g.StringToUtf32,this._utf8Decoder=new g.Utf8ToUtf32,this._workCell=new r.CellData,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=e.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=e.DEFAULT_ATTR_DATA.clone(),this._onRequestBell=this.register(new s.EventEmitter),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this.register(new s.EventEmitter),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this.register(new s.EventEmitter),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this.register(new s.EventEmitter),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this.register(new s.EventEmitter),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this.register(new s.EventEmitter),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this.register(new s.EventEmitter),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this.register(new s.EventEmitter),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this.register(new s.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this.register(new s.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onScroll=this.register(new s.EventEmitter),this.onScroll=this._onScroll.event,this._onTitleChange=this.register(new s.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onColor=this.register(new s.EventEmitter),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this.register(this._parser),this._dirtyRowTracker=new W(this._bufferService),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(w=>this._activeBuffer=w.activeBuffer)),this._parser.setCsiHandlerFallback((w,H)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(w),params:H.toArray()})}),this._parser.setEscHandlerFallback(w=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(w)})}),this._parser.setExecuteHandlerFallback(w=>{this._logService.debug("Unknown EXECUTE code: ",{code:w})}),this._parser.setOscHandlerFallback((w,H,z)=>{this._logService.debug("Unknown OSC code: ",{identifier:w,action:H,data:z})}),this._parser.setDcsHandlerFallback((w,H,z)=>{H==="HOOK"&&(z=z.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(w),action:H,payload:z})}),this._parser.setPrintHandler((w,H,z)=>this.print(w,H,z)),this._parser.registerCsiHandler({final:"@"},w=>this.insertChars(w)),this._parser.registerCsiHandler({intermediates:" ",final:"@"},w=>this.scrollLeft(w)),this._parser.registerCsiHandler({final:"A"},w=>this.cursorUp(w)),this._parser.registerCsiHandler({intermediates:" ",final:"A"},w=>this.scrollRight(w)),this._parser.registerCsiHandler({final:"B"},w=>this.cursorDown(w)),this._parser.registerCsiHandler({final:"C"},w=>this.cursorForward(w)),this._parser.registerCsiHandler({final:"D"},w=>this.cursorBackward(w)),this._parser.registerCsiHandler({final:"E"},w=>this.cursorNextLine(w)),this._parser.registerCsiHandler({final:"F"},w=>this.cursorPrecedingLine(w)),this._parser.registerCsiHandler({final:"G"},w=>this.cursorCharAbsolute(w)),this._parser.registerCsiHandler({final:"H"},w=>this.cursorPosition(w)),this._parser.registerCsiHandler({final:"I"},w=>this.cursorForwardTab(w)),this._parser.registerCsiHandler({final:"J"},w=>this.eraseInDisplay(w,!1)),this._parser.registerCsiHandler({prefix:"?",final:"J"},w=>this.eraseInDisplay(w,!0)),this._parser.registerCsiHandler({final:"K"},w=>this.eraseInLine(w,!1)),this._parser.registerCsiHandler({prefix:"?",final:"K"},w=>this.eraseInLine(w,!0)),this._parser.registerCsiHandler({final:"L"},w=>this.insertLines(w)),this._parser.registerCsiHandler({final:"M"},w=>this.deleteLines(w)),this._parser.registerCsiHandler({final:"P"},w=>this.deleteChars(w)),this._parser.registerCsiHandler({final:"S"},w=>this.scrollUp(w)),this._parser.registerCsiHandler({final:"T"},w=>this.scrollDown(w)),this._parser.registerCsiHandler({final:"X"},w=>this.eraseChars(w)),this._parser.registerCsiHandler({final:"Z"},w=>this.cursorBackwardTab(w)),this._parser.registerCsiHandler({final:"`"},w=>this.charPosAbsolute(w)),this._parser.registerCsiHandler({final:"a"},w=>this.hPositionRelative(w)),this._parser.registerCsiHandler({final:"b"},w=>this.repeatPrecedingCharacter(w)),this._parser.registerCsiHandler({final:"c"},w=>this.sendDeviceAttributesPrimary(w)),this._parser.registerCsiHandler({prefix:">",final:"c"},w=>this.sendDeviceAttributesSecondary(w)),this._parser.registerCsiHandler({final:"d"},w=>this.linePosAbsolute(w)),this._parser.registerCsiHandler({final:"e"},w=>this.vPositionRelative(w)),this._parser.registerCsiHandler({final:"f"},w=>this.hVPosition(w)),this._parser.registerCsiHandler({final:"g"},w=>this.tabClear(w)),this._parser.registerCsiHandler({final:"h"},w=>this.setMode(w)),this._parser.registerCsiHandler({prefix:"?",final:"h"},w=>this.setModePrivate(w)),this._parser.registerCsiHandler({final:"l"},w=>this.resetMode(w)),this._parser.registerCsiHandler({prefix:"?",final:"l"},w=>this.resetModePrivate(w)),this._parser.registerCsiHandler({final:"m"},w=>this.charAttributes(w)),this._parser.registerCsiHandler({final:"n"},w=>this.deviceStatus(w)),this._parser.registerCsiHandler({prefix:"?",final:"n"},w=>this.deviceStatusPrivate(w)),this._parser.registerCsiHandler({intermediates:"!",final:"p"},w=>this.softReset(w)),this._parser.registerCsiHandler({intermediates:" ",final:"q"},w=>this.setCursorStyle(w)),this._parser.registerCsiHandler({final:"r"},w=>this.setScrollRegion(w)),this._parser.registerCsiHandler({final:"s"},w=>this.saveCursor(w)),this._parser.registerCsiHandler({final:"t"},w=>this.windowOptions(w)),this._parser.registerCsiHandler({final:"u"},w=>this.restoreCursor(w)),this._parser.registerCsiHandler({intermediates:"'",final:"}"},w=>this.insertColumns(w)),this._parser.registerCsiHandler({intermediates:"'",final:"~"},w=>this.deleteColumns(w)),this._parser.registerCsiHandler({intermediates:'"',final:"q"},w=>this.selectProtected(w)),this._parser.registerCsiHandler({intermediates:"$",final:"p"},w=>this.requestMode(w,!0)),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},w=>this.requestMode(w,!1)),this._parser.setExecuteHandler(o.C0.BEL,()=>this.bell()),this._parser.setExecuteHandler(o.C0.LF,()=>this.lineFeed()),this._parser.setExecuteHandler(o.C0.VT,()=>this.lineFeed()),this._parser.setExecuteHandler(o.C0.FF,()=>this.lineFeed()),this._parser.setExecuteHandler(o.C0.CR,()=>this.carriageReturn()),this._parser.setExecuteHandler(o.C0.BS,()=>this.backspace()),this._parser.setExecuteHandler(o.C0.HT,()=>this.tab()),this._parser.setExecuteHandler(o.C0.SO,()=>this.shiftOut()),this._parser.setExecuteHandler(o.C0.SI,()=>this.shiftIn()),this._parser.setExecuteHandler(o.C1.IND,()=>this.index()),this._parser.setExecuteHandler(o.C1.NEL,()=>this.nextLine()),this._parser.setExecuteHandler(o.C1.HTS,()=>this.tabSet()),this._parser.registerOscHandler(0,new b.OscHandler(w=>(this.setTitle(w),this.setIconName(w),!0))),this._parser.registerOscHandler(1,new b.OscHandler(w=>this.setIconName(w))),this._parser.registerOscHandler(2,new b.OscHandler(w=>this.setTitle(w))),this._parser.registerOscHandler(4,new b.OscHandler(w=>this.setOrReportIndexedColor(w))),this._parser.registerOscHandler(8,new b.OscHandler(w=>this.setHyperlink(w))),this._parser.registerOscHandler(10,new b.OscHandler(w=>this.setOrReportFgColor(w))),this._parser.registerOscHandler(11,new b.OscHandler(w=>this.setOrReportBgColor(w))),this._parser.registerOscHandler(12,new b.OscHandler(w=>this.setOrReportCursorColor(w))),this._parser.registerOscHandler(104,new b.OscHandler(w=>this.restoreIndexedColor(w))),this._parser.registerOscHandler(110,new b.OscHandler(w=>this.restoreFgColor(w))),this._parser.registerOscHandler(111,new b.OscHandler(w=>this.restoreBgColor(w))),this._parser.registerOscHandler(112,new b.OscHandler(w=>this.restoreCursorColor(w))),this._parser.registerEscHandler({final:"7"},()=>this.saveCursor()),this._parser.registerEscHandler({final:"8"},()=>this.restoreCursor()),this._parser.registerEscHandler({final:"D"},()=>this.index()),this._parser.registerEscHandler({final:"E"},()=>this.nextLine()),this._parser.registerEscHandler({final:"H"},()=>this.tabSet()),this._parser.registerEscHandler({final:"M"},()=>this.reverseIndex()),this._parser.registerEscHandler({final:"="},()=>this.keypadApplicationMode()),this._parser.registerEscHandler({final:">"},()=>this.keypadNumericMode()),this._parser.registerEscHandler({final:"c"},()=>this.fullReset()),this._parser.registerEscHandler({final:"n"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"o"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"|"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"}"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"~"},()=>this.setgLevel(1)),this._parser.registerEscHandler({intermediates:"%",final:"@"},()=>this.selectDefaultCharset()),this._parser.registerEscHandler({intermediates:"%",final:"G"},()=>this.selectDefaultCharset());for(const w in c.CHARSETS)this._parser.registerEscHandler({intermediates:"(",final:w},()=>this.selectCharset("("+w)),this._parser.registerEscHandler({intermediates:")",final:w},()=>this.selectCharset(")"+w)),this._parser.registerEscHandler({intermediates:"*",final:w},()=>this.selectCharset("*"+w)),this._parser.registerEscHandler({intermediates:"+",final:w},()=>this.selectCharset("+"+w)),this._parser.registerEscHandler({intermediates:"-",final:w},()=>this.selectCharset("-"+w)),this._parser.registerEscHandler({intermediates:".",final:w},()=>this.selectCharset("."+w)),this._parser.registerEscHandler({intermediates:"/",final:w},()=>this.selectCharset("/"+w));this._parser.registerEscHandler({intermediates:"#",final:"8"},()=>this.screenAlignmentPattern()),this._parser.setErrorHandler(w=>(this._logService.error("Parsing error: ",w),w)),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new C.DcsHandler((w,H)=>this.requestStatusString(w,H)))}_preserveStack(E,B,M,P){this._parseStack.paused=!0,this._parseStack.cursorStartX=E,this._parseStack.cursorStartY=B,this._parseStack.decodedLength=M,this._parseStack.position=P}_logSlowResolvingAsync(E){this._logService.logLevel<=d.LogLevelEnum.WARN&&Promise.race([E,new Promise((B,M)=>setTimeout(()=>M("#SLOW_TIMEOUT"),5e3))]).catch(B=>{if(B!=="#SLOW_TIMEOUT")throw B;console.warn("async parser handler taking longer than 5000 ms")})}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(E,B){let M,P=this._activeBuffer.x,$=this._activeBuffer.y,U=0;const J=this._parseStack.paused;if(J){if(M=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,B))return this._logSlowResolvingAsync(M),M;P=this._parseStack.cursorStartX,$=this._parseStack.cursorStartY,this._parseStack.paused=!1,E.length>L&&(U=this._parseStack.position+L)}if(this._logService.logLevel<=d.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof E=="string"?` "${E}"`:` "${Array.prototype.map.call(E,X=>String.fromCharCode(X)).join("")}"`),typeof E=="string"?E.split("").map(X=>X.charCodeAt(0)):E),this._parseBuffer.length<E.length&&this._parseBuffer.length<L&&(this._parseBuffer=new Uint32Array(Math.min(E.length,L))),J||this._dirtyRowTracker.clearRange(),E.length>L)for(let X=U;X<E.length;X+=L){const ae=X+L<E.length?X+L:E.length,w=typeof E=="string"?this._stringDecoder.decode(E.substring(X,ae),this._parseBuffer):this._utf8Decoder.decode(E.subarray(X,ae),this._parseBuffer);if(M=this._parser.parse(this._parseBuffer,w))return this._preserveStack(P,$,w,X),this._logSlowResolvingAsync(M),M}else if(!J){const X=typeof E=="string"?this._stringDecoder.decode(E,this._parseBuffer):this._utf8Decoder.decode(E,this._parseBuffer);if(M=this._parser.parse(this._parseBuffer,X))return this._preserveStack(P,$,X,0),this._logSlowResolvingAsync(M),M}this._activeBuffer.x===P&&this._activeBuffer.y===$||this._onCursorMove.fire(),this._onRequestRefreshRows.fire(this._dirtyRowTracker.start,this._dirtyRowTracker.end)}print(E,B,M){let P,$;const U=this._charsetService.charset,J=this._optionsService.rawOptions.screenReaderMode,X=this._bufferService.cols,ae=this._coreService.decPrivateModes.wraparound,w=this._coreService.modes.insertMode,H=this._curAttrData;let z=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&M-B>0&&z.getWidth(this._activeBuffer.x-1)===2&&z.setCellFromCodePoint(this._activeBuffer.x-1,0,1,H.fg,H.bg,H.extended);for(let F=B;F<M;++F){if(P=E[F],$=this._unicodeService.wcwidth(P),P<127&&U){const ee=U[String.fromCharCode(P)];ee&&(P=ee.charCodeAt(0))}if(J&&this._onA11yChar.fire((0,g.stringFromCodePoint)(P)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),$||!this._activeBuffer.x){if(this._activeBuffer.x+$-1>=X){if(ae){for(;this._activeBuffer.x<X;)z.setCellFromCodePoint(this._activeBuffer.x++,0,1,H.fg,H.bg,H.extended);this._activeBuffer.x=0,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),z=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)}else if(this._activeBuffer.x=X-1,$===2)continue}if(w&&(z.insertCells(this._activeBuffer.x,$,this._activeBuffer.getNullCell(H),H),z.getWidth(X-1)===2&&z.setCellFromCodePoint(X-1,t.NULL_CELL_CODE,t.NULL_CELL_WIDTH,H.fg,H.bg,H.extended)),z.setCellFromCodePoint(this._activeBuffer.x++,P,$,H.fg,H.bg,H.extended),$>0)for(;--$;)z.setCellFromCodePoint(this._activeBuffer.x++,0,0,H.fg,H.bg,H.extended)}else z.getWidth(this._activeBuffer.x-1)?z.addCodepointToCell(this._activeBuffer.x-1,P):z.addCodepointToCell(this._activeBuffer.x-2,P)}M-B>0&&(z.loadCell(this._activeBuffer.x-1,this._workCell),this._workCell.getWidth()===2||this._workCell.getCode()>65535?this._parser.precedingCodepoint=0:this._workCell.isCombined()?this._parser.precedingCodepoint=this._workCell.getChars().charCodeAt(0):this._parser.precedingCodepoint=this._workCell.content),this._activeBuffer.x<X&&M-B>0&&z.getWidth(this._activeBuffer.x)===0&&!z.hasContent(this._activeBuffer.x)&&z.setCellFromCodePoint(this._activeBuffer.x,0,1,H.fg,H.bg,H.extended),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(E,B){return E.final!=="t"||E.prefix||E.intermediates?this._parser.registerCsiHandler(E,B):this._parser.registerCsiHandler(E,M=>!T(M.params[0],this._optionsService.rawOptions.windowOptions)||B(M))}registerDcsHandler(E,B){return this._parser.registerDcsHandler(E,new C.DcsHandler(B))}registerEscHandler(E,B){return this._parser.registerEscHandler(E,B)}registerOscHandler(E,B){return this._parser.registerOscHandler(E,new b.OscHandler(B))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){var E;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&(!((E=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))===null||E===void 0)&&E.isWrapped)){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;const B=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);B.hasWidth(this._activeBuffer.x)&&!B.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;const E=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-E),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(E=this._bufferService.cols-1){this._activeBuffer.x=Math.min(E,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(E,B){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=E,this._activeBuffer.y=this._activeBuffer.scrollTop+B):(this._activeBuffer.x=E,this._activeBuffer.y=B),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(E,B){this._restrictCursor(),this._setCursor(this._activeBuffer.x+E,this._activeBuffer.y+B)}cursorUp(E){const B=this._activeBuffer.y-this._activeBuffer.scrollTop;return B>=0?this._moveCursor(0,-Math.min(B,E.params[0]||1)):this._moveCursor(0,-(E.params[0]||1)),!0}cursorDown(E){const B=this._activeBuffer.scrollBottom-this._activeBuffer.y;return B>=0?this._moveCursor(0,Math.min(B,E.params[0]||1)):this._moveCursor(0,E.params[0]||1),!0}cursorForward(E){return this._moveCursor(E.params[0]||1,0),!0}cursorBackward(E){return this._moveCursor(-(E.params[0]||1),0),!0}cursorNextLine(E){return this.cursorDown(E),this._activeBuffer.x=0,!0}cursorPrecedingLine(E){return this.cursorUp(E),this._activeBuffer.x=0,!0}cursorCharAbsolute(E){return this._setCursor((E.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(E){return this._setCursor(E.length>=2?(E.params[1]||1)-1:0,(E.params[0]||1)-1),!0}charPosAbsolute(E){return this._setCursor((E.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(E){return this._moveCursor(E.params[0]||1,0),!0}linePosAbsolute(E){return this._setCursor(this._activeBuffer.x,(E.params[0]||1)-1),!0}vPositionRelative(E){return this._moveCursor(0,E.params[0]||1),!0}hVPosition(E){return this.cursorPosition(E),!0}tabClear(E){const B=E.params[0];return B===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:B===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(E){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let B=E.params[0]||1;for(;B--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(E){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let B=E.params[0]||1;for(;B--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(E){const B=E.params[0];return B===1&&(this._curAttrData.bg|=536870912),B!==2&&B!==0||(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(E,B,M,P=!1,$=!1){const U=this._activeBuffer.lines.get(this._activeBuffer.ybase+E);U.replaceCells(B,M,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData(),$),P&&(U.isWrapped=!1)}_resetBufferLine(E,B=!1){const M=this._activeBuffer.lines.get(this._activeBuffer.ybase+E);M&&(M.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),B),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+E),M.isWrapped=!1)}eraseInDisplay(E,B=!1){let M;switch(this._restrictCursor(this._bufferService.cols),E.params[0]){case 0:for(M=this._activeBuffer.y,this._dirtyRowTracker.markDirty(M),this._eraseInBufferLine(M++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,B);M<this._bufferService.rows;M++)this._resetBufferLine(M,B);this._dirtyRowTracker.markDirty(M);break;case 1:for(M=this._activeBuffer.y,this._dirtyRowTracker.markDirty(M),this._eraseInBufferLine(M,0,this._activeBuffer.x+1,!0,B),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(M+1).isWrapped=!1);M--;)this._resetBufferLine(M,B);this._dirtyRowTracker.markDirty(0);break;case 2:for(M=this._bufferService.rows,this._dirtyRowTracker.markDirty(M-1);M--;)this._resetBufferLine(M,B);this._dirtyRowTracker.markDirty(0);break;case 3:const P=this._activeBuffer.lines.length-this._bufferService.rows;P>0&&(this._activeBuffer.lines.trimStart(P),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-P,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-P,0),this._onScroll.fire(0))}return!0}eraseInLine(E,B=!1){switch(this._restrictCursor(this._bufferService.cols),E.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,B);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,B);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,B)}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(E){this._restrictCursor();let B=E.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const M=this._activeBuffer.ybase+this._activeBuffer.y,P=this._bufferService.rows-1-this._activeBuffer.scrollBottom,$=this._bufferService.rows-1+this._activeBuffer.ybase-P+1;for(;B--;)this._activeBuffer.lines.splice($-1,1),this._activeBuffer.lines.splice(M,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(E){this._restrictCursor();let B=E.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const M=this._activeBuffer.ybase+this._activeBuffer.y;let P;for(P=this._bufferService.rows-1-this._activeBuffer.scrollBottom,P=this._bufferService.rows-1+this._activeBuffer.ybase-P;B--;)this._activeBuffer.lines.splice(M,1),this._activeBuffer.lines.splice(P,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(E){this._restrictCursor();const B=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return B&&(B.insertCells(this._activeBuffer.x,E.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(E){this._restrictCursor();const B=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return B&&(B.deleteCells(this._activeBuffer.x,E.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(E){let B=E.params[0]||1;for(;B--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(E){let B=E.params[0]||1;for(;B--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(e.DEFAULT_ATTR_DATA));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(E){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const B=E.params[0]||1;for(let M=this._activeBuffer.scrollTop;M<=this._activeBuffer.scrollBottom;++M){const P=this._activeBuffer.lines.get(this._activeBuffer.ybase+M);P.deleteCells(0,B,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),P.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(E){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const B=E.params[0]||1;for(let M=this._activeBuffer.scrollTop;M<=this._activeBuffer.scrollBottom;++M){const P=this._activeBuffer.lines.get(this._activeBuffer.ybase+M);P.insertCells(0,B,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),P.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(E){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const B=E.params[0]||1;for(let M=this._activeBuffer.scrollTop;M<=this._activeBuffer.scrollBottom;++M){const P=this._activeBuffer.lines.get(this._activeBuffer.ybase+M);P.insertCells(this._activeBuffer.x,B,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),P.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(E){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const B=E.params[0]||1;for(let M=this._activeBuffer.scrollTop;M<=this._activeBuffer.scrollBottom;++M){const P=this._activeBuffer.lines.get(this._activeBuffer.ybase+M);P.deleteCells(this._activeBuffer.x,B,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),P.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(E){this._restrictCursor();const B=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return B&&(B.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(E.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(E){if(!this._parser.precedingCodepoint)return!0;const B=E.params[0]||1,M=new Uint32Array(B);for(let P=0;P<B;++P)M[P]=this._parser.precedingCodepoint;return this.print(M,0,M.length),!0}sendDeviceAttributesPrimary(E){return E.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(o.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(o.C0.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(E){return E.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(o.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(o.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(E.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(o.C0.ESC+"[>83;40003;0c")),!0}_is(E){return(this._optionsService.rawOptions.termName+"").indexOf(E)===0}setMode(E){for(let B=0;B<E.length;B++)switch(E.params[B]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0}return!0}setModePrivate(E){for(let B=0;B<E.length;B++)switch(E.params[B]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,c.DEFAULT_CHARSET),this._charsetService.setgCharset(1,c.DEFAULT_CHARSET),this._charsetService.setgCharset(2,c.DEFAULT_CHARSET),this._charsetService.setgCharset(3,c.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0}resetMode(E){for(let B=0;B<E.length;B++)switch(E.params[B]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1}return!0}resetModePrivate(E){for(let B=0;B<E.length;B++)switch(E.params[B]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),E.params[B]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0}requestMode(E,B){const M=this._coreService.decPrivateModes,{activeProtocol:P,activeEncoding:$}=this._coreMouseService,U=this._coreService,{buffers:J,cols:X}=this._bufferService,{active:ae,alt:w}=J,H=this._optionsService.rawOptions,z=ne=>ne?1:2,F=E.params[0];return ee=F,Z=B?F===2?4:F===4?z(U.modes.insertMode):F===12?3:F===20?z(H.convertEol):0:F===1?z(M.applicationCursorKeys):F===3?H.windowOptions.setWinLines?X===80?2:X===132?1:0:0:F===6?z(M.origin):F===7?z(M.wraparound):F===8?3:F===9?z(P==="X10"):F===12?z(H.cursorBlink):F===25?z(!U.isCursorHidden):F===45?z(M.reverseWraparound):F===66?z(M.applicationKeypad):F===67?4:F===1e3?z(P==="VT200"):F===1002?z(P==="DRAG"):F===1003?z(P==="ANY"):F===1004?z(M.sendFocus):F===1005?4:F===1006?z($==="SGR"):F===1015?4:F===1016?z($==="SGR_PIXELS"):F===1048?1:F===47||F===1047||F===1049?z(ae===w):F===2004?z(M.bracketedPasteMode):0,U.triggerDataEvent(`${o.C0.ESC}[${B?"":"?"}${ee};${Z}$y`),!0;var ee,Z}_updateAttrColor(E,B,M,P,$){return B===2?(E|=50331648,E&=-16777216,E|=h.AttributeData.fromColorRGB([M,P,$])):B===5&&(E&=-50331904,E|=33554432|255&M),E}_extractColor(E,B,M){const P=[0,0,-1,0,0,0];let $=0,U=0;do{if(P[U+$]=E.params[B+U],E.hasSubParams(B+U)){const J=E.getSubParams(B+U);let X=0;do P[1]===5&&($=1),P[U+X+1+$]=J[X];while(++X<J.length&&X+U+1+$<P.length);break}if(P[1]===5&&U+$>=2||P[1]===2&&U+$>=5)break;P[1]&&($=1)}while(++U+B<E.length&&U+$<P.length);for(let J=2;J<P.length;++J)P[J]===-1&&(P[J]=0);switch(P[0]){case 38:M.fg=this._updateAttrColor(M.fg,P[1],P[3],P[4],P[5]);break;case 48:M.bg=this._updateAttrColor(M.bg,P[1],P[3],P[4],P[5]);break;case 58:M.extended=M.extended.clone(),M.extended.underlineColor=this._updateAttrColor(M.extended.underlineColor,P[1],P[3],P[4],P[5])}return U}_processUnderline(E,B){B.extended=B.extended.clone(),(!~E||E>5)&&(E=1),B.extended.underlineStyle=E,B.fg|=268435456,E===0&&(B.fg&=-268435457),B.updateExtended()}_processSGR0(E){E.fg=e.DEFAULT_ATTR_DATA.fg,E.bg=e.DEFAULT_ATTR_DATA.bg,E.extended=E.extended.clone(),E.extended.underlineStyle=0,E.extended.underlineColor&=-67108864,E.updateExtended()}charAttributes(E){if(E.length===1&&E.params[0]===0)return this._processSGR0(this._curAttrData),!0;const B=E.length;let M;const P=this._curAttrData;for(let $=0;$<B;$++)M=E.params[$],M>=30&&M<=37?(P.fg&=-50331904,P.fg|=16777216|M-30):M>=40&&M<=47?(P.bg&=-50331904,P.bg|=16777216|M-40):M>=90&&M<=97?(P.fg&=-50331904,P.fg|=16777224|M-90):M>=100&&M<=107?(P.bg&=-50331904,P.bg|=16777224|M-100):M===0?this._processSGR0(P):M===1?P.fg|=134217728:M===3?P.bg|=67108864:M===4?(P.fg|=268435456,this._processUnderline(E.hasSubParams($)?E.getSubParams($)[0]:1,P)):M===5?P.fg|=536870912:M===7?P.fg|=67108864:M===8?P.fg|=1073741824:M===9?P.fg|=2147483648:M===2?P.bg|=134217728:M===21?this._processUnderline(2,P):M===22?(P.fg&=-134217729,P.bg&=-134217729):M===23?P.bg&=-67108865:M===24?(P.fg&=-268435457,this._processUnderline(0,P)):M===25?P.fg&=-536870913:M===27?P.fg&=-67108865:M===28?P.fg&=-1073741825:M===29?P.fg&=2147483647:M===39?(P.fg&=-67108864,P.fg|=16777215&e.DEFAULT_ATTR_DATA.fg):M===49?(P.bg&=-67108864,P.bg|=16777215&e.DEFAULT_ATTR_DATA.bg):M===38||M===48||M===58?$+=this._extractColor(E,$,P):M===53?P.bg|=1073741824:M===55?P.bg&=-1073741825:M===59?(P.extended=P.extended.clone(),P.extended.underlineColor=-1,P.updateExtended()):M===100?(P.fg&=-67108864,P.fg|=16777215&e.DEFAULT_ATTR_DATA.fg,P.bg&=-67108864,P.bg|=16777215&e.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",M);return!0}deviceStatus(E){switch(E.params[0]){case 5:this._coreService.triggerDataEvent(`${o.C0.ESC}[0n`);break;case 6:const B=this._activeBuffer.y+1,M=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${o.C0.ESC}[${B};${M}R`)}return!0}deviceStatusPrivate(E){if(E.params[0]===6){const B=this._activeBuffer.y+1,M=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${o.C0.ESC}[?${B};${M}R`)}return!0}softReset(E){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=e.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(E){const B=E.params[0]||1;switch(B){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}const M=B%2==1;return this._optionsService.options.cursorBlink=M,!0}setScrollRegion(E){const B=E.params[0]||1;let M;return(E.length<2||(M=E.params[1])>this._bufferService.rows||M===0)&&(M=this._bufferService.rows),M>B&&(this._activeBuffer.scrollTop=B-1,this._activeBuffer.scrollBottom=M-1,this._setCursor(0,0)),!0}windowOptions(E){if(!T(E.params[0],this._optionsService.rawOptions.windowOptions))return!0;const B=E.length>1?E.params[1]:0;switch(E.params[0]){case 14:B!==2&&this._onRequestWindowsOptionsReport.fire(A.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(A.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${o.C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:B!==0&&B!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),B!==0&&B!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:B!==0&&B!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),B!==0&&B!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0}saveCursor(E){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(E){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(E){return this._windowTitle=E,this._onTitleChange.fire(E),!0}setIconName(E){return this._iconName=E,!0}setOrReportIndexedColor(E){const B=[],M=E.split(";");for(;M.length>1;){const P=M.shift(),$=M.shift();if(/^\d+$/.exec(P)){const U=parseInt(P);if(q(U))if($==="?")B.push({type:0,index:U});else{const J=(0,f.parseColor)($);J&&B.push({type:1,index:U,color:J})}}}return B.length&&this._onColor.fire(B),!0}setHyperlink(E){const B=E.split(";");return!(B.length<2)&&(B[1]?this._createHyperlink(B[0],B[1]):!B[0]&&this._finishHyperlink())}_createHyperlink(E,B){this._getCurrentLinkId()&&this._finishHyperlink();const M=E.split(":");let P;const $=M.findIndex(U=>U.startsWith("id="));return $!==-1&&(P=M[$].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:P,uri:B}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(E,B){const M=E.split(";");for(let P=0;P<M.length&&!(B>=this._specialColors.length);++P,++B)if(M[P]==="?")this._onColor.fire([{type:0,index:this._specialColors[B]}]);else{const $=(0,f.parseColor)(M[P]);$&&this._onColor.fire([{type:1,index:this._specialColors[B],color:$}])}return!0}setOrReportFgColor(E){return this._setOrReportSpecialColor(E,0)}setOrReportBgColor(E){return this._setOrReportSpecialColor(E,1)}setOrReportCursorColor(E){return this._setOrReportSpecialColor(E,2)}restoreIndexedColor(E){if(!E)return this._onColor.fire([{type:2}]),!0;const B=[],M=E.split(";");for(let P=0;P<M.length;++P)if(/^\d+$/.exec(M[P])){const $=parseInt(M[P]);q($)&&B.push({type:2,index:$})}return B.length&&this._onColor.fire(B),!0}restoreFgColor(E){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(E){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(E){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,c.DEFAULT_CHARSET),!0}selectCharset(E){return E.length!==2?(this.selectDefaultCharset(),!0):(E[0]==="/"||this._charsetService.setgCharset(S[E[0]],c.CHARSETS[E[1]]||c.DEFAULT_CHARSET),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){const E=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,E,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=e.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=e.DEFAULT_ATTR_DATA.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal}setgLevel(E){return this._charsetService.setgLevel(E),!0}screenAlignmentPattern(){const E=new r.CellData;E.content=4194373,E.fg=this._curAttrData.fg,E.bg=this._curAttrData.bg,this._setCursor(0,0);for(let B=0;B<this._bufferService.rows;++B){const M=this._activeBuffer.ybase+this._activeBuffer.y+B,P=this._activeBuffer.lines.get(M);P&&(P.fill(E),P.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(E,B){const M=this._bufferService.buffer,P=this._optionsService.rawOptions;return($=>(this._coreService.triggerDataEvent(`${o.C0.ESC}${$}${o.C0.ESC}\\`),!0))(E==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:E==='"p'?'P1$r61;1"p':E==="r"?`P1$r${M.scrollTop+1};${M.scrollBottom+1}r`:E==="m"?"P1$r0m":E===" q"?`P1$r${{block:2,underline:4,bar:6}[P.cursorStyle]-(P.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(E,B){this._dirtyRowTracker.markRangeDirty(E,B)}}i.InputHandler=N;let W=class{constructor(K){this._bufferService=K,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(K){K<this.start?this.start=K:K>this.end&&(this.end=K)}markRangeDirty(K,E){K>E&&(O=K,K=E,E=O),K<this.start&&(this.start=K),E>this.end&&(this.end=E)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};function q(K){return 0<=K&&K<256}W=l([_(0,d.IBufferService)],W)},844:(D,i)=>{function a(l){for(const _ of l)_.dispose();l.length=0}Object.defineProperty(i,"__esModule",{value:!0}),i.getDisposeArrayDisposable=i.disposeArray=i.toDisposable=i.MutableDisposable=i.Disposable=void 0,i.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const l of this._disposables)l.dispose();this._disposables.length=0}register(l){return this._disposables.push(l),l}unregister(l){const _=this._disposables.indexOf(l);_!==-1&&this._disposables.splice(_,1)}},i.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(l){var _;this._isDisposed||l===this._value||((_=this._value)===null||_===void 0||_.dispose(),this._value=l)}clear(){this.value=void 0}dispose(){var l;this._isDisposed=!0,(l=this._value)===null||l===void 0||l.dispose(),this._value=void 0}},i.toDisposable=function(l){return{dispose:l}},i.disposeArray=a,i.getDisposeArrayDisposable=function(l){return{dispose:()=>a(l)}}},1505:(D,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.FourKeyMap=i.TwoKeyMap=void 0;class a{constructor(){this._data={}}set(_,o,c){this._data[_]||(this._data[_]={}),this._data[_][o]=c}get(_,o){return this._data[_]?this._data[_][o]:void 0}clear(){this._data={}}}i.TwoKeyMap=a,i.FourKeyMap=class{constructor(){this._data=new a}set(l,_,o,c,v){this._data.get(l,_)||this._data.set(l,_,new a),this._data.get(l,_).set(o,c,v)}get(l,_,o,c){var v;return(v=this._data.get(l,_))===null||v===void 0?void 0:v.get(o,c)}clear(){this._data.clear()}}},6114:(D,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.isChromeOS=i.isLinux=i.isWindows=i.isIphone=i.isIpad=i.isMac=i.getSafariVersion=i.isSafari=i.isLegacyEdge=i.isFirefox=i.isNode=void 0,i.isNode=typeof navigator>"u";const a=i.isNode?"node":navigator.userAgent,l=i.isNode?"node":navigator.platform;i.isFirefox=a.includes("Firefox"),i.isLegacyEdge=a.includes("Edge"),i.isSafari=/^((?!chrome|android).)*safari/i.test(a),i.getSafariVersion=function(){if(!i.isSafari)return 0;const _=a.match(/Version\/(\d+)/);return _===null||_.length<2?0:parseInt(_[1])},i.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(l),i.isIpad=l==="iPad",i.isIphone=l==="iPhone",i.isWindows=["Windows","Win16","Win32","WinCE"].includes(l),i.isLinux=l.indexOf("Linux")>=0,i.isChromeOS=/\bCrOS\b/.test(a)},6106:(D,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.SortedList=void 0;let a=0;i.SortedList=class{constructor(l){this._getKey=l,this._array=[]}clear(){this._array.length=0}insert(l){this._array.length!==0?(a=this._search(this._getKey(l)),this._array.splice(a,0,l)):this._array.push(l)}delete(l){if(this._array.length===0)return!1;const _=this._getKey(l);if(_===void 0||(a=this._search(_),a===-1)||this._getKey(this._array[a])!==_)return!1;do if(this._array[a]===l)return this._array.splice(a,1),!0;while(++a<this._array.length&&this._getKey(this._array[a])===_);return!1}*getKeyIterator(l){if(this._array.length!==0&&(a=this._search(l),!(a<0||a>=this._array.length)&&this._getKey(this._array[a])===l))do yield this._array[a];while(++a<this._array.length&&this._getKey(this._array[a])===l)}forEachByKey(l,_){if(this._array.length!==0&&(a=this._search(l),!(a<0||a>=this._array.length)&&this._getKey(this._array[a])===l))do _(this._array[a]);while(++a<this._array.length&&this._getKey(this._array[a])===l)}values(){return[...this._array].values()}_search(l){let _=0,o=this._array.length-1;for(;o>=_;){let c=_+o>>1;const v=this._getKey(this._array[c]);if(v>l)o=c-1;else{if(!(v<l)){for(;c>0&&this._getKey(this._array[c-1])===l;)c--;return c}_=c+1}}return _}}},7226:(D,i,a)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DebouncedIdleTask=i.IdleTaskQueue=i.PriorityTaskQueue=void 0;const l=a(6114);class _{constructor(){this._tasks=[],this._i=0}enqueue(v){this._tasks.push(v),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(v){this._idleCallback=void 0;let m=0,g=0,e=v.timeRemaining(),s=0;for(;this._i<this._tasks.length;){if(m=Date.now(),this._tasks[this._i]()||this._i++,m=Math.max(1,Date.now()-m),g=Math.max(m,g),s=v.timeRemaining(),1.5*g>s)return e-m<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(e-m))}ms`),void this._start();e=s}this.clear()}}class o extends _{_requestCallback(v){return setTimeout(()=>v(this._createDeadline(16)))}_cancelCallback(v){clearTimeout(v)}_createDeadline(v){const m=Date.now()+v;return{timeRemaining:()=>Math.max(0,m-Date.now())}}}i.PriorityTaskQueue=o,i.IdleTaskQueue=!l.isNode&&"requestIdleCallback"in window?class extends _{_requestCallback(c){return requestIdleCallback(c)}_cancelCallback(c){cancelIdleCallback(c)}}:o,i.DebouncedIdleTask=class{constructor(){this._queue=new i.IdleTaskQueue}set(c){this._queue.clear(),this._queue.enqueue(c)}flush(){this._queue.flush()}}},9282:(D,i,a)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.updateWindowsModeWrappedState=void 0;const l=a(643);i.updateWindowsModeWrappedState=function(_){const o=_.buffer.lines.get(_.buffer.ybase+_.buffer.y-1),c=o==null?void 0:o.get(_.cols-1),v=_.buffer.lines.get(_.buffer.ybase+_.buffer.y);v&&c&&(v.isWrapped=c[l.CHAR_DATA_CODE_INDEX]!==l.NULL_CELL_CODE&&c[l.CHAR_DATA_CODE_INDEX]!==l.WHITESPACE_CELL_CODE)}},3734:(D,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ExtendedAttrs=i.AttributeData=void 0;class a{constructor(){this.fg=0,this.bg=0,this.extended=new l}static toColorRGB(o){return[o>>>16&255,o>>>8&255,255&o]}static fromColorRGB(o){return(255&o[0])<<16|(255&o[1])<<8|255&o[2]}clone(){const o=new a;return o.fg=this.fg,o.bg=this.bg,o.extended=this.extended.clone(),o}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}}i.AttributeData=a;class l{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(o){this._ext=o}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(o){this._ext&=-469762049,this._ext|=o<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(o){this._ext&=-67108864,this._ext|=67108863&o}get urlId(){return this._urlId}set urlId(o){this._urlId=o}constructor(o=0,c=0){this._ext=0,this._urlId=0,this._ext=o,this._urlId=c}clone(){return new l(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}i.ExtendedAttrs=l},9092:(D,i,a)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Buffer=i.MAX_BUFFER_SIZE=void 0;const l=a(6349),_=a(7226),o=a(3734),c=a(8437),v=a(4634),m=a(511),g=a(643),e=a(4863),s=a(7116);i.MAX_BUFFER_SIZE=4294967295,i.Buffer=class{constructor(t,r,h){this._hasScrollback=t,this._optionsService=r,this._bufferService=h,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=c.DEFAULT_ATTR_DATA.clone(),this.savedCharset=s.DEFAULT_CHARSET,this.markers=[],this._nullCell=m.CellData.fromCharData([0,g.NULL_CELL_CHAR,g.NULL_CELL_WIDTH,g.NULL_CELL_CODE]),this._whitespaceCell=m.CellData.fromCharData([0,g.WHITESPACE_CELL_CHAR,g.WHITESPACE_CELL_WIDTH,g.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._memoryCleanupQueue=new _.IdleTaskQueue,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new l.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(t){return t?(this._nullCell.fg=t.fg,this._nullCell.bg=t.bg,this._nullCell.extended=t.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new o.ExtendedAttrs),this._nullCell}getWhitespaceCell(t){return t?(this._whitespaceCell.fg=t.fg,this._whitespaceCell.bg=t.bg,this._whitespaceCell.extended=t.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new o.ExtendedAttrs),this._whitespaceCell}getBlankLine(t,r){return new c.BufferLine(this._bufferService.cols,this.getNullCell(t),r)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){const t=this.ybase+this.y-this.ydisp;return t>=0&&t<this._rows}_getCorrectBufferLength(t){if(!this._hasScrollback)return t;const r=t+this._optionsService.rawOptions.scrollback;return r>i.MAX_BUFFER_SIZE?i.MAX_BUFFER_SIZE:r}fillViewportRows(t){if(this.lines.length===0){t===void 0&&(t=c.DEFAULT_ATTR_DATA);let r=this._rows;for(;r--;)this.lines.push(this.getBlankLine(t))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new l.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(t,r){const h=this.getNullCell(c.DEFAULT_ATTR_DATA);let d=0;const b=this._getCorrectBufferLength(r);if(b>this.lines.maxLength&&(this.lines.maxLength=b),this.lines.length>0){if(this._cols<t)for(let f=0;f<this.lines.length;f++)d+=+this.lines.get(f).resize(t,h);let C=0;if(this._rows<r)for(let f=this._rows;f<r;f++)this.lines.length<r+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new c.BufferLine(t,h)):this.ybase>0&&this.lines.length<=this.ybase+this.y+C+1?(this.ybase--,C++,this.ydisp>0&&this.ydisp--):this.lines.push(new c.BufferLine(t,h)));else for(let f=this._rows;f>r;f--)this.lines.length>r+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(b<this.lines.maxLength){const f=this.lines.length-b;f>0&&(this.lines.trimStart(f),this.ybase=Math.max(this.ybase-f,0),this.ydisp=Math.max(this.ydisp-f,0),this.savedY=Math.max(this.savedY-f,0)),this.lines.maxLength=b}this.x=Math.min(this.x,t-1),this.y=Math.min(this.y,r-1),C&&(this.y+=C),this.savedX=Math.min(this.savedX,t-1),this.scrollTop=0}if(this.scrollBottom=r-1,this._isReflowEnabled&&(this._reflow(t,r),this._cols>t))for(let C=0;C<this.lines.length;C++)d+=+this.lines.get(C).resize(t,h);this._cols=t,this._rows=r,this._memoryCleanupQueue.clear(),d>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue(()=>this._batchedMemoryCleanup()))}_batchedMemoryCleanup(){let t=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,t=!1);let r=0;for(;this._memoryCleanupPosition<this.lines.length;)if(r+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),r>100)return!0;return t}get _isReflowEnabled(){const t=this._optionsService.rawOptions.windowsPty;return t&&t.buildNumber?this._hasScrollback&&t.backend==="conpty"&&t.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(t,r){this._cols!==t&&(t>this._cols?this._reflowLarger(t,r):this._reflowSmaller(t,r))}_reflowLarger(t,r){const h=(0,v.reflowLargerGetLinesToRemove)(this.lines,this._cols,t,this.ybase+this.y,this.getNullCell(c.DEFAULT_ATTR_DATA));if(h.length>0){const d=(0,v.reflowLargerCreateNewLayout)(this.lines,h);(0,v.reflowLargerApplyNewLayout)(this.lines,d.layout),this._reflowLargerAdjustViewport(t,r,d.countRemoved)}}_reflowLargerAdjustViewport(t,r,h){const d=this.getNullCell(c.DEFAULT_ATTR_DATA);let b=h;for(;b-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<r&&this.lines.push(new c.BufferLine(t,d))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-h,0)}_reflowSmaller(t,r){const h=this.getNullCell(c.DEFAULT_ATTR_DATA),d=[];let b=0;for(let C=this.lines.length-1;C>=0;C--){let f=this.lines.get(C);if(!f||!f.isWrapped&&f.getTrimmedLength()<=t)continue;const S=[f];for(;f.isWrapped&&C>0;)f=this.lines.get(--C),S.unshift(f);const L=this.ybase+this.y;if(L>=C&&L<C+S.length)continue;const T=S[S.length-1].getTrimmedLength(),A=(0,v.reflowSmallerGetNewLineLengths)(S,this._cols,t),O=A.length-S.length;let N;N=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+O):Math.max(0,this.lines.length-this.lines.maxLength+O);const W=[];for(let P=0;P<O;P++){const $=this.getBlankLine(c.DEFAULT_ATTR_DATA,!0);W.push($)}W.length>0&&(d.push({start:C+S.length+b,newLines:W}),b+=W.length),S.push(...W);let q=A.length-1,K=A[q];K===0&&(q--,K=A[q]);let E=S.length-O-1,B=T;for(;E>=0;){const P=Math.min(B,K);if(S[q]===void 0)break;if(S[q].copyCellsFrom(S[E],B-P,K-P,P,!0),K-=P,K===0&&(q--,K=A[q]),B-=P,B===0){E--;const $=Math.max(E,0);B=(0,v.getWrappedLineTrimmedLength)(S,$,this._cols)}}for(let P=0;P<S.length;P++)A[P]<t&&S[P].setCell(A[P],h);let M=O-N;for(;M-- >0;)this.ybase===0?this.y<r-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+b)-r&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+O,this.ybase+r-1)}if(d.length>0){const C=[],f=[];for(let q=0;q<this.lines.length;q++)f.push(this.lines.get(q));const S=this.lines.length;let L=S-1,T=0,A=d[T];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+b);let O=0;for(let q=Math.min(this.lines.maxLength-1,S+b-1);q>=0;q--)if(A&&A.start>L+O){for(let K=A.newLines.length-1;K>=0;K--)this.lines.set(q--,A.newLines[K]);q++,C.push({index:L+1,amount:A.newLines.length}),O+=A.newLines.length,A=d[++T]}else this.lines.set(q,f[L--]);let N=0;for(let q=C.length-1;q>=0;q--)C[q].index+=N,this.lines.onInsertEmitter.fire(C[q]),N+=C[q].amount;const W=Math.max(0,S+b-this.lines.maxLength);W>0&&this.lines.onTrimEmitter.fire(W)}}translateBufferLineToString(t,r,h=0,d){const b=this.lines.get(t);return b?b.translateToString(r,h,d):""}getWrappedRangeForLine(t){let r=t,h=t;for(;r>0&&this.lines.get(r).isWrapped;)r--;for(;h+1<this.lines.length&&this.lines.get(h+1).isWrapped;)h++;return{first:r,last:h}}setupTabStops(t){for(t!=null?this.tabs[t]||(t=this.prevStop(t)):(this.tabs={},t=0);t<this._cols;t+=this._optionsService.rawOptions.tabStopWidth)this.tabs[t]=!0}prevStop(t){for(t==null&&(t=this.x);!this.tabs[--t]&&t>0;);return t>=this._cols?this._cols-1:t<0?0:t}nextStop(t){for(t==null&&(t=this.x);!this.tabs[++t]&&t<this._cols;);return t>=this._cols?this._cols-1:t<0?0:t}clearMarkers(t){this._isClearing=!0;for(let r=0;r<this.markers.length;r++)this.markers[r].line===t&&(this.markers[r].dispose(),this.markers.splice(r--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let t=0;t<this.markers.length;t++)this.markers[t].dispose(),this.markers.splice(t--,1);this._isClearing=!1}addMarker(t){const r=new e.Marker(t);return this.markers.push(r),r.register(this.lines.onTrim(h=>{r.line-=h,r.line<0&&r.dispose()})),r.register(this.lines.onInsert(h=>{r.line>=h.index&&(r.line+=h.amount)})),r.register(this.lines.onDelete(h=>{r.line>=h.index&&r.line<h.index+h.amount&&r.dispose(),r.line>h.index&&(r.line-=h.amount)})),r.register(r.onDispose(()=>this._removeMarker(r))),r}_removeMarker(t){this._isClearing||this.markers.splice(this.markers.indexOf(t),1)}}},8437:(D,i,a)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferLine=i.DEFAULT_ATTR_DATA=void 0;const l=a(3734),_=a(511),o=a(643),c=a(482);i.DEFAULT_ATTR_DATA=Object.freeze(new l.AttributeData);let v=0;class m{constructor(e,s,t=!1){this.isWrapped=t,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*e);const r=s||_.CellData.fromCharData([0,o.NULL_CELL_CHAR,o.NULL_CELL_WIDTH,o.NULL_CELL_CODE]);for(let h=0;h<e;++h)this.setCell(h,r);this.length=e}get(e){const s=this._data[3*e+0],t=2097151&s;return[this._data[3*e+1],2097152&s?this._combined[e]:t?(0,c.stringFromCodePoint)(t):"",s>>22,2097152&s?this._combined[e].charCodeAt(this._combined[e].length-1):t]}set(e,s){this._data[3*e+1]=s[o.CHAR_DATA_ATTR_INDEX],s[o.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[e]=s[1],this._data[3*e+0]=2097152|e|s[o.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*e+0]=s[o.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|s[o.CHAR_DATA_WIDTH_INDEX]<<22}getWidth(e){return this._data[3*e+0]>>22}hasWidth(e){return 12582912&this._data[3*e+0]}getFg(e){return this._data[3*e+1]}getBg(e){return this._data[3*e+2]}hasContent(e){return 4194303&this._data[3*e+0]}getCodePoint(e){const s=this._data[3*e+0];return 2097152&s?this._combined[e].charCodeAt(this._combined[e].length-1):2097151&s}isCombined(e){return 2097152&this._data[3*e+0]}getString(e){const s=this._data[3*e+0];return 2097152&s?this._combined[e]:2097151&s?(0,c.stringFromCodePoint)(2097151&s):""}isProtected(e){return 536870912&this._data[3*e+2]}loadCell(e,s){return v=3*e,s.content=this._data[v+0],s.fg=this._data[v+1],s.bg=this._data[v+2],2097152&s.content&&(s.combinedData=this._combined[e]),268435456&s.bg&&(s.extended=this._extendedAttrs[e]),s}setCell(e,s){2097152&s.content&&(this._combined[e]=s.combinedData),268435456&s.bg&&(this._extendedAttrs[e]=s.extended),this._data[3*e+0]=s.content,this._data[3*e+1]=s.fg,this._data[3*e+2]=s.bg}setCellFromCodePoint(e,s,t,r,h,d){268435456&h&&(this._extendedAttrs[e]=d),this._data[3*e+0]=s|t<<22,this._data[3*e+1]=r,this._data[3*e+2]=h}addCodepointToCell(e,s){let t=this._data[3*e+0];2097152&t?this._combined[e]+=(0,c.stringFromCodePoint)(s):(2097151&t?(this._combined[e]=(0,c.stringFromCodePoint)(2097151&t)+(0,c.stringFromCodePoint)(s),t&=-2097152,t|=2097152):t=s|4194304,this._data[3*e+0]=t)}insertCells(e,s,t,r){if((e%=this.length)&&this.getWidth(e-1)===2&&this.setCellFromCodePoint(e-1,0,1,(r==null?void 0:r.fg)||0,(r==null?void 0:r.bg)||0,(r==null?void 0:r.extended)||new l.ExtendedAttrs),s<this.length-e){const h=new _.CellData;for(let d=this.length-e-s-1;d>=0;--d)this.setCell(e+s+d,this.loadCell(e+d,h));for(let d=0;d<s;++d)this.setCell(e+d,t)}else for(let h=e;h<this.length;++h)this.setCell(h,t);this.getWidth(this.length-1)===2&&this.setCellFromCodePoint(this.length-1,0,1,(r==null?void 0:r.fg)||0,(r==null?void 0:r.bg)||0,(r==null?void 0:r.extended)||new l.ExtendedAttrs)}deleteCells(e,s,t,r){if(e%=this.length,s<this.length-e){const h=new _.CellData;for(let d=0;d<this.length-e-s;++d)this.setCell(e+d,this.loadCell(e+s+d,h));for(let d=this.length-s;d<this.length;++d)this.setCell(d,t)}else for(let h=e;h<this.length;++h)this.setCell(h,t);e&&this.getWidth(e-1)===2&&this.setCellFromCodePoint(e-1,0,1,(r==null?void 0:r.fg)||0,(r==null?void 0:r.bg)||0,(r==null?void 0:r.extended)||new l.ExtendedAttrs),this.getWidth(e)!==0||this.hasContent(e)||this.setCellFromCodePoint(e,0,1,(r==null?void 0:r.fg)||0,(r==null?void 0:r.bg)||0,(r==null?void 0:r.extended)||new l.ExtendedAttrs)}replaceCells(e,s,t,r,h=!1){if(h)for(e&&this.getWidth(e-1)===2&&!this.isProtected(e-1)&&this.setCellFromCodePoint(e-1,0,1,(r==null?void 0:r.fg)||0,(r==null?void 0:r.bg)||0,(r==null?void 0:r.extended)||new l.ExtendedAttrs),s<this.length&&this.getWidth(s-1)===2&&!this.isProtected(s)&&this.setCellFromCodePoint(s,0,1,(r==null?void 0:r.fg)||0,(r==null?void 0:r.bg)||0,(r==null?void 0:r.extended)||new l.ExtendedAttrs);e<s&&e<this.length;)this.isProtected(e)||this.setCell(e,t),e++;else for(e&&this.getWidth(e-1)===2&&this.setCellFromCodePoint(e-1,0,1,(r==null?void 0:r.fg)||0,(r==null?void 0:r.bg)||0,(r==null?void 0:r.extended)||new l.ExtendedAttrs),s<this.length&&this.getWidth(s-1)===2&&this.setCellFromCodePoint(s,0,1,(r==null?void 0:r.fg)||0,(r==null?void 0:r.bg)||0,(r==null?void 0:r.extended)||new l.ExtendedAttrs);e<s&&e<this.length;)this.setCell(e++,t)}resize(e,s){if(e===this.length)return 4*this._data.length*2<this._data.buffer.byteLength;const t=3*e;if(e>this.length){if(this._data.buffer.byteLength>=4*t)this._data=new Uint32Array(this._data.buffer,0,t);else{const r=new Uint32Array(t);r.set(this._data),this._data=r}for(let r=this.length;r<e;++r)this.setCell(r,s)}else{this._data=this._data.subarray(0,t);const r=Object.keys(this._combined);for(let d=0;d<r.length;d++){const b=parseInt(r[d],10);b>=e&&delete this._combined[b]}const h=Object.keys(this._extendedAttrs);for(let d=0;d<h.length;d++){const b=parseInt(h[d],10);b>=e&&delete this._extendedAttrs[b]}}return this.length=e,4*t*2<this._data.buffer.byteLength}cleanupMemory(){if(4*this._data.length*2<this._data.buffer.byteLength){const e=new Uint32Array(this._data.length);return e.set(this._data),this._data=e,1}return 0}fill(e,s=!1){if(s)for(let t=0;t<this.length;++t)this.isProtected(t)||this.setCell(t,e);else{this._combined={},this._extendedAttrs={};for(let t=0;t<this.length;++t)this.setCell(t,e)}}copyFrom(e){this.length!==e.length?this._data=new Uint32Array(e._data):this._data.set(e._data),this.length=e.length,this._combined={};for(const s in e._combined)this._combined[s]=e._combined[s];this._extendedAttrs={};for(const s in e._extendedAttrs)this._extendedAttrs[s]=e._extendedAttrs[s];this.isWrapped=e.isWrapped}clone(){const e=new m(0);e._data=new Uint32Array(this._data),e.length=this.length;for(const s in this._combined)e._combined[s]=this._combined[s];for(const s in this._extendedAttrs)e._extendedAttrs[s]=this._extendedAttrs[s];return e.isWrapped=this.isWrapped,e}getTrimmedLength(){for(let e=this.length-1;e>=0;--e)if(4194303&this._data[3*e+0])return e+(this._data[3*e+0]>>22);return 0}getNoBgTrimmedLength(){for(let e=this.length-1;e>=0;--e)if(4194303&this._data[3*e+0]||50331648&this._data[3*e+2])return e+(this._data[3*e+0]>>22);return 0}copyCellsFrom(e,s,t,r,h){const d=e._data;if(h)for(let C=r-1;C>=0;C--){for(let f=0;f<3;f++)this._data[3*(t+C)+f]=d[3*(s+C)+f];268435456&d[3*(s+C)+2]&&(this._extendedAttrs[t+C]=e._extendedAttrs[s+C])}else for(let C=0;C<r;C++){for(let f=0;f<3;f++)this._data[3*(t+C)+f]=d[3*(s+C)+f];268435456&d[3*(s+C)+2]&&(this._extendedAttrs[t+C]=e._extendedAttrs[s+C])}const b=Object.keys(e._combined);for(let C=0;C<b.length;C++){const f=parseInt(b[C],10);f>=s&&(this._combined[f-s+t]=e._combined[f])}}translateToString(e=!1,s=0,t=this.length){e&&(t=Math.min(t,this.getTrimmedLength()));let r="";for(;s<t;){const h=this._data[3*s+0],d=2097151&h;r+=2097152&h?this._combined[s]:d?(0,c.stringFromCodePoint)(d):o.WHITESPACE_CELL_CHAR,s+=h>>22||1}return r}}i.BufferLine=m},4841:(D,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.getRangeLength=void 0,i.getRangeLength=function(a,l){if(a.start.y>a.end.y)throw new Error(`Buffer range end (${a.end.x}, ${a.end.y}) cannot be before start (${a.start.x}, ${a.start.y})`);return l*(a.end.y-a.start.y)+(a.end.x-a.start.x+1)}},4634:(D,i)=>{function a(l,_,o){if(_===l.length-1)return l[_].getTrimmedLength();const c=!l[_].hasContent(o-1)&&l[_].getWidth(o-1)===1,v=l[_+1].getWidth(0)===2;return c&&v?o-1:o}Object.defineProperty(i,"__esModule",{value:!0}),i.getWrappedLineTrimmedLength=i.reflowSmallerGetNewLineLengths=i.reflowLargerApplyNewLayout=i.reflowLargerCreateNewLayout=i.reflowLargerGetLinesToRemove=void 0,i.reflowLargerGetLinesToRemove=function(l,_,o,c,v){const m=[];for(let g=0;g<l.length-1;g++){let e=g,s=l.get(++e);if(!s.isWrapped)continue;const t=[l.get(g)];for(;e<l.length&&s.isWrapped;)t.push(s),s=l.get(++e);if(c>=g&&c<e){g+=t.length-1;continue}let r=0,h=a(t,r,_),d=1,b=0;for(;d<t.length;){const f=a(t,d,_),S=f-b,L=o-h,T=Math.min(S,L);t[r].copyCellsFrom(t[d],b,h,T,!1),h+=T,h===o&&(r++,h=0),b+=T,b===f&&(d++,b=0),h===0&&r!==0&&t[r-1].getWidth(o-1)===2&&(t[r].copyCellsFrom(t[r-1],o-1,h++,1,!1),t[r-1].setCell(o-1,v))}t[r].replaceCells(h,o,v);let C=0;for(let f=t.length-1;f>0&&(f>r||t[f].getTrimmedLength()===0);f--)C++;C>0&&(m.push(g+t.length-C),m.push(C)),g+=t.length-1}return m},i.reflowLargerCreateNewLayout=function(l,_){const o=[];let c=0,v=_[c],m=0;for(let g=0;g<l.length;g++)if(v===g){const e=_[++c];l.onDeleteEmitter.fire({index:g-m,amount:e}),g+=e-1,m+=e,v=_[++c]}else o.push(g);return{layout:o,countRemoved:m}},i.reflowLargerApplyNewLayout=function(l,_){const o=[];for(let c=0;c<_.length;c++)o.push(l.get(_[c]));for(let c=0;c<o.length;c++)l.set(c,o[c]);l.length=_.length},i.reflowSmallerGetNewLineLengths=function(l,_,o){const c=[],v=l.map((s,t)=>a(l,t,_)).reduce((s,t)=>s+t);let m=0,g=0,e=0;for(;e<v;){if(v-e<o){c.push(v-e);break}m+=o;const s=a(l,g,_);m>s&&(m-=s,g++);const t=l[g].getWidth(m-1)===2;t&&m--;const r=t?o-1:o;c.push(r),e+=r}return c},i.getWrappedLineTrimmedLength=a},5295:(D,i,a)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferSet=void 0;const l=a(8460),_=a(844),o=a(9092);class c extends _.Disposable{constructor(m,g){super(),this._optionsService=m,this._bufferService=g,this._onBufferActivate=this.register(new l.EventEmitter),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.resize(this._bufferService.cols,this._bufferService.rows))),this.register(this._optionsService.onSpecificOptionChange("tabStopWidth",()=>this.setupTabStops()))}reset(){this._normal=new o.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new o.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(m){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(m),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(m,g){this._normal.resize(m,g),this._alt.resize(m,g),this.setupTabStops(m)}setupTabStops(m){this._normal.setupTabStops(m),this._alt.setupTabStops(m)}}i.BufferSet=c},511:(D,i,a)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CellData=void 0;const l=a(482),_=a(643),o=a(3734);class c extends o.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new o.ExtendedAttrs,this.combinedData=""}static fromCharData(m){const g=new c;return g.setFromCharData(m),g}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,l.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(m){this.fg=m[_.CHAR_DATA_ATTR_INDEX],this.bg=0;let g=!1;if(m[_.CHAR_DATA_CHAR_INDEX].length>2)g=!0;else if(m[_.CHAR_DATA_CHAR_INDEX].length===2){const e=m[_.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=e&&e<=56319){const s=m[_.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=s&&s<=57343?this.content=1024*(e-55296)+s-56320+65536|m[_.CHAR_DATA_WIDTH_INDEX]<<22:g=!0}else g=!0}else this.content=m[_.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|m[_.CHAR_DATA_WIDTH_INDEX]<<22;g&&(this.combinedData=m[_.CHAR_DATA_CHAR_INDEX],this.content=2097152|m[_.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}i.CellData=c},643:(D,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.WHITESPACE_CELL_CODE=i.WHITESPACE_CELL_WIDTH=i.WHITESPACE_CELL_CHAR=i.NULL_CELL_CODE=i.NULL_CELL_WIDTH=i.NULL_CELL_CHAR=i.CHAR_DATA_CODE_INDEX=i.CHAR_DATA_WIDTH_INDEX=i.CHAR_DATA_CHAR_INDEX=i.CHAR_DATA_ATTR_INDEX=i.DEFAULT_EXT=i.DEFAULT_ATTR=i.DEFAULT_COLOR=void 0,i.DEFAULT_COLOR=0,i.DEFAULT_ATTR=256|i.DEFAULT_COLOR<<9,i.DEFAULT_EXT=0,i.CHAR_DATA_ATTR_INDEX=0,i.CHAR_DATA_CHAR_INDEX=1,i.CHAR_DATA_WIDTH_INDEX=2,i.CHAR_DATA_CODE_INDEX=3,i.NULL_CELL_CHAR="",i.NULL_CELL_WIDTH=1,i.NULL_CELL_CODE=0,i.WHITESPACE_CELL_CHAR=" ",i.WHITESPACE_CELL_WIDTH=1,i.WHITESPACE_CELL_CODE=32},4863:(D,i,a)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Marker=void 0;const l=a(8460),_=a(844);class o{get id(){return this._id}constructor(v){this.line=v,this.isDisposed=!1,this._disposables=[],this._id=o._nextId++,this._onDispose=this.register(new l.EventEmitter),this.onDispose=this._onDispose.event}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),(0,_.disposeArray)(this._disposables),this._disposables.length=0)}register(v){return this._disposables.push(v),v}}i.Marker=o,o._nextId=1},7116:(D,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DEFAULT_CHARSET=i.CHARSETS=void 0,i.CHARSETS={},i.DEFAULT_CHARSET=i.CHARSETS.B,i.CHARSETS[0]={"`":"â",a:"â",b:"â",c:"â",d:"â",e:"â",f:"Â°",g:"Â±",h:"â¤",i:"â",j:"â",k:"â",l:"â",m:"â",n:"â¼",o:"âº",p:"â»",q:"â",r:"â¼",s:"â½",t:"â",u:"â¤",v:"â´",w:"â¬",x:"â",y:"â¤",z:"â¥","{":"Ï","|":"â ","}":"Â£","~":"Â·"},i.CHARSETS.A={"#":"Â£"},i.CHARSETS.B=void 0,i.CHARSETS[4]={"#":"Â£","@":"Â¾","[":"ij","\\":"Â½","]":"|","{":"Â¨","|":"f","}":"Â¼","~":"Â´"},i.CHARSETS.C=i.CHARSETS[5]={"[":"Ã","\\":"Ã","]":"Ã","^":"Ã","`":"Ã©","{":"Ã¤","|":"Ã¶","}":"Ã¥","~":"Ã¼"},i.CHARSETS.R={"#":"Â£","@":"Ã ","[":"Â°","\\":"Ã§","]":"Â§","{":"Ã©","|":"Ã¹","}":"Ã¨","~":"Â¨"},i.CHARSETS.Q={"@":"Ã ","[":"Ã¢","\\":"Ã§","]":"Ãª","^":"Ã®","`":"Ã´","{":"Ã©","|":"Ã¹","}":"Ã¨","~":"Ã»"},i.CHARSETS.K={"@":"Â§","[":"Ã","\\":"Ã","]":"Ã","{":"Ã¤","|":"Ã¶","}":"Ã¼","~":"Ã"},i.CHARSETS.Y={"#":"Â£","@":"Â§","[":"Â°","\\":"Ã§","]":"Ã©","`":"Ã¹","{":"Ã ","|":"Ã²","}":"Ã¨","~":"Ã¬"},i.CHARSETS.E=i.CHARSETS[6]={"@":"Ã","[":"Ã","\\":"Ã","]":"Ã","^":"Ã","`":"Ã¤","{":"Ã¦","|":"Ã¸","}":"Ã¥","~":"Ã¼"},i.CHARSETS.Z={"#":"Â£","@":"Â§","[":"Â¡","\\":"Ã","]":"Â¿","{":"Â°","|":"Ã±","}":"Ã§"},i.CHARSETS.H=i.CHARSETS[7]={"@":"Ã","[":"Ã","\\":"Ã","]":"Ã","^":"Ã","`":"Ã©","{":"Ã¤","|":"Ã¶","}":"Ã¥","~":"Ã¼"},i.CHARSETS["="]={"#":"Ã¹","@":"Ã ","[":"Ã©","\\":"Ã§","]":"Ãª","^":"Ã®",_:"Ã¨","`":"Ã´","{":"Ã¤","|":"Ã¶","}":"Ã¼","~":"Ã»"}},2584:(D,i)=>{var a,l,_;Object.defineProperty(i,"__esModule",{value:!0}),i.C1_ESCAPED=i.C1=i.C0=void 0,function(o){o.NUL="\0",o.SOH="",o.STX="",o.ETX="",o.EOT="",o.ENQ="",o.ACK="",o.BEL="\x07",o.BS="\b",o.HT="	",o.LF=`
`,o.VT="\v",o.FF="\f",o.CR="\r",o.SO="",o.SI="",o.DLE="",o.DC1="",o.DC2="",o.DC3="",o.DC4="",o.NAK="",o.SYN="",o.ETB="",o.CAN="",o.EM="",o.SUB="",o.ESC="\x1B",o.FS="",o.GS="",o.RS="",o.US="",o.SP=" ",o.DEL=""}(a||(i.C0=a={})),function(o){o.PAD="Â",o.HOP="Â",o.BPH="Â",o.NBH="Â",o.IND="Â",o.NEL="Â",o.SSA="Â",o.ESA="Â",o.HTS="Â",o.HTJ="Â",o.VTS="Â",o.PLD="Â",o.PLU="Â",o.RI="Â",o.SS2="Â",o.SS3="Â",o.DCS="Â",o.PU1="Â",o.PU2="Â",o.STS="Â",o.CCH="Â",o.MW="Â",o.SPA="Â",o.EPA="Â",o.SOS="Â",o.SGCI="Â",o.SCI="Â",o.CSI="Â",o.ST="Â",o.OSC="Â",o.PM="Â",o.APC="Â"}(l||(i.C1=l={})),function(o){o.ST=`${a.ESC}\\`}(_||(i.C1_ESCAPED=_={}))},7399:(D,i,a)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.evaluateKeyboardEvent=void 0;const l=a(2584),_={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};i.evaluateKeyboardEvent=function(o,c,v,m){const g={type:0,cancel:!1,key:void 0},e=(o.shiftKey?1:0)|(o.altKey?2:0)|(o.ctrlKey?4:0)|(o.metaKey?8:0);switch(o.keyCode){case 0:o.key==="UIKeyInputUpArrow"?g.key=c?l.C0.ESC+"OA":l.C0.ESC+"[A":o.key==="UIKeyInputLeftArrow"?g.key=c?l.C0.ESC+"OD":l.C0.ESC+"[D":o.key==="UIKeyInputRightArrow"?g.key=c?l.C0.ESC+"OC":l.C0.ESC+"[C":o.key==="UIKeyInputDownArrow"&&(g.key=c?l.C0.ESC+"OB":l.C0.ESC+"[B");break;case 8:if(o.altKey){g.key=l.C0.ESC+l.C0.DEL;break}g.key=l.C0.DEL;break;case 9:if(o.shiftKey){g.key=l.C0.ESC+"[Z";break}g.key=l.C0.HT,g.cancel=!0;break;case 13:g.key=o.altKey?l.C0.ESC+l.C0.CR:l.C0.CR,g.cancel=!0;break;case 27:g.key=l.C0.ESC,o.altKey&&(g.key=l.C0.ESC+l.C0.ESC),g.cancel=!0;break;case 37:if(o.metaKey)break;e?(g.key=l.C0.ESC+"[1;"+(e+1)+"D",g.key===l.C0.ESC+"[1;3D"&&(g.key=l.C0.ESC+(v?"b":"[1;5D"))):g.key=c?l.C0.ESC+"OD":l.C0.ESC+"[D";break;case 39:if(o.metaKey)break;e?(g.key=l.C0.ESC+"[1;"+(e+1)+"C",g.key===l.C0.ESC+"[1;3C"&&(g.key=l.C0.ESC+(v?"f":"[1;5C"))):g.key=c?l.C0.ESC+"OC":l.C0.ESC+"[C";break;case 38:if(o.metaKey)break;e?(g.key=l.C0.ESC+"[1;"+(e+1)+"A",v||g.key!==l.C0.ESC+"[1;3A"||(g.key=l.C0.ESC+"[1;5A")):g.key=c?l.C0.ESC+"OA":l.C0.ESC+"[A";break;case 40:if(o.metaKey)break;e?(g.key=l.C0.ESC+"[1;"+(e+1)+"B",v||g.key!==l.C0.ESC+"[1;3B"||(g.key=l.C0.ESC+"[1;5B")):g.key=c?l.C0.ESC+"OB":l.C0.ESC+"[B";break;case 45:o.shiftKey||o.ctrlKey||(g.key=l.C0.ESC+"[2~");break;case 46:g.key=e?l.C0.ESC+"[3;"+(e+1)+"~":l.C0.ESC+"[3~";break;case 36:g.key=e?l.C0.ESC+"[1;"+(e+1)+"H":c?l.C0.ESC+"OH":l.C0.ESC+"[H";break;case 35:g.key=e?l.C0.ESC+"[1;"+(e+1)+"F":c?l.C0.ESC+"OF":l.C0.ESC+"[F";break;case 33:o.shiftKey?g.type=2:o.ctrlKey?g.key=l.C0.ESC+"[5;"+(e+1)+"~":g.key=l.C0.ESC+"[5~";break;case 34:o.shiftKey?g.type=3:o.ctrlKey?g.key=l.C0.ESC+"[6;"+(e+1)+"~":g.key=l.C0.ESC+"[6~";break;case 112:g.key=e?l.C0.ESC+"[1;"+(e+1)+"P":l.C0.ESC+"OP";break;case 113:g.key=e?l.C0.ESC+"[1;"+(e+1)+"Q":l.C0.ESC+"OQ";break;case 114:g.key=e?l.C0.ESC+"[1;"+(e+1)+"R":l.C0.ESC+"OR";break;case 115:g.key=e?l.C0.ESC+"[1;"+(e+1)+"S":l.C0.ESC+"OS";break;case 116:g.key=e?l.C0.ESC+"[15;"+(e+1)+"~":l.C0.ESC+"[15~";break;case 117:g.key=e?l.C0.ESC+"[17;"+(e+1)+"~":l.C0.ESC+"[17~";break;case 118:g.key=e?l.C0.ESC+"[18;"+(e+1)+"~":l.C0.ESC+"[18~";break;case 119:g.key=e?l.C0.ESC+"[19;"+(e+1)+"~":l.C0.ESC+"[19~";break;case 120:g.key=e?l.C0.ESC+"[20;"+(e+1)+"~":l.C0.ESC+"[20~";break;case 121:g.key=e?l.C0.ESC+"[21;"+(e+1)+"~":l.C0.ESC+"[21~";break;case 122:g.key=e?l.C0.ESC+"[23;"+(e+1)+"~":l.C0.ESC+"[23~";break;case 123:g.key=e?l.C0.ESC+"[24;"+(e+1)+"~":l.C0.ESC+"[24~";break;default:if(!o.ctrlKey||o.shiftKey||o.altKey||o.metaKey)if(v&&!m||!o.altKey||o.metaKey)!v||o.altKey||o.ctrlKey||o.shiftKey||!o.metaKey?o.key&&!o.ctrlKey&&!o.altKey&&!o.metaKey&&o.keyCode>=48&&o.key.length===1?g.key=o.key:o.key&&o.ctrlKey&&(o.key==="_"&&(g.key=l.C0.US),o.key==="@"&&(g.key=l.C0.NUL)):o.keyCode===65&&(g.type=1);else{const s=_[o.keyCode],t=s==null?void 0:s[o.shiftKey?1:0];if(t)g.key=l.C0.ESC+t;else if(o.keyCode>=65&&o.keyCode<=90){const r=o.ctrlKey?o.keyCode-64:o.keyCode+32;let h=String.fromCharCode(r);o.shiftKey&&(h=h.toUpperCase()),g.key=l.C0.ESC+h}else if(o.keyCode===32)g.key=l.C0.ESC+(o.ctrlKey?l.C0.NUL:" ");else if(o.key==="Dead"&&o.code.startsWith("Key")){let r=o.code.slice(3,4);o.shiftKey||(r=r.toLowerCase()),g.key=l.C0.ESC+r,g.cancel=!0}}else o.keyCode>=65&&o.keyCode<=90?g.key=String.fromCharCode(o.keyCode-64):o.keyCode===32?g.key=l.C0.NUL:o.keyCode>=51&&o.keyCode<=55?g.key=String.fromCharCode(o.keyCode-51+27):o.keyCode===56?g.key=l.C0.DEL:o.keyCode===219?g.key=l.C0.ESC:o.keyCode===220?g.key=l.C0.FS:o.keyCode===221&&(g.key=l.C0.GS)}return g}},482:(D,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Utf8ToUtf32=i.StringToUtf32=i.utf32ToString=i.stringFromCodePoint=void 0,i.stringFromCodePoint=function(a){return a>65535?(a-=65536,String.fromCharCode(55296+(a>>10))+String.fromCharCode(a%1024+56320)):String.fromCharCode(a)},i.utf32ToString=function(a,l=0,_=a.length){let o="";for(let c=l;c<_;++c){let v=a[c];v>65535?(v-=65536,o+=String.fromCharCode(55296+(v>>10))+String.fromCharCode(v%1024+56320)):o+=String.fromCharCode(v)}return o},i.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(a,l){const _=a.length;if(!_)return 0;let o=0,c=0;if(this._interim){const v=a.charCodeAt(c++);56320<=v&&v<=57343?l[o++]=1024*(this._interim-55296)+v-56320+65536:(l[o++]=this._interim,l[o++]=v),this._interim=0}for(let v=c;v<_;++v){const m=a.charCodeAt(v);if(55296<=m&&m<=56319){if(++v>=_)return this._interim=m,o;const g=a.charCodeAt(v);56320<=g&&g<=57343?l[o++]=1024*(m-55296)+g-56320+65536:(l[o++]=m,l[o++]=g)}else m!==65279&&(l[o++]=m)}return o}},i.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(a,l){const _=a.length;if(!_)return 0;let o,c,v,m,g=0,e=0,s=0;if(this.interim[0]){let h=!1,d=this.interim[0];d&=(224&d)==192?31:(240&d)==224?15:7;let b,C=0;for(;(b=63&this.interim[++C])&&C<4;)d<<=6,d|=b;const f=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,S=f-C;for(;s<S;){if(s>=_)return 0;if(b=a[s++],(192&b)!=128){s--,h=!0;break}this.interim[C++]=b,d<<=6,d|=63&b}h||(f===2?d<128?s--:l[g++]=d:f===3?d<2048||d>=55296&&d<=57343||d===65279||(l[g++]=d):d<65536||d>1114111||(l[g++]=d)),this.interim.fill(0)}const t=_-4;let r=s;for(;r<_;){for(;!(!(r<t)||128&(o=a[r])||128&(c=a[r+1])||128&(v=a[r+2])||128&(m=a[r+3]));)l[g++]=o,l[g++]=c,l[g++]=v,l[g++]=m,r+=4;if(o=a[r++],o<128)l[g++]=o;else if((224&o)==192){if(r>=_)return this.interim[0]=o,g;if(c=a[r++],(192&c)!=128){r--;continue}if(e=(31&o)<<6|63&c,e<128){r--;continue}l[g++]=e}else if((240&o)==224){if(r>=_)return this.interim[0]=o,g;if(c=a[r++],(192&c)!=128){r--;continue}if(r>=_)return this.interim[0]=o,this.interim[1]=c,g;if(v=a[r++],(192&v)!=128){r--;continue}if(e=(15&o)<<12|(63&c)<<6|63&v,e<2048||e>=55296&&e<=57343||e===65279)continue;l[g++]=e}else if((248&o)==240){if(r>=_)return this.interim[0]=o,g;if(c=a[r++],(192&c)!=128){r--;continue}if(r>=_)return this.interim[0]=o,this.interim[1]=c,g;if(v=a[r++],(192&v)!=128){r--;continue}if(r>=_)return this.interim[0]=o,this.interim[1]=c,this.interim[2]=v,g;if(m=a[r++],(192&m)!=128){r--;continue}if(e=(7&o)<<18|(63&c)<<12|(63&v)<<6|63&m,e<65536||e>1114111)continue;l[g++]=e}}return g}}},225:(D,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.UnicodeV6=void 0;const a=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],l=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]];let _;i.UnicodeV6=class{constructor(){if(this.version="6",!_){_=new Uint8Array(65536),_.fill(1),_[0]=0,_.fill(0,1,32),_.fill(0,127,160),_.fill(2,4352,4448),_[9001]=2,_[9002]=2,_.fill(2,11904,42192),_[12351]=1,_.fill(2,44032,55204),_.fill(2,63744,64256),_.fill(2,65040,65050),_.fill(2,65072,65136),_.fill(2,65280,65377),_.fill(2,65504,65511);for(let o=0;o<a.length;++o)_.fill(0,a[o][0],a[o][1]+1)}}wcwidth(o){return o<32?0:o<127?1:o<65536?_[o]:function(c,v){let m,g=0,e=v.length-1;if(c<v[0][0]||c>v[e][1])return!1;for(;e>=g;)if(m=g+e>>1,c>v[m][1])g=m+1;else{if(!(c<v[m][0]))return!0;e=m-1}return!1}(o,l)?0:o>=131072&&o<=196605||o>=196608&&o<=262141?2:1}}},5981:(D,i,a)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.WriteBuffer=void 0;const l=a(8460),_=a(844);class o extends _.Disposable{constructor(v){super(),this._action=v,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this.register(new l.EventEmitter),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(v,m){if(m!==void 0&&this._syncCalls>m)return void(this._syncCalls=0);if(this._pendingData+=v.length,this._writeBuffer.push(v),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;let g;for(this._isSyncWriting=!0;g=this._writeBuffer.shift();){this._action(g);const e=this._callbacks.shift();e&&e()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(v,m){if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput)return this._didUserInput=!1,this._pendingData+=v.length,this._writeBuffer.push(v),this._callbacks.push(m),void this._innerWrite();setTimeout(()=>this._innerWrite())}this._pendingData+=v.length,this._writeBuffer.push(v),this._callbacks.push(m)}_innerWrite(v=0,m=!0){const g=v||Date.now();for(;this._writeBuffer.length>this._bufferOffset;){const e=this._writeBuffer[this._bufferOffset],s=this._action(e,m);if(s){const r=h=>Date.now()-g>=12?setTimeout(()=>this._innerWrite(0,h)):this._innerWrite(g,h);return void s.catch(h=>(queueMicrotask(()=>{throw h}),Promise.resolve(!1))).then(r)}const t=this._callbacks[this._bufferOffset];if(t&&t(),this._bufferOffset++,this._pendingData-=e.length,Date.now()-g>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(()=>this._innerWrite())):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}}i.WriteBuffer=o},5941:(D,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.toRgbString=i.parseColor=void 0;const a=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,l=/^[\da-f]+$/;function _(o,c){const v=o.toString(16),m=v.length<2?"0"+v:v;switch(c){case 4:return v[0];case 8:return m;case 12:return(m+m).slice(0,3);default:return m+m}}i.parseColor=function(o){if(!o)return;let c=o.toLowerCase();if(c.indexOf("rgb:")===0){c=c.slice(4);const v=a.exec(c);if(v){const m=v[1]?15:v[4]?255:v[7]?4095:65535;return[Math.round(parseInt(v[1]||v[4]||v[7]||v[10],16)/m*255),Math.round(parseInt(v[2]||v[5]||v[8]||v[11],16)/m*255),Math.round(parseInt(v[3]||v[6]||v[9]||v[12],16)/m*255)]}}else if(c.indexOf("#")===0&&(c=c.slice(1),l.exec(c)&&[3,6,9,12].includes(c.length))){const v=c.length/3,m=[0,0,0];for(let g=0;g<3;++g){const e=parseInt(c.slice(v*g,v*g+v),16);m[g]=v===1?e<<4:v===2?e:v===3?e>>4:e>>8}return m}},i.toRgbString=function(o,c=16){const[v,m,g]=o;return`rgb:${_(v,c)}/${_(m,c)}/${_(g,c)}`}},5770:(D,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.PAYLOAD_LIMIT=void 0,i.PAYLOAD_LIMIT=1e7},6351:(D,i,a)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DcsHandler=i.DcsParser=void 0;const l=a(482),_=a(8742),o=a(5770),c=[];i.DcsParser=class{constructor(){this._handlers=Object.create(null),this._active=c,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=c}registerHandler(m,g){this._handlers[m]===void 0&&(this._handlers[m]=[]);const e=this._handlers[m];return e.push(g),{dispose:()=>{const s=e.indexOf(g);s!==-1&&e.splice(s,1)}}}clearHandler(m){this._handlers[m]&&delete this._handlers[m]}setHandlerFallback(m){this._handlerFb=m}reset(){if(this._active.length)for(let m=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;m>=0;--m)this._active[m].unhook(!1);this._stack.paused=!1,this._active=c,this._ident=0}hook(m,g){if(this.reset(),this._ident=m,this._active=this._handlers[m]||c,this._active.length)for(let e=this._active.length-1;e>=0;e--)this._active[e].hook(g);else this._handlerFb(this._ident,"HOOK",g)}put(m,g,e){if(this._active.length)for(let s=this._active.length-1;s>=0;s--)this._active[s].put(m,g,e);else this._handlerFb(this._ident,"PUT",(0,l.utf32ToString)(m,g,e))}unhook(m,g=!0){if(this._active.length){let e=!1,s=this._active.length-1,t=!1;if(this._stack.paused&&(s=this._stack.loopPosition-1,e=g,t=this._stack.fallThrough,this._stack.paused=!1),!t&&e===!1){for(;s>=0&&(e=this._active[s].unhook(m),e!==!0);s--)if(e instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=s,this._stack.fallThrough=!1,e;s--}for(;s>=0;s--)if(e=this._active[s].unhook(!1),e instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=s,this._stack.fallThrough=!0,e}else this._handlerFb(this._ident,"UNHOOK",m);this._active=c,this._ident=0}};const v=new _.Params;v.addParam(0),i.DcsHandler=class{constructor(m){this._handler=m,this._data="",this._params=v,this._hitLimit=!1}hook(m){this._params=m.length>1||m.params[0]?m.clone():v,this._data="",this._hitLimit=!1}put(m,g,e){this._hitLimit||(this._data+=(0,l.utf32ToString)(m,g,e),this._data.length>o.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}unhook(m){let g=!1;if(this._hitLimit)g=!1;else if(m&&(g=this._handler(this._data,this._params),g instanceof Promise))return g.then(e=>(this._params=v,this._data="",this._hitLimit=!1,e));return this._params=v,this._data="",this._hitLimit=!1,g}}},2015:(D,i,a)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.EscapeSequenceParser=i.VT500_TRANSITION_TABLE=i.TransitionTable=void 0;const l=a(844),_=a(8742),o=a(6242),c=a(6351);class v{constructor(s){this.table=new Uint8Array(s)}setDefault(s,t){this.table.fill(s<<4|t)}add(s,t,r,h){this.table[t<<8|s]=r<<4|h}addMany(s,t,r,h){for(let d=0;d<s.length;d++)this.table[t<<8|s[d]]=r<<4|h}}i.TransitionTable=v;const m=160;i.VT500_TRANSITION_TABLE=function(){const e=new v(4095),s=Array.apply(null,Array(256)).map((C,f)=>f),t=(C,f)=>s.slice(C,f),r=t(32,127),h=t(0,24);h.push(25),h.push.apply(h,t(28,32));const d=t(0,14);let b;for(b in e.setDefault(1,0),e.addMany(r,0,2,0),d)e.addMany([24,26,153,154],b,3,0),e.addMany(t(128,144),b,3,0),e.addMany(t(144,152),b,3,0),e.add(156,b,0,0),e.add(27,b,11,1),e.add(157,b,4,8),e.addMany([152,158,159],b,0,7),e.add(155,b,11,3),e.add(144,b,11,9);return e.addMany(h,0,3,0),e.addMany(h,1,3,1),e.add(127,1,0,1),e.addMany(h,8,0,8),e.addMany(h,3,3,3),e.add(127,3,0,3),e.addMany(h,4,3,4),e.add(127,4,0,4),e.addMany(h,6,3,6),e.addMany(h,5,3,5),e.add(127,5,0,5),e.addMany(h,2,3,2),e.add(127,2,0,2),e.add(93,1,4,8),e.addMany(r,8,5,8),e.add(127,8,5,8),e.addMany([156,27,24,26,7],8,6,0),e.addMany(t(28,32),8,0,8),e.addMany([88,94,95],1,0,7),e.addMany(r,7,0,7),e.addMany(h,7,0,7),e.add(156,7,0,0),e.add(127,7,0,7),e.add(91,1,11,3),e.addMany(t(64,127),3,7,0),e.addMany(t(48,60),3,8,4),e.addMany([60,61,62,63],3,9,4),e.addMany(t(48,60),4,8,4),e.addMany(t(64,127),4,7,0),e.addMany([60,61,62,63],4,0,6),e.addMany(t(32,64),6,0,6),e.add(127,6,0,6),e.addMany(t(64,127),6,0,0),e.addMany(t(32,48),3,9,5),e.addMany(t(32,48),5,9,5),e.addMany(t(48,64),5,0,6),e.addMany(t(64,127),5,7,0),e.addMany(t(32,48),4,9,5),e.addMany(t(32,48),1,9,2),e.addMany(t(32,48),2,9,2),e.addMany(t(48,127),2,10,0),e.addMany(t(48,80),1,10,0),e.addMany(t(81,88),1,10,0),e.addMany([89,90,92],1,10,0),e.addMany(t(96,127),1,10,0),e.add(80,1,11,9),e.addMany(h,9,0,9),e.add(127,9,0,9),e.addMany(t(28,32),9,0,9),e.addMany(t(32,48),9,9,12),e.addMany(t(48,60),9,8,10),e.addMany([60,61,62,63],9,9,10),e.addMany(h,11,0,11),e.addMany(t(32,128),11,0,11),e.addMany(t(28,32),11,0,11),e.addMany(h,10,0,10),e.add(127,10,0,10),e.addMany(t(28,32),10,0,10),e.addMany(t(48,60),10,8,10),e.addMany([60,61,62,63],10,0,11),e.addMany(t(32,48),10,9,12),e.addMany(h,12,0,12),e.add(127,12,0,12),e.addMany(t(28,32),12,0,12),e.addMany(t(32,48),12,9,12),e.addMany(t(48,64),12,0,11),e.addMany(t(64,127),12,12,13),e.addMany(t(64,127),10,12,13),e.addMany(t(64,127),9,12,13),e.addMany(h,13,13,13),e.addMany(r,13,13,13),e.add(127,13,0,13),e.addMany([27,156,24,26],13,14,0),e.add(m,0,2,0),e.add(m,8,5,8),e.add(m,6,0,6),e.add(m,11,0,11),e.add(m,13,13,13),e}();class g extends l.Disposable{constructor(s=i.VT500_TRANSITION_TABLE){super(),this._transitions=s,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new _.Params,this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._printHandlerFb=(t,r,h)=>{},this._executeHandlerFb=t=>{},this._csiHandlerFb=(t,r)=>{},this._escHandlerFb=t=>{},this._errorHandlerFb=t=>t,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this.register((0,l.toDisposable)(()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)})),this._oscParser=this.register(new o.OscParser),this._dcsParser=this.register(new c.DcsParser),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},()=>!0)}_identifier(s,t=[64,126]){let r=0;if(s.prefix){if(s.prefix.length>1)throw new Error("only one byte as prefix supported");if(r=s.prefix.charCodeAt(0),r&&60>r||r>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(s.intermediates){if(s.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let d=0;d<s.intermediates.length;++d){const b=s.intermediates.charCodeAt(d);if(32>b||b>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");r<<=8,r|=b}}if(s.final.length!==1)throw new Error("final must be a single byte");const h=s.final.charCodeAt(0);if(t[0]>h||h>t[1])throw new Error(`final must be in range ${t[0]} .. ${t[1]}`);return r<<=8,r|=h,r}identToString(s){const t=[];for(;s;)t.push(String.fromCharCode(255&s)),s>>=8;return t.reverse().join("")}setPrintHandler(s){this._printHandler=s}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(s,t){const r=this._identifier(s,[48,126]);this._escHandlers[r]===void 0&&(this._escHandlers[r]=[]);const h=this._escHandlers[r];return h.push(t),{dispose:()=>{const d=h.indexOf(t);d!==-1&&h.splice(d,1)}}}clearEscHandler(s){this._escHandlers[this._identifier(s,[48,126])]&&delete this._escHandlers[this._identifier(s,[48,126])]}setEscHandlerFallback(s){this._escHandlerFb=s}setExecuteHandler(s,t){this._executeHandlers[s.charCodeAt(0)]=t}clearExecuteHandler(s){this._executeHandlers[s.charCodeAt(0)]&&delete this._executeHandlers[s.charCodeAt(0)]}setExecuteHandlerFallback(s){this._executeHandlerFb=s}registerCsiHandler(s,t){const r=this._identifier(s);this._csiHandlers[r]===void 0&&(this._csiHandlers[r]=[]);const h=this._csiHandlers[r];return h.push(t),{dispose:()=>{const d=h.indexOf(t);d!==-1&&h.splice(d,1)}}}clearCsiHandler(s){this._csiHandlers[this._identifier(s)]&&delete this._csiHandlers[this._identifier(s)]}setCsiHandlerFallback(s){this._csiHandlerFb=s}registerDcsHandler(s,t){return this._dcsParser.registerHandler(this._identifier(s),t)}clearDcsHandler(s){this._dcsParser.clearHandler(this._identifier(s))}setDcsHandlerFallback(s){this._dcsParser.setHandlerFallback(s)}registerOscHandler(s,t){return this._oscParser.registerHandler(s,t)}clearOscHandler(s){this._oscParser.clearHandler(s)}setOscHandlerFallback(s){this._oscParser.setHandlerFallback(s)}setErrorHandler(s){this._errorHandler=s}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(s,t,r,h,d){this._parseStack.state=s,this._parseStack.handlers=t,this._parseStack.handlerPos=r,this._parseStack.transition=h,this._parseStack.chunkPos=d}parse(s,t,r){let h,d=0,b=0,C=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,C=this._parseStack.chunkPos+1;else{if(r===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");const f=this._parseStack.handlers;let S=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(r===!1&&S>-1){for(;S>=0&&(h=f[S](this._params),h!==!0);S--)if(h instanceof Promise)return this._parseStack.handlerPos=S,h}this._parseStack.handlers=[];break;case 4:if(r===!1&&S>-1){for(;S>=0&&(h=f[S](),h!==!0);S--)if(h instanceof Promise)return this._parseStack.handlerPos=S,h}this._parseStack.handlers=[];break;case 6:if(d=s[this._parseStack.chunkPos],h=this._dcsParser.unhook(d!==24&&d!==26,r),h)return h;d===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(d=s[this._parseStack.chunkPos],h=this._oscParser.end(d!==24&&d!==26,r),h)return h;d===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,C=this._parseStack.chunkPos+1,this.precedingCodepoint=0,this.currentState=15&this._parseStack.transition}for(let f=C;f<t;++f){switch(d=s[f],b=this._transitions.table[this.currentState<<8|(d<160?d:m)],b>>4){case 2:for(let O=f+1;;++O){if(O>=t||(d=s[O])<32||d>126&&d<m){this._printHandler(s,f,O),f=O-1;break}if(++O>=t||(d=s[O])<32||d>126&&d<m){this._printHandler(s,f,O),f=O-1;break}if(++O>=t||(d=s[O])<32||d>126&&d<m){this._printHandler(s,f,O),f=O-1;break}if(++O>=t||(d=s[O])<32||d>126&&d<m){this._printHandler(s,f,O),f=O-1;break}}break;case 3:this._executeHandlers[d]?this._executeHandlers[d]():this._executeHandlerFb(d),this.precedingCodepoint=0;break;case 0:break;case 1:if(this._errorHandler({position:f,code:d,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:const S=this._csiHandlers[this._collect<<8|d];let L=S?S.length-1:-1;for(;L>=0&&(h=S[L](this._params),h!==!0);L--)if(h instanceof Promise)return this._preserveStack(3,S,L,b,f),h;L<0&&this._csiHandlerFb(this._collect<<8|d,this._params),this.precedingCodepoint=0;break;case 8:do switch(d){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(d-48)}while(++f<t&&(d=s[f])>47&&d<60);f--;break;case 9:this._collect<<=8,this._collect|=d;break;case 10:const T=this._escHandlers[this._collect<<8|d];let A=T?T.length-1:-1;for(;A>=0&&(h=T[A](),h!==!0);A--)if(h instanceof Promise)return this._preserveStack(4,T,A,b,f),h;A<0&&this._escHandlerFb(this._collect<<8|d),this.precedingCodepoint=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|d,this._params);break;case 13:for(let O=f+1;;++O)if(O>=t||(d=s[O])===24||d===26||d===27||d>127&&d<m){this._dcsParser.put(s,f,O),f=O-1;break}break;case 14:if(h=this._dcsParser.unhook(d!==24&&d!==26),h)return this._preserveStack(6,[],0,b,f),h;d===27&&(b|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0;break;case 4:this._oscParser.start();break;case 5:for(let O=f+1;;O++)if(O>=t||(d=s[O])<32||d>127&&d<m){this._oscParser.put(s,f,O),f=O-1;break}break;case 6:if(h=this._oscParser.end(d!==24&&d!==26),h)return this._preserveStack(5,[],0,b,f),h;d===27&&(b|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0}this.currentState=15&b}}}i.EscapeSequenceParser=g},6242:(D,i,a)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.OscHandler=i.OscParser=void 0;const l=a(5770),_=a(482),o=[];i.OscParser=class{constructor(){this._state=0,this._active=o,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(c,v){this._handlers[c]===void 0&&(this._handlers[c]=[]);const m=this._handlers[c];return m.push(v),{dispose:()=>{const g=m.indexOf(v);g!==-1&&m.splice(g,1)}}}clearHandler(c){this._handlers[c]&&delete this._handlers[c]}setHandlerFallback(c){this._handlerFb=c}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=o}reset(){if(this._state===2)for(let c=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;c>=0;--c)this._active[c].end(!1);this._stack.paused=!1,this._active=o,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||o,this._active.length)for(let c=this._active.length-1;c>=0;c--)this._active[c].start();else this._handlerFb(this._id,"START")}_put(c,v,m){if(this._active.length)for(let g=this._active.length-1;g>=0;g--)this._active[g].put(c,v,m);else this._handlerFb(this._id,"PUT",(0,_.utf32ToString)(c,v,m))}start(){this.reset(),this._state=1}put(c,v,m){if(this._state!==3){if(this._state===1)for(;v<m;){const g=c[v++];if(g===59){this._state=2,this._start();break}if(g<48||57<g)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+g-48}this._state===2&&m-v>0&&this._put(c,v,m)}}end(c,v=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){let m=!1,g=this._active.length-1,e=!1;if(this._stack.paused&&(g=this._stack.loopPosition-1,m=v,e=this._stack.fallThrough,this._stack.paused=!1),!e&&m===!1){for(;g>=0&&(m=this._active[g].end(c),m!==!0);g--)if(m instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=g,this._stack.fallThrough=!1,m;g--}for(;g>=0;g--)if(m=this._active[g].end(!1),m instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=g,this._stack.fallThrough=!0,m}else this._handlerFb(this._id,"END",c);this._active=o,this._id=-1,this._state=0}}},i.OscHandler=class{constructor(c){this._handler=c,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(c,v,m){this._hitLimit||(this._data+=(0,_.utf32ToString)(c,v,m),this._data.length>l.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}end(c){let v=!1;if(this._hitLimit)v=!1;else if(c&&(v=this._handler(this._data),v instanceof Promise))return v.then(m=>(this._data="",this._hitLimit=!1,m));return this._data="",this._hitLimit=!1,v}}},8742:(D,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Params=void 0;const a=2147483647;class l{static fromArray(o){const c=new l;if(!o.length)return c;for(let v=Array.isArray(o[0])?1:0;v<o.length;++v){const m=o[v];if(Array.isArray(m))for(let g=0;g<m.length;++g)c.addSubParam(m[g]);else c.addParam(m)}return c}constructor(o=32,c=32){if(this.maxLength=o,this.maxSubParamsLength=c,c>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(o),this.length=0,this._subParams=new Int32Array(c),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(o),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}clone(){const o=new l(this.maxLength,this.maxSubParamsLength);return o.params.set(this.params),o.length=this.length,o._subParams.set(this._subParams),o._subParamsLength=this._subParamsLength,o._subParamsIdx.set(this._subParamsIdx),o._rejectDigits=this._rejectDigits,o._rejectSubDigits=this._rejectSubDigits,o._digitIsSub=this._digitIsSub,o}toArray(){const o=[];for(let c=0;c<this.length;++c){o.push(this.params[c]);const v=this._subParamsIdx[c]>>8,m=255&this._subParamsIdx[c];m-v>0&&o.push(Array.prototype.slice.call(this._subParams,v,m))}return o}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(o){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(o<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=o>a?a:o}}addSubParam(o){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(o<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=o>a?a:o,this._subParamsIdx[this.length-1]++}}hasSubParams(o){return(255&this._subParamsIdx[o])-(this._subParamsIdx[o]>>8)>0}getSubParams(o){const c=this._subParamsIdx[o]>>8,v=255&this._subParamsIdx[o];return v-c>0?this._subParams.subarray(c,v):null}getSubParamsAll(){const o={};for(let c=0;c<this.length;++c){const v=this._subParamsIdx[c]>>8,m=255&this._subParamsIdx[c];m-v>0&&(o[c]=this._subParams.slice(v,m))}return o}addDigit(o){let c;if(this._rejectDigits||!(c=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;const v=this._digitIsSub?this._subParams:this.params,m=v[c-1];v[c-1]=~m?Math.min(10*m+o,a):o}}i.Params=l},5741:(D,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.AddonManager=void 0,i.AddonManager=class{constructor(){this._addons=[]}dispose(){for(let a=this._addons.length-1;a>=0;a--)this._addons[a].instance.dispose()}loadAddon(a,l){const _={instance:l,dispose:l.dispose,isDisposed:!1};this._addons.push(_),l.dispose=()=>this._wrappedAddonDispose(_),l.activate(a)}_wrappedAddonDispose(a){if(a.isDisposed)return;let l=-1;for(let _=0;_<this._addons.length;_++)if(this._addons[_]===a){l=_;break}if(l===-1)throw new Error("Could not dispose an addon that has not been loaded");a.isDisposed=!0,a.dispose.apply(a.instance),this._addons.splice(l,1)}}},8771:(D,i,a)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferApiView=void 0;const l=a(3785),_=a(511);i.BufferApiView=class{constructor(o,c){this._buffer=o,this.type=c}init(o){return this._buffer=o,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(o){const c=this._buffer.lines.get(o);if(c)return new l.BufferLineApiView(c)}getNullCell(){return new _.CellData}}},3785:(D,i,a)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferLineApiView=void 0;const l=a(511);i.BufferLineApiView=class{constructor(_){this._line=_}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(_,o){if(!(_<0||_>=this._line.length))return o?(this._line.loadCell(_,o),o):this._line.loadCell(_,new l.CellData)}translateToString(_,o,c){return this._line.translateToString(_,o,c)}}},8285:(D,i,a)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferNamespaceApi=void 0;const l=a(8771),_=a(8460),o=a(844);class c extends o.Disposable{constructor(m){super(),this._core=m,this._onBufferChange=this.register(new _.EventEmitter),this.onBufferChange=this._onBufferChange.event,this._normal=new l.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new l.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(()=>this._onBufferChange.fire(this.active))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}}i.BufferNamespaceApi=c},7975:(D,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ParserApi=void 0,i.ParserApi=class{constructor(a){this._core=a}registerCsiHandler(a,l){return this._core.registerCsiHandler(a,_=>l(_.toArray()))}addCsiHandler(a,l){return this.registerCsiHandler(a,l)}registerDcsHandler(a,l){return this._core.registerDcsHandler(a,(_,o)=>l(_,o.toArray()))}addDcsHandler(a,l){return this.registerDcsHandler(a,l)}registerEscHandler(a,l){return this._core.registerEscHandler(a,l)}addEscHandler(a,l){return this.registerEscHandler(a,l)}registerOscHandler(a,l){return this._core.registerOscHandler(a,l)}addOscHandler(a,l){return this.registerOscHandler(a,l)}}},7090:(D,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.UnicodeApi=void 0,i.UnicodeApi=class{constructor(a){this._core=a}register(a){this._core.unicodeService.register(a)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(a){this._core.unicodeService.activeVersion=a}}},744:function(D,i,a){var l=this&&this.__decorate||function(e,s,t,r){var h,d=arguments.length,b=d<3?s:r===null?r=Object.getOwnPropertyDescriptor(s,t):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(e,s,t,r);else for(var C=e.length-1;C>=0;C--)(h=e[C])&&(b=(d<3?h(b):d>3?h(s,t,b):h(s,t))||b);return d>3&&b&&Object.defineProperty(s,t,b),b},_=this&&this.__param||function(e,s){return function(t,r){s(t,r,e)}};Object.defineProperty(i,"__esModule",{value:!0}),i.BufferService=i.MINIMUM_ROWS=i.MINIMUM_COLS=void 0;const o=a(8460),c=a(844),v=a(5295),m=a(2585);i.MINIMUM_COLS=2,i.MINIMUM_ROWS=1;let g=i.BufferService=class extends c.Disposable{get buffer(){return this.buffers.active}constructor(e){super(),this.isUserScrolling=!1,this._onResize=this.register(new o.EventEmitter),this.onResize=this._onResize.event,this._onScroll=this.register(new o.EventEmitter),this.onScroll=this._onScroll.event,this.cols=Math.max(e.rawOptions.cols||0,i.MINIMUM_COLS),this.rows=Math.max(e.rawOptions.rows||0,i.MINIMUM_ROWS),this.buffers=this.register(new v.BufferSet(e,this))}resize(e,s){this.cols=e,this.rows=s,this.buffers.resize(e,s),this._onResize.fire({cols:e,rows:s})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(e,s=!1){const t=this.buffer;let r;r=this._cachedBlankLine,r&&r.length===this.cols&&r.getFg(0)===e.fg&&r.getBg(0)===e.bg||(r=t.getBlankLine(e,s),this._cachedBlankLine=r),r.isWrapped=s;const h=t.ybase+t.scrollTop,d=t.ybase+t.scrollBottom;if(t.scrollTop===0){const b=t.lines.isFull;d===t.lines.length-1?b?t.lines.recycle().copyFrom(r):t.lines.push(r.clone()):t.lines.splice(d+1,0,r.clone()),b?this.isUserScrolling&&(t.ydisp=Math.max(t.ydisp-1,0)):(t.ybase++,this.isUserScrolling||t.ydisp++)}else{const b=d-h+1;t.lines.shiftElements(h+1,b-1,-1),t.lines.set(d,r.clone())}this.isUserScrolling||(t.ydisp=t.ybase),this._onScroll.fire(t.ydisp)}scrollLines(e,s,t){const r=this.buffer;if(e<0){if(r.ydisp===0)return;this.isUserScrolling=!0}else e+r.ydisp>=r.ybase&&(this.isUserScrolling=!1);const h=r.ydisp;r.ydisp=Math.max(Math.min(r.ydisp+e,r.ybase),0),h!==r.ydisp&&(s||this._onScroll.fire(r.ydisp))}};i.BufferService=g=l([_(0,m.IOptionsService)],g)},7994:(D,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CharsetService=void 0,i.CharsetService=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(a){this.glevel=a,this.charset=this._charsets[a]}setgCharset(a,l){this._charsets[a]=l,this.glevel===a&&(this.charset=l)}}},1753:function(D,i,a){var l=this&&this.__decorate||function(r,h,d,b){var C,f=arguments.length,S=f<3?h:b===null?b=Object.getOwnPropertyDescriptor(h,d):b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(r,h,d,b);else for(var L=r.length-1;L>=0;L--)(C=r[L])&&(S=(f<3?C(S):f>3?C(h,d,S):C(h,d))||S);return f>3&&S&&Object.defineProperty(h,d,S),S},_=this&&this.__param||function(r,h){return function(d,b){h(d,b,r)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CoreMouseService=void 0;const o=a(2585),c=a(8460),v=a(844),m={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:r=>r.button!==4&&r.action===1&&(r.ctrl=!1,r.alt=!1,r.shift=!1,!0)},VT200:{events:19,restrict:r=>r.action!==32},DRAG:{events:23,restrict:r=>r.action!==32||r.button!==3},ANY:{events:31,restrict:r=>!0}};function g(r,h){let d=(r.ctrl?16:0)|(r.shift?4:0)|(r.alt?8:0);return r.button===4?(d|=64,d|=r.action):(d|=3&r.button,4&r.button&&(d|=64),8&r.button&&(d|=128),r.action===32?d|=32:r.action!==0||h||(d|=3)),d}const e=String.fromCharCode,s={DEFAULT:r=>{const h=[g(r,!1)+32,r.col+32,r.row+32];return h[0]>255||h[1]>255||h[2]>255?"":`\x1B[M${e(h[0])}${e(h[1])}${e(h[2])}`},SGR:r=>{const h=r.action===0&&r.button!==4?"m":"M";return`\x1B[<${g(r,!0)};${r.col};${r.row}${h}`},SGR_PIXELS:r=>{const h=r.action===0&&r.button!==4?"m":"M";return`\x1B[<${g(r,!0)};${r.x};${r.y}${h}`}};let t=i.CoreMouseService=class extends v.Disposable{constructor(r,h){super(),this._bufferService=r,this._coreService=h,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._onProtocolChange=this.register(new c.EventEmitter),this.onProtocolChange=this._onProtocolChange.event;for(const d of Object.keys(m))this.addProtocol(d,m[d]);for(const d of Object.keys(s))this.addEncoding(d,s[d]);this.reset()}addProtocol(r,h){this._protocols[r]=h}addEncoding(r,h){this._encodings[r]=h}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(r){if(!this._protocols[r])throw new Error(`unknown protocol "${r}"`);this._activeProtocol=r,this._onProtocolChange.fire(this._protocols[r].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(r){if(!this._encodings[r])throw new Error(`unknown encoding "${r}"`);this._activeEncoding=r}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null}triggerMouseEvent(r){if(r.col<0||r.col>=this._bufferService.cols||r.row<0||r.row>=this._bufferService.rows||r.button===4&&r.action===32||r.button===3&&r.action!==32||r.button!==4&&(r.action===2||r.action===3)||(r.col++,r.row++,r.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,r,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(r))return!1;const h=this._encodings[this._activeEncoding](r);return h&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(h):this._coreService.triggerDataEvent(h,!0)),this._lastEvent=r,!0}explainEvents(r){return{down:!!(1&r),up:!!(2&r),drag:!!(4&r),move:!!(8&r),wheel:!!(16&r)}}_equalEvents(r,h,d){if(d){if(r.x!==h.x||r.y!==h.y)return!1}else if(r.col!==h.col||r.row!==h.row)return!1;return r.button===h.button&&r.action===h.action&&r.ctrl===h.ctrl&&r.alt===h.alt&&r.shift===h.shift}};i.CoreMouseService=t=l([_(0,o.IBufferService),_(1,o.ICoreService)],t)},6975:function(D,i,a){var l=this&&this.__decorate||function(t,r,h,d){var b,C=arguments.length,f=C<3?r:d===null?d=Object.getOwnPropertyDescriptor(r,h):d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")f=Reflect.decorate(t,r,h,d);else for(var S=t.length-1;S>=0;S--)(b=t[S])&&(f=(C<3?b(f):C>3?b(r,h,f):b(r,h))||f);return C>3&&f&&Object.defineProperty(r,h,f),f},_=this&&this.__param||function(t,r){return function(h,d){r(h,d,t)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CoreService=void 0;const o=a(1439),c=a(8460),v=a(844),m=a(2585),g=Object.freeze({insertMode:!1}),e=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0});let s=i.CoreService=class extends v.Disposable{constructor(t,r,h){super(),this._bufferService=t,this._logService=r,this._optionsService=h,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this.register(new c.EventEmitter),this.onData=this._onData.event,this._onUserInput=this.register(new c.EventEmitter),this.onUserInput=this._onUserInput.event,this._onBinary=this.register(new c.EventEmitter),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this.register(new c.EventEmitter),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=(0,o.clone)(g),this.decPrivateModes=(0,o.clone)(e)}reset(){this.modes=(0,o.clone)(g),this.decPrivateModes=(0,o.clone)(e)}triggerDataEvent(t,r=!1){if(this._optionsService.rawOptions.disableStdin)return;const h=this._bufferService.buffer;r&&this._optionsService.rawOptions.scrollOnUserInput&&h.ybase!==h.ydisp&&this._onRequestScrollToBottom.fire(),r&&this._onUserInput.fire(),this._logService.debug(`sending data "${t}"`,()=>t.split("").map(d=>d.charCodeAt(0))),this._onData.fire(t)}triggerBinaryEvent(t){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${t}"`,()=>t.split("").map(r=>r.charCodeAt(0))),this._onBinary.fire(t))}};i.CoreService=s=l([_(0,m.IBufferService),_(1,m.ILogService),_(2,m.IOptionsService)],s)},9074:(D,i,a)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DecorationService=void 0;const l=a(8055),_=a(8460),o=a(844),c=a(6106);let v=0,m=0;class g extends o.Disposable{get decorations(){return this._decorations.values()}constructor(){super(),this._decorations=new c.SortedList(t=>t==null?void 0:t.marker.line),this._onDecorationRegistered=this.register(new _.EventEmitter),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this.register(new _.EventEmitter),this.onDecorationRemoved=this._onDecorationRemoved.event,this.register((0,o.toDisposable)(()=>this.reset()))}registerDecoration(t){if(t.marker.isDisposed)return;const r=new e(t);if(r){const h=r.marker.onDispose(()=>r.dispose());r.onDispose(()=>{r&&(this._decorations.delete(r)&&this._onDecorationRemoved.fire(r),h.dispose())}),this._decorations.insert(r),this._onDecorationRegistered.fire(r)}return r}reset(){for(const t of this._decorations.values())t.dispose();this._decorations.clear()}*getDecorationsAtCell(t,r,h){var d,b,C;let f=0,S=0;for(const L of this._decorations.getKeyIterator(r))f=(d=L.options.x)!==null&&d!==void 0?d:0,S=f+((b=L.options.width)!==null&&b!==void 0?b:1),t>=f&&t<S&&(!h||((C=L.options.layer)!==null&&C!==void 0?C:"bottom")===h)&&(yield L)}forEachDecorationAtCell(t,r,h,d){this._decorations.forEachByKey(r,b=>{var C,f,S;v=(C=b.options.x)!==null&&C!==void 0?C:0,m=v+((f=b.options.width)!==null&&f!==void 0?f:1),t>=v&&t<m&&(!h||((S=b.options.layer)!==null&&S!==void 0?S:"bottom")===h)&&d(b)})}}i.DecorationService=g;class e extends o.Disposable{get isDisposed(){return this._isDisposed}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=l.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=l.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}constructor(t){super(),this.options=t,this.onRenderEmitter=this.register(new _.EventEmitter),this.onRender=this.onRenderEmitter.event,this._onDispose=this.register(new _.EventEmitter),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=t.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}dispose(){this._onDispose.fire(),super.dispose()}}},4348:(D,i,a)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.InstantiationService=i.ServiceCollection=void 0;const l=a(2585),_=a(8343);class o{constructor(...v){this._entries=new Map;for(const[m,g]of v)this.set(m,g)}set(v,m){const g=this._entries.get(v);return this._entries.set(v,m),g}forEach(v){for(const[m,g]of this._entries.entries())v(m,g)}has(v){return this._entries.has(v)}get(v){return this._entries.get(v)}}i.ServiceCollection=o,i.InstantiationService=class{constructor(){this._services=new o,this._services.set(l.IInstantiationService,this)}setService(c,v){this._services.set(c,v)}getService(c){return this._services.get(c)}createInstance(c,...v){const m=(0,_.getServiceDependencies)(c).sort((s,t)=>s.index-t.index),g=[];for(const s of m){const t=this._services.get(s.id);if(!t)throw new Error(`[createInstance] ${c.name} depends on UNKNOWN service ${s.id}.`);g.push(t)}const e=m.length>0?m[0].index:v.length;if(v.length!==e)throw new Error(`[createInstance] First service dependency of ${c.name} at position ${e+1} conflicts with ${v.length} static arguments`);return new c(...v,...g)}}},7866:function(D,i,a){var l=this&&this.__decorate||function(e,s,t,r){var h,d=arguments.length,b=d<3?s:r===null?r=Object.getOwnPropertyDescriptor(s,t):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(e,s,t,r);else for(var C=e.length-1;C>=0;C--)(h=e[C])&&(b=(d<3?h(b):d>3?h(s,t,b):h(s,t))||b);return d>3&&b&&Object.defineProperty(s,t,b),b},_=this&&this.__param||function(e,s){return function(t,r){s(t,r,e)}};Object.defineProperty(i,"__esModule",{value:!0}),i.traceCall=i.setTraceLogger=i.LogService=void 0;const o=a(844),c=a(2585),v={trace:c.LogLevelEnum.TRACE,debug:c.LogLevelEnum.DEBUG,info:c.LogLevelEnum.INFO,warn:c.LogLevelEnum.WARN,error:c.LogLevelEnum.ERROR,off:c.LogLevelEnum.OFF};let m,g=i.LogService=class extends o.Disposable{get logLevel(){return this._logLevel}constructor(e){super(),this._optionsService=e,this._logLevel=c.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),m=this}_updateLogLevel(){this._logLevel=v[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(e){for(let s=0;s<e.length;s++)typeof e[s]=="function"&&(e[s]=e[s]())}_log(e,s,t){this._evalLazyOptionalParams(t),e.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+s,...t)}trace(e,...s){var t,r;this._logLevel<=c.LogLevelEnum.TRACE&&this._log((r=(t=this._optionsService.options.logger)===null||t===void 0?void 0:t.trace.bind(this._optionsService.options.logger))!==null&&r!==void 0?r:console.log,e,s)}debug(e,...s){var t,r;this._logLevel<=c.LogLevelEnum.DEBUG&&this._log((r=(t=this._optionsService.options.logger)===null||t===void 0?void 0:t.debug.bind(this._optionsService.options.logger))!==null&&r!==void 0?r:console.log,e,s)}info(e,...s){var t,r;this._logLevel<=c.LogLevelEnum.INFO&&this._log((r=(t=this._optionsService.options.logger)===null||t===void 0?void 0:t.info.bind(this._optionsService.options.logger))!==null&&r!==void 0?r:console.info,e,s)}warn(e,...s){var t,r;this._logLevel<=c.LogLevelEnum.WARN&&this._log((r=(t=this._optionsService.options.logger)===null||t===void 0?void 0:t.warn.bind(this._optionsService.options.logger))!==null&&r!==void 0?r:console.warn,e,s)}error(e,...s){var t,r;this._logLevel<=c.LogLevelEnum.ERROR&&this._log((r=(t=this._optionsService.options.logger)===null||t===void 0?void 0:t.error.bind(this._optionsService.options.logger))!==null&&r!==void 0?r:console.error,e,s)}};i.LogService=g=l([_(0,c.IOptionsService)],g),i.setTraceLogger=function(e){m=e},i.traceCall=function(e,s,t){if(typeof t.value!="function")throw new Error("not supported");const r=t.value;t.value=function(...h){if(m.logLevel!==c.LogLevelEnum.TRACE)return r.apply(this,h);m.trace(`GlyphRenderer#${r.name}(${h.map(b=>JSON.stringify(b)).join(", ")})`);const d=r.apply(this,h);return m.trace(`GlyphRenderer#${r.name} return`,d),d}}},7302:(D,i,a)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.OptionsService=i.DEFAULT_OPTIONS=void 0;const l=a(8460),_=a(844),o=a(6114);i.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rightClickSelectsWord:o.isMac,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:0};const c=["normal","bold","100","200","300","400","500","600","700","800","900"];class v extends _.Disposable{constructor(g){super(),this._onOptionChange=this.register(new l.EventEmitter),this.onOptionChange=this._onOptionChange.event;const e=Object.assign({},i.DEFAULT_OPTIONS);for(const s in g)if(s in e)try{const t=g[s];e[s]=this._sanitizeAndValidateOption(s,t)}catch(t){console.error(t)}this.rawOptions=e,this.options=Object.assign({},e),this._setupOptions()}onSpecificOptionChange(g,e){return this.onOptionChange(s=>{s===g&&e(this.rawOptions[g])})}onMultipleOptionChange(g,e){return this.onOptionChange(s=>{g.indexOf(s)!==-1&&e()})}_setupOptions(){const g=s=>{if(!(s in i.DEFAULT_OPTIONS))throw new Error(`No option with key "${s}"`);return this.rawOptions[s]},e=(s,t)=>{if(!(s in i.DEFAULT_OPTIONS))throw new Error(`No option with key "${s}"`);t=this._sanitizeAndValidateOption(s,t),this.rawOptions[s]!==t&&(this.rawOptions[s]=t,this._onOptionChange.fire(s))};for(const s in this.rawOptions){const t={get:g.bind(this,s),set:e.bind(this,s)};Object.defineProperty(this.options,s,t)}}_sanitizeAndValidateOption(g,e){switch(g){case"cursorStyle":if(e||(e=i.DEFAULT_OPTIONS[g]),!function(s){return s==="block"||s==="underline"||s==="bar"}(e))throw new Error(`"${e}" is not a valid value for ${g}`);break;case"wordSeparator":e||(e=i.DEFAULT_OPTIONS[g]);break;case"fontWeight":case"fontWeightBold":if(typeof e=="number"&&1<=e&&e<=1e3)break;e=c.includes(e)?e:i.DEFAULT_OPTIONS[g];break;case"cursorWidth":e=Math.floor(e);case"lineHeight":case"tabStopWidth":if(e<1)throw new Error(`${g} cannot be less than 1, value: ${e}`);break;case"minimumContrastRatio":e=Math.max(1,Math.min(21,Math.round(10*e)/10));break;case"scrollback":if((e=Math.min(e,4294967295))<0)throw new Error(`${g} cannot be less than 0, value: ${e}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(e<=0)throw new Error(`${g} cannot be less than or equal to 0, value: ${e}`);break;case"rows":case"cols":if(!e&&e!==0)throw new Error(`${g} must be numeric, value: ${e}`);break;case"windowsPty":e=e??{}}return e}}i.OptionsService=v},2660:function(D,i,a){var l=this&&this.__decorate||function(v,m,g,e){var s,t=arguments.length,r=t<3?m:e===null?e=Object.getOwnPropertyDescriptor(m,g):e;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(v,m,g,e);else for(var h=v.length-1;h>=0;h--)(s=v[h])&&(r=(t<3?s(r):t>3?s(m,g,r):s(m,g))||r);return t>3&&r&&Object.defineProperty(m,g,r),r},_=this&&this.__param||function(v,m){return function(g,e){m(g,e,v)}};Object.defineProperty(i,"__esModule",{value:!0}),i.OscLinkService=void 0;const o=a(2585);let c=i.OscLinkService=class{constructor(v){this._bufferService=v,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(v){const m=this._bufferService.buffer;if(v.id===void 0){const h=m.addMarker(m.ybase+m.y),d={data:v,id:this._nextId++,lines:[h]};return h.onDispose(()=>this._removeMarkerFromLink(d,h)),this._dataByLinkId.set(d.id,d),d.id}const g=v,e=this._getEntryIdKey(g),s=this._entriesWithId.get(e);if(s)return this.addLineToLink(s.id,m.ybase+m.y),s.id;const t=m.addMarker(m.ybase+m.y),r={id:this._nextId++,key:this._getEntryIdKey(g),data:g,lines:[t]};return t.onDispose(()=>this._removeMarkerFromLink(r,t)),this._entriesWithId.set(r.key,r),this._dataByLinkId.set(r.id,r),r.id}addLineToLink(v,m){const g=this._dataByLinkId.get(v);if(g&&g.lines.every(e=>e.line!==m)){const e=this._bufferService.buffer.addMarker(m);g.lines.push(e),e.onDispose(()=>this._removeMarkerFromLink(g,e))}}getLinkData(v){var m;return(m=this._dataByLinkId.get(v))===null||m===void 0?void 0:m.data}_getEntryIdKey(v){return`${v.id};;${v.uri}`}_removeMarkerFromLink(v,m){const g=v.lines.indexOf(m);g!==-1&&(v.lines.splice(g,1),v.lines.length===0&&(v.data.id!==void 0&&this._entriesWithId.delete(v.key),this._dataByLinkId.delete(v.id)))}};i.OscLinkService=c=l([_(0,o.IBufferService)],c)},8343:(D,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.createDecorator=i.getServiceDependencies=i.serviceRegistry=void 0;const a="di$target",l="di$dependencies";i.serviceRegistry=new Map,i.getServiceDependencies=function(_){return _[l]||[]},i.createDecorator=function(_){if(i.serviceRegistry.has(_))return i.serviceRegistry.get(_);const o=function(c,v,m){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(g,e,s){e[a]===e?e[l].push({id:g,index:s}):(e[l]=[{id:g,index:s}],e[a]=e)})(o,c,m)};return o.toString=()=>_,i.serviceRegistry.set(_,o),o}},2585:(D,i,a)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.IDecorationService=i.IUnicodeService=i.IOscLinkService=i.IOptionsService=i.ILogService=i.LogLevelEnum=i.IInstantiationService=i.ICharsetService=i.ICoreService=i.ICoreMouseService=i.IBufferService=void 0;const l=a(8343);var _;i.IBufferService=(0,l.createDecorator)("BufferService"),i.ICoreMouseService=(0,l.createDecorator)("CoreMouseService"),i.ICoreService=(0,l.createDecorator)("CoreService"),i.ICharsetService=(0,l.createDecorator)("CharsetService"),i.IInstantiationService=(0,l.createDecorator)("InstantiationService"),function(o){o[o.TRACE=0]="TRACE",o[o.DEBUG=1]="DEBUG",o[o.INFO=2]="INFO",o[o.WARN=3]="WARN",o[o.ERROR=4]="ERROR",o[o.OFF=5]="OFF"}(_||(i.LogLevelEnum=_={})),i.ILogService=(0,l.createDecorator)("LogService"),i.IOptionsService=(0,l.createDecorator)("OptionsService"),i.IOscLinkService=(0,l.createDecorator)("OscLinkService"),i.IUnicodeService=(0,l.createDecorator)("UnicodeService"),i.IDecorationService=(0,l.createDecorator)("DecorationService")},1480:(D,i,a)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.UnicodeService=void 0;const l=a(8460),_=a(225);i.UnicodeService=class{constructor(){this._providers=Object.create(null),this._active="",this._onChange=new l.EventEmitter,this.onChange=this._onChange.event;const o=new _.UnicodeV6;this.register(o),this._active=o.version,this._activeProvider=o}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(o){if(!this._providers[o])throw new Error(`unknown Unicode version "${o}"`);this._active=o,this._activeProvider=this._providers[o],this._onChange.fire(o)}register(o){this._providers[o.version]=o}wcwidth(o){return this._activeProvider.wcwidth(o)}getStringCellWidth(o){let c=0;const v=o.length;for(let m=0;m<v;++m){let g=o.charCodeAt(m);if(55296<=g&&g<=56319){if(++m>=v)return c+this.wcwidth(g);const e=o.charCodeAt(m);56320<=e&&e<=57343?g=1024*(g-55296)+e-56320+65536:c+=this.wcwidth(e)}c+=this.wcwidth(g)}return c}}}},y={};function x(D){var i=y[D];if(i!==void 0)return i.exports;var a=y[D]={exports:{}};return p[D].call(a.exports,a,a.exports,x),a.exports}var R={};return(()=>{var D=R;Object.defineProperty(D,"__esModule",{value:!0}),D.Terminal=void 0;const i=x(9042),a=x(3236),l=x(844),_=x(5741),o=x(8285),c=x(7975),v=x(7090),m=["cols","rows"];class g extends l.Disposable{constructor(s){super(),this._core=this.register(new a.Terminal(s)),this._addonManager=this.register(new _.AddonManager),this._publicOptions=Object.assign({},this._core.options);const t=h=>this._core.options[h],r=(h,d)=>{this._checkReadonlyOptions(h),this._core.options[h]=d};for(const h in this._core.options){const d={get:t.bind(this,h),set:r.bind(this,h)};Object.defineProperty(this._publicOptions,h,d)}}_checkReadonlyOptions(s){if(m.includes(s))throw new Error(`Option "${s}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new c.ParserApi(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new v.UnicodeApi(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this.register(new o.BufferNamespaceApi(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){const s=this._core.coreService.decPrivateModes;let t="none";switch(this._core.coreMouseService.activeProtocol){case"X10":t="x10";break;case"VT200":t="vt200";break;case"DRAG":t="drag";break;case"ANY":t="any"}return{applicationCursorKeysMode:s.applicationCursorKeys,applicationKeypadMode:s.applicationKeypad,bracketedPasteMode:s.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:t,originMode:s.origin,reverseWraparoundMode:s.reverseWraparound,sendFocusMode:s.sendFocus,wraparoundMode:s.wraparound}}get options(){return this._publicOptions}set options(s){for(const t in s)this._publicOptions[t]=s[t]}blur(){this._core.blur()}focus(){this._core.focus()}resize(s,t){this._verifyIntegers(s,t),this._core.resize(s,t)}open(s){this._core.open(s)}attachCustomKeyEventHandler(s){this._core.attachCustomKeyEventHandler(s)}registerLinkProvider(s){return this._core.registerLinkProvider(s)}registerCharacterJoiner(s){return this._checkProposedApi(),this._core.registerCharacterJoiner(s)}deregisterCharacterJoiner(s){this._checkProposedApi(),this._core.deregisterCharacterJoiner(s)}registerMarker(s=0){return this._verifyIntegers(s),this._core.registerMarker(s)}registerDecoration(s){var t,r,h;return this._checkProposedApi(),this._verifyPositiveIntegers((t=s.x)!==null&&t!==void 0?t:0,(r=s.width)!==null&&r!==void 0?r:0,(h=s.height)!==null&&h!==void 0?h:0),this._core.registerDecoration(s)}hasSelection(){return this._core.hasSelection()}select(s,t,r){this._verifyIntegers(s,t,r),this._core.select(s,t,r)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(s,t){this._verifyIntegers(s,t),this._core.selectLines(s,t)}dispose(){super.dispose()}scrollLines(s){this._verifyIntegers(s),this._core.scrollLines(s)}scrollPages(s){this._verifyIntegers(s),this._core.scrollPages(s)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(s){this._verifyIntegers(s),this._core.scrollToLine(s)}clear(){this._core.clear()}write(s,t){this._core.write(s,t)}writeln(s,t){this._core.write(s),this._core.write(`\r
`,t)}paste(s){this._core.paste(s)}refresh(s,t){this._verifyIntegers(s,t),this._core.refresh(s,t)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(s){this._addonManager.loadAddon(this,s)}static get strings(){return i}_verifyIntegers(...s){for(const t of s)if(t===1/0||isNaN(t)||t%1!=0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...s){for(const t of s)if(t&&(t===1/0||isNaN(t)||t%1!=0||t<0))throw new Error("This API only accepts positive integers")}}D.Terminal=g})(),R})())}(ii)),ii.exports}var cc=lc(),si={exports:{}},Ki;function hc(){return Ki||(Ki=1,function(n,u){(function(p,y){n.exports=y()})(self,()=>(()=>{var p={};return(()=>{var y=p;Object.defineProperty(y,"__esModule",{value:!0}),y.FitAddon=void 0,y.FitAddon=class{activate(x){this._terminal=x}dispose(){}fit(){const x=this.proposeDimensions();if(!x||!this._terminal||isNaN(x.cols)||isNaN(x.rows))return;const R=this._terminal._core;this._terminal.rows===x.rows&&this._terminal.cols===x.cols||(R._renderService.clear(),this._terminal.resize(x.cols,x.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;const x=this._terminal._core,R=x._renderService.dimensions;if(R.css.cell.width===0||R.css.cell.height===0)return;const D=this._terminal.options.scrollback===0?0:x.viewport.scrollBarWidth,i=window.getComputedStyle(this._terminal.element.parentElement),a=parseInt(i.getPropertyValue("height")),l=Math.max(0,parseInt(i.getPropertyValue("width"))),_=window.getComputedStyle(this._terminal.element),o=a-(parseInt(_.getPropertyValue("padding-top"))+parseInt(_.getPropertyValue("padding-bottom"))),c=l-(parseInt(_.getPropertyValue("padding-right"))+parseInt(_.getPropertyValue("padding-left")))-D;return{cols:Math.max(2,Math.floor(c/R.css.cell.width)),rows:Math.max(1,Math.floor(o/R.css.cell.height))}}}})(),p})())}(si)),si.exports}var dc=hc(),uc=G('<div class="d-flex justify-content-end mb-2"><button type="button" class="btn mx-3" title="Fullscreen"><!></button> <button type="button" class="btn mx-3" title="Close Terminal"><!></button></div> <div class="border" style="height: calc(100vh - 280px)"></div>',1),fc=G('<form class="container login-form"><div class="container" style="max-width: 400px"><div class="form-floating mb-2"><input type="text" class="form-control" id="inpTerminalCmd"> <label for="inpTerminalCmd">Command</label></div> <div class="form-floating mb-2"><input type="text" class="form-control" id="inpTerminalUser"> <label for="inpTerminalUser">User</label></div> <div class="col-12"><button type="submit" class="btn btn-primary w-100"><!> Open Terminal</button></div></div></form>');function _c(n,u){Xe(u,!1);let p=he(u,"container_id",8),y,x=oe(),R=oe(!1);const D="sh";let i=oe(D);const a="root";let l=oe(a);const _=new cc.Terminal({theme:{background:"#222",cursor:"white",cursorAccent:"#222"},cursorBlink:!0}),o=new dc.FitAddon;Cr(()=>{p()!==y&&(k(R)&&(ie.send("close_terminal"),m()),y=p())}),nt(()=>{ie.register("spawn_terminal",()=>{c(),_.focus()},h=>De.add({text:h,type:"error"})),ie.register("close_terminal",()=>{De.add({text:"Terminal has been closed",type:"info"}),m()},h=>De.add({text:h,type:"error"})),ie.register("receive_terminal_output",async h=>{_.write(new Uint8Array(await h.blob.arrayBuffer()))},h=>De.add({text:h,type:"error"})),_.onResize(h=>{ie.send("resize_terminal",h)}),_.loadAddon(o),_.onData(h=>{ie.send("transmit_terminal_input",{data:h})})}),zt(()=>{k(R)&&ie.send("close_terminal"),ie.unregister("spawn_terminal"),ie.unregister("close_terminal"),ie.unregister("receive_terminal_output")});function c(){k(R)&&o.fit()}async function v(){Y(R,!0),ie.send("spawn_terminal",{container_id:p(),cmd:k(i),user:k(l)}),await ps(),_.open(k(x))}function m(){Y(R,!1),_.reset(),_.clear(),Y(i,D),Y(l,a)}function g(){var h;(h=k(x))!=null&&h.requestFullscreen&&k(x).requestFullscreen({navigationUI:"show"})}rt();var e=er();fe("resize",Ar,c);var s=Be(e);{var t=h=>{var d=uc(),b=Be(d),C=I(b),f=I(C);de(f,{icon:Ms,size:"lg",color:"#666"});var S=j(C,2),L=I(S);de(L,{icon:Ba,size:"lg",color:"#666"});var T=j(b,2);Yr(T,A=>Y(x,A),()=>k(x)),fe("click",C,g),fe("click",S,()=>ie.send("close_terminal")),V(h,d)},r=h=>{var d=fc(),b=I(d),C=I(b),f=I(C),S=j(C,2),L=I(S),T=j(S,2),A=I(T),O=I(A);de(O,{icon:Qo}),Fr(f,()=>k(i),N=>Y(i,N)),Fr(L,()=>k(l),N=>Y(l,N)),fe("submit",d,zr(v)),ct(3,d,()=>Rt),V(h,d)};Q(s,h=>{k(R)?h(t):h(r,!1)})}V(n,e),Ze()}/*!
 * Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2024 Fonticons, Inc.
 */const vc={prefix:"fab",iconName:"docker",icon:[640,512,[],"f395","M349.9 236.3h-66.1v-59.4h66.1v59.4zm0-204.3h-66.1v60.7h66.1V32zm78.2 144.8H362v59.4h66.1v-59.4zm-156.3-72.1h-66.1v60.1h66.1v-60.1zm78.1 0h-66.1v60.1h66.1v-60.1zm276.8 100c-14.4-9.7-47.6-13.2-73.1-8.4-3.3-24-16.7-44.9-41.1-63.7l-14-9.3-9.3 14c-18.4 27.8-23.4 73.6-3.7 103.8-8.7 4.7-25.8 11.1-48.4 10.7H2.4c-8.7 50.8 5.8 116.8 44 162.1 37.1 43.9 92.7 66.2 165.4 66.2 157.4 0 273.9-72.5 328.4-204.2 21.4.4 67.6.1 91.3-45.2 1.5-2.5 6.6-13.2 8.5-17.1l-13.3-8.9zm-511.1-27.9h-66v59.4h66.1v-59.4zm78.1 0h-66.1v59.4h66.1v-59.4zm78.1 0h-66.1v59.4h66.1v-59.4zm-78.1-72.1h-66.1v60.1h66.1v-60.1z"]},pc={prefix:"fab",iconName:"github",icon:[496,512,[],"f09b","M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"]};var gc=G('<div class="d-flex align-items-center"><strong class="mx-5">Loading...</strong> <div class="spinner-border ms-auto" role="status" aria-hidden="true"></div></div>'),mc=G('<div class="card"><div class="card-body"><div class="fs-4 text-uppercase mb-3">Host</div> <div class="d-flex align-items-center mb-2"><!> </div> <div class="d-flex align-items-center mb-2"><!> </div> <div class="d-flex align-items-center mb-2"><!> </div> <div class="d-flex align-items-center mb-2"><!> </div> <div class="d-flex align-items-center mb-2"><!> </div> <div class="mt-3"><a href="https://github.com/knrdl/caasa" target="_blank" rel="noopener noreferrer" class="text-decoration-none"><!> CaaSa on Github</a></div></div></div>'),Sc=G('<div class="flex-grow-1 d-flex justify-content-center align-items-start mt-5"><!></div>');function bc(n,u){Xe(u,!1);let p=oe(!0),y=oe();nt(()=>{ie.register("get_system_info",a=>{Y(y,a),Y(p,!1)},a=>{Y(p,!1),De.add({text:a,type:"error"})}),ie.send("get_system_info")}),zt(()=>{ie.unregister("get_system_info")}),rt();var x=Sc(),R=I(x);{var D=a=>{var l=gc();V(a,l)},i=(a,l)=>{{var _=o=>{var c=mc(),v=I(c),m=j(I(v),2),g=I(m);de(g,{icon:la,size:"lg",style:"width: 3rem"});var e=j(g),s=j(m,2),t=I(s);de(t,{icon:Os,size:"lg",style:"width: 3rem"});var r=j(t),h=j(s,2),d=I(h);de(d,{icon:Bs,size:"lg",style:"width: 3rem"});var b=j(d),C=j(h,2),f=I(C);de(f,{icon:vc,size:"lg",style:"width: 3rem"});var S=j(f),L=j(C,2),T=I(L);de(T,{icon:Ps,size:"lg",style:"width: 3rem"});var A=j(T),O=j(L,2),N=I(O),W=I(N);de(W,{icon:pc,size:"sm"}),se(q=>{re(e,` ${k(y).os??""}`),re(r,` ${k(y).cpus??""} CPUs`),re(b,` ${q??""}
          Memory`),re(S,` ${k(y).engine_version??""}`),re(A,` ${k(y).containers.running??""}/${k(y).containers.total??""} Containers running`)},[()=>Kt(k(y).mem)],ue),V(o,c)};Q(a,o=>{k(y)&&o(_)},l)}};Q(R,a=>{k(p)?a(D):a(i,!1)})}V(n,x),Ze()}var Cc=G('<p class="mx-5 my-2">No containers found</p>'),yc=G('<button type="button" style="cursor: pointer"><div style="width: 10px; flex: none"></div> <div class="p-2 pe-4"><div> </div> <div> </div></div></button>'),wc=G('<p class="mx-2 my-1">No containers match search term</p>'),Ec=G('<input type="search" class="form-control svelte-6rcsrg" placeholder="Search"> <!>',1),xc=G('<aside class="d-flex flex-column pb-1 svelte-6rcsrg"><!></aside>');function Vi(n,u){Xe(u,!1);const p=oe();let y=he(u,"containers",8),x=he(u,"selectedContainer",8);const R=Rs();let D=oe("");Ct(()=>(xt(y()),k(D)),()=>{var _;Y(p,(_=y())==null?void 0:_.filter(o=>{var c;return o.name.toLowerCase().replace(/\s+/g,"").includes(k(D).replace(/\s+/g,""))||((c=o.namespace)==null?void 0:c.toLowerCase().replace(/\s+/g,"").includes(k(D).replace(/\s+/g,"")))}))}),mr(),rt();var i=xc(),a=I(i);{var l=_=>{var o=er(),c=Be(o);{var v=g=>{var e=Cc();V(g,e)},m=g=>{var e=Ec(),s=Be(e),t=j(s,2);ft(t,1,()=>k(p),ut,(r,h)=>{var d=yc();const b=ue(()=>x()&&x().id===k(h).id);let C;var f=I(d);let S;var L=j(f,2),T=I(L);let A;var O=I(T),N=j(T,2),W=I(N);se((q,K,E)=>{C=$e(d,1,"btn d-flex border-top border-bottom",null,C,q),S=$e(f,1,"",null,S,K),A=$e(T,1,"text-uppercase",null,A,E),re(O,k(h).namespace||""),re(W,k(h).name)},[()=>({"bg-dark":k(b),"text-light":k(b)}),()=>({"bg-success":k(h).status==="running","bg-danger":["exited","dead","removing"].includes(k(h).status),"bg-warning":["created","paused","restarting"].includes(k(h).status)}),()=>{var q;return{"text-muted":((q=x())==null?void 0:q.id)!==k(h).id}}],ue),fe("click",d,()=>R("select-container",k(h))),V(r,d)},r=>{var h=wc();V(r,h)}),se(()=>Eo(s,k(D))),fe("input",s,r=>Y(D,r.currentTarget.value.toLowerCase())),V(g,e)};Q(c,g=>{y().length===0?g(v):g(m,!1)})}V(_,o)};Q(a,_=>{y()&&_(l)})}V(n,i),Ze()}var kc=G('<div class="position-absolute"><!></div>'),Lc=G('<li><button type="button">Info</button></li>'),Dc=G('<li><button type="button">Logs</button></li>'),Rc=G('<li><button type="button">Terminal</button></li>'),Ac=G('<li><button type="button">Processes</button></li>'),Tc=G('<li><button type="button">Files</button></li>'),Bc=G("<div><!></div>"),Mc=G("<div><!></div>"),Oc=G("<div><!></div>"),Pc=G("<div><!></div>"),Ic=G("<div><!></div>"),Hc=G('<div class="container-md" style="overflow: hidden"><div class="card tabs"><ul class="card-header"><!> <!> <!> <!> <!></ul> <div class="card-body py-4"><!></div></div></div>'),Fc=G('<!> <div style="z-index: 100;"><button type="button" class="position-fixed top-0 bottom-0 start-0 end-0" style="background: rgba(0, 0, 0, .55);" aria-label="Hide list"></button> <!></div> <div class="d-flex pb-3 align-items-start"><aside class="d-none d-md-block me-4"><!></aside> <!></div>',1);function zc(n,u){Xe(u,!1);const p=oe();let y,x=oe(!0),R=oe(),D=oe(),i=he(u,"showHostInfo",12),a=he(u,"showContainerListOverlay",12),l=oe(null);nt(()=>{ie.register("get_container_list",T=>{Y(R,T),Y(x,!1)},T=>De.add({text:T,type:"error"})),ie.send("get_container_list"),y=setInterval(()=>{ie.send("get_container_list")},3e3)}),zt(()=>{ie.unregister("get_container_list"),clearInterval(y)});function _(T){Y(l,null),i(!1),a(!1),Y(D,null),window.scrollTo({top:0,behavior:"smooth"}),setTimeout(()=>{var O,N;Y(D,T);const A=["info","logs","procs","term","files"];for(let W of A)if((N=(O=k(D))==null?void 0:O.permissions)!=null&&N.includes(W)){Y(l,W);break}k(l)||(Y(D,null),De.add({type:"warning",text:"No permissions to access container"}))},100)}function o(T){Y(l,T)}Ct(()=>k(D),()=>{var T;Y(p,((T=k(D))==null?void 0:T.status)==="running")}),mr(),rt();var c=Fc(),v=Be(c);{var m=T=>{Hs(T,{})};Q(v,T=>{k(x)&&T(m)})}var g=j(v,2);let e;var s=I(g),t=j(s,2);{var r=T=>{var A=kc(),O=I(A);const N=ue(()=>i()?null:k(D));Vi(O,{get containers(){return k(R)},get selectedContainer(){return k(N)},$$events:{"select-container":W=>_(W.detail)}}),ct(3,A,()=>Ni,()=>({y:-50,duration:200})),V(T,A)};Q(t,T=>{a()&&T(r)})}var h=j(g,2),d=I(h),b=I(d);const C=ue(()=>i()?null:k(D));Vi(b,{get containers(){return k(R)},get selectedContainer(){return k(C)},$$events:{"select-container":T=>_(T.detail)}});var f=j(d,2);{var S=T=>{bc(T,{})},L=T=>{var A=Hc(),O=I(A),N=I(O),W=I(N);{var q=H=>{var z=Lc(),F=I(z);let ee;se(Z=>ee=$e(F,1,"text-uppercase",null,ee,Z),[()=>({active:k(l)==="info"})],ue),fe("click",F,()=>o("info")),V(H,z)};Q(W,H=>{var z,F;(F=(z=k(D))==null?void 0:z.permissions)!=null&&F.includes("info")&&H(q)})}var K=j(W,2);{var E=H=>{var z=Dc(),F=I(z);let ee;se(Z=>ee=$e(F,1,"text-uppercase",null,ee,Z),[()=>({active:k(l)==="logs"})],ue),fe("click",F,()=>o("logs")),V(H,z)};Q(K,H=>{var z,F;(F=(z=k(D))==null?void 0:z.permissions)!=null&&F.includes("logs")&&H(E)})}var B=j(K,2);{var M=H=>{var z=Rc(),F=I(z);let ee;se(Z=>ee=$e(F,1,"text-uppercase",null,ee,Z),[()=>({active:k(l)==="term"})],ue),fe("click",F,()=>o("term")),V(H,z)};Q(B,H=>{var z,F;k(p)&&((F=(z=k(D))==null?void 0:z.permissions)!=null&&F.includes("term"))&&H(M)})}var P=j(B,2);{var $=H=>{var z=Ac(),F=I(z);let ee;se(Z=>ee=$e(F,1,"text-uppercase",null,ee,Z),[()=>({active:k(l)==="procs"})],ue),fe("click",F,()=>o("procs")),V(H,z)};Q(P,H=>{var z,F;k(p)&&((F=(z=k(D))==null?void 0:z.permissions)!=null&&F.includes("procs"))&&H($)})}var U=j(P,2);{var J=H=>{var z=Tc(),F=I(z);let ee;se(Z=>ee=$e(F,1,"text-uppercase",null,ee,Z),[()=>({active:k(l)==="files"})],ue),fe("click",F,()=>o("files")),V(H,z)};Q(U,H=>{var z,F;k(p)&&((F=(z=k(D))==null?void 0:z.permissions)!=null&&F.includes("files"))&&H(J)})}var X=j(N,2),ae=I(X);{var w=H=>{var z=er(),F=Be(z);{var ee=ne=>{var _e=Bc(),we=I(_e);const Ae=ue(()=>k(D).permissions.includes("state"));Rl(we,{get container_id(){return k(D).id},get enable_actions(){return k(Ae)}}),ct(1,_e,()=>Rt),V(ne,_e)},Z=(ne,_e)=>{{var we=te=>{var Ie=Mc(),Ye=I(Ie);zl(Ye,{get container_id(){return k(D).id}}),ct(1,Ie,()=>Rt),V(te,Ie)},Ae=(te,Ie)=>{{var Ye=be=>{var He=Oc(),Me=I(He);_c(Me,{get container_id(){return k(D).id}}),ct(1,He,()=>Rt),V(be,He)},vt=(be,He)=>{{var Me=ke=>{var je=Pc(),pt=I(je);ac(pt,{get container_id(){return k(D).id}}),ct(1,je,()=>Rt),V(ke,je)},ot=(ke,je)=>{{var pt=Ne=>{var Ue=Ic(),qe=I(Ue);const St=ue(()=>k(D).permissions.includes("files-read")),Ee=ue(()=>k(D).permissions.includes("files-write"));tc(qe,{get container_id(){return k(D).id},get allow_download(){return k(St)},get allow_upload(){return k(Ee)}}),ct(1,Ue,()=>Rt),V(Ne,Ue)};Q(ke,Ne=>{k(l)==="files"&&Ne(pt)},je)}};Q(be,ke=>{k(l)==="procs"?ke(Me):ke(ot,!1)},He)}};Q(te,be=>{k(l)==="term"?be(Ye):be(vt,!1)},Ie)}};Q(ne,te=>{k(l)==="logs"?te(we):te(Ae,!1)},_e)}};Q(F,ne=>{k(l)==="info"?ne(ee):ne(Z,!1)})}V(H,z)};Q(ae,H=>{k(D)&&H(w)})}ct(3,A,()=>Ni,()=>({x:300,duration:200})),V(T,A)};Q(f,T=>{i()?T(S):T(L,!1)})}se(T=>e=$e(g,1,"d-md-none position-relative",null,e,T),[()=>({"d-none":!a()})],ue),fe("click",s,()=>a(!1)),V(n,c),Ze()}var Nc=G('<a href="/#/" class="d-md-none d-flex justify-content-center align-items-center svelte-1b5nrvg"><!></a>'),Wc=G('<button type="button" class="btn mx-2"><!></button>'),Uc=G('<!> <main class="svelte-1b5nrvg"><header class="svelte-1b5nrvg"><!> <a href="/#/" class="d-flex justify-content-center align-items-center svelte-1b5nrvg"><span><!></span> <span class="text-black ps-2 fs-2 fw-light">Container as a Service admin</span></a> <div class="items-right svelte-1b5nrvg"><!> <!></div></header> <!></main>',1);function $c(n,u){Xe(u,!1);let p=oe(null),y=oe(!0),x=oe(!0),R=oe(!1);nt(async()=>{ie.register("ws-error",null,S=>De.add({text:S,type:"error"})),ie.register("ws-close",null,S=>{De.add({text:S,type:"error"}),Y(p,null),alert("Lost connection. Reconnect?"),window.location.reload()}),ie.register("webproxy_auth",({username:S})=>{Y(p,S),Y(y,!1)},S=>{De.add({text:S,type:"error"})}),await ie.init()});function D(){ie.close(),Y(p,null),De.add({text:"Logged out",type:"info"}),window.location.reload()}function i(){alert("An error occurred!")}rt();var a=Uc();fe("error",Ar,i);var l=Be(a);qo(l,{});var _=j(l,2),o=I(_),c=I(o);{var v=S=>{var L=Nc(),T=I(L);de(T,{icon:ea,color:"#123",size:"2x",style:"width: 3rem;height: 3rem;"}),fe("click",L,zr(()=>Y(R,!k(R)))),V(S,L)};Q(c,S=>{k(p)&&S(v)})}var m=j(c,2),g=I(m);let e;var s=I(g);de(s,{icon:ua,color:"#123",size:"2x",style:"width: 3rem;height: 3rem;"});var t=j(m,2),r=I(t);Ia(r,{});var h=j(r,2);{var d=S=>{var L=Wc(),T=I(L);de(T,{icon:Jo,color:"#333",size:"2x"}),se(()=>Pe(L,"title",`Logout ${k(p)??""}`)),fe("click",L,D),V(S,L)};Q(h,S=>{k(p)&&k(y)&&S(d)})}var b=j(o,2);{var C=S=>{zc(S,{get showHostInfo(){return k(x)},set showHostInfo(L){Y(x,L)},get showContainerListOverlay(){return k(R)},set showContainerListOverlay(L){Y(R,L)},$$legacy:!0})},f=S=>{Ya(S,{$$events:{login:L=>Y(p,L.detail.username)}})};Q(b,S=>{k(p)?S(C):S(f,!1)})}se(S=>e=$e(g,1,"",null,e,S),[()=>({"d-none":k(p),"d-md-block":k(p)})],ue),fe("click",m,zr(()=>Y(x,!0))),V(n,a),Ze()}fo($c,{target:document.getElementById("app")});
