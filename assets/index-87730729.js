var Er=Object.defineProperty;var Lr=(n,e,t)=>e in n?Er(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var Pe=(n,e,t)=>(Lr(n,typeof e!="symbol"?e+"":e,t),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const f of document.querySelectorAll('link[rel="modulepreload"]'))s(f);new MutationObserver(f=>{for(const m of f)if(m.type==="childList")for(const p of m.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&s(p)}).observe(document,{childList:!0,subtree:!0});function t(f){const m={};return f.integrity&&(m.integrity=f.integrity),f.referrerPolicy&&(m.referrerPolicy=f.referrerPolicy),f.crossOrigin==="use-credentials"?m.credentials="include":f.crossOrigin==="anonymous"?m.credentials="omit":m.credentials="same-origin",m}function s(f){if(f.ep)return;f.ep=!0;const m=t(f);fetch(f.href,m)}})();function he(){}const Zs=n=>n;function Dr(n,e){for(const t in e)n[t]=e[t];return n}function Js(n){return n()}function Ri(){return Object.create(null)}function Ve(n){n.forEach(Js)}function Yt(n){return typeof n=="function"}function xe(n,e){return n!=n?e==e:n!==e||n&&typeof n=="object"||typeof n=="function"}function Rr(n){return Object.keys(n).length===0}function Ar(n,...e){if(n==null){for(const s of e)s(void 0);return he}const t=n.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function ri(n){let e;return Ar(n,t=>e=t)(),e}function Kt(n,e,t,s){if(n){const f=Ys(n,e,t,s);return n[0](f)}}function Ys(n,e,t,s){return n[1]&&s?Dr(t.ctx.slice(),n[1](s(e))):t.ctx}function qt(n,e,t,s){if(n[2]&&s){const f=n[2](s(t));if(e.dirty===void 0)return f;if(typeof f=="object"){const m=[],p=Math.max(e.dirty.length,f.length);for(let i=0;i<p;i+=1)m[i]=e.dirty[i]|f[i];return m}return e.dirty|f}return e.dirty}function Vt(n,e,t,s,f,m){if(f){const p=Ys(e,t,s,m);n.p(p,f)}}function Gt(n){if(n.ctx.length>32){const e=[],t=n.ctx.length/32;for(let s=0;s<t;s++)e[s]=-1;return e}return-1}function oi(n){const e=typeof n=="string"&&n.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return e?[parseFloat(e[1]),e[2]||"px"]:[n,"px"]}const Qs=typeof window<"u";let er=Qs?()=>window.performance.now():()=>Date.now(),fi=Qs?n=>requestAnimationFrame(n):he;const St=new Set;function tr(n){St.forEach(e=>{e.c(n)||(St.delete(e),e.f())}),St.size!==0&&fi(tr)}function ir(n){let e;return St.size===0&&fi(tr),{promise:new Promise(t=>{St.add(e={c:n,f:t})}),abort(){St.delete(e)}}}const Br=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function R(n,e){n.appendChild(e)}function sr(n){if(!n)return document;const e=n.getRootNode?n.getRootNode():n.ownerDocument;return e&&e.host?e:n.ownerDocument}function Mr(n){const e=P("style");return e.textContent="/* empty */",Tr(sr(n),e),e.sheet}function Tr(n,e){return R(n.head||n,e),e.sheet}function U(n,e,t){n.insertBefore(e,t||null)}function W(n){n.parentNode&&n.parentNode.removeChild(n)}function Ke(n,e){for(let t=0;t<n.length;t+=1)n[t]&&n[t].d(e)}function P(n){return document.createElement(n)}function Ee(n){return document.createElementNS("http://www.w3.org/2000/svg",n)}function Y(n){return document.createTextNode(n)}function G(){return Y(" ")}function rt(){return Y("")}function pe(n,e,t,s){return n.addEventListener(e,t,s),()=>n.removeEventListener(e,t,s)}function Qt(n){return function(e){return e.preventDefault(),n.call(this,e)}}function D(n,e,t){t==null?n.removeAttribute(e):n.getAttribute(e)!==t&&n.setAttribute(e,t)}function di(n,e,t){n.setAttributeNS("http://www.w3.org/1999/xlink",e,t)}function xr(n){return Array.from(n.childNodes)}function le(n,e){e=""+e,n.data!==e&&(n.data=e)}function Ye(n,e){n.value=e??""}function be(n,e,t,s){t==null?n.style.removeProperty(e):n.style.setProperty(e,t,s?"important":"")}function Ai(n,e,t){for(let s=0;s<n.options.length;s+=1){const f=n.options[s];if(f.__value===e){f.selected=!0;return}}(!t||e!==void 0)&&(n.selectedIndex=-1)}function Or(n){const e=n.querySelector(":checked");return e&&e.__value}function ie(n,e,t){n.classList.toggle(e,!!t)}function rr(n,e,{bubbles:t=!1,cancelable:s=!1}={}){return new CustomEvent(n,{detail:e,bubbles:t,cancelable:s})}const Xt=new Map;let Zt=0;function Pr(n){let e=5381,t=n.length;for(;t--;)e=(e<<5)-e^n.charCodeAt(t);return e>>>0}function Ir(n,e){const t={stylesheet:Mr(e),rules:{}};return Xt.set(n,t),t}function li(n,e,t,s,f,m,p,i=0){const r=16.666/s;let c=`{
`;for(let o=0;o<=1;o+=r){const h=e+(t-e)*m(o);c+=o*100+`%{${p(h,1-h)}}
`}const d=c+`100% {${p(t,1-t)}}
}`,l=`__svelte_${Pr(d)}_${i}`,_=sr(n),{stylesheet:b,rules:w}=Xt.get(_)||Ir(_,n);w[l]||(w[l]=!0,b.insertRule(`@keyframes ${l} ${d}`,b.cssRules.length));const S=n.style.animation||"";return n.style.animation=`${S?`${S}, `:""}${l} ${s}ms linear ${f}ms 1 both`,Zt+=1,l}function ai(n,e){const t=(n.style.animation||"").split(", "),s=t.filter(e?m=>m.indexOf(e)<0:m=>m.indexOf("__svelte")===-1),f=t.length-s.length;f&&(n.style.animation=s.join(", "),Zt-=f,Zt||Hr())}function Hr(){fi(()=>{Zt||(Xt.forEach(n=>{const{ownerNode:e}=n.stylesheet;e&&W(e)}),Xt.clear())})}let xt;function Mt(n){xt=n}function ei(){if(!xt)throw new Error("Function called outside component initialization");return xt}function Ht(n){ei().$$.before_update.push(n)}function Ge(n){ei().$$.on_mount.push(n)}function dt(n){ei().$$.on_destroy.push(n)}function nr(){const n=ei();return(e,t,{cancelable:s=!1}={})=>{const f=n.$$.callbacks[e];if(f){const m=rr(e,t,{cancelable:s});return f.slice().forEach(p=>{p.call(n,m)}),!m.defaultPrevented}return!0}}function $r(n,e){const t=n.$$.callbacks[e.type];t&&t.slice().forEach(s=>s.call(this,e))}const bt=[],ft=[];let Ct=[];const ci=[],or=Promise.resolve();let hi=!1;function lr(){hi||(hi=!0,or.then(cr))}function ar(){return lr(),or}function Te(n){Ct.push(n)}function Bi(n){ci.push(n)}const ni=new Set;let vt=0;function cr(){if(vt!==0)return;const n=xt;do{try{for(;vt<bt.length;){const e=bt[vt];vt++,Mt(e),Fr(e.$$)}}catch(e){throw bt.length=0,vt=0,e}for(Mt(null),bt.length=0,vt=0;ft.length;)ft.pop()();for(let e=0;e<Ct.length;e+=1){const t=Ct[e];ni.has(t)||(ni.add(t),t())}Ct.length=0}while(bt.length);for(;ci.length;)ci.pop()();hi=!1,ni.clear(),Mt(n)}function Fr(n){if(n.fragment!==null){n.update(),Ve(n.before_update);const e=n.dirty;n.dirty=[-1],n.fragment&&n.fragment.p(n.ctx,e),n.after_update.forEach(Te)}}function zr(n){const e=[],t=[];Ct.forEach(s=>n.indexOf(s)===-1?e.push(s):t.push(s)),t.forEach(s=>s()),Ct=e}let Bt;function hr(){return Bt||(Bt=Promise.resolve(),Bt.then(()=>{Bt=null})),Bt}function Tt(n,e,t){n.dispatchEvent(rr(`${e?"intro":"outro"}${t}`))}const jt=new Set;let ot;function ve(){ot={r:0,c:[],p:ot}}function ge(){ot.r||Ve(ot.c),ot=ot.p}function N(n,e){n&&n.i&&(jt.delete(n),n.i(e))}function q(n,e,t,s){if(n&&n.o){if(jt.has(n))return;jt.add(n),ot.c.push(()=>{jt.delete(n),s&&(t&&n.d(1),s())}),n.o(e)}else s&&s()}const ur={duration:0};function wt(n,e,t){const s={direction:"in"};let f=e(n,t,s),m=!1,p,i,r=0;function c(){p&&ai(n,p)}function d(){const{delay:_=0,duration:b=300,easing:w=Zs,tick:S=he,css:o}=f||ur;o&&(p=li(n,0,1,b,_,w,o,r++)),S(0,1);const h=er()+_,a=h+b;i&&i.abort(),m=!0,Te(()=>Tt(n,!0,"start")),i=ir(u=>{if(m){if(u>=a)return S(1,0),Tt(n,!0,"end"),c(),m=!1;if(u>=h){const g=w((u-h)/b);S(g,1-g)}}return m})}let l=!1;return{start(){l||(l=!0,ai(n),Yt(f)?(f=f(s),hr().then(d)):d())},invalidate(){l=!1},end(){m&&(c(),m=!1)}}}function qe(n,e,t,s){let m=e(n,t,{direction:"both"}),p=s?0:1,i=null,r=null,c=null,d;function l(){c&&ai(n,c)}function _(w,S){const o=w.b-p;return S*=Math.abs(o),{a:p,b:w.b,d:o,duration:S,start:w.start,end:w.start+S,group:w.group}}function b(w){const{delay:S=0,duration:o=300,easing:h=Zs,tick:a=he,css:u}=m||ur,g={start:er()+S,b:w};w||(g.group=ot,ot.r+=1),"inert"in n&&(w?d!==void 0&&(n.inert=d):(d=n.inert,n.inert=!0)),i||r?r=g:(u&&(l(),c=li(n,p,w,o,S,h,u)),w&&a(0,1),i=_(g,o),Te(()=>Tt(n,w,"start")),ir(v=>{if(r&&v>r.start&&(i=_(r,o),r=null,Tt(n,i.b,"start"),u&&(l(),c=li(n,p,i.b,i.duration,0,h,m.css))),i){if(v>=i.end)a(p=i.b,1-p),Tt(n,i.b,"end"),r||(i.b?l():--i.group.r||Ve(i.group.c)),i=null;else if(v>=i.start){const y=v-i.start;p=i.a+i.d*h(y/i.duration),a(p,1-p)}}return!!(i||r)}))}return{run(w){Yt(m)?hr().then(()=>{m=m({direction:w?"in":"out"}),b(w)}):b(w)},end(){l(),i=r=null}}}function ye(n){return(n==null?void 0:n.length)!==void 0?n:Array.from(n)}function Mi(n,e,t){const s=n.$$.props[e];s!==void 0&&(n.$$.bound[s]=t,t(n.$$.ctx[s]))}function oe(n){n&&n.c()}function re(n,e,t){const{fragment:s,after_update:f}=n.$$;s&&s.m(e,t),Te(()=>{const m=n.$$.on_mount.map(Js).filter(Yt);n.$$.on_destroy?n.$$.on_destroy.push(...m):Ve(m),n.$$.on_mount=[]}),f.forEach(Te)}function ne(n,e){const t=n.$$;t.fragment!==null&&(zr(t.after_update),Ve(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function Nr(n,e){n.$$.dirty[0]===-1&&(bt.push(n),lr(),n.$$.dirty.fill(0)),n.$$.dirty[e/31|0]|=1<<e%31}function Ie(n,e,t,s,f,m,p=null,i=[-1]){const r=xt;Mt(n);const c=n.$$={fragment:null,ctx:[],props:m,update:he,not_equal:f,bound:Ri(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(r?r.$$.context:[])),callbacks:Ri(),dirty:i,skip_bound:!1,root:e.target||r.$$.root};p&&p(c.root);let d=!1;if(c.ctx=t?t(n,e.props||{},(l,_,...b)=>{const w=b.length?b[0]:_;return c.ctx&&f(c.ctx[l],c.ctx[l]=w)&&(!c.skip_bound&&c.bound[l]&&c.bound[l](w),d&&Nr(n,l)),_}):[],c.update(),d=!0,Ve(c.before_update),c.fragment=s?s(c.ctx):!1,e.target){if(e.hydrate){const l=xr(e.target);c.fragment&&c.fragment.l(l),l.forEach(W)}else c.fragment&&c.fragment.c();e.intro&&N(n.$$.fragment),re(n,e.target,e.anchor),cr()}Mt(r)}class He{constructor(){Pe(this,"$$");Pe(this,"$$set")}$destroy(){ne(this,1),this.$destroy=he}$on(e,t){if(!Yt(t))return he;const s=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return s.push(t),()=>{const f=s.indexOf(t);f!==-1&&s.splice(f,1)}}$set(e){this.$$set&&!Rr(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Wr="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Wr);const gt=[];function Ur(n,e=he){let t;const s=new Set;function f(i){if(xe(n,i)&&(n=i,t)){const r=!gt.length;for(const c of s)c[1](),gt.push(c,n);if(r){for(let c=0;c<gt.length;c+=2)gt[c][0](gt[c+1]);gt.length=0}}}function m(i){f(i(n))}function p(i,r=he){const c=[i,r];return s.add(c),s.size===1&&(t=e(f,m)||he),i(n),()=>{s.delete(c),s.size===0&&t&&(t(),t=null)}}return{set:f,update:m,subscribe:p}}const jr=10,Kr=function(){let n=Ur([]);return setInterval(()=>{let e=ri(n);const t=Math.floor(new Date().getTime()/1e3),s=e.filter(f=>f.created_at+jr>t);s.length!==e.length&&n.set(s)},1e3),{add(e){let t=ri(n);t.push({...e,created_at:Math.floor(new Date().getTime()/1e3)}),n.set(t)},remove(e){let t=ri(n);n.set(t.filter(s=>!["created_at","type","text"].every(f=>s[f]===e[f])))},subscribe:n.subscribe}},Ce=Kr();function qr(n){return n<.5?4*n*n*n:.5*Math.pow(2*n-2,3)+1}function fr(n){const e=n-1;return e*e*e+1}function Vr(n,{delay:e=0,duration:t=400,easing:s=qr,amount:f=5,opacity:m=0}={}){const p=getComputedStyle(n),i=+p.opacity,r=p.filter==="none"?"":p.filter,c=i*(1-m),[d,l]=oi(f);return{delay:e,duration:t,easing:s,css:(_,b)=>`opacity: ${i-c*b}; filter: ${r} blur(${b*d}${l});`}}function Jt(n,{delay:e=0,duration:t=400,easing:s=fr,x:f=0,y:m=0,opacity:p=0}={}){const i=getComputedStyle(n),r=+i.opacity,c=i.transform==="none"?"":i.transform,d=r*(1-p),[l,_]=oi(f),[b,w]=oi(m);return{delay:e,duration:t,easing:s,css:(S,o)=>`
			transform: ${c} translate(${(1-S)*l}${_}, ${(1-S)*b}${w});
			opacity: ${r-d*o}`}}function Ne(n,{delay:e=0,duration:t=400,easing:s=fr,axis:f="y"}={}){const m=getComputedStyle(n),p=+m.opacity,i=f==="y"?"height":"width",r=parseFloat(m[i]),c=f==="y"?["top","bottom"]:["left","right"],d=c.map(h=>`${h[0].toUpperCase()}${h.slice(1)}`),l=parseFloat(m[`padding${d[0]}`]),_=parseFloat(m[`padding${d[1]}`]),b=parseFloat(m[`margin${d[0]}`]),w=parseFloat(m[`margin${d[1]}`]),S=parseFloat(m[`border${d[0]}Width`]),o=parseFloat(m[`border${d[1]}Width`]);return{delay:e,duration:t,easing:s,css:h=>`overflow: hidden;opacity: ${Math.min(h*20,1)*p};${i}: ${h*r}px;padding-${c[0]}: ${h*l}px;padding-${c[1]}: ${h*_}px;margin-${c[0]}: ${h*b}px;margin-${c[1]}: ${h*w}px;border-${c[0]}-width: ${h*S}px;border-${c[1]}-width: ${h*o}px;`}}function Ti(n,e,t){const s=n.slice();return s[2]=e[t],s}function xi(n){let e,t,s,f=n[2].text+"",m,p,i,r,c,d,l,_;function b(){return n[1](n[2])}return{c(){e=P("div"),t=P("div"),s=P("div"),m=Y(f),p=G(),i=P("button"),r=G(),D(s,"class","toast-body"),D(i,"type","button"),D(i,"class","btn-close btn-close-white me-2 m-auto"),D(t,"class","d-flex"),D(e,"class","toast show align-items-center text-white border-0 mb-2"),ie(e,"bg-danger",n[2].type==="error"),ie(e,"bg-warning",n[2].type==="warning"),ie(e,"bg-success",n[2].type==="success"),ie(e,"bg-primary",n[2].type==="info")},m(w,S){U(w,e,S),R(e,t),R(t,s),R(s,m),R(t,p),R(t,i),R(e,r),d=!0,l||(_=pe(i,"click",b),l=!0)},p(w,S){n=w,(!d||S&1)&&f!==(f=n[2].text+"")&&le(m,f),(!d||S&1)&&ie(e,"bg-danger",n[2].type==="error"),(!d||S&1)&&ie(e,"bg-warning",n[2].type==="warning"),(!d||S&1)&&ie(e,"bg-success",n[2].type==="success"),(!d||S&1)&&ie(e,"bg-primary",n[2].type==="info")},i(w){d||(w&&Te(()=>{d&&(c||(c=qe(e,Ne,{},!0)),c.run(1))}),d=!0)},o(w){w&&(c||(c=qe(e,Ne,{},!1)),c.run(0)),d=!1},d(w){w&&W(e),w&&c&&c.end(),l=!1,_()}}}function Gr(n){let e,t,s=ye(n[0]),f=[];for(let p=0;p<s.length;p+=1)f[p]=xi(Ti(n,s,p));const m=p=>q(f[p],1,1,()=>{f[p]=null});return{c(){e=P("div");for(let p=0;p<f.length;p+=1)f[p].c();D(e,"class","position-fixed bottom-0 end-0 p-3"),be(e,"z-index","470")},m(p,i){U(p,e,i);for(let r=0;r<f.length;r+=1)f[r]&&f[r].m(e,null);t=!0},p(p,[i]){if(i&1){s=ye(p[0]);let r;for(r=0;r<s.length;r+=1){const c=Ti(p,s,r);f[r]?(f[r].p(c,i),N(f[r],1)):(f[r]=xi(c),f[r].c(),N(f[r],1),f[r].m(e,null))}for(ve(),r=s.length;r<f.length;r+=1)m(r);ge()}},i(p){if(!t){for(let i=0;i<s.length;i+=1)N(f[i]);t=!0}},o(p){f=f.filter(Boolean);for(let i=0;i<f.length;i+=1)q(f[i]);t=!1},d(p){p&&W(e),Ke(f,p)}}}function Xr(n,e,t){let s=[];return Ge(()=>{Ce.subscribe(m=>t(0,s=m))}),[s,m=>Ce.remove(m)]}class Zr extends He{constructor(e){super(),Ie(this,e,Xr,Gr,xe,{})}}function Jr(n,e){e&&e!=="lg"&&e!=="sm"&&e!=="xs"?n.style.fontSize=e.replace("x","em"):n.style.fontSize=""}function Yr(n,e,t,s,f,m=1,p="",i=""){let r=1,c=1;f&&(f=="horizontal"?r=-1:f=="vertical"?c=-1:r=c=-1),typeof n=="string"&&(n=parseFloat(n)),typeof e=="string"&&(e=parseFloat(e)),typeof t=="string"&&(t=parseFloat(t));const d=`${e*m}${p}`,l=`${t*m}${p}`;let _=`translate(${d},${l}) scale(${r*n},${c*n})`;return s&&(_+=` rotate(${s}${i})`),_}function Oi(n){let e,t,s,f,m,p,i,r=n[3]&&Pi(n);function c(_,b){return typeof _[17][4]=="string"?en:Qr}let d=c(n),l=d(n);return{c(){e=Ee("svg"),r&&r.c(),t=Ee("g"),s=Ee("g"),l.c(),D(s,"transform",n[16]),D(t,"transform",f="translate("+n[17][0]/2+" "+n[17][1]/2+")"),D(t,"transform-origin",m=n[17][0]/4+" 0"),D(e,"id",n[1]),D(e,"class",p="svelte-fa svelte-fa-base "+n[0]+" svelte-bvo74f"),D(e,"style",n[2]),D(e,"viewBox",i="0 0 "+n[17][0]+" "+n[17][1]),D(e,"aria-hidden","true"),D(e,"role","img"),D(e,"xmlns","http://www.w3.org/2000/svg"),ie(e,"pulse",n[9]),ie(e,"svelte-fa-size-lg",n[4]==="lg"),ie(e,"svelte-fa-size-sm",n[4]==="sm"),ie(e,"svelte-fa-size-xs",n[4]==="xs"),ie(e,"svelte-fa-fw",n[6]),ie(e,"svelte-fa-pull-left",n[7]==="left"),ie(e,"svelte-fa-pull-right",n[7]==="right"),ie(e,"spin",n[8])},m(_,b){U(_,e,b),r&&r.m(e,null),R(e,t),R(t,s),l.m(s,null),n[24](e)},p(_,b){_[3]?r?r.p(_,b):(r=Pi(_),r.c(),r.m(e,t)):r&&(r.d(1),r=null),d===(d=c(_))&&l?l.p(_,b):(l.d(1),l=d(_),l&&(l.c(),l.m(s,null))),b&65536&&D(s,"transform",_[16]),b&131072&&f!==(f="translate("+_[17][0]/2+" "+_[17][1]/2+")")&&D(t,"transform",f),b&131072&&m!==(m=_[17][0]/4+" 0")&&D(t,"transform-origin",m),b&2&&D(e,"id",_[1]),b&1&&p!==(p="svelte-fa svelte-fa-base "+_[0]+" svelte-bvo74f")&&D(e,"class",p),b&4&&D(e,"style",_[2]),b&131072&&i!==(i="0 0 "+_[17][0]+" "+_[17][1])&&D(e,"viewBox",i),b&513&&ie(e,"pulse",_[9]),b&17&&ie(e,"svelte-fa-size-lg",_[4]==="lg"),b&17&&ie(e,"svelte-fa-size-sm",_[4]==="sm"),b&17&&ie(e,"svelte-fa-size-xs",_[4]==="xs"),b&65&&ie(e,"svelte-fa-fw",_[6]),b&129&&ie(e,"svelte-fa-pull-left",_[7]==="left"),b&129&&ie(e,"svelte-fa-pull-right",_[7]==="right"),b&257&&ie(e,"spin",_[8])},d(_){_&&W(e),r&&r.d(),l.d(),n[24](null)}}}function Pi(n){let e,t;return{c(){e=Ee("title"),t=Y(n[3])},m(s,f){U(s,e,f),R(e,t)},p(s,f){f&8&&le(t,s[3])},d(s){s&&W(e)}}}function Qr(n){let e,t,s,f,m,p,i,r,c,d;return{c(){e=Ee("path"),p=Ee("path"),D(e,"d",t=n[17][4][0]),D(e,"fill",s=n[11]||n[5]||"currentColor"),D(e,"fill-opacity",f=n[14]!=!1?n[12]:n[13]),D(e,"transform",m="translate("+n[17][0]/-2+" "+n[17][1]/-2+")"),D(p,"d",i=n[17][4][1]),D(p,"fill",r=n[10]||n[5]||"currentColor"),D(p,"fill-opacity",c=n[14]!=!1?n[13]:n[12]),D(p,"transform",d="translate("+n[17][0]/-2+" "+n[17][1]/-2+")")},m(l,_){U(l,e,_),U(l,p,_)},p(l,_){_&131072&&t!==(t=l[17][4][0])&&D(e,"d",t),_&2080&&s!==(s=l[11]||l[5]||"currentColor")&&D(e,"fill",s),_&28672&&f!==(f=l[14]!=!1?l[12]:l[13])&&D(e,"fill-opacity",f),_&131072&&m!==(m="translate("+l[17][0]/-2+" "+l[17][1]/-2+")")&&D(e,"transform",m),_&131072&&i!==(i=l[17][4][1])&&D(p,"d",i),_&1056&&r!==(r=l[10]||l[5]||"currentColor")&&D(p,"fill",r),_&28672&&c!==(c=l[14]!=!1?l[13]:l[12])&&D(p,"fill-opacity",c),_&131072&&d!==(d="translate("+l[17][0]/-2+" "+l[17][1]/-2+")")&&D(p,"transform",d)},d(l){l&&(W(e),W(p))}}}function en(n){let e,t,s,f;return{c(){e=Ee("path"),D(e,"d",t=n[17][4]),D(e,"fill",s=n[5]||n[10]||"currentColor"),D(e,"transform",f="translate("+n[17][0]/-2+" "+n[17][1]/-2+")")},m(m,p){U(m,e,p)},p(m,p){p&131072&&t!==(t=m[17][4])&&D(e,"d",t),p&1056&&s!==(s=m[5]||m[10]||"currentColor")&&D(e,"fill",s),p&131072&&f!==(f="translate("+m[17][0]/-2+" "+m[17][1]/-2+")")&&D(e,"transform",f)},d(m){m&&W(e)}}}function tn(n){let e,t=n[17][4]&&Oi(n);return{c(){t&&t.c(),e=rt()},m(s,f){t&&t.m(s,f),U(s,e,f)},p(s,[f]){s[17][4]?t?t.p(s,f):(t=Oi(s),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:he,o:he,d(s){s&&W(e),t&&t.d(s)}}}function sn(n,e,t){let s,f,{class:m=void 0}=e,{id:p=void 0}=e,{style:i=void 0}=e,{icon:r}=e,{title:c=void 0}=e,{size:d=void 0}=e,{color:l=void 0}=e,{fw:_=!1}=e,{pull:b=void 0}=e,{scale:w=1}=e,{translateX:S=0}=e,{translateY:o=0}=e,{rotate:h=void 0}=e,{flip:a=void 0}=e,{spin:u=!1}=e,{pulse:g=!1}=e,{primaryColor:v=""}=e,{secondaryColor:y=""}=e,{primaryOpacity:E=1}=e,{secondaryOpacity:C=.4}=e,{swapOpacity:k=!1}=e,B;function x(M){ft[M?"unshift":"push"](()=>{B=M,t(15,B)})}return n.$$set=M=>{"class"in M&&t(0,m=M.class),"id"in M&&t(1,p=M.id),"style"in M&&t(2,i=M.style),"icon"in M&&t(18,r=M.icon),"title"in M&&t(3,c=M.title),"size"in M&&t(4,d=M.size),"color"in M&&t(5,l=M.color),"fw"in M&&t(6,_=M.fw),"pull"in M&&t(7,b=M.pull),"scale"in M&&t(19,w=M.scale),"translateX"in M&&t(20,S=M.translateX),"translateY"in M&&t(21,o=M.translateY),"rotate"in M&&t(22,h=M.rotate),"flip"in M&&t(23,a=M.flip),"spin"in M&&t(8,u=M.spin),"pulse"in M&&t(9,g=M.pulse),"primaryColor"in M&&t(10,v=M.primaryColor),"secondaryColor"in M&&t(11,y=M.secondaryColor),"primaryOpacity"in M&&t(12,E=M.primaryOpacity),"secondaryOpacity"in M&&t(13,C=M.secondaryOpacity),"swapOpacity"in M&&t(14,k=M.swapOpacity)},n.$$.update=()=>{n.$$.dirty&32784&&B&&d&&Jr(B,d),n.$$.dirty&262144&&t(17,s=r&&r.icon||[0,0,"",[],""]),n.$$.dirty&16252928&&t(16,f=Yr(w,S,o,h,a,512))},[m,p,i,c,d,l,_,b,u,g,v,y,E,C,k,B,f,s,r,w,S,o,h,a,x]}class _e extends He{constructor(e){super(),Ie(this,e,sn,tn,xe,{class:0,id:1,style:2,icon:18,title:3,size:4,color:5,fw:6,pull:7,scale:19,translateX:20,translateY:21,rotate:22,flip:23,spin:8,pulse:9,primaryColor:10,secondaryColor:11,primaryOpacity:12,secondaryOpacity:13,swapOpacity:14})}}const rn={prefix:"fas",iconName:"right-from-bracket",icon:[512,512,["sign-out-alt"],"f2f5","M377.9 105.9L500.7 228.7c7.2 7.2 11.3 17.1 11.3 27.3s-4.1 20.1-11.3 27.3L377.9 406.1c-6.4 6.4-15 9.9-24 9.9c-18.7 0-33.9-15.2-33.9-33.9l0-62.1-128 0c-17.7 0-32-14.3-32-32l0-64c0-17.7 14.3-32 32-32l128 0 0-62.1c0-18.7 15.2-33.9 33.9-33.9c9 0 17.6 3.6 24 9.9zM160 96L96 96c-17.7 0-32 14.3-32 32l0 256c0 17.7 14.3 32 32 32l64 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-64 0c-53 0-96-43-96-96L0 128C0 75 43 32 96 32l64 0c17.7 0 32 14.3 32 32s-14.3 32-32 32z"]},nn=rn,on={prefix:"fas",iconName:"laptop-code",icon:[640,512,[],"f5fc","M64 96c0-35.3 28.7-64 64-64l384 0c35.3 0 64 28.7 64 64l0 256-64 0 0-256L128 96l0 256-64 0L64 96zM0 403.2C0 392.6 8.6 384 19.2 384l601.6 0c10.6 0 19.2 8.6 19.2 19.2c0 42.4-34.4 76.8-76.8 76.8L76.8 480C34.4 480 0 445.6 0 403.2zM281 209l-31 31 31 31c9.4 9.4 9.4 24.6 0 33.9s-24.6 9.4-33.9 0l-48-48c-9.4-9.4-9.4-24.6 0-33.9l48-48c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9zM393 175l48 48c9.4 9.4 9.4 24.6 0 33.9l-48 48c-9.4 9.4-24.6 9.4-33.9 0s-9.4-24.6 0-33.9l31-31-31-31c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0z"]},ln={prefix:"fas",iconName:"bars",icon:[448,512,["navicon"],"f0c9","M0 96C0 78.3 14.3 64 32 64l384 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L32 128C14.3 128 0 113.7 0 96zM0 256c0-17.7 14.3-32 32-32l384 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L32 288c-17.7 0-32-14.3-32-32zM448 416c0 17.7-14.3 32-32 32L32 448c-17.7 0-32-14.3-32-32s14.3-32 32-32l384 0c17.7 0 32 14.3 32 32z"]},an={prefix:"fas",iconName:"square-up-right",icon:[448,512,[8599,"external-link-square-alt"],"f360","M384 32c35.3 0 64 28.7 64 64l0 320c0 35.3-28.7 64-64 64L64 480c-35.3 0-64-28.7-64-64L0 96C0 60.7 28.7 32 64 32l320 0zM160 160c-6.5 0-12.3 3.9-14.8 9.9s-1.1 12.9 3.5 17.4l40 40-71 71C114 302 112 306.9 112 312s2 10 5.7 13.7l36.7 36.7c3.6 3.6 8.5 5.7 13.7 5.7s10-2 13.7-5.7l71-71 40 40c4.6 4.6 11.5 5.9 17.4 3.5s9.9-8.3 9.9-14.8l0-144c0-8.8-7.2-16-16-16l-144 0z"]},cn=an,hn={prefix:"fas",iconName:"circle-chevron-down",icon:[512,512,["chevron-circle-down"],"f13a","M256 0a256 256 0 1 0 0 512A256 256 0 1 0 256 0zM135 241c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0l87 87 87-87c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9L273 345c-9.4 9.4-24.6 9.4-33.9 0L135 241z"]},un=hn,dr={prefix:"fas",iconName:"memory",icon:[576,512,[],"f538","M64 64C28.7 64 0 92.7 0 128l0 7.4c0 6.8 4.4 12.6 10.1 16.3C23.3 160.3 32 175.1 32 192s-8.7 31.7-21.9 40.3C4.4 236 0 241.8 0 248.6L0 320l576 0 0-71.4c0-6.8-4.4-12.6-10.1-16.3C552.7 223.7 544 208.9 544 192s8.7-31.7 21.9-40.3c5.7-3.7 10.1-9.5 10.1-16.3l0-7.4c0-35.3-28.7-64-64-64L64 64zM576 352L0 352l0 64c0 17.7 14.3 32 32 32l48 0 0-32c0-8.8 7.2-16 16-16s16 7.2 16 16l0 32 96 0 0-32c0-8.8 7.2-16 16-16s16 7.2 16 16l0 32 96 0 0-32c0-8.8 7.2-16 16-16s16 7.2 16 16l0 32 96 0 0-32c0-8.8 7.2-16 16-16s16 7.2 16 16l0 32 48 0c17.7 0 32-14.3 32-32l0-64zM192 160l0 64c0 17.7-14.3 32-32 32s-32-14.3-32-32l0-64c0-17.7 14.3-32 32-32s32 14.3 32 32zm128 0l0 64c0 17.7-14.3 32-32 32s-32-14.3-32-32l0-64c0-17.7 14.3-32 32-32s32 14.3 32 32zm128 0l0 64c0 17.7-14.3 32-32 32s-32-14.3-32-32l0-64c0-17.7 14.3-32 32-32s32 14.3 32 32z"]},fn={prefix:"fas",iconName:"folder",icon:[512,512,[128193,128447,61716,"folder-blank"],"f07b","M64 480H448c35.3 0 64-28.7 64-64V160c0-35.3-28.7-64-64-64H288c-10.1 0-19.6-4.7-25.6-12.8L243.2 57.6C231.1 41.5 212.1 32 192 32H64C28.7 32 0 60.7 0 96V416c0 35.3 28.7 64 64 64z"]},dn={prefix:"fas",iconName:"box",icon:[448,512,[128230],"f466","M50.7 58.5L0 160l208 0 0-128L93.7 32C75.5 32 58.9 42.3 50.7 58.5zM240 160l208 0L397.3 58.5C389.1 42.3 372.5 32 354.3 32L240 32l0 128zm208 32L0 192 0 416c0 35.3 28.7 64 64 64l320 0c35.3 0 64-28.7 64-64l0-224z"]},_n={prefix:"fas",iconName:"maximize",icon:[512,512,["expand-arrows-alt"],"f31e","M200 32L56 32C42.7 32 32 42.7 32 56l0 144c0 9.7 5.8 18.5 14.8 22.2s19.3 1.7 26.2-5.2l40-40 79 79-79 79L73 295c-6.9-6.9-17.2-8.9-26.2-5.2S32 302.3 32 312l0 144c0 13.3 10.7 24 24 24l144 0c9.7 0 18.5-5.8 22.2-14.8s1.7-19.3-5.2-26.2l-40-40 79-79 79 79-40 40c-6.9 6.9-8.9 17.2-5.2 26.2s12.5 14.8 22.2 14.8l144 0c13.3 0 24-10.7 24-24l0-144c0-9.7-5.8-18.5-14.8-22.2s-19.3-1.7-26.2 5.2l-40 40-79-79 79-79 40 40c6.9 6.9 17.2 8.9 26.2 5.2s14.8-12.5 14.8-22.2l0-144c0-13.3-10.7-24-24-24L312 32c-9.7 0-18.5 5.8-22.2 14.8s-1.7 19.3 5.2 26.2l40 40-79 79-79-79 40-40c6.9-6.9 8.9-17.2 5.2-26.2S209.7 32 200 32z"]},_r=_n,pn={prefix:"fas",iconName:"server",icon:[512,512,[],"f233","M64 32C28.7 32 0 60.7 0 96l0 64c0 35.3 28.7 64 64 64l384 0c35.3 0 64-28.7 64-64l0-64c0-35.3-28.7-64-64-64L64 32zm280 72a24 24 0 1 1 0 48 24 24 0 1 1 0-48zm48 24a24 24 0 1 1 48 0 24 24 0 1 1 -48 0zM64 288c-35.3 0-64 28.7-64 64l0 64c0 35.3 28.7 64 64 64l384 0c35.3 0 64-28.7 64-64l0-64c0-35.3-28.7-64-64-64L64 288zm280 72a24 24 0 1 1 0 48 24 24 0 1 1 0-48zm56 24a24 24 0 1 1 48 0 24 24 0 1 1 -48 0z"]},pr={prefix:"fas",iconName:"microchip",icon:[512,512,[],"f2db","M176 24c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 40c-35.3 0-64 28.7-64 64l-40 0c-13.3 0-24 10.7-24 24s10.7 24 24 24l40 0 0 56-40 0c-13.3 0-24 10.7-24 24s10.7 24 24 24l40 0 0 56-40 0c-13.3 0-24 10.7-24 24s10.7 24 24 24l40 0c0 35.3 28.7 64 64 64l0 40c0 13.3 10.7 24 24 24s24-10.7 24-24l0-40 56 0 0 40c0 13.3 10.7 24 24 24s24-10.7 24-24l0-40 56 0 0 40c0 13.3 10.7 24 24 24s24-10.7 24-24l0-40c35.3 0 64-28.7 64-64l40 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-40 0 0-56 40 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-40 0 0-56 40 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-40 0c0-35.3-28.7-64-64-64l0-40c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 40-56 0 0-40c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 40-56 0 0-40zM160 128l192 0c17.7 0 32 14.3 32 32l0 192c0 17.7-14.3 32-32 32l-192 0c-17.7 0-32-14.3-32-32l0-192c0-17.7 14.3-32 32-32zm192 32l-192 0 0 192 192 0 0-192z"]},mn={prefix:"fas",iconName:"circle-chevron-up",icon:[512,512,["chevron-circle-up"],"f139","M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM377 271c9.4 9.4 9.4 24.6 0 33.9s-24.6 9.4-33.9 0l-87-87-87 87c-9.4 9.4-24.6 9.4-33.9 0s-9.4-24.6 0-33.9L239 167c9.4-9.4 24.6-9.4 33.9 0L377 271z"]},vn=mn,mr={prefix:"fas",iconName:"box-open",icon:[640,512,[],"f49e","M58.9 42.1c3-6.1 9.6-9.6 16.3-8.7L320 64 564.8 33.4c6.7-.8 13.3 2.7 16.3 8.7l41.7 83.4c9 17.9-.6 39.6-19.8 45.1L439.6 217.3c-13.9 4-28.8-1.9-36.2-14.3L320 64 236.6 203c-7.4 12.4-22.3 18.3-36.2 14.3L37.1 170.6c-19.3-5.5-28.8-27.2-19.8-45.1L58.9 42.1zM321.1 128l54.9 91.4c14.9 24.8 44.6 36.6 72.5 28.6L576 211.6l0 167c0 22-15 41.2-36.4 46.6l-204.1 51c-10.2 2.6-20.9 2.6-31 0l-204.1-51C79 419.7 64 400.5 64 378.5l0-167L191.6 248c27.8 8 57.6-3.8 72.5-28.6L318.9 128l2.2 0z"]},gn={prefix:"fas",iconName:"arrows-rotate",icon:[512,512,[128472,"refresh","sync"],"f021","M105.1 202.6c7.7-21.8 20.2-42.3 37.8-59.8c62.5-62.5 163.8-62.5 226.3 0L386.3 160 352 160c-17.7 0-32 14.3-32 32s14.3 32 32 32l111.5 0c0 0 0 0 0 0l.4 0c17.7 0 32-14.3 32-32l0-112c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 35.2L414.4 97.6c-87.5-87.5-229.3-87.5-316.8 0C73.2 122 55.6 150.7 44.8 181.4c-5.9 16.7 2.9 34.9 19.5 40.8s34.9-2.9 40.8-19.5zM39 289.3c-5 1.5-9.8 4.2-13.7 8.2c-4 4-6.7 8.8-8.1 14c-.3 1.2-.6 2.5-.8 3.8c-.3 1.7-.4 3.4-.4 5.1L16 432c0 17.7 14.3 32 32 32s32-14.3 32-32l0-35.1 17.6 17.5c0 0 0 0 0 0c87.5 87.4 229.3 87.4 316.7 0c24.4-24.4 42.1-53.1 52.9-83.8c5.9-16.7-2.9-34.9-19.5-40.8s-34.9 2.9-40.8 19.5c-7.7 21.8-20.2 42.3-37.8 59.8c-62.5 62.5-163.8 62.5-226.3 0l-.1-.1L125.6 352l34.4 0c17.7 0 32-14.3 32-32s-14.3-32-32-32L48.4 288c-1.6 0-3.2 .1-4.8 .3s-3.1 .5-4.6 1z"]},vr=gn,bn={prefix:"fas",iconName:"house-user",icon:[576,512,["home-user"],"e1b0","M575.8 255.5c0 18-15 32.1-32 32.1l-32 0 .7 160.2c.2 35.5-28.5 64.3-64 64.3l-320.4 0c-35.3 0-64-28.7-64-64l0-160.4-32 0c-18 0-32-14-32-32.1c0-9 3-17 10-24L266.4 8c7-7 15-8 22-8s15 2 21 7L564.8 231.5c8 7 12 15 11 24zM352 224a64 64 0 1 0 -128 0 64 64 0 1 0 128 0zm-96 96c-44.2 0-80 35.8-80 80c0 8.8 7.2 16 16 16l192 0c8.8 0 16-7.2 16-16c0-44.2-35.8-80-80-80l-64 0z"]},Sn={prefix:"fas",iconName:"tags",icon:[512,512,[],"f02c","M345 39.1L472.8 168.4c52.4 53 52.4 138.2 0 191.2L360.8 472.9c-9.3 9.4-24.5 9.5-33.9 .2s-9.5-24.5-.2-33.9L438.6 325.9c33.9-34.3 33.9-89.4 0-123.7L310.9 72.9c-9.3-9.4-9.2-24.6 .2-33.9s24.6-9.2 33.9 .2zM0 229.5L0 80C0 53.5 21.5 32 48 32l149.5 0c17 0 33.3 6.7 45.3 18.7l168 168c25 25 25 65.5 0 90.5L277.3 442.7c-25 25-65.5 25-90.5 0l-168-168C6.7 262.7 0 246.5 0 229.5zM144 144a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z"]},Cn={prefix:"fas",iconName:"terminal",icon:[576,512,[],"f120","M9.4 86.6C-3.1 74.1-3.1 53.9 9.4 41.4s32.8-12.5 45.3 0l192 192c12.5 12.5 12.5 32.8 0 45.3l-192 192c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L178.7 256 9.4 86.6zM256 416l288 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-288 0c-17.7 0-32-14.3-32-32s14.3-32 32-32z"]},wn={prefix:"fas",iconName:"tag",icon:[448,512,[127991],"f02b","M0 80L0 229.5c0 17 6.7 33.3 18.7 45.3l176 176c25 25 65.5 25 90.5 0L418.7 317.3c25-25 25-65.5 0-90.5l-176-176c-12-12-28.3-18.7-45.3-18.7L48 32C21.5 32 0 53.5 0 80zm112 32a32 32 0 1 1 0 64 32 32 0 1 1 0-64z"]},yn={prefix:"fas",iconName:"hard-drive",icon:[512,512,[128436,"hdd"],"f0a0","M0 96C0 60.7 28.7 32 64 32l384 0c35.3 0 64 28.7 64 64l0 184.4c-17-15.2-39.4-24.4-64-24.4L64 256c-24.6 0-47 9.2-64 24.4L0 96zM64 288l384 0c35.3 0 64 28.7 64 64l0 64c0 35.3-28.7 64-64 64L64 480c-35.3 0-64-28.7-64-64l0-64c0-35.3 28.7-64 64-64zM320 416a32 32 0 1 0 0-64 32 32 0 1 0 0 64zm128-32a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z"]},kn=yn,En={prefix:"fas",iconName:"gear",icon:[512,512,[9881,"cog"],"f013","M495.9 166.6c3.2 8.7 .5 18.4-6.4 24.6l-43.3 39.4c1.1 8.3 1.7 16.8 1.7 25.4s-.6 17.1-1.7 25.4l43.3 39.4c6.9 6.2 9.6 15.9 6.4 24.6c-4.4 11.9-9.7 23.3-15.8 34.3l-4.7 8.1c-6.6 11-14 21.4-22.1 31.2c-5.9 7.2-15.7 9.6-24.5 6.8l-55.7-17.7c-13.4 10.3-28.2 18.9-44 25.4l-12.5 57.1c-2 9.1-9 16.3-18.2 17.8c-13.8 2.3-28 3.5-42.5 3.5s-28.7-1.2-42.5-3.5c-9.2-1.5-16.2-8.7-18.2-17.8l-12.5-57.1c-15.8-6.5-30.6-15.1-44-25.4L83.1 425.9c-8.8 2.8-18.6 .3-24.5-6.8c-8.1-9.8-15.5-20.2-22.1-31.2l-4.7-8.1c-6.1-11-11.4-22.4-15.8-34.3c-3.2-8.7-.5-18.4 6.4-24.6l43.3-39.4C64.6 273.1 64 264.6 64 256s.6-17.1 1.7-25.4L22.4 191.2c-6.9-6.2-9.6-15.9-6.4-24.6c4.4-11.9 9.7-23.3 15.8-34.3l4.7-8.1c6.6-11 14-21.4 22.1-31.2c5.9-7.2 15.7-9.6 24.5-6.8l55.7 17.7c13.4-10.3 28.2-18.9 44-25.4l12.5-57.1c2-9.1 9-16.3 18.2-17.8C227.3 1.2 241.5 0 256 0s28.7 1.2 42.5 3.5c9.2 1.5 16.2 8.7 18.2 17.8l12.5 57.1c15.8 6.5 30.6 15.1 44 25.4l55.7-17.7c8.8-2.8 18.6-.3 24.5 6.8c8.1 9.8 15.5 20.2 22.1 31.2l4.7 8.1c6.1 11 11.4 22.4 15.8 34.3zM256 336a80 80 0 1 0 0-160 80 80 0 1 0 0 160z"]},Ln=En,Dn={prefix:"fas",iconName:"clock",icon:[512,512,[128339,"clock-four"],"f017","M256 0a256 256 0 1 1 0 512A256 256 0 1 1 256 0zM232 120l0 136c0 8 4 15.5 10.7 20l96 64c11 7.4 25.9 4.4 33.3-6.7s4.4-25.9-6.7-33.3L280 243.2 280 120c0-13.3-10.7-24-24-24s-24 10.7-24 24z"]},Rn={prefix:"fas",iconName:"network-wired",icon:[640,512,[],"f6ff","M256 64l128 0 0 64-128 0 0-64zM240 0c-26.5 0-48 21.5-48 48l0 96c0 26.5 21.5 48 48 48l48 0 0 32L32 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l96 0 0 32-48 0c-26.5 0-48 21.5-48 48l0 96c0 26.5 21.5 48 48 48l160 0c26.5 0 48-21.5 48-48l0-96c0-26.5-21.5-48-48-48l-48 0 0-32 256 0 0 32-48 0c-26.5 0-48 21.5-48 48l0 96c0 26.5 21.5 48 48 48l160 0c26.5 0 48-21.5 48-48l0-96c0-26.5-21.5-48-48-48l-48 0 0-32 96 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-256 0 0-32 48 0c26.5 0 48-21.5 48-48l0-96c0-26.5-21.5-48-48-48L240 0zM96 448l0-64 128 0 0 64L96 448zm320-64l128 0 0 64-128 0 0-64z"]},An={prefix:"fas",iconName:"download",icon:[512,512,[],"f019","M288 32c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 242.7-73.4-73.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l128 128c12.5 12.5 32.8 12.5 45.3 0l128-128c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L288 274.7 288 32zM64 352c-35.3 0-64 28.7-64 64l0 32c0 35.3 28.7 64 64 64l384 0c35.3 0 64-28.7 64-64l0-32c0-35.3-28.7-64-64-64l-101.5 0-45.3 45.3c-25 25-65.5 25-90.5 0L165.5 352 64 352zm368 56a24 24 0 1 1 0 48 24 24 0 1 1 0-48z"]},Bn={prefix:"fas",iconName:"house",icon:[576,512,[127968,63498,63500,"home","home-alt","home-lg-alt"],"f015","M575.8 255.5c0 18-15 32.1-32 32.1l-32 0 .7 160.2c0 2.7-.2 5.4-.5 8.1l0 16.2c0 22.1-17.9 40-40 40l-16 0c-1.1 0-2.2 0-3.3-.1c-1.4 .1-2.8 .1-4.2 .1L416 512l-24 0c-22.1 0-40-17.9-40-40l0-24 0-64c0-17.7-14.3-32-32-32l-64 0c-17.7 0-32 14.3-32 32l0 64 0 24c0 22.1-17.9 40-40 40l-24 0-31.9 0c-1.5 0-3-.1-4.5-.2c-1.2 .1-2.4 .2-3.6 .2l-16 0c-22.1 0-40-17.9-40-40l0-112c0-.9 0-1.9 .1-2.8l0-69.7-32 0c-18 0-32-14-32-32.1c0-9 3-17 10-24L266.4 8c7-7 15-8 22-8s15 2 21 7L564.8 231.5c8 7 12 15 11 24z"]},Mn=Bn,Tn={prefix:"fas",iconName:"stop",icon:[384,512,[9209],"f04d","M0 128C0 92.7 28.7 64 64 64H320c35.3 0 64 28.7 64 64V384c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V128z"]},xn={prefix:"fas",iconName:"sun",icon:[512,512,[9728],"f185","M361.5 1.2c5 2.1 8.6 6.6 9.6 11.9L391 121l107.9 19.8c5.3 1 9.8 4.6 11.9 9.6s1.5 10.7-1.6 15.2L446.9 256l62.3 90.3c3.1 4.5 3.7 10.2 1.6 15.2s-6.6 8.6-11.9 9.6L391 391 371.1 498.9c-1 5.3-4.6 9.8-9.6 11.9s-10.7 1.5-15.2-1.6L256 446.9l-90.3 62.3c-4.5 3.1-10.2 3.7-15.2 1.6s-8.6-6.6-9.6-11.9L121 391 13.1 371.1c-5.3-1-9.8-4.6-11.9-9.6s-1.5-10.7 1.6-15.2L65.1 256 2.8 165.7c-3.1-4.5-3.7-10.2-1.6-15.2s6.6-8.6 11.9-9.6L121 121 140.9 13.1c1-5.3 4.6-9.8 9.6-11.9s10.7-1.5 15.2 1.6L256 65.1 346.3 2.8c4.5-3.1 10.2-3.7 15.2-1.6zM160 256a96 96 0 1 1 192 0 96 96 0 1 1 -192 0zm224 0a128 128 0 1 0 -256 0 128 128 0 1 0 256 0z"]},On={prefix:"fas",iconName:"file",icon:[384,512,[128196,128459,61462],"f15b","M0 64C0 28.7 28.7 0 64 0L224 0l0 128c0 17.7 14.3 32 32 32l128 0 0 288c0 35.3-28.7 64-64 64L64 512c-35.3 0-64-28.7-64-64L0 64zm384 64l-128 0L256 0 384 128z"]},Pn={prefix:"fas",iconName:"play",icon:[384,512,[9654],"f04b","M73 39c-14.8-9.1-33.4-9.4-48.5-.9S0 62.6 0 80L0 432c0 17.4 9.4 33.4 24.5 41.9s33.7 8.1 48.5-.9L361 297c14.3-8.7 23-24.2 23-41s-8.7-32.2-23-41L73 39z"]},In={prefix:"fas",iconName:"plus",icon:[448,512,[10133,61543,"add"],"2b","M256 80c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 144L48 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l144 0 0 144c0 17.7 14.3 32 32 32s32-14.3 32-32l0-144 144 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-144 0 0-144z"]},Hn={prefix:"fas",iconName:"moon",icon:[384,512,[127769,9214],"f186","M223.5 32C100 32 0 132.3 0 256S100 480 223.5 480c60.6 0 115.5-24.2 155.8-63.4c5-4.9 6.3-12.5 3.1-18.7s-10.1-9.7-17-8.5c-9.8 1.7-19.8 2.6-30.1 2.6c-96.9 0-175.5-78.8-175.5-176c0-65.8 36-123.1 89.3-153.3c6.1-3.5 9.2-10.5 7.7-17.3s-7.3-11.9-14.3-12.5c-6.3-.5-12.6-.8-19-.8z"]},$n={prefix:"fas",iconName:"rectangle-xmark",icon:[512,512,[62164,"rectangle-times","times-rectangle","window-close"],"f410","M64 32C28.7 32 0 60.7 0 96L0 416c0 35.3 28.7 64 64 64l384 0c35.3 0 64-28.7 64-64l0-320c0-35.3-28.7-64-64-64L64 32zM175 175c9.4-9.4 24.6-9.4 33.9 0l47 47 47-47c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9l-47 47 47 47c9.4 9.4 9.4 24.6 0 33.9s-24.6 9.4-33.9 0l-47-47-47 47c-9.4 9.4-24.6 9.4-33.9 0s-9.4-24.6 0-33.9l47-47-47-47c-9.4-9.4-9.4-24.6 0-33.9z"]},Fn=$n,zn={prefix:"fas",iconName:"turn-up",icon:[384,512,[10548,"level-up-alt"],"f3bf","M350 177.5c3.8-8.8 2-19-4.6-26l-136-144C204.9 2.7 198.6 0 192 0s-12.9 2.7-17.4 7.5l-136 144c-6.6 7-8.4 17.2-4.6 26s12.5 14.5 22 14.5l88 0 0 192c0 17.7-14.3 32-32 32l-80 0c-17.7 0-32 14.3-32 32l0 32c0 17.7 14.3 32 32 32l80 0c70.7 0 128-57.3 128-128l0-192 88 0c9.6 0 18.2-5.7 22-14.5z"]},Nn=zn;function Wn(n){let e,t;return e=new _e({props:{icon:xn,color:"#333",size:"2x"}}),{c(){oe(e.$$.fragment)},m(s,f){re(e,s,f),t=!0},i(s){t||(N(e.$$.fragment,s),t=!0)},o(s){q(e.$$.fragment,s),t=!1},d(s){ne(e,s)}}}function Un(n){let e,t;return e=new _e({props:{icon:Hn,color:"#333",size:"2x"}}),{c(){oe(e.$$.fragment)},m(s,f){re(e,s,f),t=!0},i(s){t||(N(e.$$.fragment,s),t=!0)},o(s){q(e.$$.fragment,s),t=!1},d(s){ne(e,s)}}}function jn(n){let e,t,s,f,m,p;const i=[Un,Wn],r=[];function c(d,l){return d[0]==="dark"?0:1}return t=c(n),s=r[t]=i[t](n),{c(){e=P("button"),s.c(),D(e,"type","button"),D(e,"class","btn mx-2"),D(e,"title","Switch Theme")},m(d,l){U(d,e,l),r[t].m(e,null),f=!0,m||(p=pe(e,"click",n[1]),m=!0)},p(d,[l]){let _=t;t=c(d),t!==_&&(ve(),q(r[_],1,1,()=>{r[_]=null}),ge(),s=r[t],s||(s=r[t]=i[t](d),s.c()),N(s,1),s.m(e,null))},i(d){f||(N(s),f=!0)},o(d){q(s),f=!1},d(d){d&&W(e),r[t].d(),m=!1,p()}}}function Kn(n,e,t){let s;function f(){s==="light"?(t(0,s="dark"),document.querySelector("html").classList.add("dark")):(t(0,s="light"),document.querySelector("html").classList.remove("dark"))}return Ge(()=>{t(0,s="dark"),s==="dark"&&document.querySelector("html").classList.add("dark")}),[s,f]}class qn extends He{constructor(e){super(),Ie(this,e,Kn,jn,xe,{})}}function Ii(n){let e,t,s,f,m,p,i;function r(S,o){if(S[0]==="error"||S[0]==="warning")return Xn;if(S[0]==="success")return Gn;if(S[0]==="info")return Vn}let c=r(n),d=c&&c(n),l=n[0]==="error"&&Hi();const _=n[4].default,b=Kt(_,n,n[3],null);let w=n[1]&&$i(n);return{c(){e=P("div"),d&&d.c(),t=G(),s=P("div"),l&&l.c(),f=G(),b&&b.c(),m=G(),w&&w.c(),D(e,"class","alert d-flex align-items-center"),D(e,"role","alert"),ie(e,"alert-danger",n[0]==="error"),ie(e,"alert-warning",n[0]==="warning"),ie(e,"alert-success",n[0]==="success"),ie(e,"alert-info",n[0]==="info"),ie(e,"alert-dismissible",n[1])},m(S,o){U(S,e,o),d&&d.m(e,null),R(e,t),R(e,s),l&&l.m(s,null),R(s,f),b&&b.m(s,null),R(s,m),w&&w.m(s,null),i=!0},p(S,o){c!==(c=r(S))&&(d&&d.d(1),d=c&&c(S),d&&(d.c(),d.m(e,t))),S[0]==="error"?l||(l=Hi(),l.c(),l.m(s,f)):l&&(l.d(1),l=null),b&&b.p&&(!i||o&8)&&Vt(b,_,S,S[3],i?qt(_,S[3],o,null):Gt(S[3]),null),S[1]?w?w.p(S,o):(w=$i(S),w.c(),w.m(s,null)):w&&(w.d(1),w=null),(!i||o&1)&&ie(e,"alert-danger",S[0]==="error"),(!i||o&1)&&ie(e,"alert-warning",S[0]==="warning"),(!i||o&1)&&ie(e,"alert-success",S[0]==="success"),(!i||o&1)&&ie(e,"alert-info",S[0]==="info"),(!i||o&2)&&ie(e,"alert-dismissible",S[1])},i(S){i||(N(b,S),S&&Te(()=>{i&&(p||(p=qe(e,Ne,{},!0)),p.run(1))}),i=!0)},o(S){q(b,S),S&&(p||(p=qe(e,Ne,{},!1)),p.run(0)),i=!1},d(S){S&&W(e),d&&d.d(),l&&l.d(),b&&b.d(S),w&&w.d(),S&&p&&p.end()}}}function Vn(n){let e,t;return{c(){e=Ee("svg"),t=Ee("use"),di(t,"xlink:href","#info-fill"),D(e,"class","bi flex-shrink-0 me-2"),D(e,"width","24"),D(e,"height","24"),D(e,"role","img"),D(e,"aria-label","Info:")},m(s,f){U(s,e,f),R(e,t)},d(s){s&&W(e)}}}function Gn(n){let e,t;return{c(){e=Ee("svg"),t=Ee("use"),di(t,"xlink:href","#check-circle-fill"),D(e,"class","bi flex-shrink-0 me-2"),D(e,"width","24"),D(e,"height","24"),D(e,"role","img"),D(e,"aria-label","Success:")},m(s,f){U(s,e,f),R(e,t)},d(s){s&&W(e)}}}function Xn(n){let e,t;return{c(){e=Ee("svg"),t=Ee("use"),di(t,"xlink:href","#exclamation-triangle-fill"),D(e,"class","bi flex-shrink-0 me-2"),D(e,"width","24"),D(e,"height","24"),D(e,"role","img"),D(e,"aria-label","Danger:")},m(s,f){U(s,e,f),R(e,t)},d(s){s&&W(e)}}}function Hi(n){let e;return{c(){e=P("strong"),e.textContent="Error:"},m(t,s){U(t,e,s)},d(t){t&&W(e)}}}function $i(n){let e,t,s;return{c(){e=P("button"),D(e,"type","button"),D(e,"class","btn-close"),D(e,"data-bs-dismiss","alert"),D(e,"aria-label","Close")},m(f,m){U(f,e,m),t||(s=pe(e,"click",n[5]),t=!0)},p:he,d(f){f&&W(e),t=!1,s()}}}function Zn(n){let e,t,s,f,m,p,i,r,c,d,l=!n[2]&&Ii(n);return{c(){e=Ee("svg"),t=Ee("symbol"),s=Ee("path"),f=Ee("symbol"),m=Ee("path"),p=Ee("symbol"),i=Ee("path"),r=G(),l&&l.c(),c=rt(),D(s,"d","M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"),D(t,"id","check-circle-fill"),D(t,"fill","currentColor"),D(t,"viewBox","0 0 16 16"),D(m,"d","M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zm.93-9.412-1 4.705c-.07.34.029.533.304.533.194 0 .487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703 0-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381 2.29-.287zM8 5.5a1 1 0 1 1 0-2 1 1 0 0 1 0 2z"),D(f,"id","info-fill"),D(f,"fill","currentColor"),D(f,"viewBox","0 0 16 16"),D(i,"d","M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5zm.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"),D(p,"id","exclamation-triangle-fill"),D(p,"fill","currentColor"),D(p,"viewBox","0 0 16 16"),D(e,"xmlns","http://www.w3.org/2000/svg"),be(e,"display","none")},m(_,b){U(_,e,b),R(e,t),R(t,s),R(e,f),R(f,m),R(e,p),R(p,i),U(_,r,b),l&&l.m(_,b),U(_,c,b),d=!0},p(_,[b]){_[2]?l&&(ve(),q(l,1,1,()=>{l=null}),ge()):l?(l.p(_,b),b&4&&N(l,1)):(l=Ii(_),l.c(),N(l,1),l.m(c.parentNode,c))},i(_){d||(N(l),d=!0)},o(_){q(l),d=!1},d(_){_&&(W(e),W(r),W(c)),l&&l.d(_)}}}function Jn(n,e,t){let{$$slots:s={},$$scope:f}=e,{type:m}=e,{dismissible:p=!1}=e,i=!1;const r=()=>t(2,i=!0);return n.$$set=c=>{"type"in c&&t(0,m=c.type),"dismissible"in c&&t(1,p=c.dismissible),"$$scope"in c&&t(3,f=c.$$scope)},[m,p,i,f,s,r]}class Yn extends He{constructor(e){super(),Ie(this,e,Jn,Zn,xe,{type:0,dismissible:1})}}function Qn(n){switch(n.request){case"login":return`{"response": "login", "payload": {"username": "${n.payload.username}"}}`;case"get_system_info":return'{"response": "get_system_info", "payload": {"engine_version": "Docker 20.10.7", "containers": {"total": 178, "running": 170, "stopped": 0}, "os": "Ubuntu 20.04.3 LTS", "cpus": 24, "mem": 31277850624}}';case"get_container_list":return`{"response": "get_container_list", "payload": [
                {"id": "2b7eb6b9d2f7fd2dd26738500a81a16310f78e46eea2f9c2a27ed876d85d8586", "name": "CaaSa Demo", "namespace": null, "status": "running", "permissions": ["info", "info-annotations", "procs", "files-read", "files-write", "files", "logs", "state", "term"]},
                {"id": "2b7eb6b9d2f7fd2dd26738500a81a16310f78e46eea2f9c2a27ed876d85d8587", "name": "Backend", "namespace": "Cool Web App", "status": "running", "permissions": ["info", "info-annotations", "procs", "files-read", "files-write", "files", "logs", "state", "term"]},
                {"id": "2b7eb6b9d2f7fd2dd26738500a81a16310f78e46eea2f9c2a27ed876d85d8588", "name": "Gateway", "namespace": "Cool Web App", "status": "running", "permissions": ["info", "info-annotations", "procs", "files-read", "files-write", "files", "logs", "state", "term"]}
               ]}`;case"get_processes":return'{"response": "get_processes", "payload": [{"pid": "45756", "ppid": "45733", "%cpu": "0.0", "%mem": "0.0", "user": "root", "stime": "16:24", "command": "nginx: master process nginx -g daemon off;", "level": 0}, {"pid": "45822", "ppid": "45756", "%cpu": "0.0", "%mem": "0.0", "user": "systemd+", "stime": "16:24", "command": "nginx: worker process", "level": 1}, {"pid": "45823", "ppid": "45756", "%cpu": "0.0", "%mem": "0.0", "user": "systemd+", "stime": "16:24", "command": "nginx: worker process", "level": 1}, {"pid": "45824", "ppid": "45756", "%cpu": "0.0", "%mem": "0.0", "user": "systemd+", "stime": "16:24", "command": "nginx: worker process", "level": 1}, {"pid": "45825", "ppid": "45756", "%cpu": "0.0", "%mem": "0.0", "user": "systemd+", "stime": "16:24", "command": "nginx: worker process", "level": 1}, {"pid": "45826", "ppid": "45756", "%cpu": "0.0", "%mem": "0.0", "user": "systemd+", "stime": "16:24", "command": "nginx: worker process", "level": 1}, {"pid": "45827", "ppid": "45756", "%cpu": "0.0", "%mem": "0.0", "user": "systemd+", "stime": "16:24", "command": "nginx: worker process", "level": 1}, {"pid": "45828", "ppid": "45756", "%cpu": "0.0", "%mem": "0.0", "user": "systemd+", "stime": "16:24", "command": "nginx: worker process", "level": 1}, {"pid": "45829", "ppid": "45756", "%cpu": "0.0", "%mem": "0.0", "user": "systemd+", "stime": "16:24", "command": "nginx: worker process", "level": 1}, {"pid": "45830", "ppid": "45756", "%cpu": "0.0", "%mem": "0.0", "user": "systemd+", "stime": "16:24", "command": "nginx: worker process", "level": 1}, {"pid": "45831", "ppid": "45756", "%cpu": "0.0", "%mem": "0.0", "user": "systemd+", "stime": "16:24", "command": "nginx: worker process", "level": 1}, {"pid": "45832", "ppid": "45756", "%cpu": "0.0", "%mem": "0.0", "user": "systemd+", "stime": "16:24", "command": "nginx: worker process", "level": 1}, {"pid": "45833", "ppid": "45756", "%cpu": "0.0", "%mem": "0.0", "user": "systemd+", "stime": "16:24", "command": "nginx: worker process", "level": 1}, {"pid": "46825", "ppid": "45733", "%cpu": "0.0", "%mem": "0.0", "user": "root", "stime": "16:34", "command": "sh", "level": 0}]}';case"get_container_info":const e={"2b7eb6b9d2f7fd2dd26738500a81a16310f78e46eea2f9c2a27ed876d85d8586":"/caasa_demo","2b7eb6b9d2f7fd2dd26738500a81a16310f78e46eea2f9c2a27ed876d85d8587":"/cool_web_app_backend_1","2b7eb6b9d2f7fd2dd26738500a81a16310f78e46eea2f9c2a27ed876d85d8588":"/cool_web_app_gateway_1"};return`{"response": "get_container_info", "payload": {"id": "${n.payload.container_id}", "name": "${e[n.payload.container_id]}", "status": "running", "command": "/docker-entrypoint.sh nginx -g daemon off;", "created_at": "2021-12-02T10:33:16.628618832Z", "started_at": "2021-12-02T10:33:17.015866729Z", "finished_at": "0001-01-01T00:00:00Z", "crashes": 0, "env": {"PATH": "/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin", "NGINX_VERSION": "1.21.1", "NJS_VERSION": "0.6.1", "PKG_RELEASE": "1"}, "labels": {"caasa.admin.full": "user1,user2", "maintainer": "NGINX Docker Maintainers <docker-maint@nginx.com>"}, "image": {"name": "nginx:alpine", "hash": "sha256:b9e2356ea1be9452f3777a587b0b6a30bc16c295fe6190eda6a0776522f27439"}, "mem": {"used": 10452992, "max_used": 19345408, "total": 52428800}, "cpu": {"perc": ${Math.random()*10}}, "net": {"rx_bytes": 18201, "tx_bytes": 0}, "ports": ["80/tcp"]}}`;case"get_container_logs":return n.payload.onlynew?'{"response": "get_container_logs", "payload":[]}':'{"response": "get_container_logs", "payload": ["2021-12-02T10:33:17.021946340Z /docker-entrypoint.sh: /docker-entrypoint.d/ is not empty, will attempt to perform configuration","2021-12-02T10:33:17.021988550Z /docker-entrypoint.sh: Looking for shell scripts in /docker-entrypoint.d/","2021-12-02T10:33:17.023417432Z /docker-entrypoint.sh: Launching /docker-entrypoint.d/10-listen-on-ipv6-by-default.sh","2021-12-02T10:33:17.031231257Z 10-listen-on-ipv6-by-default.sh: info: Getting the checksum of /etc/nginx/conf.d/default.conf","2021-12-02T10:33:17.055742664Z 10-listen-on-ipv6-by-default.sh: info: Enabled listen on IPv6 in /etc/nginx/conf.d/default.conf","2021-12-02T10:33:17.056041305Z /docker-entrypoint.sh: Launching /docker-entrypoint.d/20-envsubst-on-templates.sh","2021-12-02T10:33:17.059979717Z /docker-entrypoint.sh: Launching /docker-entrypoint.d/30-tune-worker-processes.sh","2021-12-02T10:33:17.062059371Z /docker-entrypoint.sh: Configuration complete; ready for start up","2021-12-02T10:33:17.074027144Z 2021/12/02 10:33:17 [notice] 1#1: using the \\"epoll\\" event method","2021-12-02T10:33:17.074056600Z 2021/12/02 10:33:17 [notice] 1#1: nginx/1.21.1","2021-12-02T10:33:17.074063653Z 2021/12/02 10:33:17 [notice] 1#1: built by gcc 10.3.1 20210424 (Alpine 10.3.1_git20210424) ","2021-12-02T10:33:17.074069845Z 2021/12/02 10:33:17 [notice] 1#1: OS: Linux 5.11.0-40-generic","2021-12-02T10:33:17.074075475Z 2021/12/02 10:33:17 [notice] 1#1: getrlimit(RLIMIT_NOFILE): 1048576:1048576","2021-12-02T10:33:17.074245905Z 2021/12/02 10:33:17 [notice] 1#1: start worker processes","2021-12-02T10:33:17.074276953Z 2021/12/02 10:33:17 [notice] 1#1: start worker process 32","2021-12-02T10:33:17.074379486Z 2021/12/02 10:33:17 [notice] 1#1: start worker process 33","2021-12-02T10:33:17.074401427Z 2021/12/02 10:33:17 [notice] 1#1: start worker process 34","2021-12-02T10:33:17.074513127Z 2021/12/02 10:33:17 [notice] 1#1: start worker process 35","2021-12-02T10:33:17.074601242Z 2021/12/02 10:33:17 [notice] 1#1: start worker process 36","2021-12-02T10:33:17.074666745Z 2021/12/02 10:33:17 [notice] 1#1: start worker process 37","2021-12-02T10:33:17.074817979Z 2021/12/02 10:33:17 [notice] 1#1: start worker process 38","2021-12-02T10:33:17.074873423Z 2021/12/02 10:33:17 [notice] 1#1: start worker process 39","2021-12-02T10:33:17.075007344Z 2021/12/02 10:33:17 [notice] 1#1: start worker process 40","2021-12-02T10:33:17.075141746Z 2021/12/02 10:33:17 [notice] 1#1: start worker process 41","2021-12-02T10:33:17.075279715Z 2021/12/02 10:33:17 [notice] 1#1: start worker process 42","2021-12-02T10:33:17.075393118Z 2021/12/02 10:33:17 [notice] 1#1: start worker process 43"]}';case"get_filesystem_info":return'{"response": "get_filesystem_info", "payload": {"workdir": "", "mounts": [{"type": "bind", "destination": "/etc/ssl/certs", "readonly": true, "source": "/etc/ssl/certs"}]}}';case"get_directory_list":return n.payload.path===""||n.payload.path==="/"?'{"response": "get_directory_list", "payload": {"entries": [{"type": "f", "permissions": "rwxr-xr-x", "owner": "root", "group": "root", "filesize": "0B", "modtime": "2021-12-02 16:19:13", "name": ".dockerenv"}, {"type": "d", "permissions": "rwxr-xr-x", "owner": "root", "group": "root", "filesize": "4.0KB", "modtime": "2021-06-15 14:34:40", "name": "bin"}, {"type": "d", "permissions": "rwxr-xr-x", "owner": "root", "group": "root", "filesize": "360B", "modtime": "2021-12-02 16:19:13", "name": "dev"}, {"type": "d", "permissions": "rwxr-xr-x", "owner": "root", "group": "root", "filesize": "4.0KB", "modtime": "2021-07-06 19:40:27", "name": "docker-entrypoint.d"}, {"type": "f", "permissions": "rwxrwxr-x", "owner": "root", "group": "root", "filesize": "1.2KB", "modtime": "2021-07-06 19:40:16", "name": "docker-entrypoint.sh"}, {"type": "d", "permissions": "rwxr-xr-x", "owner": "root", "group": "root", "filesize": "4.0KB", "modtime": "2021-12-02 16:19:13", "name": "etc"}, {"type": "d", "permissions": "rwxr-xr-x", "owner": "root", "group": "root", "filesize": "4.0KB", "modtime": "2021-06-15 14:34:40", "name": "home"}, {"type": "d", "permissions": "rwxr-xr-x", "owner": "root", "group": "root", "filesize": "4.0KB", "modtime": "2021-06-15 14:34:40", "name": "lib"}, {"type": "d", "permissions": "rwxr-xr-x", "owner": "root", "group": "root", "filesize": "4.0KB", "modtime": "2021-06-15 14:34:40", "name": "media"}, {"type": "d", "permissions": "rwxr-xr-x", "owner": "root", "group": "root", "filesize": "4.0KB", "modtime": "2021-06-15 14:34:40", "name": "mnt"}, {"type": "d", "permissions": "rwxr-xr-x", "owner": "root", "group": "root", "filesize": "4.0KB", "modtime": "2021-06-15 14:34:40", "name": "opt"}, {"type": "d", "permissions": "r-xr-xr-x", "owner": "root", "group": "root", "filesize": "0B", "modtime": "2021-12-02 16:19:13", "name": "proc"}, {"type": "d", "permissions": "rwx------", "owner": "root", "group": "root", "filesize": "4.0KB", "modtime": "2021-06-15 14:34:40", "name": "root"}, {"type": "d", "permissions": "rwxr-xr-x", "owner": "root", "group": "root", "filesize": "4.0KB", "modtime": "2021-12-02 16:19:13", "name": "run"}, {"type": "d", "permissions": "rwxr-xr-x", "owner": "root", "group": "root", "filesize": "4.0KB", "modtime": "2021-06-15 14:34:40", "name": "sbin"}, {"type": "d", "permissions": "rwxr-xr-x", "owner": "root", "group": "root", "filesize": "4.0KB", "modtime": "2021-06-15 14:34:40", "name": "srv"}, {"type": "d", "permissions": "r-xr-xr-x", "owner": "root", "group": "root", "filesize": "0B", "modtime": "2021-12-02 16:19:13", "name": "sys"}, {"type": "d", "permissions": "rwxr-xr-x", "owner": "root", "group": "root", "filesize": "4.0KB", "modtime": "2021-06-15 14:34:40", "name": "usr"}, {"type": "d", "permissions": "rwxr-xr-x", "owner": "root", "group": "root", "filesize": "4.0KB", "modtime": "2021-06-15 14:34:40", "name": "var"}], "path": "/"}}':!1;case"spawn_terminal":return'{"response": "spawn_terminal", "payload": {"execId": "2680be7b4aa3c0b6599edf3521f5813a770ccec7966a59c57cfdac5b4e3b7e9a"}}';case"resize_terminal":return!0;case"transmit_terminal_input":return n.payload.data==="\r"?`56!{"response": "receive_terminal_output", "payload": null}\r
This is just a demo`:'56!{"response": "receive_terminal_output", "payload": null}'+n.payload.data;default:return!1}}class eo{constructor(e){Pe(this,"binaryType");Pe(this,"bufferedAmount");Pe(this,"extensions");Pe(this,"onclose");Pe(this,"onerror");Pe(this,"onmessage");Pe(this,"onopen");Pe(this,"protocol");Pe(this,"readyState");Pe(this,"url");Pe(this,"CLOSED");Pe(this,"CLOSING");Pe(this,"CONNECTING");Pe(this,"OPEN")}close(e,t){}addEventListener(e,t,s){throw new Error("Method not implemented.")}removeEventListener(e,t,s){throw new Error("Method not implemented.")}dispatchEvent(e){throw new Error("Method not implemented.")}send(e){const t=JSON.parse(e),s=Qn(t),f={data:void 0,...new Event("api-mock")};if(s===!1?f.data=`{"response": "${t.request}", "error": "Sorry, command not mocked in demo"}`:s===!0||(s[0]!=="{"?f.data=new Blob([s]):f.data=s),f.data&&(setTimeout(()=>this.onmessage(f),200),typeof f.data=="string"&&f.data.includes("spawn_terminal"))){console.log("extra response for terminal");const m={data:void 0,...new Event("api-mock")};m.data=new Blob(['56!{"response": "receive_terminal_output", "payload": null}/ # ']),setTimeout(()=>this.onmessage(m),300)}}}let nt,Ot={},Pt={};function Fi(n,e){n in Ot?Ot[n](e):console.error("WS-API Unknown websocket event:",n)}function Ut(n,e){n in Pt?Pt[n](e):console.error("WS-API Unknown websocket event:",n)}function zi(){Ot={},Pt={}}const ce={init(){try{nt&&nt.close(1e3),nt=new eo(`${window.location.protocol.replace("http","ws")}//${window.location.host}/ws`),nt.binaryType="blob",nt.onclose=n=>{Ut("ws-close",n.reason||"Connection closed"),zi()},nt.onmessage=async n=>{if(n.data instanceof Blob){const e=parseInt(await n.data.slice(0,10).text()),t=e.toString().length+1,s=await n.data.slice(t,t+e).text(),f=JSON.parse(s);f.error?Ut(f.response,f.error):Fi(f.response,{payload:f.payload,blob:n.data.slice(t+e)})}else{const e=JSON.parse(n.data);e.error?Ut(e.response,e.error):Fi(e.response,e.payload)}},nt.onerror=n=>{Ut("ws-error","Connection error")}}catch(n){alert(n)}},register(n,e,t){e&&(Ot[n]=e),t&&(Pt[n]=t)},unregister(...n){n.forEach(e=>{delete Pt[e],delete Ot[e]})},send(n,e){nt.send(JSON.stringify({request:n,payload:e}))},close(){zi(),nt.close()}};function to(n,e,t){const s=n.slice();return s[2]=e[t],s}function Ni(n){let e,t,s,f,m,p=ye([1,2,3]),i=[];for(let c=0;c<3;c+=1)i[c]=io(to(n,p,c));let r=n[0]&&Wi(n);return{c(){e=P("div"),t=P("div"),s=P("div");for(let c=0;c<3;c+=1)i[c].c();f=G(),r&&r.c(),D(s,"class","d-flex justify-content-center align-items-center"),D(t,"class","bg-inner d-flex flex-column rounded p-3 svelte-1l5azpb"),D(e,"class","bg-outer position-fixed d-flex justify-content-center align-items-center top-0 start-0 end-0 bottom-0 svelte-1l5azpb")},m(c,d){U(c,e,d),R(e,t),R(t,s);for(let l=0;l<3;l+=1)i[l]&&i[l].m(s,null);R(t,f),r&&r.m(t,null)},p(c,d){c[0]?r?r.p(c,d):(r=Wi(c),r.c(),r.m(t,null)):r&&(r.d(1),r=null)},i(c){c&&(m||Te(()=>{m=wt(e,Vr,{}),m.start()}))},o:he,d(c){c&&W(e),Ke(i,c),r&&r.d()}}}function io(n){let e;return{c(){e=P("div"),e.innerHTML='<span class="visually-hidden">Loading...</span> ',D(e,"class","spinner-grow mx-2 text-light"),D(e,"role","status")},m(t,s){U(t,e,s)},p:he,d(t){t&&W(e)}}}function Wi(n){let e,t;return{c(){e=P("div"),t=Y(n[0]),D(e,"class","mt-4 text-light")},m(s,f){U(s,e,f),R(e,t)},p(s,f){f&1&&le(t,s[0])},d(s){s&&W(e)}}}function so(n){let e,t=n[1]&&Ni(n);return{c(){t&&t.c(),e=rt()},m(s,f){t&&t.m(s,f),U(s,e,f)},p(s,[f]){s[1]?t?(t.p(s,f),f&2&&N(t,1)):(t=Ni(s),t.c(),N(t,1),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i(s){N(t)},o:he,d(s){s&&W(e),t&&t.d(s)}}}function ro(n,e,t){let{text:s=""}=e,f=!1;return Ge(()=>{setTimeout(()=>t(1,f=!0),250)}),n.$$set=m=>{"text"in m&&t(0,s=m.text)},[s,f]}class gr extends He{constructor(e){super(),Ie(this,e,ro,so,xe,{text:0})}}function Ui(n){let e,t;return e=new gr({}),{c(){oe(e.$$.fragment)},m(s,f){re(e,s,f),t=!0},i(s){t||(N(e.$$.fragment,s),t=!0)},o(s){q(e.$$.fragment,s),t=!1},d(s){ne(e,s)}}}function ji(n){let e,t;return e=new Yn({props:{type:"error",dismissible:!0,$$slots:{default:[no]},$$scope:{ctx:n}}}),{c(){oe(e.$$.fragment)},m(s,f){re(e,s,f),t=!0},p(s,f){const m={};f&1032&&(m.$$scope={dirty:f,ctx:s}),e.$set(m)},i(s){t||(N(e.$$.fragment,s),t=!0)},o(s){q(e.$$.fragment,s),t=!1},d(s){ne(e,s)}}}function no(n){let e;return{c(){e=Y(n[3])},m(t,s){U(t,e,s)},p(t,s){s&8&&le(e,t[3])},d(t){t&&W(e)}}}function oo(n){let e,t,s,f,m,p,i,r,c,d,l,_,b,w,S,o,h,a,u,g=n[2]&&Ui(),v=n[3]&&ji(n);return{c(){g&&g.c(),e=G(),t=P("div"),v&&v.c(),s=G(),f=P("form"),m=P("div"),p=P("input"),i=G(),r=P("label"),r.textContent="Username",c=G(),d=P("div"),l=P("input"),_=G(),b=P("label"),b.textContent="Password",w=G(),S=P("div"),S.innerHTML='<button type="submit" class="btn btn-primary w-100">Login</button>',D(p,"type","text"),D(p,"class","form-control"),D(p,"id","loginName"),D(p,"placeholder"," "),p.required=!0,D(p,"autocomplete","username"),D(r,"for","loginName"),D(m,"class","form-floating mb-2"),D(l,"type","password"),D(l,"class","form-control"),D(l,"id","loginPw"),D(l,"placeholder"," "),l.required=!0,D(l,"autocomplete","current-password"),D(b,"for","loginPw"),D(d,"class","form-floating mb-2"),D(S,"class","col-12"),D(f,"class","container login-form svelte-ur79cd"),D(t,"class","container pt-5")},m(y,E){g&&g.m(y,E),U(y,e,E),U(y,t,E),v&&v.m(t,null),R(t,s),R(t,f),R(f,m),R(m,p),Ye(p,n[0]),R(m,i),R(m,r),R(f,c),R(f,d),R(d,l),Ye(l,n[1]),R(d,_),R(d,b),R(f,w),R(f,S),h=!0,a||(u=[pe(p,"input",n[5]),pe(p,"input",n[6]),pe(l,"input",n[7]),pe(f,"submit",Qt(n[8]))],a=!0)},p(y,[E]){y[2]?g?E&4&&N(g,1):(g=Ui(),g.c(),N(g,1),g.m(e.parentNode,e)):g&&(ve(),q(g,1,1,()=>{g=null}),ge()),y[3]?v?(v.p(y,E),E&8&&N(v,1)):(v=ji(y),v.c(),N(v,1),v.m(t,s)):v&&(ve(),q(v,1,1,()=>{v=null}),ge()),E&1&&p.value!==y[0]&&Ye(p,y[0]),E&2&&l.value!==y[1]&&Ye(l,y[1])},i(y){h||(N(g),N(v),y&&Te(()=>{h&&(o||(o=qe(f,Ne,{},!0)),o.run(1))}),h=!0)},o(y){q(g),q(v),y&&(o||(o=qe(f,Ne,{},!1)),o.run(0)),h=!1},d(y){y&&(W(e),W(t)),g&&g.d(y),v&&v.d(),y&&o&&o.end(),a=!1,Ve(u)}}}function lo(n,e,t){let{username:s="admin"}=e,f="123456",m=!1,p="";const i=nr();Ge(()=>{ce.register("login",({username:b})=>{i("login",{username:b})},b=>{t(2,m=!1),Ce.add({text:b,type:"error"})})}),dt(()=>{ce.unregister("login")});async function r(){t(2,m=!0),ce.send("login",{username:s,password:f}),t(3,p=""),t(1,f="")}function c(){s=this.value,t(0,s)}const d=()=>{t(0,s=s.toLowerCase().trim())};function l(){f=this.value,t(1,f)}const _=()=>r();return n.$$set=b=>{"username"in b&&t(0,s=b.username)},[s,f,m,p,r,c,d,l,_]}class ao extends He{constructor(e){super(),Ie(this,e,lo,oo,xe,{username:0})}}function It(n,e=0){return Math.round(n*10**e)/10**e}function je(n){const e=["","Ki","Mi","Gi","Ti"];let t=0;for(;n>=1024;)n/=1024,t++;const s=Math.max(Math.floor(Math.log10(Math.floor(n))),0);return It(n,2-s)+" "+e[t]+"B"}function st(n){return new Date(n).toLocaleString(void 0,{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})}function br(n,e){var t;if((t=window==null?void 0:window.navigator)!=null&&t.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(n,e);else{const s=document.createElement("a");document.body.appendChild(s);const f=window.URL.createObjectURL(n);s.href=f,s.download=e,s.click(),setTimeout(()=>{window.URL.revokeObjectURL(f),document.body.removeChild(s)},0)}}function Ki(n,e,t){const s=n.slice();return s[15]=e[t][0],s[16]=e[t][1],s}function qi(n,e,t){const s=n.slice();return s[15]=e[t][0],s[16]=e[t][1],s}function Vi(n,e,t){const s=n.slice();return s[21]=e[t],s}function co(n){var wi,yi,ki;let e,t,s,f,m,p,i,r,c,d,l,_,b=n[1].id.substring(0,12)+"",w,S,o,h,a=n[1].name.replace(/^\//,"")+"",u,g,v,y,E,C,k,B=n[1].command+"",x,M,O,j,$,V,F,L,T,H,I,X,J,se,te,de,A,z,Z,K,ae,ee,me,we,ke,Xe,ue,lt,Qe,at,_t,Oe,Le,We,$e,ct,ht=st(n[1].created_at)+"",Ue,pt,Fe,Ze,Se,mt=n[1].crashes+"",ti,_i,pi,yt,kt,mi,Et,Lt,vi,Dt,Rt,gi,$t,Ft=n[1].status.charAt(0).toUpperCase()+n[1].status.slice(1).toLowerCase()+"",ii,si,At,Je;s=new _e({props:{icon:mr,size:"2x"}});let De=n[0]&&Gi(n);E=new _e({props:{icon:Cn}}),$=new _e({props:{icon:dn,size:"2x"}});let ze=((wi=n[1].image)==null?void 0:wi.hash)!==((ki=(yi=n[1])==null?void 0:yi.image)==null?void 0:ki.name)&&Ji(n);function bi(Q,fe){return fe&32&&(se=null),fe&32&&(te=null),se==null&&(se=!Q[5].includes("/")),se?wo:(te==null&&(te=!!Q[5].match(/^\w+\/\w+$/)),te?Co:So)}let zt=bi(n,-1),et=zt(n);z=new _e({props:{icon:wn}});let Re=n[1].cpu&&Yi(n),Ae=n[1].mem&&Qi(n),Be=n[1].net&&ns(n);ue=new _e({props:{icon:Dn,size:"2x"}});function Si(Q,fe){return Q[1].finished_at<Q[1].started_at?ko:yo}let Nt=Si(n),tt=Nt(n);function Ci(Q,fe){return Q[1].finished_at>Q[1].started_at?Ro:Do}let Wt=Ci(n),it=Wt(n),Me=(n[1].env||n[1].labels)&&as(n);return{c(){e=P("div"),t=P("div"),oe(s.$$.fragment),f=G(),m=P("div"),p=P("div"),i=P("div"),r=P("div"),c=P("span"),c.textContent="Container",d=G(),l=P("span"),_=Y("#"),w=Y(b),S=G(),o=P("div"),h=P("h6"),u=Y(a),g=G(),De&&De.c(),v=G(),y=P("div"),oe(E.$$.fragment),C=G(),k=P("code"),x=Y(B),M=G(),O=P("div"),j=P("div"),oe($.$$.fragment),V=G(),F=P("div"),L=P("div"),T=P("span"),T.textContent="Image",H=G(),ze&&ze.c(),I=G(),X=P("div"),J=P("h6"),et.c(),de=G(),A=P("span"),oe(z.$$.fragment),Z=G(),K=Y(n[4]),ae=G(),Re&&Re.c(),ee=G(),Ae&&Ae.c(),me=G(),Be&&Be.c(),we=G(),ke=P("div"),Xe=P("div"),oe(ue.$$.fragment),lt=G(),Qe=P("div"),at=P("div"),at.textContent="Timeline",_t=G(),Oe=P("div"),Le=P("div"),We=P("div"),$e=P("div"),$e.textContent="Created",ct=G(),Ue=Y(ht),pt=G(),Fe=P("div"),Ze=P("div"),Se=P("div"),ti=Y(mt),_i=Y(`
              Crashes`),pi=G(),yt=P("div"),kt=P("div"),tt.c(),mi=G(),Et=P("div"),Lt=P("div"),it.c(),vi=G(),Dt=P("div"),Rt=P("div"),gi=Y(`Currently
              `),$t=P("div"),ii=Y(Ft),si=G(),Me&&Me.c(),At=rt(),D(t,"class","icon-left ms-1 me-3 svelte-n9m8lc"),D(c,"class","me-2"),D(l,"class","text-muted font-monospace"),D(r,"class","mb-1"),D(i,"class","flex-grow-1"),D(p,"class","flex-grow-1 d-flex align-items-center justify-content-between"),D(m,"class","d-flex flex-column flex-grow-1"),D(e,"class","d-flex mb-3"),D(j,"class","icon-left ms-1 me-3 svelte-n9m8lc"),D(T,"class","me-2"),D(L,"class","mb-1"),D(A,"class","ms-1"),D(F,"class","flex-grow-1"),D(O,"class","d-flex mb-3"),D(Xe,"class","icon-left ms-1 me-3 svelte-n9m8lc"),D(at,"class","mb-1"),D($e,"class","fw-bold"),D(We,"class","popup svelte-n9m8lc"),D(Le,"class","tl-container svelte-n9m8lc"),be(Le,"margin-left","5%"),D(Se,"class","fw-bold"),D(Ze,"class","popup svelte-n9m8lc"),D(Fe,"class","tl-container svelte-n9m8lc"),be(Fe,"margin-left","27%"),D(kt,"class","popup svelte-n9m8lc"),D(yt,"class","tl-container svelte-n9m8lc"),be(yt,"margin-left","49%"),D(Lt,"class","popup svelte-n9m8lc"),D(Et,"class","tl-container svelte-n9m8lc"),be(Et,"margin-left","71%"),D($t,"class","fw-bold"),D(Rt,"class","popup svelte-n9m8lc"),D(Dt,"class","tl-container svelte-n9m8lc"),be(Dt,"margin-left","93%"),D(Oe,"class","timeline mt-2 svelte-n9m8lc"),D(Qe,"class","flex-grow-1 pb-5 mb-5"),D(ke,"class","d-flex mb-3")},m(Q,fe){U(Q,e,fe),R(e,t),re(s,t,null),R(e,f),R(e,m),R(m,p),R(p,i),R(i,r),R(r,c),R(r,d),R(r,l),R(l,_),R(l,w),R(i,S),R(i,o),R(o,h),R(h,u),R(p,g),De&&De.m(p,null),R(m,v),R(m,y),re(E,y,null),R(y,C),R(y,k),R(k,x),U(Q,M,fe),U(Q,O,fe),R(O,j),re($,j,null),R(O,V),R(O,F),R(F,L),R(L,T),R(L,H),ze&&ze.m(L,null),R(F,I),R(F,X),R(X,J),et.m(J,null),R(J,de),R(J,A),re(z,A,null),R(A,Z),R(A,K),U(Q,ae,fe),Re&&Re.m(Q,fe),U(Q,ee,fe),Ae&&Ae.m(Q,fe),U(Q,me,fe),Be&&Be.m(Q,fe),U(Q,we,fe),U(Q,ke,fe),R(ke,Xe),re(ue,Xe,null),R(ke,lt),R(ke,Qe),R(Qe,at),R(Qe,_t),R(Qe,Oe),R(Oe,Le),R(Le,We),R(We,$e),R(We,ct),R(We,Ue),R(Oe,pt),R(Oe,Fe),R(Fe,Ze),R(Ze,Se),R(Se,ti),R(Ze,_i),R(Oe,pi),R(Oe,yt),R(yt,kt),tt.m(kt,null),R(Oe,mi),R(Oe,Et),R(Et,Lt),it.m(Lt,null),R(Oe,vi),R(Oe,Dt),R(Dt,Rt),R(Rt,gi),R(Rt,$t),R($t,ii),U(Q,si,fe),Me&&Me.m(Q,fe),U(Q,At,fe),Je=!0},p(Q,fe){var Ei,Li,Di;(!Je||fe&2)&&b!==(b=Q[1].id.substring(0,12)+"")&&le(w,b),(!Je||fe&2)&&a!==(a=Q[1].name.replace(/^\//,"")+"")&&le(u,a),Q[0]?De?(De.p(Q,fe),fe&1&&N(De,1)):(De=Gi(Q),De.c(),N(De,1),De.m(p,null)):De&&(ve(),q(De,1,1,()=>{De=null}),ge()),(!Je||fe&2)&&B!==(B=Q[1].command+"")&&le(x,B),((Ei=Q[1].image)==null?void 0:Ei.hash)!==((Di=(Li=Q[1])==null?void 0:Li.image)==null?void 0:Di.name)?ze?ze.p(Q,fe):(ze=Ji(Q),ze.c(),ze.m(L,null)):ze&&(ze.d(1),ze=null),zt===(zt=bi(Q,fe))&&et?et.p(Q,fe):(et.d(1),et=zt(Q),et&&(et.c(),et.m(J,de))),(!Je||fe&16)&&le(K,Q[4]),Q[1].cpu?Re?(Re.p(Q,fe),fe&2&&N(Re,1)):(Re=Yi(Q),Re.c(),N(Re,1),Re.m(ee.parentNode,ee)):Re&&(ve(),q(Re,1,1,()=>{Re=null}),ge()),Q[1].mem?Ae?(Ae.p(Q,fe),fe&2&&N(Ae,1)):(Ae=Qi(Q),Ae.c(),N(Ae,1),Ae.m(me.parentNode,me)):Ae&&(ve(),q(Ae,1,1,()=>{Ae=null}),ge()),Q[1].net?Be?(Be.p(Q,fe),fe&2&&N(Be,1)):(Be=ns(Q),Be.c(),N(Be,1),Be.m(we.parentNode,we)):Be&&(ve(),q(Be,1,1,()=>{Be=null}),ge()),(!Je||fe&2)&&ht!==(ht=st(Q[1].created_at)+"")&&le(Ue,ht),(!Je||fe&2)&&mt!==(mt=Q[1].crashes+"")&&le(ti,mt),Nt===(Nt=Si(Q))&&tt?tt.p(Q,fe):(tt.d(1),tt=Nt(Q),tt&&(tt.c(),tt.m(kt,null))),Wt===(Wt=Ci(Q))&&it?it.p(Q,fe):(it.d(1),it=Wt(Q),it&&(it.c(),it.m(Lt,null))),(!Je||fe&2)&&Ft!==(Ft=Q[1].status.charAt(0).toUpperCase()+Q[1].status.slice(1).toLowerCase()+"")&&le(ii,Ft),Q[1].env||Q[1].labels?Me?(Me.p(Q,fe),fe&2&&N(Me,1)):(Me=as(Q),Me.c(),N(Me,1),Me.m(At.parentNode,At)):Me&&(ve(),q(Me,1,1,()=>{Me=null}),ge())},i(Q){Je||(N(s.$$.fragment,Q),N(De),N(E.$$.fragment,Q),N($.$$.fragment,Q),N(z.$$.fragment,Q),N(Re),N(Ae),N(Be),N(ue.$$.fragment,Q),N(Me),Je=!0)},o(Q){q(s.$$.fragment,Q),q(De),q(E.$$.fragment,Q),q($.$$.fragment,Q),q(z.$$.fragment,Q),q(Re),q(Ae),q(Be),q(ue.$$.fragment,Q),q(Me),Je=!1},d(Q){Q&&(W(e),W(M),W(O),W(ae),W(ee),W(me),W(we),W(ke),W(si),W(At)),ne(s),De&&De.d(),ne(E),ne($),ze&&ze.d(),et.d(),ne(z),Re&&Re.d(Q),Ae&&Ae.d(Q),Be&&Be.d(Q),ne(ue),tt.d(),it.d(),Me&&Me.d(Q)}}}function ho(n){let e;return{c(){e=P("div"),e.innerHTML='<strong>Loading...</strong> <div class="spinner-border ms-auto" role="status" aria-hidden="true"></div>',D(e,"class","d-flex align-items-center")},m(t,s){U(t,e,s)},p:he,i:he,o:he,d(t){t&&W(e)}}}function Gi(n){let e,t,s,f;const m=[fo,uo],p=[];function i(r,c){return r[1].status==="running"?0:!r[3]||r[3]==="start"?1:-1}return~(t=i(n))&&(s=p[t]=m[t](n)),{c(){e=P("div"),s&&s.c(),D(e,"class","ms-4")},m(r,c){U(r,e,c),~t&&p[t].m(e,null),f=!0},p(r,c){let d=t;t=i(r),t===d?~t&&p[t].p(r,c):(s&&(ve(),q(p[d],1,1,()=>{p[d]=null}),ge()),~t?(s=p[t],s?s.p(r,c):(s=p[t]=m[t](r),s.c()),N(s,1),s.m(e,null)):s=null)},i(r){f||(N(s),f=!0)},o(r){q(s),f=!1},d(r){r&&W(e),~t&&p[t].d()}}}function uo(n){let e,t,s,f,m,p,i,r;const c=[po,_o],d=[];function l(_,b){return _[3]?1:0}return t=l(n),s=d[t]=c[t](n),{c(){e=P("button"),s.c(),f=Y(`
                  Start`),D(e,"type","button"),D(e,"class","btn btn-outline-success"),e.disabled=m=!!n[3]},m(_,b){U(_,e,b),d[t].m(e,null),R(e,f),p=!0,i||(r=pe(e,"click",n[12]),i=!0)},p(_,b){let w=t;t=l(_),t!==w&&(ve(),q(d[w],1,1,()=>{d[w]=null}),ge(),s=d[t],s||(s=d[t]=c[t](_),s.c()),N(s,1),s.m(e,f)),(!p||b&8&&m!==(m=!!_[3]))&&(e.disabled=m)},i(_){p||(N(s),p=!0)},o(_){q(s),p=!1},d(_){_&&W(e),d[t].d(),i=!1,r()}}}function fo(n){let e,t,s,f=(!n[3]||n[3]==="restart")&&Xi(n),m=(!n[3]||n[3]==="stop")&&Zi(n);return{c(){f&&f.c(),e=G(),m&&m.c(),t=rt()},m(p,i){f&&f.m(p,i),U(p,e,i),m&&m.m(p,i),U(p,t,i),s=!0},p(p,i){!p[3]||p[3]==="restart"?f?(f.p(p,i),i&8&&N(f,1)):(f=Xi(p),f.c(),N(f,1),f.m(e.parentNode,e)):f&&(ve(),q(f,1,1,()=>{f=null}),ge()),!p[3]||p[3]==="stop"?m?(m.p(p,i),i&8&&N(m,1)):(m=Zi(p),m.c(),N(m,1),m.m(t.parentNode,t)):m&&(ve(),q(m,1,1,()=>{m=null}),ge())},i(p){s||(N(f),N(m),s=!0)},o(p){q(f),q(m),s=!1},d(p){p&&(W(e),W(t)),f&&f.d(p),m&&m.d(p)}}}function _o(n){let e;return{c(){e=P("span"),D(e,"class","spinner-grow spinner-grow-sm"),D(e,"role","status"),D(e,"aria-hidden","true")},m(t,s){U(t,e,s)},i:he,o:he,d(t){t&&W(e)}}}function po(n){let e,t;return e=new _e({props:{icon:Pn}}),{c(){oe(e.$$.fragment)},m(s,f){re(e,s,f),t=!0},i(s){t||(N(e.$$.fragment,s),t=!0)},o(s){q(e.$$.fragment,s),t=!1},d(s){ne(e,s)}}}function Xi(n){let e,t,s,f,m,p,i,r;const c=[vo,mo],d=[];function l(_,b){return _[3]?1:0}return t=l(n),s=d[t]=c[t](n),{c(){e=P("button"),s.c(),f=Y(`
                    Restart`),D(e,"type","button"),D(e,"class","btn btn-outline-warning"),e.disabled=m=!!n[3]},m(_,b){U(_,e,b),d[t].m(e,null),R(e,f),p=!0,i||(r=pe(e,"click",n[10]),i=!0)},p(_,b){let w=t;t=l(_),t!==w&&(ve(),q(d[w],1,1,()=>{d[w]=null}),ge(),s=d[t],s||(s=d[t]=c[t](_),s.c()),N(s,1),s.m(e,f)),(!p||b&8&&m!==(m=!!_[3]))&&(e.disabled=m)},i(_){p||(N(s),p=!0)},o(_){q(s),p=!1},d(_){_&&W(e),d[t].d(),i=!1,r()}}}function mo(n){let e;return{c(){e=P("span"),D(e,"class","spinner-grow spinner-grow-sm"),D(e,"role","status"),D(e,"aria-hidden","true")},m(t,s){U(t,e,s)},i:he,o:he,d(t){t&&W(e)}}}function vo(n){let e,t;return e=new _e({props:{icon:vr}}),{c(){oe(e.$$.fragment)},m(s,f){re(e,s,f),t=!0},i(s){t||(N(e.$$.fragment,s),t=!0)},o(s){q(e.$$.fragment,s),t=!1},d(s){ne(e,s)}}}function Zi(n){let e,t,s,f,m,p,i,r;const c=[bo,go],d=[];function l(_,b){return _[3]?1:0}return t=l(n),s=d[t]=c[t](n),{c(){e=P("button"),s.c(),f=Y(`
                    Stop`),D(e,"type","button"),D(e,"class","btn btn-outline-danger"),e.disabled=m=!!n[3]},m(_,b){U(_,e,b),d[t].m(e,null),R(e,f),p=!0,i||(r=pe(e,"click",n[11]),i=!0)},p(_,b){let w=t;t=l(_),t!==w&&(ve(),q(d[w],1,1,()=>{d[w]=null}),ge(),s=d[t],s||(s=d[t]=c[t](_),s.c()),N(s,1),s.m(e,f)),(!p||b&8&&m!==(m=!!_[3]))&&(e.disabled=m)},i(_){p||(N(s),p=!0)},o(_){q(s),p=!1},d(_){_&&W(e),d[t].d(),i=!1,r()}}}function go(n){let e;return{c(){e=P("span"),D(e,"class","spinner-grow spinner-grow-sm"),D(e,"role","status"),D(e,"aria-hidden","true")},m(t,s){U(t,e,s)},i:he,o:he,d(t){t&&W(e)}}}function bo(n){let e,t;return e=new _e({props:{icon:Tn}}),{c(){oe(e.$$.fragment)},m(s,f){re(e,s,f),t=!0},i(s){t||(N(e.$$.fragment,s),t=!0)},o(s){q(e.$$.fragment,s),t=!1},d(s){ne(e,s)}}}function Ji(n){let e,t=n[1].image.hash.substring(0,19)+"",s;return{c(){e=P("span"),s=Y(t),D(e,"class","text-muted font-monospace")},m(f,m){U(f,e,m),R(e,s)},p(f,m){m&2&&t!==(t=f[1].image.hash.substring(0,12+7)+"")&&le(s,t)},d(f){f&&W(e)}}}function So(n){let e;return{c(){e=Y(n[5])},m(t,s){U(t,e,s)},p(t,s){s&32&&le(e,t[5])},d(t){t&&W(e)}}}function Co(n){let e,t,s;return{c(){e=P("a"),t=Y(n[5]),D(e,"href",s="https://hub.docker.com/r/"+n[5]),D(e,"target","_blank"),D(e,"rel","noopener noreferrer"),D(e,"class","text-decoration-none")},m(f,m){U(f,e,m),R(e,t)},p(f,m){m&32&&le(t,f[5]),m&32&&s!==(s="https://hub.docker.com/r/"+f[5])&&D(e,"href",s)},d(f){f&&W(e)}}}function wo(n){let e,t,s;return{c(){e=P("a"),t=Y(n[5]),D(e,"href",s="https://hub.docker.com/_/"+n[5]),D(e,"target","_blank"),D(e,"rel","noopener noreferrer"),D(e,"class","text-decoration-none")},m(f,m){U(f,e,m),R(e,t)},p(f,m){m&32&&le(t,f[5]),m&32&&s!==(s="https://hub.docker.com/_/"+f[5])&&D(e,"href",s)},d(f){f&&W(e)}}}function Yi(n){let e,t,s,f,m,p,i,r,c,d=It(n[1].cpu.perc)+"",l,_,b;return s=new _e({props:{icon:pr,size:"2x"}}),{c(){e=P("div"),t=P("div"),oe(s.$$.fragment),f=G(),m=P("div"),p=P("div"),p.textContent="Processor",i=G(),r=P("div"),c=P("div"),l=Y(d),_=Y("%"),D(t,"class","icon-left ms-1 me-3 svelte-n9m8lc"),D(p,"class","mb-1"),D(c,"class","progress-bar text-white overflow-visible ps-1"),be(c,"width",n[1].cpu.perc+"%"),D(r,"class","progress"),D(m,"class","flex-grow-1"),D(e,"class","d-flex mb-3")},m(w,S){U(w,e,S),R(e,t),re(s,t,null),R(e,f),R(e,m),R(m,p),R(m,i),R(m,r),R(r,c),R(c,l),R(c,_),b=!0},p(w,S){(!b||S&2)&&d!==(d=It(w[1].cpu.perc)+"")&&le(l,d),(!b||S&2)&&be(c,"width",w[1].cpu.perc+"%")},i(w){b||(N(s.$$.fragment,w),b=!0)},o(w){q(s.$$.fragment,w),b=!1},d(w){w&&W(e),ne(s)}}}function Qi(n){let e,t,s,f,m,p,i,r,c,d,l,_;s=new _e({props:{icon:dr,size:"2x"}});let b=n[1].mem.used!==null&&es(n),w=n[1].mem.max_used!==null&&ts(n),S=n[1].mem.total!==null&&is(n),o=n[1].mem.used!==null&&n[1].mem.total!==null&&ss(n);return{c(){e=P("div"),t=P("div"),oe(s.$$.fragment),f=G(),m=P("div"),p=P("div"),i=P("span"),i.textContent="Memory",r=G(),b&&b.c(),c=G(),w&&w.c(),d=G(),S&&S.c(),l=G(),o&&o.c(),D(t,"class","icon-left ms-1 me-3 svelte-n9m8lc"),D(i,"class","me-2"),D(p,"class","mb-1"),D(m,"class","flex-grow-1"),D(e,"class","d-flex mb-3")},m(h,a){U(h,e,a),R(e,t),re(s,t,null),R(e,f),R(e,m),R(m,p),R(p,i),R(p,r),b&&b.m(p,null),R(p,c),w&&w.m(p,null),R(p,d),S&&S.m(p,null),R(m,l),o&&o.m(m,null),_=!0},p(h,a){h[1].mem.used!==null?b?b.p(h,a):(b=es(h),b.c(),b.m(p,c)):b&&(b.d(1),b=null),h[1].mem.max_used!==null?w?w.p(h,a):(w=ts(h),w.c(),w.m(p,d)):w&&(w.d(1),w=null),h[1].mem.total!==null?S?S.p(h,a):(S=is(h),S.c(),S.m(p,null)):S&&(S.d(1),S=null),h[1].mem.used!==null&&h[1].mem.total!==null?o?o.p(h,a):(o=ss(h),o.c(),o.m(m,null)):o&&(o.d(1),o=null)},i(h){_||(N(s.$$.fragment,h),_=!0)},o(h){q(s.$$.fragment,h),_=!1},d(h){h&&W(e),ne(s),b&&b.d(),w&&w.d(),S&&S.d(),o&&o.d()}}}function es(n){let e,t,s=je(n[1].mem.used)+"",f;return{c(){e=P("span"),t=Y("Now "),f=Y(s),D(e,"class","badge rounded-pill bg-primary ms-2")},m(m,p){U(m,e,p),R(e,t),R(e,f)},p(m,p){p&2&&s!==(s=je(m[1].mem.used)+"")&&le(f,s)},d(m){m&&W(e)}}}function ts(n){let e,t,s=je(n[1].mem.max_used)+"",f;return{c(){e=P("span"),t=Y("Max "),f=Y(s),D(e,"class","badge rounded-pill bg-warning ms-2")},m(m,p){U(m,e,p),R(e,t),R(e,f)},p(m,p){p&2&&s!==(s=je(m[1].mem.max_used)+"")&&le(f,s)},d(m){m&&W(e)}}}function is(n){let e,t,s=je(n[1].mem.total)+"",f;return{c(){e=P("span"),t=Y("Limit "),f=Y(s),D(e,"class","badge rounded-pill bg-info ms-2")},m(m,p){U(m,e,p),R(e,t),R(e,f)},p(m,p){p&2&&s!==(s=je(m[1].mem.total)+"")&&le(f,s)},d(m){m&&W(e)}}}function ss(n){let e,t,s=It(n[7])+"",f,m,p,i=n[1].mem.max_used!==null&&rs(n);return{c(){e=P("div"),t=P("div"),f=Y(s),m=Y("%"),p=G(),i&&i.c(),D(t,"class","progress-bar text-white overflow-visible ps-1"),be(t,"width",n[7]+"%"),be(t,"z-index","2"),D(e,"class","progress")},m(r,c){U(r,e,c),R(e,t),R(t,f),R(t,m),R(e,p),i&&i.m(e,null)},p(r,c){c&128&&s!==(s=It(r[7])+"")&&le(f,s),c&128&&be(t,"width",r[7]+"%"),r[1].mem.max_used!==null?i?i.p(r,c):(i=rs(r),i.c(),i.m(e,null)):i&&(i.d(1),i=null)},d(r){r&&W(e),i&&i.d()}}}function rs(n){let e;return{c(){e=P("div"),D(e,"class","progress-bar progress-bar-striped bg-warning"),be(e,"width",n[6]-n[7]+"%")},m(t,s){U(t,e,s)},p(t,s){s&192&&be(e,"width",t[6]-t[7]+"%")},d(t){t&&W(e)}}}function ns(n){var g;let e,t,s,f,m,p,i,r,c,d=je(n[1].net.rx_bytes)+"",l,_,b,w,S=je(n[1].net.tx_bytes)+"",o,h,a;s=new _e({props:{icon:Rn,size:"2x"}});let u=((g=n[1].ports)==null?void 0:g.length)>0&&os(n);return{c(){e=P("div"),t=P("div"),oe(s.$$.fragment),f=G(),m=P("div"),p=P("div"),p.textContent="Network",i=G(),r=P("span"),c=Y(" "),l=Y(d),_=G(),b=P("span"),w=Y(" "),o=Y(S),h=G(),u&&u.c(),D(t,"class","icon-left ms-1 me-3 svelte-n9m8lc"),D(p,"class","mb-1"),D(r,"title","Received Traffic"),D(r,"class","me-3"),D(b,"title","Sent Traffic"),D(m,"class","me-5"),D(e,"class","d-flex mb-3")},m(v,y){U(v,e,y),R(e,t),re(s,t,null),R(e,f),R(e,m),R(m,p),R(m,i),R(m,r),R(r,c),R(r,l),R(m,_),R(m,b),R(b,w),R(b,o),R(e,h),u&&u.m(e,null),a=!0},p(v,y){var E;(!a||y&2)&&d!==(d=je(v[1].net.rx_bytes)+"")&&le(l,d),(!a||y&2)&&S!==(S=je(v[1].net.tx_bytes)+"")&&le(o,S),((E=v[1].ports)==null?void 0:E.length)>0?u?u.p(v,y):(u=os(v),u.c(),u.m(e,null)):u&&(u.d(1),u=null)},i(v){a||(N(s.$$.fragment,v),a=!0)},o(v){q(s.$$.fragment,v),a=!1},d(v){v&&W(e),ne(s),u&&u.d()}}}function os(n){let e,t,s,f=ye(n[1].ports),m=[];for(let p=0;p<f.length;p+=1)m[p]=ls(Vi(n,f,p));return{c(){e=P("div"),t=P("div"),t.textContent="Ports",s=G();for(let p=0;p<m.length;p+=1)m[p].c();D(t,"class","mb-1"),D(e,"class","flex-grow-1")},m(p,i){U(p,e,i),R(e,t),R(e,s);for(let r=0;r<m.length;r+=1)m[r]&&m[r].m(e,null)},p(p,i){if(i&2){f=ye(p[1].ports);let r;for(r=0;r<f.length;r+=1){const c=Vi(p,f,r);m[r]?m[r].p(c,i):(m[r]=ls(c),m[r].c(),m[r].m(e,null))}for(;r<m.length;r+=1)m[r].d(1);m.length=f.length}},d(p){p&&W(e),Ke(m,p)}}}function ls(n){let e,t=n[21]+"",s;return{c(){e=P("span"),s=Y(t),D(e,"class","badge bg-dark me-2")},m(f,m){U(f,e,m),R(e,s)},p(f,m){m&2&&t!==(t=f[21]+"")&&le(s,t)},d(f){f&&W(e)}}}function yo(n){let e,t,s=st(n[1].started_at)+"",f;return{c(){e=P("div"),e.textContent="Started",t=G(),f=Y(s),D(e,"class","fw-bold")},m(m,p){U(m,e,p),U(m,t,p),U(m,f,p)},p(m,p){p&2&&s!==(s=st(m[1].started_at)+"")&&le(f,s)},d(m){m&&(W(e),W(t),W(f))}}}function ko(n){let e,t,s;function f(i,r){return i[1].finished_at<i[1].created_at?Lo:Eo}let m=f(n),p=m(n);return{c(){e=P("div"),e.textContent="Stopped",t=G(),p.c(),s=rt(),D(e,"class","fw-bold")},m(i,r){U(i,e,r),U(i,t,r),p.m(i,r),U(i,s,r)},p(i,r){m===(m=f(i))&&p?p.p(i,r):(p.d(1),p=m(i),p&&(p.c(),p.m(s.parentNode,s)))},d(i){i&&(W(e),W(t),W(s)),p.d(i)}}}function Eo(n){let e=st(n[1].finished_at)+"",t;return{c(){t=Y(e)},m(s,f){U(s,t,f)},p(s,f){f&2&&e!==(e=st(s[1].finished_at)+"")&&le(t,e)},d(s){s&&W(t)}}}function Lo(n){let e;return{c(){e=Y("Never")},m(t,s){U(t,e,s)},p:he,d(t){t&&W(e)}}}function Do(n){let e,t,s=st(n[1].started_at)+"",f;return{c(){e=P("div"),e.textContent="Started",t=G(),f=Y(s),D(e,"class","fw-bold")},m(m,p){U(m,e,p),U(m,t,p),U(m,f,p)},p(m,p){p&2&&s!==(s=st(m[1].started_at)+"")&&le(f,s)},d(m){m&&(W(e),W(t),W(f))}}}function Ro(n){let e,t,s=st(n[1].finished_at)+"",f;return{c(){e=P("div"),e.textContent="Stopped",t=G(),f=Y(s),D(e,"class","fw-bold")},m(m,p){U(m,e,p),U(m,t,p),U(m,f,p)},p(m,p){p&2&&s!==(s=st(m[1].finished_at)+"")&&le(f,s)},d(m){m&&(W(e),W(t),W(f))}}}function as(n){let e,t,s,f,m,p,i,r,c,d,l,_,b,w,S,o,h;s=new _e({props:{icon:Sn,size:"2x"}});let a=ye(Object.entries(n[1].env).sort(us)),u=[];for(let y=0;y<a.length;y+=1)u[y]=cs(qi(n,a,y));let g=ye(Object.entries(n[1].labels).sort(fs)),v=[];for(let y=0;y<g.length;y+=1)v[y]=hs(Ki(n,g,y));return{c(){e=P("div"),t=P("div"),oe(s.$$.fragment),f=G(),m=P("div"),p=P("div"),i=P("table"),r=P("thead"),r.innerHTML='<tr><th scope="col" colspan="2" style="font-weight: normal">Environment Variables</th></tr>',c=G(),d=P("tbody");for(let y=0;y<u.length;y+=1)u[y].c();l=G(),_=P("div"),b=P("table"),w=P("thead"),w.innerHTML='<tr><th scope="col" colspan="2" style="font-weight: normal">Labels</th></tr>',S=G(),o=P("tbody");for(let y=0;y<v.length;y+=1)v[y].c();D(t,"class","icon-left ms-1 me-3 svelte-n9m8lc"),D(i,"class","table table-striped border"),D(b,"class","table table-striped border"),D(m,"class","flex-grow-1 d-lg-flex"),be(m,"font-size","small"),D(e,"class","d-flex mb-3")},m(y,E){U(y,e,E),R(e,t),re(s,t,null),R(e,f),R(e,m),R(m,p),R(p,i),R(i,r),R(i,c),R(i,d);for(let C=0;C<u.length;C+=1)u[C]&&u[C].m(d,null);R(m,l),R(m,_),R(_,b),R(b,w),R(b,S),R(b,o);for(let C=0;C<v.length;C+=1)v[C]&&v[C].m(o,null);h=!0},p(y,E){if(E&2){a=ye(Object.entries(y[1].env).sort(us));let C;for(C=0;C<a.length;C+=1){const k=qi(y,a,C);u[C]?u[C].p(k,E):(u[C]=cs(k),u[C].c(),u[C].m(d,null))}for(;C<u.length;C+=1)u[C].d(1);u.length=a.length}if(E&2){g=ye(Object.entries(y[1].labels).sort(fs));let C;for(C=0;C<g.length;C+=1){const k=Ki(y,g,C);v[C]?v[C].p(k,E):(v[C]=hs(k),v[C].c(),v[C].m(o,null))}for(;C<v.length;C+=1)v[C].d(1);v.length=g.length}},i(y){h||(N(s.$$.fragment,y),h=!0)},o(y){q(s.$$.fragment,y),h=!1},d(y){y&&W(e),ne(s),Ke(u,y),Ke(v,y)}}}function cs(n){let e,t,s=n[15]+"",f,m,p,i=n[16]+"",r,c;return{c(){e=P("tr"),t=P("td"),f=Y(s),m=G(),p=P("td"),r=Y(i),c=G(),D(t,"class","text-end border-end text-break"),D(p,"class","text-break")},m(d,l){U(d,e,l),R(e,t),R(t,f),R(e,m),R(e,p),R(p,r),R(e,c)},p(d,l){l&2&&s!==(s=d[15]+"")&&le(f,s),l&2&&i!==(i=d[16]+"")&&le(r,i)},d(d){d&&W(e)}}}function hs(n){let e,t,s=n[15]+"",f,m,p,i=n[16]+"",r,c;return{c(){e=P("tr"),t=P("td"),f=Y(s),m=G(),p=P("td"),r=Y(i),c=G(),D(t,"class","text-end border-end text-break"),D(p,"class","text-break")},m(d,l){U(d,e,l),R(e,t),R(t,f),R(e,m),R(e,p),R(p,r),R(e,c)},p(d,l){l&2&&s!==(s=d[15]+"")&&le(f,s),l&2&&i!==(i=d[16]+"")&&le(r,i)},d(d){d&&W(e)}}}function Ao(n){let e,t,s,f;const m=[ho,co],p=[];function i(r,c){return r[2]?0:1}return t=i(n),s=p[t]=m[t](n),{c(){e=P("div"),s.c()},m(r,c){U(r,e,c),p[t].m(e,null),f=!0},p(r,[c]){let d=t;t=i(r),t===d?p[t].p(r,c):(ve(),q(p[d],1,1,()=>{p[d]=null}),ge(),s=p[t],s?s.p(r,c):(s=p[t]=m[t](r),s.c()),N(s,1),s.m(e,null))},i(r){f||(N(s),f=!0)},o(r){q(s),f=!1},d(r){r&&W(e),p[t].d()}}}const us=([n],[e])=>n.localeCompare(e),fs=([n],[e])=>n.localeCompare(e);function Bo(n,e,t){let s,f,m,p,{enable_actions:i}=e,{container_id:r}=e,c,d,l=!0,_=null,b;Ht(()=>{r!==c&&(c=r,t(2,l=!0),t(3,_=null),r&&ce.send("get_container_info",{container_id:r}))}),Ge(()=>{window.scrollTo({top:0,behavior:"smooth"}),ce.register("get_container_info",a=>{a.id===r&&(t(1,b=a),t(2,l=!1))},a=>Ce.add({text:a,type:"error"})),ce.register("set_container_state",()=>{t(3,_=null)},a=>Ce.add({text:a,type:"error"})),d=setInterval(()=>{ce.send("get_container_info",{container_id:r})},3e3)}),dt(()=>{clearInterval(d),ce.unregister("get_container_info"),ce.unregister("set_container_state")});function w(a){switch(ce.send("set_container_state",{container_id:r,action:a}),t(3,_=a),a){case"start":Ce.add({text:"Starting container ...",type:"success"});break;case"restart":Ce.add({text:"Restarting container ...",type:"info"});break;case"stop":Ce.add({text:"Stopping container ...",type:"info"});break}}const S=()=>w("restart"),o=()=>w("stop"),h=()=>w("start");return n.$$set=a=>{"enable_actions"in a&&t(0,i=a.enable_actions),"container_id"in a&&t(9,r=a.container_id)},n.$$.update=()=>{var a,u,g,v;n.$$.dirty&2&&t(7,s=((a=b==null?void 0:b.mem)==null?void 0:a.used)*100/((u=b==null?void 0:b.mem)==null?void 0:u.total)),n.$$.dirty&2&&t(6,f=((g=b==null?void 0:b.mem)==null?void 0:g.max_used)*100/((v=b==null?void 0:b.mem)==null?void 0:v.total)),n.$$.dirty&2&&t(5,m=b!=null&&b.image.name.includes(":")?b==null?void 0:b.image.name.slice(0,b==null?void 0:b.image.name.lastIndexOf(":")):b==null?void 0:b.image.name),n.$$.dirty&2&&t(4,p=b!=null&&b.image.name.includes(":")?b==null?void 0:b.image.name.split(":").pop():"latest")},[i,b,l,_,p,m,f,s,w,r,S,o,h]}class Mo extends He{constructor(e){super(),Ie(this,e,Bo,Ao,xe,{enable_actions:0,container_id:9})}}function To({onlyFirst:n=!1}={}){const t=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?(?:\\u0007|\\u001B\\u005C|\\u009C))","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-nq-uy=><~]))"].join("|");return new RegExp(t,n?void 0:"g")}const xo=To();function Oo(n){if(typeof n!="string")throw new TypeError(`Expected a \`string\`, got \`${typeof n}\``);return n.replace(xo,"")}function ds(n,e,t){const s=n.slice();s[13]=e[t];const f=s[13].substring(0,s[13].indexOf(" "));s[14]=f;const m=s[13].substring(s[13].indexOf(" ")+1);return s[15]=m,s}function Po(n){let e,t,s,f,m,p,i,r,c,d,l,_,b,w,S,o,h,a,u,g,v,y,E,C;d=new _e({props:{icon:vn,size:"lg",color:"#666"}}),b=new _e({props:{icon:un,size:"lg",color:"#666"}}),o=new _e({props:{icon:An,size:"lg",color:"#666"}}),u=new _e({props:{icon:_r,size:"lg",color:"#666"}});let k=ye(n[2]),B=[];for(let x=0;x<k.length;x+=1)B[x]=ps(ds(n,k,x));return{c(){e=P("div"),t=P("div"),s=P("select"),f=P("option"),f.textContent="hide timestamps",m=P("option"),m.textContent="local timestamps",p=P("option"),p.textContent="raw timestamps",i=G(),r=P("div"),c=P("button"),oe(d.$$.fragment),l=G(),_=P("button"),oe(b.$$.fragment),w=G(),S=P("button"),oe(o.$$.fragment),h=G(),a=P("button"),oe(u.$$.fragment),g=G(),v=P("pre");for(let x=0;x<B.length;x+=1)B[x].c();f.__value="off",Ye(f,f.__value),m.__value="local",Ye(m,m.__value),p.__value="raw",Ye(p,p.__value),D(s,"class","form-select"),n[3]===void 0&&Te(()=>n[7].call(s)),D(c,"type","button"),D(c,"class","btn mx-1"),D(c,"title","Scroll to Top"),D(_,"type","button"),D(_,"class","btn mx-1"),D(_,"title","Scroll to Bottom"),D(S,"type","button"),D(S,"class","btn mx-1"),D(S,"title","Download shown log lines"),D(a,"type","button"),D(a,"class","btn mx-1"),D(a,"title","Fullscreen"),D(e,"class","d-flex justify-content-between align-items-center mb-2"),D(v,"class","mb-0 svelte-itlo0b")},m(x,M){U(x,e,M),R(e,t),R(t,s),R(s,f),R(s,m),R(s,p),Ai(s,n[3],!0),R(e,i),R(e,r),R(r,c),re(d,c,null),R(r,l),R(r,_),re(b,_,null),R(r,w),R(r,S),re(o,S,null),R(r,h),R(r,a),re(u,a,null),U(x,g,M),U(x,v,M);for(let O=0;O<B.length;O+=1)B[O]&&B[O].m(v,null);n[10](v),y=!0,E||(C=[pe(s,"change",n[7]),pe(c,"click",n[8]),pe(_,"click",n[9]),pe(S,"click",n[5]),pe(a,"click",n[4])],E=!0)},p(x,M){if(M&8&&Ai(s,x[3]),M&12){k=ye(x[2]);let O;for(O=0;O<k.length;O+=1){const j=ds(x,k,O);B[O]?B[O].p(j,M):(B[O]=ps(j),B[O].c(),B[O].m(v,null))}for(;O<B.length;O+=1)B[O].d(1);B.length=k.length}},i(x){y||(N(d.$$.fragment,x),N(b.$$.fragment,x),N(o.$$.fragment,x),N(u.$$.fragment,x),y=!0)},o(x){q(d.$$.fragment,x),q(b.$$.fragment,x),q(o.$$.fragment,x),q(u.$$.fragment,x),y=!1},d(x){x&&(W(e),W(g),W(v)),ne(d),ne(b),ne(o),ne(u),Ke(B,x),n[10](null),E=!1,Ve(C)}}}function Io(n){let e;return{c(){e=P("p"),e.textContent="No Log Output yet ..."},m(t,s){U(t,e,s)},p:he,i:he,o:he,d(t){t&&W(e)}}}function Ho(n){let e;return{c(){e=P("div"),e.innerHTML='<strong>Loading...</strong> <div class="spinner-border ms-auto" role="status" aria-hidden="true"></div>',D(e,"class","d-flex align-items-center")},m(t,s){U(t,e,s)},p:he,i:he,o:he,d(t){t&&W(e)}}}function _s(n){let e,t;function s(p,i){return p[3]==="local"?Fo:$o}let f=s(n),m=f(n);return{c(){e=P("time"),m.c(),D(e,"datetime",t=n[14]),D(e,"class","me-1 px-1 svelte-itlo0b")},m(p,i){U(p,e,i),m.m(e,null)},p(p,i){f===(f=s(p))&&m?m.p(p,i):(m.d(1),m=f(p),m&&(m.c(),m.m(e,null))),i&4&&t!==(t=p[14])&&D(e,"datetime",t)},d(p){p&&W(e),m.d()}}}function $o(n){let e=n[14]+"",t;return{c(){t=Y(e)},m(s,f){U(s,t,f)},p(s,f){f&4&&e!==(e=s[14]+"")&&le(t,e)},d(s){s&&W(t)}}}function Fo(n){let e=ms(n[14])+"",t;return{c(){t=Y(e)},m(s,f){U(s,t,f)},p(s,f){f&4&&e!==(e=ms(s[14])+"")&&le(t,e)},d(s){s&&W(t)}}}function ps(n){let e,t,s=n[15]+"",f,m=n[3]!=="off"&&_s(n);return{c(){e=P("span"),m&&m.c(),t=P("span"),f=Y(s),D(t,"class","pe-3"),D(e,"class","pe-3 svelte-itlo0b")},m(p,i){U(p,e,i),m&&m.m(e,null),R(e,t),R(t,f)},p(p,i){p[3]!=="off"?m?m.p(p,i):(m=_s(p),m.c(),m.m(e,t)):m&&(m.d(1),m=null),i&4&&s!==(s=p[15]+"")&&le(f,s)},d(p){p&&W(e),m&&m.d()}}}function zo(n){let e,t,s,f;const m=[Ho,Io,Po],p=[];function i(r,c){return r[1]?0:r[2].length===0?1:2}return t=i(n),s=p[t]=m[t](n),{c(){e=P("div"),s.c()},m(r,c){U(r,e,c),p[t].m(e,null),f=!0},p(r,[c]){let d=t;t=i(r),t===d?p[t].p(r,c):(ve(),q(p[d],1,1,()=>{p[d]=null}),ge(),s=p[t],s?s.p(r,c):(s=p[t]=m[t](r),s.c()),N(s,1),s.m(e,null))},i(r){f||(N(s),f=!0)},o(r){q(s),f=!1},d(r){r&&W(e),p[t].d()}}}function ms(n){return new Date(n).toLocaleDateString(void 0,{weekday:"short",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})}function No(n,e,t){let{container_id:s}=e,f,m,p,i=!0,r=[],c="local";Ht(()=>{s!==f&&(f=s,t(1,i=!0),t(2,r=[]),s&&ce.send("get_container_logs",{container_id:s}))}),Ge(()=>{ce.register("get_container_logs",o=>{if(t(1,i=!1),(o==null?void 0:o.length)>0){let h=!r||m&&m.scrollTop>=m.scrollHeight-m.clientHeight;const a=r.length+o.length;a>5e3&&r.slice(a-5e3),r.push(...o.map(u=>Oo(u))),h&&ar().then(()=>t(0,m.scrollTop=m.scrollHeight,m))}},o=>Ce.add({text:o,type:"error"})),p=setInterval(()=>{ce.send("get_container_logs",{container_id:s,onlynew:!0})},3e3)}),dt(()=>{clearInterval(p),ce.unregister("get_container_logs")});function d(){m!=null&&m.requestFullscreen&&m.requestFullscreen({navigationUI:"show"})}function l(){br(new Blob(r,{type:"text/plain"}),s+".log")}function _(){c=Or(this),t(3,c)}const b=()=>t(0,m.scrollTop=0,m),w=()=>t(0,m.scrollTop=m.scrollHeight,m);function S(o){ft[o?"unshift":"push"](()=>{m=o,t(0,m)})}return n.$$set=o=>{"container_id"in o&&t(6,s=o.container_id)},[m,i,r,c,d,l,s,_,b,w,S]}class Wo extends He{constructor(e){super(),Ie(this,e,No,zo,xe,{container_id:6})}}const Uo=n=>({}),vs=n=>({});function jo(n){let e,t;return e=new _e({props:{icon:Ln}}),{c(){oe(e.$$.fragment)},m(s,f){re(e,s,f),t=!0},p:he,i(s){t||(N(e.$$.fragment,s),t=!0)},o(s){q(e.$$.fragment,s),t=!1},d(s){ne(e,s)}}}function Ko(n){let e,t,s,f,m,p;const i=n[2].button,r=Kt(i,n,n[1],vs),c=r||jo(),d=n[2].default,l=Kt(d,n,n[1],null);return{c(){e=P("div"),t=P("button"),c&&c.c(),f=G(),m=P("ul"),l&&l.c(),D(t,"class",s="btn btn-"+n[0]+" dropdown-toggle svelte-17q1qz7"),D(t,"type","button"),D(m,"class","dropdown-menu svelte-17q1qz7"),D(e,"class","dropdown")},m(_,b){U(_,e,b),R(e,t),c&&c.m(t,null),R(e,f),R(e,m),l&&l.m(m,null),p=!0},p(_,[b]){r&&r.p&&(!p||b&2)&&Vt(r,i,_,_[1],p?qt(i,_[1],b,Uo):Gt(_[1]),vs),(!p||b&1&&s!==(s="btn btn-"+_[0]+" dropdown-toggle svelte-17q1qz7"))&&D(t,"class",s),l&&l.p&&(!p||b&2)&&Vt(l,d,_,_[1],p?qt(d,_[1],b,null):Gt(_[1]),null)},i(_){p||(N(c,_),N(l,_),p=!0)},o(_){q(c,_),q(l,_),p=!1},d(_){_&&W(e),c&&c.d(_),l&&l.d(_)}}}function qo(n,e,t){let{$$slots:s={},$$scope:f}=e,{btnClass:m="secondary"}=e;return n.$$set=p=>{"btnClass"in p&&t(0,m=p.btnClass),"$$scope"in p&&t(1,f=p.$$scope)},[m,f,s]}class Sr extends He{constructor(e){super(),Ie(this,e,qo,Ko,xe,{btnClass:0})}}function Vo(n){let e,t,s,f,m;const p=n[2].default,i=Kt(p,n,n[1],null);return{c(){e=P("li"),t=P("button"),i&&i.c(),D(t,"class","dropdown-item"),D(t,"type","button"),ie(t,"active",n[0])},m(r,c){U(r,e,c),R(e,t),i&&i.m(t,null),s=!0,f||(m=pe(t,"click",n[3]),f=!0)},p(r,[c]){i&&i.p&&(!s||c&2)&&Vt(i,p,r,r[1],s?qt(p,r[1],c,null):Gt(r[1]),null),(!s||c&1)&&ie(t,"active",r[0])},i(r){s||(N(i,r),s=!0)},o(r){q(i,r),s=!1},d(r){r&&W(e),i&&i.d(r),f=!1,m()}}}function Go(n,e,t){let{$$slots:s={},$$scope:f}=e,{active:m=!1}=e;function p(i){$r.call(this,n,i)}return n.$$set=i=>{"active"in i&&t(0,m=i.active),"$$scope"in i&&t(1,f=i.$$scope)},[m,f,s,p]}class ui extends He{constructor(e){super(),Ie(this,e,Go,Vo,xe,{active:0})}}function gs(n,e,t){const s=n.slice();return s[22]=e[t],s}function bs(n,e,t){const s=n.slice();return s[25]=e[t],s}function Ss(n,e,t){const s=n.slice();return s[28]=e[t],s}function Xo(n){var O,j;let e,t,s,f,m,p,i,r,c,d,l,_,b,w,S,o,h,a,u,g,v;m=new _e({props:{icon:Mn}}),r=new _e({props:{icon:vr}});let y=ye(n[7]()),E=[];for(let $=0;$<y.length;$+=1)E[$]=Cs(Ss(n,y,$));let C=n[1]&&ws(n),k=((j=(O=n[6])==null?void 0:O.mounts)==null?void 0:j.length)>0&&ys(n),B=ye(n[5]||[]),x=[];for(let $=0;$<B.length;$+=1)x[$]=Ds(gs(n,B,$));const M=$=>q(x[$],1,1,()=>{x[$]=null});return{c(){e=P("div"),t=P("div"),s=P("div"),f=P("button"),oe(m.$$.fragment),p=G(),i=P("button"),oe(r.$$.fragment),c=G(),d=P("div");for(let $=0;$<E.length;$+=1)E[$].c();l=G(),_=P("div"),C&&C.c(),b=G(),k&&k.c(),w=G(),S=P("table"),o=P("thead"),o.innerHTML='<tr><th scope="col">Name</th> <th scope="col" class="text-end">Size</th> <th scope="col" class="text-center">Owner</th> <th scope="col" class="text-center">Modified</th> <th scope="col" class="text-center">Permissions</th></tr>',h=G(),a=P("tbody");for(let $=0;$<x.length;$+=1)x[$].c();D(f,"type","button"),D(f,"class","btn btn-outline-primary"),D(i,"type","button"),D(i,"class","btn btn-outline-primary"),D(s,"class","btn-group me-1"),D(d,"class","btn-group mx-2"),D(d,"role","group"),D(t,"class","d-flex"),D(_,"class","d-flex"),D(e,"class","d-flex justify-content-between align-items-center"),D(S,"class","table table-hover")},m($,V){U($,e,V),R(e,t),R(t,s),R(s,f),re(m,f,null),R(s,p),R(s,i),re(r,i,null),R(t,c),R(t,d);for(let F=0;F<E.length;F+=1)E[F]&&E[F].m(d,null);R(e,l),R(e,_),C&&C.m(_,null),R(_,b),k&&k.m(_,null),U($,w,V),U($,S,V),R(S,o),R(S,h),R(S,a);for(let F=0;F<x.length;F+=1)x[F]&&x[F].m(a,null);u=!0,g||(v=[pe(f,"click",n[14]),pe(i,"click",n[15])],g=!0)},p($,V){var F,L;if(V[0]&640){y=ye($[7]());let T;for(T=0;T<y.length;T+=1){const H=Ss($,y,T);E[T]?E[T].p(H,V):(E[T]=Cs(H),E[T].c(),E[T].m(d,null))}for(;T<E.length;T+=1)E[T].d(1);E.length=y.length}if($[1]?C?(C.p($,V),V[0]&2&&N(C,1)):(C=ws($),C.c(),N(C,1),C.m(_,b)):C&&(ve(),q(C,1,1,()=>{C=null}),ge()),((L=(F=$[6])==null?void 0:F.mounts)==null?void 0:L.length)>0?k?(k.p($,V),V[0]&64&&N(k,1)):(k=ys($),k.c(),N(k,1),k.m(_,null)):k&&(ve(),q(k,1,1,()=>{k=null}),ge()),V[0]&1313){B=ye($[5]||[]);let T;for(T=0;T<B.length;T+=1){const H=gs($,B,T);x[T]?(x[T].p(H,V),N(x[T],1)):(x[T]=Ds(H),x[T].c(),N(x[T],1),x[T].m(a,null))}for(ve(),T=B.length;T<x.length;T+=1)M(T);ge()}},i($){if(!u){N(m.$$.fragment,$),N(r.$$.fragment,$),N(C),N(k);for(let V=0;V<B.length;V+=1)N(x[V]);u=!0}},o($){q(m.$$.fragment,$),q(r.$$.fragment,$),q(C),q(k),x=x.filter(Boolean);for(let V=0;V<x.length;V+=1)q(x[V]);u=!1},d($){$&&(W(e),W(w),W(S)),ne(m),ne(r),Ke(E,$),C&&C.d(),k&&k.d(),Ke(x,$),g=!1,Ve(v)}}}function Zo(n){let e;return{c(){e=P("div"),e.innerHTML='<strong>Loading...</strong> <div class="spinner-border ms-auto" role="status" aria-hidden="true"></div>',D(e,"class","d-flex align-items-center")},m(t,s){U(t,e,s)},p:he,i:he,o:he,d(t){t&&W(e)}}}function Cs(n){let e,t=(n[28].segment||"/")+"",s,f,m;function p(){return n[16](n[28])}return{c(){e=P("button"),s=Y(t),D(e,"type","button"),D(e,"class","btn btn-secondary border-dark")},m(i,r){U(i,e,r),R(e,s),f||(m=pe(e,"click",p),f=!0)},p(i,r){n=i,r[0]&128&&t!==(t=(n[28].segment||"/")+"")&&le(s,t)},d(i){i&&W(e),f=!1,m()}}}function ws(n){let e,t,s,f,m,p;return e=new Sr({props:{btnClass:"outline-primary",$$slots:{button:[el],default:[Qo]},$$scope:{ctx:n}}}),{c(){oe(e.$$.fragment),t=G(),s=P("input"),D(s,"type","file"),be(s,"display","none")},m(i,r){re(e,i,r),U(i,t,r),U(i,s,r),n[18](s),f=!0,m||(p=pe(s,"change",n[12]),m=!0)},p(i,r){const c={};r[0]&8|r[1]&1&&(c.$$scope={dirty:r,ctx:i}),e.$set(c)},i(i){f||(N(e.$$.fragment,i),f=!0)},o(i){q(e.$$.fragment,i),f=!1},d(i){i&&(W(t),W(s)),ne(e,i),n[18](null),m=!1,p()}}}function Jo(n){let e;return{c(){e=Y("Add Folder")},m(t,s){U(t,e,s)},d(t){t&&W(e)}}}function Yo(n){let e;return{c(){e=Y("Upload File")},m(t,s){U(t,e,s)},d(t){t&&W(e)}}}function Qo(n){let e,t,s,f;return e=new ui({props:{$$slots:{default:[Jo]},$$scope:{ctx:n}}}),e.$on("click",n[11]),s=new ui({props:{$$slots:{default:[Yo]},$$scope:{ctx:n}}}),s.$on("click",n[17]),{c(){oe(e.$$.fragment),t=G(),oe(s.$$.fragment)},m(m,p){re(e,m,p),U(m,t,p),re(s,m,p),f=!0},p(m,p){const i={};p[1]&1&&(i.$$scope={dirty:p,ctx:m}),e.$set(i);const r={};p[1]&1&&(r.$$scope={dirty:p,ctx:m}),s.$set(r)},i(m){f||(N(e.$$.fragment,m),N(s.$$.fragment,m),f=!0)},o(m){q(e.$$.fragment,m),q(s.$$.fragment,m),f=!1},d(m){m&&W(t),ne(e,m),ne(s,m)}}}function el(n){let e,t,s,f;return t=new _e({props:{icon:In}}),{c(){e=P("span"),oe(t.$$.fragment),s=Y(" Add"),D(e,"slot","button"),D(e,"class","me-1")},m(m,p){U(m,e,p),re(t,e,null),R(e,s),f=!0},p:he,i(m){f||(N(t.$$.fragment,m),f=!0)},o(m){q(t.$$.fragment,m),f=!1},d(m){m&&W(e),ne(t)}}}function ys(n){let e,t,s;return t=new Sr({props:{$$slots:{button:[sl],default:[il]},$$scope:{ctx:n}}}),{c(){e=P("div"),oe(t.$$.fragment),D(e,"class","ms-4")},m(f,m){U(f,e,m),re(t,e,null),s=!0},p(f,m){const p={};m[0]&64|m[1]&1&&(p.$$scope={dirty:m,ctx:f}),t.$set(p)},i(f){s||(N(t.$$.fragment,f),s=!0)},o(f){q(t.$$.fragment,f),s=!1},d(f){f&&W(e),ne(t)}}}function ks(n){let e;return{c(){e=P("span"),e.textContent="readonly",D(e,"class","badge bg-warning ms-2")},m(t,s){U(t,e,s)},d(t){t&&W(e)}}}function tl(n){let e,t,s=n[25].destination+"",f,m,p,i,r,c=n[25].type+"",d,l,_=n[25].readonly&&ks();return{c(){e=P("div"),t=P("span"),f=Y(s),m=G(),p=P("span"),_&&_.c(),i=G(),r=P("span"),d=Y(c),l=G(),D(r,"class","badge bg-secondary ms-2"),D(e,"class","d-flex justify-content-between align-items-center")},m(b,w){U(b,e,w),R(e,t),R(t,f),R(e,m),R(e,p),_&&_.m(p,null),R(p,i),R(p,r),R(r,d),U(b,l,w)},p(b,w){w[0]&64&&s!==(s=b[25].destination+"")&&le(f,s),b[25].readonly?_||(_=ks(),_.c(),_.m(p,i)):_&&(_.d(1),_=null),w[0]&64&&c!==(c=b[25].type+"")&&le(d,c)},d(b){b&&(W(e),W(l)),_&&_.d()}}}function Es(n){let e,t;function s(){return n[19](n[25])}return e=new ui({props:{$$slots:{default:[tl]},$$scope:{ctx:n}}}),e.$on("click",s),{c(){oe(e.$$.fragment)},m(f,m){re(e,f,m),t=!0},p(f,m){n=f;const p={};m[0]&64|m[1]&1&&(p.$$scope={dirty:m,ctx:n}),e.$set(p)},i(f){t||(N(e.$$.fragment,f),t=!0)},o(f){q(e.$$.fragment,f),t=!1},d(f){ne(e,f)}}}function il(n){let e,t,s=ye(n[6].mounts),f=[];for(let p=0;p<s.length;p+=1)f[p]=Es(bs(n,s,p));const m=p=>q(f[p],1,1,()=>{f[p]=null});return{c(){for(let p=0;p<f.length;p+=1)f[p].c();e=rt()},m(p,i){for(let r=0;r<f.length;r+=1)f[r]&&f[r].m(p,i);U(p,e,i),t=!0},p(p,i){if(i[0]&576){s=ye(p[6].mounts);let r;for(r=0;r<s.length;r+=1){const c=bs(p,s,r);f[r]?(f[r].p(c,i),N(f[r],1)):(f[r]=Es(c),f[r].c(),N(f[r],1),f[r].m(e.parentNode,e))}for(ve(),r=s.length;r<f.length;r+=1)m(r);ge()}},i(p){if(!t){for(let i=0;i<s.length;i+=1)N(f[i]);t=!0}},o(p){f=f.filter(Boolean);for(let i=0;i<f.length;i+=1)q(f[i]);t=!1},d(p){p&&W(e),Ke(f,p)}}}function sl(n){let e,t,s,f;return t=new _e({props:{icon:kn}}),{c(){e=P("span"),oe(t.$$.fragment),s=Y(" Volumes"),D(e,"slot","button"),D(e,"class","me-1")},m(m,p){U(m,e,p),re(t,e,null),R(e,s),f=!0},p:he,i(m){f||(N(t.$$.fragment,m),f=!0)},o(m){q(t.$$.fragment,m),f=!1},d(m){m&&W(e),ne(t)}}}function rl(n){let e=n[22].type+"",t;return{c(){t=Y(e)},m(s,f){U(s,t,f)},p(s,f){f[0]&32&&e!==(e=s[22].type+"")&&le(t,e)},i:he,o:he,d(s){s&&W(t)}}}function nl(n){let e,t;return e=new _e({props:{icon:cn,size:"lg",color:"#B36"}}),{c(){oe(e.$$.fragment)},m(s,f){re(e,s,f),t=!0},p:he,i(s){t||(N(e.$$.fragment,s),t=!0)},o(s){q(e.$$.fragment,s),t=!1},d(s){ne(e,s)}}}function ol(n){let e,t;return e=new _e({props:{icon:On,size:"lg",color:"#36B"}}),{c(){oe(e.$$.fragment)},m(s,f){re(e,s,f),t=!0},p:he,i(s){t||(N(e.$$.fragment,s),t=!0)},o(s){q(e.$$.fragment,s),t=!1},d(s){ne(e,s)}}}function ll(n){let e,t;return e=new _e({props:{icon:fn,size:"lg",color:"#3B6"}}),{c(){oe(e.$$.fragment)},m(s,f){re(e,s,f),t=!0},p:he,i(s){t||(N(e.$$.fragment,s),t=!0)},o(s){q(e.$$.fragment,s),t=!1},d(s){ne(e,s)}}}function Ls(n){let e=n[22].filesize+"",t;return{c(){t=Y(e)},m(s,f){U(s,t,f)},p(s,f){f[0]&32&&e!==(e=s[22].filesize+"")&&le(t,e)},d(s){s&&W(t)}}}function Ds(n){let e,t,s,f,m,p,i,r=n[22].name+"",c,d,l,_,b,w=n[22].owner+"",S,o,h,a=n[22].group+"",u,g,v,y=n[22].modtime+"",E,C,k,B=n[22].permissions+"",x,M,O,j,$;const V=[ll,ol,nl,rl],F=[];function L(I,X){return I[22].type==="d"?0:I[22].type==="f"?1:I[22].type==="l"?2:3}s=L(n),f=F[s]=V[s](n);let T=n[22].type==="f"&&Ls(n);function H(){return n[20](n[22])}return{c(){e=P("tr"),t=P("td"),f.c(),m=G(),p=P("wbr"),i=G(),c=Y(r),d=G(),l=P("td"),T&&T.c(),_=G(),b=P("td"),S=Y(w),o=G(),h=P("wbr"),u=Y(a),g=G(),v=P("td"),E=Y(y),C=G(),k=P("td"),x=Y(B),M=G(),D(l,"class","text-end"),be(l,"word-break","break-all"),D(b,"class","text-center"),D(v,"class","text-center"),D(k,"class","text-center font-monospace"),be(k,"word-break","break-all"),D(e,"class","svelte-1hbb9tz"),ie(e,"clickable",n[22].type==="d"||n[0])},m(I,X){U(I,e,X),R(e,t),F[s].m(t,null),R(t,m),R(t,p),R(t,i),R(t,c),R(e,d),R(e,l),T&&T.m(l,null),R(e,_),R(e,b),R(b,S),R(b,o),R(b,h),R(b,u),R(e,g),R(e,v),R(v,E),R(e,C),R(e,k),R(k,x),R(e,M),O=!0,j||($=pe(e,"click",H),j=!0)},p(I,X){n=I;let J=s;s=L(n),s===J?F[s].p(n,X):(ve(),q(F[J],1,1,()=>{F[J]=null}),ge(),f=F[s],f?f.p(n,X):(f=F[s]=V[s](n),f.c()),N(f,1),f.m(t,m)),(!O||X[0]&32)&&r!==(r=n[22].name+"")&&le(c,r),n[22].type==="f"?T?T.p(n,X):(T=Ls(n),T.c(),T.m(l,null)):T&&(T.d(1),T=null),(!O||X[0]&32)&&w!==(w=n[22].owner+"")&&le(S,w),(!O||X[0]&32)&&a!==(a=n[22].group+"")&&le(u,a),(!O||X[0]&32)&&y!==(y=n[22].modtime+"")&&le(E,y),(!O||X[0]&32)&&B!==(B=n[22].permissions+"")&&le(x,B),(!O||X[0]&33)&&ie(e,"clickable",n[22].type==="d"||n[0])},i(I){O||(N(f),O=!0)},o(I){q(f),O=!1},d(I){I&&W(e),F[s].d(),T&&T.d(),j=!1,$()}}}function al(n){let e,t,s,f;const m=[Zo,Xo],p=[];function i(r,c){return r[4]?0:1}return t=i(n),s=p[t]=m[t](n),{c(){e=P("div"),s.c(),be(e,"overflow-x","auto")},m(r,c){U(r,e,c),p[t].m(e,null),f=!0},p(r,c){let d=t;t=i(r),t===d?p[t].p(r,c):(ve(),q(p[d],1,1,()=>{p[d]=null}),ge(),s=p[t],s?s.p(r,c):(s=p[t]=m[t](r),s.c()),N(s,1),s.m(e,null))},i(r){f||(N(s),f=!0)},o(r){q(s),f=!1},d(r){r&&W(e),p[t].d()}}}function cl(n,e,t){let s,{container_id:f}=e,{allow_download:m}=e,{allow_upload:p}=e,i,r=!0,c,d="/",l=null,_=null;Ht(()=>{f!==c&&(c=f,t(4,r=!0),t(2,d="/"),t(5,l=null),t(6,_=null),f&&ce.send("get_filesystem_info",{container_id:f}))}),Ge(()=>{ce.register("get_filesystem_info",k=>{w(k.workdir),t(6,_=k)},k=>Ce.add({text:k,type:"error"})),ce.register("get_directory_list",k=>{window.scrollTo({top:0,behavior:"smooth"}),t(5,l=k.entries),t(2,d=k.path),t(4,r=!1)},k=>{Ce.add({text:k,type:"error"}),t(5,l=null),t(4,r=!1)}),ce.register("download_file",k=>{br(k.blob,k.payload.path.split("/").pop())},k=>Ce.add({text:k,type:"error"})),ce.register("create_folder",()=>{w(d)},k=>Ce.add({text:k,type:"error"})),ce.register("upload_file",()=>{w(d)},k=>Ce.add({text:k,type:"error"}))}),dt(()=>{ce.unregister("get_filesystem_info"),ce.unregister("get_directory_list"),ce.unregister("create_folder"),ce.unregister("upload_file"),ce.unregister("download_file")});function b(k){let B=d;B.endsWith("/")||(B+="/"),B+=k,w(B)}function w(k){t(2,d=k),ce.send("get_directory_list",{container_id:f,path:k}),t(4,r=!0),t(5,l=null)}function S(k){m&&ce.send("download_file",{container_id:f,path:`${d}/${k}`})}function o(){const k=prompt("Folder name:");k&&ce.send("create_folder",{container_id:f,path:`${d}/${k}`})}async function h(){const k=x=>new Promise((M,O)=>{const j=new FileReader;j.readAsDataURL(x),j.onload=()=>M(j.result.split(",")[1]),j.onerror=$=>O($)}),B=i.files[0];confirm(`Upload file "${B.name}"?`)&&ce.send("upload_file",{container_id:f,path:`${d}/${B.name}`,content:await k(B)})}const a=()=>w(_.workdir),u=()=>w(d),g=k=>w(k.totalPath),v=()=>i.click();function y(k){ft[k?"unshift":"push"](()=>{i=k,t(3,i)})}const E=k=>w(k.destination),C=k=>k.type==="d"?b(k.name):S(k.name);return n.$$set=k=>{"container_id"in k&&t(13,f=k.container_id),"allow_download"in k&&t(0,m=k.allow_download),"allow_upload"in k&&t(1,p=k.allow_upload)},n.$$.update=()=>{n.$$.dirty[0]&4&&t(7,s=()=>{const k=[],B=d.split("/");let x="";for(const M of B)M&&(x+="/"+M,k.push({segment:M,totalPath:x}));return k.unshift({segment:"/",totalPath:"/"}),k})},[m,p,d,i,r,l,_,s,b,w,S,o,h,f,a,u,g,v,y,E,C]}class hl extends He{constructor(e){super(),Ie(this,e,cl,al,xe,{container_id:13,allow_download:0,allow_upload:1},null,[-1,-1])}}function Rs(n,e,t){const s=n.slice();return s[7]=e[t],s}function As(n,e,t){const s=n.slice();return s[10]=e[t],s[12]=t,s}function ul(n){let e,t,s,f,m,p=ye(n[1]||[]),i=[];for(let c=0;c<p.length;c+=1)i[c]=Os(Rs(n,p,c));const r=c=>q(i[c],1,1,()=>{i[c]=null});return{c(){e=P("table"),t=P("thead"),t.innerHTML='<tr><th scope="col" class="text-end" title="Process ID">PID</th> <th scope="col" class="text-end" title="Processor Usage">CPU</th> <th scope="col" class="text-end">Memory</th> <th scope="col" class="text-center">Started At</th> <th scope="col" class="text-center">User</th> <th scope="col" class="text-start">Command</th></tr>',s=G(),f=P("tbody");for(let c=0;c<i.length;c+=1)i[c].c();D(e,"class","table table-striped")},m(c,d){U(c,e,d),R(e,t),R(e,s),R(e,f);for(let l=0;l<i.length;l+=1)i[l]&&i[l].m(f,null);m=!0},p(c,d){if(d&2){p=ye(c[1]||[]);let l;for(l=0;l<p.length;l+=1){const _=Rs(c,p,l);i[l]?(i[l].p(_,d),N(i[l],1)):(i[l]=Os(_),i[l].c(),N(i[l],1),i[l].m(f,null))}for(ve(),l=p.length;l<i.length;l+=1)r(l);ge()}},i(c){if(!m){for(let d=0;d<p.length;d+=1)N(i[d]);m=!0}},o(c){i=i.filter(Boolean);for(let d=0;d<i.length;d+=1)q(i[d]);m=!1},d(c){c&&W(e),Ke(i,c)}}}function fl(n){let e;return{c(){e=P("div"),e.innerHTML='<strong>Loading...</strong> <div class="spinner-border ms-auto" role="status" aria-hidden="true"></div>',D(e,"class","d-flex align-items-center")},m(t,s){U(t,e,s)},p:he,i:he,o:he,d(t){t&&W(e)}}}function Bs(n){let e=n[7]["%cpu"]+"",t,s;return{c(){t=Y(e),s=Y("%")},m(f,m){U(f,t,m),U(f,s,m)},p(f,m){m&2&&e!==(e=f[7]["%cpu"]+"")&&le(t,e)},d(f){f&&(W(t),W(s))}}}function Ms(n){let e=n[7]["%mem"]+"",t,s;return{c(){t=Y(e),s=Y("%")},m(f,m){U(f,t,m),U(f,s,m)},p(f,m){m&2&&e!==(e=f[7]["%mem"]+"")&&le(t,e)},d(f){f&&(W(t),W(s))}}}function Ts(n){let e,t;return e=new _e({props:{icon:Nn,rotate:90}}),{c(){oe(e.$$.fragment)},m(s,f){re(e,s,f),t=!0},i(s){t||(N(e.$$.fragment,s),t=!0)},o(s){q(e.$$.fragment,s),t=!1},d(s){ne(e,s)}}}function xs(n){let e,t=parseInt(n[7].level)===n[12]+1,s,f=t&&Ts();return{c(){e=P("div"),f&&f.c(),be(e,"width","2rem"),D(e,"class","me-2 d-flex justify-content-end align-items-center")},m(m,p){U(m,e,p),f&&f.m(e,null),s=!0},p(m,p){p&2&&(t=parseInt(m[7].level)===m[12]+1),t?f?p&2&&N(f,1):(f=Ts(),f.c(),N(f,1),f.m(e,null)):f&&(ve(),q(f,1,1,()=>{f=null}),ge())},i(m){s||(N(f),s=!0)},o(m){q(f),s=!1},d(m){m&&W(e),f&&f.d()}}}function Os(n){let e,t,s=n[7].pid+"",f,m,p,i=ut(n[7]["%cpu"],null),r,c,d=ut(n[7]["%mem"],null),l,_,b=ut(n[7].stime,"")+"",w,S,o,h=ut(n[7].user,"")+"",a,u,g,v,y,E,C=n[7].command+"",k,B,x,M=i&&Bs(n),O=d&&Ms(n),j=ye(Array(n[7].level)),$=[];for(let F=0;F<j.length;F+=1)$[F]=xs(As(n,j,F));const V=F=>q($[F],1,1,()=>{$[F]=null});return{c(){e=P("tr"),t=P("td"),f=Y(s),m=G(),p=P("td"),M&&M.c(),r=G(),c=P("td"),O&&O.c(),l=G(),_=P("td"),w=Y(b),S=G(),o=P("td"),a=Y(h),u=G(),g=P("td"),v=P("div");for(let F=0;F<$.length;F+=1)$[F].c();y=G(),E=P("div"),k=Y(C),B=G(),D(t,"class","text-end"),D(p,"class","text-end"),D(c,"class","text-end"),D(_,"class","text-center"),D(o,"class","text-center"),D(E,"class","font-monospace"),D(v,"class","d-flex"),D(g,"class","text-start")},m(F,L){U(F,e,L),R(e,t),R(t,f),R(e,m),R(e,p),M&&M.m(p,null),R(e,r),R(e,c),O&&O.m(c,null),R(e,l),R(e,_),R(_,w),R(e,S),R(e,o),R(o,a),R(e,u),R(e,g),R(g,v);for(let T=0;T<$.length;T+=1)$[T]&&$[T].m(v,null);R(v,y),R(v,E),R(E,k),R(e,B),x=!0},p(F,L){if((!x||L&2)&&s!==(s=F[7].pid+"")&&le(f,s),L&2&&(i=ut(F[7]["%cpu"],null)),i?M?M.p(F,L):(M=Bs(F),M.c(),M.m(p,null)):M&&(M.d(1),M=null),L&2&&(d=ut(F[7]["%mem"],null)),d?O?O.p(F,L):(O=Ms(F),O.c(),O.m(c,null)):O&&(O.d(1),O=null),(!x||L&2)&&b!==(b=ut(F[7].stime,"")+"")&&le(w,b),(!x||L&2)&&h!==(h=ut(F[7].user,"")+"")&&le(a,h),L&2){j=ye(Array(F[7].level));let T;for(T=0;T<j.length;T+=1){const H=As(F,j,T);$[T]?($[T].p(H,L),N($[T],1)):($[T]=xs(H),$[T].c(),N($[T],1),$[T].m(v,y))}for(ve(),T=j.length;T<$.length;T+=1)V(T);ge()}(!x||L&2)&&C!==(C=F[7].command+"")&&le(k,C)},i(F){if(!x){for(let L=0;L<j.length;L+=1)N($[L]);x=!0}},o(F){$=$.filter(Boolean);for(let L=0;L<$.length;L+=1)q($[L]);x=!1},d(F){F&&W(e),M&&M.d(),O&&O.d(),Ke($,F)}}}function dl(n){let e,t,s,f;const m=[fl,ul],p=[];function i(r,c){return r[0]?0:1}return t=i(n),s=p[t]=m[t](n),{c(){e=P("div"),s.c(),be(e,"overflow-x","auto")},m(r,c){U(r,e,c),p[t].m(e,null),f=!0},p(r,[c]){let d=t;t=i(r),t===d?p[t].p(r,c):(ve(),q(p[d],1,1,()=>{p[d]=null}),ge(),s=p[t],s?s.p(r,c):(s=p[t]=m[t](r),s.c()),N(s,1),s.m(e,null))},i(r){f||(N(s),f=!0)},o(r){q(s),f=!1},d(r){r&&W(e),p[t].d()}}}function ut(n,e){return n??e}function _l(n,e,t){let{container_id:s}=e,f,m,p=!0,i=null;return Ht(()=>{s!==f&&(f=s,t(0,p=!0),t(1,i=null),s&&ce.send("get_processes",{container_id:s}))}),Ge(()=>{ce.register("get_processes",r=>{t(1,i=r),t(0,p=!1)},r=>Ce.add({text:r,type:"error"})),m=setInterval(()=>{ce.send("get_processes",{container_id:s})},3e3)}),dt(()=>{clearInterval(m),ce.unregister("get_processes")}),n.$$set=r=>{"container_id"in r&&t(2,s=r.container_id)},[p,i,s]}class pl extends He{constructor(e){super(),Ie(this,e,_l,dl,xe,{container_id:2})}}var Cr={exports:{}};(function(n,e){(function(t,s){n.exports=s()})(self,()=>(()=>{var t={4567:function(p,i,r){var c=this&&this.__decorate||function(u,g,v,y){var E,C=arguments.length,k=C<3?g:y===null?y=Object.getOwnPropertyDescriptor(g,v):y;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(u,g,v,y);else for(var B=u.length-1;B>=0;B--)(E=u[B])&&(k=(C<3?E(k):C>3?E(g,v,k):E(g,v))||k);return C>3&&k&&Object.defineProperty(g,v,k),k},d=this&&this.__param||function(u,g){return function(v,y){g(v,y,u)}};Object.defineProperty(i,"__esModule",{value:!0}),i.AccessibilityManager=void 0;const l=r(9042),_=r(6114),b=r(9924),w=r(844),S=r(5596),o=r(4725),h=r(3656);let a=i.AccessibilityManager=class extends w.Disposable{constructor(u,g){super(),this._terminal=u,this._renderService=g,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="",this._accessibilityContainer=document.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=document.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let v=0;v<this._terminal.rows;v++)this._rowElements[v]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[v]);if(this._topBoundaryFocusListener=v=>this._handleBoundaryFocus(v,0),this._bottomBoundaryFocusListener=v=>this._handleBoundaryFocus(v,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions(),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=document.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this.register(new b.TimeBasedDebouncer(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this.register(this._terminal.onResize(v=>this._handleResize(v.rows))),this.register(this._terminal.onRender(v=>this._refreshRows(v.start,v.end))),this.register(this._terminal.onScroll(()=>this._refreshRows())),this.register(this._terminal.onA11yChar(v=>this._handleChar(v))),this.register(this._terminal.onLineFeed(()=>this._handleChar(`
`))),this.register(this._terminal.onA11yTab(v=>this._handleTab(v))),this.register(this._terminal.onKey(v=>this._handleKey(v.key))),this.register(this._terminal.onBlur(()=>this._clearLiveRegion())),this.register(this._renderService.onDimensionsChange(()=>this._refreshRowsDimensions())),this._screenDprMonitor=new S.ScreenDprMonitor(window),this.register(this._screenDprMonitor),this._screenDprMonitor.setListener(()=>this._refreshRowsDimensions()),this.register((0,h.addDisposableDomListener)(window,"resize",()=>this._refreshRowsDimensions())),this._refreshRows(),this.register((0,w.toDisposable)(()=>{this._accessibilityContainer.remove(),this._rowElements.length=0}))}_handleTab(u){for(let g=0;g<u;g++)this._handleChar(" ")}_handleChar(u){this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==u&&(this._charsToAnnounce+=u):this._charsToAnnounce+=u,u===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=l.tooMuchOutput)),_.isMac&&this._liveRegion.textContent&&this._liveRegion.textContent.length>0&&!this._liveRegion.parentNode&&setTimeout(()=>{this._accessibilityContainer.appendChild(this._liveRegion)},0))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0,_.isMac&&this._liveRegion.remove()}_handleKey(u){this._clearLiveRegion(),/\p{Control}/u.test(u)||this._charsToConsume.push(u)}_refreshRows(u,g){this._liveRegionDebouncer.refresh(u,g,this._terminal.rows)}_renderRows(u,g){const v=this._terminal.buffer,y=v.lines.length.toString();for(let E=u;E<=g;E++){const C=v.translateBufferLineToString(v.ydisp+E,!0),k=(v.ydisp+E+1).toString(),B=this._rowElements[E];B&&(C.length===0?B.innerText="":B.textContent=C,B.setAttribute("aria-posinset",k),B.setAttribute("aria-setsize",y))}this._announceCharacters()}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(u,g){const v=u.target,y=this._rowElements[g===0?1:this._rowElements.length-2];if(v.getAttribute("aria-posinset")===(g===0?"1":`${this._terminal.buffer.lines.length}`)||u.relatedTarget!==y)return;let E,C;if(g===0?(E=v,C=this._rowElements.pop(),this._rowContainer.removeChild(C)):(E=this._rowElements.shift(),C=v,this._rowContainer.removeChild(E)),E.removeEventListener("focus",this._topBoundaryFocusListener),C.removeEventListener("focus",this._bottomBoundaryFocusListener),g===0){const k=this._createAccessibilityTreeNode();this._rowElements.unshift(k),this._rowContainer.insertAdjacentElement("afterbegin",k)}else{const k=this._createAccessibilityTreeNode();this._rowElements.push(k),this._rowContainer.appendChild(k)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(g===0?-1:1),this._rowElements[g===0?1:this._rowElements.length-2].focus(),u.preventDefault(),u.stopImmediatePropagation()}_handleResize(u){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let g=this._rowContainer.children.length;g<this._terminal.rows;g++)this._rowElements[g]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[g]);for(;this._rowElements.length>u;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){const u=document.createElement("div");return u.setAttribute("role","listitem"),u.tabIndex=-1,this._refreshRowDimensions(u),u}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){this._accessibilityContainer.style.width=`${this._renderService.dimensions.css.canvas.width}px`,this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let u=0;u<this._terminal.rows;u++)this._refreshRowDimensions(this._rowElements[u])}}_refreshRowDimensions(u){u.style.height=`${this._renderService.dimensions.css.cell.height}px`}};i.AccessibilityManager=a=c([d(1,o.IRenderService)],a)},3614:(p,i)=>{function r(_){return _.replace(/\r?\n/g,"\r")}function c(_,b){return b?"\x1B[200~"+_+"\x1B[201~":_}function d(_,b,w,S){_=c(_=r(_),w.decPrivateModes.bracketedPasteMode&&S.rawOptions.ignoreBracketedPasteMode!==!0),w.triggerDataEvent(_,!0),b.value=""}function l(_,b,w){const S=w.getBoundingClientRect(),o=_.clientX-S.left-10,h=_.clientY-S.top-10;b.style.width="20px",b.style.height="20px",b.style.left=`${o}px`,b.style.top=`${h}px`,b.style.zIndex="1000",b.focus()}Object.defineProperty(i,"__esModule",{value:!0}),i.rightClickHandler=i.moveTextAreaUnderMouseCursor=i.paste=i.handlePasteEvent=i.copyHandler=i.bracketTextForPaste=i.prepareTextForTerminal=void 0,i.prepareTextForTerminal=r,i.bracketTextForPaste=c,i.copyHandler=function(_,b){_.clipboardData&&_.clipboardData.setData("text/plain",b.selectionText),_.preventDefault()},i.handlePasteEvent=function(_,b,w,S){_.stopPropagation(),_.clipboardData&&d(_.clipboardData.getData("text/plain"),b,w,S)},i.paste=d,i.moveTextAreaUnderMouseCursor=l,i.rightClickHandler=function(_,b,w,S,o){l(_,b,w),o&&S.rightClickSelect(_),b.value=S.selectionText,b.select()}},7239:(p,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ColorContrastCache=void 0;const c=r(1505);i.ColorContrastCache=class{constructor(){this._color=new c.TwoKeyMap,this._css=new c.TwoKeyMap}setCss(d,l,_){this._css.set(d,l,_)}getCss(d,l){return this._css.get(d,l)}setColor(d,l,_){this._color.set(d,l,_)}getColor(d,l){return this._color.get(d,l)}clear(){this._color.clear(),this._css.clear()}}},3656:(p,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.addDisposableDomListener=void 0,i.addDisposableDomListener=function(r,c,d,l){r.addEventListener(c,d,l);let _=!1;return{dispose:()=>{_||(_=!0,r.removeEventListener(c,d,l))}}}},6465:function(p,i,r){var c=this&&this.__decorate||function(o,h,a,u){var g,v=arguments.length,y=v<3?h:u===null?u=Object.getOwnPropertyDescriptor(h,a):u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(o,h,a,u);else for(var E=o.length-1;E>=0;E--)(g=o[E])&&(y=(v<3?g(y):v>3?g(h,a,y):g(h,a))||y);return v>3&&y&&Object.defineProperty(h,a,y),y},d=this&&this.__param||function(o,h){return function(a,u){h(a,u,o)}};Object.defineProperty(i,"__esModule",{value:!0}),i.Linkifier2=void 0;const l=r(3656),_=r(8460),b=r(844),w=r(2585);let S=i.Linkifier2=class extends b.Disposable{get currentLink(){return this._currentLink}constructor(o){super(),this._bufferService=o,this._linkProviders=[],this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this.register(new _.EventEmitter),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this.register(new _.EventEmitter),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this.register((0,b.getDisposeArrayDisposable)(this._linkCacheDisposables)),this.register((0,b.toDisposable)(()=>{this._lastMouseEvent=void 0})),this.register(this._bufferService.onResize(()=>{this._clearCurrentLink(),this._wasResized=!0}))}registerLinkProvider(o){return this._linkProviders.push(o),{dispose:()=>{const h=this._linkProviders.indexOf(o);h!==-1&&this._linkProviders.splice(h,1)}}}attachToDom(o,h,a){this._element=o,this._mouseService=h,this._renderService=a,this.register((0,l.addDisposableDomListener)(this._element,"mouseleave",()=>{this._isMouseOut=!0,this._clearCurrentLink()})),this.register((0,l.addDisposableDomListener)(this._element,"mousemove",this._handleMouseMove.bind(this))),this.register((0,l.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,l.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))}_handleMouseMove(o){if(this._lastMouseEvent=o,!this._element||!this._mouseService)return;const h=this._positionFromMouseEvent(o,this._element,this._mouseService);if(!h)return;this._isMouseOut=!1;const a=o.composedPath();for(let u=0;u<a.length;u++){const g=a[u];if(g.classList.contains("xterm"))break;if(g.classList.contains("xterm-hover"))return}this._lastBufferCell&&h.x===this._lastBufferCell.x&&h.y===this._lastBufferCell.y||(this._handleHover(h),this._lastBufferCell=h)}_handleHover(o){if(this._activeLine!==o.y||this._wasResized)return this._clearCurrentLink(),this._askForLink(o,!1),void(this._wasResized=!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,o)||(this._clearCurrentLink(),this._askForLink(o,!0))}_askForLink(o,h){var a,u;this._activeProviderReplies&&h||((a=this._activeProviderReplies)===null||a===void 0||a.forEach(v=>{v==null||v.forEach(y=>{y.link.dispose&&y.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=o.y);let g=!1;for(const[v,y]of this._linkProviders.entries())h?!((u=this._activeProviderReplies)===null||u===void 0)&&u.get(v)&&(g=this._checkLinkProviderResult(v,o,g)):y.provideLinks(o.y,E=>{var C,k;if(this._isMouseOut)return;const B=E==null?void 0:E.map(x=>({link:x}));(C=this._activeProviderReplies)===null||C===void 0||C.set(v,B),g=this._checkLinkProviderResult(v,o,g),((k=this._activeProviderReplies)===null||k===void 0?void 0:k.size)===this._linkProviders.length&&this._removeIntersectingLinks(o.y,this._activeProviderReplies)})}_removeIntersectingLinks(o,h){const a=new Set;for(let u=0;u<h.size;u++){const g=h.get(u);if(g)for(let v=0;v<g.length;v++){const y=g[v],E=y.link.range.start.y<o?0:y.link.range.start.x,C=y.link.range.end.y>o?this._bufferService.cols:y.link.range.end.x;for(let k=E;k<=C;k++){if(a.has(k)){g.splice(v--,1);break}a.add(k)}}}}_checkLinkProviderResult(o,h,a){var u;if(!this._activeProviderReplies)return a;const g=this._activeProviderReplies.get(o);let v=!1;for(let y=0;y<o;y++)this._activeProviderReplies.has(y)&&!this._activeProviderReplies.get(y)||(v=!0);if(!v&&g){const y=g.find(E=>this._linkAtPosition(E.link,h));y&&(a=!0,this._handleNewLink(y))}if(this._activeProviderReplies.size===this._linkProviders.length&&!a)for(let y=0;y<this._activeProviderReplies.size;y++){const E=(u=this._activeProviderReplies.get(y))===null||u===void 0?void 0:u.find(C=>this._linkAtPosition(C.link,h));if(E){a=!0,this._handleNewLink(E);break}}return a}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(o){if(!this._element||!this._mouseService||!this._currentLink)return;const h=this._positionFromMouseEvent(o,this._element,this._mouseService);h&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,h)&&this._currentLink.link.activate(o,this._currentLink.link.text)}_clearCurrentLink(o,h){this._element&&this._currentLink&&this._lastMouseEvent&&(!o||!h||this._currentLink.link.range.start.y>=o&&this._currentLink.link.range.end.y<=h)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,b.disposeArray)(this._linkCacheDisposables))}_handleNewLink(o){if(!this._element||!this._lastMouseEvent||!this._mouseService)return;const h=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);h&&this._linkAtPosition(o.link,h)&&(this._currentLink=o,this._currentLink.state={decorations:{underline:o.link.decorations===void 0||o.link.decorations.underline,pointerCursor:o.link.decorations===void 0||o.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,o.link,this._lastMouseEvent),o.link.decorations={},Object.defineProperties(o.link.decorations,{pointerCursor:{get:()=>{var a,u;return(u=(a=this._currentLink)===null||a===void 0?void 0:a.state)===null||u===void 0?void 0:u.decorations.pointerCursor},set:a=>{var u,g;!((u=this._currentLink)===null||u===void 0)&&u.state&&this._currentLink.state.decorations.pointerCursor!==a&&(this._currentLink.state.decorations.pointerCursor=a,this._currentLink.state.isHovered&&((g=this._element)===null||g===void 0||g.classList.toggle("xterm-cursor-pointer",a)))}},underline:{get:()=>{var a,u;return(u=(a=this._currentLink)===null||a===void 0?void 0:a.state)===null||u===void 0?void 0:u.decorations.underline},set:a=>{var u,g,v;!((u=this._currentLink)===null||u===void 0)&&u.state&&((v=(g=this._currentLink)===null||g===void 0?void 0:g.state)===null||v===void 0?void 0:v.decorations.underline)!==a&&(this._currentLink.state.decorations.underline=a,this._currentLink.state.isHovered&&this._fireUnderlineEvent(o.link,a))}}}),this._renderService&&this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange(a=>{if(!this._currentLink)return;const u=a.start===0?0:a.start+1+this._bufferService.buffer.ydisp,g=this._bufferService.buffer.ydisp+1+a.end;if(this._currentLink.link.range.start.y>=u&&this._currentLink.link.range.end.y<=g&&(this._clearCurrentLink(u,g),this._lastMouseEvent&&this._element)){const v=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);v&&this._askForLink(v,!1)}})))}_linkHover(o,h,a){var u;!((u=this._currentLink)===null||u===void 0)&&u.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(h,!0),this._currentLink.state.decorations.pointerCursor&&o.classList.add("xterm-cursor-pointer")),h.hover&&h.hover(a,h.text)}_fireUnderlineEvent(o,h){const a=o.range,u=this._bufferService.buffer.ydisp,g=this._createLinkUnderlineEvent(a.start.x-1,a.start.y-u-1,a.end.x,a.end.y-u-1,void 0);(h?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(g)}_linkLeave(o,h,a){var u;!((u=this._currentLink)===null||u===void 0)&&u.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(h,!1),this._currentLink.state.decorations.pointerCursor&&o.classList.remove("xterm-cursor-pointer")),h.leave&&h.leave(a,h.text)}_linkAtPosition(o,h){const a=o.range.start.y*this._bufferService.cols+o.range.start.x,u=o.range.end.y*this._bufferService.cols+o.range.end.x,g=h.y*this._bufferService.cols+h.x;return a<=g&&g<=u}_positionFromMouseEvent(o,h,a){const u=a.getCoords(o,h,this._bufferService.cols,this._bufferService.rows);if(u)return{x:u[0],y:u[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(o,h,a,u,g){return{x1:o,y1:h,x2:a,y2:u,cols:this._bufferService.cols,fg:g}}};i.Linkifier2=S=c([d(0,w.IBufferService)],S)},9042:(p,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.tooMuchOutput=i.promptLabel=void 0,i.promptLabel="Terminal input",i.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},3730:function(p,i,r){var c=this&&this.__decorate||function(S,o,h,a){var u,g=arguments.length,v=g<3?o:a===null?a=Object.getOwnPropertyDescriptor(o,h):a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")v=Reflect.decorate(S,o,h,a);else for(var y=S.length-1;y>=0;y--)(u=S[y])&&(v=(g<3?u(v):g>3?u(o,h,v):u(o,h))||v);return g>3&&v&&Object.defineProperty(o,h,v),v},d=this&&this.__param||function(S,o){return function(h,a){o(h,a,S)}};Object.defineProperty(i,"__esModule",{value:!0}),i.OscLinkProvider=void 0;const l=r(511),_=r(2585);let b=i.OscLinkProvider=class{constructor(S,o,h){this._bufferService=S,this._optionsService=o,this._oscLinkService=h}provideLinks(S,o){var h;const a=this._bufferService.buffer.lines.get(S-1);if(!a)return void o(void 0);const u=[],g=this._optionsService.rawOptions.linkHandler,v=new l.CellData,y=a.getTrimmedLength();let E=-1,C=-1,k=!1;for(let B=0;B<y;B++)if(C!==-1||a.hasContent(B)){if(a.loadCell(B,v),v.hasExtendedAttrs()&&v.extended.urlId){if(C===-1){C=B,E=v.extended.urlId;continue}k=v.extended.urlId!==E}else C!==-1&&(k=!0);if(k||C!==-1&&B===y-1){const x=(h=this._oscLinkService.getLinkData(E))===null||h===void 0?void 0:h.uri;if(x){const M={start:{x:C+1,y:S},end:{x:B+(k||B!==y-1?0:1),y:S}};let O=!1;if(!(g!=null&&g.allowNonHttpProtocols))try{const j=new URL(x);["http:","https:"].includes(j.protocol)||(O=!0)}catch{O=!0}O||u.push({text:x,range:M,activate:(j,$)=>g?g.activate(j,$,M):w(0,$),hover:(j,$)=>{var V;return(V=g==null?void 0:g.hover)===null||V===void 0?void 0:V.call(g,j,$,M)},leave:(j,$)=>{var V;return(V=g==null?void 0:g.leave)===null||V===void 0?void 0:V.call(g,j,$,M)}})}k=!1,v.hasExtendedAttrs()&&v.extended.urlId?(C=B,E=v.extended.urlId):(C=-1,E=-1)}}o(u)}};function w(S,o){if(confirm(`Do you want to navigate to ${o}?

WARNING: This link could potentially be dangerous`)){const h=window.open();if(h){try{h.opener=null}catch{}h.location.href=o}else console.warn("Opening link blocked as opener could not be cleared")}}i.OscLinkProvider=b=c([d(0,_.IBufferService),d(1,_.IOptionsService),d(2,_.IOscLinkService)],b)},6193:(p,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.RenderDebouncer=void 0,i.RenderDebouncer=class{constructor(r,c){this._parentWindow=r,this._renderCallback=c,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._parentWindow.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(r){return this._refreshCallbacks.push(r),this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame(()=>this._innerRefresh())),this._animationFrame}refresh(r,c,d){this._rowCount=d,r=r!==void 0?r:0,c=c!==void 0?c:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,r):r,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,c):c,this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return void this._runRefreshCallbacks();const r=Math.max(this._rowStart,0),c=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(r,c),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(const r of this._refreshCallbacks)r(0);this._refreshCallbacks=[]}}},5596:(p,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ScreenDprMonitor=void 0;const c=r(844);class d extends c.Disposable{constructor(_){super(),this._parentWindow=_,this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this.register((0,c.toDisposable)(()=>{this.clearListener()}))}setListener(_){this._listener&&this.clearListener(),this._listener=_,this._outerListener=()=>{this._listener&&(this._listener(this._parentWindow.devicePixelRatio,this._currentDevicePixelRatio),this._updateDpr())},this._updateDpr()}_updateDpr(){var _;this._outerListener&&((_=this._resolutionMediaMatchList)===null||_===void 0||_.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){this._resolutionMediaMatchList&&this._listener&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._listener=void 0,this._outerListener=void 0)}}i.ScreenDprMonitor=d},3236:(p,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Terminal=void 0;const c=r(3614),d=r(3656),l=r(6465),_=r(9042),b=r(3730),w=r(1680),S=r(3107),o=r(5744),h=r(2950),a=r(1296),u=r(428),g=r(4269),v=r(5114),y=r(8934),E=r(3230),C=r(9312),k=r(4725),B=r(6731),x=r(8055),M=r(8969),O=r(8460),j=r(844),$=r(6114),V=r(8437),F=r(2584),L=r(7399),T=r(5941),H=r(9074),I=r(2585),X=r(5435),J=r(4567),se=typeof window<"u"?window.document:null;class te extends M.CoreTerminal{get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}constructor(A={}){super(A),this.browser=$,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this.register(new j.MutableDisposable),this._onCursorMove=this.register(new O.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onKey=this.register(new O.EventEmitter),this.onKey=this._onKey.event,this._onRender=this.register(new O.EventEmitter),this.onRender=this._onRender.event,this._onSelectionChange=this.register(new O.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this.register(new O.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onBell=this.register(new O.EventEmitter),this.onBell=this._onBell.event,this._onFocus=this.register(new O.EventEmitter),this._onBlur=this.register(new O.EventEmitter),this._onA11yCharEmitter=this.register(new O.EventEmitter),this._onA11yTabEmitter=this.register(new O.EventEmitter),this._onWillOpen=this.register(new O.EventEmitter),this._setup(),this.linkifier2=this.register(this._instantiationService.createInstance(l.Linkifier2)),this.linkifier2.registerLinkProvider(this._instantiationService.createInstance(b.OscLinkProvider)),this._decorationService=this._instantiationService.createInstance(H.DecorationService),this._instantiationService.setService(I.IDecorationService,this._decorationService),this.register(this._inputHandler.onRequestBell(()=>this._onBell.fire())),this.register(this._inputHandler.onRequestRefreshRows((z,Z)=>this.refresh(z,Z))),this.register(this._inputHandler.onRequestSendFocus(()=>this._reportFocus())),this.register(this._inputHandler.onRequestReset(()=>this.reset())),this.register(this._inputHandler.onRequestWindowsOptionsReport(z=>this._reportWindowsOptions(z))),this.register(this._inputHandler.onColor(z=>this._handleColorEvent(z))),this.register((0,O.forwardEvent)(this._inputHandler.onCursorMove,this._onCursorMove)),this.register((0,O.forwardEvent)(this._inputHandler.onTitleChange,this._onTitleChange)),this.register((0,O.forwardEvent)(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this.register((0,O.forwardEvent)(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this.register(this._bufferService.onResize(z=>this._afterResize(z.cols,z.rows))),this.register((0,j.toDisposable)(()=>{var z,Z;this._customKeyEventHandler=void 0,(Z=(z=this.element)===null||z===void 0?void 0:z.parentNode)===null||Z===void 0||Z.removeChild(this.element)}))}_handleColorEvent(A){if(this._themeService)for(const z of A){let Z,K="";switch(z.index){case 256:Z="foreground",K="10";break;case 257:Z="background",K="11";break;case 258:Z="cursor",K="12";break;default:Z="ansi",K="4;"+z.index}switch(z.type){case 0:const ae=x.color.toColorRGB(Z==="ansi"?this._themeService.colors.ansi[z.index]:this._themeService.colors[Z]);this.coreService.triggerDataEvent(`${F.C0.ESC}]${K};${(0,T.toRgbString)(ae)}${F.C1_ESCAPED.ST}`);break;case 1:if(Z==="ansi")this._themeService.modifyColors(ee=>ee.ansi[z.index]=x.rgba.toColor(...z.color));else{const ee=Z;this._themeService.modifyColors(me=>me[ee]=x.rgba.toColor(...z.color))}break;case 2:this._themeService.restoreColor(z.index)}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(A){A?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(J.AccessibilityManager,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(A){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(F.C0.ESC+"[I"),this.updateCursorStyle(A),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){var A;return(A=this.textarea)===null||A===void 0?void 0:A.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(F.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;const A=this.buffer.ybase+this.buffer.y,z=this.buffer.lines.get(A);if(!z)return;const Z=Math.min(this.buffer.x,this.cols-1),K=this._renderService.dimensions.css.cell.height,ae=z.getWidth(Z),ee=this._renderService.dimensions.css.cell.width*ae,me=this.buffer.y*this._renderService.dimensions.css.cell.height,we=Z*this._renderService.dimensions.css.cell.width;this.textarea.style.left=we+"px",this.textarea.style.top=me+"px",this.textarea.style.width=ee+"px",this.textarea.style.height=K+"px",this.textarea.style.lineHeight=K+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this.register((0,d.addDisposableDomListener)(this.element,"copy",z=>{this.hasSelection()&&(0,c.copyHandler)(z,this._selectionService)}));const A=z=>(0,c.handlePasteEvent)(z,this.textarea,this.coreService,this.optionsService);this.register((0,d.addDisposableDomListener)(this.textarea,"paste",A)),this.register((0,d.addDisposableDomListener)(this.element,"paste",A)),$.isFirefox?this.register((0,d.addDisposableDomListener)(this.element,"mousedown",z=>{z.button===2&&(0,c.rightClickHandler)(z,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})):this.register((0,d.addDisposableDomListener)(this.element,"contextmenu",z=>{(0,c.rightClickHandler)(z,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})),$.isLinux&&this.register((0,d.addDisposableDomListener)(this.element,"auxclick",z=>{z.button===1&&(0,c.moveTextAreaUnderMouseCursor)(z,this.textarea,this.screenElement)}))}_bindKeys(){this.register((0,d.addDisposableDomListener)(this.textarea,"keyup",A=>this._keyUp(A),!0)),this.register((0,d.addDisposableDomListener)(this.textarea,"keydown",A=>this._keyDown(A),!0)),this.register((0,d.addDisposableDomListener)(this.textarea,"keypress",A=>this._keyPress(A),!0)),this.register((0,d.addDisposableDomListener)(this.textarea,"compositionstart",()=>this._compositionHelper.compositionstart())),this.register((0,d.addDisposableDomListener)(this.textarea,"compositionupdate",A=>this._compositionHelper.compositionupdate(A))),this.register((0,d.addDisposableDomListener)(this.textarea,"compositionend",()=>this._compositionHelper.compositionend())),this.register((0,d.addDisposableDomListener)(this.textarea,"input",A=>this._inputEvent(A),!0)),this.register(this.onRender(()=>this._compositionHelper.updateCompositionElements()))}open(A){var z;if(!A)throw new Error("Terminal requires a parent element.");A.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this._document=A.ownerDocument,this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),A.appendChild(this.element);const Z=se.createDocumentFragment();this._viewportElement=se.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),Z.appendChild(this._viewportElement),this._viewportScrollArea=se.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=se.createElement("div"),this.screenElement.classList.add("xterm-screen"),this._helperContainer=se.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),Z.appendChild(this.screenElement),this.textarea=se.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",_.promptLabel),$.isChromeOS||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._coreBrowserService=this._instantiationService.createInstance(v.CoreBrowserService,this.textarea,(z=this._document.defaultView)!==null&&z!==void 0?z:window),this._instantiationService.setService(k.ICoreBrowserService,this._coreBrowserService),this.register((0,d.addDisposableDomListener)(this.textarea,"focus",K=>this._handleTextAreaFocus(K))),this.register((0,d.addDisposableDomListener)(this.textarea,"blur",()=>this._handleTextAreaBlur())),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(u.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(k.ICharSizeService,this._charSizeService),this._themeService=this._instantiationService.createInstance(B.ThemeService),this._instantiationService.setService(k.IThemeService,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(g.CharacterJoinerService),this._instantiationService.setService(k.ICharacterJoinerService,this._characterJoinerService),this._renderService=this.register(this._instantiationService.createInstance(E.RenderService,this.rows,this.screenElement)),this._instantiationService.setService(k.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange(K=>this._onRender.fire(K))),this.onResize(K=>this._renderService.resize(K.cols,K.rows)),this._compositionView=se.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(h.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this.element.appendChild(Z);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this._mouseService=this._instantiationService.createInstance(y.MouseService),this._instantiationService.setService(k.IMouseService,this._mouseService),this.viewport=this._instantiationService.createInstance(w.Viewport,this._viewportElement,this._viewportScrollArea),this.viewport.onRequestScrollLines(K=>this.scrollLines(K.amount,K.suppressScrollEvent,1)),this.register(this._inputHandler.onRequestSyncScrollBar(()=>this.viewport.syncScrollArea())),this.register(this.viewport),this.register(this.onCursorMove(()=>{this._renderService.handleCursorMove(),this._syncTextArea()})),this.register(this.onResize(()=>this._renderService.handleResize(this.cols,this.rows))),this.register(this.onBlur(()=>this._renderService.handleBlur())),this.register(this.onFocus(()=>this._renderService.handleFocus())),this.register(this._renderService.onDimensionsChange(()=>this.viewport.syncScrollArea())),this._selectionService=this.register(this._instantiationService.createInstance(C.SelectionService,this.element,this.screenElement,this.linkifier2)),this._instantiationService.setService(k.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines(K=>this.scrollLines(K.amount,K.suppressScrollEvent))),this.register(this._selectionService.onSelectionChange(()=>this._onSelectionChange.fire())),this.register(this._selectionService.onRequestRedraw(K=>this._renderService.handleSelectionChanged(K.start,K.end,K.columnSelectMode))),this.register(this._selectionService.onLinuxMouseSelection(K=>{this.textarea.value=K,this.textarea.focus(),this.textarea.select()})),this.register(this._onScroll.event(K=>{this.viewport.syncScrollArea(),this._selectionService.refresh()})),this.register((0,d.addDisposableDomListener)(this._viewportElement,"scroll",()=>this._selectionService.refresh())),this.linkifier2.attachToDom(this.screenElement,this._mouseService,this._renderService),this.register(this._instantiationService.createInstance(S.BufferDecorationRenderer,this.screenElement)),this.register((0,d.addDisposableDomListener)(this.element,"mousedown",K=>this._selectionService.handleMouseDown(K))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(J.AccessibilityManager,this)),this.register(this.optionsService.onSpecificOptionChange("screenReaderMode",K=>this._handleScreenReaderModeOptionChange(K))),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(o.OverviewRulerRenderer,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRulerWidth",K=>{!this._overviewRulerRenderer&&K&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(o.OverviewRulerRenderer,this._viewportElement,this.screenElement)))}),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(a.DomRenderer,this.element,this.screenElement,this._viewportElement,this.linkifier2)}bindMouse(){const A=this,z=this.element;function Z(ee){const me=A._mouseService.getMouseReportCoords(ee,A.screenElement);if(!me)return!1;let we,ke;switch(ee.overrideType||ee.type){case"mousemove":ke=32,ee.buttons===void 0?(we=3,ee.button!==void 0&&(we=ee.button<3?ee.button:3)):we=1&ee.buttons?0:4&ee.buttons?1:2&ee.buttons?2:3;break;case"mouseup":ke=0,we=ee.button<3?ee.button:3;break;case"mousedown":ke=1,we=ee.button<3?ee.button:3;break;case"wheel":if(A.viewport.getLinesScrolled(ee)===0)return!1;ke=ee.deltaY<0?0:1,we=4;break;default:return!1}return!(ke===void 0||we===void 0||we>4)&&A.coreMouseService.triggerMouseEvent({col:me.col,row:me.row,x:me.x,y:me.y,button:we,action:ke,ctrl:ee.ctrlKey,alt:ee.altKey,shift:ee.shiftKey})}const K={mouseup:null,wheel:null,mousedrag:null,mousemove:null},ae={mouseup:ee=>(Z(ee),ee.buttons||(this._document.removeEventListener("mouseup",K.mouseup),K.mousedrag&&this._document.removeEventListener("mousemove",K.mousedrag)),this.cancel(ee)),wheel:ee=>(Z(ee),this.cancel(ee,!0)),mousedrag:ee=>{ee.buttons&&Z(ee)},mousemove:ee=>{ee.buttons||Z(ee)}};this.register(this.coreMouseService.onProtocolChange(ee=>{ee?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(ee)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),8&ee?K.mousemove||(z.addEventListener("mousemove",ae.mousemove),K.mousemove=ae.mousemove):(z.removeEventListener("mousemove",K.mousemove),K.mousemove=null),16&ee?K.wheel||(z.addEventListener("wheel",ae.wheel,{passive:!1}),K.wheel=ae.wheel):(z.removeEventListener("wheel",K.wheel),K.wheel=null),2&ee?K.mouseup||(z.addEventListener("mouseup",ae.mouseup),K.mouseup=ae.mouseup):(this._document.removeEventListener("mouseup",K.mouseup),z.removeEventListener("mouseup",K.mouseup),K.mouseup=null),4&ee?K.mousedrag||(K.mousedrag=ae.mousedrag):(this._document.removeEventListener("mousemove",K.mousedrag),K.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,d.addDisposableDomListener)(z,"mousedown",ee=>{if(ee.preventDefault(),this.focus(),this.coreMouseService.areMouseEventsActive&&!this._selectionService.shouldForceSelection(ee))return Z(ee),K.mouseup&&this._document.addEventListener("mouseup",K.mouseup),K.mousedrag&&this._document.addEventListener("mousemove",K.mousedrag),this.cancel(ee)})),this.register((0,d.addDisposableDomListener)(z,"wheel",ee=>{if(!K.wheel){if(!this.buffer.hasScrollback){const me=this.viewport.getLinesScrolled(ee);if(me===0)return;const we=F.C0.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(ee.deltaY<0?"A":"B");let ke="";for(let Xe=0;Xe<Math.abs(me);Xe++)ke+=we;return this.coreService.triggerDataEvent(ke,!0),this.cancel(ee,!0)}return this.viewport.handleWheel(ee)?this.cancel(ee):void 0}},{passive:!1})),this.register((0,d.addDisposableDomListener)(z,"touchstart",ee=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchStart(ee),this.cancel(ee)},{passive:!0})),this.register((0,d.addDisposableDomListener)(z,"touchmove",ee=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchMove(ee)?void 0:this.cancel(ee)},{passive:!1}))}refresh(A,z){var Z;(Z=this._renderService)===null||Z===void 0||Z.refreshRows(A,z)}updateCursorStyle(A){var z;!((z=this._selectionService)===null||z===void 0)&&z.shouldColumnSelect(A)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(A,z,Z=0){var K;Z===1?(super.scrollLines(A,z,Z),this.refresh(0,this.rows-1)):(K=this.viewport)===null||K===void 0||K.scrollLines(A)}paste(A){(0,c.paste)(A,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(A){this._customKeyEventHandler=A}registerLinkProvider(A){return this.linkifier2.registerLinkProvider(A)}registerCharacterJoiner(A){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");const z=this._characterJoinerService.register(A);return this.refresh(0,this.rows-1),z}deregisterCharacterJoiner(A){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(A)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(A){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+A)}registerDecoration(A){return this._decorationService.registerDecoration(A)}hasSelection(){return!!this._selectionService&&this._selectionService.hasSelection}select(A,z,Z){this._selectionService.setSelection(A,z,Z)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(this._selectionService&&this._selectionService.hasSelection)return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){var A;(A=this._selectionService)===null||A===void 0||A.clearSelection()}selectAll(){var A;(A=this._selectionService)===null||A===void 0||A.selectAll()}selectLines(A,z){var Z;(Z=this._selectionService)===null||Z===void 0||Z.selectLines(A,z)}_keyDown(A){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(A)===!1)return!1;const z=this.browser.isMac&&this.options.macOptionIsMeta&&A.altKey;if(!z&&!this._compositionHelper.keydown(A))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;z||A.key!=="Dead"&&A.key!=="AltGraph"||(this._unprocessedDeadKey=!0);const Z=(0,L.evaluateKeyboardEvent)(A,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(A),Z.type===3||Z.type===2){const K=this.rows-1;return this.scrollLines(Z.type===2?-K:K),this.cancel(A,!0)}return Z.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,A)||(Z.cancel&&this.cancel(A,!0),!Z.key||!!(A.key&&!A.ctrlKey&&!A.altKey&&!A.metaKey&&A.key.length===1&&A.key.charCodeAt(0)>=65&&A.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(Z.key!==F.C0.ETX&&Z.key!==F.C0.CR||(this.textarea.value=""),this._onKey.fire({key:Z.key,domEvent:A}),this._showCursor(),this.coreService.triggerDataEvent(Z.key,!0),!this.optionsService.rawOptions.screenReaderMode||A.altKey||A.ctrlKey?this.cancel(A,!0):void(this._keyDownHandled=!0))))}_isThirdLevelShift(A,z){const Z=A.isMac&&!this.options.macOptionIsMeta&&z.altKey&&!z.ctrlKey&&!z.metaKey||A.isWindows&&z.altKey&&z.ctrlKey&&!z.metaKey||A.isWindows&&z.getModifierState("AltGraph");return z.type==="keypress"?Z:Z&&(!z.keyCode||z.keyCode>47)}_keyUp(A){this._keyDownSeen=!1,this._customKeyEventHandler&&this._customKeyEventHandler(A)===!1||(function(z){return z.keyCode===16||z.keyCode===17||z.keyCode===18}(A)||this.focus(),this.updateCursorStyle(A),this._keyPressHandled=!1)}_keyPress(A){let z;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(A)===!1)return!1;if(this.cancel(A),A.charCode)z=A.charCode;else if(A.which===null||A.which===void 0)z=A.keyCode;else{if(A.which===0||A.charCode===0)return!1;z=A.which}return!(!z||(A.altKey||A.ctrlKey||A.metaKey)&&!this._isThirdLevelShift(this.browser,A)||(z=String.fromCharCode(z),this._onKey.fire({key:z,domEvent:A}),this._showCursor(),this.coreService.triggerDataEvent(z,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))}_inputEvent(A){if(A.data&&A.inputType==="insertText"&&(!A.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;const z=A.data;return this.coreService.triggerDataEvent(z,!0),this.cancel(A),!0}return!1}resize(A,z){A!==this.cols||z!==this.rows?super.resize(A,z):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()}_afterResize(A,z){var Z,K;(Z=this._charSizeService)===null||Z===void 0||Z.measure(),(K=this.viewport)===null||K===void 0||K.syncScrollArea(!0)}clear(){var A;if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let z=1;z<this.rows;z++)this.buffer.lines.push(this.buffer.getBlankLine(V.DEFAULT_ATTR_DATA));this._onScroll.fire({position:this.buffer.ydisp,source:0}),(A=this.viewport)===null||A===void 0||A.reset(),this.refresh(0,this.rows-1)}}reset(){var A,z;this.options.rows=this.rows,this.options.cols=this.cols;const Z=this._customKeyEventHandler;this._setup(),super.reset(),(A=this._selectionService)===null||A===void 0||A.reset(),this._decorationService.reset(),(z=this.viewport)===null||z===void 0||z.reset(),this._customKeyEventHandler=Z,this.refresh(0,this.rows-1)}clearTextureAtlas(){var A;(A=this._renderService)===null||A===void 0||A.clearTextureAtlas()}_reportFocus(){var A;!((A=this.element)===null||A===void 0)&&A.classList.contains("focus")?this.coreService.triggerDataEvent(F.C0.ESC+"[I"):this.coreService.triggerDataEvent(F.C0.ESC+"[O")}_reportWindowsOptions(A){if(this._renderService)switch(A){case X.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:const z=this._renderService.dimensions.css.canvas.width.toFixed(0),Z=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${F.C0.ESC}[4;${Z};${z}t`);break;case X.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:const K=this._renderService.dimensions.css.cell.width.toFixed(0),ae=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${F.C0.ESC}[6;${ae};${K}t`)}}cancel(A,z){if(this.options.cancelEvents||z)return A.preventDefault(),A.stopPropagation(),!1}}i.Terminal=te},9924:(p,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.TimeBasedDebouncer=void 0,i.TimeBasedDebouncer=class{constructor(r,c=1e3){this._renderCallback=r,this._debounceThresholdMS=c,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(r,c,d){this._rowCount=d,r=r!==void 0?r:0,c=c!==void 0?c:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,r):r,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,c):c;const l=Date.now();if(l-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=l,this._innerRefresh();else if(!this._additionalRefreshRequested){const _=l-this._lastRefreshMs,b=this._debounceThresholdMS-_;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(()=>{this._lastRefreshMs=Date.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0},b)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;const r=Math.max(this._rowStart,0),c=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(r,c)}}},1680:function(p,i,r){var c=this&&this.__decorate||function(h,a,u,g){var v,y=arguments.length,E=y<3?a:g===null?g=Object.getOwnPropertyDescriptor(a,u):g;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(h,a,u,g);else for(var C=h.length-1;C>=0;C--)(v=h[C])&&(E=(y<3?v(E):y>3?v(a,u,E):v(a,u))||E);return y>3&&E&&Object.defineProperty(a,u,E),E},d=this&&this.__param||function(h,a){return function(u,g){a(u,g,h)}};Object.defineProperty(i,"__esModule",{value:!0}),i.Viewport=void 0;const l=r(3656),_=r(4725),b=r(8460),w=r(844),S=r(2585);let o=i.Viewport=class extends w.Disposable{constructor(h,a,u,g,v,y,E,C){super(),this._viewportElement=h,this._scrollArea=a,this._bufferService=u,this._optionsService=g,this._charSizeService=v,this._renderService=y,this._coreBrowserService=E,this.scrollBarWidth=0,this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._wheelPartialScroll=0,this._refreshAnimationFrame=null,this._ignoreNextScrollEvent=!1,this._smoothScrollState={startTime:0,origin:-1,target:-1},this._onRequestScrollLines=this.register(new b.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this.register((0,l.addDisposableDomListener)(this._viewportElement,"scroll",this._handleScroll.bind(this))),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(k=>this._activeBuffer=k.activeBuffer)),this._renderDimensions=this._renderService.dimensions,this.register(this._renderService.onDimensionsChange(k=>this._renderDimensions=k)),this._handleThemeChange(C.colors),this.register(C.onChangeColors(k=>this._handleThemeChange(k))),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.syncScrollArea())),setTimeout(()=>this.syncScrollArea())}_handleThemeChange(h){this._viewportElement.style.backgroundColor=h.background.css}reset(){this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._coreBrowserService.window.requestAnimationFrame(()=>this.syncScrollArea())}_refresh(h){if(h)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&this._coreBrowserService.window.cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderService.dimensions.device.cell.height/this._coreBrowserService.dpr,this._currentDeviceCellHeight=this._renderService.dimensions.device.cell.height,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;const a=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderService.dimensions.css.canvas.height);this._lastRecordedBufferHeight!==a&&(this._lastRecordedBufferHeight=a,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}const h=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==h&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=h),this._refreshAnimationFrame=null}syncScrollArea(h=!1){if(this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(h);this._lastRecordedViewportHeight===this._renderService.dimensions.css.canvas.height&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.device.cell.height===this._currentDeviceCellHeight||this._refresh(h)}_handleScroll(h){if(this._lastScrollTop=this._viewportElement.scrollTop,!this._viewportElement.offsetParent)return;if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._onRequestScrollLines.fire({amount:0,suppressScrollEvent:!0});const a=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._onRequestScrollLines.fire({amount:a,suppressScrollEvent:!0})}_smoothScroll(){if(this._isDisposed||this._smoothScrollState.origin===-1||this._smoothScrollState.target===-1)return;const h=this._smoothScrollPercent();this._viewportElement.scrollTop=this._smoothScrollState.origin+Math.round(h*(this._smoothScrollState.target-this._smoothScrollState.origin)),h<1?this._coreBrowserService.window.requestAnimationFrame(()=>this._smoothScroll()):this._clearSmoothScrollState()}_smoothScrollPercent(){return this._optionsService.rawOptions.smoothScrollDuration&&this._smoothScrollState.startTime?Math.max(Math.min((Date.now()-this._smoothScrollState.startTime)/this._optionsService.rawOptions.smoothScrollDuration,1),0):1}_clearSmoothScrollState(){this._smoothScrollState.startTime=0,this._smoothScrollState.origin=-1,this._smoothScrollState.target=-1}_bubbleScroll(h,a){const u=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(a<0&&this._viewportElement.scrollTop!==0||a>0&&u<this._lastRecordedBufferHeight)||(h.cancelable&&h.preventDefault(),!1)}handleWheel(h){const a=this._getPixelsScrolled(h);return a!==0&&(this._optionsService.rawOptions.smoothScrollDuration?(this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target===-1?this._smoothScrollState.target=this._viewportElement.scrollTop+a:this._smoothScrollState.target+=a,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()):this._viewportElement.scrollTop+=a,this._bubbleScroll(h,a))}scrollLines(h){if(h!==0)if(this._optionsService.rawOptions.smoothScrollDuration){const a=h*this._currentRowHeight;this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target=this._smoothScrollState.origin+a,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()}else this._onRequestScrollLines.fire({amount:h,suppressScrollEvent:!1})}_getPixelsScrolled(h){if(h.deltaY===0||h.shiftKey)return 0;let a=this._applyScrollModifier(h.deltaY,h);return h.deltaMode===WheelEvent.DOM_DELTA_LINE?a*=this._currentRowHeight:h.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(a*=this._currentRowHeight*this._bufferService.rows),a}getBufferElements(h,a){var u;let g,v="";const y=[],E=a??this._bufferService.buffer.lines.length,C=this._bufferService.buffer.lines;for(let k=h;k<E;k++){const B=C.get(k);if(!B)continue;const x=(u=C.get(k+1))===null||u===void 0?void 0:u.isWrapped;if(v+=B.translateToString(!x),!x||k===C.length-1){const M=document.createElement("div");M.textContent=v,y.push(M),v.length>0&&(g=M),v=""}}return{bufferElements:y,cursorElement:g}}getLinesScrolled(h){if(h.deltaY===0||h.shiftKey)return 0;let a=this._applyScrollModifier(h.deltaY,h);return h.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(a/=this._currentRowHeight+0,this._wheelPartialScroll+=a,a=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):h.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(a*=this._bufferService.rows),a}_applyScrollModifier(h,a){const u=this._optionsService.rawOptions.fastScrollModifier;return u==="alt"&&a.altKey||u==="ctrl"&&a.ctrlKey||u==="shift"&&a.shiftKey?h*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:h*this._optionsService.rawOptions.scrollSensitivity}handleTouchStart(h){this._lastTouchY=h.touches[0].pageY}handleTouchMove(h){const a=this._lastTouchY-h.touches[0].pageY;return this._lastTouchY=h.touches[0].pageY,a!==0&&(this._viewportElement.scrollTop+=a,this._bubbleScroll(h,a))}};i.Viewport=o=c([d(2,S.IBufferService),d(3,S.IOptionsService),d(4,_.ICharSizeService),d(5,_.IRenderService),d(6,_.ICoreBrowserService),d(7,_.IThemeService)],o)},3107:function(p,i,r){var c=this&&this.__decorate||function(o,h,a,u){var g,v=arguments.length,y=v<3?h:u===null?u=Object.getOwnPropertyDescriptor(h,a):u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(o,h,a,u);else for(var E=o.length-1;E>=0;E--)(g=o[E])&&(y=(v<3?g(y):v>3?g(h,a,y):g(h,a))||y);return v>3&&y&&Object.defineProperty(h,a,y),y},d=this&&this.__param||function(o,h){return function(a,u){h(a,u,o)}};Object.defineProperty(i,"__esModule",{value:!0}),i.BufferDecorationRenderer=void 0;const l=r(3656),_=r(4725),b=r(844),w=r(2585);let S=i.BufferDecorationRenderer=class extends b.Disposable{constructor(o,h,a,u){super(),this._screenElement=o,this._bufferService=h,this._decorationService=a,this._renderService=u,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this.register(this._renderService.onRenderedViewportChange(()=>this._doRefreshDecorations())),this.register(this._renderService.onDimensionsChange(()=>{this._dimensionsChanged=!0,this._queueRefresh()})),this.register((0,l.addDisposableDomListener)(window,"resize",()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt})),this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh())),this.register(this._decorationService.onDecorationRemoved(g=>this._removeDecoration(g))),this.register((0,b.toDisposable)(()=>{this._container.remove(),this._decorationElements.clear()}))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback(()=>{this._doRefreshDecorations(),this._animationFrame=void 0}))}_doRefreshDecorations(){for(const o of this._decorationService.decorations)this._renderDecoration(o);this._dimensionsChanged=!1}_renderDecoration(o){this._refreshStyle(o),this._dimensionsChanged&&this._refreshXPosition(o)}_createElement(o){var h,a;const u=document.createElement("div");u.classList.add("xterm-decoration"),u.classList.toggle("xterm-decoration-top-layer",((h=o==null?void 0:o.options)===null||h===void 0?void 0:h.layer)==="top"),u.style.width=`${Math.round((o.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,u.style.height=(o.options.height||1)*this._renderService.dimensions.css.cell.height+"px",u.style.top=(o.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height+"px",u.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;const g=(a=o.options.x)!==null&&a!==void 0?a:0;return g&&g>this._bufferService.cols&&(u.style.display="none"),this._refreshXPosition(o,u),u}_refreshStyle(o){const h=o.marker.line-this._bufferService.buffers.active.ydisp;if(h<0||h>=this._bufferService.rows)o.element&&(o.element.style.display="none",o.onRenderEmitter.fire(o.element));else{let a=this._decorationElements.get(o);a||(a=this._createElement(o),o.element=a,this._decorationElements.set(o,a),this._container.appendChild(a),o.onDispose(()=>{this._decorationElements.delete(o),a.remove()})),a.style.top=h*this._renderService.dimensions.css.cell.height+"px",a.style.display=this._altBufferIsActive?"none":"block",o.onRenderEmitter.fire(a)}}_refreshXPosition(o,h=o.element){var a;if(!h)return;const u=(a=o.options.x)!==null&&a!==void 0?a:0;(o.options.anchor||"left")==="right"?h.style.right=u?u*this._renderService.dimensions.css.cell.width+"px":"":h.style.left=u?u*this._renderService.dimensions.css.cell.width+"px":""}_removeDecoration(o){var h;(h=this._decorationElements.get(o))===null||h===void 0||h.remove(),this._decorationElements.delete(o),o.dispose()}};i.BufferDecorationRenderer=S=c([d(1,w.IBufferService),d(2,w.IDecorationService),d(3,_.IRenderService)],S)},5871:(p,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ColorZoneStore=void 0,i.ColorZoneStore=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(r){if(r.options.overviewRulerOptions){for(const c of this._zones)if(c.color===r.options.overviewRulerOptions.color&&c.position===r.options.overviewRulerOptions.position){if(this._lineIntersectsZone(c,r.marker.line))return;if(this._lineAdjacentToZone(c,r.marker.line,r.options.overviewRulerOptions.position))return void this._addLineToZone(c,r.marker.line)}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=r.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=r.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=r.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=r.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:r.options.overviewRulerOptions.color,position:r.options.overviewRulerOptions.position,startBufferLine:r.marker.line,endBufferLine:r.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(r){this._linePadding=r}_lineIntersectsZone(r,c){return c>=r.startBufferLine&&c<=r.endBufferLine}_lineAdjacentToZone(r,c,d){return c>=r.startBufferLine-this._linePadding[d||"full"]&&c<=r.endBufferLine+this._linePadding[d||"full"]}_addLineToZone(r,c){r.startBufferLine=Math.min(r.startBufferLine,c),r.endBufferLine=Math.max(r.endBufferLine,c)}}},5744:function(p,i,r){var c=this&&this.__decorate||function(g,v,y,E){var C,k=arguments.length,B=k<3?v:E===null?E=Object.getOwnPropertyDescriptor(v,y):E;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")B=Reflect.decorate(g,v,y,E);else for(var x=g.length-1;x>=0;x--)(C=g[x])&&(B=(k<3?C(B):k>3?C(v,y,B):C(v,y))||B);return k>3&&B&&Object.defineProperty(v,y,B),B},d=this&&this.__param||function(g,v){return function(y,E){v(y,E,g)}};Object.defineProperty(i,"__esModule",{value:!0}),i.OverviewRulerRenderer=void 0;const l=r(5871),_=r(3656),b=r(4725),w=r(844),S=r(2585),o={full:0,left:0,center:0,right:0},h={full:0,left:0,center:0,right:0},a={full:0,left:0,center:0,right:0};let u=i.OverviewRulerRenderer=class extends w.Disposable{get _width(){return this._optionsService.options.overviewRulerWidth||0}constructor(g,v,y,E,C,k,B){var x;super(),this._viewportElement=g,this._screenElement=v,this._bufferService=y,this._decorationService=E,this._renderService=C,this._optionsService=k,this._coreBrowseService=B,this._colorZoneStore=new l.ColorZoneStore,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=document.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),(x=this._viewportElement.parentElement)===null||x===void 0||x.insertBefore(this._canvas,this._viewportElement);const M=this._canvas.getContext("2d");if(!M)throw new Error("Ctx cannot be null");this._ctx=M,this._registerDecorationListeners(),this._registerBufferChangeListeners(),this._registerDimensionChangeListeners(),this.register((0,w.toDisposable)(()=>{var O;(O=this._canvas)===null||O===void 0||O.remove()}))}_registerDecorationListeners(){this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh(void 0,!0))),this.register(this._decorationService.onDecorationRemoved(()=>this._queueRefresh(void 0,!0)))}_registerBufferChangeListeners(){this.register(this._renderService.onRenderedViewportChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"})),this.register(this._bufferService.onScroll(()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())}))}_registerDimensionChangeListeners(){this.register(this._renderService.onRender(()=>{this._containerHeight&&this._containerHeight===this._screenElement.clientHeight||(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)})),this.register(this._optionsService.onSpecificOptionChange("overviewRulerWidth",()=>this._queueRefresh(!0))),this.register((0,_.addDisposableDomListener)(this._coreBrowseService.window,"resize",()=>this._queueRefresh(!0))),this._queueRefresh(!0)}_refreshDrawConstants(){const g=Math.floor(this._canvas.width/3),v=Math.ceil(this._canvas.width/3);h.full=this._canvas.width,h.left=g,h.center=v,h.right=g,this._refreshDrawHeightConstants(),a.full=0,a.left=0,a.center=h.left,a.right=h.left+h.center}_refreshDrawHeightConstants(){o.full=Math.round(2*this._coreBrowseService.dpr);const g=this._canvas.height/this._bufferService.buffer.lines.length,v=Math.round(Math.max(Math.min(g,12),6)*this._coreBrowseService.dpr);o.left=v,o.center=v,o.right=v}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*o.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*o.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*o.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*o.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowseService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowseService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(const v of this._decorationService.decorations)this._colorZoneStore.addDecoration(v);this._ctx.lineWidth=1;const g=this._colorZoneStore.zones;for(const v of g)v.position!=="full"&&this._renderColorZone(v);for(const v of g)v.position==="full"&&this._renderColorZone(v);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderColorZone(g){this._ctx.fillStyle=g.color,this._ctx.fillRect(a[g.position||"full"],Math.round((this._canvas.height-1)*(g.startBufferLine/this._bufferService.buffers.active.lines.length)-o[g.position||"full"]/2),h[g.position||"full"],Math.round((this._canvas.height-1)*((g.endBufferLine-g.startBufferLine)/this._bufferService.buffers.active.lines.length)+o[g.position||"full"]))}_queueRefresh(g,v){this._shouldUpdateDimensions=g||this._shouldUpdateDimensions,this._shouldUpdateAnchor=v||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowseService.window.requestAnimationFrame(()=>{this._refreshDecorations(),this._animationFrame=void 0}))}};i.OverviewRulerRenderer=u=c([d(2,S.IBufferService),d(3,S.IDecorationService),d(4,b.IRenderService),d(5,S.IOptionsService),d(6,b.ICoreBrowserService)],u)},2950:function(p,i,r){var c=this&&this.__decorate||function(S,o,h,a){var u,g=arguments.length,v=g<3?o:a===null?a=Object.getOwnPropertyDescriptor(o,h):a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")v=Reflect.decorate(S,o,h,a);else for(var y=S.length-1;y>=0;y--)(u=S[y])&&(v=(g<3?u(v):g>3?u(o,h,v):u(o,h))||v);return g>3&&v&&Object.defineProperty(o,h,v),v},d=this&&this.__param||function(S,o){return function(h,a){o(h,a,S)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CompositionHelper=void 0;const l=r(4725),_=r(2585),b=r(2584);let w=i.CompositionHelper=class{get isComposing(){return this._isComposing}constructor(S,o,h,a,u,g){this._textarea=S,this._compositionView=o,this._bufferService=h,this._optionsService=a,this._coreService=u,this._renderService=g,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(S){this._compositionView.textContent=S.data,this.updateCompositionElements(),setTimeout(()=>{this._compositionPosition.end=this._textarea.value.length},0)}compositionend(){this._finalizeComposition(!0)}keydown(S){if(this._isComposing||this._isSendingComposition){if(S.keyCode===229||S.keyCode===16||S.keyCode===17||S.keyCode===18)return!1;this._finalizeComposition(!1)}return S.keyCode!==229||(this._handleAnyTextareaChanges(),!1)}_finalizeComposition(S){if(this._compositionView.classList.remove("active"),this._isComposing=!1,S){const o={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(()=>{if(this._isSendingComposition){let h;this._isSendingComposition=!1,o.start+=this._dataAlreadySent.length,h=this._isComposing?this._textarea.value.substring(o.start,o.end):this._textarea.value.substring(o.start),h.length>0&&this._coreService.triggerDataEvent(h,!0)}},0)}else{this._isSendingComposition=!1;const o=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(o,!0)}}_handleAnyTextareaChanges(){const S=this._textarea.value;setTimeout(()=>{if(!this._isComposing){const o=this._textarea.value,h=o.replace(S,"");this._dataAlreadySent=h,o.length>S.length?this._coreService.triggerDataEvent(h,!0):o.length<S.length?this._coreService.triggerDataEvent(`${b.C0.DEL}`,!0):o.length===S.length&&o!==S&&this._coreService.triggerDataEvent(o,!0)}},0)}updateCompositionElements(S){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){const o=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),h=this._renderService.dimensions.css.cell.height,a=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,u=o*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=u+"px",this._compositionView.style.top=a+"px",this._compositionView.style.height=h+"px",this._compositionView.style.lineHeight=h+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";const g=this._compositionView.getBoundingClientRect();this._textarea.style.left=u+"px",this._textarea.style.top=a+"px",this._textarea.style.width=Math.max(g.width,1)+"px",this._textarea.style.height=Math.max(g.height,1)+"px",this._textarea.style.lineHeight=g.height+"px"}S||setTimeout(()=>this.updateCompositionElements(!0),0)}}};i.CompositionHelper=w=c([d(2,_.IBufferService),d(3,_.IOptionsService),d(4,_.ICoreService),d(5,l.IRenderService)],w)},9806:(p,i)=>{function r(c,d,l){const _=l.getBoundingClientRect(),b=c.getComputedStyle(l),w=parseInt(b.getPropertyValue("padding-left")),S=parseInt(b.getPropertyValue("padding-top"));return[d.clientX-_.left-w,d.clientY-_.top-S]}Object.defineProperty(i,"__esModule",{value:!0}),i.getCoords=i.getCoordsRelativeToElement=void 0,i.getCoordsRelativeToElement=r,i.getCoords=function(c,d,l,_,b,w,S,o,h){if(!w)return;const a=r(c,d,l);return a?(a[0]=Math.ceil((a[0]+(h?S/2:0))/S),a[1]=Math.ceil(a[1]/o),a[0]=Math.min(Math.max(a[0],1),_+(h?1:0)),a[1]=Math.min(Math.max(a[1],1),b),a):void 0}},9504:(p,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.moveToCellSequence=void 0;const c=r(2584);function d(o,h,a,u){const g=o-l(o,a),v=h-l(h,a),y=Math.abs(g-v)-function(E,C,k){let B=0;const x=E-l(E,k),M=C-l(C,k);for(let O=0;O<Math.abs(x-M);O++){const j=_(E,C)==="A"?-1:1,$=k.buffer.lines.get(x+j*O);$!=null&&$.isWrapped&&B++}return B}(o,h,a);return S(y,w(_(o,h),u))}function l(o,h){let a=0,u=h.buffer.lines.get(o),g=u==null?void 0:u.isWrapped;for(;g&&o>=0&&o<h.rows;)a++,u=h.buffer.lines.get(--o),g=u==null?void 0:u.isWrapped;return a}function _(o,h){return o>h?"A":"B"}function b(o,h,a,u,g,v){let y=o,E=h,C="";for(;y!==a||E!==u;)y+=g?1:-1,g&&y>v.cols-1?(C+=v.buffer.translateBufferLineToString(E,!1,o,y),y=0,o=0,E++):!g&&y<0&&(C+=v.buffer.translateBufferLineToString(E,!1,0,o+1),y=v.cols-1,o=y,E--);return C+v.buffer.translateBufferLineToString(E,!1,o,y)}function w(o,h){const a=h?"O":"[";return c.C0.ESC+a+o}function S(o,h){o=Math.floor(o);let a="";for(let u=0;u<o;u++)a+=h;return a}i.moveToCellSequence=function(o,h,a,u){const g=a.buffer.x,v=a.buffer.y;if(!a.buffer.hasScrollback)return function(C,k,B,x,M,O){return d(k,x,M,O).length===0?"":S(b(C,k,C,k-l(k,M),!1,M).length,w("D",O))}(g,v,0,h,a,u)+d(v,h,a,u)+function(C,k,B,x,M,O){let j;j=d(k,x,M,O).length>0?x-l(x,M):k;const $=x,V=function(F,L,T,H,I,X){let J;return J=d(T,H,I,X).length>0?H-l(H,I):L,F<T&&J<=H||F>=T&&J<H?"C":"D"}(C,k,B,x,M,O);return S(b(C,j,B,$,V==="C",M).length,w(V,O))}(g,v,o,h,a,u);let y;if(v===h)return y=g>o?"D":"C",S(Math.abs(g-o),w(y,u));y=v>h?"D":"C";const E=Math.abs(v-h);return S(function(C,k){return k.cols-C}(v>h?o:g,a)+(E-1)*a.cols+1+((v>h?g:o)-1),w(y,u))}},1296:function(p,i,r){var c=this&&this.__decorate||function(M,O,j,$){var V,F=arguments.length,L=F<3?O:$===null?$=Object.getOwnPropertyDescriptor(O,j):$;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(M,O,j,$);else for(var T=M.length-1;T>=0;T--)(V=M[T])&&(L=(F<3?V(L):F>3?V(O,j,L):V(O,j))||L);return F>3&&L&&Object.defineProperty(O,j,L),L},d=this&&this.__param||function(M,O){return function(j,$){O(j,$,M)}};Object.defineProperty(i,"__esModule",{value:!0}),i.DomRenderer=void 0;const l=r(3787),_=r(2550),b=r(2223),w=r(6171),S=r(4725),o=r(8055),h=r(8460),a=r(844),u=r(2585),g="xterm-dom-renderer-owner-",v="xterm-rows",y="xterm-fg-",E="xterm-bg-",C="xterm-focus",k="xterm-selection";let B=1,x=i.DomRenderer=class extends a.Disposable{constructor(M,O,j,$,V,F,L,T,H,I){super(),this._element=M,this._screenElement=O,this._viewportElement=j,this._linkifier2=$,this._charSizeService=F,this._optionsService=L,this._bufferService=T,this._coreBrowserService=H,this._themeService=I,this._terminalClass=B++,this._rowElements=[],this.onRequestRedraw=this.register(new h.EventEmitter).event,this._rowContainer=document.createElement("div"),this._rowContainer.classList.add(v),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=document.createElement("div"),this._selectionContainer.classList.add(k),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=(0,w.createRenderDimensions)(),this._updateDimensions(),this.register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._themeService.onChangeColors(X=>this._injectCss(X))),this._injectCss(this._themeService.colors),this._rowFactory=V.createInstance(l.DomRendererRowFactory,document),this._element.classList.add(g+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this.register(this._linkifier2.onShowLinkUnderline(X=>this._handleLinkHover(X))),this.register(this._linkifier2.onHideLinkUnderline(X=>this._handleLinkLeave(X))),this.register((0,a.toDisposable)(()=>{this._element.classList.remove(g+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()})),this._widthCache=new _.WidthCache(document),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){const M=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*M,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*M),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/M),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/M),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(const j of this._rowElements)j.style.width=`${this.dimensions.css.canvas.width}px`,j.style.height=`${this.dimensions.css.cell.height}px`,j.style.lineHeight=`${this.dimensions.css.cell.height}px`,j.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));const O=`${this._terminalSelector} .${v} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=O,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(M){this._themeStyleElement||(this._themeStyleElement=document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let O=`${this._terminalSelector} .${v} { color: ${M.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;O+=`${this._terminalSelector} .${v} .xterm-dim { color: ${o.color.multiplyOpacity(M.foreground,.5).css};}`,O+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`,O+="@keyframes blink_box_shadow_"+this._terminalClass+" { 50% {  border-bottom-style: hidden; }}",O+="@keyframes blink_block_"+this._terminalClass+` { 0% {  background-color: ${M.cursor.css};  color: ${M.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${M.cursor.css}; }}`,O+=`${this._terminalSelector} .${v}.${C} .xterm-cursor.xterm-cursor-blink:not(.xterm-cursor-block) { animation: blink_box_shadow_`+this._terminalClass+` 1s step-end infinite;}${this._terminalSelector} .${v}.${C} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: blink_block_`+this._terminalClass+` 1s step-end infinite;}${this._terminalSelector} .${v} .xterm-cursor.xterm-cursor-block { background-color: ${M.cursor.css}; color: ${M.cursorAccent.css};}${this._terminalSelector} .${v} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${M.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${v} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${M.cursor.css} inset;}${this._terminalSelector} .${v} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${M.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,O+=`${this._terminalSelector} .${k} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${k} div { position: absolute; background-color: ${M.selectionBackgroundOpaque.css};}${this._terminalSelector} .${k} div { position: absolute; background-color: ${M.selectionInactiveBackgroundOpaque.css};}`;for(const[j,$]of M.ansi.entries())O+=`${this._terminalSelector} .${y}${j} { color: ${$.css}; }${this._terminalSelector} .${y}${j}.xterm-dim { color: ${o.color.multiplyOpacity($,.5).css}; }${this._terminalSelector} .${E}${j} { background-color: ${$.css}; }`;O+=`${this._terminalSelector} .${y}${b.INVERTED_DEFAULT_COLOR} { color: ${o.color.opaque(M.background).css}; }${this._terminalSelector} .${y}${b.INVERTED_DEFAULT_COLOR}.xterm-dim { color: ${o.color.multiplyOpacity(o.color.opaque(M.background),.5).css}; }${this._terminalSelector} .${E}${b.INVERTED_DEFAULT_COLOR} { background-color: ${M.foreground.css}; }`,this._themeStyleElement.textContent=O}_setDefaultSpacing(){const M=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${M}px`,this._rowFactory.defaultSpacing=M}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(M,O){for(let j=this._rowElements.length;j<=O;j++){const $=document.createElement("div");this._rowContainer.appendChild($),this._rowElements.push($)}for(;this._rowElements.length>O;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(M,O){this._refreshRowElements(M,O),this._updateDimensions()}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(C)}handleFocus(){this._rowContainer.classList.add(C),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(M,O,j){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(M,O,j),this.renderRows(0,this._bufferService.rows-1),!M||!O)return;const $=M[1]-this._bufferService.buffer.ydisp,V=O[1]-this._bufferService.buffer.ydisp,F=Math.max($,0),L=Math.min(V,this._bufferService.rows-1);if(F>=this._bufferService.rows||L<0)return;const T=document.createDocumentFragment();if(j){const H=M[0]>O[0];T.appendChild(this._createSelectionElement(F,H?O[0]:M[0],H?M[0]:O[0],L-F+1))}else{const H=$===F?M[0]:0,I=F===V?O[0]:this._bufferService.cols;T.appendChild(this._createSelectionElement(F,H,I));const X=L-F-1;if(T.appendChild(this._createSelectionElement(F+1,0,this._bufferService.cols,X)),F!==L){const J=V===L?O[0]:this._bufferService.cols;T.appendChild(this._createSelectionElement(L,0,J))}}this._selectionContainer.appendChild(T)}_createSelectionElement(M,O,j,$=1){const V=document.createElement("div");return V.style.height=$*this.dimensions.css.cell.height+"px",V.style.top=M*this.dimensions.css.cell.height+"px",V.style.left=O*this.dimensions.css.cell.width+"px",V.style.width=this.dimensions.css.cell.width*(j-O)+"px",V}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(const M of this._rowElements)M.replaceChildren()}renderRows(M,O){const j=this._bufferService.buffer,$=j.ybase+j.y,V=Math.min(j.x,this._bufferService.cols-1),F=this._optionsService.rawOptions.cursorBlink,L=this._optionsService.rawOptions.cursorStyle,T=this._optionsService.rawOptions.cursorInactiveStyle;for(let H=M;H<=O;H++){const I=H+j.ydisp,X=this._rowElements[H],J=j.lines.get(I);if(!X||!J)break;X.replaceChildren(...this._rowFactory.createRow(J,I,I===$,L,T,V,F,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${g}${this._terminalClass}`}_handleLinkHover(M){this._setCellUnderline(M.x1,M.x2,M.y1,M.y2,M.cols,!0)}_handleLinkLeave(M){this._setCellUnderline(M.x1,M.x2,M.y1,M.y2,M.cols,!1)}_setCellUnderline(M,O,j,$,V,F){j<0&&(M=0),$<0&&(O=0);const L=this._bufferService.rows-1;j=Math.max(Math.min(j,L),0),$=Math.max(Math.min($,L),0),V=Math.min(V,this._bufferService.cols);const T=this._bufferService.buffer,H=T.ybase+T.y,I=Math.min(T.x,V-1),X=this._optionsService.rawOptions.cursorBlink,J=this._optionsService.rawOptions.cursorStyle,se=this._optionsService.rawOptions.cursorInactiveStyle;for(let te=j;te<=$;++te){const de=te+T.ydisp,A=this._rowElements[te],z=T.lines.get(de);if(!A||!z)break;A.replaceChildren(...this._rowFactory.createRow(z,de,de===H,J,se,I,X,this.dimensions.css.cell.width,this._widthCache,F?te===j?M:0:-1,F?(te===$?O:V)-1:-1))}}};i.DomRenderer=x=c([d(4,u.IInstantiationService),d(5,S.ICharSizeService),d(6,u.IOptionsService),d(7,u.IBufferService),d(8,S.ICoreBrowserService),d(9,S.IThemeService)],x)},3787:function(p,i,r){var c=this&&this.__decorate||function(y,E,C,k){var B,x=arguments.length,M=x<3?E:k===null?k=Object.getOwnPropertyDescriptor(E,C):k;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")M=Reflect.decorate(y,E,C,k);else for(var O=y.length-1;O>=0;O--)(B=y[O])&&(M=(x<3?B(M):x>3?B(E,C,M):B(E,C))||M);return x>3&&M&&Object.defineProperty(E,C,M),M},d=this&&this.__param||function(y,E){return function(C,k){E(C,k,y)}};Object.defineProperty(i,"__esModule",{value:!0}),i.DomRendererRowFactory=void 0;const l=r(2223),_=r(643),b=r(511),w=r(2585),S=r(8055),o=r(4725),h=r(4269),a=r(6171),u=r(3734);let g=i.DomRendererRowFactory=class{constructor(y,E,C,k,B,x,M){this._document=y,this._characterJoinerService=E,this._optionsService=C,this._coreBrowserService=k,this._coreService=B,this._decorationService=x,this._themeService=M,this._workCell=new b.CellData,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(y,E,C){this._selectionStart=y,this._selectionEnd=E,this._columnSelectMode=C}createRow(y,E,C,k,B,x,M,O,j,$,V){const F=[],L=this._characterJoinerService.getJoinedCharacters(E),T=this._themeService.colors;let H,I=y.getNoBgTrimmedLength();C&&I<x+1&&(I=x+1);let X=0,J="",se=0,te=0,de=0,A=!1,z=0,Z=!1,K=0;const ae=[],ee=$!==-1&&V!==-1;for(let me=0;me<I;me++){y.loadCell(me,this._workCell);let we=this._workCell.getWidth();if(we===0)continue;let ke=!1,Xe=me,ue=this._workCell;if(L.length>0&&me===L[0][0]){ke=!0;const Se=L.shift();ue=new h.JoinedCellData(this._workCell,y.translateToString(!0,Se[0],Se[1]),Se[1]-Se[0]),Xe=Se[1]-1,we=ue.getWidth()}const lt=this._isCellInSelection(me,E),Qe=C&&me===x,at=ee&&me>=$&&me<=V;let _t=!1;this._decorationService.forEachDecorationAtCell(me,E,void 0,Se=>{_t=!0});let Oe=ue.getChars()||_.WHITESPACE_CELL_CHAR;if(Oe===" "&&(ue.isUnderline()||ue.isOverline())&&(Oe=""),K=we*O-j.get(Oe,ue.isBold(),ue.isItalic()),H){if(X&&(lt&&Z||!lt&&!Z&&ue.bg===se)&&(lt&&Z&&T.selectionForeground||ue.fg===te)&&ue.extended.ext===de&&at===A&&K===z&&!Qe&&!ke&&!_t){J+=Oe,X++;continue}X&&(H.textContent=J),H=this._document.createElement("span"),X=0,J=""}else H=this._document.createElement("span");if(se=ue.bg,te=ue.fg,de=ue.extended.ext,A=at,z=K,Z=lt,ke&&x>=me&&x<=Xe&&(x=me),!this._coreService.isCursorHidden&&Qe){if(ae.push("xterm-cursor"),this._coreBrowserService.isFocused)M&&ae.push("xterm-cursor-blink"),ae.push(k==="bar"?"xterm-cursor-bar":k==="underline"?"xterm-cursor-underline":"xterm-cursor-block");else if(B)switch(B){case"outline":ae.push("xterm-cursor-outline");break;case"block":ae.push("xterm-cursor-block");break;case"bar":ae.push("xterm-cursor-bar");break;case"underline":ae.push("xterm-cursor-underline")}}if(ue.isBold()&&ae.push("xterm-bold"),ue.isItalic()&&ae.push("xterm-italic"),ue.isDim()&&ae.push("xterm-dim"),J=ue.isInvisible()?_.WHITESPACE_CELL_CHAR:ue.getChars()||_.WHITESPACE_CELL_CHAR,ue.isUnderline()&&(ae.push(`xterm-underline-${ue.extended.underlineStyle}`),J===" "&&(J=""),!ue.isUnderlineColorDefault()))if(ue.isUnderlineColorRGB())H.style.textDecorationColor=`rgb(${u.AttributeData.toColorRGB(ue.getUnderlineColor()).join(",")})`;else{let Se=ue.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&ue.isBold()&&Se<8&&(Se+=8),H.style.textDecorationColor=T.ansi[Se].css}ue.isOverline()&&(ae.push("xterm-overline"),J===" "&&(J="")),ue.isStrikethrough()&&ae.push("xterm-strikethrough"),at&&(H.style.textDecoration="underline");let Le=ue.getFgColor(),We=ue.getFgColorMode(),$e=ue.getBgColor(),ct=ue.getBgColorMode();const ht=!!ue.isInverse();if(ht){const Se=Le;Le=$e,$e=Se;const mt=We;We=ct,ct=mt}let Ue,pt,Fe,Ze=!1;switch(this._decorationService.forEachDecorationAtCell(me,E,void 0,Se=>{Se.options.layer!=="top"&&Ze||(Se.backgroundColorRGB&&(ct=50331648,$e=Se.backgroundColorRGB.rgba>>8&16777215,Ue=Se.backgroundColorRGB),Se.foregroundColorRGB&&(We=50331648,Le=Se.foregroundColorRGB.rgba>>8&16777215,pt=Se.foregroundColorRGB),Ze=Se.options.layer==="top")}),!Ze&&lt&&(Ue=this._coreBrowserService.isFocused?T.selectionBackgroundOpaque:T.selectionInactiveBackgroundOpaque,$e=Ue.rgba>>8&16777215,ct=50331648,Ze=!0,T.selectionForeground&&(We=50331648,Le=T.selectionForeground.rgba>>8&16777215,pt=T.selectionForeground)),Ze&&ae.push("xterm-decoration-top"),ct){case 16777216:case 33554432:Fe=T.ansi[$e],ae.push(`xterm-bg-${$e}`);break;case 50331648:Fe=S.rgba.toColor($e>>16,$e>>8&255,255&$e),this._addStyle(H,`background-color:#${v(($e>>>0).toString(16),"0",6)}`);break;default:ht?(Fe=T.foreground,ae.push(`xterm-bg-${l.INVERTED_DEFAULT_COLOR}`)):Fe=T.background}switch(Ue||ue.isDim()&&(Ue=S.color.multiplyOpacity(Fe,.5)),We){case 16777216:case 33554432:ue.isBold()&&Le<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(Le+=8),this._applyMinimumContrast(H,Fe,T.ansi[Le],ue,Ue,void 0)||ae.push(`xterm-fg-${Le}`);break;case 50331648:const Se=S.rgba.toColor(Le>>16&255,Le>>8&255,255&Le);this._applyMinimumContrast(H,Fe,Se,ue,Ue,pt)||this._addStyle(H,`color:#${v(Le.toString(16),"0",6)}`);break;default:this._applyMinimumContrast(H,Fe,T.foreground,ue,Ue,void 0)||ht&&ae.push(`xterm-fg-${l.INVERTED_DEFAULT_COLOR}`)}ae.length&&(H.className=ae.join(" "),ae.length=0),Qe||ke||_t?H.textContent=J:X++,K!==this.defaultSpacing&&(H.style.letterSpacing=`${K}px`),F.push(H),me=Xe}return H&&X&&(H.textContent=J),F}_applyMinimumContrast(y,E,C,k,B,x){if(this._optionsService.rawOptions.minimumContrastRatio===1||(0,a.excludeFromContrastRatioDemands)(k.getCode()))return!1;const M=this._getContrastCache(k);let O;if(B||x||(O=M.getColor(E.rgba,C.rgba)),O===void 0){const j=this._optionsService.rawOptions.minimumContrastRatio/(k.isDim()?2:1);O=S.color.ensureContrastRatio(B||E,x||C,j),M.setColor((B||E).rgba,(x||C).rgba,O??null)}return!!O&&(this._addStyle(y,`color:${O.css}`),!0)}_getContrastCache(y){return y.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(y,E){y.setAttribute("style",`${y.getAttribute("style")||""}${E};`)}_isCellInSelection(y,E){const C=this._selectionStart,k=this._selectionEnd;return!(!C||!k)&&(this._columnSelectMode?C[0]<=k[0]?y>=C[0]&&E>=C[1]&&y<k[0]&&E<=k[1]:y<C[0]&&E>=C[1]&&y>=k[0]&&E<=k[1]:E>C[1]&&E<k[1]||C[1]===k[1]&&E===C[1]&&y>=C[0]&&y<k[0]||C[1]<k[1]&&E===k[1]&&y<k[0]||C[1]<k[1]&&E===C[1]&&y>=C[0])}};function v(y,E,C){for(;y.length<C;)y=E+y;return y}i.DomRendererRowFactory=g=c([d(1,o.ICharacterJoinerService),d(2,w.IOptionsService),d(3,o.ICoreBrowserService),d(4,w.ICoreService),d(5,w.IDecorationService),d(6,o.IThemeService)],g)},2550:(p,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.WidthCache=void 0,i.WidthCache=class{constructor(r){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=r.createElement("div"),this._container.style.position="absolute",this._container.style.top="-50000px",this._container.style.width="50000px",this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";const c=r.createElement("span"),d=r.createElement("span");d.style.fontWeight="bold";const l=r.createElement("span");l.style.fontStyle="italic";const _=r.createElement("span");_.style.fontWeight="bold",_.style.fontStyle="italic",this._measureElements=[c,d,l,_],this._container.appendChild(c),this._container.appendChild(d),this._container.appendChild(l),this._container.appendChild(_),r.body.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(r,c,d,l){r===this._font&&c===this._fontSize&&d===this._weight&&l===this._weightBold||(this._font=r,this._fontSize=c,this._weight=d,this._weightBold=l,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${d}`,this._measureElements[1].style.fontWeight=`${l}`,this._measureElements[2].style.fontWeight=`${d}`,this._measureElements[3].style.fontWeight=`${l}`,this.clear())}get(r,c,d){let l=0;if(!c&&!d&&r.length===1&&(l=r.charCodeAt(0))<256)return this._flat[l]!==-9999?this._flat[l]:this._flat[l]=this._measure(r,0);let _=r;c&&(_+="B"),d&&(_+="I");let b=this._holey.get(_);if(b===void 0){let w=0;c&&(w|=1),d&&(w|=2),b=this._measure(r,w),this._holey.set(_,b)}return b}_measure(r,c){const d=this._measureElements[c];return d.textContent=r.repeat(32),d.offsetWidth/32}}},2223:(p,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.TEXT_BASELINE=i.DIM_OPACITY=i.INVERTED_DEFAULT_COLOR=void 0;const c=r(6114);i.INVERTED_DEFAULT_COLOR=257,i.DIM_OPACITY=.5,i.TEXT_BASELINE=c.isFirefox||c.isLegacyEdge?"bottom":"ideographic"},6171:(p,i)=>{function r(c){return 57508<=c&&c<=57558}Object.defineProperty(i,"__esModule",{value:!0}),i.createRenderDimensions=i.excludeFromContrastRatioDemands=i.isRestrictedPowerlineGlyph=i.isPowerlineGlyph=i.throwIfFalsy=void 0,i.throwIfFalsy=function(c){if(!c)throw new Error("value must not be falsy");return c},i.isPowerlineGlyph=r,i.isRestrictedPowerlineGlyph=function(c){return 57520<=c&&c<=57527},i.excludeFromContrastRatioDemands=function(c){return r(c)||function(d){return 9472<=d&&d<=9631}(c)},i.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}}},456:(p,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.SelectionModel=void 0,i.SelectionModel=class{constructor(r){this._bufferService=r,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){const r=this.selectionStart[0]+this.selectionStartLength;return r>this._bufferService.cols?r%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(r/this._bufferService.cols)-1]:[r%this._bufferService.cols,this.selectionStart[1]+Math.floor(r/this._bufferService.cols)]:[r,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){const r=this.selectionStart[0]+this.selectionStartLength;return r>this._bufferService.cols?[r%this._bufferService.cols,this.selectionStart[1]+Math.floor(r/this._bufferService.cols)]:[Math.max(r,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){const r=this.selectionStart,c=this.selectionEnd;return!(!r||!c)&&(r[1]>c[1]||r[1]===c[1]&&r[0]>c[0])}handleTrim(r){return this.selectionStart&&(this.selectionStart[1]-=r),this.selectionEnd&&(this.selectionEnd[1]-=r),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}}},428:function(p,i,r){var c=this&&this.__decorate||function(o,h,a,u){var g,v=arguments.length,y=v<3?h:u===null?u=Object.getOwnPropertyDescriptor(h,a):u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(o,h,a,u);else for(var E=o.length-1;E>=0;E--)(g=o[E])&&(y=(v<3?g(y):v>3?g(h,a,y):g(h,a))||y);return v>3&&y&&Object.defineProperty(h,a,y),y},d=this&&this.__param||function(o,h){return function(a,u){h(a,u,o)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CharSizeService=void 0;const l=r(2585),_=r(8460),b=r(844);let w=i.CharSizeService=class extends b.Disposable{get hasValidSize(){return this.width>0&&this.height>0}constructor(o,h,a){super(),this._optionsService=a,this.width=0,this.height=0,this._onCharSizeChange=this.register(new _.EventEmitter),this.onCharSizeChange=this._onCharSizeChange.event,this._measureStrategy=new S(o,h,this._optionsService),this.register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],()=>this.measure()))}measure(){const o=this._measureStrategy.measure();o.width===this.width&&o.height===this.height||(this.width=o.width,this.height=o.height,this._onCharSizeChange.fire())}};i.CharSizeService=w=c([d(2,l.IOptionsService)],w);class S{constructor(h,a,u){this._document=h,this._parentElement=a,this._optionsService=u,this._result={width:0,height:0},this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`;const h={height:Number(this._measureElement.offsetHeight),width:Number(this._measureElement.offsetWidth)};return h.width!==0&&h.height!==0&&(this._result.width=h.width/32,this._result.height=Math.ceil(h.height)),this._result}}},4269:function(p,i,r){var c=this&&this.__decorate||function(h,a,u,g){var v,y=arguments.length,E=y<3?a:g===null?g=Object.getOwnPropertyDescriptor(a,u):g;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(h,a,u,g);else for(var C=h.length-1;C>=0;C--)(v=h[C])&&(E=(y<3?v(E):y>3?v(a,u,E):v(a,u))||E);return y>3&&E&&Object.defineProperty(a,u,E),E},d=this&&this.__param||function(h,a){return function(u,g){a(u,g,h)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CharacterJoinerService=i.JoinedCellData=void 0;const l=r(3734),_=r(643),b=r(511),w=r(2585);class S extends l.AttributeData{constructor(a,u,g){super(),this.content=0,this.combinedData="",this.fg=a.fg,this.bg=a.bg,this.combinedData=u,this._width=g}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(a){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}i.JoinedCellData=S;let o=i.CharacterJoinerService=class wr{constructor(a){this._bufferService=a,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new b.CellData}register(a){const u={id:this._nextCharacterJoinerId++,handler:a};return this._characterJoiners.push(u),u.id}deregister(a){for(let u=0;u<this._characterJoiners.length;u++)if(this._characterJoiners[u].id===a)return this._characterJoiners.splice(u,1),!0;return!1}getJoinedCharacters(a){if(this._characterJoiners.length===0)return[];const u=this._bufferService.buffer.lines.get(a);if(!u||u.length===0)return[];const g=[],v=u.translateToString(!0);let y=0,E=0,C=0,k=u.getFg(0),B=u.getBg(0);for(let x=0;x<u.getTrimmedLength();x++)if(u.loadCell(x,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==k||this._workCell.bg!==B){if(x-y>1){const M=this._getJoinedRanges(v,C,E,u,y);for(let O=0;O<M.length;O++)g.push(M[O])}y=x,C=E,k=this._workCell.fg,B=this._workCell.bg}E+=this._workCell.getChars().length||_.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-y>1){const x=this._getJoinedRanges(v,C,E,u,y);for(let M=0;M<x.length;M++)g.push(x[M])}return g}_getJoinedRanges(a,u,g,v,y){const E=a.substring(u,g);let C=[];try{C=this._characterJoiners[0].handler(E)}catch(k){console.error(k)}for(let k=1;k<this._characterJoiners.length;k++)try{const B=this._characterJoiners[k].handler(E);for(let x=0;x<B.length;x++)wr._mergeRanges(C,B[x])}catch(B){console.error(B)}return this._stringRangesToCellRanges(C,v,y),C}_stringRangesToCellRanges(a,u,g){let v=0,y=!1,E=0,C=a[v];if(C){for(let k=g;k<this._bufferService.cols;k++){const B=u.getWidth(k),x=u.getString(k).length||_.WHITESPACE_CELL_CHAR.length;if(B!==0){if(!y&&C[0]<=E&&(C[0]=k,y=!0),C[1]<=E){if(C[1]=k,C=a[++v],!C)break;C[0]<=E?(C[0]=k,y=!0):y=!1}E+=x}}C&&(C[1]=this._bufferService.cols)}}static _mergeRanges(a,u){let g=!1;for(let v=0;v<a.length;v++){const y=a[v];if(g){if(u[1]<=y[0])return a[v-1][1]=u[1],a;if(u[1]<=y[1])return a[v-1][1]=Math.max(u[1],y[1]),a.splice(v,1),a;a.splice(v,1),v--}else{if(u[1]<=y[0])return a.splice(v,0,u),a;if(u[1]<=y[1])return y[0]=Math.min(u[0],y[0]),a;u[0]<y[1]&&(y[0]=Math.min(u[0],y[0]),g=!0)}}return g?a[a.length-1][1]=u[1]:a.push(u),a}};i.CharacterJoinerService=o=c([d(0,w.IBufferService)],o)},5114:(p,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CoreBrowserService=void 0,i.CoreBrowserService=class{constructor(r,c){this._textarea=r,this.window=c,this._isFocused=!1,this._cachedIsFocused=void 0,this._textarea.addEventListener("focus",()=>this._isFocused=!0),this._textarea.addEventListener("blur",()=>this._isFocused=!1)}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask(()=>this._cachedIsFocused=void 0)),this._cachedIsFocused}}},8934:function(p,i,r){var c=this&&this.__decorate||function(w,S,o,h){var a,u=arguments.length,g=u<3?S:h===null?h=Object.getOwnPropertyDescriptor(S,o):h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(w,S,o,h);else for(var v=w.length-1;v>=0;v--)(a=w[v])&&(g=(u<3?a(g):u>3?a(S,o,g):a(S,o))||g);return u>3&&g&&Object.defineProperty(S,o,g),g},d=this&&this.__param||function(w,S){return function(o,h){S(o,h,w)}};Object.defineProperty(i,"__esModule",{value:!0}),i.MouseService=void 0;const l=r(4725),_=r(9806);let b=i.MouseService=class{constructor(w,S){this._renderService=w,this._charSizeService=S}getCoords(w,S,o,h,a){return(0,_.getCoords)(window,w,S,o,h,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,a)}getMouseReportCoords(w,S){const o=(0,_.getCoordsRelativeToElement)(window,w,S);if(this._charSizeService.hasValidSize)return o[0]=Math.min(Math.max(o[0],0),this._renderService.dimensions.css.canvas.width-1),o[1]=Math.min(Math.max(o[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(o[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(o[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(o[0]),y:Math.floor(o[1])}}};i.MouseService=b=c([d(0,l.IRenderService),d(1,l.ICharSizeService)],b)},3230:function(p,i,r){var c=this&&this.__decorate||function(g,v,y,E){var C,k=arguments.length,B=k<3?v:E===null?E=Object.getOwnPropertyDescriptor(v,y):E;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")B=Reflect.decorate(g,v,y,E);else for(var x=g.length-1;x>=0;x--)(C=g[x])&&(B=(k<3?C(B):k>3?C(v,y,B):C(v,y))||B);return k>3&&B&&Object.defineProperty(v,y,B),B},d=this&&this.__param||function(g,v){return function(y,E){v(y,E,g)}};Object.defineProperty(i,"__esModule",{value:!0}),i.RenderService=void 0;const l=r(3656),_=r(6193),b=r(5596),w=r(4725),S=r(8460),o=r(844),h=r(7226),a=r(2585);let u=i.RenderService=class extends o.Disposable{get dimensions(){return this._renderer.value.dimensions}constructor(g,v,y,E,C,k,B,x){if(super(),this._rowCount=g,this._charSizeService=E,this._renderer=this.register(new o.MutableDisposable),this._pausedResizeTask=new h.DebouncedIdleTask,this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this.register(new S.EventEmitter),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this.register(new S.EventEmitter),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this.register(new S.EventEmitter),this.onRender=this._onRender.event,this._onRefreshRequest=this.register(new S.EventEmitter),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new _.RenderDebouncer(B.window,(M,O)=>this._renderRows(M,O)),this.register(this._renderDebouncer),this._screenDprMonitor=new b.ScreenDprMonitor(B.window),this._screenDprMonitor.setListener(()=>this.handleDevicePixelRatioChange()),this.register(this._screenDprMonitor),this.register(k.onResize(()=>this._fullRefresh())),this.register(k.buffers.onBufferActivate(()=>{var M;return(M=this._renderer.value)===null||M===void 0?void 0:M.clear()})),this.register(y.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._charSizeService.onCharSizeChange(()=>this.handleCharSizeChanged())),this.register(C.onDecorationRegistered(()=>this._fullRefresh())),this.register(C.onDecorationRemoved(()=>this._fullRefresh())),this.register(y.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio"],()=>{this.clear(),this.handleResize(k.cols,k.rows),this._fullRefresh()})),this.register(y.onMultipleOptionChange(["cursorBlink","cursorStyle"],()=>this.refreshRows(k.buffer.y,k.buffer.y,!0))),this.register((0,l.addDisposableDomListener)(B.window,"resize",()=>this.handleDevicePixelRatioChange())),this.register(x.onChangeColors(()=>this._fullRefresh())),"IntersectionObserver"in B.window){const M=new B.window.IntersectionObserver(O=>this._handleIntersectionChange(O[O.length-1]),{threshold:0});M.observe(v),this.register({dispose:()=>M.disconnect()})}}_handleIntersectionChange(g){this._isPaused=g.isIntersecting===void 0?g.intersectionRatio===0:!g.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(g,v,y=!1){this._isPaused?this._needsFullRefresh=!0:(y||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(g,v,this._rowCount))}_renderRows(g,v){this._renderer.value&&(g=Math.min(g,this._rowCount-1),v=Math.min(v,this._rowCount-1),this._renderer.value.renderRows(g,v),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:g,end:v}),this._onRender.fire({start:g,end:v}),this._isNextRenderRedrawOnly=!0)}resize(g,v){this._rowCount=v,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(g){this._renderer.value=g,this._renderer.value.onRequestRedraw(v=>this.refreshRows(v.start,v.end,!0)),this._needsSelectionRefresh=!0,this._fullRefresh()}addRefreshCallback(g){return this._renderDebouncer.addRefreshCallback(g)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){var g,v;this._renderer.value&&((v=(g=this._renderer.value).clearTextureAtlas)===null||v===void 0||v.call(g),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(g,v){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set(()=>this._renderer.value.handleResize(g,v)):this._renderer.value.handleResize(g,v),this._fullRefresh())}handleCharSizeChanged(){var g;(g=this._renderer.value)===null||g===void 0||g.handleCharSizeChanged()}handleBlur(){var g;(g=this._renderer.value)===null||g===void 0||g.handleBlur()}handleFocus(){var g;(g=this._renderer.value)===null||g===void 0||g.handleFocus()}handleSelectionChanged(g,v,y){var E;this._selectionState.start=g,this._selectionState.end=v,this._selectionState.columnSelectMode=y,(E=this._renderer.value)===null||E===void 0||E.handleSelectionChanged(g,v,y)}handleCursorMove(){var g;(g=this._renderer.value)===null||g===void 0||g.handleCursorMove()}clear(){var g;(g=this._renderer.value)===null||g===void 0||g.clear()}};i.RenderService=u=c([d(2,a.IOptionsService),d(3,w.ICharSizeService),d(4,a.IDecorationService),d(5,a.IBufferService),d(6,w.ICoreBrowserService),d(7,w.IThemeService)],u)},9312:function(p,i,r){var c=this&&this.__decorate||function(C,k,B,x){var M,O=arguments.length,j=O<3?k:x===null?x=Object.getOwnPropertyDescriptor(k,B):x;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")j=Reflect.decorate(C,k,B,x);else for(var $=C.length-1;$>=0;$--)(M=C[$])&&(j=(O<3?M(j):O>3?M(k,B,j):M(k,B))||j);return O>3&&j&&Object.defineProperty(k,B,j),j},d=this&&this.__param||function(C,k){return function(B,x){k(B,x,C)}};Object.defineProperty(i,"__esModule",{value:!0}),i.SelectionService=void 0;const l=r(9806),_=r(9504),b=r(456),w=r(4725),S=r(8460),o=r(844),h=r(6114),a=r(4841),u=r(511),g=r(2585),v=String.fromCharCode(160),y=new RegExp(v,"g");let E=i.SelectionService=class extends o.Disposable{constructor(C,k,B,x,M,O,j,$,V){super(),this._element=C,this._screenElement=k,this._linkifier=B,this._bufferService=x,this._coreService=M,this._mouseService=O,this._optionsService=j,this._renderService=$,this._coreBrowserService=V,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new u.CellData,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this.register(new S.EventEmitter),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this.register(new S.EventEmitter),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this.register(new S.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this.register(new S.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=F=>this._handleMouseMove(F),this._mouseUpListener=F=>this._handleMouseUp(F),this._coreService.onUserInput(()=>{this.hasSelection&&this.clearSelection()}),this._trimListener=this._bufferService.buffer.lines.onTrim(F=>this._handleTrim(F)),this.register(this._bufferService.buffers.onBufferActivate(F=>this._handleBufferActivate(F))),this.enable(),this._model=new b.SelectionModel(this._bufferService),this._activeSelectionMode=0,this.register((0,o.toDisposable)(()=>{this._removeMouseDownListeners()}))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){const C=this._model.finalSelectionStart,k=this._model.finalSelectionEnd;return!(!C||!k||C[0]===k[0]&&C[1]===k[1])}get selectionText(){const C=this._model.finalSelectionStart,k=this._model.finalSelectionEnd;if(!C||!k)return"";const B=this._bufferService.buffer,x=[];if(this._activeSelectionMode===3){if(C[0]===k[0])return"";const M=C[0]<k[0]?C[0]:k[0],O=C[0]<k[0]?k[0]:C[0];for(let j=C[1];j<=k[1];j++){const $=B.translateBufferLineToString(j,!0,M,O);x.push($)}}else{const M=C[1]===k[1]?k[0]:void 0;x.push(B.translateBufferLineToString(C[1],!0,C[0],M));for(let O=C[1]+1;O<=k[1]-1;O++){const j=B.lines.get(O),$=B.translateBufferLineToString(O,!0);j!=null&&j.isWrapped?x[x.length-1]+=$:x.push($)}if(C[1]!==k[1]){const O=B.lines.get(k[1]),j=B.translateBufferLineToString(k[1],!0,0,k[0]);O&&O.isWrapped?x[x.length-1]+=j:x.push(j)}}return x.map(M=>M.replace(y," ")).join(h.isWindows?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(C){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._refresh())),h.isLinux&&C&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(C){const k=this._getMouseBufferCoords(C),B=this._model.finalSelectionStart,x=this._model.finalSelectionEnd;return!!(B&&x&&k)&&this._areCoordsInSelection(k,B,x)}isCellInSelection(C,k){const B=this._model.finalSelectionStart,x=this._model.finalSelectionEnd;return!(!B||!x)&&this._areCoordsInSelection([C,k],B,x)}_areCoordsInSelection(C,k,B){return C[1]>k[1]&&C[1]<B[1]||k[1]===B[1]&&C[1]===k[1]&&C[0]>=k[0]&&C[0]<B[0]||k[1]<B[1]&&C[1]===B[1]&&C[0]<B[0]||k[1]<B[1]&&C[1]===k[1]&&C[0]>=k[0]}_selectWordAtCursor(C,k){var B,x;const M=(x=(B=this._linkifier.currentLink)===null||B===void 0?void 0:B.link)===null||x===void 0?void 0:x.range;if(M)return this._model.selectionStart=[M.start.x-1,M.start.y-1],this._model.selectionStartLength=(0,a.getRangeLength)(M,this._bufferService.cols),this._model.selectionEnd=void 0,!0;const O=this._getMouseBufferCoords(C);return!!O&&(this._selectWordAt(O,k),this._model.selectionEnd=void 0,!0)}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(C,k){this._model.clearSelection(),C=Math.max(C,0),k=Math.min(k,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,C],this._model.selectionEnd=[this._bufferService.cols,k],this.refresh(),this._onSelectionChange.fire()}_handleTrim(C){this._model.handleTrim(C)&&this.refresh()}_getMouseBufferCoords(C){const k=this._mouseService.getCoords(C,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(k)return k[0]--,k[1]--,k[1]+=this._bufferService.buffer.ydisp,k}_getMouseEventScrollAmount(C){let k=(0,l.getCoordsRelativeToElement)(this._coreBrowserService.window,C,this._screenElement)[1];const B=this._renderService.dimensions.css.canvas.height;return k>=0&&k<=B?0:(k>B&&(k-=B),k=Math.min(Math.max(k,-50),50),k/=50,k/Math.abs(k)+Math.round(14*k))}shouldForceSelection(C){return h.isMac?C.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:C.shiftKey}handleMouseDown(C){if(this._mouseDownTimeStamp=C.timeStamp,(C.button!==2||!this.hasSelection)&&C.button===0){if(!this._enabled){if(!this.shouldForceSelection(C))return;C.stopPropagation()}C.preventDefault(),this._dragScrollAmount=0,this._enabled&&C.shiftKey?this._handleIncrementalClick(C):C.detail===1?this._handleSingleClick(C):C.detail===2?this._handleDoubleClick(C):C.detail===3&&this._handleTripleClick(C),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval(()=>this._dragScroll(),50)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(C){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(C))}_handleSingleClick(C){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(C)?3:0,this._model.selectionStart=this._getMouseBufferCoords(C),!this._model.selectionStart)return;this._model.selectionEnd=void 0;const k=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);k&&k.length!==this._model.selectionStart[0]&&k.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(C){this._selectWordAtCursor(C,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(C){const k=this._getMouseBufferCoords(C);k&&(this._activeSelectionMode=2,this._selectLineAt(k[1]))}shouldColumnSelect(C){return C.altKey&&!(h.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(C){if(C.stopImmediatePropagation(),!this._model.selectionStart)return;const k=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(C),!this._model.selectionEnd)return void this.refresh(!0);this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(C),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));const B=this._bufferService.buffer;if(this._model.selectionEnd[1]<B.lines.length){const x=B.lines.get(this._model.selectionEnd[1]);x&&x.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]++}k&&k[0]===this._model.selectionEnd[0]&&k[1]===this._model.selectionEnd[1]||this.refresh(!0)}_dragScroll(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});const C=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(C.ydisp+this._bufferService.rows,C.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=C.ydisp),this.refresh()}}_handleMouseUp(C){const k=C.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&k<500&&C.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){const B=this._mouseService.getCoords(C,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(B&&B[0]!==void 0&&B[1]!==void 0){const x=(0,_.moveToCellSequence)(B[0]-1,B[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(x,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){const C=this._model.finalSelectionStart,k=this._model.finalSelectionEnd,B=!(!C||!k||C[0]===k[0]&&C[1]===k[1]);B?C&&k&&(this._oldSelectionStart&&this._oldSelectionEnd&&C[0]===this._oldSelectionStart[0]&&C[1]===this._oldSelectionStart[1]&&k[0]===this._oldSelectionEnd[0]&&k[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(C,k,B)):this._oldHasSelection&&this._fireOnSelectionChange(C,k,B)}_fireOnSelectionChange(C,k,B){this._oldSelectionStart=C,this._oldSelectionEnd=k,this._oldHasSelection=B,this._onSelectionChange.fire()}_handleBufferActivate(C){this.clearSelection(),this._trimListener.dispose(),this._trimListener=C.activeBuffer.lines.onTrim(k=>this._handleTrim(k))}_convertViewportColToCharacterIndex(C,k){let B=k;for(let x=0;k>=x;x++){const M=C.loadCell(x,this._workCell).getChars().length;this._workCell.getWidth()===0?B--:M>1&&k!==x&&(B+=M-1)}return B}setSelection(C,k,B){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[C,k],this._model.selectionStartLength=B,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(C){this._isClickInSelection(C)||(this._selectWordAtCursor(C,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(C,k,B=!0,x=!0){if(C[0]>=this._bufferService.cols)return;const M=this._bufferService.buffer,O=M.lines.get(C[1]);if(!O)return;const j=M.translateBufferLineToString(C[1],!1);let $=this._convertViewportColToCharacterIndex(O,C[0]),V=$;const F=C[0]-$;let L=0,T=0,H=0,I=0;if(j.charAt($)===" "){for(;$>0&&j.charAt($-1)===" ";)$--;for(;V<j.length&&j.charAt(V+1)===" ";)V++}else{let se=C[0],te=C[0];O.getWidth(se)===0&&(L++,se--),O.getWidth(te)===2&&(T++,te++);const de=O.getString(te).length;for(de>1&&(I+=de-1,V+=de-1);se>0&&$>0&&!this._isCharWordSeparator(O.loadCell(se-1,this._workCell));){O.loadCell(se-1,this._workCell);const A=this._workCell.getChars().length;this._workCell.getWidth()===0?(L++,se--):A>1&&(H+=A-1,$-=A-1),$--,se--}for(;te<O.length&&V+1<j.length&&!this._isCharWordSeparator(O.loadCell(te+1,this._workCell));){O.loadCell(te+1,this._workCell);const A=this._workCell.getChars().length;this._workCell.getWidth()===2?(T++,te++):A>1&&(I+=A-1,V+=A-1),V++,te++}}V++;let X=$+F-L+H,J=Math.min(this._bufferService.cols,V-$+L+T-H-I);if(k||j.slice($,V).trim()!==""){if(B&&X===0&&O.getCodePoint(0)!==32){const se=M.lines.get(C[1]-1);if(se&&O.isWrapped&&se.getCodePoint(this._bufferService.cols-1)!==32){const te=this._getWordAt([this._bufferService.cols-1,C[1]-1],!1,!0,!1);if(te){const de=this._bufferService.cols-te.start;X-=de,J+=de}}}if(x&&X+J===this._bufferService.cols&&O.getCodePoint(this._bufferService.cols-1)!==32){const se=M.lines.get(C[1]+1);if(se!=null&&se.isWrapped&&se.getCodePoint(0)!==32){const te=this._getWordAt([0,C[1]+1],!1,!1,!0);te&&(J+=te.length)}}return{start:X,length:J}}}_selectWordAt(C,k){const B=this._getWordAt(C,k);if(B){for(;B.start<0;)B.start+=this._bufferService.cols,C[1]--;this._model.selectionStart=[B.start,C[1]],this._model.selectionStartLength=B.length}}_selectToWordAt(C){const k=this._getWordAt(C,!0);if(k){let B=C[1];for(;k.start<0;)k.start+=this._bufferService.cols,B--;if(!this._model.areSelectionValuesReversed())for(;k.start+k.length>this._bufferService.cols;)k.length-=this._bufferService.cols,B++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?k.start:k.start+k.length,B]}}_isCharWordSeparator(C){return C.getWidth()!==0&&this._optionsService.rawOptions.wordSeparator.indexOf(C.getChars())>=0}_selectLineAt(C){const k=this._bufferService.buffer.getWrappedRangeForLine(C),B={start:{x:0,y:k.first},end:{x:this._bufferService.cols-1,y:k.last}};this._model.selectionStart=[0,k.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,a.getRangeLength)(B,this._bufferService.cols)}};i.SelectionService=E=c([d(3,g.IBufferService),d(4,g.ICoreService),d(5,w.IMouseService),d(6,g.IOptionsService),d(7,w.IRenderService),d(8,w.ICoreBrowserService)],E)},4725:(p,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.IThemeService=i.ICharacterJoinerService=i.ISelectionService=i.IRenderService=i.IMouseService=i.ICoreBrowserService=i.ICharSizeService=void 0;const c=r(8343);i.ICharSizeService=(0,c.createDecorator)("CharSizeService"),i.ICoreBrowserService=(0,c.createDecorator)("CoreBrowserService"),i.IMouseService=(0,c.createDecorator)("MouseService"),i.IRenderService=(0,c.createDecorator)("RenderService"),i.ISelectionService=(0,c.createDecorator)("SelectionService"),i.ICharacterJoinerService=(0,c.createDecorator)("CharacterJoinerService"),i.IThemeService=(0,c.createDecorator)("ThemeService")},6731:function(p,i,r){var c=this&&this.__decorate||function(E,C,k,B){var x,M=arguments.length,O=M<3?C:B===null?B=Object.getOwnPropertyDescriptor(C,k):B;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")O=Reflect.decorate(E,C,k,B);else for(var j=E.length-1;j>=0;j--)(x=E[j])&&(O=(M<3?x(O):M>3?x(C,k,O):x(C,k))||O);return M>3&&O&&Object.defineProperty(C,k,O),O},d=this&&this.__param||function(E,C){return function(k,B){C(k,B,E)}};Object.defineProperty(i,"__esModule",{value:!0}),i.ThemeService=i.DEFAULT_ANSI_COLORS=void 0;const l=r(7239),_=r(8055),b=r(8460),w=r(844),S=r(2585),o=_.css.toColor("#ffffff"),h=_.css.toColor("#000000"),a=_.css.toColor("#ffffff"),u=_.css.toColor("#000000"),g={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};i.DEFAULT_ANSI_COLORS=Object.freeze((()=>{const E=[_.css.toColor("#2e3436"),_.css.toColor("#cc0000"),_.css.toColor("#4e9a06"),_.css.toColor("#c4a000"),_.css.toColor("#3465a4"),_.css.toColor("#75507b"),_.css.toColor("#06989a"),_.css.toColor("#d3d7cf"),_.css.toColor("#555753"),_.css.toColor("#ef2929"),_.css.toColor("#8ae234"),_.css.toColor("#fce94f"),_.css.toColor("#729fcf"),_.css.toColor("#ad7fa8"),_.css.toColor("#34e2e2"),_.css.toColor("#eeeeec")],C=[0,95,135,175,215,255];for(let k=0;k<216;k++){const B=C[k/36%6|0],x=C[k/6%6|0],M=C[k%6];E.push({css:_.channels.toCss(B,x,M),rgba:_.channels.toRgba(B,x,M)})}for(let k=0;k<24;k++){const B=8+10*k;E.push({css:_.channels.toCss(B,B,B),rgba:_.channels.toRgba(B,B,B)})}return E})());let v=i.ThemeService=class extends w.Disposable{get colors(){return this._colors}constructor(E){super(),this._optionsService=E,this._contrastCache=new l.ColorContrastCache,this._halfContrastCache=new l.ColorContrastCache,this._onChangeColors=this.register(new b.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:o,background:h,cursor:a,cursorAccent:u,selectionForeground:void 0,selectionBackgroundTransparent:g,selectionBackgroundOpaque:_.color.blend(h,g),selectionInactiveBackgroundTransparent:g,selectionInactiveBackgroundOpaque:_.color.blend(h,g),ansi:i.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",()=>this._contrastCache.clear())),this.register(this._optionsService.onSpecificOptionChange("theme",()=>this._setTheme(this._optionsService.rawOptions.theme)))}_setTheme(E={}){const C=this._colors;if(C.foreground=y(E.foreground,o),C.background=y(E.background,h),C.cursor=y(E.cursor,a),C.cursorAccent=y(E.cursorAccent,u),C.selectionBackgroundTransparent=y(E.selectionBackground,g),C.selectionBackgroundOpaque=_.color.blend(C.background,C.selectionBackgroundTransparent),C.selectionInactiveBackgroundTransparent=y(E.selectionInactiveBackground,C.selectionBackgroundTransparent),C.selectionInactiveBackgroundOpaque=_.color.blend(C.background,C.selectionInactiveBackgroundTransparent),C.selectionForeground=E.selectionForeground?y(E.selectionForeground,_.NULL_COLOR):void 0,C.selectionForeground===_.NULL_COLOR&&(C.selectionForeground=void 0),_.color.isOpaque(C.selectionBackgroundTransparent)&&(C.selectionBackgroundTransparent=_.color.opacity(C.selectionBackgroundTransparent,.3)),_.color.isOpaque(C.selectionInactiveBackgroundTransparent)&&(C.selectionInactiveBackgroundTransparent=_.color.opacity(C.selectionInactiveBackgroundTransparent,.3)),C.ansi=i.DEFAULT_ANSI_COLORS.slice(),C.ansi[0]=y(E.black,i.DEFAULT_ANSI_COLORS[0]),C.ansi[1]=y(E.red,i.DEFAULT_ANSI_COLORS[1]),C.ansi[2]=y(E.green,i.DEFAULT_ANSI_COLORS[2]),C.ansi[3]=y(E.yellow,i.DEFAULT_ANSI_COLORS[3]),C.ansi[4]=y(E.blue,i.DEFAULT_ANSI_COLORS[4]),C.ansi[5]=y(E.magenta,i.DEFAULT_ANSI_COLORS[5]),C.ansi[6]=y(E.cyan,i.DEFAULT_ANSI_COLORS[6]),C.ansi[7]=y(E.white,i.DEFAULT_ANSI_COLORS[7]),C.ansi[8]=y(E.brightBlack,i.DEFAULT_ANSI_COLORS[8]),C.ansi[9]=y(E.brightRed,i.DEFAULT_ANSI_COLORS[9]),C.ansi[10]=y(E.brightGreen,i.DEFAULT_ANSI_COLORS[10]),C.ansi[11]=y(E.brightYellow,i.DEFAULT_ANSI_COLORS[11]),C.ansi[12]=y(E.brightBlue,i.DEFAULT_ANSI_COLORS[12]),C.ansi[13]=y(E.brightMagenta,i.DEFAULT_ANSI_COLORS[13]),C.ansi[14]=y(E.brightCyan,i.DEFAULT_ANSI_COLORS[14]),C.ansi[15]=y(E.brightWhite,i.DEFAULT_ANSI_COLORS[15]),E.extendedAnsi){const k=Math.min(C.ansi.length-16,E.extendedAnsi.length);for(let B=0;B<k;B++)C.ansi[B+16]=y(E.extendedAnsi[B],i.DEFAULT_ANSI_COLORS[B+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(E){this._restoreColor(E),this._onChangeColors.fire(this.colors)}_restoreColor(E){if(E!==void 0)switch(E){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[E]=this._restoreColors.ansi[E]}else for(let C=0;C<this._restoreColors.ansi.length;++C)this._colors.ansi[C]=this._restoreColors.ansi[C]}modifyColors(E){E(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function y(E,C){if(E!==void 0)try{return _.css.toColor(E)}catch{}return C}i.ThemeService=v=c([d(0,S.IOptionsService)],v)},6349:(p,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CircularList=void 0;const c=r(8460),d=r(844);class l extends d.Disposable{constructor(b){super(),this._maxLength=b,this.onDeleteEmitter=this.register(new c.EventEmitter),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this.register(new c.EventEmitter),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this.register(new c.EventEmitter),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(b){if(this._maxLength===b)return;const w=new Array(b);for(let S=0;S<Math.min(b,this.length);S++)w[S]=this._array[this._getCyclicIndex(S)];this._array=w,this._maxLength=b,this._startIndex=0}get length(){return this._length}set length(b){if(b>this._length)for(let w=this._length;w<b;w++)this._array[w]=void 0;this._length=b}get(b){return this._array[this._getCyclicIndex(b)]}set(b,w){this._array[this._getCyclicIndex(b)]=w}push(b){this._array[this._getCyclicIndex(this._length)]=b,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(b,w,...S){if(w){for(let o=b;o<this._length-w;o++)this._array[this._getCyclicIndex(o)]=this._array[this._getCyclicIndex(o+w)];this._length-=w,this.onDeleteEmitter.fire({index:b,amount:w})}for(let o=this._length-1;o>=b;o--)this._array[this._getCyclicIndex(o+S.length)]=this._array[this._getCyclicIndex(o)];for(let o=0;o<S.length;o++)this._array[this._getCyclicIndex(b+o)]=S[o];if(S.length&&this.onInsertEmitter.fire({index:b,amount:S.length}),this._length+S.length>this._maxLength){const o=this._length+S.length-this._maxLength;this._startIndex+=o,this._length=this._maxLength,this.onTrimEmitter.fire(o)}else this._length+=S.length}trimStart(b){b>this._length&&(b=this._length),this._startIndex+=b,this._length-=b,this.onTrimEmitter.fire(b)}shiftElements(b,w,S){if(!(w<=0)){if(b<0||b>=this._length)throw new Error("start argument out of range");if(b+S<0)throw new Error("Cannot shift elements in list beyond index 0");if(S>0){for(let h=w-1;h>=0;h--)this.set(b+h+S,this.get(b+h));const o=b+w+S-this._length;if(o>0)for(this._length+=o;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let o=0;o<w;o++)this.set(b+o+S,this.get(b+o))}}_getCyclicIndex(b){return(this._startIndex+b)%this._maxLength}}i.CircularList=l},1439:(p,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.clone=void 0,i.clone=function r(c,d=5){if(typeof c!="object")return c;const l=Array.isArray(c)?[]:{};for(const _ in c)l[_]=d<=1?c[_]:c[_]&&r(c[_],d-1);return l}},8055:(p,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.contrastRatio=i.toPaddedHex=i.rgba=i.rgb=i.css=i.color=i.channels=i.NULL_COLOR=void 0;const c=r(6114);let d=0,l=0,_=0,b=0;var w,S,o,h,a;function u(v){const y=v.toString(16);return y.length<2?"0"+y:y}function g(v,y){return v<y?(y+.05)/(v+.05):(v+.05)/(y+.05)}i.NULL_COLOR={css:"#00000000",rgba:0},function(v){v.toCss=function(y,E,C,k){return k!==void 0?`#${u(y)}${u(E)}${u(C)}${u(k)}`:`#${u(y)}${u(E)}${u(C)}`},v.toRgba=function(y,E,C,k=255){return(y<<24|E<<16|C<<8|k)>>>0}}(w||(i.channels=w={})),function(v){function y(E,C){return b=Math.round(255*C),[d,l,_]=a.toChannels(E.rgba),{css:w.toCss(d,l,_,b),rgba:w.toRgba(d,l,_,b)}}v.blend=function(E,C){if(b=(255&C.rgba)/255,b===1)return{css:C.css,rgba:C.rgba};const k=C.rgba>>24&255,B=C.rgba>>16&255,x=C.rgba>>8&255,M=E.rgba>>24&255,O=E.rgba>>16&255,j=E.rgba>>8&255;return d=M+Math.round((k-M)*b),l=O+Math.round((B-O)*b),_=j+Math.round((x-j)*b),{css:w.toCss(d,l,_),rgba:w.toRgba(d,l,_)}},v.isOpaque=function(E){return(255&E.rgba)==255},v.ensureContrastRatio=function(E,C,k){const B=a.ensureContrastRatio(E.rgba,C.rgba,k);if(B)return a.toColor(B>>24&255,B>>16&255,B>>8&255)},v.opaque=function(E){const C=(255|E.rgba)>>>0;return[d,l,_]=a.toChannels(C),{css:w.toCss(d,l,_),rgba:C}},v.opacity=y,v.multiplyOpacity=function(E,C){return b=255&E.rgba,y(E,b*C/255)},v.toColorRGB=function(E){return[E.rgba>>24&255,E.rgba>>16&255,E.rgba>>8&255]}}(S||(i.color=S={})),function(v){let y,E;if(!c.isNode){const C=document.createElement("canvas");C.width=1,C.height=1;const k=C.getContext("2d",{willReadFrequently:!0});k&&(y=k,y.globalCompositeOperation="copy",E=y.createLinearGradient(0,0,1,1))}v.toColor=function(C){if(C.match(/#[\da-f]{3,8}/i))switch(C.length){case 4:return d=parseInt(C.slice(1,2).repeat(2),16),l=parseInt(C.slice(2,3).repeat(2),16),_=parseInt(C.slice(3,4).repeat(2),16),a.toColor(d,l,_);case 5:return d=parseInt(C.slice(1,2).repeat(2),16),l=parseInt(C.slice(2,3).repeat(2),16),_=parseInt(C.slice(3,4).repeat(2),16),b=parseInt(C.slice(4,5).repeat(2),16),a.toColor(d,l,_,b);case 7:return{css:C,rgba:(parseInt(C.slice(1),16)<<8|255)>>>0};case 9:return{css:C,rgba:parseInt(C.slice(1),16)>>>0}}const k=C.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(k)return d=parseInt(k[1]),l=parseInt(k[2]),_=parseInt(k[3]),b=Math.round(255*(k[5]===void 0?1:parseFloat(k[5]))),a.toColor(d,l,_,b);if(!y||!E)throw new Error("css.toColor: Unsupported css format");if(y.fillStyle=E,y.fillStyle=C,typeof y.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(y.fillRect(0,0,1,1),[d,l,_,b]=y.getImageData(0,0,1,1).data,b!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:w.toRgba(d,l,_,b),css:C}}}(o||(i.css=o={})),function(v){function y(E,C,k){const B=E/255,x=C/255,M=k/255;return .2126*(B<=.03928?B/12.92:Math.pow((B+.055)/1.055,2.4))+.7152*(x<=.03928?x/12.92:Math.pow((x+.055)/1.055,2.4))+.0722*(M<=.03928?M/12.92:Math.pow((M+.055)/1.055,2.4))}v.relativeLuminance=function(E){return y(E>>16&255,E>>8&255,255&E)},v.relativeLuminance2=y}(h||(i.rgb=h={})),function(v){function y(C,k,B){const x=C>>24&255,M=C>>16&255,O=C>>8&255;let j=k>>24&255,$=k>>16&255,V=k>>8&255,F=g(h.relativeLuminance2(j,$,V),h.relativeLuminance2(x,M,O));for(;F<B&&(j>0||$>0||V>0);)j-=Math.max(0,Math.ceil(.1*j)),$-=Math.max(0,Math.ceil(.1*$)),V-=Math.max(0,Math.ceil(.1*V)),F=g(h.relativeLuminance2(j,$,V),h.relativeLuminance2(x,M,O));return(j<<24|$<<16|V<<8|255)>>>0}function E(C,k,B){const x=C>>24&255,M=C>>16&255,O=C>>8&255;let j=k>>24&255,$=k>>16&255,V=k>>8&255,F=g(h.relativeLuminance2(j,$,V),h.relativeLuminance2(x,M,O));for(;F<B&&(j<255||$<255||V<255);)j=Math.min(255,j+Math.ceil(.1*(255-j))),$=Math.min(255,$+Math.ceil(.1*(255-$))),V=Math.min(255,V+Math.ceil(.1*(255-V))),F=g(h.relativeLuminance2(j,$,V),h.relativeLuminance2(x,M,O));return(j<<24|$<<16|V<<8|255)>>>0}v.ensureContrastRatio=function(C,k,B){const x=h.relativeLuminance(C>>8),M=h.relativeLuminance(k>>8);if(g(x,M)<B){if(M<x){const $=y(C,k,B),V=g(x,h.relativeLuminance($>>8));if(V<B){const F=E(C,k,B);return V>g(x,h.relativeLuminance(F>>8))?$:F}return $}const O=E(C,k,B),j=g(x,h.relativeLuminance(O>>8));if(j<B){const $=y(C,k,B);return j>g(x,h.relativeLuminance($>>8))?O:$}return O}},v.reduceLuminance=y,v.increaseLuminance=E,v.toChannels=function(C){return[C>>24&255,C>>16&255,C>>8&255,255&C]},v.toColor=function(C,k,B,x){return{css:w.toCss(C,k,B,x),rgba:w.toRgba(C,k,B,x)}}}(a||(i.rgba=a={})),i.toPaddedHex=u,i.contrastRatio=g},8969:(p,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CoreTerminal=void 0;const c=r(844),d=r(2585),l=r(4348),_=r(7866),b=r(744),w=r(7302),S=r(6975),o=r(8460),h=r(1753),a=r(1480),u=r(7994),g=r(9282),v=r(5435),y=r(5981),E=r(2660);let C=!1;class k extends c.Disposable{get onScroll(){return this._onScrollApi||(this._onScrollApi=this.register(new o.EventEmitter),this._onScroll.event(x=>{var M;(M=this._onScrollApi)===null||M===void 0||M.fire(x.position)})),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(x){for(const M in x)this.optionsService.options[M]=x[M]}constructor(x){super(),this._windowsWrappingHeuristics=this.register(new c.MutableDisposable),this._onBinary=this.register(new o.EventEmitter),this.onBinary=this._onBinary.event,this._onData=this.register(new o.EventEmitter),this.onData=this._onData.event,this._onLineFeed=this.register(new o.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onResize=this.register(new o.EventEmitter),this.onResize=this._onResize.event,this._onWriteParsed=this.register(new o.EventEmitter),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this.register(new o.EventEmitter),this._instantiationService=new l.InstantiationService,this.optionsService=this.register(new w.OptionsService(x)),this._instantiationService.setService(d.IOptionsService,this.optionsService),this._bufferService=this.register(this._instantiationService.createInstance(b.BufferService)),this._instantiationService.setService(d.IBufferService,this._bufferService),this._logService=this.register(this._instantiationService.createInstance(_.LogService)),this._instantiationService.setService(d.ILogService,this._logService),this.coreService=this.register(this._instantiationService.createInstance(S.CoreService)),this._instantiationService.setService(d.ICoreService,this.coreService),this.coreMouseService=this.register(this._instantiationService.createInstance(h.CoreMouseService)),this._instantiationService.setService(d.ICoreMouseService,this.coreMouseService),this.unicodeService=this.register(this._instantiationService.createInstance(a.UnicodeService)),this._instantiationService.setService(d.IUnicodeService,this.unicodeService),this._charsetService=this._instantiationService.createInstance(u.CharsetService),this._instantiationService.setService(d.ICharsetService,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(E.OscLinkService),this._instantiationService.setService(d.IOscLinkService,this._oscLinkService),this._inputHandler=this.register(new v.InputHandler(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this.register((0,o.forwardEvent)(this._inputHandler.onLineFeed,this._onLineFeed)),this.register(this._inputHandler),this.register((0,o.forwardEvent)(this._bufferService.onResize,this._onResize)),this.register((0,o.forwardEvent)(this.coreService.onData,this._onData)),this.register((0,o.forwardEvent)(this.coreService.onBinary,this._onBinary)),this.register(this.coreService.onRequestScrollToBottom(()=>this.scrollToBottom())),this.register(this.coreService.onUserInput(()=>this._writeBuffer.handleUserInput())),this.register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],()=>this._handleWindowsPtyOptionChange())),this.register(this._bufferService.onScroll(M=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this.register(this._inputHandler.onScroll(M=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this._writeBuffer=this.register(new y.WriteBuffer((M,O)=>this._inputHandler.parse(M,O))),this.register((0,o.forwardEvent)(this._writeBuffer.onWriteParsed,this._onWriteParsed))}write(x,M){this._writeBuffer.write(x,M)}writeSync(x,M){this._logService.logLevel<=d.LogLevelEnum.WARN&&!C&&(this._logService.warn("writeSync is unreliable and will be removed soon."),C=!0),this._writeBuffer.writeSync(x,M)}resize(x,M){isNaN(x)||isNaN(M)||(x=Math.max(x,b.MINIMUM_COLS),M=Math.max(M,b.MINIMUM_ROWS),this._bufferService.resize(x,M))}scroll(x,M=!1){this._bufferService.scroll(x,M)}scrollLines(x,M,O){this._bufferService.scrollLines(x,M,O)}scrollPages(x){this.scrollLines(x*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(x){const M=x-this._bufferService.buffer.ydisp;M!==0&&this.scrollLines(M)}registerEscHandler(x,M){return this._inputHandler.registerEscHandler(x,M)}registerDcsHandler(x,M){return this._inputHandler.registerDcsHandler(x,M)}registerCsiHandler(x,M){return this._inputHandler.registerCsiHandler(x,M)}registerOscHandler(x,M){return this._inputHandler.registerOscHandler(x,M)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let x=!1;const M=this.optionsService.rawOptions.windowsPty;M&&M.buildNumber!==void 0&&M.buildNumber!==void 0?x=M.backend==="conpty"&&M.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(x=!0),x?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){const x=[];x.push(this.onLineFeed(g.updateWindowsModeWrappedState.bind(null,this._bufferService))),x.push(this.registerCsiHandler({final:"H"},()=>((0,g.updateWindowsModeWrappedState)(this._bufferService),!1))),this._windowsWrappingHeuristics.value=(0,c.toDisposable)(()=>{for(const M of x)M.dispose()})}}}i.CoreTerminal=k},8460:(p,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.forwardEvent=i.EventEmitter=void 0,i.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=r=>(this._listeners.push(r),{dispose:()=>{if(!this._disposed){for(let c=0;c<this._listeners.length;c++)if(this._listeners[c]===r)return void this._listeners.splice(c,1)}}})),this._event}fire(r,c){const d=[];for(let l=0;l<this._listeners.length;l++)d.push(this._listeners[l]);for(let l=0;l<d.length;l++)d[l].call(void 0,r,c)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},i.forwardEvent=function(r,c){return r(d=>c.fire(d))}},5435:function(p,i,r){var c=this&&this.__decorate||function(F,L,T,H){var I,X=arguments.length,J=X<3?L:H===null?H=Object.getOwnPropertyDescriptor(L,T):H;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")J=Reflect.decorate(F,L,T,H);else for(var se=F.length-1;se>=0;se--)(I=F[se])&&(J=(X<3?I(J):X>3?I(L,T,J):I(L,T))||J);return X>3&&J&&Object.defineProperty(L,T,J),J},d=this&&this.__param||function(F,L){return function(T,H){L(T,H,F)}};Object.defineProperty(i,"__esModule",{value:!0}),i.InputHandler=i.WindowsOptionsReportType=void 0;const l=r(2584),_=r(7116),b=r(2015),w=r(844),S=r(482),o=r(8437),h=r(8460),a=r(643),u=r(511),g=r(3734),v=r(2585),y=r(6242),E=r(6351),C=r(5941),k={"(":0,")":1,"*":2,"+":3,"-":1,".":2},B=131072;function x(F,L){if(F>24)return L.setWinLines||!1;switch(F){case 1:return!!L.restoreWin;case 2:return!!L.minimizeWin;case 3:return!!L.setWinPosition;case 4:return!!L.setWinSizePixels;case 5:return!!L.raiseWin;case 6:return!!L.lowerWin;case 7:return!!L.refreshWin;case 8:return!!L.setWinSizeChars;case 9:return!!L.maximizeWin;case 10:return!!L.fullscreenWin;case 11:return!!L.getWinState;case 13:return!!L.getWinPosition;case 14:return!!L.getWinSizePixels;case 15:return!!L.getScreenSizePixels;case 16:return!!L.getCellSizePixels;case 18:return!!L.getWinSizeChars;case 19:return!!L.getScreenSizeChars;case 20:return!!L.getIconTitle;case 21:return!!L.getWinTitle;case 22:return!!L.pushTitle;case 23:return!!L.popTitle;case 24:return!!L.setWinLines}return!1}var M;(function(F){F[F.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",F[F.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(M||(i.WindowsOptionsReportType=M={}));let O=0;class j extends w.Disposable{getAttrData(){return this._curAttrData}constructor(L,T,H,I,X,J,se,te,de=new b.EscapeSequenceParser){super(),this._bufferService=L,this._charsetService=T,this._coreService=H,this._logService=I,this._optionsService=X,this._oscLinkService=J,this._coreMouseService=se,this._unicodeService=te,this._parser=de,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new S.StringToUtf32,this._utf8Decoder=new S.Utf8ToUtf32,this._workCell=new u.CellData,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=o.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=o.DEFAULT_ATTR_DATA.clone(),this._onRequestBell=this.register(new h.EventEmitter),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this.register(new h.EventEmitter),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this.register(new h.EventEmitter),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this.register(new h.EventEmitter),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this.register(new h.EventEmitter),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this.register(new h.EventEmitter),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this.register(new h.EventEmitter),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this.register(new h.EventEmitter),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this.register(new h.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this.register(new h.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onScroll=this.register(new h.EventEmitter),this.onScroll=this._onScroll.event,this._onTitleChange=this.register(new h.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onColor=this.register(new h.EventEmitter),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this.register(this._parser),this._dirtyRowTracker=new $(this._bufferService),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(A=>this._activeBuffer=A.activeBuffer)),this._parser.setCsiHandlerFallback((A,z)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(A),params:z.toArray()})}),this._parser.setEscHandlerFallback(A=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(A)})}),this._parser.setExecuteHandlerFallback(A=>{this._logService.debug("Unknown EXECUTE code: ",{code:A})}),this._parser.setOscHandlerFallback((A,z,Z)=>{this._logService.debug("Unknown OSC code: ",{identifier:A,action:z,data:Z})}),this._parser.setDcsHandlerFallback((A,z,Z)=>{z==="HOOK"&&(Z=Z.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(A),action:z,payload:Z})}),this._parser.setPrintHandler((A,z,Z)=>this.print(A,z,Z)),this._parser.registerCsiHandler({final:"@"},A=>this.insertChars(A)),this._parser.registerCsiHandler({intermediates:" ",final:"@"},A=>this.scrollLeft(A)),this._parser.registerCsiHandler({final:"A"},A=>this.cursorUp(A)),this._parser.registerCsiHandler({intermediates:" ",final:"A"},A=>this.scrollRight(A)),this._parser.registerCsiHandler({final:"B"},A=>this.cursorDown(A)),this._parser.registerCsiHandler({final:"C"},A=>this.cursorForward(A)),this._parser.registerCsiHandler({final:"D"},A=>this.cursorBackward(A)),this._parser.registerCsiHandler({final:"E"},A=>this.cursorNextLine(A)),this._parser.registerCsiHandler({final:"F"},A=>this.cursorPrecedingLine(A)),this._parser.registerCsiHandler({final:"G"},A=>this.cursorCharAbsolute(A)),this._parser.registerCsiHandler({final:"H"},A=>this.cursorPosition(A)),this._parser.registerCsiHandler({final:"I"},A=>this.cursorForwardTab(A)),this._parser.registerCsiHandler({final:"J"},A=>this.eraseInDisplay(A,!1)),this._parser.registerCsiHandler({prefix:"?",final:"J"},A=>this.eraseInDisplay(A,!0)),this._parser.registerCsiHandler({final:"K"},A=>this.eraseInLine(A,!1)),this._parser.registerCsiHandler({prefix:"?",final:"K"},A=>this.eraseInLine(A,!0)),this._parser.registerCsiHandler({final:"L"},A=>this.insertLines(A)),this._parser.registerCsiHandler({final:"M"},A=>this.deleteLines(A)),this._parser.registerCsiHandler({final:"P"},A=>this.deleteChars(A)),this._parser.registerCsiHandler({final:"S"},A=>this.scrollUp(A)),this._parser.registerCsiHandler({final:"T"},A=>this.scrollDown(A)),this._parser.registerCsiHandler({final:"X"},A=>this.eraseChars(A)),this._parser.registerCsiHandler({final:"Z"},A=>this.cursorBackwardTab(A)),this._parser.registerCsiHandler({final:"`"},A=>this.charPosAbsolute(A)),this._parser.registerCsiHandler({final:"a"},A=>this.hPositionRelative(A)),this._parser.registerCsiHandler({final:"b"},A=>this.repeatPrecedingCharacter(A)),this._parser.registerCsiHandler({final:"c"},A=>this.sendDeviceAttributesPrimary(A)),this._parser.registerCsiHandler({prefix:">",final:"c"},A=>this.sendDeviceAttributesSecondary(A)),this._parser.registerCsiHandler({final:"d"},A=>this.linePosAbsolute(A)),this._parser.registerCsiHandler({final:"e"},A=>this.vPositionRelative(A)),this._parser.registerCsiHandler({final:"f"},A=>this.hVPosition(A)),this._parser.registerCsiHandler({final:"g"},A=>this.tabClear(A)),this._parser.registerCsiHandler({final:"h"},A=>this.setMode(A)),this._parser.registerCsiHandler({prefix:"?",final:"h"},A=>this.setModePrivate(A)),this._parser.registerCsiHandler({final:"l"},A=>this.resetMode(A)),this._parser.registerCsiHandler({prefix:"?",final:"l"},A=>this.resetModePrivate(A)),this._parser.registerCsiHandler({final:"m"},A=>this.charAttributes(A)),this._parser.registerCsiHandler({final:"n"},A=>this.deviceStatus(A)),this._parser.registerCsiHandler({prefix:"?",final:"n"},A=>this.deviceStatusPrivate(A)),this._parser.registerCsiHandler({intermediates:"!",final:"p"},A=>this.softReset(A)),this._parser.registerCsiHandler({intermediates:" ",final:"q"},A=>this.setCursorStyle(A)),this._parser.registerCsiHandler({final:"r"},A=>this.setScrollRegion(A)),this._parser.registerCsiHandler({final:"s"},A=>this.saveCursor(A)),this._parser.registerCsiHandler({final:"t"},A=>this.windowOptions(A)),this._parser.registerCsiHandler({final:"u"},A=>this.restoreCursor(A)),this._parser.registerCsiHandler({intermediates:"'",final:"}"},A=>this.insertColumns(A)),this._parser.registerCsiHandler({intermediates:"'",final:"~"},A=>this.deleteColumns(A)),this._parser.registerCsiHandler({intermediates:'"',final:"q"},A=>this.selectProtected(A)),this._parser.registerCsiHandler({intermediates:"$",final:"p"},A=>this.requestMode(A,!0)),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},A=>this.requestMode(A,!1)),this._parser.setExecuteHandler(l.C0.BEL,()=>this.bell()),this._parser.setExecuteHandler(l.C0.LF,()=>this.lineFeed()),this._parser.setExecuteHandler(l.C0.VT,()=>this.lineFeed()),this._parser.setExecuteHandler(l.C0.FF,()=>this.lineFeed()),this._parser.setExecuteHandler(l.C0.CR,()=>this.carriageReturn()),this._parser.setExecuteHandler(l.C0.BS,()=>this.backspace()),this._parser.setExecuteHandler(l.C0.HT,()=>this.tab()),this._parser.setExecuteHandler(l.C0.SO,()=>this.shiftOut()),this._parser.setExecuteHandler(l.C0.SI,()=>this.shiftIn()),this._parser.setExecuteHandler(l.C1.IND,()=>this.index()),this._parser.setExecuteHandler(l.C1.NEL,()=>this.nextLine()),this._parser.setExecuteHandler(l.C1.HTS,()=>this.tabSet()),this._parser.registerOscHandler(0,new y.OscHandler(A=>(this.setTitle(A),this.setIconName(A),!0))),this._parser.registerOscHandler(1,new y.OscHandler(A=>this.setIconName(A))),this._parser.registerOscHandler(2,new y.OscHandler(A=>this.setTitle(A))),this._parser.registerOscHandler(4,new y.OscHandler(A=>this.setOrReportIndexedColor(A))),this._parser.registerOscHandler(8,new y.OscHandler(A=>this.setHyperlink(A))),this._parser.registerOscHandler(10,new y.OscHandler(A=>this.setOrReportFgColor(A))),this._parser.registerOscHandler(11,new y.OscHandler(A=>this.setOrReportBgColor(A))),this._parser.registerOscHandler(12,new y.OscHandler(A=>this.setOrReportCursorColor(A))),this._parser.registerOscHandler(104,new y.OscHandler(A=>this.restoreIndexedColor(A))),this._parser.registerOscHandler(110,new y.OscHandler(A=>this.restoreFgColor(A))),this._parser.registerOscHandler(111,new y.OscHandler(A=>this.restoreBgColor(A))),this._parser.registerOscHandler(112,new y.OscHandler(A=>this.restoreCursorColor(A))),this._parser.registerEscHandler({final:"7"},()=>this.saveCursor()),this._parser.registerEscHandler({final:"8"},()=>this.restoreCursor()),this._parser.registerEscHandler({final:"D"},()=>this.index()),this._parser.registerEscHandler({final:"E"},()=>this.nextLine()),this._parser.registerEscHandler({final:"H"},()=>this.tabSet()),this._parser.registerEscHandler({final:"M"},()=>this.reverseIndex()),this._parser.registerEscHandler({final:"="},()=>this.keypadApplicationMode()),this._parser.registerEscHandler({final:">"},()=>this.keypadNumericMode()),this._parser.registerEscHandler({final:"c"},()=>this.fullReset()),this._parser.registerEscHandler({final:"n"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"o"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"|"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"}"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"~"},()=>this.setgLevel(1)),this._parser.registerEscHandler({intermediates:"%",final:"@"},()=>this.selectDefaultCharset()),this._parser.registerEscHandler({intermediates:"%",final:"G"},()=>this.selectDefaultCharset());for(const A in _.CHARSETS)this._parser.registerEscHandler({intermediates:"(",final:A},()=>this.selectCharset("("+A)),this._parser.registerEscHandler({intermediates:")",final:A},()=>this.selectCharset(")"+A)),this._parser.registerEscHandler({intermediates:"*",final:A},()=>this.selectCharset("*"+A)),this._parser.registerEscHandler({intermediates:"+",final:A},()=>this.selectCharset("+"+A)),this._parser.registerEscHandler({intermediates:"-",final:A},()=>this.selectCharset("-"+A)),this._parser.registerEscHandler({intermediates:".",final:A},()=>this.selectCharset("."+A)),this._parser.registerEscHandler({intermediates:"/",final:A},()=>this.selectCharset("/"+A));this._parser.registerEscHandler({intermediates:"#",final:"8"},()=>this.screenAlignmentPattern()),this._parser.setErrorHandler(A=>(this._logService.error("Parsing error: ",A),A)),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new E.DcsHandler((A,z)=>this.requestStatusString(A,z)))}_preserveStack(L,T,H,I){this._parseStack.paused=!0,this._parseStack.cursorStartX=L,this._parseStack.cursorStartY=T,this._parseStack.decodedLength=H,this._parseStack.position=I}_logSlowResolvingAsync(L){this._logService.logLevel<=v.LogLevelEnum.WARN&&Promise.race([L,new Promise((T,H)=>setTimeout(()=>H("#SLOW_TIMEOUT"),5e3))]).catch(T=>{if(T!=="#SLOW_TIMEOUT")throw T;console.warn("async parser handler taking longer than 5000 ms")})}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(L,T){let H,I=this._activeBuffer.x,X=this._activeBuffer.y,J=0;const se=this._parseStack.paused;if(se){if(H=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,T))return this._logSlowResolvingAsync(H),H;I=this._parseStack.cursorStartX,X=this._parseStack.cursorStartY,this._parseStack.paused=!1,L.length>B&&(J=this._parseStack.position+B)}if(this._logService.logLevel<=v.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof L=="string"?` "${L}"`:` "${Array.prototype.map.call(L,te=>String.fromCharCode(te)).join("")}"`),typeof L=="string"?L.split("").map(te=>te.charCodeAt(0)):L),this._parseBuffer.length<L.length&&this._parseBuffer.length<B&&(this._parseBuffer=new Uint32Array(Math.min(L.length,B))),se||this._dirtyRowTracker.clearRange(),L.length>B)for(let te=J;te<L.length;te+=B){const de=te+B<L.length?te+B:L.length,A=typeof L=="string"?this._stringDecoder.decode(L.substring(te,de),this._parseBuffer):this._utf8Decoder.decode(L.subarray(te,de),this._parseBuffer);if(H=this._parser.parse(this._parseBuffer,A))return this._preserveStack(I,X,A,te),this._logSlowResolvingAsync(H),H}else if(!se){const te=typeof L=="string"?this._stringDecoder.decode(L,this._parseBuffer):this._utf8Decoder.decode(L,this._parseBuffer);if(H=this._parser.parse(this._parseBuffer,te))return this._preserveStack(I,X,te,0),this._logSlowResolvingAsync(H),H}this._activeBuffer.x===I&&this._activeBuffer.y===X||this._onCursorMove.fire(),this._onRequestRefreshRows.fire(this._dirtyRowTracker.start,this._dirtyRowTracker.end)}print(L,T,H){let I,X;const J=this._charsetService.charset,se=this._optionsService.rawOptions.screenReaderMode,te=this._bufferService.cols,de=this._coreService.decPrivateModes.wraparound,A=this._coreService.modes.insertMode,z=this._curAttrData;let Z=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&H-T>0&&Z.getWidth(this._activeBuffer.x-1)===2&&Z.setCellFromCodePoint(this._activeBuffer.x-1,0,1,z.fg,z.bg,z.extended);for(let K=T;K<H;++K){if(I=L[K],X=this._unicodeService.wcwidth(I),I<127&&J){const ae=J[String.fromCharCode(I)];ae&&(I=ae.charCodeAt(0))}if(se&&this._onA11yChar.fire((0,S.stringFromCodePoint)(I)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),X||!this._activeBuffer.x){if(this._activeBuffer.x+X-1>=te){if(de){for(;this._activeBuffer.x<te;)Z.setCellFromCodePoint(this._activeBuffer.x++,0,1,z.fg,z.bg,z.extended);this._activeBuffer.x=0,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),Z=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)}else if(this._activeBuffer.x=te-1,X===2)continue}if(A&&(Z.insertCells(this._activeBuffer.x,X,this._activeBuffer.getNullCell(z),z),Z.getWidth(te-1)===2&&Z.setCellFromCodePoint(te-1,a.NULL_CELL_CODE,a.NULL_CELL_WIDTH,z.fg,z.bg,z.extended)),Z.setCellFromCodePoint(this._activeBuffer.x++,I,X,z.fg,z.bg,z.extended),X>0)for(;--X;)Z.setCellFromCodePoint(this._activeBuffer.x++,0,0,z.fg,z.bg,z.extended)}else Z.getWidth(this._activeBuffer.x-1)?Z.addCodepointToCell(this._activeBuffer.x-1,I):Z.addCodepointToCell(this._activeBuffer.x-2,I)}H-T>0&&(Z.loadCell(this._activeBuffer.x-1,this._workCell),this._workCell.getWidth()===2||this._workCell.getCode()>65535?this._parser.precedingCodepoint=0:this._workCell.isCombined()?this._parser.precedingCodepoint=this._workCell.getChars().charCodeAt(0):this._parser.precedingCodepoint=this._workCell.content),this._activeBuffer.x<te&&H-T>0&&Z.getWidth(this._activeBuffer.x)===0&&!Z.hasContent(this._activeBuffer.x)&&Z.setCellFromCodePoint(this._activeBuffer.x,0,1,z.fg,z.bg,z.extended),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(L,T){return L.final!=="t"||L.prefix||L.intermediates?this._parser.registerCsiHandler(L,T):this._parser.registerCsiHandler(L,H=>!x(H.params[0],this._optionsService.rawOptions.windowOptions)||T(H))}registerDcsHandler(L,T){return this._parser.registerDcsHandler(L,new E.DcsHandler(T))}registerEscHandler(L,T){return this._parser.registerEscHandler(L,T)}registerOscHandler(L,T){return this._parser.registerOscHandler(L,new y.OscHandler(T))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){var L;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&(!((L=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))===null||L===void 0)&&L.isWrapped)){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;const T=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);T.hasWidth(this._activeBuffer.x)&&!T.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;const L=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-L),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(L=this._bufferService.cols-1){this._activeBuffer.x=Math.min(L,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(L,T){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=L,this._activeBuffer.y=this._activeBuffer.scrollTop+T):(this._activeBuffer.x=L,this._activeBuffer.y=T),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(L,T){this._restrictCursor(),this._setCursor(this._activeBuffer.x+L,this._activeBuffer.y+T)}cursorUp(L){const T=this._activeBuffer.y-this._activeBuffer.scrollTop;return T>=0?this._moveCursor(0,-Math.min(T,L.params[0]||1)):this._moveCursor(0,-(L.params[0]||1)),!0}cursorDown(L){const T=this._activeBuffer.scrollBottom-this._activeBuffer.y;return T>=0?this._moveCursor(0,Math.min(T,L.params[0]||1)):this._moveCursor(0,L.params[0]||1),!0}cursorForward(L){return this._moveCursor(L.params[0]||1,0),!0}cursorBackward(L){return this._moveCursor(-(L.params[0]||1),0),!0}cursorNextLine(L){return this.cursorDown(L),this._activeBuffer.x=0,!0}cursorPrecedingLine(L){return this.cursorUp(L),this._activeBuffer.x=0,!0}cursorCharAbsolute(L){return this._setCursor((L.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(L){return this._setCursor(L.length>=2?(L.params[1]||1)-1:0,(L.params[0]||1)-1),!0}charPosAbsolute(L){return this._setCursor((L.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(L){return this._moveCursor(L.params[0]||1,0),!0}linePosAbsolute(L){return this._setCursor(this._activeBuffer.x,(L.params[0]||1)-1),!0}vPositionRelative(L){return this._moveCursor(0,L.params[0]||1),!0}hVPosition(L){return this.cursorPosition(L),!0}tabClear(L){const T=L.params[0];return T===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:T===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(L){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let T=L.params[0]||1;for(;T--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(L){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let T=L.params[0]||1;for(;T--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(L){const T=L.params[0];return T===1&&(this._curAttrData.bg|=536870912),T!==2&&T!==0||(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(L,T,H,I=!1,X=!1){const J=this._activeBuffer.lines.get(this._activeBuffer.ybase+L);J.replaceCells(T,H,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData(),X),I&&(J.isWrapped=!1)}_resetBufferLine(L,T=!1){const H=this._activeBuffer.lines.get(this._activeBuffer.ybase+L);H&&(H.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),T),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+L),H.isWrapped=!1)}eraseInDisplay(L,T=!1){let H;switch(this._restrictCursor(this._bufferService.cols),L.params[0]){case 0:for(H=this._activeBuffer.y,this._dirtyRowTracker.markDirty(H),this._eraseInBufferLine(H++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,T);H<this._bufferService.rows;H++)this._resetBufferLine(H,T);this._dirtyRowTracker.markDirty(H);break;case 1:for(H=this._activeBuffer.y,this._dirtyRowTracker.markDirty(H),this._eraseInBufferLine(H,0,this._activeBuffer.x+1,!0,T),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(H+1).isWrapped=!1);H--;)this._resetBufferLine(H,T);this._dirtyRowTracker.markDirty(0);break;case 2:for(H=this._bufferService.rows,this._dirtyRowTracker.markDirty(H-1);H--;)this._resetBufferLine(H,T);this._dirtyRowTracker.markDirty(0);break;case 3:const I=this._activeBuffer.lines.length-this._bufferService.rows;I>0&&(this._activeBuffer.lines.trimStart(I),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-I,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-I,0),this._onScroll.fire(0))}return!0}eraseInLine(L,T=!1){switch(this._restrictCursor(this._bufferService.cols),L.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,T);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,T);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,T)}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(L){this._restrictCursor();let T=L.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const H=this._activeBuffer.ybase+this._activeBuffer.y,I=this._bufferService.rows-1-this._activeBuffer.scrollBottom,X=this._bufferService.rows-1+this._activeBuffer.ybase-I+1;for(;T--;)this._activeBuffer.lines.splice(X-1,1),this._activeBuffer.lines.splice(H,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(L){this._restrictCursor();let T=L.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const H=this._activeBuffer.ybase+this._activeBuffer.y;let I;for(I=this._bufferService.rows-1-this._activeBuffer.scrollBottom,I=this._bufferService.rows-1+this._activeBuffer.ybase-I;T--;)this._activeBuffer.lines.splice(H,1),this._activeBuffer.lines.splice(I,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(L){this._restrictCursor();const T=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return T&&(T.insertCells(this._activeBuffer.x,L.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(L){this._restrictCursor();const T=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return T&&(T.deleteCells(this._activeBuffer.x,L.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(L){let T=L.params[0]||1;for(;T--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(L){let T=L.params[0]||1;for(;T--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(o.DEFAULT_ATTR_DATA));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(L){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const T=L.params[0]||1;for(let H=this._activeBuffer.scrollTop;H<=this._activeBuffer.scrollBottom;++H){const I=this._activeBuffer.lines.get(this._activeBuffer.ybase+H);I.deleteCells(0,T,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),I.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(L){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const T=L.params[0]||1;for(let H=this._activeBuffer.scrollTop;H<=this._activeBuffer.scrollBottom;++H){const I=this._activeBuffer.lines.get(this._activeBuffer.ybase+H);I.insertCells(0,T,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),I.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(L){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const T=L.params[0]||1;for(let H=this._activeBuffer.scrollTop;H<=this._activeBuffer.scrollBottom;++H){const I=this._activeBuffer.lines.get(this._activeBuffer.ybase+H);I.insertCells(this._activeBuffer.x,T,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),I.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(L){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const T=L.params[0]||1;for(let H=this._activeBuffer.scrollTop;H<=this._activeBuffer.scrollBottom;++H){const I=this._activeBuffer.lines.get(this._activeBuffer.ybase+H);I.deleteCells(this._activeBuffer.x,T,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),I.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(L){this._restrictCursor();const T=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return T&&(T.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(L.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(L){if(!this._parser.precedingCodepoint)return!0;const T=L.params[0]||1,H=new Uint32Array(T);for(let I=0;I<T;++I)H[I]=this._parser.precedingCodepoint;return this.print(H,0,H.length),!0}sendDeviceAttributesPrimary(L){return L.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(l.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(l.C0.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(L){return L.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(l.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(l.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(L.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(l.C0.ESC+"[>83;40003;0c")),!0}_is(L){return(this._optionsService.rawOptions.termName+"").indexOf(L)===0}setMode(L){for(let T=0;T<L.length;T++)switch(L.params[T]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0}return!0}setModePrivate(L){for(let T=0;T<L.length;T++)switch(L.params[T]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,_.DEFAULT_CHARSET),this._charsetService.setgCharset(1,_.DEFAULT_CHARSET),this._charsetService.setgCharset(2,_.DEFAULT_CHARSET),this._charsetService.setgCharset(3,_.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0}resetMode(L){for(let T=0;T<L.length;T++)switch(L.params[T]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1}return!0}resetModePrivate(L){for(let T=0;T<L.length;T++)switch(L.params[T]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),L.params[T]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0}requestMode(L,T){const H=this._coreService.decPrivateModes,{activeProtocol:I,activeEncoding:X}=this._coreMouseService,J=this._coreService,{buffers:se,cols:te}=this._bufferService,{active:de,alt:A}=se,z=this._optionsService.rawOptions,Z=me=>me?1:2,K=L.params[0];return ae=K,ee=T?K===2?4:K===4?Z(J.modes.insertMode):K===12?3:K===20?Z(z.convertEol):0:K===1?Z(H.applicationCursorKeys):K===3?z.windowOptions.setWinLines?te===80?2:te===132?1:0:0:K===6?Z(H.origin):K===7?Z(H.wraparound):K===8?3:K===9?Z(I==="X10"):K===12?Z(z.cursorBlink):K===25?Z(!J.isCursorHidden):K===45?Z(H.reverseWraparound):K===66?Z(H.applicationKeypad):K===67?4:K===1e3?Z(I==="VT200"):K===1002?Z(I==="DRAG"):K===1003?Z(I==="ANY"):K===1004?Z(H.sendFocus):K===1005?4:K===1006?Z(X==="SGR"):K===1015?4:K===1016?Z(X==="SGR_PIXELS"):K===1048?1:K===47||K===1047||K===1049?Z(de===A):K===2004?Z(H.bracketedPasteMode):0,J.triggerDataEvent(`${l.C0.ESC}[${T?"":"?"}${ae};${ee}$y`),!0;var ae,ee}_updateAttrColor(L,T,H,I,X){return T===2?(L|=50331648,L&=-16777216,L|=g.AttributeData.fromColorRGB([H,I,X])):T===5&&(L&=-50331904,L|=33554432|255&H),L}_extractColor(L,T,H){const I=[0,0,-1,0,0,0];let X=0,J=0;do{if(I[J+X]=L.params[T+J],L.hasSubParams(T+J)){const se=L.getSubParams(T+J);let te=0;do I[1]===5&&(X=1),I[J+te+1+X]=se[te];while(++te<se.length&&te+J+1+X<I.length);break}if(I[1]===5&&J+X>=2||I[1]===2&&J+X>=5)break;I[1]&&(X=1)}while(++J+T<L.length&&J+X<I.length);for(let se=2;se<I.length;++se)I[se]===-1&&(I[se]=0);switch(I[0]){case 38:H.fg=this._updateAttrColor(H.fg,I[1],I[3],I[4],I[5]);break;case 48:H.bg=this._updateAttrColor(H.bg,I[1],I[3],I[4],I[5]);break;case 58:H.extended=H.extended.clone(),H.extended.underlineColor=this._updateAttrColor(H.extended.underlineColor,I[1],I[3],I[4],I[5])}return J}_processUnderline(L,T){T.extended=T.extended.clone(),(!~L||L>5)&&(L=1),T.extended.underlineStyle=L,T.fg|=268435456,L===0&&(T.fg&=-268435457),T.updateExtended()}_processSGR0(L){L.fg=o.DEFAULT_ATTR_DATA.fg,L.bg=o.DEFAULT_ATTR_DATA.bg,L.extended=L.extended.clone(),L.extended.underlineStyle=0,L.extended.underlineColor&=-67108864,L.updateExtended()}charAttributes(L){if(L.length===1&&L.params[0]===0)return this._processSGR0(this._curAttrData),!0;const T=L.length;let H;const I=this._curAttrData;for(let X=0;X<T;X++)H=L.params[X],H>=30&&H<=37?(I.fg&=-50331904,I.fg|=16777216|H-30):H>=40&&H<=47?(I.bg&=-50331904,I.bg|=16777216|H-40):H>=90&&H<=97?(I.fg&=-50331904,I.fg|=16777224|H-90):H>=100&&H<=107?(I.bg&=-50331904,I.bg|=16777224|H-100):H===0?this._processSGR0(I):H===1?I.fg|=134217728:H===3?I.bg|=67108864:H===4?(I.fg|=268435456,this._processUnderline(L.hasSubParams(X)?L.getSubParams(X)[0]:1,I)):H===5?I.fg|=536870912:H===7?I.fg|=67108864:H===8?I.fg|=1073741824:H===9?I.fg|=2147483648:H===2?I.bg|=134217728:H===21?this._processUnderline(2,I):H===22?(I.fg&=-134217729,I.bg&=-134217729):H===23?I.bg&=-67108865:H===24?(I.fg&=-268435457,this._processUnderline(0,I)):H===25?I.fg&=-536870913:H===27?I.fg&=-67108865:H===28?I.fg&=-1073741825:H===29?I.fg&=2147483647:H===39?(I.fg&=-67108864,I.fg|=16777215&o.DEFAULT_ATTR_DATA.fg):H===49?(I.bg&=-67108864,I.bg|=16777215&o.DEFAULT_ATTR_DATA.bg):H===38||H===48||H===58?X+=this._extractColor(L,X,I):H===53?I.bg|=1073741824:H===55?I.bg&=-1073741825:H===59?(I.extended=I.extended.clone(),I.extended.underlineColor=-1,I.updateExtended()):H===100?(I.fg&=-67108864,I.fg|=16777215&o.DEFAULT_ATTR_DATA.fg,I.bg&=-67108864,I.bg|=16777215&o.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",H);return!0}deviceStatus(L){switch(L.params[0]){case 5:this._coreService.triggerDataEvent(`${l.C0.ESC}[0n`);break;case 6:const T=this._activeBuffer.y+1,H=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${l.C0.ESC}[${T};${H}R`)}return!0}deviceStatusPrivate(L){if(L.params[0]===6){const T=this._activeBuffer.y+1,H=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${l.C0.ESC}[?${T};${H}R`)}return!0}softReset(L){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=o.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(L){const T=L.params[0]||1;switch(T){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}const H=T%2==1;return this._optionsService.options.cursorBlink=H,!0}setScrollRegion(L){const T=L.params[0]||1;let H;return(L.length<2||(H=L.params[1])>this._bufferService.rows||H===0)&&(H=this._bufferService.rows),H>T&&(this._activeBuffer.scrollTop=T-1,this._activeBuffer.scrollBottom=H-1,this._setCursor(0,0)),!0}windowOptions(L){if(!x(L.params[0],this._optionsService.rawOptions.windowOptions))return!0;const T=L.length>1?L.params[1]:0;switch(L.params[0]){case 14:T!==2&&this._onRequestWindowsOptionsReport.fire(M.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(M.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${l.C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:T!==0&&T!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),T!==0&&T!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:T!==0&&T!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),T!==0&&T!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0}saveCursor(L){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(L){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(L){return this._windowTitle=L,this._onTitleChange.fire(L),!0}setIconName(L){return this._iconName=L,!0}setOrReportIndexedColor(L){const T=[],H=L.split(";");for(;H.length>1;){const I=H.shift(),X=H.shift();if(/^\d+$/.exec(I)){const J=parseInt(I);if(V(J))if(X==="?")T.push({type:0,index:J});else{const se=(0,C.parseColor)(X);se&&T.push({type:1,index:J,color:se})}}}return T.length&&this._onColor.fire(T),!0}setHyperlink(L){const T=L.split(";");return!(T.length<2)&&(T[1]?this._createHyperlink(T[0],T[1]):!T[0]&&this._finishHyperlink())}_createHyperlink(L,T){this._getCurrentLinkId()&&this._finishHyperlink();const H=L.split(":");let I;const X=H.findIndex(J=>J.startsWith("id="));return X!==-1&&(I=H[X].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:I,uri:T}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(L,T){const H=L.split(";");for(let I=0;I<H.length&&!(T>=this._specialColors.length);++I,++T)if(H[I]==="?")this._onColor.fire([{type:0,index:this._specialColors[T]}]);else{const X=(0,C.parseColor)(H[I]);X&&this._onColor.fire([{type:1,index:this._specialColors[T],color:X}])}return!0}setOrReportFgColor(L){return this._setOrReportSpecialColor(L,0)}setOrReportBgColor(L){return this._setOrReportSpecialColor(L,1)}setOrReportCursorColor(L){return this._setOrReportSpecialColor(L,2)}restoreIndexedColor(L){if(!L)return this._onColor.fire([{type:2}]),!0;const T=[],H=L.split(";");for(let I=0;I<H.length;++I)if(/^\d+$/.exec(H[I])){const X=parseInt(H[I]);V(X)&&T.push({type:2,index:X})}return T.length&&this._onColor.fire(T),!0}restoreFgColor(L){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(L){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(L){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,_.DEFAULT_CHARSET),!0}selectCharset(L){return L.length!==2?(this.selectDefaultCharset(),!0):(L[0]==="/"||this._charsetService.setgCharset(k[L[0]],_.CHARSETS[L[1]]||_.DEFAULT_CHARSET),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){const L=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,L,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=o.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=o.DEFAULT_ATTR_DATA.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal}setgLevel(L){return this._charsetService.setgLevel(L),!0}screenAlignmentPattern(){const L=new u.CellData;L.content=4194304|"E".charCodeAt(0),L.fg=this._curAttrData.fg,L.bg=this._curAttrData.bg,this._setCursor(0,0);for(let T=0;T<this._bufferService.rows;++T){const H=this._activeBuffer.ybase+this._activeBuffer.y+T,I=this._activeBuffer.lines.get(H);I&&(I.fill(L),I.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(L,T){const H=this._bufferService.buffer,I=this._optionsService.rawOptions;return(X=>(this._coreService.triggerDataEvent(`${l.C0.ESC}${X}${l.C0.ESC}\\`),!0))(L==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:L==='"p'?'P1$r61;1"p':L==="r"?`P1$r${H.scrollTop+1};${H.scrollBottom+1}r`:L==="m"?"P1$r0m":L===" q"?`P1$r${{block:2,underline:4,bar:6}[I.cursorStyle]-(I.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(L,T){this._dirtyRowTracker.markRangeDirty(L,T)}}i.InputHandler=j;let $=class{constructor(F){this._bufferService=F,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(F){F<this.start?this.start=F:F>this.end&&(this.end=F)}markRangeDirty(F,L){F>L&&(O=F,F=L,L=O),F<this.start&&(this.start=F),L>this.end&&(this.end=L)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};function V(F){return 0<=F&&F<256}$=c([d(0,v.IBufferService)],$)},844:(p,i)=>{function r(c){for(const d of c)d.dispose();c.length=0}Object.defineProperty(i,"__esModule",{value:!0}),i.getDisposeArrayDisposable=i.disposeArray=i.toDisposable=i.MutableDisposable=i.Disposable=void 0,i.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const c of this._disposables)c.dispose();this._disposables.length=0}register(c){return this._disposables.push(c),c}unregister(c){const d=this._disposables.indexOf(c);d!==-1&&this._disposables.splice(d,1)}},i.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(c){var d;this._isDisposed||c===this._value||((d=this._value)===null||d===void 0||d.dispose(),this._value=c)}clear(){this.value=void 0}dispose(){var c;this._isDisposed=!0,(c=this._value)===null||c===void 0||c.dispose(),this._value=void 0}},i.toDisposable=function(c){return{dispose:c}},i.disposeArray=r,i.getDisposeArrayDisposable=function(c){return{dispose:()=>r(c)}}},1505:(p,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.FourKeyMap=i.TwoKeyMap=void 0;class r{constructor(){this._data={}}set(d,l,_){this._data[d]||(this._data[d]={}),this._data[d][l]=_}get(d,l){return this._data[d]?this._data[d][l]:void 0}clear(){this._data={}}}i.TwoKeyMap=r,i.FourKeyMap=class{constructor(){this._data=new r}set(c,d,l,_,b){this._data.get(c,d)||this._data.set(c,d,new r),this._data.get(c,d).set(l,_,b)}get(c,d,l,_){var b;return(b=this._data.get(c,d))===null||b===void 0?void 0:b.get(l,_)}clear(){this._data.clear()}}},6114:(p,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.isChromeOS=i.isLinux=i.isWindows=i.isIphone=i.isIpad=i.isMac=i.getSafariVersion=i.isSafari=i.isLegacyEdge=i.isFirefox=i.isNode=void 0,i.isNode=typeof navigator>"u";const r=i.isNode?"node":navigator.userAgent,c=i.isNode?"node":navigator.platform;i.isFirefox=r.includes("Firefox"),i.isLegacyEdge=r.includes("Edge"),i.isSafari=/^((?!chrome|android).)*safari/i.test(r),i.getSafariVersion=function(){if(!i.isSafari)return 0;const d=r.match(/Version\/(\d+)/);return d===null||d.length<2?0:parseInt(d[1])},i.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(c),i.isIpad=c==="iPad",i.isIphone=c==="iPhone",i.isWindows=["Windows","Win16","Win32","WinCE"].includes(c),i.isLinux=c.indexOf("Linux")>=0,i.isChromeOS=/\bCrOS\b/.test(r)},6106:(p,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.SortedList=void 0;let r=0;i.SortedList=class{constructor(c){this._getKey=c,this._array=[]}clear(){this._array.length=0}insert(c){this._array.length!==0?(r=this._search(this._getKey(c)),this._array.splice(r,0,c)):this._array.push(c)}delete(c){if(this._array.length===0)return!1;const d=this._getKey(c);if(d===void 0||(r=this._search(d),r===-1)||this._getKey(this._array[r])!==d)return!1;do if(this._array[r]===c)return this._array.splice(r,1),!0;while(++r<this._array.length&&this._getKey(this._array[r])===d);return!1}*getKeyIterator(c){if(this._array.length!==0&&(r=this._search(c),!(r<0||r>=this._array.length)&&this._getKey(this._array[r])===c))do yield this._array[r];while(++r<this._array.length&&this._getKey(this._array[r])===c)}forEachByKey(c,d){if(this._array.length!==0&&(r=this._search(c),!(r<0||r>=this._array.length)&&this._getKey(this._array[r])===c))do d(this._array[r]);while(++r<this._array.length&&this._getKey(this._array[r])===c)}values(){return[...this._array].values()}_search(c){let d=0,l=this._array.length-1;for(;l>=d;){let _=d+l>>1;const b=this._getKey(this._array[_]);if(b>c)l=_-1;else{if(!(b<c)){for(;_>0&&this._getKey(this._array[_-1])===c;)_--;return _}d=_+1}}return d}}},7226:(p,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DebouncedIdleTask=i.IdleTaskQueue=i.PriorityTaskQueue=void 0;const c=r(6114);class d{constructor(){this._tasks=[],this._i=0}enqueue(b){this._tasks.push(b),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(b){this._idleCallback=void 0;let w=0,S=0,o=b.timeRemaining(),h=0;for(;this._i<this._tasks.length;){if(w=Date.now(),this._tasks[this._i]()||this._i++,w=Math.max(1,Date.now()-w),S=Math.max(w,S),h=b.timeRemaining(),1.5*S>h)return o-w<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(o-w))}ms`),void this._start();o=h}this.clear()}}class l extends d{_requestCallback(b){return setTimeout(()=>b(this._createDeadline(16)))}_cancelCallback(b){clearTimeout(b)}_createDeadline(b){const w=Date.now()+b;return{timeRemaining:()=>Math.max(0,w-Date.now())}}}i.PriorityTaskQueue=l,i.IdleTaskQueue=!c.isNode&&"requestIdleCallback"in window?class extends d{_requestCallback(_){return requestIdleCallback(_)}_cancelCallback(_){cancelIdleCallback(_)}}:l,i.DebouncedIdleTask=class{constructor(){this._queue=new i.IdleTaskQueue}set(_){this._queue.clear(),this._queue.enqueue(_)}flush(){this._queue.flush()}}},9282:(p,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.updateWindowsModeWrappedState=void 0;const c=r(643);i.updateWindowsModeWrappedState=function(d){const l=d.buffer.lines.get(d.buffer.ybase+d.buffer.y-1),_=l==null?void 0:l.get(d.cols-1),b=d.buffer.lines.get(d.buffer.ybase+d.buffer.y);b&&_&&(b.isWrapped=_[c.CHAR_DATA_CODE_INDEX]!==c.NULL_CELL_CODE&&_[c.CHAR_DATA_CODE_INDEX]!==c.WHITESPACE_CELL_CODE)}},3734:(p,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ExtendedAttrs=i.AttributeData=void 0;class r{constructor(){this.fg=0,this.bg=0,this.extended=new c}static toColorRGB(l){return[l>>>16&255,l>>>8&255,255&l]}static fromColorRGB(l){return(255&l[0])<<16|(255&l[1])<<8|255&l[2]}clone(){const l=new r;return l.fg=this.fg,l.bg=this.bg,l.extended=this.extended.clone(),l}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}}i.AttributeData=r;class c{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(l){this._ext=l}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(l){this._ext&=-469762049,this._ext|=l<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(l){this._ext&=-67108864,this._ext|=67108863&l}get urlId(){return this._urlId}set urlId(l){this._urlId=l}constructor(l=0,_=0){this._ext=0,this._urlId=0,this._ext=l,this._urlId=_}clone(){return new c(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}i.ExtendedAttrs=c},9092:(p,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Buffer=i.MAX_BUFFER_SIZE=void 0;const c=r(6349),d=r(7226),l=r(3734),_=r(8437),b=r(4634),w=r(511),S=r(643),o=r(4863),h=r(7116);i.MAX_BUFFER_SIZE=4294967295,i.Buffer=class{constructor(a,u,g){this._hasScrollback=a,this._optionsService=u,this._bufferService=g,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=_.DEFAULT_ATTR_DATA.clone(),this.savedCharset=h.DEFAULT_CHARSET,this.markers=[],this._nullCell=w.CellData.fromCharData([0,S.NULL_CELL_CHAR,S.NULL_CELL_WIDTH,S.NULL_CELL_CODE]),this._whitespaceCell=w.CellData.fromCharData([0,S.WHITESPACE_CELL_CHAR,S.WHITESPACE_CELL_WIDTH,S.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._memoryCleanupQueue=new d.IdleTaskQueue,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new c.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(a){return a?(this._nullCell.fg=a.fg,this._nullCell.bg=a.bg,this._nullCell.extended=a.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new l.ExtendedAttrs),this._nullCell}getWhitespaceCell(a){return a?(this._whitespaceCell.fg=a.fg,this._whitespaceCell.bg=a.bg,this._whitespaceCell.extended=a.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new l.ExtendedAttrs),this._whitespaceCell}getBlankLine(a,u){return new _.BufferLine(this._bufferService.cols,this.getNullCell(a),u)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){const a=this.ybase+this.y-this.ydisp;return a>=0&&a<this._rows}_getCorrectBufferLength(a){if(!this._hasScrollback)return a;const u=a+this._optionsService.rawOptions.scrollback;return u>i.MAX_BUFFER_SIZE?i.MAX_BUFFER_SIZE:u}fillViewportRows(a){if(this.lines.length===0){a===void 0&&(a=_.DEFAULT_ATTR_DATA);let u=this._rows;for(;u--;)this.lines.push(this.getBlankLine(a))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new c.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(a,u){const g=this.getNullCell(_.DEFAULT_ATTR_DATA);let v=0;const y=this._getCorrectBufferLength(u);if(y>this.lines.maxLength&&(this.lines.maxLength=y),this.lines.length>0){if(this._cols<a)for(let C=0;C<this.lines.length;C++)v+=+this.lines.get(C).resize(a,g);let E=0;if(this._rows<u)for(let C=this._rows;C<u;C++)this.lines.length<u+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new _.BufferLine(a,g)):this.ybase>0&&this.lines.length<=this.ybase+this.y+E+1?(this.ybase--,E++,this.ydisp>0&&this.ydisp--):this.lines.push(new _.BufferLine(a,g)));else for(let C=this._rows;C>u;C--)this.lines.length>u+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(y<this.lines.maxLength){const C=this.lines.length-y;C>0&&(this.lines.trimStart(C),this.ybase=Math.max(this.ybase-C,0),this.ydisp=Math.max(this.ydisp-C,0),this.savedY=Math.max(this.savedY-C,0)),this.lines.maxLength=y}this.x=Math.min(this.x,a-1),this.y=Math.min(this.y,u-1),E&&(this.y+=E),this.savedX=Math.min(this.savedX,a-1),this.scrollTop=0}if(this.scrollBottom=u-1,this._isReflowEnabled&&(this._reflow(a,u),this._cols>a))for(let E=0;E<this.lines.length;E++)v+=+this.lines.get(E).resize(a,g);this._cols=a,this._rows=u,this._memoryCleanupQueue.clear(),v>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue(()=>this._batchedMemoryCleanup()))}_batchedMemoryCleanup(){let a=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,a=!1);let u=0;for(;this._memoryCleanupPosition<this.lines.length;)if(u+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),u>100)return!0;return a}get _isReflowEnabled(){const a=this._optionsService.rawOptions.windowsPty;return a&&a.buildNumber?this._hasScrollback&&a.backend==="conpty"&&a.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(a,u){this._cols!==a&&(a>this._cols?this._reflowLarger(a,u):this._reflowSmaller(a,u))}_reflowLarger(a,u){const g=(0,b.reflowLargerGetLinesToRemove)(this.lines,this._cols,a,this.ybase+this.y,this.getNullCell(_.DEFAULT_ATTR_DATA));if(g.length>0){const v=(0,b.reflowLargerCreateNewLayout)(this.lines,g);(0,b.reflowLargerApplyNewLayout)(this.lines,v.layout),this._reflowLargerAdjustViewport(a,u,v.countRemoved)}}_reflowLargerAdjustViewport(a,u,g){const v=this.getNullCell(_.DEFAULT_ATTR_DATA);let y=g;for(;y-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<u&&this.lines.push(new _.BufferLine(a,v))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-g,0)}_reflowSmaller(a,u){const g=this.getNullCell(_.DEFAULT_ATTR_DATA),v=[];let y=0;for(let E=this.lines.length-1;E>=0;E--){let C=this.lines.get(E);if(!C||!C.isWrapped&&C.getTrimmedLength()<=a)continue;const k=[C];for(;C.isWrapped&&E>0;)C=this.lines.get(--E),k.unshift(C);const B=this.ybase+this.y;if(B>=E&&B<E+k.length)continue;const x=k[k.length-1].getTrimmedLength(),M=(0,b.reflowSmallerGetNewLineLengths)(k,this._cols,a),O=M.length-k.length;let j;j=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+O):Math.max(0,this.lines.length-this.lines.maxLength+O);const $=[];for(let I=0;I<O;I++){const X=this.getBlankLine(_.DEFAULT_ATTR_DATA,!0);$.push(X)}$.length>0&&(v.push({start:E+k.length+y,newLines:$}),y+=$.length),k.push(...$);let V=M.length-1,F=M[V];F===0&&(V--,F=M[V]);let L=k.length-O-1,T=x;for(;L>=0;){const I=Math.min(T,F);if(k[V]===void 0)break;if(k[V].copyCellsFrom(k[L],T-I,F-I,I,!0),F-=I,F===0&&(V--,F=M[V]),T-=I,T===0){L--;const X=Math.max(L,0);T=(0,b.getWrappedLineTrimmedLength)(k,X,this._cols)}}for(let I=0;I<k.length;I++)M[I]<a&&k[I].setCell(M[I],g);let H=O-j;for(;H-- >0;)this.ybase===0?this.y<u-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+y)-u&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+O,this.ybase+u-1)}if(v.length>0){const E=[],C=[];for(let V=0;V<this.lines.length;V++)C.push(this.lines.get(V));const k=this.lines.length;let B=k-1,x=0,M=v[x];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+y);let O=0;for(let V=Math.min(this.lines.maxLength-1,k+y-1);V>=0;V--)if(M&&M.start>B+O){for(let F=M.newLines.length-1;F>=0;F--)this.lines.set(V--,M.newLines[F]);V++,E.push({index:B+1,amount:M.newLines.length}),O+=M.newLines.length,M=v[++x]}else this.lines.set(V,C[B--]);let j=0;for(let V=E.length-1;V>=0;V--)E[V].index+=j,this.lines.onInsertEmitter.fire(E[V]),j+=E[V].amount;const $=Math.max(0,k+y-this.lines.maxLength);$>0&&this.lines.onTrimEmitter.fire($)}}translateBufferLineToString(a,u,g=0,v){const y=this.lines.get(a);return y?y.translateToString(u,g,v):""}getWrappedRangeForLine(a){let u=a,g=a;for(;u>0&&this.lines.get(u).isWrapped;)u--;for(;g+1<this.lines.length&&this.lines.get(g+1).isWrapped;)g++;return{first:u,last:g}}setupTabStops(a){for(a!=null?this.tabs[a]||(a=this.prevStop(a)):(this.tabs={},a=0);a<this._cols;a+=this._optionsService.rawOptions.tabStopWidth)this.tabs[a]=!0}prevStop(a){for(a==null&&(a=this.x);!this.tabs[--a]&&a>0;);return a>=this._cols?this._cols-1:a<0?0:a}nextStop(a){for(a==null&&(a=this.x);!this.tabs[++a]&&a<this._cols;);return a>=this._cols?this._cols-1:a<0?0:a}clearMarkers(a){this._isClearing=!0;for(let u=0;u<this.markers.length;u++)this.markers[u].line===a&&(this.markers[u].dispose(),this.markers.splice(u--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let a=0;a<this.markers.length;a++)this.markers[a].dispose(),this.markers.splice(a--,1);this._isClearing=!1}addMarker(a){const u=new o.Marker(a);return this.markers.push(u),u.register(this.lines.onTrim(g=>{u.line-=g,u.line<0&&u.dispose()})),u.register(this.lines.onInsert(g=>{u.line>=g.index&&(u.line+=g.amount)})),u.register(this.lines.onDelete(g=>{u.line>=g.index&&u.line<g.index+g.amount&&u.dispose(),u.line>g.index&&(u.line-=g.amount)})),u.register(u.onDispose(()=>this._removeMarker(u))),u}_removeMarker(a){this._isClearing||this.markers.splice(this.markers.indexOf(a),1)}}},8437:(p,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferLine=i.DEFAULT_ATTR_DATA=void 0;const c=r(3734),d=r(511),l=r(643),_=r(482);i.DEFAULT_ATTR_DATA=Object.freeze(new c.AttributeData);let b=0;class w{constructor(o,h,a=!1){this.isWrapped=a,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*o);const u=h||d.CellData.fromCharData([0,l.NULL_CELL_CHAR,l.NULL_CELL_WIDTH,l.NULL_CELL_CODE]);for(let g=0;g<o;++g)this.setCell(g,u);this.length=o}get(o){const h=this._data[3*o+0],a=2097151&h;return[this._data[3*o+1],2097152&h?this._combined[o]:a?(0,_.stringFromCodePoint)(a):"",h>>22,2097152&h?this._combined[o].charCodeAt(this._combined[o].length-1):a]}set(o,h){this._data[3*o+1]=h[l.CHAR_DATA_ATTR_INDEX],h[l.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[o]=h[1],this._data[3*o+0]=2097152|o|h[l.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*o+0]=h[l.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|h[l.CHAR_DATA_WIDTH_INDEX]<<22}getWidth(o){return this._data[3*o+0]>>22}hasWidth(o){return 12582912&this._data[3*o+0]}getFg(o){return this._data[3*o+1]}getBg(o){return this._data[3*o+2]}hasContent(o){return 4194303&this._data[3*o+0]}getCodePoint(o){const h=this._data[3*o+0];return 2097152&h?this._combined[o].charCodeAt(this._combined[o].length-1):2097151&h}isCombined(o){return 2097152&this._data[3*o+0]}getString(o){const h=this._data[3*o+0];return 2097152&h?this._combined[o]:2097151&h?(0,_.stringFromCodePoint)(2097151&h):""}isProtected(o){return 536870912&this._data[3*o+2]}loadCell(o,h){return b=3*o,h.content=this._data[b+0],h.fg=this._data[b+1],h.bg=this._data[b+2],2097152&h.content&&(h.combinedData=this._combined[o]),268435456&h.bg&&(h.extended=this._extendedAttrs[o]),h}setCell(o,h){2097152&h.content&&(this._combined[o]=h.combinedData),268435456&h.bg&&(this._extendedAttrs[o]=h.extended),this._data[3*o+0]=h.content,this._data[3*o+1]=h.fg,this._data[3*o+2]=h.bg}setCellFromCodePoint(o,h,a,u,g,v){268435456&g&&(this._extendedAttrs[o]=v),this._data[3*o+0]=h|a<<22,this._data[3*o+1]=u,this._data[3*o+2]=g}addCodepointToCell(o,h){let a=this._data[3*o+0];2097152&a?this._combined[o]+=(0,_.stringFromCodePoint)(h):(2097151&a?(this._combined[o]=(0,_.stringFromCodePoint)(2097151&a)+(0,_.stringFromCodePoint)(h),a&=-2097152,a|=2097152):a=h|4194304,this._data[3*o+0]=a)}insertCells(o,h,a,u){if((o%=this.length)&&this.getWidth(o-1)===2&&this.setCellFromCodePoint(o-1,0,1,(u==null?void 0:u.fg)||0,(u==null?void 0:u.bg)||0,(u==null?void 0:u.extended)||new c.ExtendedAttrs),h<this.length-o){const g=new d.CellData;for(let v=this.length-o-h-1;v>=0;--v)this.setCell(o+h+v,this.loadCell(o+v,g));for(let v=0;v<h;++v)this.setCell(o+v,a)}else for(let g=o;g<this.length;++g)this.setCell(g,a);this.getWidth(this.length-1)===2&&this.setCellFromCodePoint(this.length-1,0,1,(u==null?void 0:u.fg)||0,(u==null?void 0:u.bg)||0,(u==null?void 0:u.extended)||new c.ExtendedAttrs)}deleteCells(o,h,a,u){if(o%=this.length,h<this.length-o){const g=new d.CellData;for(let v=0;v<this.length-o-h;++v)this.setCell(o+v,this.loadCell(o+h+v,g));for(let v=this.length-h;v<this.length;++v)this.setCell(v,a)}else for(let g=o;g<this.length;++g)this.setCell(g,a);o&&this.getWidth(o-1)===2&&this.setCellFromCodePoint(o-1,0,1,(u==null?void 0:u.fg)||0,(u==null?void 0:u.bg)||0,(u==null?void 0:u.extended)||new c.ExtendedAttrs),this.getWidth(o)!==0||this.hasContent(o)||this.setCellFromCodePoint(o,0,1,(u==null?void 0:u.fg)||0,(u==null?void 0:u.bg)||0,(u==null?void 0:u.extended)||new c.ExtendedAttrs)}replaceCells(o,h,a,u,g=!1){if(g)for(o&&this.getWidth(o-1)===2&&!this.isProtected(o-1)&&this.setCellFromCodePoint(o-1,0,1,(u==null?void 0:u.fg)||0,(u==null?void 0:u.bg)||0,(u==null?void 0:u.extended)||new c.ExtendedAttrs),h<this.length&&this.getWidth(h-1)===2&&!this.isProtected(h)&&this.setCellFromCodePoint(h,0,1,(u==null?void 0:u.fg)||0,(u==null?void 0:u.bg)||0,(u==null?void 0:u.extended)||new c.ExtendedAttrs);o<h&&o<this.length;)this.isProtected(o)||this.setCell(o,a),o++;else for(o&&this.getWidth(o-1)===2&&this.setCellFromCodePoint(o-1,0,1,(u==null?void 0:u.fg)||0,(u==null?void 0:u.bg)||0,(u==null?void 0:u.extended)||new c.ExtendedAttrs),h<this.length&&this.getWidth(h-1)===2&&this.setCellFromCodePoint(h,0,1,(u==null?void 0:u.fg)||0,(u==null?void 0:u.bg)||0,(u==null?void 0:u.extended)||new c.ExtendedAttrs);o<h&&o<this.length;)this.setCell(o++,a)}resize(o,h){if(o===this.length)return 4*this._data.length*2<this._data.buffer.byteLength;const a=3*o;if(o>this.length){if(this._data.buffer.byteLength>=4*a)this._data=new Uint32Array(this._data.buffer,0,a);else{const u=new Uint32Array(a);u.set(this._data),this._data=u}for(let u=this.length;u<o;++u)this.setCell(u,h)}else{this._data=this._data.subarray(0,a);const u=Object.keys(this._combined);for(let v=0;v<u.length;v++){const y=parseInt(u[v],10);y>=o&&delete this._combined[y]}const g=Object.keys(this._extendedAttrs);for(let v=0;v<g.length;v++){const y=parseInt(g[v],10);y>=o&&delete this._extendedAttrs[y]}}return this.length=o,4*a*2<this._data.buffer.byteLength}cleanupMemory(){if(4*this._data.length*2<this._data.buffer.byteLength){const o=new Uint32Array(this._data.length);return o.set(this._data),this._data=o,1}return 0}fill(o,h=!1){if(h)for(let a=0;a<this.length;++a)this.isProtected(a)||this.setCell(a,o);else{this._combined={},this._extendedAttrs={};for(let a=0;a<this.length;++a)this.setCell(a,o)}}copyFrom(o){this.length!==o.length?this._data=new Uint32Array(o._data):this._data.set(o._data),this.length=o.length,this._combined={};for(const h in o._combined)this._combined[h]=o._combined[h];this._extendedAttrs={};for(const h in o._extendedAttrs)this._extendedAttrs[h]=o._extendedAttrs[h];this.isWrapped=o.isWrapped}clone(){const o=new w(0);o._data=new Uint32Array(this._data),o.length=this.length;for(const h in this._combined)o._combined[h]=this._combined[h];for(const h in this._extendedAttrs)o._extendedAttrs[h]=this._extendedAttrs[h];return o.isWrapped=this.isWrapped,o}getTrimmedLength(){for(let o=this.length-1;o>=0;--o)if(4194303&this._data[3*o+0])return o+(this._data[3*o+0]>>22);return 0}getNoBgTrimmedLength(){for(let o=this.length-1;o>=0;--o)if(4194303&this._data[3*o+0]||50331648&this._data[3*o+2])return o+(this._data[3*o+0]>>22);return 0}copyCellsFrom(o,h,a,u,g){const v=o._data;if(g)for(let E=u-1;E>=0;E--){for(let C=0;C<3;C++)this._data[3*(a+E)+C]=v[3*(h+E)+C];268435456&v[3*(h+E)+2]&&(this._extendedAttrs[a+E]=o._extendedAttrs[h+E])}else for(let E=0;E<u;E++){for(let C=0;C<3;C++)this._data[3*(a+E)+C]=v[3*(h+E)+C];268435456&v[3*(h+E)+2]&&(this._extendedAttrs[a+E]=o._extendedAttrs[h+E])}const y=Object.keys(o._combined);for(let E=0;E<y.length;E++){const C=parseInt(y[E],10);C>=h&&(this._combined[C-h+a]=o._combined[C])}}translateToString(o=!1,h=0,a=this.length){o&&(a=Math.min(a,this.getTrimmedLength()));let u="";for(;h<a;){const g=this._data[3*h+0],v=2097151&g;u+=2097152&g?this._combined[h]:v?(0,_.stringFromCodePoint)(v):l.WHITESPACE_CELL_CHAR,h+=g>>22||1}return u}}i.BufferLine=w},4841:(p,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.getRangeLength=void 0,i.getRangeLength=function(r,c){if(r.start.y>r.end.y)throw new Error(`Buffer range end (${r.end.x}, ${r.end.y}) cannot be before start (${r.start.x}, ${r.start.y})`);return c*(r.end.y-r.start.y)+(r.end.x-r.start.x+1)}},4634:(p,i)=>{function r(c,d,l){if(d===c.length-1)return c[d].getTrimmedLength();const _=!c[d].hasContent(l-1)&&c[d].getWidth(l-1)===1,b=c[d+1].getWidth(0)===2;return _&&b?l-1:l}Object.defineProperty(i,"__esModule",{value:!0}),i.getWrappedLineTrimmedLength=i.reflowSmallerGetNewLineLengths=i.reflowLargerApplyNewLayout=i.reflowLargerCreateNewLayout=i.reflowLargerGetLinesToRemove=void 0,i.reflowLargerGetLinesToRemove=function(c,d,l,_,b){const w=[];for(let S=0;S<c.length-1;S++){let o=S,h=c.get(++o);if(!h.isWrapped)continue;const a=[c.get(S)];for(;o<c.length&&h.isWrapped;)a.push(h),h=c.get(++o);if(_>=S&&_<o){S+=a.length-1;continue}let u=0,g=r(a,u,d),v=1,y=0;for(;v<a.length;){const C=r(a,v,d),k=C-y,B=l-g,x=Math.min(k,B);a[u].copyCellsFrom(a[v],y,g,x,!1),g+=x,g===l&&(u++,g=0),y+=x,y===C&&(v++,y=0),g===0&&u!==0&&a[u-1].getWidth(l-1)===2&&(a[u].copyCellsFrom(a[u-1],l-1,g++,1,!1),a[u-1].setCell(l-1,b))}a[u].replaceCells(g,l,b);let E=0;for(let C=a.length-1;C>0&&(C>u||a[C].getTrimmedLength()===0);C--)E++;E>0&&(w.push(S+a.length-E),w.push(E)),S+=a.length-1}return w},i.reflowLargerCreateNewLayout=function(c,d){const l=[];let _=0,b=d[_],w=0;for(let S=0;S<c.length;S++)if(b===S){const o=d[++_];c.onDeleteEmitter.fire({index:S-w,amount:o}),S+=o-1,w+=o,b=d[++_]}else l.push(S);return{layout:l,countRemoved:w}},i.reflowLargerApplyNewLayout=function(c,d){const l=[];for(let _=0;_<d.length;_++)l.push(c.get(d[_]));for(let _=0;_<l.length;_++)c.set(_,l[_]);c.length=d.length},i.reflowSmallerGetNewLineLengths=function(c,d,l){const _=[],b=c.map((h,a)=>r(c,a,d)).reduce((h,a)=>h+a);let w=0,S=0,o=0;for(;o<b;){if(b-o<l){_.push(b-o);break}w+=l;const h=r(c,S,d);w>h&&(w-=h,S++);const a=c[S].getWidth(w-1)===2;a&&w--;const u=a?l-1:l;_.push(u),o+=u}return _},i.getWrappedLineTrimmedLength=r},5295:(p,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferSet=void 0;const c=r(8460),d=r(844),l=r(9092);class _ extends d.Disposable{constructor(w,S){super(),this._optionsService=w,this._bufferService=S,this._onBufferActivate=this.register(new c.EventEmitter),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.resize(this._bufferService.cols,this._bufferService.rows))),this.register(this._optionsService.onSpecificOptionChange("tabStopWidth",()=>this.setupTabStops()))}reset(){this._normal=new l.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new l.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(w){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(w),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(w,S){this._normal.resize(w,S),this._alt.resize(w,S),this.setupTabStops(w)}setupTabStops(w){this._normal.setupTabStops(w),this._alt.setupTabStops(w)}}i.BufferSet=_},511:(p,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CellData=void 0;const c=r(482),d=r(643),l=r(3734);class _ extends l.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new l.ExtendedAttrs,this.combinedData=""}static fromCharData(w){const S=new _;return S.setFromCharData(w),S}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,c.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(w){this.fg=w[d.CHAR_DATA_ATTR_INDEX],this.bg=0;let S=!1;if(w[d.CHAR_DATA_CHAR_INDEX].length>2)S=!0;else if(w[d.CHAR_DATA_CHAR_INDEX].length===2){const o=w[d.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=o&&o<=56319){const h=w[d.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=h&&h<=57343?this.content=1024*(o-55296)+h-56320+65536|w[d.CHAR_DATA_WIDTH_INDEX]<<22:S=!0}else S=!0}else this.content=w[d.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|w[d.CHAR_DATA_WIDTH_INDEX]<<22;S&&(this.combinedData=w[d.CHAR_DATA_CHAR_INDEX],this.content=2097152|w[d.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}i.CellData=_},643:(p,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.WHITESPACE_CELL_CODE=i.WHITESPACE_CELL_WIDTH=i.WHITESPACE_CELL_CHAR=i.NULL_CELL_CODE=i.NULL_CELL_WIDTH=i.NULL_CELL_CHAR=i.CHAR_DATA_CODE_INDEX=i.CHAR_DATA_WIDTH_INDEX=i.CHAR_DATA_CHAR_INDEX=i.CHAR_DATA_ATTR_INDEX=i.DEFAULT_EXT=i.DEFAULT_ATTR=i.DEFAULT_COLOR=void 0,i.DEFAULT_COLOR=0,i.DEFAULT_ATTR=256|i.DEFAULT_COLOR<<9,i.DEFAULT_EXT=0,i.CHAR_DATA_ATTR_INDEX=0,i.CHAR_DATA_CHAR_INDEX=1,i.CHAR_DATA_WIDTH_INDEX=2,i.CHAR_DATA_CODE_INDEX=3,i.NULL_CELL_CHAR="",i.NULL_CELL_WIDTH=1,i.NULL_CELL_CODE=0,i.WHITESPACE_CELL_CHAR=" ",i.WHITESPACE_CELL_WIDTH=1,i.WHITESPACE_CELL_CODE=32},4863:(p,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Marker=void 0;const c=r(8460),d=r(844);class l{get id(){return this._id}constructor(b){this.line=b,this.isDisposed=!1,this._disposables=[],this._id=l._nextId++,this._onDispose=this.register(new c.EventEmitter),this.onDispose=this._onDispose.event}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),(0,d.disposeArray)(this._disposables),this._disposables.length=0)}register(b){return this._disposables.push(b),b}}i.Marker=l,l._nextId=1},7116:(p,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DEFAULT_CHARSET=i.CHARSETS=void 0,i.CHARSETS={},i.DEFAULT_CHARSET=i.CHARSETS.B,i.CHARSETS[0]={"`":"",a:"",b:"",c:"",d:"",e:"",f:"",g:"",h:"",i:"",j:"",k:"",l:"",m:"",n:"",o:"",p:"",q:"",r:"",s:"",t:"",u:"",v:"",w:"",x:"",y:"",z:"","{":"","|":"","}":"","~":""},i.CHARSETS.A={"#":""},i.CHARSETS.B=void 0,i.CHARSETS[4]={"#":"","@":"","[":"ij","\\":"","]":"|","{":"","|":"f","}":"","~":""},i.CHARSETS.C=i.CHARSETS[5]={"[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},i.CHARSETS.R={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""},i.CHARSETS.Q={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},i.CHARSETS.K={"@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""},i.CHARSETS.Y={"#":"","@":"","[":"","\\":"","]":"","`":"","{":"","|":"","}":"","~":""},i.CHARSETS.E=i.CHARSETS[6]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},i.CHARSETS.Z={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":""},i.CHARSETS.H=i.CHARSETS[7]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},i.CHARSETS["="]={"#":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":""}},2584:(p,i)=>{var r,c,d;Object.defineProperty(i,"__esModule",{value:!0}),i.C1_ESCAPED=i.C1=i.C0=void 0,function(l){l.NUL="\0",l.SOH="",l.STX="",l.ETX="",l.EOT="",l.ENQ="",l.ACK="",l.BEL="\x07",l.BS="\b",l.HT="	",l.LF=`
`,l.VT="\v",l.FF="\f",l.CR="\r",l.SO="",l.SI="",l.DLE="",l.DC1="",l.DC2="",l.DC3="",l.DC4="",l.NAK="",l.SYN="",l.ETB="",l.CAN="",l.EM="",l.SUB="",l.ESC="\x1B",l.FS="",l.GS="",l.RS="",l.US="",l.SP=" ",l.DEL=""}(r||(i.C0=r={})),function(l){l.PAD="",l.HOP="",l.BPH="",l.NBH="",l.IND="",l.NEL="",l.SSA="",l.ESA="",l.HTS="",l.HTJ="",l.VTS="",l.PLD="",l.PLU="",l.RI="",l.SS2="",l.SS3="",l.DCS="",l.PU1="",l.PU2="",l.STS="",l.CCH="",l.MW="",l.SPA="",l.EPA="",l.SOS="",l.SGCI="",l.SCI="",l.CSI="",l.ST="",l.OSC="",l.PM="",l.APC=""}(c||(i.C1=c={})),function(l){l.ST=`${r.ESC}\\`}(d||(i.C1_ESCAPED=d={}))},7399:(p,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.evaluateKeyboardEvent=void 0;const c=r(2584),d={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};i.evaluateKeyboardEvent=function(l,_,b,w){const S={type:0,cancel:!1,key:void 0},o=(l.shiftKey?1:0)|(l.altKey?2:0)|(l.ctrlKey?4:0)|(l.metaKey?8:0);switch(l.keyCode){case 0:l.key==="UIKeyInputUpArrow"?S.key=_?c.C0.ESC+"OA":c.C0.ESC+"[A":l.key==="UIKeyInputLeftArrow"?S.key=_?c.C0.ESC+"OD":c.C0.ESC+"[D":l.key==="UIKeyInputRightArrow"?S.key=_?c.C0.ESC+"OC":c.C0.ESC+"[C":l.key==="UIKeyInputDownArrow"&&(S.key=_?c.C0.ESC+"OB":c.C0.ESC+"[B");break;case 8:if(l.altKey){S.key=c.C0.ESC+c.C0.DEL;break}S.key=c.C0.DEL;break;case 9:if(l.shiftKey){S.key=c.C0.ESC+"[Z";break}S.key=c.C0.HT,S.cancel=!0;break;case 13:S.key=l.altKey?c.C0.ESC+c.C0.CR:c.C0.CR,S.cancel=!0;break;case 27:S.key=c.C0.ESC,l.altKey&&(S.key=c.C0.ESC+c.C0.ESC),S.cancel=!0;break;case 37:if(l.metaKey)break;o?(S.key=c.C0.ESC+"[1;"+(o+1)+"D",S.key===c.C0.ESC+"[1;3D"&&(S.key=c.C0.ESC+(b?"b":"[1;5D"))):S.key=_?c.C0.ESC+"OD":c.C0.ESC+"[D";break;case 39:if(l.metaKey)break;o?(S.key=c.C0.ESC+"[1;"+(o+1)+"C",S.key===c.C0.ESC+"[1;3C"&&(S.key=c.C0.ESC+(b?"f":"[1;5C"))):S.key=_?c.C0.ESC+"OC":c.C0.ESC+"[C";break;case 38:if(l.metaKey)break;o?(S.key=c.C0.ESC+"[1;"+(o+1)+"A",b||S.key!==c.C0.ESC+"[1;3A"||(S.key=c.C0.ESC+"[1;5A")):S.key=_?c.C0.ESC+"OA":c.C0.ESC+"[A";break;case 40:if(l.metaKey)break;o?(S.key=c.C0.ESC+"[1;"+(o+1)+"B",b||S.key!==c.C0.ESC+"[1;3B"||(S.key=c.C0.ESC+"[1;5B")):S.key=_?c.C0.ESC+"OB":c.C0.ESC+"[B";break;case 45:l.shiftKey||l.ctrlKey||(S.key=c.C0.ESC+"[2~");break;case 46:S.key=o?c.C0.ESC+"[3;"+(o+1)+"~":c.C0.ESC+"[3~";break;case 36:S.key=o?c.C0.ESC+"[1;"+(o+1)+"H":_?c.C0.ESC+"OH":c.C0.ESC+"[H";break;case 35:S.key=o?c.C0.ESC+"[1;"+(o+1)+"F":_?c.C0.ESC+"OF":c.C0.ESC+"[F";break;case 33:l.shiftKey?S.type=2:l.ctrlKey?S.key=c.C0.ESC+"[5;"+(o+1)+"~":S.key=c.C0.ESC+"[5~";break;case 34:l.shiftKey?S.type=3:l.ctrlKey?S.key=c.C0.ESC+"[6;"+(o+1)+"~":S.key=c.C0.ESC+"[6~";break;case 112:S.key=o?c.C0.ESC+"[1;"+(o+1)+"P":c.C0.ESC+"OP";break;case 113:S.key=o?c.C0.ESC+"[1;"+(o+1)+"Q":c.C0.ESC+"OQ";break;case 114:S.key=o?c.C0.ESC+"[1;"+(o+1)+"R":c.C0.ESC+"OR";break;case 115:S.key=o?c.C0.ESC+"[1;"+(o+1)+"S":c.C0.ESC+"OS";break;case 116:S.key=o?c.C0.ESC+"[15;"+(o+1)+"~":c.C0.ESC+"[15~";break;case 117:S.key=o?c.C0.ESC+"[17;"+(o+1)+"~":c.C0.ESC+"[17~";break;case 118:S.key=o?c.C0.ESC+"[18;"+(o+1)+"~":c.C0.ESC+"[18~";break;case 119:S.key=o?c.C0.ESC+"[19;"+(o+1)+"~":c.C0.ESC+"[19~";break;case 120:S.key=o?c.C0.ESC+"[20;"+(o+1)+"~":c.C0.ESC+"[20~";break;case 121:S.key=o?c.C0.ESC+"[21;"+(o+1)+"~":c.C0.ESC+"[21~";break;case 122:S.key=o?c.C0.ESC+"[23;"+(o+1)+"~":c.C0.ESC+"[23~";break;case 123:S.key=o?c.C0.ESC+"[24;"+(o+1)+"~":c.C0.ESC+"[24~";break;default:if(!l.ctrlKey||l.shiftKey||l.altKey||l.metaKey)if(b&&!w||!l.altKey||l.metaKey)!b||l.altKey||l.ctrlKey||l.shiftKey||!l.metaKey?l.key&&!l.ctrlKey&&!l.altKey&&!l.metaKey&&l.keyCode>=48&&l.key.length===1?S.key=l.key:l.key&&l.ctrlKey&&(l.key==="_"&&(S.key=c.C0.US),l.key==="@"&&(S.key=c.C0.NUL)):l.keyCode===65&&(S.type=1);else{const h=d[l.keyCode],a=h==null?void 0:h[l.shiftKey?1:0];if(a)S.key=c.C0.ESC+a;else if(l.keyCode>=65&&l.keyCode<=90){const u=l.ctrlKey?l.keyCode-64:l.keyCode+32;let g=String.fromCharCode(u);l.shiftKey&&(g=g.toUpperCase()),S.key=c.C0.ESC+g}else if(l.keyCode===32)S.key=c.C0.ESC+(l.ctrlKey?c.C0.NUL:" ");else if(l.key==="Dead"&&l.code.startsWith("Key")){let u=l.code.slice(3,4);l.shiftKey||(u=u.toLowerCase()),S.key=c.C0.ESC+u,S.cancel=!0}}else l.keyCode>=65&&l.keyCode<=90?S.key=String.fromCharCode(l.keyCode-64):l.keyCode===32?S.key=c.C0.NUL:l.keyCode>=51&&l.keyCode<=55?S.key=String.fromCharCode(l.keyCode-51+27):l.keyCode===56?S.key=c.C0.DEL:l.keyCode===219?S.key=c.C0.ESC:l.keyCode===220?S.key=c.C0.FS:l.keyCode===221&&(S.key=c.C0.GS)}return S}},482:(p,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Utf8ToUtf32=i.StringToUtf32=i.utf32ToString=i.stringFromCodePoint=void 0,i.stringFromCodePoint=function(r){return r>65535?(r-=65536,String.fromCharCode(55296+(r>>10))+String.fromCharCode(r%1024+56320)):String.fromCharCode(r)},i.utf32ToString=function(r,c=0,d=r.length){let l="";for(let _=c;_<d;++_){let b=r[_];b>65535?(b-=65536,l+=String.fromCharCode(55296+(b>>10))+String.fromCharCode(b%1024+56320)):l+=String.fromCharCode(b)}return l},i.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(r,c){const d=r.length;if(!d)return 0;let l=0,_=0;if(this._interim){const b=r.charCodeAt(_++);56320<=b&&b<=57343?c[l++]=1024*(this._interim-55296)+b-56320+65536:(c[l++]=this._interim,c[l++]=b),this._interim=0}for(let b=_;b<d;++b){const w=r.charCodeAt(b);if(55296<=w&&w<=56319){if(++b>=d)return this._interim=w,l;const S=r.charCodeAt(b);56320<=S&&S<=57343?c[l++]=1024*(w-55296)+S-56320+65536:(c[l++]=w,c[l++]=S)}else w!==65279&&(c[l++]=w)}return l}},i.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(r,c){const d=r.length;if(!d)return 0;let l,_,b,w,S=0,o=0,h=0;if(this.interim[0]){let g=!1,v=this.interim[0];v&=(224&v)==192?31:(240&v)==224?15:7;let y,E=0;for(;(y=63&this.interim[++E])&&E<4;)v<<=6,v|=y;const C=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,k=C-E;for(;h<k;){if(h>=d)return 0;if(y=r[h++],(192&y)!=128){h--,g=!0;break}this.interim[E++]=y,v<<=6,v|=63&y}g||(C===2?v<128?h--:c[S++]=v:C===3?v<2048||v>=55296&&v<=57343||v===65279||(c[S++]=v):v<65536||v>1114111||(c[S++]=v)),this.interim.fill(0)}const a=d-4;let u=h;for(;u<d;){for(;!(!(u<a)||128&(l=r[u])||128&(_=r[u+1])||128&(b=r[u+2])||128&(w=r[u+3]));)c[S++]=l,c[S++]=_,c[S++]=b,c[S++]=w,u+=4;if(l=r[u++],l<128)c[S++]=l;else if((224&l)==192){if(u>=d)return this.interim[0]=l,S;if(_=r[u++],(192&_)!=128){u--;continue}if(o=(31&l)<<6|63&_,o<128){u--;continue}c[S++]=o}else if((240&l)==224){if(u>=d)return this.interim[0]=l,S;if(_=r[u++],(192&_)!=128){u--;continue}if(u>=d)return this.interim[0]=l,this.interim[1]=_,S;if(b=r[u++],(192&b)!=128){u--;continue}if(o=(15&l)<<12|(63&_)<<6|63&b,o<2048||o>=55296&&o<=57343||o===65279)continue;c[S++]=o}else if((248&l)==240){if(u>=d)return this.interim[0]=l,S;if(_=r[u++],(192&_)!=128){u--;continue}if(u>=d)return this.interim[0]=l,this.interim[1]=_,S;if(b=r[u++],(192&b)!=128){u--;continue}if(u>=d)return this.interim[0]=l,this.interim[1]=_,this.interim[2]=b,S;if(w=r[u++],(192&w)!=128){u--;continue}if(o=(7&l)<<18|(63&_)<<12|(63&b)<<6|63&w,o<65536||o>1114111)continue;c[S++]=o}}return S}}},225:(p,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.UnicodeV6=void 0;const r=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],c=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]];let d;i.UnicodeV6=class{constructor(){if(this.version="6",!d){d=new Uint8Array(65536),d.fill(1),d[0]=0,d.fill(0,1,32),d.fill(0,127,160),d.fill(2,4352,4448),d[9001]=2,d[9002]=2,d.fill(2,11904,42192),d[12351]=1,d.fill(2,44032,55204),d.fill(2,63744,64256),d.fill(2,65040,65050),d.fill(2,65072,65136),d.fill(2,65280,65377),d.fill(2,65504,65511);for(let l=0;l<r.length;++l)d.fill(0,r[l][0],r[l][1]+1)}}wcwidth(l){return l<32?0:l<127?1:l<65536?d[l]:function(_,b){let w,S=0,o=b.length-1;if(_<b[0][0]||_>b[o][1])return!1;for(;o>=S;)if(w=S+o>>1,_>b[w][1])S=w+1;else{if(!(_<b[w][0]))return!0;o=w-1}return!1}(l,c)?0:l>=131072&&l<=196605||l>=196608&&l<=262141?2:1}}},5981:(p,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.WriteBuffer=void 0;const c=r(8460),d=r(844);class l extends d.Disposable{constructor(b){super(),this._action=b,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this.register(new c.EventEmitter),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(b,w){if(w!==void 0&&this._syncCalls>w)return void(this._syncCalls=0);if(this._pendingData+=b.length,this._writeBuffer.push(b),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;let S;for(this._isSyncWriting=!0;S=this._writeBuffer.shift();){this._action(S);const o=this._callbacks.shift();o&&o()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(b,w){if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput)return this._didUserInput=!1,this._pendingData+=b.length,this._writeBuffer.push(b),this._callbacks.push(w),void this._innerWrite();setTimeout(()=>this._innerWrite())}this._pendingData+=b.length,this._writeBuffer.push(b),this._callbacks.push(w)}_innerWrite(b=0,w=!0){const S=b||Date.now();for(;this._writeBuffer.length>this._bufferOffset;){const o=this._writeBuffer[this._bufferOffset],h=this._action(o,w);if(h){const u=g=>Date.now()-S>=12?setTimeout(()=>this._innerWrite(0,g)):this._innerWrite(S,g);return void h.catch(g=>(queueMicrotask(()=>{throw g}),Promise.resolve(!1))).then(u)}const a=this._callbacks[this._bufferOffset];if(a&&a(),this._bufferOffset++,this._pendingData-=o.length,Date.now()-S>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(()=>this._innerWrite())):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}}i.WriteBuffer=l},5941:(p,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.toRgbString=i.parseColor=void 0;const r=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,c=/^[\da-f]+$/;function d(l,_){const b=l.toString(16),w=b.length<2?"0"+b:b;switch(_){case 4:return b[0];case 8:return w;case 12:return(w+w).slice(0,3);default:return w+w}}i.parseColor=function(l){if(!l)return;let _=l.toLowerCase();if(_.indexOf("rgb:")===0){_=_.slice(4);const b=r.exec(_);if(b){const w=b[1]?15:b[4]?255:b[7]?4095:65535;return[Math.round(parseInt(b[1]||b[4]||b[7]||b[10],16)/w*255),Math.round(parseInt(b[2]||b[5]||b[8]||b[11],16)/w*255),Math.round(parseInt(b[3]||b[6]||b[9]||b[12],16)/w*255)]}}else if(_.indexOf("#")===0&&(_=_.slice(1),c.exec(_)&&[3,6,9,12].includes(_.length))){const b=_.length/3,w=[0,0,0];for(let S=0;S<3;++S){const o=parseInt(_.slice(b*S,b*S+b),16);w[S]=b===1?o<<4:b===2?o:b===3?o>>4:o>>8}return w}},i.toRgbString=function(l,_=16){const[b,w,S]=l;return`rgb:${d(b,_)}/${d(w,_)}/${d(S,_)}`}},5770:(p,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.PAYLOAD_LIMIT=void 0,i.PAYLOAD_LIMIT=1e7},6351:(p,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DcsHandler=i.DcsParser=void 0;const c=r(482),d=r(8742),l=r(5770),_=[];i.DcsParser=class{constructor(){this._handlers=Object.create(null),this._active=_,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=_}registerHandler(w,S){this._handlers[w]===void 0&&(this._handlers[w]=[]);const o=this._handlers[w];return o.push(S),{dispose:()=>{const h=o.indexOf(S);h!==-1&&o.splice(h,1)}}}clearHandler(w){this._handlers[w]&&delete this._handlers[w]}setHandlerFallback(w){this._handlerFb=w}reset(){if(this._active.length)for(let w=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;w>=0;--w)this._active[w].unhook(!1);this._stack.paused=!1,this._active=_,this._ident=0}hook(w,S){if(this.reset(),this._ident=w,this._active=this._handlers[w]||_,this._active.length)for(let o=this._active.length-1;o>=0;o--)this._active[o].hook(S);else this._handlerFb(this._ident,"HOOK",S)}put(w,S,o){if(this._active.length)for(let h=this._active.length-1;h>=0;h--)this._active[h].put(w,S,o);else this._handlerFb(this._ident,"PUT",(0,c.utf32ToString)(w,S,o))}unhook(w,S=!0){if(this._active.length){let o=!1,h=this._active.length-1,a=!1;if(this._stack.paused&&(h=this._stack.loopPosition-1,o=S,a=this._stack.fallThrough,this._stack.paused=!1),!a&&o===!1){for(;h>=0&&(o=this._active[h].unhook(w),o!==!0);h--)if(o instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=h,this._stack.fallThrough=!1,o;h--}for(;h>=0;h--)if(o=this._active[h].unhook(!1),o instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=h,this._stack.fallThrough=!0,o}else this._handlerFb(this._ident,"UNHOOK",w);this._active=_,this._ident=0}};const b=new d.Params;b.addParam(0),i.DcsHandler=class{constructor(w){this._handler=w,this._data="",this._params=b,this._hitLimit=!1}hook(w){this._params=w.length>1||w.params[0]?w.clone():b,this._data="",this._hitLimit=!1}put(w,S,o){this._hitLimit||(this._data+=(0,c.utf32ToString)(w,S,o),this._data.length>l.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}unhook(w){let S=!1;if(this._hitLimit)S=!1;else if(w&&(S=this._handler(this._data,this._params),S instanceof Promise))return S.then(o=>(this._params=b,this._data="",this._hitLimit=!1,o));return this._params=b,this._data="",this._hitLimit=!1,S}}},2015:(p,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.EscapeSequenceParser=i.VT500_TRANSITION_TABLE=i.TransitionTable=void 0;const c=r(844),d=r(8742),l=r(6242),_=r(6351);class b{constructor(h){this.table=new Uint8Array(h)}setDefault(h,a){this.table.fill(h<<4|a)}add(h,a,u,g){this.table[a<<8|h]=u<<4|g}addMany(h,a,u,g){for(let v=0;v<h.length;v++)this.table[a<<8|h[v]]=u<<4|g}}i.TransitionTable=b;const w=160;i.VT500_TRANSITION_TABLE=function(){const o=new b(4095),h=Array.apply(null,Array(256)).map((E,C)=>C),a=(E,C)=>h.slice(E,C),u=a(32,127),g=a(0,24);g.push(25),g.push.apply(g,a(28,32));const v=a(0,14);let y;for(y in o.setDefault(1,0),o.addMany(u,0,2,0),v)o.addMany([24,26,153,154],y,3,0),o.addMany(a(128,144),y,3,0),o.addMany(a(144,152),y,3,0),o.add(156,y,0,0),o.add(27,y,11,1),o.add(157,y,4,8),o.addMany([152,158,159],y,0,7),o.add(155,y,11,3),o.add(144,y,11,9);return o.addMany(g,0,3,0),o.addMany(g,1,3,1),o.add(127,1,0,1),o.addMany(g,8,0,8),o.addMany(g,3,3,3),o.add(127,3,0,3),o.addMany(g,4,3,4),o.add(127,4,0,4),o.addMany(g,6,3,6),o.addMany(g,5,3,5),o.add(127,5,0,5),o.addMany(g,2,3,2),o.add(127,2,0,2),o.add(93,1,4,8),o.addMany(u,8,5,8),o.add(127,8,5,8),o.addMany([156,27,24,26,7],8,6,0),o.addMany(a(28,32),8,0,8),o.addMany([88,94,95],1,0,7),o.addMany(u,7,0,7),o.addMany(g,7,0,7),o.add(156,7,0,0),o.add(127,7,0,7),o.add(91,1,11,3),o.addMany(a(64,127),3,7,0),o.addMany(a(48,60),3,8,4),o.addMany([60,61,62,63],3,9,4),o.addMany(a(48,60),4,8,4),o.addMany(a(64,127),4,7,0),o.addMany([60,61,62,63],4,0,6),o.addMany(a(32,64),6,0,6),o.add(127,6,0,6),o.addMany(a(64,127),6,0,0),o.addMany(a(32,48),3,9,5),o.addMany(a(32,48),5,9,5),o.addMany(a(48,64),5,0,6),o.addMany(a(64,127),5,7,0),o.addMany(a(32,48),4,9,5),o.addMany(a(32,48),1,9,2),o.addMany(a(32,48),2,9,2),o.addMany(a(48,127),2,10,0),o.addMany(a(48,80),1,10,0),o.addMany(a(81,88),1,10,0),o.addMany([89,90,92],1,10,0),o.addMany(a(96,127),1,10,0),o.add(80,1,11,9),o.addMany(g,9,0,9),o.add(127,9,0,9),o.addMany(a(28,32),9,0,9),o.addMany(a(32,48),9,9,12),o.addMany(a(48,60),9,8,10),o.addMany([60,61,62,63],9,9,10),o.addMany(g,11,0,11),o.addMany(a(32,128),11,0,11),o.addMany(a(28,32),11,0,11),o.addMany(g,10,0,10),o.add(127,10,0,10),o.addMany(a(28,32),10,0,10),o.addMany(a(48,60),10,8,10),o.addMany([60,61,62,63],10,0,11),o.addMany(a(32,48),10,9,12),o.addMany(g,12,0,12),o.add(127,12,0,12),o.addMany(a(28,32),12,0,12),o.addMany(a(32,48),12,9,12),o.addMany(a(48,64),12,0,11),o.addMany(a(64,127),12,12,13),o.addMany(a(64,127),10,12,13),o.addMany(a(64,127),9,12,13),o.addMany(g,13,13,13),o.addMany(u,13,13,13),o.add(127,13,0,13),o.addMany([27,156,24,26],13,14,0),o.add(w,0,2,0),o.add(w,8,5,8),o.add(w,6,0,6),o.add(w,11,0,11),o.add(w,13,13,13),o}();class S extends c.Disposable{constructor(h=i.VT500_TRANSITION_TABLE){super(),this._transitions=h,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new d.Params,this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._printHandlerFb=(a,u,g)=>{},this._executeHandlerFb=a=>{},this._csiHandlerFb=(a,u)=>{},this._escHandlerFb=a=>{},this._errorHandlerFb=a=>a,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this.register((0,c.toDisposable)(()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)})),this._oscParser=this.register(new l.OscParser),this._dcsParser=this.register(new _.DcsParser),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},()=>!0)}_identifier(h,a=[64,126]){let u=0;if(h.prefix){if(h.prefix.length>1)throw new Error("only one byte as prefix supported");if(u=h.prefix.charCodeAt(0),u&&60>u||u>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(h.intermediates){if(h.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let v=0;v<h.intermediates.length;++v){const y=h.intermediates.charCodeAt(v);if(32>y||y>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");u<<=8,u|=y}}if(h.final.length!==1)throw new Error("final must be a single byte");const g=h.final.charCodeAt(0);if(a[0]>g||g>a[1])throw new Error(`final must be in range ${a[0]} .. ${a[1]}`);return u<<=8,u|=g,u}identToString(h){const a=[];for(;h;)a.push(String.fromCharCode(255&h)),h>>=8;return a.reverse().join("")}setPrintHandler(h){this._printHandler=h}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(h,a){const u=this._identifier(h,[48,126]);this._escHandlers[u]===void 0&&(this._escHandlers[u]=[]);const g=this._escHandlers[u];return g.push(a),{dispose:()=>{const v=g.indexOf(a);v!==-1&&g.splice(v,1)}}}clearEscHandler(h){this._escHandlers[this._identifier(h,[48,126])]&&delete this._escHandlers[this._identifier(h,[48,126])]}setEscHandlerFallback(h){this._escHandlerFb=h}setExecuteHandler(h,a){this._executeHandlers[h.charCodeAt(0)]=a}clearExecuteHandler(h){this._executeHandlers[h.charCodeAt(0)]&&delete this._executeHandlers[h.charCodeAt(0)]}setExecuteHandlerFallback(h){this._executeHandlerFb=h}registerCsiHandler(h,a){const u=this._identifier(h);this._csiHandlers[u]===void 0&&(this._csiHandlers[u]=[]);const g=this._csiHandlers[u];return g.push(a),{dispose:()=>{const v=g.indexOf(a);v!==-1&&g.splice(v,1)}}}clearCsiHandler(h){this._csiHandlers[this._identifier(h)]&&delete this._csiHandlers[this._identifier(h)]}setCsiHandlerFallback(h){this._csiHandlerFb=h}registerDcsHandler(h,a){return this._dcsParser.registerHandler(this._identifier(h),a)}clearDcsHandler(h){this._dcsParser.clearHandler(this._identifier(h))}setDcsHandlerFallback(h){this._dcsParser.setHandlerFallback(h)}registerOscHandler(h,a){return this._oscParser.registerHandler(h,a)}clearOscHandler(h){this._oscParser.clearHandler(h)}setOscHandlerFallback(h){this._oscParser.setHandlerFallback(h)}setErrorHandler(h){this._errorHandler=h}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(h,a,u,g,v){this._parseStack.state=h,this._parseStack.handlers=a,this._parseStack.handlerPos=u,this._parseStack.transition=g,this._parseStack.chunkPos=v}parse(h,a,u){let g,v=0,y=0,E=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,E=this._parseStack.chunkPos+1;else{if(u===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");const C=this._parseStack.handlers;let k=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(u===!1&&k>-1){for(;k>=0&&(g=C[k](this._params),g!==!0);k--)if(g instanceof Promise)return this._parseStack.handlerPos=k,g}this._parseStack.handlers=[];break;case 4:if(u===!1&&k>-1){for(;k>=0&&(g=C[k](),g!==!0);k--)if(g instanceof Promise)return this._parseStack.handlerPos=k,g}this._parseStack.handlers=[];break;case 6:if(v=h[this._parseStack.chunkPos],g=this._dcsParser.unhook(v!==24&&v!==26,u),g)return g;v===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(v=h[this._parseStack.chunkPos],g=this._oscParser.end(v!==24&&v!==26,u),g)return g;v===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,E=this._parseStack.chunkPos+1,this.precedingCodepoint=0,this.currentState=15&this._parseStack.transition}for(let C=E;C<a;++C){switch(v=h[C],y=this._transitions.table[this.currentState<<8|(v<160?v:w)],y>>4){case 2:for(let O=C+1;;++O){if(O>=a||(v=h[O])<32||v>126&&v<w){this._printHandler(h,C,O),C=O-1;break}if(++O>=a||(v=h[O])<32||v>126&&v<w){this._printHandler(h,C,O),C=O-1;break}if(++O>=a||(v=h[O])<32||v>126&&v<w){this._printHandler(h,C,O),C=O-1;break}if(++O>=a||(v=h[O])<32||v>126&&v<w){this._printHandler(h,C,O),C=O-1;break}}break;case 3:this._executeHandlers[v]?this._executeHandlers[v]():this._executeHandlerFb(v),this.precedingCodepoint=0;break;case 0:break;case 1:if(this._errorHandler({position:C,code:v,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:const k=this._csiHandlers[this._collect<<8|v];let B=k?k.length-1:-1;for(;B>=0&&(g=k[B](this._params),g!==!0);B--)if(g instanceof Promise)return this._preserveStack(3,k,B,y,C),g;B<0&&this._csiHandlerFb(this._collect<<8|v,this._params),this.precedingCodepoint=0;break;case 8:do switch(v){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(v-48)}while(++C<a&&(v=h[C])>47&&v<60);C--;break;case 9:this._collect<<=8,this._collect|=v;break;case 10:const x=this._escHandlers[this._collect<<8|v];let M=x?x.length-1:-1;for(;M>=0&&(g=x[M](),g!==!0);M--)if(g instanceof Promise)return this._preserveStack(4,x,M,y,C),g;M<0&&this._escHandlerFb(this._collect<<8|v),this.precedingCodepoint=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|v,this._params);break;case 13:for(let O=C+1;;++O)if(O>=a||(v=h[O])===24||v===26||v===27||v>127&&v<w){this._dcsParser.put(h,C,O),C=O-1;break}break;case 14:if(g=this._dcsParser.unhook(v!==24&&v!==26),g)return this._preserveStack(6,[],0,y,C),g;v===27&&(y|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0;break;case 4:this._oscParser.start();break;case 5:for(let O=C+1;;O++)if(O>=a||(v=h[O])<32||v>127&&v<w){this._oscParser.put(h,C,O),C=O-1;break}break;case 6:if(g=this._oscParser.end(v!==24&&v!==26),g)return this._preserveStack(5,[],0,y,C),g;v===27&&(y|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0}this.currentState=15&y}}}i.EscapeSequenceParser=S},6242:(p,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.OscHandler=i.OscParser=void 0;const c=r(5770),d=r(482),l=[];i.OscParser=class{constructor(){this._state=0,this._active=l,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(_,b){this._handlers[_]===void 0&&(this._handlers[_]=[]);const w=this._handlers[_];return w.push(b),{dispose:()=>{const S=w.indexOf(b);S!==-1&&w.splice(S,1)}}}clearHandler(_){this._handlers[_]&&delete this._handlers[_]}setHandlerFallback(_){this._handlerFb=_}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=l}reset(){if(this._state===2)for(let _=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;_>=0;--_)this._active[_].end(!1);this._stack.paused=!1,this._active=l,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||l,this._active.length)for(let _=this._active.length-1;_>=0;_--)this._active[_].start();else this._handlerFb(this._id,"START")}_put(_,b,w){if(this._active.length)for(let S=this._active.length-1;S>=0;S--)this._active[S].put(_,b,w);else this._handlerFb(this._id,"PUT",(0,d.utf32ToString)(_,b,w))}start(){this.reset(),this._state=1}put(_,b,w){if(this._state!==3){if(this._state===1)for(;b<w;){const S=_[b++];if(S===59){this._state=2,this._start();break}if(S<48||57<S)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+S-48}this._state===2&&w-b>0&&this._put(_,b,w)}}end(_,b=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){let w=!1,S=this._active.length-1,o=!1;if(this._stack.paused&&(S=this._stack.loopPosition-1,w=b,o=this._stack.fallThrough,this._stack.paused=!1),!o&&w===!1){for(;S>=0&&(w=this._active[S].end(_),w!==!0);S--)if(w instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=S,this._stack.fallThrough=!1,w;S--}for(;S>=0;S--)if(w=this._active[S].end(!1),w instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=S,this._stack.fallThrough=!0,w}else this._handlerFb(this._id,"END",_);this._active=l,this._id=-1,this._state=0}}},i.OscHandler=class{constructor(_){this._handler=_,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(_,b,w){this._hitLimit||(this._data+=(0,d.utf32ToString)(_,b,w),this._data.length>c.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}end(_){let b=!1;if(this._hitLimit)b=!1;else if(_&&(b=this._handler(this._data),b instanceof Promise))return b.then(w=>(this._data="",this._hitLimit=!1,w));return this._data="",this._hitLimit=!1,b}}},8742:(p,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Params=void 0;const r=2147483647;class c{static fromArray(l){const _=new c;if(!l.length)return _;for(let b=Array.isArray(l[0])?1:0;b<l.length;++b){const w=l[b];if(Array.isArray(w))for(let S=0;S<w.length;++S)_.addSubParam(w[S]);else _.addParam(w)}return _}constructor(l=32,_=32){if(this.maxLength=l,this.maxSubParamsLength=_,_>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(l),this.length=0,this._subParams=new Int32Array(_),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(l),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}clone(){const l=new c(this.maxLength,this.maxSubParamsLength);return l.params.set(this.params),l.length=this.length,l._subParams.set(this._subParams),l._subParamsLength=this._subParamsLength,l._subParamsIdx.set(this._subParamsIdx),l._rejectDigits=this._rejectDigits,l._rejectSubDigits=this._rejectSubDigits,l._digitIsSub=this._digitIsSub,l}toArray(){const l=[];for(let _=0;_<this.length;++_){l.push(this.params[_]);const b=this._subParamsIdx[_]>>8,w=255&this._subParamsIdx[_];w-b>0&&l.push(Array.prototype.slice.call(this._subParams,b,w))}return l}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(l){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(l<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=l>r?r:l}}addSubParam(l){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(l<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=l>r?r:l,this._subParamsIdx[this.length-1]++}}hasSubParams(l){return(255&this._subParamsIdx[l])-(this._subParamsIdx[l]>>8)>0}getSubParams(l){const _=this._subParamsIdx[l]>>8,b=255&this._subParamsIdx[l];return b-_>0?this._subParams.subarray(_,b):null}getSubParamsAll(){const l={};for(let _=0;_<this.length;++_){const b=this._subParamsIdx[_]>>8,w=255&this._subParamsIdx[_];w-b>0&&(l[_]=this._subParams.slice(b,w))}return l}addDigit(l){let _;if(this._rejectDigits||!(_=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;const b=this._digitIsSub?this._subParams:this.params,w=b[_-1];b[_-1]=~w?Math.min(10*w+l,r):l}}i.Params=c},5741:(p,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.AddonManager=void 0,i.AddonManager=class{constructor(){this._addons=[]}dispose(){for(let r=this._addons.length-1;r>=0;r--)this._addons[r].instance.dispose()}loadAddon(r,c){const d={instance:c,dispose:c.dispose,isDisposed:!1};this._addons.push(d),c.dispose=()=>this._wrappedAddonDispose(d),c.activate(r)}_wrappedAddonDispose(r){if(r.isDisposed)return;let c=-1;for(let d=0;d<this._addons.length;d++)if(this._addons[d]===r){c=d;break}if(c===-1)throw new Error("Could not dispose an addon that has not been loaded");r.isDisposed=!0,r.dispose.apply(r.instance),this._addons.splice(c,1)}}},8771:(p,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferApiView=void 0;const c=r(3785),d=r(511);i.BufferApiView=class{constructor(l,_){this._buffer=l,this.type=_}init(l){return this._buffer=l,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(l){const _=this._buffer.lines.get(l);if(_)return new c.BufferLineApiView(_)}getNullCell(){return new d.CellData}}},3785:(p,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferLineApiView=void 0;const c=r(511);i.BufferLineApiView=class{constructor(d){this._line=d}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(d,l){if(!(d<0||d>=this._line.length))return l?(this._line.loadCell(d,l),l):this._line.loadCell(d,new c.CellData)}translateToString(d,l,_){return this._line.translateToString(d,l,_)}}},8285:(p,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferNamespaceApi=void 0;const c=r(8771),d=r(8460),l=r(844);class _ extends l.Disposable{constructor(w){super(),this._core=w,this._onBufferChange=this.register(new d.EventEmitter),this.onBufferChange=this._onBufferChange.event,this._normal=new c.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new c.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(()=>this._onBufferChange.fire(this.active))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}}i.BufferNamespaceApi=_},7975:(p,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ParserApi=void 0,i.ParserApi=class{constructor(r){this._core=r}registerCsiHandler(r,c){return this._core.registerCsiHandler(r,d=>c(d.toArray()))}addCsiHandler(r,c){return this.registerCsiHandler(r,c)}registerDcsHandler(r,c){return this._core.registerDcsHandler(r,(d,l)=>c(d,l.toArray()))}addDcsHandler(r,c){return this.registerDcsHandler(r,c)}registerEscHandler(r,c){return this._core.registerEscHandler(r,c)}addEscHandler(r,c){return this.registerEscHandler(r,c)}registerOscHandler(r,c){return this._core.registerOscHandler(r,c)}addOscHandler(r,c){return this.registerOscHandler(r,c)}}},7090:(p,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.UnicodeApi=void 0,i.UnicodeApi=class{constructor(r){this._core=r}register(r){this._core.unicodeService.register(r)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(r){this._core.unicodeService.activeVersion=r}}},744:function(p,i,r){var c=this&&this.__decorate||function(o,h,a,u){var g,v=arguments.length,y=v<3?h:u===null?u=Object.getOwnPropertyDescriptor(h,a):u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(o,h,a,u);else for(var E=o.length-1;E>=0;E--)(g=o[E])&&(y=(v<3?g(y):v>3?g(h,a,y):g(h,a))||y);return v>3&&y&&Object.defineProperty(h,a,y),y},d=this&&this.__param||function(o,h){return function(a,u){h(a,u,o)}};Object.defineProperty(i,"__esModule",{value:!0}),i.BufferService=i.MINIMUM_ROWS=i.MINIMUM_COLS=void 0;const l=r(8460),_=r(844),b=r(5295),w=r(2585);i.MINIMUM_COLS=2,i.MINIMUM_ROWS=1;let S=i.BufferService=class extends _.Disposable{get buffer(){return this.buffers.active}constructor(o){super(),this.isUserScrolling=!1,this._onResize=this.register(new l.EventEmitter),this.onResize=this._onResize.event,this._onScroll=this.register(new l.EventEmitter),this.onScroll=this._onScroll.event,this.cols=Math.max(o.rawOptions.cols||0,i.MINIMUM_COLS),this.rows=Math.max(o.rawOptions.rows||0,i.MINIMUM_ROWS),this.buffers=this.register(new b.BufferSet(o,this))}resize(o,h){this.cols=o,this.rows=h,this.buffers.resize(o,h),this._onResize.fire({cols:o,rows:h})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(o,h=!1){const a=this.buffer;let u;u=this._cachedBlankLine,u&&u.length===this.cols&&u.getFg(0)===o.fg&&u.getBg(0)===o.bg||(u=a.getBlankLine(o,h),this._cachedBlankLine=u),u.isWrapped=h;const g=a.ybase+a.scrollTop,v=a.ybase+a.scrollBottom;if(a.scrollTop===0){const y=a.lines.isFull;v===a.lines.length-1?y?a.lines.recycle().copyFrom(u):a.lines.push(u.clone()):a.lines.splice(v+1,0,u.clone()),y?this.isUserScrolling&&(a.ydisp=Math.max(a.ydisp-1,0)):(a.ybase++,this.isUserScrolling||a.ydisp++)}else{const y=v-g+1;a.lines.shiftElements(g+1,y-1,-1),a.lines.set(v,u.clone())}this.isUserScrolling||(a.ydisp=a.ybase),this._onScroll.fire(a.ydisp)}scrollLines(o,h,a){const u=this.buffer;if(o<0){if(u.ydisp===0)return;this.isUserScrolling=!0}else o+u.ydisp>=u.ybase&&(this.isUserScrolling=!1);const g=u.ydisp;u.ydisp=Math.max(Math.min(u.ydisp+o,u.ybase),0),g!==u.ydisp&&(h||this._onScroll.fire(u.ydisp))}};i.BufferService=S=c([d(0,w.IOptionsService)],S)},7994:(p,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CharsetService=void 0,i.CharsetService=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(r){this.glevel=r,this.charset=this._charsets[r]}setgCharset(r,c){this._charsets[r]=c,this.glevel===r&&(this.charset=c)}}},1753:function(p,i,r){var c=this&&this.__decorate||function(u,g,v,y){var E,C=arguments.length,k=C<3?g:y===null?y=Object.getOwnPropertyDescriptor(g,v):y;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(u,g,v,y);else for(var B=u.length-1;B>=0;B--)(E=u[B])&&(k=(C<3?E(k):C>3?E(g,v,k):E(g,v))||k);return C>3&&k&&Object.defineProperty(g,v,k),k},d=this&&this.__param||function(u,g){return function(v,y){g(v,y,u)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CoreMouseService=void 0;const l=r(2585),_=r(8460),b=r(844),w={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:u=>u.button!==4&&u.action===1&&(u.ctrl=!1,u.alt=!1,u.shift=!1,!0)},VT200:{events:19,restrict:u=>u.action!==32},DRAG:{events:23,restrict:u=>u.action!==32||u.button!==3},ANY:{events:31,restrict:u=>!0}};function S(u,g){let v=(u.ctrl?16:0)|(u.shift?4:0)|(u.alt?8:0);return u.button===4?(v|=64,v|=u.action):(v|=3&u.button,4&u.button&&(v|=64),8&u.button&&(v|=128),u.action===32?v|=32:u.action!==0||g||(v|=3)),v}const o=String.fromCharCode,h={DEFAULT:u=>{const g=[S(u,!1)+32,u.col+32,u.row+32];return g[0]>255||g[1]>255||g[2]>255?"":`\x1B[M${o(g[0])}${o(g[1])}${o(g[2])}`},SGR:u=>{const g=u.action===0&&u.button!==4?"m":"M";return`\x1B[<${S(u,!0)};${u.col};${u.row}${g}`},SGR_PIXELS:u=>{const g=u.action===0&&u.button!==4?"m":"M";return`\x1B[<${S(u,!0)};${u.x};${u.y}${g}`}};let a=i.CoreMouseService=class extends b.Disposable{constructor(u,g){super(),this._bufferService=u,this._coreService=g,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._onProtocolChange=this.register(new _.EventEmitter),this.onProtocolChange=this._onProtocolChange.event;for(const v of Object.keys(w))this.addProtocol(v,w[v]);for(const v of Object.keys(h))this.addEncoding(v,h[v]);this.reset()}addProtocol(u,g){this._protocols[u]=g}addEncoding(u,g){this._encodings[u]=g}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(u){if(!this._protocols[u])throw new Error(`unknown protocol "${u}"`);this._activeProtocol=u,this._onProtocolChange.fire(this._protocols[u].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(u){if(!this._encodings[u])throw new Error(`unknown encoding "${u}"`);this._activeEncoding=u}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null}triggerMouseEvent(u){if(u.col<0||u.col>=this._bufferService.cols||u.row<0||u.row>=this._bufferService.rows||u.button===4&&u.action===32||u.button===3&&u.action!==32||u.button!==4&&(u.action===2||u.action===3)||(u.col++,u.row++,u.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,u,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(u))return!1;const g=this._encodings[this._activeEncoding](u);return g&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(g):this._coreService.triggerDataEvent(g,!0)),this._lastEvent=u,!0}explainEvents(u){return{down:!!(1&u),up:!!(2&u),drag:!!(4&u),move:!!(8&u),wheel:!!(16&u)}}_equalEvents(u,g,v){if(v){if(u.x!==g.x||u.y!==g.y)return!1}else if(u.col!==g.col||u.row!==g.row)return!1;return u.button===g.button&&u.action===g.action&&u.ctrl===g.ctrl&&u.alt===g.alt&&u.shift===g.shift}};i.CoreMouseService=a=c([d(0,l.IBufferService),d(1,l.ICoreService)],a)},6975:function(p,i,r){var c=this&&this.__decorate||function(a,u,g,v){var y,E=arguments.length,C=E<3?u:v===null?v=Object.getOwnPropertyDescriptor(u,g):v;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(a,u,g,v);else for(var k=a.length-1;k>=0;k--)(y=a[k])&&(C=(E<3?y(C):E>3?y(u,g,C):y(u,g))||C);return E>3&&C&&Object.defineProperty(u,g,C),C},d=this&&this.__param||function(a,u){return function(g,v){u(g,v,a)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CoreService=void 0;const l=r(1439),_=r(8460),b=r(844),w=r(2585),S=Object.freeze({insertMode:!1}),o=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0});let h=i.CoreService=class extends b.Disposable{constructor(a,u,g){super(),this._bufferService=a,this._logService=u,this._optionsService=g,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this.register(new _.EventEmitter),this.onData=this._onData.event,this._onUserInput=this.register(new _.EventEmitter),this.onUserInput=this._onUserInput.event,this._onBinary=this.register(new _.EventEmitter),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this.register(new _.EventEmitter),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=(0,l.clone)(S),this.decPrivateModes=(0,l.clone)(o)}reset(){this.modes=(0,l.clone)(S),this.decPrivateModes=(0,l.clone)(o)}triggerDataEvent(a,u=!1){if(this._optionsService.rawOptions.disableStdin)return;const g=this._bufferService.buffer;u&&this._optionsService.rawOptions.scrollOnUserInput&&g.ybase!==g.ydisp&&this._onRequestScrollToBottom.fire(),u&&this._onUserInput.fire(),this._logService.debug(`sending data "${a}"`,()=>a.split("").map(v=>v.charCodeAt(0))),this._onData.fire(a)}triggerBinaryEvent(a){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${a}"`,()=>a.split("").map(u=>u.charCodeAt(0))),this._onBinary.fire(a))}};i.CoreService=h=c([d(0,w.IBufferService),d(1,w.ILogService),d(2,w.IOptionsService)],h)},9074:(p,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DecorationService=void 0;const c=r(8055),d=r(8460),l=r(844),_=r(6106);let b=0,w=0;class S extends l.Disposable{get decorations(){return this._decorations.values()}constructor(){super(),this._decorations=new _.SortedList(a=>a==null?void 0:a.marker.line),this._onDecorationRegistered=this.register(new d.EventEmitter),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this.register(new d.EventEmitter),this.onDecorationRemoved=this._onDecorationRemoved.event,this.register((0,l.toDisposable)(()=>this.reset()))}registerDecoration(a){if(a.marker.isDisposed)return;const u=new o(a);if(u){const g=u.marker.onDispose(()=>u.dispose());u.onDispose(()=>{u&&(this._decorations.delete(u)&&this._onDecorationRemoved.fire(u),g.dispose())}),this._decorations.insert(u),this._onDecorationRegistered.fire(u)}return u}reset(){for(const a of this._decorations.values())a.dispose();this._decorations.clear()}*getDecorationsAtCell(a,u,g){var v,y,E;let C=0,k=0;for(const B of this._decorations.getKeyIterator(u))C=(v=B.options.x)!==null&&v!==void 0?v:0,k=C+((y=B.options.width)!==null&&y!==void 0?y:1),a>=C&&a<k&&(!g||((E=B.options.layer)!==null&&E!==void 0?E:"bottom")===g)&&(yield B)}forEachDecorationAtCell(a,u,g,v){this._decorations.forEachByKey(u,y=>{var E,C,k;b=(E=y.options.x)!==null&&E!==void 0?E:0,w=b+((C=y.options.width)!==null&&C!==void 0?C:1),a>=b&&a<w&&(!g||((k=y.options.layer)!==null&&k!==void 0?k:"bottom")===g)&&v(y)})}}i.DecorationService=S;class o extends l.Disposable{get isDisposed(){return this._isDisposed}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=c.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=c.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}constructor(a){super(),this.options=a,this.onRenderEmitter=this.register(new d.EventEmitter),this.onRender=this.onRenderEmitter.event,this._onDispose=this.register(new d.EventEmitter),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=a.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}dispose(){this._onDispose.fire(),super.dispose()}}},4348:(p,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.InstantiationService=i.ServiceCollection=void 0;const c=r(2585),d=r(8343);class l{constructor(...b){this._entries=new Map;for(const[w,S]of b)this.set(w,S)}set(b,w){const S=this._entries.get(b);return this._entries.set(b,w),S}forEach(b){for(const[w,S]of this._entries.entries())b(w,S)}has(b){return this._entries.has(b)}get(b){return this._entries.get(b)}}i.ServiceCollection=l,i.InstantiationService=class{constructor(){this._services=new l,this._services.set(c.IInstantiationService,this)}setService(_,b){this._services.set(_,b)}getService(_){return this._services.get(_)}createInstance(_,...b){const w=(0,d.getServiceDependencies)(_).sort((h,a)=>h.index-a.index),S=[];for(const h of w){const a=this._services.get(h.id);if(!a)throw new Error(`[createInstance] ${_.name} depends on UNKNOWN service ${h.id}.`);S.push(a)}const o=w.length>0?w[0].index:b.length;if(b.length!==o)throw new Error(`[createInstance] First service dependency of ${_.name} at position ${o+1} conflicts with ${b.length} static arguments`);return new _(...b,...S)}}},7866:function(p,i,r){var c=this&&this.__decorate||function(o,h,a,u){var g,v=arguments.length,y=v<3?h:u===null?u=Object.getOwnPropertyDescriptor(h,a):u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(o,h,a,u);else for(var E=o.length-1;E>=0;E--)(g=o[E])&&(y=(v<3?g(y):v>3?g(h,a,y):g(h,a))||y);return v>3&&y&&Object.defineProperty(h,a,y),y},d=this&&this.__param||function(o,h){return function(a,u){h(a,u,o)}};Object.defineProperty(i,"__esModule",{value:!0}),i.traceCall=i.setTraceLogger=i.LogService=void 0;const l=r(844),_=r(2585),b={trace:_.LogLevelEnum.TRACE,debug:_.LogLevelEnum.DEBUG,info:_.LogLevelEnum.INFO,warn:_.LogLevelEnum.WARN,error:_.LogLevelEnum.ERROR,off:_.LogLevelEnum.OFF};let w,S=i.LogService=class extends l.Disposable{get logLevel(){return this._logLevel}constructor(o){super(),this._optionsService=o,this._logLevel=_.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),w=this}_updateLogLevel(){this._logLevel=b[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(o){for(let h=0;h<o.length;h++)typeof o[h]=="function"&&(o[h]=o[h]())}_log(o,h,a){this._evalLazyOptionalParams(a),o.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+h,...a)}trace(o,...h){var a,u;this._logLevel<=_.LogLevelEnum.TRACE&&this._log((u=(a=this._optionsService.options.logger)===null||a===void 0?void 0:a.trace.bind(this._optionsService.options.logger))!==null&&u!==void 0?u:console.log,o,h)}debug(o,...h){var a,u;this._logLevel<=_.LogLevelEnum.DEBUG&&this._log((u=(a=this._optionsService.options.logger)===null||a===void 0?void 0:a.debug.bind(this._optionsService.options.logger))!==null&&u!==void 0?u:console.log,o,h)}info(o,...h){var a,u;this._logLevel<=_.LogLevelEnum.INFO&&this._log((u=(a=this._optionsService.options.logger)===null||a===void 0?void 0:a.info.bind(this._optionsService.options.logger))!==null&&u!==void 0?u:console.info,o,h)}warn(o,...h){var a,u;this._logLevel<=_.LogLevelEnum.WARN&&this._log((u=(a=this._optionsService.options.logger)===null||a===void 0?void 0:a.warn.bind(this._optionsService.options.logger))!==null&&u!==void 0?u:console.warn,o,h)}error(o,...h){var a,u;this._logLevel<=_.LogLevelEnum.ERROR&&this._log((u=(a=this._optionsService.options.logger)===null||a===void 0?void 0:a.error.bind(this._optionsService.options.logger))!==null&&u!==void 0?u:console.error,o,h)}};i.LogService=S=c([d(0,_.IOptionsService)],S),i.setTraceLogger=function(o){w=o},i.traceCall=function(o,h,a){if(typeof a.value!="function")throw new Error("not supported");const u=a.value;a.value=function(...g){if(w.logLevel!==_.LogLevelEnum.TRACE)return u.apply(this,g);w.trace(`GlyphRenderer#${u.name}(${g.map(y=>JSON.stringify(y)).join(", ")})`);const v=u.apply(this,g);return w.trace(`GlyphRenderer#${u.name} return`,v),v}}},7302:(p,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.OptionsService=i.DEFAULT_OPTIONS=void 0;const c=r(8460),d=r(844),l=r(6114);i.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rightClickSelectsWord:l.isMac,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:0};const _=["normal","bold","100","200","300","400","500","600","700","800","900"];class b extends d.Disposable{constructor(S){super(),this._onOptionChange=this.register(new c.EventEmitter),this.onOptionChange=this._onOptionChange.event;const o=Object.assign({},i.DEFAULT_OPTIONS);for(const h in S)if(h in o)try{const a=S[h];o[h]=this._sanitizeAndValidateOption(h,a)}catch(a){console.error(a)}this.rawOptions=o,this.options=Object.assign({},o),this._setupOptions()}onSpecificOptionChange(S,o){return this.onOptionChange(h=>{h===S&&o(this.rawOptions[S])})}onMultipleOptionChange(S,o){return this.onOptionChange(h=>{S.indexOf(h)!==-1&&o()})}_setupOptions(){const S=h=>{if(!(h in i.DEFAULT_OPTIONS))throw new Error(`No option with key "${h}"`);return this.rawOptions[h]},o=(h,a)=>{if(!(h in i.DEFAULT_OPTIONS))throw new Error(`No option with key "${h}"`);a=this._sanitizeAndValidateOption(h,a),this.rawOptions[h]!==a&&(this.rawOptions[h]=a,this._onOptionChange.fire(h))};for(const h in this.rawOptions){const a={get:S.bind(this,h),set:o.bind(this,h)};Object.defineProperty(this.options,h,a)}}_sanitizeAndValidateOption(S,o){switch(S){case"cursorStyle":if(o||(o=i.DEFAULT_OPTIONS[S]),!function(h){return h==="block"||h==="underline"||h==="bar"}(o))throw new Error(`"${o}" is not a valid value for ${S}`);break;case"wordSeparator":o||(o=i.DEFAULT_OPTIONS[S]);break;case"fontWeight":case"fontWeightBold":if(typeof o=="number"&&1<=o&&o<=1e3)break;o=_.includes(o)?o:i.DEFAULT_OPTIONS[S];break;case"cursorWidth":o=Math.floor(o);case"lineHeight":case"tabStopWidth":if(o<1)throw new Error(`${S} cannot be less than 1, value: ${o}`);break;case"minimumContrastRatio":o=Math.max(1,Math.min(21,Math.round(10*o)/10));break;case"scrollback":if((o=Math.min(o,4294967295))<0)throw new Error(`${S} cannot be less than 0, value: ${o}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(o<=0)throw new Error(`${S} cannot be less than or equal to 0, value: ${o}`);break;case"rows":case"cols":if(!o&&o!==0)throw new Error(`${S} must be numeric, value: ${o}`);break;case"windowsPty":o=o??{}}return o}}i.OptionsService=b},2660:function(p,i,r){var c=this&&this.__decorate||function(b,w,S,o){var h,a=arguments.length,u=a<3?w:o===null?o=Object.getOwnPropertyDescriptor(w,S):o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(b,w,S,o);else for(var g=b.length-1;g>=0;g--)(h=b[g])&&(u=(a<3?h(u):a>3?h(w,S,u):h(w,S))||u);return a>3&&u&&Object.defineProperty(w,S,u),u},d=this&&this.__param||function(b,w){return function(S,o){w(S,o,b)}};Object.defineProperty(i,"__esModule",{value:!0}),i.OscLinkService=void 0;const l=r(2585);let _=i.OscLinkService=class{constructor(b){this._bufferService=b,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(b){const w=this._bufferService.buffer;if(b.id===void 0){const g=w.addMarker(w.ybase+w.y),v={data:b,id:this._nextId++,lines:[g]};return g.onDispose(()=>this._removeMarkerFromLink(v,g)),this._dataByLinkId.set(v.id,v),v.id}const S=b,o=this._getEntryIdKey(S),h=this._entriesWithId.get(o);if(h)return this.addLineToLink(h.id,w.ybase+w.y),h.id;const a=w.addMarker(w.ybase+w.y),u={id:this._nextId++,key:this._getEntryIdKey(S),data:S,lines:[a]};return a.onDispose(()=>this._removeMarkerFromLink(u,a)),this._entriesWithId.set(u.key,u),this._dataByLinkId.set(u.id,u),u.id}addLineToLink(b,w){const S=this._dataByLinkId.get(b);if(S&&S.lines.every(o=>o.line!==w)){const o=this._bufferService.buffer.addMarker(w);S.lines.push(o),o.onDispose(()=>this._removeMarkerFromLink(S,o))}}getLinkData(b){var w;return(w=this._dataByLinkId.get(b))===null||w===void 0?void 0:w.data}_getEntryIdKey(b){return`${b.id};;${b.uri}`}_removeMarkerFromLink(b,w){const S=b.lines.indexOf(w);S!==-1&&(b.lines.splice(S,1),b.lines.length===0&&(b.data.id!==void 0&&this._entriesWithId.delete(b.key),this._dataByLinkId.delete(b.id)))}};i.OscLinkService=_=c([d(0,l.IBufferService)],_)},8343:(p,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.createDecorator=i.getServiceDependencies=i.serviceRegistry=void 0;const r="di$target",c="di$dependencies";i.serviceRegistry=new Map,i.getServiceDependencies=function(d){return d[c]||[]},i.createDecorator=function(d){if(i.serviceRegistry.has(d))return i.serviceRegistry.get(d);const l=function(_,b,w){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(S,o,h){o[r]===o?o[c].push({id:S,index:h}):(o[c]=[{id:S,index:h}],o[r]=o)})(l,_,w)};return l.toString=()=>d,i.serviceRegistry.set(d,l),l}},2585:(p,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.IDecorationService=i.IUnicodeService=i.IOscLinkService=i.IOptionsService=i.ILogService=i.LogLevelEnum=i.IInstantiationService=i.ICharsetService=i.ICoreService=i.ICoreMouseService=i.IBufferService=void 0;const c=r(8343);var d;i.IBufferService=(0,c.createDecorator)("BufferService"),i.ICoreMouseService=(0,c.createDecorator)("CoreMouseService"),i.ICoreService=(0,c.createDecorator)("CoreService"),i.ICharsetService=(0,c.createDecorator)("CharsetService"),i.IInstantiationService=(0,c.createDecorator)("InstantiationService"),function(l){l[l.TRACE=0]="TRACE",l[l.DEBUG=1]="DEBUG",l[l.INFO=2]="INFO",l[l.WARN=3]="WARN",l[l.ERROR=4]="ERROR",l[l.OFF=5]="OFF"}(d||(i.LogLevelEnum=d={})),i.ILogService=(0,c.createDecorator)("LogService"),i.IOptionsService=(0,c.createDecorator)("OptionsService"),i.IOscLinkService=(0,c.createDecorator)("OscLinkService"),i.IUnicodeService=(0,c.createDecorator)("UnicodeService"),i.IDecorationService=(0,c.createDecorator)("DecorationService")},1480:(p,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.UnicodeService=void 0;const c=r(8460),d=r(225);i.UnicodeService=class{constructor(){this._providers=Object.create(null),this._active="",this._onChange=new c.EventEmitter,this.onChange=this._onChange.event;const l=new d.UnicodeV6;this.register(l),this._active=l.version,this._activeProvider=l}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(l){if(!this._providers[l])throw new Error(`unknown Unicode version "${l}"`);this._active=l,this._activeProvider=this._providers[l],this._onChange.fire(l)}register(l){this._providers[l.version]=l}wcwidth(l){return this._activeProvider.wcwidth(l)}getStringCellWidth(l){let _=0;const b=l.length;for(let w=0;w<b;++w){let S=l.charCodeAt(w);if(55296<=S&&S<=56319){if(++w>=b)return _+this.wcwidth(S);const o=l.charCodeAt(w);56320<=o&&o<=57343?S=1024*(S-55296)+o-56320+65536:_+=this.wcwidth(o)}_+=this.wcwidth(S)}return _}}}},s={};function f(p){var i=s[p];if(i!==void 0)return i.exports;var r=s[p]={exports:{}};return t[p].call(r.exports,r,r.exports,f),r.exports}var m={};return(()=>{var p=m;Object.defineProperty(p,"__esModule",{value:!0}),p.Terminal=void 0;const i=f(9042),r=f(3236),c=f(844),d=f(5741),l=f(8285),_=f(7975),b=f(7090),w=["cols","rows"];class S extends c.Disposable{constructor(h){super(),this._core=this.register(new r.Terminal(h)),this._addonManager=this.register(new d.AddonManager),this._publicOptions=Object.assign({},this._core.options);const a=g=>this._core.options[g],u=(g,v)=>{this._checkReadonlyOptions(g),this._core.options[g]=v};for(const g in this._core.options){const v={get:a.bind(this,g),set:u.bind(this,g)};Object.defineProperty(this._publicOptions,g,v)}}_checkReadonlyOptions(h){if(w.includes(h))throw new Error(`Option "${h}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new _.ParserApi(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new b.UnicodeApi(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this.register(new l.BufferNamespaceApi(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){const h=this._core.coreService.decPrivateModes;let a="none";switch(this._core.coreMouseService.activeProtocol){case"X10":a="x10";break;case"VT200":a="vt200";break;case"DRAG":a="drag";break;case"ANY":a="any"}return{applicationCursorKeysMode:h.applicationCursorKeys,applicationKeypadMode:h.applicationKeypad,bracketedPasteMode:h.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:a,originMode:h.origin,reverseWraparoundMode:h.reverseWraparound,sendFocusMode:h.sendFocus,wraparoundMode:h.wraparound}}get options(){return this._publicOptions}set options(h){for(const a in h)this._publicOptions[a]=h[a]}blur(){this._core.blur()}focus(){this._core.focus()}resize(h,a){this._verifyIntegers(h,a),this._core.resize(h,a)}open(h){this._core.open(h)}attachCustomKeyEventHandler(h){this._core.attachCustomKeyEventHandler(h)}registerLinkProvider(h){return this._core.registerLinkProvider(h)}registerCharacterJoiner(h){return this._checkProposedApi(),this._core.registerCharacterJoiner(h)}deregisterCharacterJoiner(h){this._checkProposedApi(),this._core.deregisterCharacterJoiner(h)}registerMarker(h=0){return this._verifyIntegers(h),this._core.registerMarker(h)}registerDecoration(h){var a,u,g;return this._checkProposedApi(),this._verifyPositiveIntegers((a=h.x)!==null&&a!==void 0?a:0,(u=h.width)!==null&&u!==void 0?u:0,(g=h.height)!==null&&g!==void 0?g:0),this._core.registerDecoration(h)}hasSelection(){return this._core.hasSelection()}select(h,a,u){this._verifyIntegers(h,a,u),this._core.select(h,a,u)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(h,a){this._verifyIntegers(h,a),this._core.selectLines(h,a)}dispose(){super.dispose()}scrollLines(h){this._verifyIntegers(h),this._core.scrollLines(h)}scrollPages(h){this._verifyIntegers(h),this._core.scrollPages(h)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(h){this._verifyIntegers(h),this._core.scrollToLine(h)}clear(){this._core.clear()}write(h,a){this._core.write(h,a)}writeln(h,a){this._core.write(h),this._core.write(`\r
`,a)}paste(h){this._core.paste(h)}refresh(h,a){this._verifyIntegers(h,a),this._core.refresh(h,a)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(h){this._addonManager.loadAddon(this,h)}static get strings(){return i}_verifyIntegers(...h){for(const a of h)if(a===1/0||isNaN(a)||a%1!=0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...h){for(const a of h)if(a&&(a===1/0||isNaN(a)||a%1!=0||a<0))throw new Error("This API only accepts positive integers")}}p.Terminal=S})(),m})())})(Cr);var ml=Cr.exports,yr={exports:{}};(function(n,e){(function(t,s){n.exports=s()})(self,()=>(()=>{var t={};return(()=>{var s=t;Object.defineProperty(s,"__esModule",{value:!0}),s.FitAddon=void 0,s.FitAddon=class{activate(f){this._terminal=f}dispose(){}fit(){const f=this.proposeDimensions();if(!f||!this._terminal||isNaN(f.cols)||isNaN(f.rows))return;const m=this._terminal._core;this._terminal.rows===f.rows&&this._terminal.cols===f.cols||(m._renderService.clear(),this._terminal.resize(f.cols,f.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;const f=this._terminal._core,m=f._renderService.dimensions;if(m.css.cell.width===0||m.css.cell.height===0)return;const p=this._terminal.options.scrollback===0?0:f.viewport.scrollBarWidth,i=window.getComputedStyle(this._terminal.element.parentElement),r=parseInt(i.getPropertyValue("height")),c=Math.max(0,parseInt(i.getPropertyValue("width"))),d=window.getComputedStyle(this._terminal.element),l=r-(parseInt(d.getPropertyValue("padding-top"))+parseInt(d.getPropertyValue("padding-bottom"))),_=c-(parseInt(d.getPropertyValue("padding-right"))+parseInt(d.getPropertyValue("padding-left")))-p;return{cols:Math.max(2,Math.floor(_/m.css.cell.width)),rows:Math.max(1,Math.floor(l/m.css.cell.height))}}}})(),t})())})(yr);var vl=yr.exports;function gl(n){let e,t,s,f,m,p,i,r,c,d,l,_,b,w,S,o,h,a,u,g;return S=new _e({props:{icon:on}}),{c(){e=P("form"),t=P("div"),s=P("div"),f=P("input"),m=G(),p=P("label"),p.textContent="Command",i=G(),r=P("div"),c=P("input"),d=G(),l=P("label"),l.textContent="User",_=G(),b=P("div"),w=P("button"),oe(S.$$.fragment),o=Y(`
          Open Terminal`),D(f,"type","text"),D(f,"class","form-control"),D(f,"id","inpTerminalCmd"),D(p,"for","inpTerminalCmd"),D(s,"class","form-floating mb-2"),D(c,"type","text"),D(c,"class","form-control"),D(c,"id","inpTerminalUser"),D(l,"for","inpTerminalUser"),D(r,"class","form-floating mb-2"),D(w,"type","submit"),D(w,"class","btn btn-primary w-100"),D(b,"class","col-12"),D(t,"class","container"),be(t,"max-width","400px"),D(e,"class","container login-form")},m(v,y){U(v,e,y),R(e,t),R(t,s),R(s,f),Ye(f,n[2]),R(s,m),R(s,p),R(t,i),R(t,r),R(r,c),Ye(c,n[3]),R(r,d),R(r,l),R(t,_),R(t,b),R(b,w),re(S,w,null),R(w,o),a=!0,u||(g=[pe(f,"input",n[10]),pe(c,"input",n[11]),pe(e,"submit",Qt(n[5]))],u=!0)},p(v,y){y&4&&f.value!==v[2]&&Ye(f,v[2]),y&8&&c.value!==v[3]&&Ye(c,v[3])},i(v){a||(N(S.$$.fragment,v),v&&Te(()=>{a&&(h||(h=qe(e,Ne,{},!0)),h.run(1))}),a=!0)},o(v){q(S.$$.fragment,v),v&&(h||(h=qe(e,Ne,{},!1)),h.run(0)),a=!1},d(v){v&&W(e),ne(S),v&&h&&h.end(),u=!1,Ve(g)}}}function bl(n){let e,t,s,f,m,p,i,r,c,d,l;return s=new _e({props:{icon:_r,size:"lg",color:"#666"}}),p=new _e({props:{icon:Fn,size:"lg",color:"#666"}}),{c(){e=P("div"),t=P("button"),oe(s.$$.fragment),f=G(),m=P("button"),oe(p.$$.fragment),i=G(),r=P("div"),D(t,"type","button"),D(t,"class","btn mx-3"),D(t,"title","Fullscreen"),D(m,"type","button"),D(m,"class","btn mx-3"),D(m,"title","Close Terminal"),D(e,"class","d-flex justify-content-end mb-2"),D(r,"class","border"),be(r,"height","calc(100vh - 280px)")},m(_,b){U(_,e,b),R(e,t),re(s,t,null),R(e,f),R(e,m),re(p,m,null),U(_,i,b),U(_,r,b),n[9](r),c=!0,d||(l=[pe(t,"click",n[6]),pe(m,"click",n[8])],d=!0)},p:he,i(_){c||(N(s.$$.fragment,_),N(p.$$.fragment,_),c=!0)},o(_){q(s.$$.fragment,_),q(p.$$.fragment,_),c=!1},d(_){_&&(W(e),W(i),W(r)),ne(s),ne(p),n[9](null),d=!1,Ve(l)}}}function Sl(n){let e,t,s,f,m,p;const i=[bl,gl],r=[];function c(d,l){return d[1]?0:1}return e=c(n),t=r[e]=i[e](n),{c(){t.c(),s=rt()},m(d,l){r[e].m(d,l),U(d,s,l),f=!0,m||(p=pe(window,"resize",n[4]),m=!0)},p(d,[l]){let _=e;e=c(d),e===_?r[e].p(d,l):(ve(),q(r[_],1,1,()=>{r[_]=null}),ge(),t=r[e],t?t.p(d,l):(t=r[e]=i[e](d),t.c()),N(t,1),t.m(s.parentNode,s))},i(d){f||(N(t),f=!0)},o(d){q(t),f=!1},d(d){d&&W(s),r[e].d(d),m=!1,p()}}}const Ps="sh",Is="root";function Cl(n,e,t){let{container_id:s}=e,f,m,p=!1,i=Ps,r=Is;const c=new ml.Terminal({theme:{background:"#222",cursor:"white",cursorAccent:"#222"},cursorBlink:!0}),d=new vl.FitAddon;Ht(()=>{s!==f&&(p&&(ce.send("close_terminal"),b()),f=s)}),Ge(()=>{ce.register("spawn_terminal",()=>{l(),c.focus()},u=>Ce.add({text:u,type:"error"})),ce.register("close_terminal",()=>{Ce.add({text:"Terminal has been closed",type:"info"}),b()},u=>Ce.add({text:u,type:"error"})),ce.register("receive_terminal_output",async u=>{c.write(new Uint8Array(await u.blob.arrayBuffer()))},u=>Ce.add({text:u,type:"error"})),c.onResize(u=>{ce.send("resize_terminal",u)}),c.loadAddon(d),c.onData(u=>{ce.send("transmit_terminal_input",{data:u})})}),dt(()=>{p&&ce.send("close_terminal"),ce.unregister("spawn_terminal"),ce.unregister("close_terminal"),ce.unregister("receive_terminal_output")});function l(){p&&d.fit()}async function _(){t(1,p=!0),ce.send("spawn_terminal",{container_id:s,cmd:i,user:r}),await ar(),c.open(m)}function b(){t(1,p=!1),c.reset(),c.clear(),t(2,i=Ps),t(3,r=Is)}function w(){m!=null&&m.requestFullscreen&&m.requestFullscreen({navigationUI:"show"})}const S=()=>ce.send("close_terminal");function o(u){ft[u?"unshift":"push"](()=>{m=u,t(0,m)})}function h(){i=this.value,t(2,i)}function a(){r=this.value,t(3,r)}return n.$$set=u=>{"container_id"in u&&t(7,s=u.container_id)},[m,p,i,r,l,_,w,s,S,o,h,a]}class wl extends He{constructor(e){super(),Ie(this,e,Cl,Sl,xe,{container_id:7})}}const yl={prefix:"fab",iconName:"docker",icon:[640,512,[],"f395","M349.9 236.3h-66.1v-59.4h66.1v59.4zm0-204.3h-66.1v60.7h66.1V32zm78.2 144.8H362v59.4h66.1v-59.4zm-156.3-72.1h-66.1v60.1h66.1v-60.1zm78.1 0h-66.1v60.1h66.1v-60.1zm276.8 100c-14.4-9.7-47.6-13.2-73.1-8.4-3.3-24-16.7-44.9-41.1-63.7l-14-9.3-9.3 14c-18.4 27.8-23.4 73.6-3.7 103.8-8.7 4.7-25.8 11.1-48.4 10.7H2.4c-8.7 50.8 5.8 116.8 44 162.1 37.1 43.9 92.7 66.2 165.4 66.2 157.4 0 273.9-72.5 328.4-204.2 21.4.4 67.6.1 91.3-45.2 1.5-2.5 6.6-13.2 8.5-17.1l-13.3-8.9zm-511.1-27.9h-66v59.4h66.1v-59.4zm78.1 0h-66.1v59.4h66.1v-59.4zm78.1 0h-66.1v59.4h66.1v-59.4zm-78.1-72.1h-66.1v60.1h66.1v-60.1z"]},kl={prefix:"fab",iconName:"github",icon:[496,512,[],"f09b","M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"]};function El(n){let e,t,s,f,m,p,i,r=n[1].os+"",c,d,l,_,b,w=n[1].cpus+"",S,o,h,a,u,g,v=je(n[1].mem)+"",y,E,C,k,B,x,M=n[1].engine_version+"",O,j,$,V,F,L=n[1].containers.running+"",T,H,I=n[1].containers.total+"",X,J,se,te,de,A,z,Z;return p=new _e({props:{icon:pn,size:"lg",style:"width: 3rem"}}),_=new _e({props:{icon:pr,size:"lg",style:"width: 3rem"}}),u=new _e({props:{icon:dr,size:"lg",style:"width: 3rem"}}),B=new _e({props:{icon:yl,size:"lg",style:"width: 3rem"}}),V=new _e({props:{icon:mr,size:"lg",style:"width: 3rem"}}),A=new _e({props:{icon:kl,size:"sm"}}),{c(){e=P("div"),t=P("div"),s=P("div"),s.textContent="Host",f=G(),m=P("div"),oe(p.$$.fragment),i=G(),c=Y(r),d=G(),l=P("div"),oe(_.$$.fragment),b=G(),S=Y(w),o=Y(" CPUs"),h=G(),a=P("div"),oe(u.$$.fragment),g=G(),y=Y(v),E=Y(`
          Memory`),C=G(),k=P("div"),oe(B.$$.fragment),x=G(),O=Y(M),j=G(),$=P("div"),oe(V.$$.fragment),F=G(),T=Y(L),H=Y("/"),X=Y(I),J=Y(" Containers running"),se=G(),te=P("div"),de=P("a"),oe(A.$$.fragment),z=Y(`
            CaaSa on Github`),D(s,"class","fs-4 text-uppercase mb-3"),D(m,"class","d-flex align-items-center mb-2"),D(l,"class","d-flex align-items-center mb-2"),D(a,"class","d-flex align-items-center mb-2"),D(k,"class","d-flex align-items-center mb-2"),D($,"class","d-flex align-items-center mb-2"),D(de,"href","https://github.com/knrdl/caasa"),D(de,"target","_blank"),D(de,"rel","noopener noreferrer"),D(de,"class","text-decoration-none"),D(te,"class","mt-3"),D(t,"class","card-body"),D(e,"class","card")},m(K,ae){U(K,e,ae),R(e,t),R(t,s),R(t,f),R(t,m),re(p,m,null),R(m,i),R(m,c),R(t,d),R(t,l),re(_,l,null),R(l,b),R(l,S),R(l,o),R(t,h),R(t,a),re(u,a,null),R(a,g),R(a,y),R(a,E),R(t,C),R(t,k),re(B,k,null),R(k,x),R(k,O),R(t,j),R(t,$),re(V,$,null),R($,F),R($,T),R($,H),R($,X),R($,J),R(t,se),R(t,te),R(te,de),re(A,de,null),R(de,z),Z=!0},p(K,ae){(!Z||ae&2)&&r!==(r=K[1].os+"")&&le(c,r),(!Z||ae&2)&&w!==(w=K[1].cpus+"")&&le(S,w),(!Z||ae&2)&&v!==(v=je(K[1].mem)+"")&&le(y,v),(!Z||ae&2)&&M!==(M=K[1].engine_version+"")&&le(O,M),(!Z||ae&2)&&L!==(L=K[1].containers.running+"")&&le(T,L),(!Z||ae&2)&&I!==(I=K[1].containers.total+"")&&le(X,I)},i(K){Z||(N(p.$$.fragment,K),N(_.$$.fragment,K),N(u.$$.fragment,K),N(B.$$.fragment,K),N(V.$$.fragment,K),N(A.$$.fragment,K),Z=!0)},o(K){q(p.$$.fragment,K),q(_.$$.fragment,K),q(u.$$.fragment,K),q(B.$$.fragment,K),q(V.$$.fragment,K),q(A.$$.fragment,K),Z=!1},d(K){K&&W(e),ne(p),ne(_),ne(u),ne(B),ne(V),ne(A)}}}function Ll(n){let e;return{c(){e=P("div"),e.innerHTML='<strong class="mx-5">Loading...</strong> <div class="spinner-border ms-auto" role="status" aria-hidden="true"></div>',D(e,"class","d-flex align-items-center")},m(t,s){U(t,e,s)},p:he,i:he,o:he,d(t){t&&W(e)}}}function Dl(n){let e,t,s,f;const m=[Ll,El],p=[];function i(r,c){return r[0]?0:r[1]?1:-1}return~(t=i(n))&&(s=p[t]=m[t](n)),{c(){e=P("div"),s&&s.c(),D(e,"class","flex-grow-1 d-flex justify-content-center align-items-start mt-5")},m(r,c){U(r,e,c),~t&&p[t].m(e,null),f=!0},p(r,[c]){let d=t;t=i(r),t===d?~t&&p[t].p(r,c):(s&&(ve(),q(p[d],1,1,()=>{p[d]=null}),ge()),~t?(s=p[t],s?s.p(r,c):(s=p[t]=m[t](r),s.c()),N(s,1),s.m(e,null)):s=null)},i(r){f||(N(s),f=!0)},o(r){q(s),f=!1},d(r){r&&W(e),~t&&p[t].d()}}}function Rl(n,e,t){let s=!0,f;return Ge(()=>{ce.register("get_system_info",m=>{t(1,f=m),t(0,s=!1)},m=>{t(0,s=!1),Ce.add({text:m,type:"error"})}),ce.send("get_system_info")}),dt(()=>{ce.unregister("get_system_info")}),[s,f]}class Al extends He{constructor(e){super(),Ie(this,e,Rl,Dl,xe,{})}}function Hs(n,e,t){const s=n.slice();s[7]=e[t];const f=s[1]&&s[1].id===s[7].id;return s[8]=f,s}function $s(n){let e;function t(m,p){return m[0].length===0?Ml:Bl}let s=t(n),f=s(n);return{c(){f.c(),e=rt()},m(m,p){f.m(m,p),U(m,e,p)},p(m,p){s===(s=t(m))&&f?f.p(m,p):(f.d(1),f=s(m),f&&(f.c(),f.m(e.parentNode,e)))},d(m){m&&W(e),f.d(m)}}}function Bl(n){let e,t,s,f,m,p=ye(n[3]),i=[];for(let c=0;c<p.length;c+=1)i[c]=zs(Hs(n,p,c));let r=null;return p.length||(r=Fs()),{c(){e=P("input"),t=G();for(let c=0;c<i.length;c+=1)i[c].c();s=rt(),r&&r.c(),D(e,"type","search"),D(e,"class","form-control svelte-6rcsrg"),D(e,"placeholder","Search"),e.value=n[2]},m(c,d){U(c,e,d),U(c,t,d);for(let l=0;l<i.length;l+=1)i[l]&&i[l].m(c,d);U(c,s,d),r&&r.m(c,d),f||(m=pe(e,"input",n[5]),f=!0)},p(c,d){if(d&4&&e.value!==c[2]&&(e.value=c[2]),d&26){p=ye(c[3]);let l;for(l=0;l<p.length;l+=1){const _=Hs(c,p,l);i[l]?i[l].p(_,d):(i[l]=zs(_),i[l].c(),i[l].m(s.parentNode,s))}for(;l<i.length;l+=1)i[l].d(1);i.length=p.length,!p.length&&r?r.p(c,d):p.length?r&&(r.d(1),r=null):(r=Fs(),r.c(),r.m(s.parentNode,s))}},d(c){c&&(W(e),W(t),W(s)),Ke(i,c),r&&r.d(c),f=!1,m()}}}function Ml(n){let e;return{c(){e=P("p"),e.textContent="No containers found",D(e,"class","mx-5 my-2")},m(t,s){U(t,e,s)},p:he,d(t){t&&W(e)}}}function Fs(n){let e;return{c(){e=P("p"),e.textContent="No containers match search term",D(e,"class","mx-2 my-1")},m(t,s){U(t,e,s)},p:he,d(t){t&&W(e)}}}function zs(n){let e,t,s,f,m,p=(n[7].namespace||"")+"",i,r,c,d=n[7].name+"",l,_,b,w;function S(){return n[6](n[7])}return{c(){var o;e=P("div"),t=P("div"),s=G(),f=P("div"),m=P("div"),i=Y(p),r=G(),c=P("div"),l=Y(d),_=G(),be(t,"width","10px"),be(t,"flex","none"),ie(t,"bg-success",n[7].status==="running"),ie(t,"bg-danger",["exited","dead","removing"].includes(n[7].status)),ie(t,"bg-warning",["created","paused","restarting"].includes(n[7].status)),D(m,"class","text-uppercase"),ie(m,"text-muted",((o=n[1])==null?void 0:o.id)!==n[7].id),D(f,"class","p-2 pe-4"),D(e,"class","d-flex border-top border-bottom"),be(e,"cursor","pointer"),ie(e,"bg-dark",n[8]),ie(e,"text-light",n[8])},m(o,h){U(o,e,h),R(e,t),R(e,s),R(e,f),R(f,m),R(m,i),R(f,r),R(f,c),R(c,l),R(e,_),b||(w=pe(e,"click",S),b=!0)},p(o,h){var a;n=o,h&8&&ie(t,"bg-success",n[7].status==="running"),h&8&&ie(t,"bg-danger",["exited","dead","removing"].includes(n[7].status)),h&8&&ie(t,"bg-warning",["created","paused","restarting"].includes(n[7].status)),h&8&&p!==(p=(n[7].namespace||"")+"")&&le(i,p),h&10&&ie(m,"text-muted",((a=n[1])==null?void 0:a.id)!==n[7].id),h&8&&d!==(d=n[7].name+"")&&le(l,d),h&10&&ie(e,"bg-dark",n[8]),h&10&&ie(e,"text-light",n[8])},d(o){o&&W(e),b=!1,w()}}}function Tl(n){let e,t=n[0]&&$s(n);return{c(){e=P("aside"),t&&t.c(),D(e,"class","d-flex flex-column pb-1 svelte-6rcsrg")},m(s,f){U(s,e,f),t&&t.m(e,null)},p(s,[f]){s[0]?t?t.p(s,f):(t=$s(s),t.c(),t.m(e,null)):t&&(t.d(1),t=null)},i:he,o:he,d(s){s&&W(e),t&&t.d()}}}function xl(n,e,t){let s,{containers:f}=e,{selectedContainer:m}=e;const p=nr();let i="";const r=d=>t(2,i=d.target.value.toLowerCase()),c=d=>p("select-container",d);return n.$$set=d=>{"containers"in d&&t(0,f=d.containers),"selectedContainer"in d&&t(1,m=d.selectedContainer)},n.$$.update=()=>{n.$$.dirty&5&&t(3,s=f==null?void 0:f.filter(d=>{var l;return d.name.toLowerCase().replace(/\s+/g,"").includes(i.replace(/\s+/g,""))||((l=d.namespace)==null?void 0:l.toLowerCase().replace(/\s+/g,"").includes(i.replace(/\s+/g,"")))}))},[f,m,i,s,p,r,c]}class kr extends He{constructor(e){super(),Ie(this,e,xl,Tl,xe,{containers:0,selectedContainer:1})}}function Ns(n){let e,t;return e=new gr({}),{c(){oe(e.$$.fragment)},m(s,f){re(e,s,f),t=!0},i(s){t||(N(e.$$.fragment,s),t=!0)},o(s){q(e.$$.fragment,s),t=!1},d(s){ne(e,s)}}}function Ws(n){let e,t,s,f;return t=new kr({props:{containers:n[4],selectedContainer:n[0]?null:n[2]}}),t.$on("select-container",n[10]),{c(){e=P("div"),oe(t.$$.fragment),D(e,"class","position-absolute")},m(m,p){U(m,e,p),re(t,e,null),f=!0},p(m,p){const i={};p&16&&(i.containers=m[4]),p&5&&(i.selectedContainer=m[0]?null:m[2]),t.$set(i)},i(m){f||(N(t.$$.fragment,m),m&&Te(()=>{f&&(s||(s=qe(e,Jt,{y:-50,duration:200},!0)),s.run(1))}),f=!0)},o(m){q(t.$$.fragment,m),m&&(s||(s=qe(e,Jt,{y:-50,duration:200},!1)),s.run(0)),f=!1},d(m){m&&W(e),ne(t),m&&s&&s.end()}}}function Ol(n){var x,M,O,j,$,V,F,L,T,H;let e,t,s,f=(M=(x=n[2])==null?void 0:x.permissions)==null?void 0:M.includes("info"),m,p=(j=(O=n[2])==null?void 0:O.permissions)==null?void 0:j.includes("logs"),i,r=n[6]&&((V=($=n[2])==null?void 0:$.permissions)==null?void 0:V.includes("term")),c,d=n[6]&&((L=(F=n[2])==null?void 0:F.permissions)==null?void 0:L.includes("procs")),l,_=n[6]&&((H=(T=n[2])==null?void 0:T.permissions)==null?void 0:H.includes("files")),b,w,S,o,h,a,u=f&&Us(n),g=p&&js(n),v=r&&Ks(n),y=d&&qs(n),E=_&&Vs(n);const C=[zl,Fl,$l,Hl,Il],k=[];function B(I,X){return I[5]==="info"?0:I[5]==="logs"?1:I[5]==="term"?2:I[5]==="procs"?3:I[5]==="files"?4:-1}return~(S=B(n))&&(o=k[S]=C[S](n)),{c(){e=P("div"),t=P("div"),s=P("ul"),u&&u.c(),m=G(),g&&g.c(),i=G(),v&&v.c(),c=G(),y&&y.c(),l=G(),E&&E.c(),b=G(),w=P("div"),o&&o.c(),D(s,"class","card-header"),D(w,"class","card-body py-4"),D(t,"class","card tabs"),D(e,"class","container-md"),be(e,"overflow","hidden")},m(I,X){U(I,e,X),R(e,t),R(t,s),u&&u.m(s,null),R(s,m),g&&g.m(s,null),R(s,i),v&&v.m(s,null),R(s,c),y&&y.m(s,null),R(s,l),E&&E.m(s,null),R(t,b),R(t,w),~S&&k[S].m(w,null),a=!0},p(I,X){var se,te,de,A,z,Z,K,ae,ee,me;X&4&&(f=(te=(se=I[2])==null?void 0:se.permissions)==null?void 0:te.includes("info")),f?u?u.p(I,X):(u=Us(I),u.c(),u.m(s,m)):u&&(u.d(1),u=null),X&4&&(p=(A=(de=I[2])==null?void 0:de.permissions)==null?void 0:A.includes("logs")),p?g?g.p(I,X):(g=js(I),g.c(),g.m(s,i)):g&&(g.d(1),g=null),X&68&&(r=I[6]&&((Z=(z=I[2])==null?void 0:z.permissions)==null?void 0:Z.includes("term"))),r?v?v.p(I,X):(v=Ks(I),v.c(),v.m(s,c)):v&&(v.d(1),v=null),X&68&&(d=I[6]&&((ae=(K=I[2])==null?void 0:K.permissions)==null?void 0:ae.includes("procs"))),d?y?y.p(I,X):(y=qs(I),y.c(),y.m(s,l)):y&&(y.d(1),y=null),X&68&&(_=I[6]&&((me=(ee=I[2])==null?void 0:ee.permissions)==null?void 0:me.includes("files"))),_?E?E.p(I,X):(E=Vs(I),E.c(),E.m(s,null)):E&&(E.d(1),E=null);let J=S;S=B(I),S===J?~S&&k[S].p(I,X):(o&&(ve(),q(k[J],1,1,()=>{k[J]=null}),ge()),~S?(o=k[S],o?o.p(I,X):(o=k[S]=C[S](I),o.c()),N(o,1),o.m(w,null)):o=null)},i(I){a||(N(o),I&&Te(()=>{a&&(h||(h=qe(e,Jt,{x:300,duration:200},!0)),h.run(1))}),a=!0)},o(I){q(o),I&&(h||(h=qe(e,Jt,{x:300,duration:200},!1)),h.run(0)),a=!1},d(I){I&&W(e),u&&u.d(),g&&g.d(),v&&v.d(),y&&y.d(),E&&E.d(),~S&&k[S].d(),I&&h&&h.end()}}}function Pl(n){let e,t;return e=new Al({}),{c(){oe(e.$$.fragment)},m(s,f){re(e,s,f),t=!0},p:he,i(s){t||(N(e.$$.fragment,s),t=!0)},o(s){q(e.$$.fragment,s),t=!1},d(s){ne(e,s)}}}function Us(n){let e,t,s,f;return{c(){e=P("li"),t=P("button"),t.textContent="Info",D(t,"type","button"),D(t,"class","text-uppercase"),ie(t,"active",n[5]==="info")},m(m,p){U(m,e,p),R(e,t),s||(f=pe(t,"click",n[12]),s=!0)},p(m,p){p&32&&ie(t,"active",m[5]==="info")},d(m){m&&W(e),s=!1,f()}}}function js(n){let e,t,s,f;return{c(){e=P("li"),t=P("button"),t.textContent="Logs",D(t,"type","button"),D(t,"class","text-uppercase"),ie(t,"active",n[5]==="logs")},m(m,p){U(m,e,p),R(e,t),s||(f=pe(t,"click",n[13]),s=!0)},p(m,p){p&32&&ie(t,"active",m[5]==="logs")},d(m){m&&W(e),s=!1,f()}}}function Ks(n){let e,t,s,f;return{c(){e=P("li"),t=P("button"),t.textContent="Terminal",D(t,"type","button"),D(t,"class","text-uppercase"),ie(t,"active",n[5]==="term")},m(m,p){U(m,e,p),R(e,t),s||(f=pe(t,"click",n[14]),s=!0)},p(m,p){p&32&&ie(t,"active",m[5]==="term")},d(m){m&&W(e),s=!1,f()}}}function qs(n){let e,t,s,f;return{c(){e=P("li"),t=P("button"),t.textContent="Processes",D(t,"type","button"),D(t,"class","text-uppercase"),ie(t,"active",n[5]==="procs")},m(m,p){U(m,e,p),R(e,t),s||(f=pe(t,"click",n[15]),s=!0)},p(m,p){p&32&&ie(t,"active",m[5]==="procs")},d(m){m&&W(e),s=!1,f()}}}function Vs(n){let e,t,s,f;return{c(){e=P("li"),t=P("button"),t.textContent="Files",D(t,"type","button"),D(t,"class","text-uppercase"),ie(t,"active",n[5]==="files")},m(m,p){U(m,e,p),R(e,t),s||(f=pe(t,"click",n[16]),s=!0)},p(m,p){p&32&&ie(t,"active",m[5]==="files")},d(m){m&&W(e),s=!1,f()}}}function Il(n){let e,t,s,f;return t=new hl({props:{container_id:n[2].id,allow_download:n[2].permissions.includes("files-read"),allow_upload:n[2].permissions.includes("files-write")}}),{c(){e=P("div"),oe(t.$$.fragment)},m(m,p){U(m,e,p),re(t,e,null),f=!0},p(m,p){const i={};p&4&&(i.container_id=m[2].id),p&4&&(i.allow_download=m[2].permissions.includes("files-read")),p&4&&(i.allow_upload=m[2].permissions.includes("files-write")),t.$set(i)},i(m){f||(N(t.$$.fragment,m),m&&(s||Te(()=>{s=wt(e,Ne,{}),s.start()})),f=!0)},o(m){q(t.$$.fragment,m),f=!1},d(m){m&&W(e),ne(t)}}}function Hl(n){let e,t,s,f;return t=new pl({props:{container_id:n[2].id}}),{c(){e=P("div"),oe(t.$$.fragment)},m(m,p){U(m,e,p),re(t,e,null),f=!0},p(m,p){const i={};p&4&&(i.container_id=m[2].id),t.$set(i)},i(m){f||(N(t.$$.fragment,m),m&&(s||Te(()=>{s=wt(e,Ne,{}),s.start()})),f=!0)},o(m){q(t.$$.fragment,m),f=!1},d(m){m&&W(e),ne(t)}}}function $l(n){let e,t,s,f;return t=new wl({props:{container_id:n[2].id}}),{c(){e=P("div"),oe(t.$$.fragment)},m(m,p){U(m,e,p),re(t,e,null),f=!0},p(m,p){const i={};p&4&&(i.container_id=m[2].id),t.$set(i)},i(m){f||(N(t.$$.fragment,m),m&&(s||Te(()=>{s=wt(e,Ne,{}),s.start()})),f=!0)},o(m){q(t.$$.fragment,m),f=!1},d(m){m&&W(e),ne(t)}}}function Fl(n){let e,t,s,f;return t=new Wo({props:{container_id:n[2].id}}),{c(){e=P("div"),oe(t.$$.fragment)},m(m,p){U(m,e,p),re(t,e,null),f=!0},p(m,p){const i={};p&4&&(i.container_id=m[2].id),t.$set(i)},i(m){f||(N(t.$$.fragment,m),m&&(s||Te(()=>{s=wt(e,Ne,{}),s.start()})),f=!0)},o(m){q(t.$$.fragment,m),f=!1},d(m){m&&W(e),ne(t)}}}function zl(n){let e,t,s,f;return t=new Mo({props:{container_id:n[2].id,enable_actions:n[2].permissions.includes("state")}}),{c(){e=P("div"),oe(t.$$.fragment)},m(m,p){U(m,e,p),re(t,e,null),f=!0},p(m,p){const i={};p&4&&(i.container_id=m[2].id),p&4&&(i.enable_actions=m[2].permissions.includes("state")),t.$set(i)},i(m){f||(N(t.$$.fragment,m),m&&(s||Te(()=>{s=wt(e,Ne,{}),s.start()})),f=!0)},o(m){q(t.$$.fragment,m),f=!1},d(m){m&&W(e),ne(t)}}}function Nl(n){let e,t,s,f,m,p,i,r,c,d,l,_,b,w,S=n[3]&&Ns(),o=n[1]&&Ws(n);r=new kr({props:{containers:n[4],selectedContainer:n[0]?null:n[2]}}),r.$on("select-container",n[11]);const h=[Pl,Ol],a=[];function u(g,v){return g[0]?0:1}return d=u(n),l=a[d]=h[d](n),{c(){S&&S.c(),e=G(),t=P("div"),s=P("div"),f=G(),o&&o.c(),m=G(),p=P("div"),i=P("aside"),oe(r.$$.fragment),c=G(),l.c(),D(s,"class","position-fixed top-0 bottom-0 start-0 end-0"),be(s,"background","rgba(0, 0, 0, .55)"),D(t,"class","d-md-none position-relative"),be(t,"z-index","100"),ie(t,"d-none",!n[1]),D(i,"class","d-none d-md-block me-4"),D(p,"class","d-flex pb-3 align-items-start")},m(g,v){S&&S.m(g,v),U(g,e,v),U(g,t,v),R(t,s),R(t,f),o&&o.m(t,null),U(g,m,v),U(g,p,v),R(p,i),re(r,i,null),R(p,c),a[d].m(p,null),_=!0,b||(w=pe(s,"click",n[9]),b=!0)},p(g,[v]){g[3]?S?v&8&&N(S,1):(S=Ns(),S.c(),N(S,1),S.m(e.parentNode,e)):S&&(ve(),q(S,1,1,()=>{S=null}),ge()),g[1]?o?(o.p(g,v),v&2&&N(o,1)):(o=Ws(g),o.c(),N(o,1),o.m(t,null)):o&&(ve(),q(o,1,1,()=>{o=null}),ge()),(!_||v&2)&&ie(t,"d-none",!g[1]);const y={};v&16&&(y.containers=g[4]),v&5&&(y.selectedContainer=g[0]?null:g[2]),r.$set(y);let E=d;d=u(g),d===E?a[d].p(g,v):(ve(),q(a[E],1,1,()=>{a[E]=null}),ge(),l=a[d],l?l.p(g,v):(l=a[d]=h[d](g),l.c()),N(l,1),l.m(p,null))},i(g){_||(N(S),N(o),N(r.$$.fragment,g),N(l),_=!0)},o(g){q(S),q(o),q(r.$$.fragment,g),q(l),_=!1},d(g){g&&(W(e),W(t),W(m),W(p)),S&&S.d(g),o&&o.d(),ne(r),a[d].d(),b=!1,w()}}}function Wl(n,e,t){let s,f,m=!0,p,i,{showHostInfo:r}=e,{showContainerListOverlay:c}=e,d=null;Ge(()=>{ce.register("get_container_list",v=>{t(4,p=v),t(3,m=!1)},v=>Ce.add({text:v,type:"error"})),ce.send("get_container_list"),f=setInterval(()=>{ce.send("get_container_list")},3e3)}),dt(()=>{ce.unregister("get_container_list"),clearInterval(f)});function l(v){t(5,d=null),t(0,r=!1),t(1,c=!1),t(2,i=null),window.scrollTo({top:0,behavior:"smooth"}),setTimeout(()=>{var E;t(2,i=v);const y=["info","logs","procs","term","files"];for(let C of y)if((E=i==null?void 0:i.permissions)!=null&&E.includes(C)){t(5,d=C);break}d||(t(2,i=null),Ce.add({type:"warning",text:"No permissions to access container"}))},100)}function _(v){t(5,d=v)}const b=()=>t(1,c=!1),w=v=>l(v.detail),S=v=>l(v.detail),o=()=>_("info"),h=()=>_("logs"),a=()=>_("term"),u=()=>_("procs"),g=()=>_("files");return n.$$set=v=>{"showHostInfo"in v&&t(0,r=v.showHostInfo),"showContainerListOverlay"in v&&t(1,c=v.showContainerListOverlay)},n.$$.update=()=>{n.$$.dirty&4&&t(6,s=(i==null?void 0:i.status)==="running")},[r,c,i,m,p,d,s,l,_,b,w,S,o,h,a,u,g]}class Ul extends He{constructor(e){super(),Ie(this,e,Wl,Nl,xe,{showHostInfo:0,showContainerListOverlay:1})}}const{window:jl}=Br;function Gs(n){let e,t,s,f,m;return t=new _e({props:{icon:ln,color:"#123",size:"2x",style:"width: 3rem;height: 3rem;"}}),{c(){e=P("a"),oe(t.$$.fragment),D(e,"href","/#/"),D(e,"class","d-md-none d-flex justify-content-center align-items-center svelte-1b5nrvg")},m(p,i){U(p,e,i),re(t,e,null),s=!0,f||(m=pe(e,"click",Qt(n[5])),f=!0)},p:he,i(p){s||(N(t.$$.fragment,p),s=!0)},o(p){q(t.$$.fragment,p),s=!1},d(p){p&&W(e),ne(t),f=!1,m()}}}function Xs(n){let e,t,s,f,m,p;return t=new _e({props:{icon:nn,color:"#333",size:"2x"}}),{c(){e=P("button"),oe(t.$$.fragment),D(e,"type","button"),D(e,"class","btn mx-2"),D(e,"title",s="Logout "+n[0])},m(i,r){U(i,e,r),re(t,e,null),f=!0,m||(p=pe(e,"click",n[4]),m=!0)},p(i,r){(!f||r&1&&s!==(s="Logout "+i[0]))&&D(e,"title",s)},i(i){f||(N(t.$$.fragment,i),f=!0)},o(i){q(t.$$.fragment,i),f=!1},d(i){i&&W(e),ne(t),m=!1,p()}}}function Kl(n){let e,t;return e=new ao({}),e.$on("login",n[9]),{c(){oe(e.$$.fragment)},m(s,f){re(e,s,f),t=!0},p:he,i(s){t||(N(e.$$.fragment,s),t=!0)},o(s){q(e.$$.fragment,s),t=!1},d(s){ne(e,s)}}}function ql(n){let e,t,s,f;function m(r){n[7](r)}function p(r){n[8](r)}let i={};return n[2]!==void 0&&(i.showHostInfo=n[2]),n[3]!==void 0&&(i.showContainerListOverlay=n[3]),e=new Ul({props:i}),ft.push(()=>Mi(e,"showHostInfo",m)),ft.push(()=>Mi(e,"showContainerListOverlay",p)),{c(){oe(e.$$.fragment)},m(r,c){re(e,r,c),f=!0},p(r,c){const d={};!t&&c&4&&(t=!0,d.showHostInfo=r[2],Bi(()=>t=!1)),!s&&c&8&&(s=!0,d.showContainerListOverlay=r[3],Bi(()=>s=!1)),e.$set(d)},i(r){f||(N(e.$$.fragment,r),f=!0)},o(r){q(e.$$.fragment,r),f=!1},d(r){ne(e,r)}}}function Vl(n){let e,t,s,f,m,p,i,r,c,d,l,_,b,w,S,o,h,a,u,g;e=new Zr({});let v=n[0]&&Gs(n);r=new _e({props:{icon:bn,color:"#123",size:"2x",style:"width: 3rem;height: 3rem;"}}),b=new qn({});let y=n[0]&&n[1]&&Xs(n);const E=[ql,Kl],C=[];function k(B,x){return B[0]?0:1}return o=k(n),h=C[o]=E[o](n),{c(){oe(e.$$.fragment),t=G(),s=P("main"),f=P("header"),v&&v.c(),m=G(),p=P("a"),i=P("span"),oe(r.$$.fragment),c=G(),d=P("span"),d.textContent="Container as a Service admin",l=G(),_=P("div"),oe(b.$$.fragment),w=G(),y&&y.c(),S=G(),h.c(),ie(i,"d-none",n[0]),ie(i,"d-md-block",n[0]),D(d,"class","text-black ps-2 fs-2 fw-light"),D(p,"href","/#/"),D(p,"class","d-flex justify-content-center align-items-center svelte-1b5nrvg"),D(_,"class","items-right svelte-1b5nrvg"),D(f,"class","svelte-1b5nrvg"),D(s,"class","svelte-1b5nrvg")},m(B,x){re(e,B,x),U(B,t,x),U(B,s,x),R(s,f),v&&v.m(f,null),R(f,m),R(f,p),R(p,i),re(r,i,null),R(p,c),R(p,d),R(f,l),R(f,_),re(b,_,null),R(_,w),y&&y.m(_,null),R(s,S),C[o].m(s,null),a=!0,u||(g=[pe(jl,"error",Gl),pe(p,"click",Qt(n[6]))],u=!0)},p(B,[x]){B[0]?v?(v.p(B,x),x&1&&N(v,1)):(v=Gs(B),v.c(),N(v,1),v.m(f,m)):v&&(ve(),q(v,1,1,()=>{v=null}),ge()),(!a||x&1)&&ie(i,"d-none",B[0]),(!a||x&1)&&ie(i,"d-md-block",B[0]),B[0]&&B[1]?y?(y.p(B,x),x&3&&N(y,1)):(y=Xs(B),y.c(),N(y,1),y.m(_,null)):y&&(ve(),q(y,1,1,()=>{y=null}),ge());let M=o;o=k(B),o===M?C[o].p(B,x):(ve(),q(C[M],1,1,()=>{C[M]=null}),ge(),h=C[o],h?h.p(B,x):(h=C[o]=E[o](B),h.c()),N(h,1),h.m(s,null))},i(B){a||(N(e.$$.fragment,B),N(v),N(r.$$.fragment,B),N(b.$$.fragment,B),N(y),N(h),a=!0)},o(B){q(e.$$.fragment,B),q(v),q(r.$$.fragment,B),q(b.$$.fragment,B),q(y),q(h),a=!1},d(B){B&&(W(t),W(s)),ne(e,B),v&&v.d(),ne(r),ne(b),y&&y.d(),C[o].d(),u=!1,Ve(g)}}}function Gl(){alert("An error occurred!")}function Xl(n,e,t){let s=null,f=!0,m=!0,p=!1;Ge(async()=>{ce.register("ws-error",null,b=>Ce.add({text:b,type:"error"})),ce.register("ws-close",null,b=>{Ce.add({text:b,type:"error"}),t(0,s=null),alert("Lost connection. Reconnect?"),window.location.reload()}),ce.register("webproxy_auth",({username:b})=>{t(0,s=b),t(1,f=!1)},b=>{Ce.add({text:b,type:"error"})}),await ce.init()});function i(){ce.close(),t(0,s=null),Ce.add({text:"Logged out",type:"info"}),window.location.reload()}const r=()=>t(3,p=!p),c=()=>t(2,m=!0);function d(b){m=b,t(2,m)}function l(b){p=b,t(3,p)}return[s,f,m,p,i,r,c,d,l,b=>t(0,s=b.detail.username)]}class Zl extends He{constructor(e){super(),Ie(this,e,Xl,Vl,xe,{})}}new Zl({target:document.getElementById("app")});
