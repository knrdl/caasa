(function(){const h=document.createElement("link").relList;if(h&&h.supports&&h.supports("modulepreload"))return;for(const E of document.querySelectorAll('link[rel="modulepreload"]'))C(E);new MutationObserver(E=>{for(const D of E)if(D.type==="childList")for(const k of D.addedNodes)k.tagName==="LINK"&&k.rel==="modulepreload"&&C(k)}).observe(document,{childList:!0,subtree:!0});function _(E){const D={};return E.integrity&&(D.integrity=E.integrity),E.referrerPolicy&&(D.referrerPolicy=E.referrerPolicy),E.crossOrigin==="use-credentials"?D.credentials="include":E.crossOrigin==="anonymous"?D.credentials="omit":D.credentials="same-origin",D}function C(E){if(E.ep)return;E.ep=!0;const D=_(E);fetch(E.href,D)}})();const kn="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(kn);let Sr=!1,Ln=!1;function Dn(){Sr=!0}Dn();const ii=1,si=2,fs=4,Rn=8,An=16,Tn=1,Bn=2,Mn=4,On=8,Pn=16,In=1,Hn=2,Fn=4,_s=1,Nn=2,qe=Symbol(),zn="http://www.w3.org/1999/xhtml",vs=!1;var br=Array.isArray,Wn=Array.prototype.indexOf,Di=Array.from,Si=Object.defineProperty,ur=Object.getOwnPropertyDescriptor,ps=Object.getOwnPropertyDescriptors,$n=Object.prototype,Un=Array.prototype,Ri=Object.getPrototypeOf,$i=Object.isExtensible;function jn(s){return typeof s=="function"}const Pt=()=>{};function qn(s){return s()}function Xr(s){for(var h=0;h<s.length;h++)s[h]()}function Kn(){var s,h,_=new Promise((C,E)=>{s=C,h=E});return{promise:_,resolve:s,reject:h}}function Ui(s,h){if(Array.isArray(s))return s;if(!(Symbol.iterator in s))return Array.from(s);const _=[];for(const C of s)if(_.push(C),_.length===h)break;return _}const dt=2,Ai=4,ni=8,rr=16,$t=32,ir=64,Ti=128,gt=256,Zr=512,Ke=1024,wt=2048,Ut=4096,Lt=8192,sr=16384,oi=32768,Pr=65536,ji=1<<17,Vn=1<<18,wr=1<<19,gs=1<<20,bi=1<<21,Bi=1<<22,Zt=1<<23,Nt=Symbol("$state"),Gn=Symbol("legacy props"),Xn=Symbol(""),Mi=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function ai(s){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function Zn(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function Jn(s){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Yn(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Qn(s){throw new Error("https://svelte.dev/e/effect_orphan")}function eo(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function to(s){throw new Error("https://svelte.dev/e/lifecycle_legacy_only")}function ro(s){throw new Error("https://svelte.dev/e/props_invalid_value")}function io(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function so(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function no(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function oo(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}function ao(){console.warn("https://svelte.dev/e/select_multiple_invalid_value")}function lo(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}let co=!1;function ms(s){return s===this.v}function Ss(s,h){return s!=s?h==h:s!==h||s!==null&&typeof s=="object"||typeof s=="function"}function bs(s){return!Ss(s,this.v)}let Ee=null;function vr(s){Ee=s}function it(s,h=!1,_){Ee={p:Ee,c:null,e:null,s,x:null,l:Sr&&!h?{s:null,u:null,$:[]}:null}}function st(s){var h=Ee,_=h.e;if(_!==null){h.e=null;for(var C of _)Is(C)}return Ee=h.p,{}}function Ir(){return!Sr||Ee!==null&&Ee.l===null}let qt=[],Jr=[];function ws(){var s=qt;qt=[],Xr(s)}function ho(){var s=Jr;Jr=[],Xr(s)}function uo(){return qt.length>0||Jr.length>0}function nr(s){if(qt.length===0&&!Rr){var h=qt;queueMicrotask(()=>{h===qt&&ws()})}qt.push(s)}function fo(){qt.length>0&&ws(),Jr.length>0&&ho()}const _o=new WeakMap;function ys(s){var h=fe;if(h===null)return pe.f|=Zt,s;if((h.f&oi)===0){if((h.f&Ti)===0)throw!h.parent&&s instanceof Error&&Cs(s),s;h.b.error(s)}else pr(s,h)}function pr(s,h){for(;h!==null;){if((h.f&Ti)!==0)try{h.b.error(s);return}catch(_){s=_}h=h.parent}throw s instanceof Error&&Cs(s),s}function Cs(s){const h=_o.get(s);h&&(Si(s,"message",{value:h.message}),Si(s,"stack",{value:h.stack}))}const di=new Set;let Be=null,Vr=null,wi=new Set,Qt=[],li=null,yi=!1,Rr=!1;class zt{current=new Map;#n=new Map;#t=new Set;#u=0;#o=null;#h=!1;#s=[];#r=[];#e=[];#i=[];#a=[];#d=[];#c=[];skipped_effects=new Set;process(h){Qt=[],Vr=null;for(const E of h)this.#f(E);if(this.#s.length===0&&this.#u===0){this.#_();var _=this.#e,C=this.#i;this.#e=[],this.#i=[],this.#a=[],Vr=Be,Be=null,qi(_),qi(C),Be===null?Be=this:di.delete(this),this.#o?.resolve()}else this.#l(this.#e),this.#l(this.#i),this.#l(this.#a);for(const E of this.#s)Yt(E);for(const E of this.#r)Yt(E);this.#s=[],this.#r=[]}#f(h){h.f^=Ke;for(var _=h.first;_!==null;){var C=_.f,E=(C&($t|ir))!==0,D=E&&(C&Ke)!==0,k=D||(C&Lt)!==0||this.skipped_effects.has(_);if(!k&&_.fn!==null){if(E)_.f^=Ke;else if((C&Ai)!==0)this.#i.push(_);else if((C&Ke)===0)if((C&Bi)!==0){var i=_.b?.is_pending()?this.#r:this.#s;i.push(_)}else Wr(_)&&((_.f&rr)!==0&&this.#a.push(_),Yt(_));var o=_.first;if(o!==null){_=o;continue}}var c=_.parent;for(_=_.next;_===null&&c!==null;)_=c.next,c=c.parent}}#l(h){for(const _ of h)((_.f&wt)!==0?this.#d:this.#c).push(_),rt(_,Ke);h.length=0}capture(h,_){this.#n.has(h)||this.#n.set(h,_),this.current.set(h,h.v)}activate(){Be=this}deactivate(){Be=null,Vr=null;for(const h of wi)if(wi.delete(h),h(),Be!==null)break}neuter(){this.#h=!0}flush(){Qt.length>0?Es():this.#_(),Be===this&&(this.#u===0&&di.delete(this),this.deactivate())}#_(){if(!this.#h)for(const h of this.#t)h();this.#t.clear()}increment(){this.#u+=1}decrement(){if(this.#u-=1,this.#u===0){for(const h of this.#d)rt(h,wt),gr(h);for(const h of this.#c)rt(h,Ut),gr(h);this.#e=[],this.#i=[],this.flush()}else this.deactivate()}add_callback(h){this.#t.add(h)}settled(){return(this.#o??=Kn()).promise}static ensure(){if(Be===null){const h=Be=new zt;di.add(Be),Rr||zt.enqueue(()=>{Be===h&&h.flush()})}return Be}static enqueue(h){nr(h)}}function vo(s){var h=Rr;Rr=!0;try{for(var _;;){if(fo(),Qt.length===0&&!uo()&&(Be?.flush(),Qt.length===0))return li=null,_;Es()}}finally{Rr=h}}function Es(){var s=_r;yi=!0;try{var h=0;for(Xi(!0);Qt.length>0;){var _=zt.ensure();if(h++>1e3){var C,E;po()}_.process(Qt),Vt.clear()}}finally{yi=!1,Xi(s),li=null}}function po(){try{eo()}catch(s){pr(s,li)}}let Xt=null;function qi(s){var h=s.length;if(h!==0){for(var _=0;_<h;){var C=s[_++];if((C.f&(sr|Lt))===0&&Wr(C)&&(Xt=[],Yt(C),C.deps===null&&C.first===null&&C.nodes_start===null&&(C.teardown===null&&C.ac===null?Ns(C):C.fn=null),Xt?.length>0)){Vt.clear();for(const E of Xt)Yt(E);Xt=[]}}Xt=null}}function gr(s){for(var h=li=s;h.parent!==null;){h=h.parent;var _=h.f;if(yi&&h===fe&&(_&rr)!==0)return;if((_&(ir|$t))!==0){if((_&Ke)===0)return;h.f^=Ke}}Qt.push(h)}function go(s){let h=0,_=er(0),C;return()=>{To()&&(y(_),zr(()=>(h===0&&(C=j(()=>s(()=>Ar(_)))),h+=1,()=>{nr(()=>{h-=1,h===0&&(C?.(),C=void 0,Ar(_))})})))}}var mo=Pr|wr|Ti;function So(s,h,_){new bo(s,h,_)}class bo{parent;#n=!1;#t;#u=null;#o;#h;#s;#r=null;#e=null;#i=null;#a=null;#d=0;#c=0;#f=!1;#l=null;#_=()=>{this.#l&&tr(this.#l,this.#d)};#m=go(()=>(this.#l=er(this.#d),()=>{this.#l=null}));constructor(h,_,C){this.#t=h,this.#o=_,this.#h=C,this.parent=fe.b,this.#n=!!this.#o.pending,this.#s=Ii(()=>{fe.b=this;{try{this.#r=Et(()=>C(this.#t))}catch(E){this.error(E)}this.#c>0?this.#p():this.#n=!1}},mo)}#S(){try{this.#r=Et(()=>this.#h(this.#t))}catch(h){this.error(h)}this.#n=!1}#b(){const h=this.#o.pending;h&&(this.#e=Et(()=>h(this.#t)),zt.enqueue(()=>{this.#r=this.#v(()=>(zt.ensure(),Et(()=>this.#h(this.#t)))),this.#c>0?this.#p():(fr(this.#e,()=>{this.#e=null}),this.#n=!1)}))}is_pending(){return this.#n||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!this.#o.pending}#v(h){var _=fe,C=pe,E=Ee;Tt(this.#s),lt(this.#s),vr(this.#s.ctx);try{return h()}catch(D){return ys(D),null}finally{Tt(_),lt(C),vr(E)}}#p(){const h=this.#o.pending;this.#r!==null&&(this.#a=document.createDocumentFragment(),wo(this.#r,this.#a)),this.#e===null&&(this.#e=Et(()=>h(this.#t)))}#g(h){if(!this.has_pending_snippet()){this.parent&&this.parent.#g(h);return}this.#c+=h,this.#c===0&&(this.#n=!1,this.#e&&fr(this.#e,()=>{this.#e=null}),this.#a&&(this.#t.before(this.#a),this.#a=null))}update_pending_count(h){this.#g(h),this.#d+=h,wi.add(this.#_)}get_effect_pending(){return this.#m(),y(this.#l)}error(h){var _=this.#o.onerror;let C=this.#o.failed;if(this.#f||!_&&!C)throw h;this.#r&&(mt(this.#r),this.#r=null),this.#e&&(mt(this.#e),this.#e=null),this.#i&&(mt(this.#i),this.#i=null);var E=!1,D=!1;const k=()=>{if(E){lo();return}E=!0,D&&oo(),zt.ensure(),this.#d=0,this.#i!==null&&fr(this.#i,()=>{this.#i=null}),this.#n=this.has_pending_snippet(),this.#r=this.#v(()=>(this.#f=!1,Et(()=>this.#h(this.#t)))),this.#c>0?this.#p():this.#n=!1};var i=pe;try{lt(null),D=!0,_?.(h,k),D=!1}catch(o){pr(o,this.#s&&this.#s.parent)}finally{lt(i)}C&&nr(()=>{this.#i=this.#v(()=>{this.#f=!0;try{return Et(()=>{C(this.#t,()=>h,()=>k)})}catch(o){return pr(o,this.#s.parent),null}finally{this.#f=!1}})})}}function wo(s,h){for(var _=s.nodes_start,C=s.nodes_end;_!==null;){var E=_===C?null:Fr(_);h.append(_),_=E}}function yo(s,h,_){const C=Ir()?Hr:xt;if(h.length===0){_(s.map(C));return}var E=Be,D=fe,k=Co();Promise.all(h.map(i=>Eo(i))).then(i=>{E?.activate(),k();try{_([...s.map(C),...i])}catch(o){(D.f&sr)===0&&pr(o,D)}E?.deactivate(),xs()}).catch(i=>{pr(i,D)})}function Co(){var s=fe,h=pe,_=Ee,C=Be;return function(){Tt(s),lt(h),vr(_),C?.activate()}}function xs(){Tt(null),lt(null),vr(null)}function Hr(s){var h=dt|wt,_=pe!==null&&(pe.f&dt)!==0?pe:null;return fe===null||_!==null&&(_.f&gt)!==0?h|=gt:fe.f|=wr,{ctx:Ee,deps:null,effects:null,equals:ms,f:h,fn:s,reactions:null,rv:0,v:qe,wv:0,parent:_??fe,ac:null}}function Eo(s,h){let _=fe;_===null&&Zn();var C=_.b,E=void 0,D=er(qe),k=null,i=!pe;return Oo(()=>{try{var o=s();k&&Promise.resolve(o).catch(()=>{})}catch(p){o=Promise.reject(p)}var c=()=>o;E=k?.then(c,c)??Promise.resolve(o),k=E;var f=Be,a=C.is_pending();i&&(C.update_pending_count(1),a||f.increment());const l=(p,S=void 0)=>{k=null,a||f.activate(),S?S!==Mi&&(D.f|=Zt,tr(D,S)):((D.f&Zt)!==0&&(D.f^=Zt),tr(D,p)),i&&(C.update_pending_count(-1),a||f.decrement()),xs()};if(E.then(l,p=>l(null,p||"unknown")),f)return()=>{queueMicrotask(()=>f.neuter())}}),new Promise(o=>{function c(f){function a(){f===E?o(D):c(E)}f.then(a,a)}c(E)})}function Ki(s){const h=Hr(s);return $s(h),h}function xt(s){const h=Hr(s);return h.equals=bs,h}function ks(s){var h=s.effects;if(h!==null){s.effects=null;for(var _=0;_<h.length;_+=1)mt(h[_])}}function xo(s){for(var h=s.parent;h!==null;){if((h.f&dt)===0)return h;h=h.parent}return null}function Oi(s){var h,_=fe;Tt(xo(s));try{ks(s),h=Ks(s)}finally{Tt(_)}return h}function Ls(s){var h=Oi(s);if(s.equals(h)||(s.v=h,s.wv=js()),!or){var _=(Kt||(s.f&gt)!==0)&&s.deps!==null?Ut:Ke;rt(s,_)}}const Vt=new Map;function er(s,h){var _={f:0,v:s,reactions:null,equals:ms,rv:0,wv:0};return _}function jt(s,h){const _=er(s);return $s(_),_}function le(s,h=!1,_=!0){const C=er(s);return h||(C.equals=bs),Sr&&_&&Ee!==null&&Ee.l!==null&&(Ee.l.s??=[]).push(C),C}function ui(s,h){return Y(s,j(()=>y(s))),h}function Y(s,h,_=!1){pe!==null&&(!kt||(pe.f&ji)!==0)&&Ir()&&(pe.f&(dt|rr|Bi|ji))!==0&&!Wt?.includes(s)&&no();let C=_?dr(h):h;return tr(s,C)}function tr(s,h){if(!s.equals(h)){var _=s.v;or?Vt.set(s,h):Vt.set(s,_),s.v=h;var C=zt.ensure();C.capture(s,_),(s.f&dt)!==0&&((s.f&wt)!==0&&Oi(s),rt(s,(s.f&gt)===0?Ke:Ut)),s.wv=js(),Ds(s,wt),Ir()&&fe!==null&&(fe.f&Ke)!==0&&(fe.f&($t|ir))===0&&(_t===null?No([s]):_t.push(s))}return h}function Ar(s){Y(s,s.v+1)}function Ds(s,h){var _=s.reactions;if(_!==null)for(var C=Ir(),E=_.length,D=0;D<E;D++){var k=_[D],i=k.f;if(!(!C&&k===fe)){var o=(i&wt)===0;o&&rt(k,h),(i&dt)!==0?Ds(k,Ut):o&&((i&rr)!==0&&Xt!==null&&Xt.push(k),gr(k))}}}function dr(s){if(typeof s!="object"||s===null||Nt in s)return s;const h=Ri(s);if(h!==$n&&h!==Un)return s;var _=new Map,C=br(s),E=jt(0),D=Jt,k=i=>{if(Jt===D)return i();var o=pe,c=Jt;lt(null),Ji(D);var f=i();return lt(o),Ji(c),f};return C&&_.set("length",jt(s.length)),new Proxy(s,{defineProperty(i,o,c){(!("value"in c)||c.configurable===!1||c.enumerable===!1||c.writable===!1)&&io();var f=_.get(o);return f===void 0?f=k(()=>{var a=jt(c.value);return _.set(o,a),a}):Y(f,c.value,!0),!0},deleteProperty(i,o){var c=_.get(o);if(c===void 0){if(o in i){const f=k(()=>jt(qe));_.set(o,f),Ar(E)}}else Y(c,qe),Ar(E);return!0},get(i,o,c){if(o===Nt)return s;var f=_.get(o),a=o in i;if(f===void 0&&(!a||ur(i,o)?.writable)&&(f=k(()=>{var p=dr(a?i[o]:qe),S=jt(p);return S}),_.set(o,f)),f!==void 0){var l=y(f);return l===qe?void 0:l}return Reflect.get(i,o,c)},getOwnPropertyDescriptor(i,o){var c=Reflect.getOwnPropertyDescriptor(i,o);if(c&&"value"in c){var f=_.get(o);f&&(c.value=y(f))}else if(c===void 0){var a=_.get(o),l=a?.v;if(a!==void 0&&l!==qe)return{enumerable:!0,configurable:!0,value:l,writable:!0}}return c},has(i,o){if(o===Nt)return!0;var c=_.get(o),f=c!==void 0&&c.v!==qe||Reflect.has(i,o);if(c!==void 0||fe!==null&&(!f||ur(i,o)?.writable)){c===void 0&&(c=k(()=>{var l=f?dr(i[o]):qe,p=jt(l);return p}),_.set(o,c));var a=y(c);if(a===qe)return!1}return f},set(i,o,c,f){var a=_.get(o),l=o in i;if(C&&o==="length")for(var p=c;p<a.v;p+=1){var S=_.get(p+"");S!==void 0?Y(S,qe):p in i&&(S=k(()=>jt(qe)),_.set(p+"",S))}if(a===void 0)(!l||ur(i,o)?.writable)&&(a=k(()=>jt(void 0)),Y(a,dr(c)),_.set(o,a));else{l=a.v!==qe;var u=k(()=>dr(c));Y(a,u)}var t=Reflect.getOwnPropertyDescriptor(i,o);if(t?.set&&t.set.call(f,c),!l){if(C&&typeof o=="string"){var n=_.get("length"),e=Number(o);Number.isInteger(e)&&e>=n.v&&Y(n,e+1)}Ar(E)}return!0},ownKeys(i){y(E);var o=Reflect.ownKeys(i).filter(a=>{var l=_.get(a);return l===void 0||l.v!==qe});for(var[c,f]of _)f.v!==qe&&!(c in i)&&o.push(c);return o},setPrototypeOf(){so()}})}function Vi(s){try{if(s!==null&&typeof s=="object"&&Nt in s)return s[Nt]}catch{}return s}function ko(s,h){return Object.is(Vi(s),Vi(h))}var Yr,Rs,As,Ts;function Lo(){if(Yr===void 0){Yr=window,Rs=/Firefox/.test(navigator.userAgent);var s=Element.prototype,h=Node.prototype,_=Text.prototype;As=ur(h,"firstChild").get,Ts=ur(h,"nextSibling").get,$i(s)&&(s.__click=void 0,s.__className=void 0,s.__attributes=null,s.__style=void 0,s.__e=void 0),$i(_)&&(_.__t=void 0)}}function yr(s=""){return document.createTextNode(s)}function It(s){return As.call(s)}function Fr(s){return Ts.call(s)}function H(s,h){return It(s)}function ge(s,h=!1){{var _=It(s);return _ instanceof Comment&&_.data===""?Fr(_):_}}function U(s,h=1,_=!1){let C=s;for(;h--;)C=Fr(C);return C}function Do(s){s.textContent=""}function Bs(){return!1}let Gi=!1;function Ro(){Gi||(Gi=!0,document.addEventListener("reset",s=>{Promise.resolve().then(()=>{if(!s.defaultPrevented)for(const h of s.target.elements)h.__on_r?.()})},{capture:!0}))}function Cr(s){var h=pe,_=fe;lt(null),Tt(null);try{return s()}finally{lt(h),Tt(_)}}function Ms(s,h,_,C=_){s.addEventListener(h,()=>Cr(_));const E=s.__on_r;E?s.__on_r=()=>{E(),C(!0)}:s.__on_r=()=>C(!0),Ro()}function Os(s){fe===null&&pe===null&&Qn(),pe!==null&&(pe.f&gt)!==0&&fe===null&&Yn(),or&&Jn()}function Ao(s,h){var _=h.last;_===null?h.last=h.first=s:(_.next=s,s.prev=_,h.last=s)}function Bt(s,h,_,C=!0){var E=fe;E!==null&&(E.f&Lt)!==0&&(s|=Lt);var D={ctx:Ee,deps:null,nodes_start:null,nodes_end:null,f:s|wt,first:null,fn:h,last:null,next:null,parent:E,b:E&&E.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(_)try{Yt(D),D.f|=oi}catch(o){throw mt(D),o}else h!==null&&gr(D);if(C){var k=D;if(_&&k.deps===null&&k.teardown===null&&k.nodes_start===null&&k.first===k.last&&(k.f&wr)===0&&(k=k.first),k!==null&&(k.parent=E,E!==null&&Ao(k,E),pe!==null&&(pe.f&dt)!==0&&(s&ir)===0)){var i=pe;(i.effects??=[]).push(k)}}return D}function To(){return pe!==null&&!kt}function Ps(s){const h=Bt(ni,null,!1);return rt(h,Ke),h.teardown=s,h}function Ci(s){Os();var h=fe.f,_=!pe&&(h&$t)!==0&&(h&oi)===0;if(_){var C=Ee;(C.e??=[]).push(s)}else return Is(s)}function Is(s){return Bt(Ai|gs,s,!1)}function Bo(s){return Os(),Bt(ni|gs,s,!0)}function Mo(s){zt.ensure();const h=Bt(ir|wr,s,!0);return(_={})=>new Promise(C=>{_.outro?fr(h,()=>{mt(h),C(void 0)}):(mt(h),C(void 0))})}function Pi(s){return Bt(Ai,s,!1)}function At(s,h){var _=Ee,C={effect:null,ran:!1,deps:s};_.l.$.push(C),C.effect=zr(()=>{s(),!C.ran&&(C.ran=!0,j(h))})}function Nr(){var s=Ee;zr(()=>{for(var h of s.l.$){h.deps();var _=h.effect;(_.f&Ke)!==0&&rt(_,Ut),Wr(_)&&Yt(_),h.ran=!1}})}function Oo(s){return Bt(Bi|wr,s,!0)}function zr(s,h=0){return Bt(ni|h,s,!0)}function ae(s,h=[],_=[]){yo(h,_,C=>{Bt(ni,()=>s(...C.map(y)),!0)})}function Ii(s,h=0){var _=Bt(rr|h,s,!0);return _}function Et(s,h=!0){return Bt($t|wr,s,!0,h)}function Hs(s){var h=s.teardown;if(h!==null){const _=or,C=pe;Zi(!0),lt(null);try{h.call(null)}finally{Zi(_),lt(C)}}}function Fs(s,h=!1){var _=s.first;for(s.first=s.last=null;_!==null;){const E=_.ac;E!==null&&Cr(()=>{E.abort(Mi)});var C=_.next;(_.f&ir)!==0?_.parent=null:mt(_,h),_=C}}function Po(s){for(var h=s.first;h!==null;){var _=h.next;(h.f&$t)===0&&mt(h),h=_}}function mt(s,h=!0){var _=!1;(h||(s.f&Vn)!==0)&&s.nodes_start!==null&&s.nodes_end!==null&&(Io(s.nodes_start,s.nodes_end),_=!0),Fs(s,h&&!_),Qr(s,0),rt(s,sr);var C=s.transitions;if(C!==null)for(const D of C)D.stop();Hs(s);var E=s.parent;E!==null&&E.first!==null&&Ns(s),s.next=s.prev=s.teardown=s.ctx=s.deps=s.fn=s.nodes_start=s.nodes_end=s.ac=null}function Io(s,h){for(;s!==null;){var _=s===h?null:Fr(s);s.remove(),s=_}}function Ns(s){var h=s.parent,_=s.prev,C=s.next;_!==null&&(_.next=C),C!==null&&(C.prev=_),h!==null&&(h.first===s&&(h.first=C),h.last===s&&(h.last=_))}function fr(s,h){var _=[];Hi(s,_,!0),zs(_,()=>{mt(s),h&&h()})}function zs(s,h){var _=s.length;if(_>0){var C=()=>--_||h();for(var E of s)E.out(C)}else h()}function Hi(s,h,_){if((s.f&Lt)===0){if(s.f^=Lt,s.transitions!==null)for(const k of s.transitions)(k.is_global||_)&&h.push(k);for(var C=s.first;C!==null;){var E=C.next,D=(C.f&Pr)!==0||(C.f&$t)!==0;Hi(C,h,D?_:!1),C=E}}}function Fi(s){Ws(s,!0)}function Ws(s,h){if((s.f&Lt)!==0){s.f^=Lt,(s.f&Ke)===0&&(rt(s,wt),gr(s));for(var _=s.first;_!==null;){var C=_.next,E=(_.f&Pr)!==0||(_.f&$t)!==0;Ws(_,E?h:!1),_=C}if(s.transitions!==null)for(const D of s.transitions)(D.is_global||h)&&D.in()}}let hr=null;function Ho(s){var h=hr;try{if(hr=new Set,j(s),h!==null)for(var _ of hr)h.add(_);return hr}finally{hr=h}}function Fo(s){for(var h of Ho(s))tr(h,h.v)}let _r=!1;function Xi(s){_r=s}let or=!1;function Zi(s){or=s}let pe=null,kt=!1;function lt(s){pe=s}let fe=null;function Tt(s){fe=s}let Wt=null;function $s(s){pe!==null&&(Wt===null?Wt=[s]:Wt.push(s))}let tt=null,ht=0,_t=null;function No(s){_t=s}let Us=1,Br=0,Jt=Br;function Ji(s){Jt=s}let Kt=!1;function js(){return++Us}function Wr(s){var h=s.f;if((h&wt)!==0)return!0;if((h&Ut)!==0){var _=s.deps,C=(h&gt)!==0;if(_!==null){var E,D,k=(h&Zr)!==0,i=C&&fe!==null&&!Kt,o=_.length;if((k||i)&&(fe===null||(fe.f&sr)===0)){var c=s,f=c.parent;for(E=0;E<o;E++)D=_[E],(k||!D?.reactions?.includes(c))&&(D.reactions??=[]).push(c);k&&(c.f^=Zr),i&&f!==null&&(f.f&gt)===0&&(c.f^=gt)}for(E=0;E<o;E++)if(D=_[E],Wr(D)&&Ls(D),D.wv>s.wv)return!0}(!C||fe!==null&&!Kt)&&rt(s,Ke)}return!1}function qs(s,h,_=!0){var C=s.reactions;if(C!==null&&!Wt?.includes(s))for(var E=0;E<C.length;E++){var D=C[E];(D.f&dt)!==0?qs(D,h,!1):h===D&&(_?rt(D,wt):(D.f&Ke)!==0&&rt(D,Ut),gr(D))}}function Ks(s){var h=tt,_=ht,C=_t,E=pe,D=Kt,k=Wt,i=Ee,o=kt,c=Jt,f=s.f;tt=null,ht=0,_t=null,Kt=(f&gt)!==0&&(kt||!_r||pe===null),pe=(f&($t|ir))===0?s:null,Wt=null,vr(s.ctx),kt=!1,Jt=++Br,s.ac!==null&&(Cr(()=>{s.ac.abort(Mi)}),s.ac=null);try{s.f|=bi;var a=s.fn,l=a(),p=s.deps;if(tt!==null){var S;if(Qr(s,ht),p!==null&&ht>0)for(p.length=ht+tt.length,S=0;S<tt.length;S++)p[ht+S]=tt[S];else s.deps=p=tt;if(!Kt||(f&dt)!==0&&s.reactions!==null)for(S=ht;S<p.length;S++)(p[S].reactions??=[]).push(s)}else p!==null&&ht<p.length&&(Qr(s,ht),p.length=ht);if(Ir()&&_t!==null&&!kt&&p!==null&&(s.f&(dt|Ut|wt))===0)for(S=0;S<_t.length;S++)qs(_t[S],s);return E!==null&&E!==s&&(Br++,_t!==null&&(C===null?C=_t:C.push(..._t))),(s.f&Zt)!==0&&(s.f^=Zt),l}catch(u){return ys(u)}finally{s.f^=bi,tt=h,ht=_,_t=C,pe=E,Kt=D,Wt=k,vr(i),kt=o,Jt=c}}function zo(s,h){let _=h.reactions;if(_!==null){var C=Wn.call(_,s);if(C!==-1){var E=_.length-1;E===0?_=h.reactions=null:(_[C]=_[E],_.pop())}}_===null&&(h.f&dt)!==0&&(tt===null||!tt.includes(h))&&(rt(h,Ut),(h.f&(gt|Zr))===0&&(h.f^=Zr),ks(h),Qr(h,0))}function Qr(s,h){var _=s.deps;if(_!==null)for(var C=h;C<_.length;C++)zo(s,_[C])}function Yt(s){var h=s.f;if((h&sr)===0){rt(s,Ke);var _=fe,C=_r;fe=s,_r=!0;try{(h&rr)!==0?Po(s):Fs(s),Hs(s);var E=Ks(s);s.teardown=typeof E=="function"?E:null,s.wv=Us;var D;vs&&Ln&&(s.f&wt)!==0&&s.deps}finally{_r=C,fe=_}}}async function Ni(){await Promise.resolve(),vo()}function y(s){var h=s.f,_=(h&dt)!==0;if(hr?.add(s),pe!==null&&!kt){var C=fe!==null&&(fe.f&sr)!==0;if(!C&&!Wt?.includes(s)){var E=pe.deps;if((pe.f&bi)!==0)s.rv<Br&&(s.rv=Br,tt===null&&E!==null&&E[ht]===s?ht++:tt===null?tt=[s]:(!Kt||!tt.includes(s))&&tt.push(s));else{(pe.deps??=[]).push(s);var D=s.reactions;D===null?s.reactions=[pe]:D.includes(pe)||D.push(pe)}}}else if(_&&s.deps===null&&s.effects===null){var k=s,i=k.parent;i!==null&&(i.f&gt)===0&&(k.f^=gt)}if(or){if(Vt.has(s))return Vt.get(s);if(_){k=s;var o=k.v;return((k.f&Ke)===0&&k.reactions!==null||Vs(k))&&(o=Oi(k)),Vt.set(k,o),o}}else _&&(k=s,Wr(k)&&Ls(k));if((s.f&Zt)!==0)throw s.v;return s.v}function Vs(s){if(s.v===qe)return!0;if(s.deps===null)return!1;for(const h of s.deps)if(Vt.has(h)||(h.f&dt)!==0&&Vs(h))return!0;return!1}function j(s){var h=kt;try{return kt=!0,s()}finally{kt=h}}const Wo=-7169;function rt(s,h){s.f=s.f&Wo|h}function Me(s){if(!(typeof s!="object"||!s||s instanceof EventTarget)){if(Nt in s)Ei(s);else if(!Array.isArray(s))for(let h in s){const _=s[h];typeof _=="object"&&_&&Nt in _&&Ei(_)}}}function Ei(s,h=new Set){if(typeof s=="object"&&s!==null&&!(s instanceof EventTarget)&&!h.has(s)){h.add(s),s instanceof Date&&s.getTime();for(let C in s)try{Ei(s[C],h)}catch{}const _=Ri(s);if(_!==Object.prototype&&_!==Array.prototype&&_!==Map.prototype&&_!==Set.prototype&&_!==Date.prototype){const C=ps(_);for(let E in C){const D=C[E].get;if(D)try{D.call(s)}catch{}}}}}const $o=new Set,Yi=new Set;function Uo(s,h,_,C={}){function E(D){if(C.capture||Lr.call(h,D),!D.cancelBubble)return Cr(()=>_?.call(this,D))}return s.startsWith("pointer")||s.startsWith("touch")||s==="wheel"?nr(()=>{h.addEventListener(s,E,C)}):h.addEventListener(s,E,C),E}function Se(s,h,_,C,E){var D={capture:C,passive:E},k=Uo(s,h,_,D);(h===document.body||h===window||h===document||h instanceof HTMLMediaElement)&&Ps(()=>{h.removeEventListener(s,k,D)})}let Qi=null;function Lr(s){var h=this,_=h.ownerDocument,C=s.type,E=s.composedPath?.()||[],D=E[0]||s.target;Qi=s;var k=0,i=Qi===s&&s.__root;if(i){var o=E.indexOf(i);if(o!==-1&&(h===document||h===window)){s.__root=h;return}var c=E.indexOf(h);if(c===-1)return;o<=c&&(k=o)}if(D=E[k]||s.target,D!==h){Si(s,"currentTarget",{configurable:!0,get(){return D||_}});var f=pe,a=fe;lt(null),Tt(null);try{for(var l,p=[];D!==null;){var S=D.assignedSlot||D.parentNode||D.host||null;try{var u=D["__"+C];if(u!=null&&(!D.disabled||s.target===D))if(br(u)){var[t,...n]=u;t.apply(D,[s,...n])}else u.call(D,s)}catch(e){l?p.push(e):l=e}if(s.cancelBubble||S===h||S===null)break;D=S}if(l){for(let e of p)queueMicrotask(()=>{throw e});throw l}}finally{s.__root=h,delete s.currentTarget,lt(f),Tt(a)}}}function Gs(s){var h=document.createElement("template");return h.innerHTML=s.replaceAll("<!>","<!---->"),h.content}function mr(s,h){var _=fe;_.nodes_start===null&&(_.nodes_start=s,_.nodes_end=h)}function Z(s,h){var _=(h&_s)!==0,C=(h&Nn)!==0,E,D=!s.startsWith("<!>");return()=>{E===void 0&&(E=Gs(D?s:"<!>"+s),_||(E=It(E)));var k=C||Rs?document.importNode(E,!0):E.cloneNode(!0);if(_){var i=It(k),o=k.lastChild;mr(i,o)}else mr(k,k);return k}}function jo(s,h,_="svg"){var C=!s.startsWith("<!>"),E=(h&_s)!==0,D=`<${_}>${C?s:"<!>"+s}</${_}>`,k;return()=>{if(!k){var i=Gs(D),o=It(i);if(E)for(k=document.createDocumentFragment();It(o);)k.appendChild(It(o));else k=It(o)}var c=k.cloneNode(!0);if(E){var f=It(c),a=c.lastChild;mr(f,a)}else mr(c,c);return c}}function ar(s,h){return jo(s,h,"svg")}function pt(s=""){{var h=yr(s+"");return mr(h,h),h}}function Ue(){var s=document.createDocumentFragment(),h=document.createComment(""),_=yr();return s.append(h,_),mr(h,_),s}function W(s,h){s!==null&&s.before(h)}const qo=["touchstart","touchmove"];function Ko(s){return qo.includes(s)}let xi=!0;function se(s,h){var _=h==null?"":typeof h=="object"?h+"":h;_!==(s.__t??=s.nodeValue)&&(s.__t=_,s.nodeValue=_+"")}function Vo(s,h){return Go(s,h)}const lr=new Map;function Go(s,{target:h,anchor:_,props:C={},events:E,context:D,intro:k=!0}){Lo();var i=new Set,o=a=>{for(var l=0;l<a.length;l++){var p=a[l];if(!i.has(p)){i.add(p);var S=Ko(p);h.addEventListener(p,Lr,{passive:S});var u=lr.get(p);u===void 0?(document.addEventListener(p,Lr,{passive:S}),lr.set(p,1)):lr.set(p,u+1)}}};o(Di($o)),Yi.add(o);var c=void 0,f=Mo(()=>{var a=_??h.appendChild(yr());return So(a,{pending:()=>{}},l=>{if(D){it({});var p=Ee;p.c=D}E&&(C.$$events=E),xi=k,c=s(l,C)||{},xi=!0,D&&st()}),()=>{for(var l of i){h.removeEventListener(l,Lr);var p=lr.get(l);--p===0?(document.removeEventListener(l,Lr),lr.delete(l)):lr.set(l,p)}Yi.delete(o),a!==_&&a.parentNode?.removeChild(a)}});return Xo.set(c,f),c}let Xo=new WeakMap;function ut(s){Ee===null&&ai(),Sr&&Ee.l!==null?Zs(Ee).m.push(s):Ci(()=>{const h=j(s);if(typeof h=="function")return h})}function Gt(s){Ee===null&&ai(),ut(()=>()=>j(s))}function Zo(s,h,{bubbles:_=!1,cancelable:C=!1}={}){return new CustomEvent(s,{detail:h,bubbles:_,cancelable:C})}function Xs(){const s=Ee;return s===null&&ai(),(h,_,C)=>{const E=s.s.$$events?.[h];if(E){const D=br(E)?E.slice():[E],k=Zo(h,_,C);for(const i of D)i.call(s.x,k);return!k.defaultPrevented}return!0}}function $r(s){Ee===null&&ai(),Ee.l===null&&to(),Zs(Ee).b.push(s)}function Zs(s){var h=s.l;return h.u??={a:[],b:[],m:[]}}function te(s,h,_=!1){var C=s,E=null,D=null,k=qe,i=_?Pr:0,o=!1;const c=(p,S=!0)=>{o=!0,l(S,p)};var f=null;function a(){f!==null&&(f.lastChild.remove(),C.before(f),f=null);var p=k?E:D,S=k?D:E;p&&Fi(p),S&&fr(S,()=>{k?D=null:E=null})}const l=(p,S)=>{if(k!==(k=p)){var u=Bs(),t=C;if(u&&(f=document.createDocumentFragment(),f.append(t=yr())),k?E??=S&&Et(()=>S(t)):D??=S&&Et(()=>S(t)),u){var n=Be,e=k?E:D,r=k?D:E;e&&n.skipped_effects.delete(e),r&&n.skipped_effects.add(r),n.add_callback(a)}else a()}};Ii(()=>{o=!1,h(c),o||l(null,null)},i)}function St(s,h){return h}function Jo(s,h,_){for(var C=s.items,E=[],D=h.length,k=0;k<D;k++)Hi(h[k].e,E,!0);var i=D>0&&E.length===0&&_!==null;if(i){var o=_.parentNode;Do(o),o.append(_),C.clear(),Rt(s,h[0].prev,h[D-1].next)}zs(E,()=>{for(var c=0;c<D;c++){var f=h[c];i||(C.delete(f.k),Rt(s,f.prev,f.next)),mt(f.e,!i)}})}function bt(s,h,_,C,E,D=null){var k=s,i={flags:h,items:new Map,first:null},o=(h&fs)!==0;if(o){var c=s;k=c.appendChild(yr())}var f=null,a=!1,l=new Map,p=xt(()=>{var n=_();return br(n)?n:n==null?[]:Di(n)}),S,u;function t(){Yo(u,S,i,l,k,E,h,C,_),D!==null&&(S.length===0?f?Fi(f):f=Et(()=>D(k)):f!==null&&fr(f,()=>{f=null}))}Ii(()=>{u??=fe,S=y(p);var n=S.length;if(!(a&&n===0)){a=n===0;var e,r,d,g;if(Bs()){var m=new Set,b=Be;for(r=0;r<n;r+=1){d=S[r],g=C(d,r);var v=i.items.get(g)??l.get(g);v?(h&(ii|si))!==0&&Js(v,d,r,h):(e=Ys(null,i,null,null,d,g,r,E,h,_,!0),l.set(g,e)),m.add(g)}for(const[w,R]of i.items)m.has(w)||b.skipped_effects.add(R.e);b.add_callback(t)}else t();y(p)}})}function Yo(s,h,_,C,E,D,k,i,o){var c=(k&Rn)!==0,f=(k&(ii|si))!==0,a=h.length,l=_.items,p=_.first,S=p,u,t=null,n,e=[],r=[],d,g,m,b;if(c)for(b=0;b<a;b+=1)d=h[b],g=i(d,b),m=l.get(g),m!==void 0&&(m.a?.measure(),(n??=new Set).add(m));for(b=0;b<a;b+=1){if(d=h[b],g=i(d,b),m=l.get(g),m===void 0){var v=C.get(g);if(v!==void 0){C.delete(g),l.set(g,v);var w=t?t.next:S;Rt(_,t,v),Rt(_,v,w),fi(v,w,E),t=v}else{var R=S?S.e.nodes_start:E;t=Ys(R,_,t,t===null?_.first:t.next,d,g,b,D,k,o)}l.set(g,t),e=[],r=[],S=t.next;continue}if(f&&Js(m,d,b,k),(m.e.f&Lt)!==0&&(Fi(m.e),c&&(m.a?.unfix(),(n??=new Set).delete(m))),m!==S){if(u!==void 0&&u.has(m)){if(e.length<r.length){var B=r[0],P;t=B.prev;var A=e[0],N=e[e.length-1];for(P=0;P<e.length;P+=1)fi(e[P],B,E);for(P=0;P<r.length;P+=1)u.delete(r[P]);Rt(_,A.prev,N.next),Rt(_,t,A),Rt(_,N,B),S=B,t=N,b-=1,e=[],r=[]}else u.delete(m),fi(m,S,E),Rt(_,m.prev,m.next),Rt(_,m,t===null?_.first:t.next),Rt(_,t,m),t=m;continue}for(e=[],r=[];S!==null&&S.k!==g;)(S.e.f&Lt)===0&&(u??=new Set).add(S),r.push(S),S=S.next;if(S===null)continue;m=S}e.push(m),t=m,S=m.next}if(S!==null||u!==void 0){for(var q=u===void 0?[]:Di(u);S!==null;)(S.e.f&Lt)===0&&q.push(S),S=S.next;var V=q.length;if(V>0){var Q=(k&fs)!==0&&a===0?E:null;if(c){for(b=0;b<V;b+=1)q[b].a?.measure();for(b=0;b<V;b+=1)q[b].a?.fix()}Jo(_,q,Q)}}c&&nr(()=>{if(n!==void 0)for(m of n)m.a?.apply()}),s.first=_.first&&_.first.e,s.last=t&&t.e;for(var G of C.values())mt(G.e);C.clear()}function Js(s,h,_,C){(C&ii)!==0&&tr(s.v,h),(C&si)!==0?tr(s.i,_):s.i=_}function Ys(s,h,_,C,E,D,k,i,o,c,f){var a=(o&ii)!==0,l=(o&An)===0,p=a?l?le(E,!1,!1):er(E):E,S=(o&si)===0?k:er(k),u={i:S,v:p,k:D,a:null,e:null,prev:_,next:C};try{if(s===null){var t=document.createDocumentFragment();t.append(s=yr())}return u.e=Et(()=>i(s,p,S,c),co),u.e.prev=_&&_.e,u.e.next=C&&C.e,_===null?f||(h.first=u):(_.next=u,_.e.next=u.e),C!==null&&(C.prev=u,C.e.prev=u.e),u}finally{}}function fi(s,h,_){for(var C=s.next?s.next.e.nodes_start:_,E=h?h.e.nodes_start:_,D=s.e.nodes_start;D!==null&&D!==C;){var k=Fr(D);E.before(D),D=k}}function Rt(s,h,_){h===null?s.first=_:(h.next=_,h.e.next=_&&_.e),_!==null&&(_.prev=h,_.e.prev=h&&h.e)}function ei(s,h,_,C,E){var D=h.$$slots?.[_],k=!1;D===!0&&(D=h[_==="default"?"children":_],k=!0),D===void 0?E!==null&&E(s):D(s,k?()=>C:C)}const es=[...` 	
\r\fÂ \v\uFEFF`];function Qo(s,h,_){var C=s==null?"":""+s;if(h&&(C=C?C+" "+h:h),_){for(var E in _)if(_[E])C=C?C+" "+E:E;else if(C.length)for(var D=E.length,k=0;(k=C.indexOf(E,k))>=0;){var i=k+D;(k===0||es.includes(C[k-1]))&&(i===C.length||es.includes(C[i]))?C=(k===0?"":C.substring(0,k))+C.substring(i+1):k=i}}return C===""?null:C}function ea(s,h){return s==null?null:String(s)}function Je(s,h,_,C,E,D){var k=s.__className;if(k!==_||k===void 0){var i=Qo(_,C,D);i==null?s.removeAttribute("class"):h?s.className=i:s.setAttribute("class",i),s.__className=_}else if(D&&E!==D)for(var o in D){var c=!!D[o];(E==null||c!==!!E[o])&&s.classList.toggle(o,c)}return D}function Gr(s,h,_,C){var E=s.__style;if(E!==h){var D=ea(h);D==null?s.removeAttribute("style"):s.style.cssText=D,s.__style=h}return C}function Qs(s,h,_=!1){if(s.multiple){if(h==null)return;if(!br(h))return ao();for(var C of s.options)C.selected=h.includes(Tr(C));return}for(C of s.options){var E=Tr(C);if(ko(E,h)){C.selected=!0;return}}(!_||h!==void 0)&&(s.selectedIndex=-1)}function ta(s){var h=new MutationObserver(()=>{Qs(s,s.__value)});h.observe(s,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),Ps(()=>{h.disconnect()})}function ra(s,h,_=h){var C=!0;Ms(s,"change",E=>{var D=E?"[selected]":":checked",k;if(s.multiple)k=[].map.call(s.querySelectorAll(D),Tr);else{var i=s.querySelector(D)??s.querySelector("option:not([disabled])");k=i&&Tr(i)}_(k)}),Pi(()=>{var E=h();if(Qs(s,E,C),C&&E===void 0){var D=s.querySelector(":checked");D!==null&&(E=Tr(D),_(E))}s.__value=E,C=!1}),ta(s)}function Tr(s){return"__value"in s?s.__value:s.value}const ia=Symbol("is custom element"),sa=Symbol("is html");function na(s,h){var _=en(s);_.value===(_.value=h??void 0)||s.value===h&&(h!==0||s.nodeName!=="PROGRESS")||(s.value=h??"")}function Fe(s,h,_,C){var E=en(s);E[h]!==(E[h]=_)&&(h==="loading"&&(s[Xn]=_),_==null?s.removeAttribute(h):typeof _!="string"&&oa(s).includes(h)?s[h]=_:s.setAttribute(h,_))}function en(s){return s.__attributes??={[ia]:s.nodeName.includes("-"),[sa]:s.namespaceURI===zn}}var ts=new Map;function oa(s){var h=s.getAttribute("is")||s.nodeName,_=ts.get(h);if(_)return _;ts.set(h,_=[]);for(var C,E=s,D=Element.prototype;D!==E;){C=ps(E);for(var k in C)C[k].set&&_.push(k);E=Ri(E)}return _}const aa=()=>performance.now(),Ht={tick:s=>requestAnimationFrame(s),now:()=>aa(),tasks:new Set};function tn(){const s=Ht.now();Ht.tasks.forEach(h=>{h.c(s)||(Ht.tasks.delete(h),h.f())}),Ht.tasks.size!==0&&Ht.tick(tn)}function la(s){let h;return Ht.tasks.size===0&&Ht.tick(tn),{promise:new Promise(_=>{Ht.tasks.add(h={c:s,f:_})}),abort(){Ht.tasks.delete(h)}}}function jr(s,h){Cr(()=>{s.dispatchEvent(new CustomEvent(h))})}function ca(s){if(s==="float")return"cssFloat";if(s==="offset")return"cssOffset";if(s.startsWith("--"))return s;const h=s.split("-");return h.length===1?h[0]:h[0]+h.slice(1).map(_=>_[0].toUpperCase()+_.slice(1)).join("")}function rs(s){const h={},_=s.split(";");for(const C of _){const[E,D]=C.split(":");if(!E||D===void 0)break;const k=ca(E.trim());h[k]=D.trim()}return h}const ha=s=>s;function vt(s,h,_,C){var E=(s&In)!==0,D=(s&Hn)!==0,k=E&&D,i=(s&Fn)!==0,o=k?"both":E?"in":"out",c,f=h.inert,a=h.style.overflow,l,p;function S(){return Cr(()=>c??=_()(h,C?.()??{},{direction:o}))}var u={is_global:i,in(){if(h.inert=f,!E){p?.abort(),p?.reset?.();return}D||l?.abort(),jr(h,"introstart"),l=ki(h,S(),p,1,()=>{jr(h,"introend"),l?.abort(),l=c=void 0,h.style.overflow=a})},out(r){if(!D){r?.(),c=void 0;return}h.inert=!0,jr(h,"outrostart"),p=ki(h,S(),l,0,()=>{jr(h,"outroend"),r?.()})},stop:()=>{l?.abort(),p?.abort()}},t=fe;if((t.transitions??=[]).push(u),E&&xi){var n=i;if(!n){for(var e=t.parent;e&&(e.f&Pr)!==0;)for(;(e=e.parent)&&(e.f&rr)===0;);n=!e||(e.f&oi)!==0}n&&Pi(()=>{j(()=>u.in())})}}function ki(s,h,_,C,E){var D=C===1;if(jn(h)){var k,i=!1;return nr(()=>{if(!i){var t=h({direction:D?"in":"out"});k=ki(s,t,_,C,E)}}),{abort:()=>{i=!0,k?.abort()},deactivate:()=>k.deactivate(),reset:()=>k.reset(),t:()=>k.t()}}if(_?.deactivate(),!h?.duration)return E(),{abort:Pt,deactivate:Pt,reset:Pt,t:()=>C};const{delay:o=0,css:c,tick:f,easing:a=ha}=h;var l=[];if(D&&_===void 0&&(f&&f(0,1),c)){var p=rs(c(0,1));l.push(p,p)}var S=()=>1-C,u=s.animate(l,{duration:o,fill:"forwards"});return u.onfinish=()=>{u.cancel();var t=_?.t()??1-C;_?.abort();var n=C-t,e=h.duration*Math.abs(n),r=[];if(e>0){var d=!1;if(c)for(var g=Math.ceil(e/16.666666666666668),m=0;m<=g;m+=1){var b=t+n*a(m/g),v=rs(c(b,1-b));r.push(v),d||=v.overflow==="hidden"}d&&(s.style.overflow="hidden"),S=()=>{var w=u.currentTime;return t+n*a(w/e)},f&&la(()=>{if(u.playState!=="running")return!1;var w=S();return f(w,1-w),!0})}u=s.animate(r,{duration:e,fill:"forwards"}),u.onfinish=()=>{S=()=>C,f?.(C,1-C),E()}},{abort:()=>{u&&(u.cancel(),u.effect=null,u.onfinish=Pt)},deactivate:()=>{E=Pt},reset:()=>{C===0&&f?.(1,0)},t:()=>S()}}function ti(s,h,_=h){var C=new WeakSet;Ms(s,"input",async E=>{var D=E?s.defaultValue:s.value;if(D=_i(s)?vi(D):D,_(D),Be!==null&&C.add(Be),await Ni(),D!==(D=h())){var k=s.selectionStart,i=s.selectionEnd;s.value=D??"",i!==null&&(s.selectionStart=k,s.selectionEnd=Math.min(i,s.value.length))}}),j(h)==null&&s.value&&(_(_i(s)?vi(s.value):s.value),Be!==null&&C.add(Be)),zr(()=>{var E=h();if(s===document.activeElement){var D=Vr??Be;if(C.has(D))return}_i(s)&&E===vi(s.value)||s.type==="date"&&!E&&!s.value||E!==s.value&&(s.value=E??"")})}function _i(s){var h=s.type;return h==="number"||h==="range"}function vi(s){return s===""?null:+s}function is(s,h){return s===h||s?.[Nt]===h}function ci(s={},h,_,C){return Pi(()=>{var E,D;return zr(()=>{E=D,D=[],j(()=>{s!==_(...D)&&(h(s,...D),E&&is(_(...E),s)&&h(null,...E))})}),()=>{nr(()=>{D&&is(_(...D),s)&&h(null,...D)})}}),s}function ri(s){return function(...h){var _=h[0];return _.preventDefault(),s?.apply(this,h)}}function ct(s=!1){const h=Ee,_=h.l.u;if(!_)return;let C=()=>Me(h.s);if(s){let E=0,D={};const k=Hr(()=>{let i=!1;const o=h.s;for(const c in o)o[c]!==D[c]&&(D[c]=o[c],i=!0);return i&&E++,E});C=()=>y(k)}_.b.length&&Bo(()=>{ss(h,C),Xr(_.b)}),Ci(()=>{const E=j(()=>_.m.map(qn));return()=>{for(const D of E)typeof D=="function"&&D()}}),_.a.length&&Ci(()=>{ss(h,C),Xr(_.a)})}function ss(s,h){if(s.l.s)for(const _ of s.l.s)y(_);h()}function da(s,h){var _=s.$$events?.[h.type],C=br(_)?_.slice():_==null?[]:[_];for(var E of C)E.call(this,h)}function ua(s,h,_){if(s==null)return h(void 0),Pt;const C=j(()=>s.subscribe(h,_));return C.unsubscribe?()=>C.unsubscribe():C}const cr=[];function fa(s,h=Pt){let _=null;const C=new Set;function E(i){if(Ss(s,i)&&(s=i,_)){const o=!cr.length;for(const c of C)c[1](),cr.push(c,s);if(o){for(let c=0;c<cr.length;c+=2)cr[c][0](cr[c+1]);cr.length=0}}}function D(i){E(i(s))}function k(i,o=Pt){const c=[i,o];return C.add(c),C.size===1&&(_=h(E,D)||Pt),i(s),()=>{C.delete(c),C.size===0&&_&&(_(),_=null)}}return{set:E,update:D,subscribe:k}}function _a(s){let h;return ua(s,_=>h=_)(),h}let qr=!1;function va(s){var h=qr;try{return qr=!1,[s(),qr]}finally{qr=h}}function he(s,h,_,C){var E=!Sr||(_&Bn)!==0,D=(_&On)!==0,k=(_&Pn)!==0,i=C,o=!0,c=()=>(o&&(o=!1,i=k?j(C):C),i),f;if(D){var a=Nt in s||Gn in s;f=ur(s,h)?.set??(a&&h in s?r=>s[h]=r:void 0)}var l,p=!1;D?[l,p]=va(()=>s[h]):l=s[h],l===void 0&&C!==void 0&&(l=c(),f&&(E&&ro(),f(l)));var S;if(E?S=()=>{var r=s[h];return r===void 0?c():(o=!0,r)}:S=()=>{var r=s[h];return r!==void 0&&(i=void 0),r===void 0?i:r},E&&(_&Mn)===0)return S;if(f){var u=s.$$legacy;return function(r,d){return arguments.length>0?((!E||!d||u||p)&&f(d?S():r),r):S()}}var t=!1,n=((_&Tn)!==0?Hr:xt)(()=>(t=!1,S()));D&&y(n);var e=fe;return function(r,d){if(arguments.length>0){const g=d?y(n):E&&D?dr(r):r;return Y(n,g),t=!0,i!==void 0&&(i=g),r}return or&&t||(e.f&sr)!==0?n.v:y(n)}}const pa=10,ga=function(){let s=fa([]);return setInterval(()=>{let h=_a(s);const _=Math.floor(new Date().getTime()/1e3),C=h.filter(E=>E.created_at+pa>_);C.length!==h.length&&s.set(C)},1e3),{add(h){s.update(_=>[..._,{...h,created_at:Math.floor(new Date().getTime()/1e3)}])},remove(h){s.update(_=>_.filter(C=>C.created_at!==h.created_at||C.type!==h.type||C.text!==h.text))},subscribe:s.subscribe}},ke=ga();function rn(s){const h=s-1;return h*h*h+1}function ma(s){return s<.5?4*s*s*s:.5*Math.pow(2*s-2,3)+1}function Li(s){const h=typeof s=="string"&&s.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return h?[parseFloat(h[1]),h[2]||"px"]:[s,"px"]}function Sa(s,{delay:h=0,duration:_=400,easing:C=ma,amount:E=5,opacity:D=0}={}){const k=getComputedStyle(s),i=+k.opacity,o=k.filter==="none"?"":k.filter,c=i*(1-D),[f,a]=Li(E);return{delay:h,duration:_,easing:C,css:(l,p)=>`opacity: ${i-c*p}; filter: ${o} blur(${p*f}${a});`}}function ns(s,{delay:h=0,duration:_=400,easing:C=rn,x:E=0,y:D=0,opacity:k=0}={}){const i=getComputedStyle(s),o=+i.opacity,c=i.transform==="none"?"":i.transform,f=o*(1-k),[a,l]=Li(E),[p,S]=Li(D);return{delay:h,duration:_,easing:C,css:(u,t)=>`
			transform: ${c} translate(${(1-u)*a}${l}, ${(1-u)*p}${S});
			opacity: ${o-f*t}`}}function Ft(s,{delay:h=0,duration:_=400,easing:C=rn,axis:E="y"}={}){const D=getComputedStyle(s),k=+D.opacity,i=E==="y"?"height":"width",o=parseFloat(D[i]),c=E==="y"?["top","bottom"]:["left","right"],f=c.map(n=>`${n[0].toUpperCase()}${n.slice(1)}`),a=parseFloat(D[`padding${f[0]}`]),l=parseFloat(D[`padding${f[1]}`]),p=parseFloat(D[`margin${f[0]}`]),S=parseFloat(D[`margin${f[1]}`]),u=parseFloat(D[`border${f[0]}Width`]),t=parseFloat(D[`border${f[1]}Width`]);return{delay:h,duration:_,easing:C,css:n=>`overflow: hidden;opacity: ${Math.min(n*20,1)*k};${i}: ${n*o}px;padding-${c[0]}: ${n*a}px;padding-${c[1]}: ${n*l}px;margin-${c[0]}: ${n*p}px;margin-${c[1]}: ${n*S}px;border-${c[0]}-width: ${n*u}px;border-${c[1]}-width: ${n*t}px;min-${i}: 0`}}var ba=Z('<div><div class="d-flex"><div class="toast-body"> </div> <button type="button" class="btn-close btn-close-white me-2 m-auto" aria-label="remove message"></button></div></div>'),wa=Z('<div class="position-fixed bottom-0 end-0 p-3" style="z-index: 470"></div>');function ya(s,h){it(h,!1);let _=le([]);ut(()=>{ke.subscribe(E=>Y(_,E))}),ct();var C=wa();bt(C,5,()=>y(_),St,(E,D)=>{var k=ba();let i;var o=H(k),c=H(o),f=H(c),a=U(c,2);ae(l=>{i=Je(k,1,"toast show align-items-center text-white border-0 mb-2",null,i,l),se(f,y(D).text)},[()=>({"bg-danger":y(D).type==="error","bg-warning":y(D).type==="warning","bg-success":y(D).type==="success","bg-primary":y(D).type==="info"})]),Se("click",a,()=>ke.remove(y(D))),vt(3,k,()=>Ft),W(E,k)}),W(s,C),st()}function os(s,h){h&&h!=="lg"&&h!=="sm"&&h!=="xs"?s.style.fontSize=h.replace("x","em"):s.style.fontSize=""}function Ca(s,h,_,C,E,D=1,k="",i=""){let o=1,c=1;E&&(E=="horizontal"?o=-1:E=="vertical"?c=-1:o=c=-1),typeof s=="string"&&(s=parseFloat(s)),typeof h=="string"&&(h=parseFloat(h)),typeof _=="string"&&(_=parseFloat(_));const f=`${h*D}${k}`,a=`${_*D}${k}`;let l=`translate(${f},${a}) scale(${o*s},${c*s})`;return C&&(l+=` rotate(${C}${i})`),l}var Ea=ar('<title class="svelte-q6zoq1"> </title>'),xa=ar('<path class="svelte-q6zoq1"></path>'),ka=ar('<path class="svelte-q6zoq1"></path><path class="svelte-q6zoq1"></path>',1),La=ar('<svg role="img" xmlns="http://www.w3.org/2000/svg"><!><g class="svelte-q6zoq1"><g class="svelte-q6zoq1"><!></g></g></svg>');function de(s,h){it(h,!1);const _=le(),C=le();let E=he(h,"class",24,()=>{}),D=he(h,"id",24,()=>{}),k=he(h,"style",24,()=>{}),i=he(h,"icon",8),o=he(h,"title",24,()=>{}),c=he(h,"size",24,()=>{}),f=he(h,"color",24,()=>{}),a=he(h,"fw",8,!1),l=he(h,"pull",24,()=>{}),p=he(h,"scale",8,1),S=he(h,"translateX",8,0),u=he(h,"translateY",8,0),t=he(h,"rotate",24,()=>{}),n=he(h,"flip",24,()=>{}),e=he(h,"spin",8,!1),r=he(h,"pulse",8,!1),d=he(h,"primaryColor",8,""),g=he(h,"secondaryColor",8,""),m=he(h,"primaryOpacity",8,1),b=he(h,"secondaryOpacity",8,.4),v=he(h,"swapOpacity",8,!1),w=le();At(()=>(y(w),Me(c()),os),()=>{y(w)&&c()&&os(y(w),c())}),At(()=>Me(i()),()=>{Y(_,i()&&i().icon||[0,0,"",[],""])}),At(()=>(Me(p()),Me(S()),Me(u()),Me(t()),Me(n())),()=>{Y(C,Ca(p(),S(),u(),t(),n(),512))}),Nr(),ct();var R=Ue(),B=ge(R);{var P=A=>{var N=La();let q;var V=H(N);{var Q=F=>{var K=Ea(),ee=H(K);ae(()=>se(ee,o())),W(F,K)};te(V,F=>{o()&&F(Q)})}var G=U(V),x=H(G),T=H(x);{var M=F=>{var K=xa();ae(()=>{Fe(K,"d",(y(_),j(()=>y(_)[4]))),Fe(K,"fill",f()||d()||"currentColor"),Fe(K,"transform",`translate(${y(_),j(()=>y(_)[0]/-2)??""} ${y(_),j(()=>y(_)[1]/-2)??""})`)}),W(F,K)},O=F=>{var K=ka(),ee=ge(K),re=U(ee);ae(()=>{Fe(ee,"d",(y(_),j(()=>y(_)[4][0]))),Fe(ee,"fill",g()||f()||"currentColor"),Fe(ee,"fill-opacity",v()!=!1?m():b()),Fe(ee,"transform",`translate(${y(_),j(()=>y(_)[0]/-2)??""} ${y(_),j(()=>y(_)[1]/-2)??""})`),Fe(re,"d",(y(_),j(()=>y(_)[4][1]))),Fe(re,"fill",d()||f()||"currentColor"),Fe(re,"fill-opacity",v()!=!1?b():m()),Fe(re,"transform",`translate(${y(_),j(()=>y(_)[0]/-2)??""} ${y(_),j(()=>y(_)[1]/-2)??""})`)}),W(F,K)};te(T,F=>{y(_),j(()=>typeof y(_)[4]=="string")?F(M):F(O,!1)})}ci(N,F=>Y(w,F),()=>y(w)),ae(F=>{Fe(N,"id",D()),q=Je(N,0,`svelte-fa svelte-fa-base ${E()??""}`,"svelte-q6zoq1",q,F),Gr(N,k()),Fe(N,"viewBox",`0 0 ${y(_),j(()=>y(_)[0])??""} ${y(_),j(()=>y(_)[1])??""}`),Fe(N,"aria-hidden",o()===void 0),Fe(G,"transform",`translate(${y(_),j(()=>y(_)[0]/2)??""} ${y(_),j(()=>y(_)[1]/2)??""})`),Fe(G,"transform-origin",`${y(_),j(()=>y(_)[0]/4)??""} 0`),Fe(x,"transform",y(C))},[()=>({pulse:r(),"svelte-fa-size-lg":c()==="lg","svelte-fa-size-sm":c()==="sm","svelte-fa-size-xs":c()==="xs","svelte-fa-fw":a(),"svelte-fa-pull-left":l()==="left","svelte-fa-pull-right":l()==="right",spin:e()})]),W(A,N)};te(B,A=>{y(_),j(()=>y(_)[4])&&A(P)})}W(s,R),st()}/*!
 * Font Awesome Free 7.0.1 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2025 Fonticons, Inc.
 */var sn={prefix:"fas",iconName:"memory",icon:[512,512,[],"f538","M64 64C28.7 64 0 92.7 0 128l0 7.4C0 142.2 4.4 148 10.1 151.7 23.3 160.3 32 175.1 32 192s-8.7 31.7-21.9 40.3C4.4 236 0 241.8 0 248.6l0 55.4 512 0 0-55.4c0-6.8-4.4-12.6-10.1-16.3-13.2-8.6-21.9-23.4-21.9-40.3s8.7-31.7 21.9-40.3c5.7-3.7 10.1-9.5 10.1-16.3l0-7.4c0-35.3-28.7-64-64-64L64 64zM512 416l0-64-512 0 0 64c0 17.7 14.3 32 32 32l64 0 0-24c0-13.3 10.7-24 24-24s24 10.7 24 24l0 24 88 0 0-24c0-13.3 10.7-24 24-24s24 10.7 24 24l0 24 88 0 0-24c0-13.3 10.7-24 24-24s24 10.7 24 24l0 24 64 0c17.7 0 32-14.3 32-32zM160 160l0 64c0 17.7-14.3 32-32 32s-32-14.3-32-32l0-64c0-17.7 14.3-32 32-32s32 14.3 32 32zm128 0l0 64c0 17.7-14.3 32-32 32s-32-14.3-32-32l0-64c0-17.7 14.3-32 32-32s32 14.3 32 32zm128 0l0 64c0 17.7-14.3 32-32 32s-32-14.3-32-32l0-64c0-17.7 14.3-32 32-32s32 14.3 32 32z"]},Da={prefix:"fas",iconName:"hard-drive",icon:[448,512,[128436,"hdd"],"f0a0","M64 32C28.7 32 0 60.7 0 96L0 260.1C18.1 247.4 40.2 240 64 240l320 0c23.8 0 45.9 7.4 64 20.1L448 96c0-35.3-28.7-64-64-64L64 32zM448 352c0-35.3-28.7-64-64-64L64 288c-35.3 0-64 28.7-64 64l0 64c0 35.3 28.7 64 64 64l320 0c35.3 0 64-28.7 64-64l0-64zM224 384a32 32 0 1 1 64 0 32 32 0 1 1 -64 0zm128-32a32 32 0 1 1 0 64 32 32 0 1 1 0-64z"]},Ra=Da,Aa={prefix:"fas",iconName:"stop",icon:[448,512,[9209],"f04d","M64 32l320 0c35.3 0 64 28.7 64 64l0 320c0 35.3-28.7 64-64 64L64 480c-35.3 0-64-28.7-64-64L0 96C0 60.7 28.7 32 64 32z"]},Ta={prefix:"fas",iconName:"clock",icon:[512,512,[128339,"clock-four"],"f017","M256 0a256 256 0 1 1 0 512 256 256 0 1 1 0-512zM232 120l0 136c0 8 4 15.5 10.7 20l96 64c11 7.4 25.9 4.4 33.3-6.7s4.4-25.9-6.7-33.3L280 243.2 280 120c0-13.3-10.7-24-24-24s-24 10.7-24 24z"]},Ba={prefix:"fas",iconName:"circle-chevron-up",icon:[512,512,["chevron-circle-up"],"f139","M256 512a256 256 0 1 0 0-512 256 256 0 1 0 0 512zM377 271c9.4 9.4 9.4 24.6 0 33.9s-24.6 9.4-33.9 0l-87-87-87 87c-9.4 9.4-24.6 9.4-33.9 0s-9.4-24.6 0-33.9L239 167c9.4-9.4 24.6-9.4 33.9 0L377 271z"]},Ma=Ba,Oa={prefix:"fas",iconName:"maximize",icon:[448,512,["expand-arrows-alt"],"f31e","M168 32L24 32C10.7 32 0 42.7 0 56L0 200c0 9.7 5.8 18.5 14.8 22.2S34.1 223.8 41 217l40-40 79 79-79 79-40-40c-6.9-6.9-17.2-8.9-26.2-5.2S0 302.3 0 312L0 456c0 13.3 10.7 24 24 24l144 0c9.7 0 18.5-5.8 22.2-14.8s1.7-19.3-5.2-26.2l-40-40 79-79 79 79-40 40c-6.9 6.9-8.9 17.2-5.2 26.2S270.3 480 280 480l144 0c13.3 0 24-10.7 24-24l0-144c0-9.7-5.8-18.5-14.8-22.2s-19.3-1.7-26.2 5.2l-40 40-79-79 79-79 40 40c6.9 6.9 17.2 8.9 26.2 5.2S448 209.7 448 200l0-144c0-13.3-10.7-24-24-24L280 32c-9.7 0-18.5 5.8-22.2 14.8S256.2 66.1 263 73l40 40-79 79-79-79 40-40c6.9-6.9 8.9-17.2 5.2-26.2S177.7 32 168 32z"]},nn=Oa,on={prefix:"fas",iconName:"box-open",icon:[640,512,[],"f49e","M560.3 237.2c10.4 11.8 28.3 14.4 41.8 5.5 14.7-9.8 18.7-29.7 8.9-44.4l-48-72c-2.8-4.2-6.6-7.7-11.1-10.2L351.4 4.7c-19.3-10.7-42.8-10.7-62.2 0L88.8 116c-5.4 3-9.7 7.4-12.6 12.8L27.7 218.7c-12.6 23.4-3.8 52.5 19.6 65.1l33 17.7 0 53.3c0 23 12.4 44.3 32.4 55.7l176 99.7c19.6 11.1 43.5 11.1 63.1 0l176-99.7c20.1-11.4 32.4-32.6 32.4-55.7l0-117.5zm-240-9.8L170.2 144 320.3 60.6 470.4 144 320.3 227.4zm-41.5 50.2l-21.3 46.2-165.8-88.8 25.4-47.2 161.7 89.8z"]},Pa={prefix:"fas",iconName:"sun",icon:[576,512,[9728],"f185","M178.2-10.1c7.4-3.1 15.8-2.2 22.5 2.2l87.8 58.2 87.8-58.2c6.7-4.4 15.1-5.2 22.5-2.2S411.4-.5 413 7.3l20.9 103.2 103.2 20.9c7.8 1.6 14.4 7 17.4 14.3s2.2 15.8-2.2 22.5l-58.2 87.8 58.2 87.8c4.4 6.7 5.2 15.1 2.2 22.5s-9.6 12.8-17.4 14.3L433.8 401.4 413 504.7c-1.6 7.8-7 14.4-14.3 17.4s-15.8 2.2-22.5-2.2l-87.8-58.2-87.8 58.2c-6.7 4.4-15.1 5.2-22.5 2.2s-12.8-9.6-14.3-17.4L143 401.4 39.7 380.5c-7.8-1.6-14.4-7-17.4-14.3s-2.2-15.8 2.2-22.5L82.7 256 24.5 168.2c-4.4-6.7-5.2-15.1-2.2-22.5s9.6-12.8 17.4-14.3L143 110.6 163.9 7.3c1.6-7.8 7-14.4 14.3-17.4zM207.6 256a80.4 80.4 0 1 1 160.8 0 80.4 80.4 0 1 1 -160.8 0zm208.8 0a128.4 128.4 0 1 0 -256.8 0 128.4 128.4 0 1 0 256.8 0z"]},Ia={prefix:"fas",iconName:"network-wired",icon:[576,512,[],"f6ff","M248 88l80 0 0 48-80 0 0-48zm-8-56c-26.5 0-48 21.5-48 48l0 64c0 26.5 21.5 48 48 48l16 0 0 32-224 0c-17.7 0-32 14.3-32 32s14.3 32 32 32l96 0 0 32-16 0c-26.5 0-48 21.5-48 48l0 64c0 26.5 21.5 48 48 48l96 0c26.5 0 48-21.5 48-48l0-64c0-26.5-21.5-48-48-48l-16 0 0-32 192 0 0 32-16 0c-26.5 0-48 21.5-48 48l0 64c0 26.5 21.5 48 48 48l96 0c26.5 0 48-21.5 48-48l0-64c0-26.5-21.5-48-48-48l-16 0 0-32 96 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-224 0 0-32 16 0c26.5 0 48-21.5 48-48l0-64c0-26.5-21.5-48-48-48l-96 0zM448 376l8 0 0 48-80 0 0-48 72 0zm-256 0l8 0 0 48-80 0 0-48 72 0z"]},Ha={prefix:"fas",iconName:"terminal",icon:[512,512,[],"f120","M9.4 118.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l160 160c12.5 12.5 12.5 32.8 0 45.3l-160 160c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L146.7 256 9.4 118.6zM224 384l256 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-256 0c-17.7 0-32-14.3-32-32s14.3-32 32-32z"]},Fa={prefix:"fas",iconName:"folder",icon:[512,512,[128193,128447,61716,"folder-blank"],"f07b","M64 448l384 0c35.3 0 64-28.7 64-64l0-240c0-35.3-28.7-64-64-64L298.7 80c-6.9 0-13.7-2.2-19.2-6.4L241.1 44.8C230 36.5 216.5 32 202.7 32L64 32C28.7 32 0 60.7 0 96L0 384c0 35.3 28.7 64 64 64z"]},Na={prefix:"fas",iconName:"gear",icon:[512,512,[9881,"cog"],"f013","M195.1 9.5C198.1-5.3 211.2-16 226.4-16l59.8 0c15.2 0 28.3 10.7 31.3 25.5L332 79.5c14.1 6 27.3 13.7 39.3 22.8l67.8-22.5c14.4-4.8 30.2 1.2 37.8 14.4l29.9 51.8c7.6 13.2 4.9 29.8-6.5 39.9L447 233.3c.9 7.4 1.3 15 1.3 22.7s-.5 15.3-1.3 22.7l53.4 47.5c11.4 10.1 14 26.8 6.5 39.9l-29.9 51.8c-7.6 13.1-23.4 19.2-37.8 14.4l-67.8-22.5c-12.1 9.1-25.3 16.7-39.3 22.8l-14.4 69.9c-3.1 14.9-16.2 25.5-31.3 25.5l-59.8 0c-15.2 0-28.3-10.7-31.3-25.5l-14.4-69.9c-14.1-6-27.2-13.7-39.3-22.8L73.5 432.3c-14.4 4.8-30.2-1.2-37.8-14.4L5.8 366.1c-7.6-13.2-4.9-29.8 6.5-39.9l53.4-47.5c-.9-7.4-1.3-15-1.3-22.7s.5-15.3 1.3-22.7L12.3 185.8c-11.4-10.1-14-26.8-6.5-39.9L35.7 94.1c7.6-13.2 23.4-19.2 37.8-14.4l67.8 22.5c12.1-9.1 25.3-16.7 39.3-22.8L195.1 9.5zM256.3 336a80 80 0 1 0 -.6-160 80 80 0 1 0 .6 160z"]},za=Na,Wa={prefix:"fas",iconName:"right-from-bracket",icon:[512,512,["sign-out-alt"],"f2f5","M505 273c9.4-9.4 9.4-24.6 0-33.9L361 95c-6.9-6.9-17.2-8.9-26.2-5.2S320 102.3 320 112l0 80-112 0c-26.5 0-48 21.5-48 48l0 32c0 26.5 21.5 48 48 48l112 0 0 80c0 9.7 5.8 18.5 14.8 22.2s19.3 1.7 26.2-5.2L505 273zM160 96c17.7 0 32-14.3 32-32s-14.3-32-32-32L96 32C43 32 0 75 0 128L0 384c0 53 43 96 96 96l64 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-64 0c-17.7 0-32-14.3-32-32l0-256c0-17.7 14.3-32 32-32l64 0z"]},$a=Wa,Ua={prefix:"fas",iconName:"file",icon:[384,512,[128196,128459,61462],"f15b","M64 0C28.7 0 0 28.7 0 64L0 448c0 35.3 28.7 64 64 64l256 0c35.3 0 64-28.7 64-64l0-277.5c0-17-6.7-33.3-18.7-45.3L258.7 18.7C246.7 6.7 230.5 0 213.5 0L64 0zM325.5 176L232 176c-13.3 0-24-10.7-24-24L208 58.5 325.5 176z"]},ja={prefix:"fas",iconName:"play",icon:[448,512,[9654],"f04b","M91.2 36.9c-12.4-6.8-27.4-6.5-39.6 .7S32 57.9 32 72l0 368c0 14.1 7.5 27.2 19.6 34.4s27.2 7.5 39.6 .7l336-184c12.8-7 20.8-20.5 20.8-35.1s-8-28.1-20.8-35.1l-336-184z"]},qa={prefix:"fas",iconName:"rectangle-xmark",icon:[512,512,[62164,"rectangle-times","times-rectangle","window-close"],"f410","M64 64C28.7 64 0 92.7 0 128L0 384c0 35.3 28.7 64 64 64l384 0c35.3 0 64-28.7 64-64l0-256c0-35.3-28.7-64-64-64L64 64zM167 167c9.4-9.4 24.6-9.4 33.9 0l55 55 55-55c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9l-55 55 55 55c9.4 9.4 9.4 24.6 0 33.9s-24.6 9.4-33.9 0l-55-55-55 55c-9.4 9.4-24.6 9.4-33.9 0s-9.4-24.6 0-33.9l55-55-55-55c-9.4-9.4-9.4-24.6 0-33.9z"]},Ka=qa,Va={prefix:"fas",iconName:"house",icon:[512,512,[127968,63498,63500,"home","home-alt","home-lg-alt"],"f015","M277.8 8.6c-12.3-11.4-31.3-11.4-43.5 0l-224 208c-9.6 9-12.8 22.9-8 35.1S18.8 272 32 272l16 0 0 176c0 35.3 28.7 64 64 64l288 0c35.3 0 64-28.7 64-64l0-176 16 0c13.2 0 25-8.1 29.8-20.3s1.6-26.2-8-35.1l-224-208zM240 320l32 0c26.5 0 48 21.5 48 48l0 96-128 0 0-96c0-26.5 21.5-48 48-48z"]},Ga=Va,Xa={prefix:"fas",iconName:"turn-up",icon:[384,512,[10548,"level-up-alt"],"f3bf","M169.4 9.4c12.5-12.5 32.8-12.5 45.3 0l128 128c9.2 9.2 11.9 22.9 6.9 34.9S332.9 192 320 192l-64 0 0 160c0 88.4-71.6 160-160 160l-64 0c-17.7 0-32-14.3-32-32l0-64c0-17.7 14.3-32 32-32l64 0c17.7 0 32-14.3 32-32l0-160-64 0c-12.9 0-24.6-7.8-29.6-19.8s-2.2-25.7 6.9-34.9l128-128z"]},Za=Xa,Ja={prefix:"fas",iconName:"square-up-right",icon:[448,512,[8599,"external-link-square-alt"],"f360","M384 32c35.3 0 64 28.7 64 64l0 320c0 35.3-28.7 64-64 64L64 480c-35.3 0-64-28.7-64-64L0 96C0 60.7 28.7 32 64 32l320 0zM168 160c-9.7 0-18.5 5.8-22.2 14.8s-1.7 19.3 5.2 26.2l35 35-67 67c-9.4 9.4-9.4 24.6 0 33.9l24 24c9.4 9.4 24.6 9.4 33.9 0l67-67 35 35c6.9 6.9 17.2 8.9 26.2 5.2S320 321.7 320 312l0-128c0-13.3-10.7-24-24-24l-128 0z"]},Ya=Ja,Qa={prefix:"fas",iconName:"laptop-code",icon:[640,512,[],"f5fc","M64 96c0-35.3 28.7-64 64-64l384 0c35.3 0 64 28.7 64 64l0 240-64 0 0-240-384 0 0 240-64 0 0-240zM0 403.2C0 392.6 8.6 384 19.2 384l601.6 0c10.6 0 19.2 8.6 19.2 19.2 0 42.4-34.4 76.8-76.8 76.8L76.8 480C34.4 480 0 445.6 0 403.2zM281 209l-31 31 31 31c9.4 9.4 9.4 24.6 0 33.9s-24.6 9.4-33.9 0l-48-48c-9.4-9.4-9.4-24.6 0-33.9l48-48c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9zM393 175l48 48c9.4 9.4 9.4 24.6 0 33.9l-48 48c-9.4 9.4-24.6 9.4-33.9 0s-9.4-24.6 0-33.9l31-31-31-31c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0z"]},el={prefix:"fas",iconName:"server",icon:[448,512,[],"f233","M64 32C28.7 32 0 60.7 0 96l0 64c0 35.3 28.7 64 64 64l320 0c35.3 0 64-28.7 64-64l0-64c0-35.3-28.7-64-64-64L64 32zm216 72a24 24 0 1 1 0 48 24 24 0 1 1 0-48zm56 24a24 24 0 1 1 48 0 24 24 0 1 1 -48 0zM64 288c-35.3 0-64 28.7-64 64l0 64c0 35.3 28.7 64 64 64l320 0c35.3 0 64-28.7 64-64l0-64c0-35.3-28.7-64-64-64L64 288zm216 72a24 24 0 1 1 0 48 24 24 0 1 1 0-48zm56 24a24 24 0 1 1 48 0 24 24 0 1 1 -48 0z"]},tl={prefix:"fas",iconName:"tags",icon:[576,512,[],"f02c","M401.2 39.1L549.4 189.4c27.7 28.1 27.7 73.1 0 101.2L393 448.9c-9.3 9.4-24.5 9.5-33.9 .2s-9.5-24.5-.2-33.9L515.3 256.8c9.2-9.3 9.2-24.4 0-33.7L367 72.9c-9.3-9.4-9.2-24.6 .2-33.9s24.6-9.2 33.9 .2zM32.1 229.5L32.1 96c0-35.3 28.7-64 64-64l133.5 0c17 0 33.3 6.7 45.3 18.7l144 144c25 25 25 65.5 0 90.5L285.4 418.7c-25 25-65.5 25-90.5 0l-144-144c-12-12-18.7-28.3-18.7-45.3zm144-85.5a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z"]},rl={prefix:"fas",iconName:"moon",icon:[512,512,[127769,9214],"f186","M256 0C114.6 0 0 114.6 0 256S114.6 512 256 512c68.8 0 131.3-27.2 177.3-71.4 7.3-7 9.4-17.9 5.3-27.1s-13.7-14.9-23.8-14.1c-4.9 .4-9.8 .6-14.8 .6-101.6 0-184-82.4-184-184 0-72.1 41.5-134.6 102.1-164.8 9.1-4.5 14.3-14.3 13.1-24.4S322.6 8.5 312.7 6.3C294.4 2.2 275.4 0 256 0z"]},il={prefix:"fas",iconName:"house-user",icon:[512,512,["home-user"],"e1b0","M277.8 8.6c-12.3-11.4-31.3-11.4-43.5 0l-224 208c-9.6 9-12.8 22.9-8 35.1S18.8 272 32 272l16 0 0 176c0 35.3 28.7 64 64 64l288 0c35.3 0 64-28.7 64-64l0-176 16 0c13.2 0 25-8.1 29.8-20.3s1.6-26.2-8-35.1l-224-208zM200 256a56 56 0 1 1 112 0 56 56 0 1 1 -112 0zM144 432c0-44.2 35.8-80 80-80l64 0c44.2 0 80 35.8 80 80 0 8.8-7.2 16-16 16l-192 0c-8.8 0-16-7.2-16-16z"]},sl={prefix:"fas",iconName:"download",icon:[448,512,[],"f019","M256 32c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 210.7-41.4-41.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l96 96c12.5 12.5 32.8 12.5 45.3 0l96-96c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L256 242.7 256 32zM64 320c-35.3 0-64 28.7-64 64l0 32c0 35.3 28.7 64 64 64l320 0c35.3 0 64-28.7 64-64l0-32c0-35.3-28.7-64-64-64l-46.9 0-56.6 56.6c-31.2 31.2-81.9 31.2-113.1 0L110.9 320 64 320zm304 56a24 24 0 1 1 0 48 24 24 0 1 1 0-48z"]},nl={prefix:"fas",iconName:"circle-chevron-down",icon:[512,512,["chevron-circle-down"],"f13a","M256 0a256 256 0 1 0 0 512 256 256 0 1 0 0-512zM135 241c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0l87 87 87-87c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9L273 345c-9.4 9.4-24.6 9.4-33.9 0L135 241z"]},ol=nl,al={prefix:"fas",iconName:"plus",icon:[448,512,[10133,61543,"add"],"2b","M256 64c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 160-160 0c-17.7 0-32 14.3-32 32s14.3 32 32 32l160 0 0 160c0 17.7 14.3 32 32 32s32-14.3 32-32l0-160 160 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-160 0 0-160z"]},ll={prefix:"fas",iconName:"box",icon:[448,512,[128230],"f466","M369.4 128l-34.3-48-222.1 0-34.3 48 290.7 0zM0 148.5c0-13.3 4.2-26.3 11.9-37.2L60.9 42.8C72.9 26 92.3 16 112.9 16l222.1 0c20.7 0 40.1 10 52.1 26.8l48.9 68.5c7.8 10.9 11.9 23.9 11.9 37.2L448 416c0 35.3-28.7 64-64 64L64 480c-35.3 0-64-28.7-64-64L0 148.5z"]},cl={prefix:"fas",iconName:"tag",icon:[512,512,[127991],"f02b","M32.5 96l0 149.5c0 17 6.7 33.3 18.7 45.3l192 192c25 25 65.5 25 90.5 0L483.2 333.3c25-25 25-65.5 0-90.5l-192-192C279.2 38.7 263 32 246 32L96.5 32c-35.3 0-64 28.7-64 64zm112 16a32 32 0 1 1 0 64 32 32 0 1 1 0-64z"]},an={prefix:"fas",iconName:"microchip",icon:[512,512,[],"f2db","M176 24c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 40c-35.3 0-64 28.7-64 64l-40 0c-13.3 0-24 10.7-24 24s10.7 24 24 24l40 0 0 56-40 0c-13.3 0-24 10.7-24 24s10.7 24 24 24l40 0 0 56-40 0c-13.3 0-24 10.7-24 24s10.7 24 24 24l40 0c0 35.3 28.7 64 64 64l0 40c0 13.3 10.7 24 24 24s24-10.7 24-24l0-40 56 0 0 40c0 13.3 10.7 24 24 24s24-10.7 24-24l0-40 56 0 0 40c0 13.3 10.7 24 24 24s24-10.7 24-24l0-40c35.3 0 64-28.7 64-64l40 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-40 0 0-56 40 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-40 0 0-56 40 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-40 0c0-35.3-28.7-64-64-64l0-40c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 40-56 0 0-40c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 40-56 0 0-40zM160 128l192 0c17.7 0 32 14.3 32 32l0 192c0 17.7-14.3 32-32 32l-192 0c-17.7 0-32-14.3-32-32l0-192c0-17.7 14.3-32 32-32zm16 48l0 160 160 0 0-160-160 0z"]},hl={prefix:"fas",iconName:"bars",icon:[448,512,["navicon"],"f0c9","M0 96C0 78.3 14.3 64 32 64l384 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L32 128C14.3 128 0 113.7 0 96zM0 256c0-17.7 14.3-32 32-32l384 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L32 288c-17.7 0-32-14.3-32-32zM448 416c0 17.7-14.3 32-32 32L32 448c-17.7 0-32-14.3-32-32s14.3-32 32-32l384 0c17.7 0 32 14.3 32 32z"]},dl={prefix:"fas",iconName:"arrows-rotate",icon:[512,512,[128472,"refresh","sync"],"f021","M65.9 228.5c13.3-93 93.4-164.5 190.1-164.5 53 0 101 21.5 135.8 56.2 .2 .2 .4 .4 .6 .6l7.6 7.2-47.9 0c-17.7 0-32 14.3-32 32s14.3 32 32 32l128 0c17.7 0 32-14.3 32-32l0-128c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 53.4-11.3-10.7C390.5 28.6 326.5 0 256 0 127 0 20.3 95.4 2.6 219.5 .1 237 12.2 253.2 29.7 255.7s33.7-9.7 36.2-27.1zm443.5 64c2.5-17.5-9.7-33.7-27.1-36.2s-33.7 9.7-36.2 27.1c-13.3 93-93.4 164.5-190.1 164.5-53 0-101-21.5-135.8-56.2-.2-.2-.4-.4-.6-.6l-7.6-7.2 47.9 0c17.7 0 32-14.3 32-32s-14.3-32-32-32L32 320c-8.5 0-16.7 3.4-22.7 9.5S-.1 343.7 0 352.3l1 127c.1 17.7 14.6 31.9 32.3 31.7S65.2 496.4 65 478.7l-.4-51.5 10.7 10.1c46.3 46.1 110.2 74.7 180.7 74.7 129 0 235.7-95.4 253.4-219.5z"]},ln=dl,ul=Z('<button type="button" class="btn mx-2" title="Switch Theme"><!></button>');function fl(s,h){it(h,!1);let _=le();function C(){y(_)==="light"?(Y(_,"dark"),document.querySelector("html").classList.add("dark")):(Y(_,"light"),document.querySelector("html").classList.remove("dark"))}ut(()=>{Y(_,"dark"),y(_)==="dark"&&document.querySelector("html").classList.add("dark")}),ct();var E=ul(),D=H(E);{var k=o=>{de(o,{get icon(){return rl},color:"#333",size:"2x"})},i=o=>{de(o,{get icon(){return Pa},color:"#333",size:"2x"})};te(D,o=>{y(_)==="dark"?o(k):o(i,!1)})}Se("click",E,C),W(s,E),st()}var _l=ar('<svg class="bi flex-shrink-0 me-2" width="24" height="24" role="img" aria-label="Danger:"><use xlink:href="#exclamation-triangle-fill"></use></svg>'),vl=ar('<svg class="bi flex-shrink-0 me-2" width="24" height="24" role="img" aria-label="Success:"><use xlink:href="#check-circle-fill"></use></svg>'),pl=ar('<svg class="bi flex-shrink-0 me-2" width="24" height="24" role="img" aria-label="Info:"><use xlink:href="#info-fill"></use></svg>'),gl=Z("<strong>Error:</strong>"),ml=Z('<button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>'),Sl=Z('<div role="alert"><!> <div><!> <!> <!></div></div>'),bl=Z('<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><symbol id="check-circle-fill" fill="currentColor" viewBox="0 0 16 16"><path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"></path></symbol><symbol id="info-fill" fill="currentColor" viewBox="0 0 16 16"><path d="M8 16A8 8 0 1 0 8 0akeyof Message8 8 0 0 0 0 16zm.93-9.412-1 4.705c-.07.34.029.533.304.533.194 0 .487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703 0-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381 2.29-.287zM8 5.5a1 1 0 1 1 0-2 1 1 0 0 1 0 2z"></path></symbol><symbol id="exclamation-triangle-fill" fill="currentColor" viewBox="0 0 16 16"><path d="M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5zm.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"></path></symbol></svg> <!>',1);function wl(s,h){let _=he(h,"type",8),C=he(h,"dismissible",8,!1),E=le(!1);var D=bl(),k=U(ge(D),2);{var i=o=>{var c=Sl();let f;var a=H(c);{var l=d=>{var g=_l();W(d,g)},p=d=>{var g=Ue(),m=ge(g);{var b=w=>{var R=vl();W(w,R)},v=w=>{var R=Ue(),B=ge(R);{var P=A=>{var N=pl();W(A,N)};te(B,A=>{_()==="info"&&A(P)},!0)}W(w,R)};te(m,w=>{_()==="success"?w(b):w(v,!1)},!0)}W(d,g)};te(a,d=>{_()==="error"||_()==="warning"?d(l):d(p,!1)})}var S=U(a,2),u=H(S);{var t=d=>{var g=gl();W(d,g)};te(u,d=>{_()==="error"&&d(t)})}var n=U(u,2);ei(n,h,"default",{},null);var e=U(n,2);{var r=d=>{var g=ml();Se("click",g,()=>Y(E,!0)),W(d,g)};te(e,d=>{C()&&d(r)})}ae(d=>f=Je(c,1,"alert d-flex align-items-center",null,f,d),[()=>({"alert-danger":_()==="error","alert-warning":_()==="warning","alert-success":_()==="success","alert-info":_()==="info","alert-dismissible":C()})]),vt(3,c,()=>Ft),W(o,c)};te(k,o=>{y(E)||o(i)})}W(s,D)}function yl(s){switch(s.request){case"login":return`{"response": "login", "payload": {"username": "${s.payload.username}"}}`;case"get_system_info":return'{"response": "get_system_info", "payload": {"engine_version": "Docker 20.10.7", "containers": {"total": 178, "running": 170, "stopped": 0}, "os": "Ubuntu 20.04.3 LTS", "cpus": 24, "mem": 31277850624}}';case"get_container_list":return`{"response": "get_container_list", "payload": [
                {"id": "2b7eb6b9d2f7fd2dd26738500a81a16310f78e46eea2f9c2a27ed876d85d8586", "name": "CaaSa Demo", "namespace": null, "status": "running", "permissions": ["info", "info-annotations", "procs", "files-read", "files-write", "files", "logs", "state", "term"]},
                {"id": "2b7eb6b9d2f7fd2dd26738500a81a16310f78e46eea2f9c2a27ed876d85d8587", "name": "Backend", "namespace": "Cool Web App", "status": "running", "permissions": ["info", "info-annotations", "procs", "files-read", "files-write", "files", "logs", "state", "term"]},
                {"id": "2b7eb6b9d2f7fd2dd26738500a81a16310f78e46eea2f9c2a27ed876d85d8588", "name": "Gateway", "namespace": "Cool Web App", "status": "running", "permissions": ["info", "info-annotations", "procs", "files-read", "files-write", "files", "logs", "state", "term"]}
               ]}`;case"get_processes":return'{"response": "get_processes", "payload": [{"pid": "45756", "ppid": "45733", "%cpu": "0.0", "%mem": "0.0", "user": "root", "stime": "16:24", "command": "nginx: master process nginx -g daemon off;", "level": 0}, {"pid": "45822", "ppid": "45756", "%cpu": "0.0", "%mem": "0.0", "user": "systemd+", "stime": "16:24", "command": "nginx: worker process", "level": 1}, {"pid": "45823", "ppid": "45756", "%cpu": "0.0", "%mem": "0.0", "user": "systemd+", "stime": "16:24", "command": "nginx: worker process", "level": 1}, {"pid": "45824", "ppid": "45756", "%cpu": "0.0", "%mem": "0.0", "user": "systemd+", "stime": "16:24", "command": "nginx: worker process", "level": 1}, {"pid": "45825", "ppid": "45756", "%cpu": "0.0", "%mem": "0.0", "user": "systemd+", "stime": "16:24", "command": "nginx: worker process", "level": 1}, {"pid": "45826", "ppid": "45756", "%cpu": "0.0", "%mem": "0.0", "user": "systemd+", "stime": "16:24", "command": "nginx: worker process", "level": 1}, {"pid": "45827", "ppid": "45756", "%cpu": "0.0", "%mem": "0.0", "user": "systemd+", "stime": "16:24", "command": "nginx: worker process", "level": 1}, {"pid": "45828", "ppid": "45756", "%cpu": "0.0", "%mem": "0.0", "user": "systemd+", "stime": "16:24", "command": "nginx: worker process", "level": 1}, {"pid": "45829", "ppid": "45756", "%cpu": "0.0", "%mem": "0.0", "user": "systemd+", "stime": "16:24", "command": "nginx: worker process", "level": 1}, {"pid": "45830", "ppid": "45756", "%cpu": "0.0", "%mem": "0.0", "user": "systemd+", "stime": "16:24", "command": "nginx: worker process", "level": 1}, {"pid": "45831", "ppid": "45756", "%cpu": "0.0", "%mem": "0.0", "user": "systemd+", "stime": "16:24", "command": "nginx: worker process", "level": 1}, {"pid": "45832", "ppid": "45756", "%cpu": "0.0", "%mem": "0.0", "user": "systemd+", "stime": "16:24", "command": "nginx: worker process", "level": 1}, {"pid": "45833", "ppid": "45756", "%cpu": "0.0", "%mem": "0.0", "user": "systemd+", "stime": "16:24", "command": "nginx: worker process", "level": 1}, {"pid": "46825", "ppid": "45733", "%cpu": "0.0", "%mem": "0.0", "user": "root", "stime": "16:34", "command": "sh", "level": 0}]}';case"get_container_info":const h={"2b7eb6b9d2f7fd2dd26738500a81a16310f78e46eea2f9c2a27ed876d85d8586":"/caasa_demo","2b7eb6b9d2f7fd2dd26738500a81a16310f78e46eea2f9c2a27ed876d85d8587":"/cool_web_app_backend_1","2b7eb6b9d2f7fd2dd26738500a81a16310f78e46eea2f9c2a27ed876d85d8588":"/cool_web_app_gateway_1"};return`{"response": "get_container_info", "payload": {"id": "${s.payload.container_id}", "name": "${h[s.payload.container_id]}", "status": "running", "command": "/docker-entrypoint.sh nginx -g daemon off;", "created_at": "2021-12-02T10:33:16.628618832Z", "started_at": "2021-12-02T10:33:17.015866729Z", "finished_at": "0001-01-01T00:00:00Z", "crashes": 0, "env": {"PATH": "/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin", "NGINX_VERSION": "1.21.1", "NJS_VERSION": "0.6.1", "PKG_RELEASE": "1"}, "labels": {"caasa.admin.full": "user1,user2", "maintainer": "NGINX Docker Maintainers <docker-maint@nginx.com>"}, "image": {"name": "nginx:alpine", "hash": "sha256:b9e2356ea1be9452f3777a587b0b6a30bc16c295fe6190eda6a0776522f27439"}, "mem": {"used": 10452992, "max_used": 19345408, "total": 52428800}, "cpu": {"perc": ${Math.random()*10}}, "net": {"rx_bytes": 18201, "tx_bytes": 0}, "ports": ["80/tcp"]}}`;case"get_container_logs":return s.payload.onlynew?'{"response": "get_container_logs", "payload":[]}':'{"response": "get_container_logs", "payload": ["2021-12-02T10:33:17.021946340Z /docker-entrypoint.sh: /docker-entrypoint.d/ is not empty, will attempt to perform configuration","2021-12-02T10:33:17.021988550Z /docker-entrypoint.sh: Looking for shell scripts in /docker-entrypoint.d/","2021-12-02T10:33:17.023417432Z /docker-entrypoint.sh: Launching /docker-entrypoint.d/10-listen-on-ipv6-by-default.sh","2021-12-02T10:33:17.031231257Z 10-listen-on-ipv6-by-default.sh: info: Getting the checksum of /etc/nginx/conf.d/default.conf","2021-12-02T10:33:17.055742664Z 10-listen-on-ipv6-by-default.sh: info: Enabled listen on IPv6 in /etc/nginx/conf.d/default.conf","2021-12-02T10:33:17.056041305Z /docker-entrypoint.sh: Launching /docker-entrypoint.d/20-envsubst-on-templates.sh","2021-12-02T10:33:17.059979717Z /docker-entrypoint.sh: Launching /docker-entrypoint.d/30-tune-worker-processes.sh","2021-12-02T10:33:17.062059371Z /docker-entrypoint.sh: Configuration complete; ready for start up","2021-12-02T10:33:17.074027144Z 2021/12/02 10:33:17 [notice] 1#1: using the \\"epoll\\" event method","2021-12-02T10:33:17.074056600Z 2021/12/02 10:33:17 [notice] 1#1: nginx/1.21.1","2021-12-02T10:33:17.074063653Z 2021/12/02 10:33:17 [notice] 1#1: built by gcc 10.3.1 20210424 (Alpine 10.3.1_git20210424) ","2021-12-02T10:33:17.074069845Z 2021/12/02 10:33:17 [notice] 1#1: OS: Linux 5.11.0-40-generic","2021-12-02T10:33:17.074075475Z 2021/12/02 10:33:17 [notice] 1#1: getrlimit(RLIMIT_NOFILE): 1048576:1048576","2021-12-02T10:33:17.074245905Z 2021/12/02 10:33:17 [notice] 1#1: start worker processes","2021-12-02T10:33:17.074276953Z 2021/12/02 10:33:17 [notice] 1#1: start worker process 32","2021-12-02T10:33:17.074379486Z 2021/12/02 10:33:17 [notice] 1#1: start worker process 33","2021-12-02T10:33:17.074401427Z 2021/12/02 10:33:17 [notice] 1#1: start worker process 34","2021-12-02T10:33:17.074513127Z 2021/12/02 10:33:17 [notice] 1#1: start worker process 35","2021-12-02T10:33:17.074601242Z 2021/12/02 10:33:17 [notice] 1#1: start worker process 36","2021-12-02T10:33:17.074666745Z 2021/12/02 10:33:17 [notice] 1#1: start worker process 37","2021-12-02T10:33:17.074817979Z 2021/12/02 10:33:17 [notice] 1#1: start worker process 38","2021-12-02T10:33:17.074873423Z 2021/12/02 10:33:17 [notice] 1#1: start worker process 39","2021-12-02T10:33:17.075007344Z 2021/12/02 10:33:17 [notice] 1#1: start worker process 40","2021-12-02T10:33:17.075141746Z 2021/12/02 10:33:17 [notice] 1#1: start worker process 41","2021-12-02T10:33:17.075279715Z 2021/12/02 10:33:17 [notice] 1#1: start worker process 42","2021-12-02T10:33:17.075393118Z 2021/12/02 10:33:17 [notice] 1#1: start worker process 43"]}';case"get_filesystem_info":return'{"response": "get_filesystem_info", "payload": {"workdir": "", "mounts": [{"type": "bind", "destination": "/etc/ssl/certs", "readonly": true, "source": "/etc/ssl/certs"}]}}';case"get_directory_list":return s.payload.path===""||s.payload.path==="/"?'{"response": "get_directory_list", "payload": {"entries": [{"type": "f", "permissions": "rwxr-xr-x", "owner": "root", "group": "root", "filesize": "0B", "modtime": "2021-12-02 16:19:13", "name": ".dockerenv"}, {"type": "d", "permissions": "rwxr-xr-x", "owner": "root", "group": "root", "filesize": "4.0KB", "modtime": "2021-06-15 14:34:40", "name": "bin"}, {"type": "d", "permissions": "rwxr-xr-x", "owner": "root", "group": "root", "filesize": "360B", "modtime": "2021-12-02 16:19:13", "name": "dev"}, {"type": "d", "permissions": "rwxr-xr-x", "owner": "root", "group": "root", "filesize": "4.0KB", "modtime": "2021-07-06 19:40:27", "name": "docker-entrypoint.d"}, {"type": "f", "permissions": "rwxrwxr-x", "owner": "root", "group": "root", "filesize": "1.2KB", "modtime": "2021-07-06 19:40:16", "name": "docker-entrypoint.sh"}, {"type": "d", "permissions": "rwxr-xr-x", "owner": "root", "group": "root", "filesize": "4.0KB", "modtime": "2021-12-02 16:19:13", "name": "etc"}, {"type": "d", "permissions": "rwxr-xr-x", "owner": "root", "group": "root", "filesize": "4.0KB", "modtime": "2021-06-15 14:34:40", "name": "home"}, {"type": "d", "permissions": "rwxr-xr-x", "owner": "root", "group": "root", "filesize": "4.0KB", "modtime": "2021-06-15 14:34:40", "name": "lib"}, {"type": "d", "permissions": "rwxr-xr-x", "owner": "root", "group": "root", "filesize": "4.0KB", "modtime": "2021-06-15 14:34:40", "name": "media"}, {"type": "d", "permissions": "rwxr-xr-x", "owner": "root", "group": "root", "filesize": "4.0KB", "modtime": "2021-06-15 14:34:40", "name": "mnt"}, {"type": "d", "permissions": "rwxr-xr-x", "owner": "root", "group": "root", "filesize": "4.0KB", "modtime": "2021-06-15 14:34:40", "name": "opt"}, {"type": "d", "permissions": "r-xr-xr-x", "owner": "root", "group": "root", "filesize": "0B", "modtime": "2021-12-02 16:19:13", "name": "proc"}, {"type": "d", "permissions": "rwx------", "owner": "root", "group": "root", "filesize": "4.0KB", "modtime": "2021-06-15 14:34:40", "name": "root"}, {"type": "d", "permissions": "rwxr-xr-x", "owner": "root", "group": "root", "filesize": "4.0KB", "modtime": "2021-12-02 16:19:13", "name": "run"}, {"type": "d", "permissions": "rwxr-xr-x", "owner": "root", "group": "root", "filesize": "4.0KB", "modtime": "2021-06-15 14:34:40", "name": "sbin"}, {"type": "d", "permissions": "rwxr-xr-x", "owner": "root", "group": "root", "filesize": "4.0KB", "modtime": "2021-06-15 14:34:40", "name": "srv"}, {"type": "d", "permissions": "r-xr-xr-x", "owner": "root", "group": "root", "filesize": "0B", "modtime": "2021-12-02 16:19:13", "name": "sys"}, {"type": "d", "permissions": "rwxr-xr-x", "owner": "root", "group": "root", "filesize": "4.0KB", "modtime": "2021-06-15 14:34:40", "name": "usr"}, {"type": "d", "permissions": "rwxr-xr-x", "owner": "root", "group": "root", "filesize": "4.0KB", "modtime": "2021-06-15 14:34:40", "name": "var"}], "path": "/"}}':!1;case"spawn_terminal":return'{"response": "spawn_terminal", "payload": {"execId": "2680be7b4aa3c0b6599edf3521f5813a770ccec7966a59c57cfdac5b4e3b7e9a"}}';case"resize_terminal":return!0;case"transmit_terminal_input":return s.payload.data==="\r"?`56!{"response": "receive_terminal_output", "payload": null}\r
This is just a demo`:'56!{"response": "receive_terminal_output", "payload": null}'+s.payload.data;default:return!1}}class Cl{constructor(h){}binaryType;bufferedAmount;extensions;onclose;onerror;onmessage;onopen;protocol;readyState;url;close(h,_){}CLOSED;CLOSING;CONNECTING;OPEN;addEventListener(h,_,C){throw new Error("Method not implemented.")}removeEventListener(h,_,C){throw new Error("Method not implemented.")}dispatchEvent(h){throw new Error("Method not implemented.")}send(h){const _=JSON.parse(h),C=yl(_),E={data:void 0,...new Event("api-mock")};if(C===!1?E.data=`{"response": "${_.request}", "error": "Sorry, command not mocked in demo"}`:C===!0||(C[0]!=="{"?E.data=new Blob([C]):E.data=C),E.data&&(setTimeout(()=>this.onmessage(E),200),typeof E.data=="string"&&E.data.includes("spawn_terminal"))){console.log("extra response for terminal");const D={data:void 0,...new Event("api-mock")};D.data=new Blob(['56!{"response": "receive_terminal_output", "payload": null}/ # ']),setTimeout(()=>this.onmessage(D),300)}}}let Ot,Mr={},Or={};function as(s,h){s in Mr?Mr[s](h):console.error("WS-API Unknown websocket event:",s)}function Kr(s,h){s in Or?Or[s](h):console.error("WS-API Unknown websocket event:",s)}function ls(){Mr={},Or={}}const ne={init(){try{Ot&&Ot.close(1e3),Ot=new Cl(`${window.location.protocol.replace("http","ws")}//${window.location.host}/ws`),Ot.binaryType="blob",Ot.onclose=s=>{Kr("ws-close",s.reason||"Connection closed"),ls()},Ot.onmessage=async s=>{if(s.data instanceof Blob){const h=parseInt(await s.data.slice(0,10).text()),_=h.toString().length+1,C=await s.data.slice(_,_+h).text(),E=JSON.parse(C);E.error?Kr(E.response,E.error):as(E.response,{payload:E.payload,blob:s.data.slice(_+h)})}else{const h=JSON.parse(s.data);h.error?Kr(h.response,h.error):as(h.response,h.payload)}},Ot.onerror=s=>{Kr("ws-error","Connection error")}}catch(s){alert(s)}},register(s,h=null,_=null){h&&(Mr[s]=h),_&&(Or[s]=_)},unregister(...s){s.forEach(h=>{delete Or[h],delete Mr[h]})},send(s,h){Ot.send(JSON.stringify({request:s,payload:h}))},close(){ls(),Ot.close()}};var El=Z('<div class="spinner-grow mx-2 text-light" role="status"><span class="visually-hidden">Loading...</span></div>'),xl=Z('<div class="mt-4 text-light"> </div>'),kl=Z('<div class="bg-outer position-fixed d-flex justify-content-center align-items-center top-0 start-0 end-0 bottom-0 svelte-g0kq5f"><div class="bg-inner d-flex flex-column rounded p-3 svelte-g0kq5f"><div class="d-flex justify-content-center align-items-center"></div> <!></div></div>');function cn(s,h){it(h,!1);let _=he(h,"text",8,""),C=le(!1);ut(()=>{setTimeout(()=>Y(C,!0),250)}),ct();var E=Ue(),D=ge(E);{var k=i=>{var o=kl(),c=H(o),f=H(c);bt(f,4,()=>[1,2,3],St,(p,S)=>{var u=El();W(p,u)});var a=U(f,2);{var l=p=>{var S=xl(),u=H(S);ae(()=>se(u,_())),W(p,S)};te(a,p=>{_()&&p(l)})}vt(1,o,()=>Sa),W(i,o)};te(D,i=>{y(C)&&i(k)})}W(s,E),st()}var Ll=Z('<!> <div class="container pt-5"><!> <form class="container login-form svelte-ylib6f"><div class="form-floating mb-2"><input type="text" class="form-control" id="loginName" placeholder=" " required autocomplete="username"/> <label for="loginName">Username</label></div> <div class="form-floating mb-2"><input type="password" class="form-control" id="loginPw" placeholder=" " required autocomplete="current-password"/> <label for="loginPw">Password</label></div> <div class="col-12"><button type="submit" class="btn btn-primary w-100">Login</button></div></form></div>',1);function Dl(s,h){it(h,!1);let _=he(h,"username",12,"admin"),C=le("123456"),E=le(!1),D=le("");const k=Xs();ut(()=>{ne.register("login",({username:r})=>{k("login",{username:r})},r=>{Y(E,!1),ke.add({text:r,type:"error"})})}),Gt(()=>{ne.unregister("login")});async function i(){Y(E,!0),ne.send("login",{username:_(),password:y(C)}),Y(D,""),Y(C,"")}ct();var o=Ll(),c=ge(o);{var f=r=>{cn(r,{})};te(c,r=>{y(E)&&r(f)})}var a=U(c,2),l=H(a);{var p=r=>{wl(r,{type:"error",dismissible:!0,children:(d,g)=>{var m=pt();ae(()=>se(m,y(D))),W(d,m)},$$slots:{default:!0}})};te(l,r=>{y(D)&&r(p)})}var S=U(l,2),u=H(S),t=H(u),n=U(u,2),e=H(n);ti(t,_),Se("input",t,()=>{_(_().toLowerCase().trim())}),ti(e,()=>y(C),r=>Y(C,r)),Se("submit",S,ri(()=>i())),vt(3,S,()=>Ft),W(s,o),st()}function Dr(s,h=0){return Math.round(s*10**h)/10**h}function Ct(s){const h=["","Ki","Mi","Gi","Ti"];let _=0;for(;s>=1024;)s/=1024,_++;const C=Math.max(Math.floor(Math.log10(Math.floor(s))),0);return Dr(s,2-C)+" "+h[_]+"B"}function Dt(s){return new Date(s).toLocaleString(void 0,{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})}function hn(s,h){if(window?.navigator?.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(s,h);else{const _=document.createElement("a");document.body.appendChild(_);const C=window.URL.createObjectURL(s);_.href=C,_.download=h,_.click(),setTimeout(()=>{window.URL.revokeObjectURL(C),document.body.removeChild(_)},0)}}var Rl=Z('<div class="d-flex align-items-center"><strong>Loading...</strong> <div class="spinner-border ms-auto" role="status" aria-hidden="true"></div></div>'),Al=Z('<span class="spinner-grow spinner-grow-sm" role="status" aria-hidden="true"></span>'),Tl=Z('<button type="button" class="btn btn-outline-warning"><!> Restart</button>'),Bl=Z('<span class="spinner-grow spinner-grow-sm" role="status" aria-hidden="true"></span>'),Ml=Z('<button type="button" class="btn btn-outline-danger"><!> Stop</button>'),Ol=Z("<!> <!>",1),Pl=Z('<span class="spinner-grow spinner-grow-sm" role="status" aria-hidden="true"></span>'),Il=Z('<button type="button" class="btn btn-outline-success"><!> Start</button>'),Hl=Z('<div class="ms-4"><!></div>'),Fl=Z('<span class="text-muted font-monospace"> </span>'),Nl=Z('<a target="_blank" rel="noopener noreferrer" class="text-decoration-none"> </a>'),zl=Z('<a target="_blank" rel="noopener noreferrer" class="text-decoration-none"> </a>'),Wl=Z('<div class="d-flex mb-3"><div class="icon-left ms-1 me-3 svelte-nba7m8"><!></div> <div class="flex-grow-1"><div class="mb-1">Processor</div> <div class="progress"><div class="progress-bar text-white overflow-visible ps-1"> </div></div></div></div>'),$l=Z('<span class="badge rounded-pill bg-primary ms-2"> </span>'),Ul=Z('<span class="badge rounded-pill bg-warning ms-2"> </span>'),jl=Z('<span class="badge rounded-pill bg-info ms-2"> </span>'),ql=Z('<div class="progress-bar progress-bar-striped bg-warning"></div>'),Kl=Z('<div class="progress"><div class="progress-bar text-white overflow-visible ps-1"> </div> <!></div>'),Vl=Z('<div class="d-flex mb-3"><div class="icon-left ms-1 me-3 svelte-nba7m8"><!></div> <div class="flex-grow-1"><div class="mb-1"><span class="me-2">Memory</span> <!> <!> <!></div> <!></div></div>'),Gl=Z('<div class="me-5"><div class="mb-1">Network</div> <span title="Received Traffic" class="me-3"> </span> <span title="Sent Traffic"> </span></div>'),Xl=Z('<span class="badge bg-dark me-2"> </span>'),Zl=Z('<div class="flex-grow-1"><div class="mb-1">Ports</div> <!></div>'),Jl=Z('<div class="d-flex mb-3"><div class="icon-left ms-1 me-3 svelte-nba7m8"><!></div> <!> <!></div>'),Yl=Z('<div class="fw-bold">Stopped</div> <!>',1),Ql=Z('<div class="fw-bold">Started</div> ',1),ec=Z('<div class="fw-bold">Stopped</div> ',1),tc=Z('<div class="fw-bold">Started</div> ',1),rc=Z('<tr><td class="text-end border-end text-break"> </td><td class="text-break"> </td></tr>'),ic=Z('<tr><td class="text-end border-end text-break"> </td><td class="text-break"> </td></tr>'),sc=Z('<div class="d-flex mb-3"><div class="icon-left ms-1 me-3 svelte-nba7m8"><!></div> <div class="flex-grow-1 d-lg-flex" style="font-size: small"><div><table class="table table-striped border"><thead><tr><th scope="col" colspan="2" style="font-weight: normal">Environment Variables</th></tr></thead><tbody></tbody></table></div> <div><table class="table table-striped border"><thead><tr><th scope="col" colspan="2" style="font-weight: normal">Labels</th></tr></thead><tbody></tbody></table></div></div></div>'),nc=Z('<div class="d-flex mb-3"><div class="icon-left ms-1 me-3 svelte-nba7m8"><!></div> <div class="d-flex flex-column flex-grow-1"><div class="flex-grow-1 d-flex align-items-center justify-content-between"><div class="flex-grow-1"><div class="mb-1"><span class="me-2">Container</span> <span class="text-muted font-monospace"> </span></div> <div><h6> </h6></div></div> <!></div> <div><!> <code> </code></div></div></div> <div class="d-flex mb-3"><div class="icon-left ms-1 me-3 svelte-nba7m8"><!></div> <div class="flex-grow-1"><div class="mb-1"><span class="me-2">Image</span> <!></div> <div><h6><!> <span class="ms-1"><!> </span></h6></div></div></div> <!> <!> <!> <div class="d-flex mb-3"><div class="icon-left ms-1 me-3 svelte-nba7m8"><!></div> <div class="flex-grow-1 pb-5 mb-5"><div class="mb-1">Timeline</div> <div class="timeline mt-2 svelte-nba7m8"><div class="tl-container svelte-nba7m8" style="margin-left: 5%"><div class="popup svelte-nba7m8"><div class="fw-bold">Created</div> </div></div> <div class="tl-container svelte-nba7m8" style="margin-left: 27%"><div class="popup svelte-nba7m8"><div class="fw-bold"> </div> Crashes</div></div> <div class="tl-container svelte-nba7m8" style="margin-left: 49%"><div class="popup svelte-nba7m8"><!></div></div> <div class="tl-container svelte-nba7m8" style="margin-left: 71%"><div class="popup svelte-nba7m8"><!></div></div> <div class="tl-container svelte-nba7m8" style="margin-left: 93%"><div class="popup svelte-nba7m8">Currently <div class="fw-bold"> </div></div></div></div></div></div> <!>',1),oc=Z("<div><!></div>");function ac(s,h){it(h,!1);const _=le(),C=le(),E=le(),D=le();let k=he(h,"enable_actions",8),i=he(h,"container_id",8),o,c,f=le(!0),a=le(null),l=le();$r(()=>{i()!==o&&(o=i(),Y(f,!0),Y(a,null),i()&&ne.send("get_container_info",{container_id:i()}))}),ut(()=>{window.scrollTo({top:0,behavior:"smooth"}),ne.register("get_container_info",e=>{e.id===i()&&(Y(l,e),Y(f,!1))},e=>ke.add({text:e,type:"error"})),ne.register("set_container_state",()=>{Y(a,null)},e=>ke.add({text:e,type:"error"})),c=setInterval(()=>{ne.send("get_container_info",{container_id:i()})},3e3)}),Gt(()=>{clearInterval(c),ne.unregister("get_container_info"),ne.unregister("set_container_state")});function p(e){switch(ne.send("set_container_state",{container_id:i(),action:e}),Y(a,e),e){case"start":ke.add({text:"Starting container ...",type:"success"});break;case"restart":ke.add({text:"Restarting container ...",type:"info"});break;case"stop":ke.add({text:"Stopping container ...",type:"info"});break}}At(()=>y(l),()=>{Y(_,(y(l)?.mem?.used||0)*100/(y(l)?.mem?.total||0))}),At(()=>y(l),()=>{Y(C,(y(l)?.mem?.max_used||0)*100/(y(l)?.mem?.total||0))}),At(()=>y(l),()=>{Y(E,y(l)?.image.name.includes(":")?y(l)?.image.name.slice(0,y(l)?.image.name.lastIndexOf(":")):y(l)?.image.name)}),At(()=>y(l),()=>{Y(D,y(l)?.image.name.includes(":")?y(l)?.image.name.split(":").pop():"latest")}),Nr(),ct();var S=oc(),u=H(S);{var t=e=>{var r=Rl();W(e,r)},n=e=>{var r=nc(),d=ge(r),g=H(d),m=H(g);de(m,{get icon(){return on},size:"2x"});var b=U(g,2),v=H(b),w=H(v),R=H(w),B=U(H(R),2),P=H(B),A=U(R,2),N=H(A),q=H(N),V=U(w,2);{var Q=ce=>{var ue=Hl(),ye=H(ue);{var Oe=we=>{var xe=Ol(),Ze=ge(xe);{var We=Pe=>{var De=Tl(),$e=H(De);{var me=Ce=>{de(Ce,{get icon(){return ln}})},Ie=Ce=>{var je=Al();W(Ce,je)};te($e,Ce=>{y(a)?Ce(Ie,!1):Ce(me)})}ae(()=>De.disabled=!!y(a)),Se("click",De,()=>p("restart")),W(Pe,De)};te(Ze,Pe=>{(!y(a)||y(a)==="restart")&&Pe(We)})}var Qe=U(Ze,2);{var et=Pe=>{var De=Ml(),$e=H(De);{var me=Ce=>{de(Ce,{get icon(){return Aa}})},Ie=Ce=>{var je=Bl();W(Ce,je)};te($e,Ce=>{y(a)?Ce(Ie,!1):Ce(me)})}ae(()=>De.disabled=!!y(a)),Se("click",De,()=>p("stop")),W(Pe,De)};te(Qe,Pe=>{(!y(a)||y(a)==="stop")&&Pe(et)})}W(we,xe)},at=we=>{var xe=Ue(),Ze=ge(xe);{var We=Qe=>{var et=Il(),Pe=H(et);{var De=me=>{de(me,{get icon(){return ja}})},$e=me=>{var Ie=Pl();W(me,Ie)};te(Pe,me=>{y(a)?me($e,!1):me(De)})}ae(()=>et.disabled=!!y(a)),Se("click",et,()=>p("start")),W(Qe,et)};te(Ze,Qe=>{(!y(a)||y(a)==="start")&&Qe(We)},!0)}W(we,xe)};te(ye,we=>{y(l),j(()=>y(l).status==="running")?we(Oe):we(at,!1)})}W(ce,ue)};te(V,ce=>{k()&&ce(Q)})}var G=U(v,2),x=H(G);de(x,{get icon(){return Ha}});var T=U(x,2),M=H(T),O=U(d,2),F=H(O),K=H(F);de(K,{get icon(){return ll},size:"2x"});var ee=U(F,2),re=H(ee),I=U(H(re),2);{var L=ce=>{var ue=Fl(),ye=H(ue);ae(Oe=>se(ye,Oe),[()=>(y(l),j(()=>y(l).image.hash.substring(0,19)))]),W(ce,ue)};te(I,ce=>{y(l),j(()=>y(l).image?.hash!==y(l)?.image?.name)&&ce(L)})}var z=U(re,2),$=H(z),X=H($);{var J=ce=>{var ue=Nl(),ye=H(ue);ae(()=>{Fe(ue,"href",`https://hub.docker.com/_/${y(E)??""}`),se(ye,y(E))}),W(ce,ue)},oe=ce=>{var ue=Ue(),ye=ge(ue);{var Oe=we=>{var xe=zl(),Ze=H(xe);ae(()=>{Fe(xe,"href",`https://hub.docker.com/r/${y(E)??""}`),se(Ze,y(E))}),W(we,xe)},at=we=>{var xe=pt();ae(()=>se(xe,y(E))),W(we,xe)};te(ye,we=>{y(E),j(()=>y(E).match(/^\w+\/\w+$/))?we(Oe):we(at,!1)},!0)}W(ce,ue)};te(X,ce=>{y(E),j(()=>!y(E).includes("/"))?ce(J):ce(oe,!1)})}var _e=U(X,2),ve=H(_e);de(ve,{get icon(){return cl}});var Re=U(ve),ie=U(O,2);{var Ae=ce=>{var ue=Wl(),ye=H(ue),Oe=H(ye);de(Oe,{get icon(){return an},size:"2x"});var at=U(ye,2),we=U(H(at),2),xe=H(we),Ze=H(xe);ae(We=>{Gr(xe,`width: ${y(l),j(()=>y(l).cpu.perc)??""}%`),se(Ze,`${We??""}%`)},[()=>(Me(Dr),y(l),j(()=>Dr(y(l).cpu.perc)))]),W(ce,ue)};te(ie,ce=>{y(l),j(()=>y(l).cpu)&&ce(Ae)})}var Ve=U(ie,2);{var yt=ce=>{var ue=Vl(),ye=H(ue),Oe=H(ye);de(Oe,{get icon(){return sn},size:"2x"});var at=U(ye,2),we=H(at),xe=U(H(we),2);{var Ze=me=>{var Ie=$l(),Ce=H(Ie);ae(je=>se(Ce,`Now ${je??""}`),[()=>(Me(Ct),y(l),j(()=>Ct(y(l).mem.used)))]),W(me,Ie)};te(xe,me=>{y(l),j(()=>y(l).mem.used!==null)&&me(Ze)})}var We=U(xe,2);{var Qe=me=>{var Ie=Ul(),Ce=H(Ie);ae(je=>se(Ce,`Max ${je??""}`),[()=>(Me(Ct),y(l),j(()=>Ct(y(l).mem.max_used)))]),W(me,Ie)};te(We,me=>{y(l),j(()=>y(l).mem.max_used!==null)&&me(Qe)})}var et=U(We,2);{var Pe=me=>{var Ie=jl(),Ce=H(Ie);ae(je=>se(Ce,`Limit ${je??""}`),[()=>(Me(Ct),y(l),j(()=>Ct(y(l).mem.total)))]),W(me,Ie)};te(et,me=>{y(l),j(()=>y(l).mem.total!==null)&&me(Pe)})}var De=U(we,2);{var $e=me=>{var Ie=Kl(),Ce=H(Ie),je=H(Ce),xr=U(Ce,2);{var kr=Mt=>{var Wi=ql();ae(()=>Gr(Wi,`width: ${y(C)-y(_)}%`)),W(Mt,Wi)};te(xr,Mt=>{y(l),j(()=>y(l).mem.max_used!==null)&&Mt(kr)})}ae(Mt=>{Gr(Ce,`width: ${y(_)??""}%; z-index: 2`),se(je,`${Mt??""}%`)},[()=>(Me(Dr),y(_),j(()=>Dr(y(_))))]),W(me,Ie)};te(De,me=>{y(l),j(()=>y(l).mem.used!==null&&y(l).mem.total!==null)&&me($e)})}W(ce,ue)};te(Ve,ce=>{y(l),j(()=>y(l).mem)&&ce(yt)})}var Le=U(Ve,2);{var He=ce=>{var ue=Jl(),ye=H(ue),Oe=H(ye);de(Oe,{get icon(){return Ia},size:"2x"});var at=U(ye,2);{var we=We=>{var Qe=Gl(),et=U(H(Qe),2),Pe=H(et),De=U(et,2),$e=H(De);ae((me,Ie)=>{se(Pe,`â¼ ${me??""}`),se($e,`â² ${Ie??""}`)},[()=>(Me(Ct),y(l),j(()=>Ct(y(l).net.rx_bytes))),()=>(Me(Ct),y(l),j(()=>Ct(y(l).net.tx_bytes)))]),W(We,Qe)};te(at,We=>{y(l),j(()=>y(l).net)&&We(we)})}var xe=U(at,2);{var Ze=We=>{var Qe=Zl(),et=U(H(Qe),2);bt(et,1,()=>(y(l),j(()=>y(l).ports)),St,(Pe,De)=>{var $e=Xl(),me=H($e);ae(()=>se(me,y(De))),W(Pe,$e)}),W(We,Qe)};te(xe,We=>{y(l),j(()=>y(l).ports?.length>0)&&We(Ze)})}W(ce,ue)};te(Le,ce=>{y(l),j(()=>y(l).net||y(l).ports?.length>0)&&ce(He)})}var Te=U(Le,2),nt=H(Te),Ge=H(nt);de(Ge,{get icon(){return Ta},size:"2x"});var Xe=U(nt,2),Ye=U(H(Xe),2),Ne=H(Ye),ft=H(Ne),ot=U(H(ft)),ze=U(Ne,2),be=H(ze),Er=H(be),hi=H(Er),Ur=U(ze,2),un=H(Ur),fn=H(un);{var _n=ce=>{var ue=Yl(),ye=U(ge(ue),2);{var Oe=we=>{var xe=pt("Never");W(we,xe)},at=we=>{var xe=pt();ae(Ze=>se(xe,Ze),[()=>(Me(Dt),y(l),j(()=>Dt(y(l).finished_at)))]),W(we,xe)};te(ye,we=>{y(l),j(()=>y(l).finished_at<y(l).created_at)?we(Oe):we(at,!1)})}W(ce,ue)},vn=ce=>{var ue=Ql(),ye=U(ge(ue));ae(Oe=>se(ye,` ${Oe??""}`),[()=>(Me(Dt),y(l),j(()=>Dt(y(l).started_at)))]),W(ce,ue)};te(fn,ce=>{y(l),j(()=>y(l).finished_at<y(l).started_at)?ce(_n):ce(vn,!1)})}var zi=U(Ur,2),pn=H(zi),gn=H(pn);{var mn=ce=>{var ue=ec(),ye=U(ge(ue));ae(Oe=>se(ye,` ${Oe??""}`),[()=>(Me(Dt),y(l),j(()=>Dt(y(l).finished_at)))]),W(ce,ue)},Sn=ce=>{var ue=tc(),ye=U(ge(ue));ae(Oe=>se(ye,` ${Oe??""}`),[()=>(Me(Dt),y(l),j(()=>Dt(y(l).started_at)))]),W(ce,ue)};te(gn,ce=>{y(l),j(()=>y(l).finished_at>y(l).started_at)?ce(mn):ce(Sn,!1)})}var bn=U(zi,2),wn=H(bn),yn=U(H(wn)),Cn=H(yn),En=U(Te,2);{var xn=ce=>{var ue=sc(),ye=H(ue),Oe=H(ye);de(Oe,{get icon(){return tl},size:"2x"});var at=U(ye,2),we=H(at),xe=H(we),Ze=U(H(xe));bt(Ze,5,()=>(y(l),j(()=>Object.entries(y(l).env).sort(([Pe],[De])=>Pe.localeCompare(De)))),St,(Pe,De)=>{var $e=Ki(()=>Ui(y(De),2));let me=()=>y($e)[0],Ie=()=>y($e)[1];var Ce=rc(),je=H(Ce),xr=H(je),kr=U(je),Mt=H(kr);ae(()=>{se(xr,me()),se(Mt,Ie())}),W(Pe,Ce)});var We=U(we,2),Qe=H(We),et=U(H(Qe));bt(et,5,()=>(y(l),j(()=>Object.entries(y(l).labels).sort(([Pe],[De])=>Pe.localeCompare(De)))),St,(Pe,De)=>{var $e=Ki(()=>Ui(y(De),2));let me=()=>y($e)[0],Ie=()=>y($e)[1];var Ce=ic(),je=H(Ce),xr=H(je),kr=U(je),Mt=H(kr);ae(()=>{se(xr,me()),se(Mt,Ie())}),W(Pe,Ce)}),W(ce,ue)};te(En,ce=>{y(l),j(()=>y(l).env||y(l).labels)&&ce(xn)})}ae((ce,ue,ye,Oe)=>{se(P,`#${ce??""}`),se(q,ue),se(M,(y(l),j(()=>y(l).command))),se(Re,` ${y(D)??""}`),se(ot,` ${ye??""}`),se(hi,(y(l),j(()=>y(l).crashes))),se(Cn,Oe)},[()=>(y(l),j(()=>y(l).id.substring(0,12))),()=>(y(l),j(()=>y(l).name.replace(/^\//,""))),()=>(Me(Dt),y(l),j(()=>Dt(y(l).created_at))),()=>(y(l),j(()=>y(l).status.charAt(0).toUpperCase()+y(l).status.slice(1).toLowerCase()))]),W(e,r)};te(u,e=>{y(f)?e(t):e(n,!1)})}W(s,S),st()}function lc({onlyFirst:s=!1}={}){const _=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?(?:\\u0007|\\u001B\\u005C|\\u009C))","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-nq-uy=><~]))"].join("|");return new RegExp(_,s?void 0:"g")}const cc=lc();function hc(s){if(typeof s!="string")throw new TypeError(`Expected a \`string\`, got \`${typeof s}\``);return s.replace(cc,"")}var dc=Z('<div class="d-flex align-items-center"><strong>Loading...</strong> <div class="spinner-border ms-auto" role="status" aria-hidden="true"></div></div>'),uc=Z("<p>No Log Output yet ...</p>"),fc=Z('<time class="me-1 px-1 svelte-owxx4o"><!></time>'),_c=Z('<span class="pe-3 svelte-owxx4o"><!><span class="pe-3"> </span></span>'),vc=Z('<div class="d-flex justify-content-between align-items-center mb-2"><div><select class="form-select"><option>hide timestamps</option><option>local timestamps</option><option>raw timestamps</option></select></div> <div><button type="button" class="btn mx-1" title="Scroll to Top"><!></button> <button type="button" class="btn mx-1" title="Scroll to Bottom"><!></button> <button type="button" class="btn mx-1" title="Download shown log lines"><!></button> <button type="button" class="btn mx-1" title="Fullscreen"><!></button></div></div> <pre class="mb-0 svelte-owxx4o"></pre>',1),pc=Z("<div><!></div>");function gc(s,h){it(h,!1);let _=he(h,"container_id",8),C,E=le(),D,k=le(!0),i=le([]),o=le("local");$r(()=>{_()!==C&&(C=_(),Y(k,!0),Y(i,[]),_()&&ne.send("get_container_logs",{container_id:_()}))}),ut(()=>{ne.register("get_container_logs",t=>{if(Y(k,!1),t?.length>0){let n=!y(i)||y(E)&&y(E).scrollTop>=y(E).scrollHeight-y(E).clientHeight;const e=y(i).length+t.length;e>5e3&&y(i).slice(e-5e3),y(i).push(...t.map(r=>hc(r))),n&&Ni().then(()=>ui(E,y(E).scrollTop=y(E).scrollHeight))}},t=>ke.add({text:t,type:"error"})),D=setInterval(()=>{ne.send("get_container_logs",{container_id:_(),onlynew:!0})},3e3)}),Gt(()=>{clearInterval(D),ne.unregister("get_container_logs")});function c(){y(E)?.requestFullscreen&&y(E).requestFullscreen({navigationUI:"show"})}function f(){hn(new Blob(y(i),{type:"text/plain"}),_()+".log")}function a(t){return new Date(t).toLocaleDateString(void 0,{weekday:"short",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})}ct();var l=pc(),p=H(l);{var S=t=>{var n=dc();W(t,n)},u=t=>{var n=Ue(),e=ge(n);{var r=g=>{var m=uc();W(g,m)},d=g=>{var m=vc(),b=ge(m),v=H(b),w=H(v);ae(()=>{y(o),Fo(()=>{})});var R=H(w);R.value=R.__value="off";var B=U(R);B.value=B.__value="local";var P=U(B);P.value=P.__value="raw";var A=U(v,2),N=H(A),q=H(N);de(q,{get icon(){return Ma},size:"lg",color:"#666"});var V=U(N,2),Q=H(V);de(Q,{get icon(){return ol},size:"lg",color:"#666"});var G=U(V,2),x=H(G);de(x,{get icon(){return sl},size:"lg",color:"#666"});var T=U(G,2),M=H(T);de(M,{get icon(){return nn},size:"lg",color:"#666"});var O=U(b,2);bt(O,5,()=>y(i),St,(F,K)=>{const ee=xt(()=>(y(K),j(()=>y(K).substring(0,y(K).indexOf(" "))))),re=xt(()=>(y(K),j(()=>y(K).substring(y(K).indexOf(" ")+1))));var I=_c(),L=H(I);{var z=J=>{var oe=fc(),_e=H(oe);{var ve=ie=>{var Ae=pt();ae(Ve=>se(Ae,Ve),[()=>(Me(y(ee)),j(()=>a(y(ee))))]),W(ie,Ae)},Re=ie=>{var Ae=pt();ae(()=>se(Ae,y(ee))),W(ie,Ae)};te(_e,ie=>{y(o)==="local"?ie(ve):ie(Re,!1)})}ae(()=>Fe(oe,"datetime",y(ee))),W(J,oe)};te(L,J=>{y(o)!=="off"&&J(z)})}var $=U(L),X=H($);ae(()=>se(X,y(re))),W(F,I)}),ci(O,F=>Y(E,F),()=>y(E)),ra(w,()=>y(o),F=>Y(o,F)),Se("click",N,()=>ui(E,y(E).scrollTop=0)),Se("click",V,()=>ui(E,y(E).scrollTop=y(E).scrollHeight)),Se("click",G,f),Se("click",T,c),W(g,m)};te(e,g=>{y(i),j(()=>y(i).length===0)?g(r):g(d,!1)},!0)}W(t,n)};te(p,t=>{y(k)?t(S):t(u,!1)})}W(s,l),st()}var mc=Z('<div class="dropdown"><button type="button"><!></button> <ul class="dropdown-menu svelte-wpr3yy"><!></ul></div>');function cs(s,h){let _=he(h,"btnClass",8,"secondary");var C=mc(),E=H(C),D=H(E);ei(D,h,"button",{},o=>{de(o,{get icon(){return za}})});var k=U(E,2),i=H(k);ei(i,h,"default",{},null),ae(()=>Je(E,1,`btn btn-${_()??""} dropdown-toggle`,"svelte-wpr3yy")),W(s,C)}var Sc=Z('<li><button type="button"><!></button></li>');function pi(s,h){let _=he(h,"active",8,!1);var C=Sc(),E=H(C);let D;var k=H(E);ei(k,h,"default",{},null),ae(i=>D=Je(E,1,"dropdown-item",null,D,i),[()=>({active:_()})]),Se("click",E,function(i){da.call(this,h,i)}),W(s,C)}var bc=Z('<div class="d-flex align-items-center"><strong>Loading...</strong> <div class="spinner-border ms-auto" role="status" aria-hidden="true"></div></div>'),wc=Z('<button type="button" class="btn btn-outline-primary"><!></button>'),yc=Z('<button type="button" class="btn btn-secondary border-dark"> </button>'),Cc=Z("<!> <!>",1),Ec=Z('<span slot="button" class="me-1"><!> Add</span>'),xc=Z('<!> <input type="file" style="display: none"/>',1),kc=Z('<span class="badge bg-warning ms-2">readonly</span>'),Lc=Z('<div class="d-flex justify-content-between align-items-center"><span> </span> <span><!> <span class="badge bg-secondary ms-2"> </span></span></div>'),Dc=Z('<span slot="button" class="me-1"><!> Volumes</span>'),Rc=Z('<div class="ms-4"><!></div>'),Ac=Z('<tr><td><!> <wbr/> </td><td class="text-end" style="word-break: break-all"><!></td><td class="text-center"> <wbr/> </td><td class="text-center"> </td><td class="text-center font-monospace" style="word-break: break-all"> </td></tr>'),Tc=Z('<div class="d-flex justify-content-between align-items-center"><div class="d-flex"><div class="btn-group me-1"><!> <button type="button" class="btn btn-outline-primary"><!></button></div> <div class="btn-group mx-2" role="group"></div></div> <div class="d-flex"><!> <!></div></div> <table class="table table-hover"><thead><tr><th scope="col">Name</th><th scope="col" class="text-end">Size</th><th scope="col" class="text-center">Owner</th><th scope="col" class="text-center">Modified</th><th scope="col" class="text-center">Permissions</th></tr></thead><tbody></tbody></table>',1),Bc=Z('<div style="overflow-x:auto"><!></div>');function Mc(s,h){it(h,!1);const _=le();let C=he(h,"container_id",8),E=he(h,"allow_download",8),D=he(h,"allow_upload",8),k=le(),i=le(!0),o,c=le("/"),f=le(null),a=le(null);$r(()=>{C()!==o&&(o=C(),Y(i,!0),Y(c,"/"),Y(f,null),Y(a,null),C()&&ne.send("get_filesystem_info",{container_id:C()}))}),ut(()=>{ne.register("get_filesystem_info",g=>{p(g.workdir),Y(a,g)},g=>ke.add({text:g,type:"error"})),ne.register("get_directory_list",g=>{window.scrollTo({top:0,behavior:"smooth"}),Y(f,g.entries),Y(c,g.path),Y(i,!1)},g=>{ke.add({text:g,type:"error"}),Y(f,null),Y(i,!1)}),ne.register("download_file",g=>{hn(g.blob,g.payload.path.split("/").pop())},g=>ke.add({text:g,type:"error"})),ne.register("create_folder",()=>{p(y(c))},g=>ke.add({text:g,type:"error"})),ne.register("upload_file",()=>{p(y(c))},g=>ke.add({text:g,type:"error"}))}),Gt(()=>{ne.unregister("get_filesystem_info"),ne.unregister("get_directory_list"),ne.unregister("create_folder"),ne.unregister("upload_file"),ne.unregister("download_file")});function l(g){let m=y(c);m.endsWith("/")||(m+="/"),m+=g,p(m)}function p(g){Y(c,g),ne.send("get_directory_list",{container_id:C(),path:g}),Y(i,!0),Y(f,null)}function S(g){E()&&ne.send("download_file",{container_id:C(),path:`${y(c)}/${g}`})}function u(){const g=prompt("Folder name:");g&&ne.send("create_folder",{container_id:C(),path:`${y(c)}/${g}`})}async function t(){const g=b=>new Promise((v,w)=>{const R=new FileReader;R.readAsDataURL(b),R.onload=()=>v(R.result.split(",")[1]),R.onerror=B=>w(B)}),m=y(k).files?.[0];m&&confirm(`Upload file "${m.name}"?`)&&ne.send("upload_file",{container_id:C(),path:`${y(c)}/${m.name}`,content:await g(m)})}At(()=>y(c),()=>{Y(_,()=>{const g=[],m=y(c).split("/");let b="";for(const v of m)v&&(b+="/"+v,g.push({segment:v,totalPath:b}));return g.unshift({segment:"/",totalPath:"/"}),g})}),Nr(),ct();var n=Bc(),e=H(n);{var r=g=>{var m=bc();W(g,m)},d=g=>{var m=Tc(),b=ge(m),v=H(b),w=H(v),R=H(w);{var B=O=>{var F=wc(),K=H(F);de(K,{get icon(){return Ga}}),Se("click",F,()=>p(y(a).workdir)),W(O,F)};te(R,O=>{y(a)&&O(B)})}var P=U(R,2),A=H(P);de(A,{get icon(){return ln}});var N=U(w,2);bt(N,5,()=>(y(_),j(()=>y(_)())),St,(O,F)=>{var K=yc(),ee=H(K);ae(()=>se(ee,(y(F),j(()=>y(F).segment||"/")))),Se("click",K,()=>p(y(F).totalPath)),W(O,K)});var q=U(v,2),V=H(q);{var Q=O=>{var F=xc(),K=ge(F);cs(K,{btnClass:"outline-primary",children:(re,I)=>{var L=Cc(),z=ge(L);pi(z,{$$events:{click:u},children:(X,J)=>{var oe=pt("Add Folder");W(X,oe)},$$slots:{default:!0}});var $=U(z,2);pi($,{$$events:{click:()=>y(k).click()},children:(X,J)=>{var oe=pt("Upload File");W(X,oe)},$$slots:{default:!0}}),W(re,L)},$$slots:{default:!0,button:(re,I)=>{var L=Ec(),z=H(L);de(z,{get icon(){return al}}),W(re,L)}}});var ee=U(K,2);ci(ee,re=>Y(k,re),()=>y(k)),Se("change",ee,t),W(O,F)};te(V,O=>{D()&&O(Q)})}var G=U(V,2);{var x=O=>{var F=Rc(),K=H(F);cs(K,{children:(ee,re)=>{var I=Ue(),L=ge(I);bt(L,1,()=>(y(a),j(()=>y(a).mounts)),St,(z,$)=>{pi(z,{$$events:{click:()=>p(y($).destination)},children:(X,J)=>{var oe=Lc(),_e=H(oe),ve=H(_e),Re=U(_e,2),ie=H(Re);{var Ae=Le=>{var He=kc();W(Le,He)};te(ie,Le=>{y($),j(()=>y($).readonly)&&Le(Ae)})}var Ve=U(ie,2),yt=H(Ve);ae(()=>{se(ve,(y($),j(()=>y($).destination))),se(yt,(y($),j(()=>y($).type)))}),W(X,oe)},$$slots:{default:!0}})}),W(ee,I)},$$slots:{default:!0,button:(ee,re)=>{var I=Dc(),L=H(I);de(L,{get icon(){return Ra}}),W(ee,I)}}}),W(O,F)};te(G,O=>{y(a),j(()=>y(a)&&y(a).mounts?.length>0)&&O(x)})}var T=U(b,2),M=U(H(T));bt(M,5,()=>y(f)||[],St,(O,F)=>{var K=Ac();let ee;var re=H(K),I=H(re);{var L=Le=>{de(Le,{get icon(){return Fa},size:"lg",color:"#3B6"})},z=Le=>{var He=Ue(),Te=ge(He);{var nt=Xe=>{de(Xe,{get icon(){return Ua},size:"lg",color:"#36B"})},Ge=Xe=>{var Ye=Ue(),Ne=ge(Ye);{var ft=ze=>{de(ze,{get icon(){return Ya},size:"lg",color:"#B36"})},ot=ze=>{var be=pt();ae(()=>se(be,(y(F),j(()=>y(F).type)))),W(ze,be)};te(Ne,ze=>{y(F),j(()=>y(F).type==="l")?ze(ft):ze(ot,!1)},!0)}W(Xe,Ye)};te(Te,Xe=>{y(F),j(()=>y(F).type==="f")?Xe(nt):Xe(Ge,!1)},!0)}W(Le,He)};te(I,Le=>{y(F),j(()=>y(F).type==="d")?Le(L):Le(z,!1)})}var $=U(I,3),X=U(re),J=H(X);{var oe=Le=>{var He=pt();ae(()=>se(He,(y(F),j(()=>y(F).filesize)))),W(Le,He)};te(J,Le=>{y(F),j(()=>y(F).type==="f")&&Le(oe)})}var _e=U(X),ve=H(_e),Re=U(ve,2,!0),ie=U(_e),Ae=H(ie),Ve=U(ie),yt=H(Ve);ae(Le=>{ee=Je(K,1,"svelte-lni8ht",null,ee,Le),se($,` ${y(F),j(()=>y(F).name)??""}`),se(ve,`${y(F),j(()=>y(F).owner)??""} `),se(Re,(y(F),j(()=>y(F).group))),se(Ae,(y(F),j(()=>y(F).modtime))),se(yt,(y(F),j(()=>y(F).permissions)))},[()=>({clickable:y(F).type==="d"||E()})]),Se("click",K,()=>y(F).type==="d"?l(y(F).name):S(y(F).name)),W(O,K)}),Se("click",P,()=>p(y(c))),W(g,m)};te(e,g=>{y(i)?g(r):g(d,!1)})}W(s,n),st()}var Oc=Z('<div class="d-flex align-items-center"><strong>Loading...</strong> <div class="spinner-border ms-auto" role="status" aria-hidden="true"></div></div>'),Pc=Z('<div style="width: 2rem" class="me-2 d-flex justify-content-end align-items-center"><!></div>'),Ic=Z('<tr><td class="text-end"> </td><td class="text-end"><!></td><td class="text-end"><!></td><td class="text-center"> </td><td class="text-center"> </td><td class="text-start"><div class="d-flex"><!> <div class="font-monospace"> </div></div></td></tr>'),Hc=Z('<table class="table table-striped"><thead><tr><th scope="col" class="text-end" title="Process ID">PID</th><th scope="col" class="text-end" title="Processor Usage">CPU</th><th scope="col" class="text-end">Memory</th><th scope="col" class="text-center">Started At</th><th scope="col" class="text-center">User</th><th scope="col" class="text-start">Command</th></tr></thead><tbody></tbody></table>'),Fc=Z('<div style="overflow-x:auto"><!></div>');function Nc(s,h){it(h,!1);let _=he(h,"container_id",8),C,E,D=le(!0),k=le(null);$r(()=>{_()!==C&&(C=_(),Y(D,!0),Y(k,null),_()&&ne.send("get_processes",{container_id:_()}))}),ut(()=>{ne.register("get_processes",l=>{Y(k,l),Y(D,!1)},l=>ke.add({text:l,type:"error"})),E=setInterval(()=>{ne.send("get_processes",{container_id:_()})},3e3)}),Gt(()=>{clearInterval(E),ne.unregister("get_processes")});function i(l,p){return l??p}ct();var o=Fc(),c=H(o);{var f=l=>{var p=Oc();W(l,p)},a=l=>{var p=Hc(),S=U(H(p));bt(S,5,()=>y(k)||[],St,(u,t)=>{var n=Ic(),e=H(n),r=H(e),d=U(e),g=H(d);{var m=x=>{var T=pt();ae(()=>se(T,`${y(t),j(()=>y(t)["%cpu"])??""}%`)),W(x,T)};te(g,x=>{y(t),j(()=>i(y(t)["%cpu"],null))&&x(m)})}var b=U(d),v=H(b);{var w=x=>{var T=pt();ae(()=>se(T,`${y(t),j(()=>y(t)["%mem"])??""}%`)),W(x,T)};te(v,x=>{y(t),j(()=>i(y(t)["%mem"],null))&&x(w)})}var R=U(b),B=H(R),P=U(R),A=H(P),N=U(P),q=H(N),V=H(q);bt(V,1,()=>(y(t),j(()=>Array(y(t).level))),St,(x,T,M)=>{var O=Pc(),F=H(O);{var K=ee=>{de(ee,{get icon(){return Za},rotate:90})};te(F,ee=>{y(t),j(()=>parseInt(y(t).level)===M+1)&&ee(K)})}W(x,O)});var Q=U(V,2),G=H(Q);ae((x,T)=>{se(r,(y(t),j(()=>y(t).pid))),se(B,x),se(A,T),se(G,(y(t),j(()=>y(t).command)))},[()=>(y(t),j(()=>i(y(t).stime,""))),()=>(y(t),j(()=>i(y(t).user,"")))]),W(u,n)}),W(l,p)};te(c,l=>{y(D)?l(f):l(a,!1)})}W(s,o),st()}var gi={exports:{}},hs;function zc(){return hs||(hs=1,function(s,h){(function(_,C){s.exports=C()})(globalThis,()=>(()=>{var _={4567:function(k,i,o){var c=this&&this.__decorate||function(e,r,d,g){var m,b=arguments.length,v=b<3?r:g===null?g=Object.getOwnPropertyDescriptor(r,d):g;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")v=Reflect.decorate(e,r,d,g);else for(var w=e.length-1;w>=0;w--)(m=e[w])&&(v=(b<3?m(v):b>3?m(r,d,v):m(r,d))||v);return b>3&&v&&Object.defineProperty(r,d,v),v},f=this&&this.__param||function(e,r){return function(d,g){r(d,g,e)}};Object.defineProperty(i,"__esModule",{value:!0}),i.AccessibilityManager=void 0;const a=o(9042),l=o(9924),p=o(844),S=o(4725),u=o(2585),t=o(3656);let n=i.AccessibilityManager=class extends p.Disposable{constructor(e,r,d,g){super(),this._terminal=e,this._coreBrowserService=d,this._renderService=g,this._rowColumns=new WeakMap,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="",this._accessibilityContainer=this._coreBrowserService.mainDocument.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=this._coreBrowserService.mainDocument.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let m=0;m<this._terminal.rows;m++)this._rowElements[m]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[m]);if(this._topBoundaryFocusListener=m=>this._handleBoundaryFocus(m,0),this._bottomBoundaryFocusListener=m=>this._handleBoundaryFocus(m,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions(),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=this._coreBrowserService.mainDocument.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this.register(new l.TimeBasedDebouncer(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this.register(this._terminal.onResize(m=>this._handleResize(m.rows))),this.register(this._terminal.onRender(m=>this._refreshRows(m.start,m.end))),this.register(this._terminal.onScroll(()=>this._refreshRows())),this.register(this._terminal.onA11yChar(m=>this._handleChar(m))),this.register(this._terminal.onLineFeed(()=>this._handleChar(`
`))),this.register(this._terminal.onA11yTab(m=>this._handleTab(m))),this.register(this._terminal.onKey(m=>this._handleKey(m.key))),this.register(this._terminal.onBlur(()=>this._clearLiveRegion())),this.register(this._renderService.onDimensionsChange(()=>this._refreshRowsDimensions())),this.register((0,t.addDisposableDomListener)(document,"selectionchange",()=>this._handleSelectionChange())),this.register(this._coreBrowserService.onDprChange(()=>this._refreshRowsDimensions())),this._refreshRows(),this.register((0,p.toDisposable)(()=>{this._accessibilityContainer.remove(),this._rowElements.length=0}))}_handleTab(e){for(let r=0;r<e;r++)this._handleChar(" ")}_handleChar(e){this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==e&&(this._charsToAnnounce+=e):this._charsToAnnounce+=e,e===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=a.tooMuchOutput)))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0}_handleKey(e){this._clearLiveRegion(),new RegExp("\\p{Control}","u").test(e)||this._charsToConsume.push(e)}_refreshRows(e,r){this._liveRegionDebouncer.refresh(e,r,this._terminal.rows)}_renderRows(e,r){const d=this._terminal.buffer,g=d.lines.length.toString();for(let m=e;m<=r;m++){const b=d.lines.get(d.ydisp+m),v=[],w=b?.translateToString(!0,void 0,void 0,v)||"",R=(d.ydisp+m+1).toString(),B=this._rowElements[m];B&&(w.length===0?(B.innerText="Â ",this._rowColumns.set(B,[0,1])):(B.textContent=w,this._rowColumns.set(B,v)),B.setAttribute("aria-posinset",R),B.setAttribute("aria-setsize",g))}this._announceCharacters()}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(e,r){const d=e.target,g=this._rowElements[r===0?1:this._rowElements.length-2];if(d.getAttribute("aria-posinset")===(r===0?"1":`${this._terminal.buffer.lines.length}`)||e.relatedTarget!==g)return;let m,b;if(r===0?(m=d,b=this._rowElements.pop(),this._rowContainer.removeChild(b)):(m=this._rowElements.shift(),b=d,this._rowContainer.removeChild(m)),m.removeEventListener("focus",this._topBoundaryFocusListener),b.removeEventListener("focus",this._bottomBoundaryFocusListener),r===0){const v=this._createAccessibilityTreeNode();this._rowElements.unshift(v),this._rowContainer.insertAdjacentElement("afterbegin",v)}else{const v=this._createAccessibilityTreeNode();this._rowElements.push(v),this._rowContainer.appendChild(v)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(r===0?-1:1),this._rowElements[r===0?1:this._rowElements.length-2].focus(),e.preventDefault(),e.stopImmediatePropagation()}_handleSelectionChange(){if(this._rowElements.length===0)return;const e=document.getSelection();if(!e)return;if(e.isCollapsed)return void(this._rowContainer.contains(e.anchorNode)&&this._terminal.clearSelection());if(!e.anchorNode||!e.focusNode)return void console.error("anchorNode and/or focusNode are null");let r={node:e.anchorNode,offset:e.anchorOffset},d={node:e.focusNode,offset:e.focusOffset};if((r.node.compareDocumentPosition(d.node)&Node.DOCUMENT_POSITION_PRECEDING||r.node===d.node&&r.offset>d.offset)&&([r,d]=[d,r]),r.node.compareDocumentPosition(this._rowElements[0])&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_FOLLOWING)&&(r={node:this._rowElements[0].childNodes[0],offset:0}),!this._rowContainer.contains(r.node))return;const g=this._rowElements.slice(-1)[0];if(d.node.compareDocumentPosition(g)&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_PRECEDING)&&(d={node:g,offset:g.textContent?.length??0}),!this._rowContainer.contains(d.node))return;const m=({node:w,offset:R})=>{const B=w instanceof Text?w.parentNode:w;let P=parseInt(B?.getAttribute("aria-posinset"),10)-1;if(isNaN(P))return console.warn("row is invalid. Race condition?"),null;const A=this._rowColumns.get(B);if(!A)return console.warn("columns is null. Race condition?"),null;let N=R<A.length?A[R]:A.slice(-1)[0]+1;return N>=this._terminal.cols&&(++P,N=0),{row:P,column:N}},b=m(r),v=m(d);if(b&&v){if(b.row>v.row||b.row===v.row&&b.column>=v.column)throw new Error("invalid range");this._terminal.select(b.column,b.row,(v.row-b.row)*this._terminal.cols-b.column+v.column)}}_handleResize(e){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let r=this._rowContainer.children.length;r<this._terminal.rows;r++)this._rowElements[r]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[r]);for(;this._rowElements.length>e;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){const e=this._coreBrowserService.mainDocument.createElement("div");return e.setAttribute("role","listitem"),e.tabIndex=-1,this._refreshRowDimensions(e),e}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){this._accessibilityContainer.style.width=`${this._renderService.dimensions.css.canvas.width}px`,this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let e=0;e<this._terminal.rows;e++)this._refreshRowDimensions(this._rowElements[e])}}_refreshRowDimensions(e){e.style.height=`${this._renderService.dimensions.css.cell.height}px`}};i.AccessibilityManager=n=c([f(1,u.IInstantiationService),f(2,S.ICoreBrowserService),f(3,S.IRenderService)],n)},3614:(k,i)=>{function o(l){return l.replace(/\r?\n/g,"\r")}function c(l,p){return p?"\x1B[200~"+l+"\x1B[201~":l}function f(l,p,S,u){l=c(l=o(l),S.decPrivateModes.bracketedPasteMode&&u.rawOptions.ignoreBracketedPasteMode!==!0),S.triggerDataEvent(l,!0),p.value=""}function a(l,p,S){const u=S.getBoundingClientRect(),t=l.clientX-u.left-10,n=l.clientY-u.top-10;p.style.width="20px",p.style.height="20px",p.style.left=`${t}px`,p.style.top=`${n}px`,p.style.zIndex="1000",p.focus()}Object.defineProperty(i,"__esModule",{value:!0}),i.rightClickHandler=i.moveTextAreaUnderMouseCursor=i.paste=i.handlePasteEvent=i.copyHandler=i.bracketTextForPaste=i.prepareTextForTerminal=void 0,i.prepareTextForTerminal=o,i.bracketTextForPaste=c,i.copyHandler=function(l,p){l.clipboardData&&l.clipboardData.setData("text/plain",p.selectionText),l.preventDefault()},i.handlePasteEvent=function(l,p,S,u){l.stopPropagation(),l.clipboardData&&f(l.clipboardData.getData("text/plain"),p,S,u)},i.paste=f,i.moveTextAreaUnderMouseCursor=a,i.rightClickHandler=function(l,p,S,u,t){a(l,p,S),t&&u.rightClickSelect(l),p.value=u.selectionText,p.select()}},7239:(k,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ColorContrastCache=void 0;const c=o(1505);i.ColorContrastCache=class{constructor(){this._color=new c.TwoKeyMap,this._css=new c.TwoKeyMap}setCss(f,a,l){this._css.set(f,a,l)}getCss(f,a){return this._css.get(f,a)}setColor(f,a,l){this._color.set(f,a,l)}getColor(f,a){return this._color.get(f,a)}clear(){this._color.clear(),this._css.clear()}}},3656:(k,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.addDisposableDomListener=void 0,i.addDisposableDomListener=function(o,c,f,a){o.addEventListener(c,f,a);let l=!1;return{dispose:()=>{l||(l=!0,o.removeEventListener(c,f,a))}}}},3551:function(k,i,o){var c=this&&this.__decorate||function(n,e,r,d){var g,m=arguments.length,b=m<3?e:d===null?d=Object.getOwnPropertyDescriptor(e,r):d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(n,e,r,d);else for(var v=n.length-1;v>=0;v--)(g=n[v])&&(b=(m<3?g(b):m>3?g(e,r,b):g(e,r))||b);return m>3&&b&&Object.defineProperty(e,r,b),b},f=this&&this.__param||function(n,e){return function(r,d){e(r,d,n)}};Object.defineProperty(i,"__esModule",{value:!0}),i.Linkifier=void 0;const a=o(3656),l=o(8460),p=o(844),S=o(2585),u=o(4725);let t=i.Linkifier=class extends p.Disposable{get currentLink(){return this._currentLink}constructor(n,e,r,d,g){super(),this._element=n,this._mouseService=e,this._renderService=r,this._bufferService=d,this._linkProviderService=g,this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this.register(new l.EventEmitter),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this.register(new l.EventEmitter),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this.register((0,p.getDisposeArrayDisposable)(this._linkCacheDisposables)),this.register((0,p.toDisposable)(()=>{this._lastMouseEvent=void 0,this._activeProviderReplies?.clear()})),this.register(this._bufferService.onResize(()=>{this._clearCurrentLink(),this._wasResized=!0})),this.register((0,a.addDisposableDomListener)(this._element,"mouseleave",()=>{this._isMouseOut=!0,this._clearCurrentLink()})),this.register((0,a.addDisposableDomListener)(this._element,"mousemove",this._handleMouseMove.bind(this))),this.register((0,a.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,a.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))}_handleMouseMove(n){this._lastMouseEvent=n;const e=this._positionFromMouseEvent(n,this._element,this._mouseService);if(!e)return;this._isMouseOut=!1;const r=n.composedPath();for(let d=0;d<r.length;d++){const g=r[d];if(g.classList.contains("xterm"))break;if(g.classList.contains("xterm-hover"))return}this._lastBufferCell&&e.x===this._lastBufferCell.x&&e.y===this._lastBufferCell.y||(this._handleHover(e),this._lastBufferCell=e)}_handleHover(n){if(this._activeLine!==n.y||this._wasResized)return this._clearCurrentLink(),this._askForLink(n,!1),void(this._wasResized=!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,n)||(this._clearCurrentLink(),this._askForLink(n,!0))}_askForLink(n,e){this._activeProviderReplies&&e||(this._activeProviderReplies?.forEach(d=>{d?.forEach(g=>{g.link.dispose&&g.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=n.y);let r=!1;for(const[d,g]of this._linkProviderService.linkProviders.entries())e?this._activeProviderReplies?.get(d)&&(r=this._checkLinkProviderResult(d,n,r)):g.provideLinks(n.y,m=>{if(this._isMouseOut)return;const b=m?.map(v=>({link:v}));this._activeProviderReplies?.set(d,b),r=this._checkLinkProviderResult(d,n,r),this._activeProviderReplies?.size===this._linkProviderService.linkProviders.length&&this._removeIntersectingLinks(n.y,this._activeProviderReplies)})}_removeIntersectingLinks(n,e){const r=new Set;for(let d=0;d<e.size;d++){const g=e.get(d);if(g)for(let m=0;m<g.length;m++){const b=g[m],v=b.link.range.start.y<n?0:b.link.range.start.x,w=b.link.range.end.y>n?this._bufferService.cols:b.link.range.end.x;for(let R=v;R<=w;R++){if(r.has(R)){g.splice(m--,1);break}r.add(R)}}}}_checkLinkProviderResult(n,e,r){if(!this._activeProviderReplies)return r;const d=this._activeProviderReplies.get(n);let g=!1;for(let m=0;m<n;m++)this._activeProviderReplies.has(m)&&!this._activeProviderReplies.get(m)||(g=!0);if(!g&&d){const m=d.find(b=>this._linkAtPosition(b.link,e));m&&(r=!0,this._handleNewLink(m))}if(this._activeProviderReplies.size===this._linkProviderService.linkProviders.length&&!r)for(let m=0;m<this._activeProviderReplies.size;m++){const b=this._activeProviderReplies.get(m)?.find(v=>this._linkAtPosition(v.link,e));if(b){r=!0,this._handleNewLink(b);break}}return r}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(n){if(!this._currentLink)return;const e=this._positionFromMouseEvent(n,this._element,this._mouseService);e&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,e)&&this._currentLink.link.activate(n,this._currentLink.link.text)}_clearCurrentLink(n,e){this._currentLink&&this._lastMouseEvent&&(!n||!e||this._currentLink.link.range.start.y>=n&&this._currentLink.link.range.end.y<=e)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,p.disposeArray)(this._linkCacheDisposables))}_handleNewLink(n){if(!this._lastMouseEvent)return;const e=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);e&&this._linkAtPosition(n.link,e)&&(this._currentLink=n,this._currentLink.state={decorations:{underline:n.link.decorations===void 0||n.link.decorations.underline,pointerCursor:n.link.decorations===void 0||n.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,n.link,this._lastMouseEvent),n.link.decorations={},Object.defineProperties(n.link.decorations,{pointerCursor:{get:()=>this._currentLink?.state?.decorations.pointerCursor,set:r=>{this._currentLink?.state&&this._currentLink.state.decorations.pointerCursor!==r&&(this._currentLink.state.decorations.pointerCursor=r,this._currentLink.state.isHovered&&this._element.classList.toggle("xterm-cursor-pointer",r))}},underline:{get:()=>this._currentLink?.state?.decorations.underline,set:r=>{this._currentLink?.state&&this._currentLink?.state?.decorations.underline!==r&&(this._currentLink.state.decorations.underline=r,this._currentLink.state.isHovered&&this._fireUnderlineEvent(n.link,r))}}}),this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange(r=>{if(!this._currentLink)return;const d=r.start===0?0:r.start+1+this._bufferService.buffer.ydisp,g=this._bufferService.buffer.ydisp+1+r.end;if(this._currentLink.link.range.start.y>=d&&this._currentLink.link.range.end.y<=g&&(this._clearCurrentLink(d,g),this._lastMouseEvent)){const m=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);m&&this._askForLink(m,!1)}})))}_linkHover(n,e,r){this._currentLink?.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(e,!0),this._currentLink.state.decorations.pointerCursor&&n.classList.add("xterm-cursor-pointer")),e.hover&&e.hover(r,e.text)}_fireUnderlineEvent(n,e){const r=n.range,d=this._bufferService.buffer.ydisp,g=this._createLinkUnderlineEvent(r.start.x-1,r.start.y-d-1,r.end.x,r.end.y-d-1,void 0);(e?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(g)}_linkLeave(n,e,r){this._currentLink?.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(e,!1),this._currentLink.state.decorations.pointerCursor&&n.classList.remove("xterm-cursor-pointer")),e.leave&&e.leave(r,e.text)}_linkAtPosition(n,e){const r=n.range.start.y*this._bufferService.cols+n.range.start.x,d=n.range.end.y*this._bufferService.cols+n.range.end.x,g=e.y*this._bufferService.cols+e.x;return r<=g&&g<=d}_positionFromMouseEvent(n,e,r){const d=r.getCoords(n,e,this._bufferService.cols,this._bufferService.rows);if(d)return{x:d[0],y:d[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(n,e,r,d,g){return{x1:n,y1:e,x2:r,y2:d,cols:this._bufferService.cols,fg:g}}};i.Linkifier=t=c([f(1,u.IMouseService),f(2,u.IRenderService),f(3,S.IBufferService),f(4,u.ILinkProviderService)],t)},9042:(k,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.tooMuchOutput=i.promptLabel=void 0,i.promptLabel="Terminal input",i.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},3730:function(k,i,o){var c=this&&this.__decorate||function(u,t,n,e){var r,d=arguments.length,g=d<3?t:e===null?e=Object.getOwnPropertyDescriptor(t,n):e;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(u,t,n,e);else for(var m=u.length-1;m>=0;m--)(r=u[m])&&(g=(d<3?r(g):d>3?r(t,n,g):r(t,n))||g);return d>3&&g&&Object.defineProperty(t,n,g),g},f=this&&this.__param||function(u,t){return function(n,e){t(n,e,u)}};Object.defineProperty(i,"__esModule",{value:!0}),i.OscLinkProvider=void 0;const a=o(511),l=o(2585);let p=i.OscLinkProvider=class{constructor(u,t,n){this._bufferService=u,this._optionsService=t,this._oscLinkService=n}provideLinks(u,t){const n=this._bufferService.buffer.lines.get(u-1);if(!n)return void t(void 0);const e=[],r=this._optionsService.rawOptions.linkHandler,d=new a.CellData,g=n.getTrimmedLength();let m=-1,b=-1,v=!1;for(let w=0;w<g;w++)if(b!==-1||n.hasContent(w)){if(n.loadCell(w,d),d.hasExtendedAttrs()&&d.extended.urlId){if(b===-1){b=w,m=d.extended.urlId;continue}v=d.extended.urlId!==m}else b!==-1&&(v=!0);if(v||b!==-1&&w===g-1){const R=this._oscLinkService.getLinkData(m)?.uri;if(R){const B={start:{x:b+1,y:u},end:{x:w+(v||w!==g-1?0:1),y:u}};let P=!1;if(!r?.allowNonHttpProtocols)try{const A=new URL(R);["http:","https:"].includes(A.protocol)||(P=!0)}catch{P=!0}P||e.push({text:R,range:B,activate:(A,N)=>r?r.activate(A,N,B):S(0,N),hover:(A,N)=>r?.hover?.(A,N,B),leave:(A,N)=>r?.leave?.(A,N,B)})}v=!1,d.hasExtendedAttrs()&&d.extended.urlId?(b=w,m=d.extended.urlId):(b=-1,m=-1)}}t(e)}};function S(u,t){if(confirm(`Do you want to navigate to ${t}?

WARNING: This link could potentially be dangerous`)){const n=window.open();if(n){try{n.opener=null}catch{}n.location.href=t}else console.warn("Opening link blocked as opener could not be cleared")}}i.OscLinkProvider=p=c([f(0,l.IBufferService),f(1,l.IOptionsService),f(2,l.IOscLinkService)],p)},6193:(k,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.RenderDebouncer=void 0,i.RenderDebouncer=class{constructor(o,c){this._renderCallback=o,this._coreBrowserService=c,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(o){return this._refreshCallbacks.push(o),this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh())),this._animationFrame}refresh(o,c,f){this._rowCount=f,o=o!==void 0?o:0,c=c!==void 0?c:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,o):o,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,c):c,this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return void this._runRefreshCallbacks();const o=Math.max(this._rowStart,0),c=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(o,c),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(const o of this._refreshCallbacks)o(0);this._refreshCallbacks=[]}}},3236:(k,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Terminal=void 0;const c=o(3614),f=o(3656),a=o(3551),l=o(9042),p=o(3730),S=o(1680),u=o(3107),t=o(5744),n=o(2950),e=o(1296),r=o(428),d=o(4269),g=o(5114),m=o(8934),b=o(3230),v=o(9312),w=o(4725),R=o(6731),B=o(8055),P=o(8969),A=o(8460),N=o(844),q=o(6114),V=o(8437),Q=o(2584),G=o(7399),x=o(5941),T=o(9074),M=o(2585),O=o(5435),F=o(4567),K=o(779);class ee extends P.CoreTerminal{get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}constructor(I={}){super(I),this.browser=q,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this.register(new N.MutableDisposable),this._onCursorMove=this.register(new A.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onKey=this.register(new A.EventEmitter),this.onKey=this._onKey.event,this._onRender=this.register(new A.EventEmitter),this.onRender=this._onRender.event,this._onSelectionChange=this.register(new A.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this.register(new A.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onBell=this.register(new A.EventEmitter),this.onBell=this._onBell.event,this._onFocus=this.register(new A.EventEmitter),this._onBlur=this.register(new A.EventEmitter),this._onA11yCharEmitter=this.register(new A.EventEmitter),this._onA11yTabEmitter=this.register(new A.EventEmitter),this._onWillOpen=this.register(new A.EventEmitter),this._setup(),this._decorationService=this._instantiationService.createInstance(T.DecorationService),this._instantiationService.setService(M.IDecorationService,this._decorationService),this._linkProviderService=this._instantiationService.createInstance(K.LinkProviderService),this._instantiationService.setService(w.ILinkProviderService,this._linkProviderService),this._linkProviderService.registerLinkProvider(this._instantiationService.createInstance(p.OscLinkProvider)),this.register(this._inputHandler.onRequestBell(()=>this._onBell.fire())),this.register(this._inputHandler.onRequestRefreshRows((L,z)=>this.refresh(L,z))),this.register(this._inputHandler.onRequestSendFocus(()=>this._reportFocus())),this.register(this._inputHandler.onRequestReset(()=>this.reset())),this.register(this._inputHandler.onRequestWindowsOptionsReport(L=>this._reportWindowsOptions(L))),this.register(this._inputHandler.onColor(L=>this._handleColorEvent(L))),this.register((0,A.forwardEvent)(this._inputHandler.onCursorMove,this._onCursorMove)),this.register((0,A.forwardEvent)(this._inputHandler.onTitleChange,this._onTitleChange)),this.register((0,A.forwardEvent)(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this.register((0,A.forwardEvent)(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this.register(this._bufferService.onResize(L=>this._afterResize(L.cols,L.rows))),this.register((0,N.toDisposable)(()=>{this._customKeyEventHandler=void 0,this.element?.parentNode?.removeChild(this.element)}))}_handleColorEvent(I){if(this._themeService)for(const L of I){let z,$="";switch(L.index){case 256:z="foreground",$="10";break;case 257:z="background",$="11";break;case 258:z="cursor",$="12";break;default:z="ansi",$="4;"+L.index}switch(L.type){case 0:const X=B.color.toColorRGB(z==="ansi"?this._themeService.colors.ansi[L.index]:this._themeService.colors[z]);this.coreService.triggerDataEvent(`${Q.C0.ESC}]${$};${(0,x.toRgbString)(X)}${Q.C1_ESCAPED.ST}`);break;case 1:if(z==="ansi")this._themeService.modifyColors(J=>J.ansi[L.index]=B.channels.toColor(...L.color));else{const J=z;this._themeService.modifyColors(oe=>oe[J]=B.channels.toColor(...L.color))}break;case 2:this._themeService.restoreColor(L.index)}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(I){I?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(F.AccessibilityManager,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(I){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(Q.C0.ESC+"[I"),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){return this.textarea?.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(Q.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;const I=this.buffer.ybase+this.buffer.y,L=this.buffer.lines.get(I);if(!L)return;const z=Math.min(this.buffer.x,this.cols-1),$=this._renderService.dimensions.css.cell.height,X=L.getWidth(z),J=this._renderService.dimensions.css.cell.width*X,oe=this.buffer.y*this._renderService.dimensions.css.cell.height,_e=z*this._renderService.dimensions.css.cell.width;this.textarea.style.left=_e+"px",this.textarea.style.top=oe+"px",this.textarea.style.width=J+"px",this.textarea.style.height=$+"px",this.textarea.style.lineHeight=$+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this.register((0,f.addDisposableDomListener)(this.element,"copy",L=>{this.hasSelection()&&(0,c.copyHandler)(L,this._selectionService)}));const I=L=>(0,c.handlePasteEvent)(L,this.textarea,this.coreService,this.optionsService);this.register((0,f.addDisposableDomListener)(this.textarea,"paste",I)),this.register((0,f.addDisposableDomListener)(this.element,"paste",I)),q.isFirefox?this.register((0,f.addDisposableDomListener)(this.element,"mousedown",L=>{L.button===2&&(0,c.rightClickHandler)(L,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})):this.register((0,f.addDisposableDomListener)(this.element,"contextmenu",L=>{(0,c.rightClickHandler)(L,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})),q.isLinux&&this.register((0,f.addDisposableDomListener)(this.element,"auxclick",L=>{L.button===1&&(0,c.moveTextAreaUnderMouseCursor)(L,this.textarea,this.screenElement)}))}_bindKeys(){this.register((0,f.addDisposableDomListener)(this.textarea,"keyup",I=>this._keyUp(I),!0)),this.register((0,f.addDisposableDomListener)(this.textarea,"keydown",I=>this._keyDown(I),!0)),this.register((0,f.addDisposableDomListener)(this.textarea,"keypress",I=>this._keyPress(I),!0)),this.register((0,f.addDisposableDomListener)(this.textarea,"compositionstart",()=>this._compositionHelper.compositionstart())),this.register((0,f.addDisposableDomListener)(this.textarea,"compositionupdate",I=>this._compositionHelper.compositionupdate(I))),this.register((0,f.addDisposableDomListener)(this.textarea,"compositionend",()=>this._compositionHelper.compositionend())),this.register((0,f.addDisposableDomListener)(this.textarea,"input",I=>this._inputEvent(I),!0)),this.register(this.onRender(()=>this._compositionHelper.updateCompositionElements()))}open(I){if(!I)throw new Error("Terminal requires a parent element.");if(I.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this.element?.ownerDocument.defaultView&&this._coreBrowserService)return void(this.element.ownerDocument.defaultView!==this._coreBrowserService.window&&(this._coreBrowserService.window=this.element.ownerDocument.defaultView));this._document=I.ownerDocument,this.options.documentOverride&&this.options.documentOverride instanceof Document&&(this._document=this.optionsService.rawOptions.documentOverride),this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),I.appendChild(this.element);const L=this._document.createDocumentFragment();this._viewportElement=this._document.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),L.appendChild(this._viewportElement),this._viewportScrollArea=this._document.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=this._document.createElement("div"),this.screenElement.classList.add("xterm-screen"),this.register((0,f.addDisposableDomListener)(this.screenElement,"mousemove",z=>this.updateCursorStyle(z))),this._helperContainer=this._document.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),L.appendChild(this.screenElement),this.textarea=this._document.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",l.promptLabel),q.isChromeOS||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._coreBrowserService=this.register(this._instantiationService.createInstance(g.CoreBrowserService,this.textarea,I.ownerDocument.defaultView??window,this._document??typeof window<"u"?window.document:null)),this._instantiationService.setService(w.ICoreBrowserService,this._coreBrowserService),this.register((0,f.addDisposableDomListener)(this.textarea,"focus",z=>this._handleTextAreaFocus(z))),this.register((0,f.addDisposableDomListener)(this.textarea,"blur",()=>this._handleTextAreaBlur())),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(r.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(w.ICharSizeService,this._charSizeService),this._themeService=this._instantiationService.createInstance(R.ThemeService),this._instantiationService.setService(w.IThemeService,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(d.CharacterJoinerService),this._instantiationService.setService(w.ICharacterJoinerService,this._characterJoinerService),this._renderService=this.register(this._instantiationService.createInstance(b.RenderService,this.rows,this.screenElement)),this._instantiationService.setService(w.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange(z=>this._onRender.fire(z))),this.onResize(z=>this._renderService.resize(z.cols,z.rows)),this._compositionView=this._document.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(n.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this._mouseService=this._instantiationService.createInstance(m.MouseService),this._instantiationService.setService(w.IMouseService,this._mouseService),this.linkifier=this.register(this._instantiationService.createInstance(a.Linkifier,this.screenElement)),this.element.appendChild(L);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this.viewport=this._instantiationService.createInstance(S.Viewport,this._viewportElement,this._viewportScrollArea),this.viewport.onRequestScrollLines(z=>this.scrollLines(z.amount,z.suppressScrollEvent,1)),this.register(this._inputHandler.onRequestSyncScrollBar(()=>this.viewport.syncScrollArea())),this.register(this.viewport),this.register(this.onCursorMove(()=>{this._renderService.handleCursorMove(),this._syncTextArea()})),this.register(this.onResize(()=>this._renderService.handleResize(this.cols,this.rows))),this.register(this.onBlur(()=>this._renderService.handleBlur())),this.register(this.onFocus(()=>this._renderService.handleFocus())),this.register(this._renderService.onDimensionsChange(()=>this.viewport.syncScrollArea())),this._selectionService=this.register(this._instantiationService.createInstance(v.SelectionService,this.element,this.screenElement,this.linkifier)),this._instantiationService.setService(w.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines(z=>this.scrollLines(z.amount,z.suppressScrollEvent))),this.register(this._selectionService.onSelectionChange(()=>this._onSelectionChange.fire())),this.register(this._selectionService.onRequestRedraw(z=>this._renderService.handleSelectionChanged(z.start,z.end,z.columnSelectMode))),this.register(this._selectionService.onLinuxMouseSelection(z=>{this.textarea.value=z,this.textarea.focus(),this.textarea.select()})),this.register(this._onScroll.event(z=>{this.viewport.syncScrollArea(),this._selectionService.refresh()})),this.register((0,f.addDisposableDomListener)(this._viewportElement,"scroll",()=>this._selectionService.refresh())),this.register(this._instantiationService.createInstance(u.BufferDecorationRenderer,this.screenElement)),this.register((0,f.addDisposableDomListener)(this.element,"mousedown",z=>this._selectionService.handleMouseDown(z))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(F.AccessibilityManager,this)),this.register(this.optionsService.onSpecificOptionChange("screenReaderMode",z=>this._handleScreenReaderModeOptionChange(z))),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(t.OverviewRulerRenderer,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRulerWidth",z=>{!this._overviewRulerRenderer&&z&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(t.OverviewRulerRenderer,this._viewportElement,this.screenElement)))}),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(e.DomRenderer,this,this._document,this.element,this.screenElement,this._viewportElement,this._helperContainer,this.linkifier)}bindMouse(){const I=this,L=this.element;function z(J){const oe=I._mouseService.getMouseReportCoords(J,I.screenElement);if(!oe)return!1;let _e,ve;switch(J.overrideType||J.type){case"mousemove":ve=32,J.buttons===void 0?(_e=3,J.button!==void 0&&(_e=J.button<3?J.button:3)):_e=1&J.buttons?0:4&J.buttons?1:2&J.buttons?2:3;break;case"mouseup":ve=0,_e=J.button<3?J.button:3;break;case"mousedown":ve=1,_e=J.button<3?J.button:3;break;case"wheel":if(I._customWheelEventHandler&&I._customWheelEventHandler(J)===!1||I.viewport.getLinesScrolled(J)===0)return!1;ve=J.deltaY<0?0:1,_e=4;break;default:return!1}return!(ve===void 0||_e===void 0||_e>4)&&I.coreMouseService.triggerMouseEvent({col:oe.col,row:oe.row,x:oe.x,y:oe.y,button:_e,action:ve,ctrl:J.ctrlKey,alt:J.altKey,shift:J.shiftKey})}const $={mouseup:null,wheel:null,mousedrag:null,mousemove:null},X={mouseup:J=>(z(J),J.buttons||(this._document.removeEventListener("mouseup",$.mouseup),$.mousedrag&&this._document.removeEventListener("mousemove",$.mousedrag)),this.cancel(J)),wheel:J=>(z(J),this.cancel(J,!0)),mousedrag:J=>{J.buttons&&z(J)},mousemove:J=>{J.buttons||z(J)}};this.register(this.coreMouseService.onProtocolChange(J=>{J?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(J)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),8&J?$.mousemove||(L.addEventListener("mousemove",X.mousemove),$.mousemove=X.mousemove):(L.removeEventListener("mousemove",$.mousemove),$.mousemove=null),16&J?$.wheel||(L.addEventListener("wheel",X.wheel,{passive:!1}),$.wheel=X.wheel):(L.removeEventListener("wheel",$.wheel),$.wheel=null),2&J?$.mouseup||($.mouseup=X.mouseup):(this._document.removeEventListener("mouseup",$.mouseup),$.mouseup=null),4&J?$.mousedrag||($.mousedrag=X.mousedrag):(this._document.removeEventListener("mousemove",$.mousedrag),$.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,f.addDisposableDomListener)(L,"mousedown",J=>{if(J.preventDefault(),this.focus(),this.coreMouseService.areMouseEventsActive&&!this._selectionService.shouldForceSelection(J))return z(J),$.mouseup&&this._document.addEventListener("mouseup",$.mouseup),$.mousedrag&&this._document.addEventListener("mousemove",$.mousedrag),this.cancel(J)})),this.register((0,f.addDisposableDomListener)(L,"wheel",J=>{if(!$.wheel){if(this._customWheelEventHandler&&this._customWheelEventHandler(J)===!1)return!1;if(!this.buffer.hasScrollback){const oe=this.viewport.getLinesScrolled(J);if(oe===0)return;const _e=Q.C0.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(J.deltaY<0?"A":"B");let ve="";for(let Re=0;Re<Math.abs(oe);Re++)ve+=_e;return this.coreService.triggerDataEvent(ve,!0),this.cancel(J,!0)}return this.viewport.handleWheel(J)?this.cancel(J):void 0}},{passive:!1})),this.register((0,f.addDisposableDomListener)(L,"touchstart",J=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchStart(J),this.cancel(J)},{passive:!0})),this.register((0,f.addDisposableDomListener)(L,"touchmove",J=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchMove(J)?void 0:this.cancel(J)},{passive:!1}))}refresh(I,L){this._renderService?.refreshRows(I,L)}updateCursorStyle(I){this._selectionService?.shouldColumnSelect(I)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(I,L,z=0){z===1?(super.scrollLines(I,L,z),this.refresh(0,this.rows-1)):this.viewport?.scrollLines(I)}paste(I){(0,c.paste)(I,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(I){this._customKeyEventHandler=I}attachCustomWheelEventHandler(I){this._customWheelEventHandler=I}registerLinkProvider(I){return this._linkProviderService.registerLinkProvider(I)}registerCharacterJoiner(I){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");const L=this._characterJoinerService.register(I);return this.refresh(0,this.rows-1),L}deregisterCharacterJoiner(I){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(I)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(I){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+I)}registerDecoration(I){return this._decorationService.registerDecoration(I)}hasSelection(){return!!this._selectionService&&this._selectionService.hasSelection}select(I,L,z){this._selectionService.setSelection(I,L,z)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(this._selectionService&&this._selectionService.hasSelection)return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){this._selectionService?.clearSelection()}selectAll(){this._selectionService?.selectAll()}selectLines(I,L){this._selectionService?.selectLines(I,L)}_keyDown(I){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(I)===!1)return!1;const L=this.browser.isMac&&this.options.macOptionIsMeta&&I.altKey;if(!L&&!this._compositionHelper.keydown(I))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;L||I.key!=="Dead"&&I.key!=="AltGraph"||(this._unprocessedDeadKey=!0);const z=(0,G.evaluateKeyboardEvent)(I,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(I),z.type===3||z.type===2){const $=this.rows-1;return this.scrollLines(z.type===2?-$:$),this.cancel(I,!0)}return z.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,I)||(z.cancel&&this.cancel(I,!0),!z.key||!!(I.key&&!I.ctrlKey&&!I.altKey&&!I.metaKey&&I.key.length===1&&I.key.charCodeAt(0)>=65&&I.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(z.key!==Q.C0.ETX&&z.key!==Q.C0.CR||(this.textarea.value=""),this._onKey.fire({key:z.key,domEvent:I}),this._showCursor(),this.coreService.triggerDataEvent(z.key,!0),!this.optionsService.rawOptions.screenReaderMode||I.altKey||I.ctrlKey?this.cancel(I,!0):void(this._keyDownHandled=!0))))}_isThirdLevelShift(I,L){const z=I.isMac&&!this.options.macOptionIsMeta&&L.altKey&&!L.ctrlKey&&!L.metaKey||I.isWindows&&L.altKey&&L.ctrlKey&&!L.metaKey||I.isWindows&&L.getModifierState("AltGraph");return L.type==="keypress"?z:z&&(!L.keyCode||L.keyCode>47)}_keyUp(I){this._keyDownSeen=!1,this._customKeyEventHandler&&this._customKeyEventHandler(I)===!1||(function(L){return L.keyCode===16||L.keyCode===17||L.keyCode===18}(I)||this.focus(),this.updateCursorStyle(I),this._keyPressHandled=!1)}_keyPress(I){let L;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(I)===!1)return!1;if(this.cancel(I),I.charCode)L=I.charCode;else if(I.which===null||I.which===void 0)L=I.keyCode;else{if(I.which===0||I.charCode===0)return!1;L=I.which}return!(!L||(I.altKey||I.ctrlKey||I.metaKey)&&!this._isThirdLevelShift(this.browser,I)||(L=String.fromCharCode(L),this._onKey.fire({key:L,domEvent:I}),this._showCursor(),this.coreService.triggerDataEvent(L,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))}_inputEvent(I){if(I.data&&I.inputType==="insertText"&&(!I.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;const L=I.data;return this.coreService.triggerDataEvent(L,!0),this.cancel(I),!0}return!1}resize(I,L){I!==this.cols||L!==this.rows?super.resize(I,L):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()}_afterResize(I,L){this._charSizeService?.measure(),this.viewport?.syncScrollArea(!0)}clear(){if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let I=1;I<this.rows;I++)this.buffer.lines.push(this.buffer.getBlankLine(V.DEFAULT_ATTR_DATA));this._onScroll.fire({position:this.buffer.ydisp,source:0}),this.viewport?.reset(),this.refresh(0,this.rows-1)}}reset(){this.options.rows=this.rows,this.options.cols=this.cols;const I=this._customKeyEventHandler;this._setup(),super.reset(),this._selectionService?.reset(),this._decorationService.reset(),this.viewport?.reset(),this._customKeyEventHandler=I,this.refresh(0,this.rows-1)}clearTextureAtlas(){this._renderService?.clearTextureAtlas()}_reportFocus(){this.element?.classList.contains("focus")?this.coreService.triggerDataEvent(Q.C0.ESC+"[I"):this.coreService.triggerDataEvent(Q.C0.ESC+"[O")}_reportWindowsOptions(I){if(this._renderService)switch(I){case O.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:const L=this._renderService.dimensions.css.canvas.width.toFixed(0),z=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${Q.C0.ESC}[4;${z};${L}t`);break;case O.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:const $=this._renderService.dimensions.css.cell.width.toFixed(0),X=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${Q.C0.ESC}[6;${X};${$}t`)}}cancel(I,L){if(this.options.cancelEvents||L)return I.preventDefault(),I.stopPropagation(),!1}}i.Terminal=ee},9924:(k,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.TimeBasedDebouncer=void 0,i.TimeBasedDebouncer=class{constructor(o,c=1e3){this._renderCallback=o,this._debounceThresholdMS=c,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(o,c,f){this._rowCount=f,o=o!==void 0?o:0,c=c!==void 0?c:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,o):o,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,c):c;const a=Date.now();if(a-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=a,this._innerRefresh();else if(!this._additionalRefreshRequested){const l=a-this._lastRefreshMs,p=this._debounceThresholdMS-l;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(()=>{this._lastRefreshMs=Date.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0},p)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;const o=Math.max(this._rowStart,0),c=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(o,c)}}},1680:function(k,i,o){var c=this&&this.__decorate||function(n,e,r,d){var g,m=arguments.length,b=m<3?e:d===null?d=Object.getOwnPropertyDescriptor(e,r):d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(n,e,r,d);else for(var v=n.length-1;v>=0;v--)(g=n[v])&&(b=(m<3?g(b):m>3?g(e,r,b):g(e,r))||b);return m>3&&b&&Object.defineProperty(e,r,b),b},f=this&&this.__param||function(n,e){return function(r,d){e(r,d,n)}};Object.defineProperty(i,"__esModule",{value:!0}),i.Viewport=void 0;const a=o(3656),l=o(4725),p=o(8460),S=o(844),u=o(2585);let t=i.Viewport=class extends S.Disposable{constructor(n,e,r,d,g,m,b,v){super(),this._viewportElement=n,this._scrollArea=e,this._bufferService=r,this._optionsService=d,this._charSizeService=g,this._renderService=m,this._coreBrowserService=b,this.scrollBarWidth=0,this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._wheelPartialScroll=0,this._refreshAnimationFrame=null,this._ignoreNextScrollEvent=!1,this._smoothScrollState={startTime:0,origin:-1,target:-1},this._onRequestScrollLines=this.register(new p.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this.register((0,a.addDisposableDomListener)(this._viewportElement,"scroll",this._handleScroll.bind(this))),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(w=>this._activeBuffer=w.activeBuffer)),this._renderDimensions=this._renderService.dimensions,this.register(this._renderService.onDimensionsChange(w=>this._renderDimensions=w)),this._handleThemeChange(v.colors),this.register(v.onChangeColors(w=>this._handleThemeChange(w))),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.syncScrollArea())),setTimeout(()=>this.syncScrollArea())}_handleThemeChange(n){this._viewportElement.style.backgroundColor=n.background.css}reset(){this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._coreBrowserService.window.requestAnimationFrame(()=>this.syncScrollArea())}_refresh(n){if(n)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&this._coreBrowserService.window.cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderDimensions.device.cell.height/this._coreBrowserService.dpr,this._currentDeviceCellHeight=this._renderDimensions.device.cell.height,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;const e=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderDimensions.css.canvas.height);this._lastRecordedBufferHeight!==e&&(this._lastRecordedBufferHeight=e,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}const n=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==n&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=n),this._refreshAnimationFrame=null}syncScrollArea(n=!1){if(this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(n);this._lastRecordedViewportHeight===this._renderService.dimensions.css.canvas.height&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.device.cell.height===this._currentDeviceCellHeight||this._refresh(n)}_handleScroll(n){if(this._lastScrollTop=this._viewportElement.scrollTop,!this._viewportElement.offsetParent)return;if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._onRequestScrollLines.fire({amount:0,suppressScrollEvent:!0});const e=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._onRequestScrollLines.fire({amount:e,suppressScrollEvent:!0})}_smoothScroll(){if(this._isDisposed||this._smoothScrollState.origin===-1||this._smoothScrollState.target===-1)return;const n=this._smoothScrollPercent();this._viewportElement.scrollTop=this._smoothScrollState.origin+Math.round(n*(this._smoothScrollState.target-this._smoothScrollState.origin)),n<1?this._coreBrowserService.window.requestAnimationFrame(()=>this._smoothScroll()):this._clearSmoothScrollState()}_smoothScrollPercent(){return this._optionsService.rawOptions.smoothScrollDuration&&this._smoothScrollState.startTime?Math.max(Math.min((Date.now()-this._smoothScrollState.startTime)/this._optionsService.rawOptions.smoothScrollDuration,1),0):1}_clearSmoothScrollState(){this._smoothScrollState.startTime=0,this._smoothScrollState.origin=-1,this._smoothScrollState.target=-1}_bubbleScroll(n,e){const r=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(e<0&&this._viewportElement.scrollTop!==0||e>0&&r<this._lastRecordedBufferHeight)||(n.cancelable&&n.preventDefault(),!1)}handleWheel(n){const e=this._getPixelsScrolled(n);return e!==0&&(this._optionsService.rawOptions.smoothScrollDuration?(this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target===-1?this._smoothScrollState.target=this._viewportElement.scrollTop+e:this._smoothScrollState.target+=e,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()):this._viewportElement.scrollTop+=e,this._bubbleScroll(n,e))}scrollLines(n){if(n!==0)if(this._optionsService.rawOptions.smoothScrollDuration){const e=n*this._currentRowHeight;this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target=this._smoothScrollState.origin+e,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()}else this._onRequestScrollLines.fire({amount:n,suppressScrollEvent:!1})}_getPixelsScrolled(n){if(n.deltaY===0||n.shiftKey)return 0;let e=this._applyScrollModifier(n.deltaY,n);return n.deltaMode===WheelEvent.DOM_DELTA_LINE?e*=this._currentRowHeight:n.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(e*=this._currentRowHeight*this._bufferService.rows),e}getBufferElements(n,e){let r,d="";const g=[],m=e??this._bufferService.buffer.lines.length,b=this._bufferService.buffer.lines;for(let v=n;v<m;v++){const w=b.get(v);if(!w)continue;const R=b.get(v+1)?.isWrapped;if(d+=w.translateToString(!R),!R||v===b.length-1){const B=document.createElement("div");B.textContent=d,g.push(B),d.length>0&&(r=B),d=""}}return{bufferElements:g,cursorElement:r}}getLinesScrolled(n){if(n.deltaY===0||n.shiftKey)return 0;let e=this._applyScrollModifier(n.deltaY,n);return n.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(e/=this._currentRowHeight+0,this._wheelPartialScroll+=e,e=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):n.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(e*=this._bufferService.rows),e}_applyScrollModifier(n,e){const r=this._optionsService.rawOptions.fastScrollModifier;return r==="alt"&&e.altKey||r==="ctrl"&&e.ctrlKey||r==="shift"&&e.shiftKey?n*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:n*this._optionsService.rawOptions.scrollSensitivity}handleTouchStart(n){this._lastTouchY=n.touches[0].pageY}handleTouchMove(n){const e=this._lastTouchY-n.touches[0].pageY;return this._lastTouchY=n.touches[0].pageY,e!==0&&(this._viewportElement.scrollTop+=e,this._bubbleScroll(n,e))}};i.Viewport=t=c([f(2,u.IBufferService),f(3,u.IOptionsService),f(4,l.ICharSizeService),f(5,l.IRenderService),f(6,l.ICoreBrowserService),f(7,l.IThemeService)],t)},3107:function(k,i,o){var c=this&&this.__decorate||function(u,t,n,e){var r,d=arguments.length,g=d<3?t:e===null?e=Object.getOwnPropertyDescriptor(t,n):e;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(u,t,n,e);else for(var m=u.length-1;m>=0;m--)(r=u[m])&&(g=(d<3?r(g):d>3?r(t,n,g):r(t,n))||g);return d>3&&g&&Object.defineProperty(t,n,g),g},f=this&&this.__param||function(u,t){return function(n,e){t(n,e,u)}};Object.defineProperty(i,"__esModule",{value:!0}),i.BufferDecorationRenderer=void 0;const a=o(4725),l=o(844),p=o(2585);let S=i.BufferDecorationRenderer=class extends l.Disposable{constructor(u,t,n,e,r){super(),this._screenElement=u,this._bufferService=t,this._coreBrowserService=n,this._decorationService=e,this._renderService=r,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this.register(this._renderService.onRenderedViewportChange(()=>this._doRefreshDecorations())),this.register(this._renderService.onDimensionsChange(()=>{this._dimensionsChanged=!0,this._queueRefresh()})),this.register(this._coreBrowserService.onDprChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt})),this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh())),this.register(this._decorationService.onDecorationRemoved(d=>this._removeDecoration(d))),this.register((0,l.toDisposable)(()=>{this._container.remove(),this._decorationElements.clear()}))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback(()=>{this._doRefreshDecorations(),this._animationFrame=void 0}))}_doRefreshDecorations(){for(const u of this._decorationService.decorations)this._renderDecoration(u);this._dimensionsChanged=!1}_renderDecoration(u){this._refreshStyle(u),this._dimensionsChanged&&this._refreshXPosition(u)}_createElement(u){const t=this._coreBrowserService.mainDocument.createElement("div");t.classList.add("xterm-decoration"),t.classList.toggle("xterm-decoration-top-layer",u?.options?.layer==="top"),t.style.width=`${Math.round((u.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,t.style.height=(u.options.height||1)*this._renderService.dimensions.css.cell.height+"px",t.style.top=(u.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height+"px",t.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;const n=u.options.x??0;return n&&n>this._bufferService.cols&&(t.style.display="none"),this._refreshXPosition(u,t),t}_refreshStyle(u){const t=u.marker.line-this._bufferService.buffers.active.ydisp;if(t<0||t>=this._bufferService.rows)u.element&&(u.element.style.display="none",u.onRenderEmitter.fire(u.element));else{let n=this._decorationElements.get(u);n||(n=this._createElement(u),u.element=n,this._decorationElements.set(u,n),this._container.appendChild(n),u.onDispose(()=>{this._decorationElements.delete(u),n.remove()})),n.style.top=t*this._renderService.dimensions.css.cell.height+"px",n.style.display=this._altBufferIsActive?"none":"block",u.onRenderEmitter.fire(n)}}_refreshXPosition(u,t=u.element){if(!t)return;const n=u.options.x??0;(u.options.anchor||"left")==="right"?t.style.right=n?n*this._renderService.dimensions.css.cell.width+"px":"":t.style.left=n?n*this._renderService.dimensions.css.cell.width+"px":""}_removeDecoration(u){this._decorationElements.get(u)?.remove(),this._decorationElements.delete(u),u.dispose()}};i.BufferDecorationRenderer=S=c([f(1,p.IBufferService),f(2,a.ICoreBrowserService),f(3,p.IDecorationService),f(4,a.IRenderService)],S)},5871:(k,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ColorZoneStore=void 0,i.ColorZoneStore=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(o){if(o.options.overviewRulerOptions){for(const c of this._zones)if(c.color===o.options.overviewRulerOptions.color&&c.position===o.options.overviewRulerOptions.position){if(this._lineIntersectsZone(c,o.marker.line))return;if(this._lineAdjacentToZone(c,o.marker.line,o.options.overviewRulerOptions.position))return void this._addLineToZone(c,o.marker.line)}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=o.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=o.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=o.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=o.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:o.options.overviewRulerOptions.color,position:o.options.overviewRulerOptions.position,startBufferLine:o.marker.line,endBufferLine:o.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(o){this._linePadding=o}_lineIntersectsZone(o,c){return c>=o.startBufferLine&&c<=o.endBufferLine}_lineAdjacentToZone(o,c,f){return c>=o.startBufferLine-this._linePadding[f||"full"]&&c<=o.endBufferLine+this._linePadding[f||"full"]}_addLineToZone(o,c){o.startBufferLine=Math.min(o.startBufferLine,c),o.endBufferLine=Math.max(o.endBufferLine,c)}}},5744:function(k,i,o){var c=this&&this.__decorate||function(r,d,g,m){var b,v=arguments.length,w=v<3?d:m===null?m=Object.getOwnPropertyDescriptor(d,g):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(r,d,g,m);else for(var R=r.length-1;R>=0;R--)(b=r[R])&&(w=(v<3?b(w):v>3?b(d,g,w):b(d,g))||w);return v>3&&w&&Object.defineProperty(d,g,w),w},f=this&&this.__param||function(r,d){return function(g,m){d(g,m,r)}};Object.defineProperty(i,"__esModule",{value:!0}),i.OverviewRulerRenderer=void 0;const a=o(5871),l=o(4725),p=o(844),S=o(2585),u={full:0,left:0,center:0,right:0},t={full:0,left:0,center:0,right:0},n={full:0,left:0,center:0,right:0};let e=i.OverviewRulerRenderer=class extends p.Disposable{get _width(){return this._optionsService.options.overviewRulerWidth||0}constructor(r,d,g,m,b,v,w){super(),this._viewportElement=r,this._screenElement=d,this._bufferService=g,this._decorationService=m,this._renderService=b,this._optionsService=v,this._coreBrowserService=w,this._colorZoneStore=new a.ColorZoneStore,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=this._coreBrowserService.mainDocument.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),this._viewportElement.parentElement?.insertBefore(this._canvas,this._viewportElement);const R=this._canvas.getContext("2d");if(!R)throw new Error("Ctx cannot be null");this._ctx=R,this._registerDecorationListeners(),this._registerBufferChangeListeners(),this._registerDimensionChangeListeners(),this.register((0,p.toDisposable)(()=>{this._canvas?.remove()}))}_registerDecorationListeners(){this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh(void 0,!0))),this.register(this._decorationService.onDecorationRemoved(()=>this._queueRefresh(void 0,!0)))}_registerBufferChangeListeners(){this.register(this._renderService.onRenderedViewportChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"})),this.register(this._bufferService.onScroll(()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())}))}_registerDimensionChangeListeners(){this.register(this._renderService.onRender(()=>{this._containerHeight&&this._containerHeight===this._screenElement.clientHeight||(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)})),this.register(this._optionsService.onSpecificOptionChange("overviewRulerWidth",()=>this._queueRefresh(!0))),this.register(this._coreBrowserService.onDprChange(()=>this._queueRefresh(!0))),this._queueRefresh(!0)}_refreshDrawConstants(){const r=Math.floor(this._canvas.width/3),d=Math.ceil(this._canvas.width/3);t.full=this._canvas.width,t.left=r,t.center=d,t.right=r,this._refreshDrawHeightConstants(),n.full=0,n.left=0,n.center=t.left,n.right=t.left+t.center}_refreshDrawHeightConstants(){u.full=Math.round(2*this._coreBrowserService.dpr);const r=this._canvas.height/this._bufferService.buffer.lines.length,d=Math.round(Math.max(Math.min(r,12),6)*this._coreBrowserService.dpr);u.left=d,u.center=d,u.right=d}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*u.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*u.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*u.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*u.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowserService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowserService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(const d of this._decorationService.decorations)this._colorZoneStore.addDecoration(d);this._ctx.lineWidth=1;const r=this._colorZoneStore.zones;for(const d of r)d.position!=="full"&&this._renderColorZone(d);for(const d of r)d.position==="full"&&this._renderColorZone(d);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderColorZone(r){this._ctx.fillStyle=r.color,this._ctx.fillRect(n[r.position||"full"],Math.round((this._canvas.height-1)*(r.startBufferLine/this._bufferService.buffers.active.lines.length)-u[r.position||"full"]/2),t[r.position||"full"],Math.round((this._canvas.height-1)*((r.endBufferLine-r.startBufferLine)/this._bufferService.buffers.active.lines.length)+u[r.position||"full"]))}_queueRefresh(r,d){this._shouldUpdateDimensions=r||this._shouldUpdateDimensions,this._shouldUpdateAnchor=d||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._refreshDecorations(),this._animationFrame=void 0}))}};i.OverviewRulerRenderer=e=c([f(2,S.IBufferService),f(3,S.IDecorationService),f(4,l.IRenderService),f(5,S.IOptionsService),f(6,l.ICoreBrowserService)],e)},2950:function(k,i,o){var c=this&&this.__decorate||function(u,t,n,e){var r,d=arguments.length,g=d<3?t:e===null?e=Object.getOwnPropertyDescriptor(t,n):e;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(u,t,n,e);else for(var m=u.length-1;m>=0;m--)(r=u[m])&&(g=(d<3?r(g):d>3?r(t,n,g):r(t,n))||g);return d>3&&g&&Object.defineProperty(t,n,g),g},f=this&&this.__param||function(u,t){return function(n,e){t(n,e,u)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CompositionHelper=void 0;const a=o(4725),l=o(2585),p=o(2584);let S=i.CompositionHelper=class{get isComposing(){return this._isComposing}constructor(u,t,n,e,r,d){this._textarea=u,this._compositionView=t,this._bufferService=n,this._optionsService=e,this._coreService=r,this._renderService=d,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(u){this._compositionView.textContent=u.data,this.updateCompositionElements(),setTimeout(()=>{this._compositionPosition.end=this._textarea.value.length},0)}compositionend(){this._finalizeComposition(!0)}keydown(u){if(this._isComposing||this._isSendingComposition){if(u.keyCode===229||u.keyCode===16||u.keyCode===17||u.keyCode===18)return!1;this._finalizeComposition(!1)}return u.keyCode!==229||(this._handleAnyTextareaChanges(),!1)}_finalizeComposition(u){if(this._compositionView.classList.remove("active"),this._isComposing=!1,u){const t={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(()=>{if(this._isSendingComposition){let n;this._isSendingComposition=!1,t.start+=this._dataAlreadySent.length,n=this._isComposing?this._textarea.value.substring(t.start,t.end):this._textarea.value.substring(t.start),n.length>0&&this._coreService.triggerDataEvent(n,!0)}},0)}else{this._isSendingComposition=!1;const t=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(t,!0)}}_handleAnyTextareaChanges(){const u=this._textarea.value;setTimeout(()=>{if(!this._isComposing){const t=this._textarea.value,n=t.replace(u,"");this._dataAlreadySent=n,t.length>u.length?this._coreService.triggerDataEvent(n,!0):t.length<u.length?this._coreService.triggerDataEvent(`${p.C0.DEL}`,!0):t.length===u.length&&t!==u&&this._coreService.triggerDataEvent(t,!0)}},0)}updateCompositionElements(u){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){const t=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),n=this._renderService.dimensions.css.cell.height,e=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,r=t*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=r+"px",this._compositionView.style.top=e+"px",this._compositionView.style.height=n+"px",this._compositionView.style.lineHeight=n+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";const d=this._compositionView.getBoundingClientRect();this._textarea.style.left=r+"px",this._textarea.style.top=e+"px",this._textarea.style.width=Math.max(d.width,1)+"px",this._textarea.style.height=Math.max(d.height,1)+"px",this._textarea.style.lineHeight=d.height+"px"}u||setTimeout(()=>this.updateCompositionElements(!0),0)}}};i.CompositionHelper=S=c([f(2,l.IBufferService),f(3,l.IOptionsService),f(4,l.ICoreService),f(5,a.IRenderService)],S)},9806:(k,i)=>{function o(c,f,a){const l=a.getBoundingClientRect(),p=c.getComputedStyle(a),S=parseInt(p.getPropertyValue("padding-left")),u=parseInt(p.getPropertyValue("padding-top"));return[f.clientX-l.left-S,f.clientY-l.top-u]}Object.defineProperty(i,"__esModule",{value:!0}),i.getCoords=i.getCoordsRelativeToElement=void 0,i.getCoordsRelativeToElement=o,i.getCoords=function(c,f,a,l,p,S,u,t,n){if(!S)return;const e=o(c,f,a);return e?(e[0]=Math.ceil((e[0]+(n?u/2:0))/u),e[1]=Math.ceil(e[1]/t),e[0]=Math.min(Math.max(e[0],1),l+(n?1:0)),e[1]=Math.min(Math.max(e[1],1),p),e):void 0}},9504:(k,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.moveToCellSequence=void 0;const c=o(2584);function f(t,n,e,r){const d=t-a(t,e),g=n-a(n,e),m=Math.abs(d-g)-function(b,v,w){let R=0;const B=b-a(b,w),P=v-a(v,w);for(let A=0;A<Math.abs(B-P);A++){const N=l(b,v)==="A"?-1:1;w.buffer.lines.get(B+N*A)?.isWrapped&&R++}return R}(t,n,e);return u(m,S(l(t,n),r))}function a(t,n){let e=0,r=n.buffer.lines.get(t),d=r?.isWrapped;for(;d&&t>=0&&t<n.rows;)e++,r=n.buffer.lines.get(--t),d=r?.isWrapped;return e}function l(t,n){return t>n?"A":"B"}function p(t,n,e,r,d,g){let m=t,b=n,v="";for(;m!==e||b!==r;)m+=d?1:-1,d&&m>g.cols-1?(v+=g.buffer.translateBufferLineToString(b,!1,t,m),m=0,t=0,b++):!d&&m<0&&(v+=g.buffer.translateBufferLineToString(b,!1,0,t+1),m=g.cols-1,t=m,b--);return v+g.buffer.translateBufferLineToString(b,!1,t,m)}function S(t,n){const e=n?"O":"[";return c.C0.ESC+e+t}function u(t,n){t=Math.floor(t);let e="";for(let r=0;r<t;r++)e+=n;return e}i.moveToCellSequence=function(t,n,e,r){const d=e.buffer.x,g=e.buffer.y;if(!e.buffer.hasScrollback)return function(v,w,R,B,P,A){return f(w,B,P,A).length===0?"":u(p(v,w,v,w-a(w,P),!1,P).length,S("D",A))}(d,g,0,n,e,r)+f(g,n,e,r)+function(v,w,R,B,P,A){let N;N=f(w,B,P,A).length>0?B-a(B,P):w;const q=B,V=function(Q,G,x,T,M,O){let F;return F=f(x,T,M,O).length>0?T-a(T,M):G,Q<x&&F<=T||Q>=x&&F<T?"C":"D"}(v,w,R,B,P,A);return u(p(v,N,R,q,V==="C",P).length,S(V,A))}(d,g,t,n,e,r);let m;if(g===n)return m=d>t?"D":"C",u(Math.abs(d-t),S(m,r));m=g>n?"D":"C";const b=Math.abs(g-n);return u(function(v,w){return w.cols-v}(g>n?t:d,e)+(b-1)*e.cols+1+((g>n?d:t)-1),S(m,r))}},1296:function(k,i,o){var c=this&&this.__decorate||function(A,N,q,V){var Q,G=arguments.length,x=G<3?N:V===null?V=Object.getOwnPropertyDescriptor(N,q):V;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(A,N,q,V);else for(var T=A.length-1;T>=0;T--)(Q=A[T])&&(x=(G<3?Q(x):G>3?Q(N,q,x):Q(N,q))||x);return G>3&&x&&Object.defineProperty(N,q,x),x},f=this&&this.__param||function(A,N){return function(q,V){N(q,V,A)}};Object.defineProperty(i,"__esModule",{value:!0}),i.DomRenderer=void 0;const a=o(3787),l=o(2550),p=o(2223),S=o(6171),u=o(6052),t=o(4725),n=o(8055),e=o(8460),r=o(844),d=o(2585),g="xterm-dom-renderer-owner-",m="xterm-rows",b="xterm-fg-",v="xterm-bg-",w="xterm-focus",R="xterm-selection";let B=1,P=i.DomRenderer=class extends r.Disposable{constructor(A,N,q,V,Q,G,x,T,M,O,F,K,ee){super(),this._terminal=A,this._document=N,this._element=q,this._screenElement=V,this._viewportElement=Q,this._helperContainer=G,this._linkifier2=x,this._charSizeService=M,this._optionsService=O,this._bufferService=F,this._coreBrowserService=K,this._themeService=ee,this._terminalClass=B++,this._rowElements=[],this._selectionRenderModel=(0,u.createSelectionRenderModel)(),this.onRequestRedraw=this.register(new e.EventEmitter).event,this._rowContainer=this._document.createElement("div"),this._rowContainer.classList.add(m),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=this._document.createElement("div"),this._selectionContainer.classList.add(R),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=(0,S.createRenderDimensions)(),this._updateDimensions(),this.register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._themeService.onChangeColors(re=>this._injectCss(re))),this._injectCss(this._themeService.colors),this._rowFactory=T.createInstance(a.DomRendererRowFactory,document),this._element.classList.add(g+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this.register(this._linkifier2.onShowLinkUnderline(re=>this._handleLinkHover(re))),this.register(this._linkifier2.onHideLinkUnderline(re=>this._handleLinkLeave(re))),this.register((0,r.toDisposable)(()=>{this._element.classList.remove(g+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()})),this._widthCache=new l.WidthCache(this._document,this._helperContainer),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){const A=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*A,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*A),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/A),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/A),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(const q of this._rowElements)q.style.width=`${this.dimensions.css.canvas.width}px`,q.style.height=`${this.dimensions.css.cell.height}px`,q.style.lineHeight=`${this.dimensions.css.cell.height}px`,q.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));const N=`${this._terminalSelector} .${m} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=N,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(A){this._themeStyleElement||(this._themeStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let N=`${this._terminalSelector} .${m} { color: ${A.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;N+=`${this._terminalSelector} .${m} .xterm-dim { color: ${n.color.multiplyOpacity(A.foreground,.5).css};}`,N+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`;const q=`blink_underline_${this._terminalClass}`,V=`blink_bar_${this._terminalClass}`,Q=`blink_block_${this._terminalClass}`;N+=`@keyframes ${q} { 50% {  border-bottom-style: hidden; }}`,N+=`@keyframes ${V} { 50% {  box-shadow: none; }}`,N+=`@keyframes ${Q} { 0% {  background-color: ${A.cursor.css};  color: ${A.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${A.cursor.css}; }}`,N+=`${this._terminalSelector} .${m}.${w} .xterm-cursor.xterm-cursor-blink.xterm-cursor-underline { animation: ${q} 1s step-end infinite;}${this._terminalSelector} .${m}.${w} .xterm-cursor.xterm-cursor-blink.xterm-cursor-bar { animation: ${V} 1s step-end infinite;}${this._terminalSelector} .${m}.${w} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: ${Q} 1s step-end infinite;}${this._terminalSelector} .${m} .xterm-cursor.xterm-cursor-block { background-color: ${A.cursor.css}; color: ${A.cursorAccent.css};}${this._terminalSelector} .${m} .xterm-cursor.xterm-cursor-block:not(.xterm-cursor-blink) { background-color: ${A.cursor.css} !important; color: ${A.cursorAccent.css} !important;}${this._terminalSelector} .${m} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${A.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${m} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${A.cursor.css} inset;}${this._terminalSelector} .${m} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${A.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,N+=`${this._terminalSelector} .${R} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${R} div { position: absolute; background-color: ${A.selectionBackgroundOpaque.css};}${this._terminalSelector} .${R} div { position: absolute; background-color: ${A.selectionInactiveBackgroundOpaque.css};}`;for(const[G,x]of A.ansi.entries())N+=`${this._terminalSelector} .${b}${G} { color: ${x.css}; }${this._terminalSelector} .${b}${G}.xterm-dim { color: ${n.color.multiplyOpacity(x,.5).css}; }${this._terminalSelector} .${v}${G} { background-color: ${x.css}; }`;N+=`${this._terminalSelector} .${b}${p.INVERTED_DEFAULT_COLOR} { color: ${n.color.opaque(A.background).css}; }${this._terminalSelector} .${b}${p.INVERTED_DEFAULT_COLOR}.xterm-dim { color: ${n.color.multiplyOpacity(n.color.opaque(A.background),.5).css}; }${this._terminalSelector} .${v}${p.INVERTED_DEFAULT_COLOR} { background-color: ${A.foreground.css}; }`,this._themeStyleElement.textContent=N}_setDefaultSpacing(){const A=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${A}px`,this._rowFactory.defaultSpacing=A}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(A,N){for(let q=this._rowElements.length;q<=N;q++){const V=this._document.createElement("div");this._rowContainer.appendChild(V),this._rowElements.push(V)}for(;this._rowElements.length>N;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(A,N){this._refreshRowElements(A,N),this._updateDimensions(),this.handleSelectionChanged(this._selectionRenderModel.selectionStart,this._selectionRenderModel.selectionEnd,this._selectionRenderModel.columnSelectMode)}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(w),this.renderRows(0,this._bufferService.rows-1)}handleFocus(){this._rowContainer.classList.add(w),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(A,N,q){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(A,N,q),this.renderRows(0,this._bufferService.rows-1),!A||!N)return;this._selectionRenderModel.update(this._terminal,A,N,q);const V=this._selectionRenderModel.viewportStartRow,Q=this._selectionRenderModel.viewportEndRow,G=this._selectionRenderModel.viewportCappedStartRow,x=this._selectionRenderModel.viewportCappedEndRow;if(G>=this._bufferService.rows||x<0)return;const T=this._document.createDocumentFragment();if(q){const M=A[0]>N[0];T.appendChild(this._createSelectionElement(G,M?N[0]:A[0],M?A[0]:N[0],x-G+1))}else{const M=V===G?A[0]:0,O=G===Q?N[0]:this._bufferService.cols;T.appendChild(this._createSelectionElement(G,M,O));const F=x-G-1;if(T.appendChild(this._createSelectionElement(G+1,0,this._bufferService.cols,F)),G!==x){const K=Q===x?N[0]:this._bufferService.cols;T.appendChild(this._createSelectionElement(x,0,K))}}this._selectionContainer.appendChild(T)}_createSelectionElement(A,N,q,V=1){const Q=this._document.createElement("div"),G=N*this.dimensions.css.cell.width;let x=this.dimensions.css.cell.width*(q-N);return G+x>this.dimensions.css.canvas.width&&(x=this.dimensions.css.canvas.width-G),Q.style.height=V*this.dimensions.css.cell.height+"px",Q.style.top=A*this.dimensions.css.cell.height+"px",Q.style.left=`${G}px`,Q.style.width=`${x}px`,Q}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(const A of this._rowElements)A.replaceChildren()}renderRows(A,N){const q=this._bufferService.buffer,V=q.ybase+q.y,Q=Math.min(q.x,this._bufferService.cols-1),G=this._optionsService.rawOptions.cursorBlink,x=this._optionsService.rawOptions.cursorStyle,T=this._optionsService.rawOptions.cursorInactiveStyle;for(let M=A;M<=N;M++){const O=M+q.ydisp,F=this._rowElements[M],K=q.lines.get(O);if(!F||!K)break;F.replaceChildren(...this._rowFactory.createRow(K,O,O===V,x,T,Q,G,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${g}${this._terminalClass}`}_handleLinkHover(A){this._setCellUnderline(A.x1,A.x2,A.y1,A.y2,A.cols,!0)}_handleLinkLeave(A){this._setCellUnderline(A.x1,A.x2,A.y1,A.y2,A.cols,!1)}_setCellUnderline(A,N,q,V,Q,G){q<0&&(A=0),V<0&&(N=0);const x=this._bufferService.rows-1;q=Math.max(Math.min(q,x),0),V=Math.max(Math.min(V,x),0),Q=Math.min(Q,this._bufferService.cols);const T=this._bufferService.buffer,M=T.ybase+T.y,O=Math.min(T.x,Q-1),F=this._optionsService.rawOptions.cursorBlink,K=this._optionsService.rawOptions.cursorStyle,ee=this._optionsService.rawOptions.cursorInactiveStyle;for(let re=q;re<=V;++re){const I=re+T.ydisp,L=this._rowElements[re],z=T.lines.get(I);if(!L||!z)break;L.replaceChildren(...this._rowFactory.createRow(z,I,I===M,K,ee,O,F,this.dimensions.css.cell.width,this._widthCache,G?re===q?A:0:-1,G?(re===V?N:Q)-1:-1))}}};i.DomRenderer=P=c([f(7,d.IInstantiationService),f(8,t.ICharSizeService),f(9,d.IOptionsService),f(10,d.IBufferService),f(11,t.ICoreBrowserService),f(12,t.IThemeService)],P)},3787:function(k,i,o){var c=this&&this.__decorate||function(m,b,v,w){var R,B=arguments.length,P=B<3?b:w===null?w=Object.getOwnPropertyDescriptor(b,v):w;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")P=Reflect.decorate(m,b,v,w);else for(var A=m.length-1;A>=0;A--)(R=m[A])&&(P=(B<3?R(P):B>3?R(b,v,P):R(b,v))||P);return B>3&&P&&Object.defineProperty(b,v,P),P},f=this&&this.__param||function(m,b){return function(v,w){b(v,w,m)}};Object.defineProperty(i,"__esModule",{value:!0}),i.DomRendererRowFactory=void 0;const a=o(2223),l=o(643),p=o(511),S=o(2585),u=o(8055),t=o(4725),n=o(4269),e=o(6171),r=o(3734);let d=i.DomRendererRowFactory=class{constructor(m,b,v,w,R,B,P){this._document=m,this._characterJoinerService=b,this._optionsService=v,this._coreBrowserService=w,this._coreService=R,this._decorationService=B,this._themeService=P,this._workCell=new p.CellData,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(m,b,v){this._selectionStart=m,this._selectionEnd=b,this._columnSelectMode=v}createRow(m,b,v,w,R,B,P,A,N,q,V){const Q=[],G=this._characterJoinerService.getJoinedCharacters(b),x=this._themeService.colors;let T,M=m.getNoBgTrimmedLength();v&&M<B+1&&(M=B+1);let O=0,F="",K=0,ee=0,re=0,I=!1,L=0,z=!1,$=0;const X=[],J=q!==-1&&V!==-1;for(let oe=0;oe<M;oe++){m.loadCell(oe,this._workCell);let _e=this._workCell.getWidth();if(_e===0)continue;let ve=!1,Re=oe,ie=this._workCell;if(G.length>0&&oe===G[0][0]){ve=!0;const be=G.shift();ie=new n.JoinedCellData(this._workCell,m.translateToString(!0,be[0],be[1]),be[1]-be[0]),Re=be[1]-1,_e=ie.getWidth()}const Ae=this._isCellInSelection(oe,b),Ve=v&&oe===B,yt=J&&oe>=q&&oe<=V;let Le=!1;this._decorationService.forEachDecorationAtCell(oe,b,void 0,be=>{Le=!0});let He=ie.getChars()||l.WHITESPACE_CELL_CHAR;if(He===" "&&(ie.isUnderline()||ie.isOverline())&&(He="Â "),$=_e*A-N.get(He,ie.isBold(),ie.isItalic()),T){if(O&&(Ae&&z||!Ae&&!z&&ie.bg===K)&&(Ae&&z&&x.selectionForeground||ie.fg===ee)&&ie.extended.ext===re&&yt===I&&$===L&&!Ve&&!ve&&!Le){ie.isInvisible()?F+=l.WHITESPACE_CELL_CHAR:F+=He,O++;continue}O&&(T.textContent=F),T=this._document.createElement("span"),O=0,F=""}else T=this._document.createElement("span");if(K=ie.bg,ee=ie.fg,re=ie.extended.ext,I=yt,L=$,z=Ae,ve&&B>=oe&&B<=Re&&(B=oe),!this._coreService.isCursorHidden&&Ve&&this._coreService.isCursorInitialized){if(X.push("xterm-cursor"),this._coreBrowserService.isFocused)P&&X.push("xterm-cursor-blink"),X.push(w==="bar"?"xterm-cursor-bar":w==="underline"?"xterm-cursor-underline":"xterm-cursor-block");else if(R)switch(R){case"outline":X.push("xterm-cursor-outline");break;case"block":X.push("xterm-cursor-block");break;case"bar":X.push("xterm-cursor-bar");break;case"underline":X.push("xterm-cursor-underline")}}if(ie.isBold()&&X.push("xterm-bold"),ie.isItalic()&&X.push("xterm-italic"),ie.isDim()&&X.push("xterm-dim"),F=ie.isInvisible()?l.WHITESPACE_CELL_CHAR:ie.getChars()||l.WHITESPACE_CELL_CHAR,ie.isUnderline()&&(X.push(`xterm-underline-${ie.extended.underlineStyle}`),F===" "&&(F="Â "),!ie.isUnderlineColorDefault()))if(ie.isUnderlineColorRGB())T.style.textDecorationColor=`rgb(${r.AttributeData.toColorRGB(ie.getUnderlineColor()).join(",")})`;else{let be=ie.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&ie.isBold()&&be<8&&(be+=8),T.style.textDecorationColor=x.ansi[be].css}ie.isOverline()&&(X.push("xterm-overline"),F===" "&&(F="Â ")),ie.isStrikethrough()&&X.push("xterm-strikethrough"),yt&&(T.style.textDecoration="underline");let Te=ie.getFgColor(),nt=ie.getFgColorMode(),Ge=ie.getBgColor(),Xe=ie.getBgColorMode();const Ye=!!ie.isInverse();if(Ye){const be=Te;Te=Ge,Ge=be;const Er=nt;nt=Xe,Xe=Er}let Ne,ft,ot,ze=!1;switch(this._decorationService.forEachDecorationAtCell(oe,b,void 0,be=>{be.options.layer!=="top"&&ze||(be.backgroundColorRGB&&(Xe=50331648,Ge=be.backgroundColorRGB.rgba>>8&16777215,Ne=be.backgroundColorRGB),be.foregroundColorRGB&&(nt=50331648,Te=be.foregroundColorRGB.rgba>>8&16777215,ft=be.foregroundColorRGB),ze=be.options.layer==="top")}),!ze&&Ae&&(Ne=this._coreBrowserService.isFocused?x.selectionBackgroundOpaque:x.selectionInactiveBackgroundOpaque,Ge=Ne.rgba>>8&16777215,Xe=50331648,ze=!0,x.selectionForeground&&(nt=50331648,Te=x.selectionForeground.rgba>>8&16777215,ft=x.selectionForeground)),ze&&X.push("xterm-decoration-top"),Xe){case 16777216:case 33554432:ot=x.ansi[Ge],X.push(`xterm-bg-${Ge}`);break;case 50331648:ot=u.channels.toColor(Ge>>16,Ge>>8&255,255&Ge),this._addStyle(T,`background-color:#${g((Ge>>>0).toString(16),"0",6)}`);break;default:Ye?(ot=x.foreground,X.push(`xterm-bg-${a.INVERTED_DEFAULT_COLOR}`)):ot=x.background}switch(Ne||ie.isDim()&&(Ne=u.color.multiplyOpacity(ot,.5)),nt){case 16777216:case 33554432:ie.isBold()&&Te<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(Te+=8),this._applyMinimumContrast(T,ot,x.ansi[Te],ie,Ne,void 0)||X.push(`xterm-fg-${Te}`);break;case 50331648:const be=u.channels.toColor(Te>>16&255,Te>>8&255,255&Te);this._applyMinimumContrast(T,ot,be,ie,Ne,ft)||this._addStyle(T,`color:#${g(Te.toString(16),"0",6)}`);break;default:this._applyMinimumContrast(T,ot,x.foreground,ie,Ne,ft)||Ye&&X.push(`xterm-fg-${a.INVERTED_DEFAULT_COLOR}`)}X.length&&(T.className=X.join(" "),X.length=0),Ve||ve||Le?T.textContent=F:O++,$!==this.defaultSpacing&&(T.style.letterSpacing=`${$}px`),Q.push(T),oe=Re}return T&&O&&(T.textContent=F),Q}_applyMinimumContrast(m,b,v,w,R,B){if(this._optionsService.rawOptions.minimumContrastRatio===1||(0,e.treatGlyphAsBackgroundColor)(w.getCode()))return!1;const P=this._getContrastCache(w);let A;if(R||B||(A=P.getColor(b.rgba,v.rgba)),A===void 0){const N=this._optionsService.rawOptions.minimumContrastRatio/(w.isDim()?2:1);A=u.color.ensureContrastRatio(R||b,B||v,N),P.setColor((R||b).rgba,(B||v).rgba,A??null)}return!!A&&(this._addStyle(m,`color:${A.css}`),!0)}_getContrastCache(m){return m.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(m,b){m.setAttribute("style",`${m.getAttribute("style")||""}${b};`)}_isCellInSelection(m,b){const v=this._selectionStart,w=this._selectionEnd;return!(!v||!w)&&(this._columnSelectMode?v[0]<=w[0]?m>=v[0]&&b>=v[1]&&m<w[0]&&b<=w[1]:m<v[0]&&b>=v[1]&&m>=w[0]&&b<=w[1]:b>v[1]&&b<w[1]||v[1]===w[1]&&b===v[1]&&m>=v[0]&&m<w[0]||v[1]<w[1]&&b===w[1]&&m<w[0]||v[1]<w[1]&&b===v[1]&&m>=v[0])}};function g(m,b,v){for(;m.length<v;)m=b+m;return m}i.DomRendererRowFactory=d=c([f(1,t.ICharacterJoinerService),f(2,S.IOptionsService),f(3,t.ICoreBrowserService),f(4,S.ICoreService),f(5,S.IDecorationService),f(6,t.IThemeService)],d)},2550:(k,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.WidthCache=void 0,i.WidthCache=class{constructor(o,c){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=o.createElement("div"),this._container.classList.add("xterm-width-cache-measure-container"),this._container.setAttribute("aria-hidden","true"),this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";const f=o.createElement("span");f.classList.add("xterm-char-measure-element");const a=o.createElement("span");a.classList.add("xterm-char-measure-element"),a.style.fontWeight="bold";const l=o.createElement("span");l.classList.add("xterm-char-measure-element"),l.style.fontStyle="italic";const p=o.createElement("span");p.classList.add("xterm-char-measure-element"),p.style.fontWeight="bold",p.style.fontStyle="italic",this._measureElements=[f,a,l,p],this._container.appendChild(f),this._container.appendChild(a),this._container.appendChild(l),this._container.appendChild(p),c.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(o,c,f,a){o===this._font&&c===this._fontSize&&f===this._weight&&a===this._weightBold||(this._font=o,this._fontSize=c,this._weight=f,this._weightBold=a,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${f}`,this._measureElements[1].style.fontWeight=`${a}`,this._measureElements[2].style.fontWeight=`${f}`,this._measureElements[3].style.fontWeight=`${a}`,this.clear())}get(o,c,f){let a=0;if(!c&&!f&&o.length===1&&(a=o.charCodeAt(0))<256){if(this._flat[a]!==-9999)return this._flat[a];const S=this._measure(o,0);return S>0&&(this._flat[a]=S),S}let l=o;c&&(l+="B"),f&&(l+="I");let p=this._holey.get(l);if(p===void 0){let S=0;c&&(S|=1),f&&(S|=2),p=this._measure(o,S),p>0&&this._holey.set(l,p)}return p}_measure(o,c){const f=this._measureElements[c];return f.textContent=o.repeat(32),f.offsetWidth/32}}},2223:(k,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.TEXT_BASELINE=i.DIM_OPACITY=i.INVERTED_DEFAULT_COLOR=void 0;const c=o(6114);i.INVERTED_DEFAULT_COLOR=257,i.DIM_OPACITY=.5,i.TEXT_BASELINE=c.isFirefox||c.isLegacyEdge?"bottom":"ideographic"},6171:(k,i)=>{function o(f){return 57508<=f&&f<=57558}function c(f){return f>=128512&&f<=128591||f>=127744&&f<=128511||f>=128640&&f<=128767||f>=9728&&f<=9983||f>=9984&&f<=10175||f>=65024&&f<=65039||f>=129280&&f<=129535||f>=127462&&f<=127487}Object.defineProperty(i,"__esModule",{value:!0}),i.computeNextVariantOffset=i.createRenderDimensions=i.treatGlyphAsBackgroundColor=i.allowRescaling=i.isEmoji=i.isRestrictedPowerlineGlyph=i.isPowerlineGlyph=i.throwIfFalsy=void 0,i.throwIfFalsy=function(f){if(!f)throw new Error("value must not be falsy");return f},i.isPowerlineGlyph=o,i.isRestrictedPowerlineGlyph=function(f){return 57520<=f&&f<=57527},i.isEmoji=c,i.allowRescaling=function(f,a,l,p){return a===1&&l>Math.ceil(1.5*p)&&f!==void 0&&f>255&&!c(f)&&!o(f)&&!function(S){return 57344<=S&&S<=63743}(f)},i.treatGlyphAsBackgroundColor=function(f){return o(f)||function(a){return 9472<=a&&a<=9631}(f)},i.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}},i.computeNextVariantOffset=function(f,a,l=0){return(f-(2*Math.round(a)-l))%(2*Math.round(a))}},6052:(k,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.createSelectionRenderModel=void 0;class o{constructor(){this.clear()}clear(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}update(f,a,l,p=!1){if(this.selectionStart=a,this.selectionEnd=l,!a||!l||a[0]===l[0]&&a[1]===l[1])return void this.clear();const S=f.buffers.active.ydisp,u=a[1]-S,t=l[1]-S,n=Math.max(u,0),e=Math.min(t,f.rows-1);n>=f.rows||e<0?this.clear():(this.hasSelection=!0,this.columnSelectMode=p,this.viewportStartRow=u,this.viewportEndRow=t,this.viewportCappedStartRow=n,this.viewportCappedEndRow=e,this.startCol=a[0],this.endCol=l[0])}isCellSelected(f,a,l){return!!this.hasSelection&&(l-=f.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?a>=this.startCol&&l>=this.viewportCappedStartRow&&a<this.endCol&&l<=this.viewportCappedEndRow:a<this.startCol&&l>=this.viewportCappedStartRow&&a>=this.endCol&&l<=this.viewportCappedEndRow:l>this.viewportStartRow&&l<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&l===this.viewportStartRow&&a>=this.startCol&&a<this.endCol||this.viewportStartRow<this.viewportEndRow&&l===this.viewportEndRow&&a<this.endCol||this.viewportStartRow<this.viewportEndRow&&l===this.viewportStartRow&&a>=this.startCol)}}i.createSelectionRenderModel=function(){return new o}},456:(k,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.SelectionModel=void 0,i.SelectionModel=class{constructor(o){this._bufferService=o,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){const o=this.selectionStart[0]+this.selectionStartLength;return o>this._bufferService.cols?o%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(o/this._bufferService.cols)-1]:[o%this._bufferService.cols,this.selectionStart[1]+Math.floor(o/this._bufferService.cols)]:[o,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){const o=this.selectionStart[0]+this.selectionStartLength;return o>this._bufferService.cols?[o%this._bufferService.cols,this.selectionStart[1]+Math.floor(o/this._bufferService.cols)]:[Math.max(o,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){const o=this.selectionStart,c=this.selectionEnd;return!(!o||!c)&&(o[1]>c[1]||o[1]===c[1]&&o[0]>c[0])}handleTrim(o){return this.selectionStart&&(this.selectionStart[1]-=o),this.selectionEnd&&(this.selectionEnd[1]-=o),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}}},428:function(k,i,o){var c=this&&this.__decorate||function(e,r,d,g){var m,b=arguments.length,v=b<3?r:g===null?g=Object.getOwnPropertyDescriptor(r,d):g;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")v=Reflect.decorate(e,r,d,g);else for(var w=e.length-1;w>=0;w--)(m=e[w])&&(v=(b<3?m(v):b>3?m(r,d,v):m(r,d))||v);return b>3&&v&&Object.defineProperty(r,d,v),v},f=this&&this.__param||function(e,r){return function(d,g){r(d,g,e)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CharSizeService=void 0;const a=o(2585),l=o(8460),p=o(844);let S=i.CharSizeService=class extends p.Disposable{get hasValidSize(){return this.width>0&&this.height>0}constructor(e,r,d){super(),this._optionsService=d,this.width=0,this.height=0,this._onCharSizeChange=this.register(new l.EventEmitter),this.onCharSizeChange=this._onCharSizeChange.event;try{this._measureStrategy=this.register(new n(this._optionsService))}catch{this._measureStrategy=this.register(new t(e,r,this._optionsService))}this.register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],()=>this.measure()))}measure(){const e=this._measureStrategy.measure();e.width===this.width&&e.height===this.height||(this.width=e.width,this.height=e.height,this._onCharSizeChange.fire())}};i.CharSizeService=S=c([f(2,a.IOptionsService)],S);class u extends p.Disposable{constructor(){super(...arguments),this._result={width:0,height:0}}_validateAndSet(r,d){r!==void 0&&r>0&&d!==void 0&&d>0&&(this._result.width=r,this._result.height=d)}}class t extends u{constructor(r,d,g){super(),this._document=r,this._parentElement=d,this._optionsService=g,this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){return this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`,this._validateAndSet(Number(this._measureElement.offsetWidth)/32,Number(this._measureElement.offsetHeight)),this._result}}class n extends u{constructor(r){super(),this._optionsService=r,this._canvas=new OffscreenCanvas(100,100),this._ctx=this._canvas.getContext("2d");const d=this._ctx.measureText("W");if(!("width"in d&&"fontBoundingBoxAscent"in d&&"fontBoundingBoxDescent"in d))throw new Error("Required font metrics not supported")}measure(){this._ctx.font=`${this._optionsService.rawOptions.fontSize}px ${this._optionsService.rawOptions.fontFamily}`;const r=this._ctx.measureText("W");return this._validateAndSet(r.width,r.fontBoundingBoxAscent+r.fontBoundingBoxDescent),this._result}}},4269:function(k,i,o){var c=this&&this.__decorate||function(n,e,r,d){var g,m=arguments.length,b=m<3?e:d===null?d=Object.getOwnPropertyDescriptor(e,r):d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(n,e,r,d);else for(var v=n.length-1;v>=0;v--)(g=n[v])&&(b=(m<3?g(b):m>3?g(e,r,b):g(e,r))||b);return m>3&&b&&Object.defineProperty(e,r,b),b},f=this&&this.__param||function(n,e){return function(r,d){e(r,d,n)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CharacterJoinerService=i.JoinedCellData=void 0;const a=o(3734),l=o(643),p=o(511),S=o(2585);class u extends a.AttributeData{constructor(e,r,d){super(),this.content=0,this.combinedData="",this.fg=e.fg,this.bg=e.bg,this.combinedData=r,this._width=d}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(e){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}i.JoinedCellData=u;let t=i.CharacterJoinerService=class dn{constructor(e){this._bufferService=e,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new p.CellData}register(e){const r={id:this._nextCharacterJoinerId++,handler:e};return this._characterJoiners.push(r),r.id}deregister(e){for(let r=0;r<this._characterJoiners.length;r++)if(this._characterJoiners[r].id===e)return this._characterJoiners.splice(r,1),!0;return!1}getJoinedCharacters(e){if(this._characterJoiners.length===0)return[];const r=this._bufferService.buffer.lines.get(e);if(!r||r.length===0)return[];const d=[],g=r.translateToString(!0);let m=0,b=0,v=0,w=r.getFg(0),R=r.getBg(0);for(let B=0;B<r.getTrimmedLength();B++)if(r.loadCell(B,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==w||this._workCell.bg!==R){if(B-m>1){const P=this._getJoinedRanges(g,v,b,r,m);for(let A=0;A<P.length;A++)d.push(P[A])}m=B,v=b,w=this._workCell.fg,R=this._workCell.bg}b+=this._workCell.getChars().length||l.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-m>1){const B=this._getJoinedRanges(g,v,b,r,m);for(let P=0;P<B.length;P++)d.push(B[P])}return d}_getJoinedRanges(e,r,d,g,m){const b=e.substring(r,d);let v=[];try{v=this._characterJoiners[0].handler(b)}catch(w){console.error(w)}for(let w=1;w<this._characterJoiners.length;w++)try{const R=this._characterJoiners[w].handler(b);for(let B=0;B<R.length;B++)dn._mergeRanges(v,R[B])}catch(R){console.error(R)}return this._stringRangesToCellRanges(v,g,m),v}_stringRangesToCellRanges(e,r,d){let g=0,m=!1,b=0,v=e[g];if(v){for(let w=d;w<this._bufferService.cols;w++){const R=r.getWidth(w),B=r.getString(w).length||l.WHITESPACE_CELL_CHAR.length;if(R!==0){if(!m&&v[0]<=b&&(v[0]=w,m=!0),v[1]<=b){if(v[1]=w,v=e[++g],!v)break;v[0]<=b?(v[0]=w,m=!0):m=!1}b+=B}}v&&(v[1]=this._bufferService.cols)}}static _mergeRanges(e,r){let d=!1;for(let g=0;g<e.length;g++){const m=e[g];if(d){if(r[1]<=m[0])return e[g-1][1]=r[1],e;if(r[1]<=m[1])return e[g-1][1]=Math.max(r[1],m[1]),e.splice(g,1),e;e.splice(g,1),g--}else{if(r[1]<=m[0])return e.splice(g,0,r),e;if(r[1]<=m[1])return m[0]=Math.min(r[0],m[0]),e;r[0]<m[1]&&(m[0]=Math.min(r[0],m[0]),d=!0)}}return d?e[e.length-1][1]=r[1]:e.push(r),e}};i.CharacterJoinerService=t=c([f(0,S.IBufferService)],t)},5114:(k,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CoreBrowserService=void 0;const c=o(844),f=o(8460),a=o(3656);class l extends c.Disposable{constructor(u,t,n){super(),this._textarea=u,this._window=t,this.mainDocument=n,this._isFocused=!1,this._cachedIsFocused=void 0,this._screenDprMonitor=new p(this._window),this._onDprChange=this.register(new f.EventEmitter),this.onDprChange=this._onDprChange.event,this._onWindowChange=this.register(new f.EventEmitter),this.onWindowChange=this._onWindowChange.event,this.register(this.onWindowChange(e=>this._screenDprMonitor.setWindow(e))),this.register((0,f.forwardEvent)(this._screenDprMonitor.onDprChange,this._onDprChange)),this._textarea.addEventListener("focus",()=>this._isFocused=!0),this._textarea.addEventListener("blur",()=>this._isFocused=!1)}get window(){return this._window}set window(u){this._window!==u&&(this._window=u,this._onWindowChange.fire(this._window))}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask(()=>this._cachedIsFocused=void 0)),this._cachedIsFocused}}i.CoreBrowserService=l;class p extends c.Disposable{constructor(u){super(),this._parentWindow=u,this._windowResizeListener=this.register(new c.MutableDisposable),this._onDprChange=this.register(new f.EventEmitter),this.onDprChange=this._onDprChange.event,this._outerListener=()=>this._setDprAndFireIfDiffers(),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._updateDpr(),this._setWindowResizeListener(),this.register((0,c.toDisposable)(()=>this.clearListener()))}setWindow(u){this._parentWindow=u,this._setWindowResizeListener(),this._setDprAndFireIfDiffers()}_setWindowResizeListener(){this._windowResizeListener.value=(0,a.addDisposableDomListener)(this._parentWindow,"resize",()=>this._setDprAndFireIfDiffers())}_setDprAndFireIfDiffers(){this._parentWindow.devicePixelRatio!==this._currentDevicePixelRatio&&this._onDprChange.fire(this._parentWindow.devicePixelRatio),this._updateDpr()}_updateDpr(){this._outerListener&&(this._resolutionMediaMatchList?.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){this._resolutionMediaMatchList&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._outerListener=void 0)}}},779:(k,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.LinkProviderService=void 0;const c=o(844);class f extends c.Disposable{constructor(){super(),this.linkProviders=[],this.register((0,c.toDisposable)(()=>this.linkProviders.length=0))}registerLinkProvider(l){return this.linkProviders.push(l),{dispose:()=>{const p=this.linkProviders.indexOf(l);p!==-1&&this.linkProviders.splice(p,1)}}}}i.LinkProviderService=f},8934:function(k,i,o){var c=this&&this.__decorate||function(S,u,t,n){var e,r=arguments.length,d=r<3?u:n===null?n=Object.getOwnPropertyDescriptor(u,t):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(S,u,t,n);else for(var g=S.length-1;g>=0;g--)(e=S[g])&&(d=(r<3?e(d):r>3?e(u,t,d):e(u,t))||d);return r>3&&d&&Object.defineProperty(u,t,d),d},f=this&&this.__param||function(S,u){return function(t,n){u(t,n,S)}};Object.defineProperty(i,"__esModule",{value:!0}),i.MouseService=void 0;const a=o(4725),l=o(9806);let p=i.MouseService=class{constructor(S,u){this._renderService=S,this._charSizeService=u}getCoords(S,u,t,n,e){return(0,l.getCoords)(window,S,u,t,n,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,e)}getMouseReportCoords(S,u){const t=(0,l.getCoordsRelativeToElement)(window,S,u);if(this._charSizeService.hasValidSize)return t[0]=Math.min(Math.max(t[0],0),this._renderService.dimensions.css.canvas.width-1),t[1]=Math.min(Math.max(t[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(t[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(t[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(t[0]),y:Math.floor(t[1])}}};i.MouseService=p=c([f(0,a.IRenderService),f(1,a.ICharSizeService)],p)},3230:function(k,i,o){var c=this&&this.__decorate||function(e,r,d,g){var m,b=arguments.length,v=b<3?r:g===null?g=Object.getOwnPropertyDescriptor(r,d):g;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")v=Reflect.decorate(e,r,d,g);else for(var w=e.length-1;w>=0;w--)(m=e[w])&&(v=(b<3?m(v):b>3?m(r,d,v):m(r,d))||v);return b>3&&v&&Object.defineProperty(r,d,v),v},f=this&&this.__param||function(e,r){return function(d,g){r(d,g,e)}};Object.defineProperty(i,"__esModule",{value:!0}),i.RenderService=void 0;const a=o(6193),l=o(4725),p=o(8460),S=o(844),u=o(7226),t=o(2585);let n=i.RenderService=class extends S.Disposable{get dimensions(){return this._renderer.value.dimensions}constructor(e,r,d,g,m,b,v,w){super(),this._rowCount=e,this._charSizeService=g,this._renderer=this.register(new S.MutableDisposable),this._pausedResizeTask=new u.DebouncedIdleTask,this._observerDisposable=this.register(new S.MutableDisposable),this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this.register(new p.EventEmitter),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this.register(new p.EventEmitter),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this.register(new p.EventEmitter),this.onRender=this._onRender.event,this._onRefreshRequest=this.register(new p.EventEmitter),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new a.RenderDebouncer((R,B)=>this._renderRows(R,B),v),this.register(this._renderDebouncer),this.register(v.onDprChange(()=>this.handleDevicePixelRatioChange())),this.register(b.onResize(()=>this._fullRefresh())),this.register(b.buffers.onBufferActivate(()=>this._renderer.value?.clear())),this.register(d.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._charSizeService.onCharSizeChange(()=>this.handleCharSizeChanged())),this.register(m.onDecorationRegistered(()=>this._fullRefresh())),this.register(m.onDecorationRemoved(()=>this._fullRefresh())),this.register(d.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio","rescaleOverlappingGlyphs"],()=>{this.clear(),this.handleResize(b.cols,b.rows),this._fullRefresh()})),this.register(d.onMultipleOptionChange(["cursorBlink","cursorStyle"],()=>this.refreshRows(b.buffer.y,b.buffer.y,!0))),this.register(w.onChangeColors(()=>this._fullRefresh())),this._registerIntersectionObserver(v.window,r),this.register(v.onWindowChange(R=>this._registerIntersectionObserver(R,r)))}_registerIntersectionObserver(e,r){if("IntersectionObserver"in e){const d=new e.IntersectionObserver(g=>this._handleIntersectionChange(g[g.length-1]),{threshold:0});d.observe(r),this._observerDisposable.value=(0,S.toDisposable)(()=>d.disconnect())}}_handleIntersectionChange(e){this._isPaused=e.isIntersecting===void 0?e.intersectionRatio===0:!e.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(e,r,d=!1){this._isPaused?this._needsFullRefresh=!0:(d||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(e,r,this._rowCount))}_renderRows(e,r){this._renderer.value&&(e=Math.min(e,this._rowCount-1),r=Math.min(r,this._rowCount-1),this._renderer.value.renderRows(e,r),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:e,end:r}),this._onRender.fire({start:e,end:r}),this._isNextRenderRedrawOnly=!0)}resize(e,r){this._rowCount=r,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(e){this._renderer.value=e,this._renderer.value&&(this._renderer.value.onRequestRedraw(r=>this.refreshRows(r.start,r.end,!0)),this._needsSelectionRefresh=!0,this._fullRefresh())}addRefreshCallback(e){return this._renderDebouncer.addRefreshCallback(e)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){this._renderer.value&&(this._renderer.value.clearTextureAtlas?.(),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(e,r){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set(()=>this._renderer.value?.handleResize(e,r)):this._renderer.value.handleResize(e,r),this._fullRefresh())}handleCharSizeChanged(){this._renderer.value?.handleCharSizeChanged()}handleBlur(){this._renderer.value?.handleBlur()}handleFocus(){this._renderer.value?.handleFocus()}handleSelectionChanged(e,r,d){this._selectionState.start=e,this._selectionState.end=r,this._selectionState.columnSelectMode=d,this._renderer.value?.handleSelectionChanged(e,r,d)}handleCursorMove(){this._renderer.value?.handleCursorMove()}clear(){this._renderer.value?.clear()}};i.RenderService=n=c([f(2,t.IOptionsService),f(3,l.ICharSizeService),f(4,t.IDecorationService),f(5,t.IBufferService),f(6,l.ICoreBrowserService),f(7,l.IThemeService)],n)},9312:function(k,i,o){var c=this&&this.__decorate||function(v,w,R,B){var P,A=arguments.length,N=A<3?w:B===null?B=Object.getOwnPropertyDescriptor(w,R):B;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")N=Reflect.decorate(v,w,R,B);else for(var q=v.length-1;q>=0;q--)(P=v[q])&&(N=(A<3?P(N):A>3?P(w,R,N):P(w,R))||N);return A>3&&N&&Object.defineProperty(w,R,N),N},f=this&&this.__param||function(v,w){return function(R,B){w(R,B,v)}};Object.defineProperty(i,"__esModule",{value:!0}),i.SelectionService=void 0;const a=o(9806),l=o(9504),p=o(456),S=o(4725),u=o(8460),t=o(844),n=o(6114),e=o(4841),r=o(511),d=o(2585),g="Â ",m=new RegExp(g,"g");let b=i.SelectionService=class extends t.Disposable{constructor(v,w,R,B,P,A,N,q,V){super(),this._element=v,this._screenElement=w,this._linkifier=R,this._bufferService=B,this._coreService=P,this._mouseService=A,this._optionsService=N,this._renderService=q,this._coreBrowserService=V,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new r.CellData,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this.register(new u.EventEmitter),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this.register(new u.EventEmitter),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this.register(new u.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this.register(new u.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=Q=>this._handleMouseMove(Q),this._mouseUpListener=Q=>this._handleMouseUp(Q),this._coreService.onUserInput(()=>{this.hasSelection&&this.clearSelection()}),this._trimListener=this._bufferService.buffer.lines.onTrim(Q=>this._handleTrim(Q)),this.register(this._bufferService.buffers.onBufferActivate(Q=>this._handleBufferActivate(Q))),this.enable(),this._model=new p.SelectionModel(this._bufferService),this._activeSelectionMode=0,this.register((0,t.toDisposable)(()=>{this._removeMouseDownListeners()}))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){const v=this._model.finalSelectionStart,w=this._model.finalSelectionEnd;return!(!v||!w||v[0]===w[0]&&v[1]===w[1])}get selectionText(){const v=this._model.finalSelectionStart,w=this._model.finalSelectionEnd;if(!v||!w)return"";const R=this._bufferService.buffer,B=[];if(this._activeSelectionMode===3){if(v[0]===w[0])return"";const P=v[0]<w[0]?v[0]:w[0],A=v[0]<w[0]?w[0]:v[0];for(let N=v[1];N<=w[1];N++){const q=R.translateBufferLineToString(N,!0,P,A);B.push(q)}}else{const P=v[1]===w[1]?w[0]:void 0;B.push(R.translateBufferLineToString(v[1],!0,v[0],P));for(let A=v[1]+1;A<=w[1]-1;A++){const N=R.lines.get(A),q=R.translateBufferLineToString(A,!0);N?.isWrapped?B[B.length-1]+=q:B.push(q)}if(v[1]!==w[1]){const A=R.lines.get(w[1]),N=R.translateBufferLineToString(w[1],!0,0,w[0]);A&&A.isWrapped?B[B.length-1]+=N:B.push(N)}}return B.map(P=>P.replace(m," ")).join(n.isWindows?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(v){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._refresh())),n.isLinux&&v&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(v){const w=this._getMouseBufferCoords(v),R=this._model.finalSelectionStart,B=this._model.finalSelectionEnd;return!!(R&&B&&w)&&this._areCoordsInSelection(w,R,B)}isCellInSelection(v,w){const R=this._model.finalSelectionStart,B=this._model.finalSelectionEnd;return!(!R||!B)&&this._areCoordsInSelection([v,w],R,B)}_areCoordsInSelection(v,w,R){return v[1]>w[1]&&v[1]<R[1]||w[1]===R[1]&&v[1]===w[1]&&v[0]>=w[0]&&v[0]<R[0]||w[1]<R[1]&&v[1]===R[1]&&v[0]<R[0]||w[1]<R[1]&&v[1]===w[1]&&v[0]>=w[0]}_selectWordAtCursor(v,w){const R=this._linkifier.currentLink?.link?.range;if(R)return this._model.selectionStart=[R.start.x-1,R.start.y-1],this._model.selectionStartLength=(0,e.getRangeLength)(R,this._bufferService.cols),this._model.selectionEnd=void 0,!0;const B=this._getMouseBufferCoords(v);return!!B&&(this._selectWordAt(B,w),this._model.selectionEnd=void 0,!0)}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(v,w){this._model.clearSelection(),v=Math.max(v,0),w=Math.min(w,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,v],this._model.selectionEnd=[this._bufferService.cols,w],this.refresh(),this._onSelectionChange.fire()}_handleTrim(v){this._model.handleTrim(v)&&this.refresh()}_getMouseBufferCoords(v){const w=this._mouseService.getCoords(v,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(w)return w[0]--,w[1]--,w[1]+=this._bufferService.buffer.ydisp,w}_getMouseEventScrollAmount(v){let w=(0,a.getCoordsRelativeToElement)(this._coreBrowserService.window,v,this._screenElement)[1];const R=this._renderService.dimensions.css.canvas.height;return w>=0&&w<=R?0:(w>R&&(w-=R),w=Math.min(Math.max(w,-50),50),w/=50,w/Math.abs(w)+Math.round(14*w))}shouldForceSelection(v){return n.isMac?v.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:v.shiftKey}handleMouseDown(v){if(this._mouseDownTimeStamp=v.timeStamp,(v.button!==2||!this.hasSelection)&&v.button===0){if(!this._enabled){if(!this.shouldForceSelection(v))return;v.stopPropagation()}v.preventDefault(),this._dragScrollAmount=0,this._enabled&&v.shiftKey?this._handleIncrementalClick(v):v.detail===1?this._handleSingleClick(v):v.detail===2?this._handleDoubleClick(v):v.detail===3&&this._handleTripleClick(v),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval(()=>this._dragScroll(),50)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(v){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(v))}_handleSingleClick(v){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(v)?3:0,this._model.selectionStart=this._getMouseBufferCoords(v),!this._model.selectionStart)return;this._model.selectionEnd=void 0;const w=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);w&&w.length!==this._model.selectionStart[0]&&w.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(v){this._selectWordAtCursor(v,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(v){const w=this._getMouseBufferCoords(v);w&&(this._activeSelectionMode=2,this._selectLineAt(w[1]))}shouldColumnSelect(v){return v.altKey&&!(n.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(v){if(v.stopImmediatePropagation(),!this._model.selectionStart)return;const w=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(v),!this._model.selectionEnd)return void this.refresh(!0);this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(v),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));const R=this._bufferService.buffer;if(this._model.selectionEnd[1]<R.lines.length){const B=R.lines.get(this._model.selectionEnd[1]);B&&B.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]<this._bufferService.cols&&this._model.selectionEnd[0]++}w&&w[0]===this._model.selectionEnd[0]&&w[1]===this._model.selectionEnd[1]||this.refresh(!0)}_dragScroll(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});const v=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(v.ydisp+this._bufferService.rows,v.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=v.ydisp),this.refresh()}}_handleMouseUp(v){const w=v.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&w<500&&v.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){const R=this._mouseService.getCoords(v,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(R&&R[0]!==void 0&&R[1]!==void 0){const B=(0,l.moveToCellSequence)(R[0]-1,R[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(B,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){const v=this._model.finalSelectionStart,w=this._model.finalSelectionEnd,R=!(!v||!w||v[0]===w[0]&&v[1]===w[1]);R?v&&w&&(this._oldSelectionStart&&this._oldSelectionEnd&&v[0]===this._oldSelectionStart[0]&&v[1]===this._oldSelectionStart[1]&&w[0]===this._oldSelectionEnd[0]&&w[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(v,w,R)):this._oldHasSelection&&this._fireOnSelectionChange(v,w,R)}_fireOnSelectionChange(v,w,R){this._oldSelectionStart=v,this._oldSelectionEnd=w,this._oldHasSelection=R,this._onSelectionChange.fire()}_handleBufferActivate(v){this.clearSelection(),this._trimListener.dispose(),this._trimListener=v.activeBuffer.lines.onTrim(w=>this._handleTrim(w))}_convertViewportColToCharacterIndex(v,w){let R=w;for(let B=0;w>=B;B++){const P=v.loadCell(B,this._workCell).getChars().length;this._workCell.getWidth()===0?R--:P>1&&w!==B&&(R+=P-1)}return R}setSelection(v,w,R){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[v,w],this._model.selectionStartLength=R,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(v){this._isClickInSelection(v)||(this._selectWordAtCursor(v,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(v,w,R=!0,B=!0){if(v[0]>=this._bufferService.cols)return;const P=this._bufferService.buffer,A=P.lines.get(v[1]);if(!A)return;const N=P.translateBufferLineToString(v[1],!1);let q=this._convertViewportColToCharacterIndex(A,v[0]),V=q;const Q=v[0]-q;let G=0,x=0,T=0,M=0;if(N.charAt(q)===" "){for(;q>0&&N.charAt(q-1)===" ";)q--;for(;V<N.length&&N.charAt(V+1)===" ";)V++}else{let K=v[0],ee=v[0];A.getWidth(K)===0&&(G++,K--),A.getWidth(ee)===2&&(x++,ee++);const re=A.getString(ee).length;for(re>1&&(M+=re-1,V+=re-1);K>0&&q>0&&!this._isCharWordSeparator(A.loadCell(K-1,this._workCell));){A.loadCell(K-1,this._workCell);const I=this._workCell.getChars().length;this._workCell.getWidth()===0?(G++,K--):I>1&&(T+=I-1,q-=I-1),q--,K--}for(;ee<A.length&&V+1<N.length&&!this._isCharWordSeparator(A.loadCell(ee+1,this._workCell));){A.loadCell(ee+1,this._workCell);const I=this._workCell.getChars().length;this._workCell.getWidth()===2?(x++,ee++):I>1&&(M+=I-1,V+=I-1),V++,ee++}}V++;let O=q+Q-G+T,F=Math.min(this._bufferService.cols,V-q+G+x-T-M);if(w||N.slice(q,V).trim()!==""){if(R&&O===0&&A.getCodePoint(0)!==32){const K=P.lines.get(v[1]-1);if(K&&A.isWrapped&&K.getCodePoint(this._bufferService.cols-1)!==32){const ee=this._getWordAt([this._bufferService.cols-1,v[1]-1],!1,!0,!1);if(ee){const re=this._bufferService.cols-ee.start;O-=re,F+=re}}}if(B&&O+F===this._bufferService.cols&&A.getCodePoint(this._bufferService.cols-1)!==32){const K=P.lines.get(v[1]+1);if(K?.isWrapped&&K.getCodePoint(0)!==32){const ee=this._getWordAt([0,v[1]+1],!1,!1,!0);ee&&(F+=ee.length)}}return{start:O,length:F}}}_selectWordAt(v,w){const R=this._getWordAt(v,w);if(R){for(;R.start<0;)R.start+=this._bufferService.cols,v[1]--;this._model.selectionStart=[R.start,v[1]],this._model.selectionStartLength=R.length}}_selectToWordAt(v){const w=this._getWordAt(v,!0);if(w){let R=v[1];for(;w.start<0;)w.start+=this._bufferService.cols,R--;if(!this._model.areSelectionValuesReversed())for(;w.start+w.length>this._bufferService.cols;)w.length-=this._bufferService.cols,R++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?w.start:w.start+w.length,R]}}_isCharWordSeparator(v){return v.getWidth()!==0&&this._optionsService.rawOptions.wordSeparator.indexOf(v.getChars())>=0}_selectLineAt(v){const w=this._bufferService.buffer.getWrappedRangeForLine(v),R={start:{x:0,y:w.first},end:{x:this._bufferService.cols-1,y:w.last}};this._model.selectionStart=[0,w.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,e.getRangeLength)(R,this._bufferService.cols)}};i.SelectionService=b=c([f(3,d.IBufferService),f(4,d.ICoreService),f(5,S.IMouseService),f(6,d.IOptionsService),f(7,S.IRenderService),f(8,S.ICoreBrowserService)],b)},4725:(k,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ILinkProviderService=i.IThemeService=i.ICharacterJoinerService=i.ISelectionService=i.IRenderService=i.IMouseService=i.ICoreBrowserService=i.ICharSizeService=void 0;const c=o(8343);i.ICharSizeService=(0,c.createDecorator)("CharSizeService"),i.ICoreBrowserService=(0,c.createDecorator)("CoreBrowserService"),i.IMouseService=(0,c.createDecorator)("MouseService"),i.IRenderService=(0,c.createDecorator)("RenderService"),i.ISelectionService=(0,c.createDecorator)("SelectionService"),i.ICharacterJoinerService=(0,c.createDecorator)("CharacterJoinerService"),i.IThemeService=(0,c.createDecorator)("ThemeService"),i.ILinkProviderService=(0,c.createDecorator)("LinkProviderService")},6731:function(k,i,o){var c=this&&this.__decorate||function(b,v,w,R){var B,P=arguments.length,A=P<3?v:R===null?R=Object.getOwnPropertyDescriptor(v,w):R;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")A=Reflect.decorate(b,v,w,R);else for(var N=b.length-1;N>=0;N--)(B=b[N])&&(A=(P<3?B(A):P>3?B(v,w,A):B(v,w))||A);return P>3&&A&&Object.defineProperty(v,w,A),A},f=this&&this.__param||function(b,v){return function(w,R){v(w,R,b)}};Object.defineProperty(i,"__esModule",{value:!0}),i.ThemeService=i.DEFAULT_ANSI_COLORS=void 0;const a=o(7239),l=o(8055),p=o(8460),S=o(844),u=o(2585),t=l.css.toColor("#ffffff"),n=l.css.toColor("#000000"),e=l.css.toColor("#ffffff"),r=l.css.toColor("#000000"),d={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};i.DEFAULT_ANSI_COLORS=Object.freeze((()=>{const b=[l.css.toColor("#2e3436"),l.css.toColor("#cc0000"),l.css.toColor("#4e9a06"),l.css.toColor("#c4a000"),l.css.toColor("#3465a4"),l.css.toColor("#75507b"),l.css.toColor("#06989a"),l.css.toColor("#d3d7cf"),l.css.toColor("#555753"),l.css.toColor("#ef2929"),l.css.toColor("#8ae234"),l.css.toColor("#fce94f"),l.css.toColor("#729fcf"),l.css.toColor("#ad7fa8"),l.css.toColor("#34e2e2"),l.css.toColor("#eeeeec")],v=[0,95,135,175,215,255];for(let w=0;w<216;w++){const R=v[w/36%6|0],B=v[w/6%6|0],P=v[w%6];b.push({css:l.channels.toCss(R,B,P),rgba:l.channels.toRgba(R,B,P)})}for(let w=0;w<24;w++){const R=8+10*w;b.push({css:l.channels.toCss(R,R,R),rgba:l.channels.toRgba(R,R,R)})}return b})());let g=i.ThemeService=class extends S.Disposable{get colors(){return this._colors}constructor(b){super(),this._optionsService=b,this._contrastCache=new a.ColorContrastCache,this._halfContrastCache=new a.ColorContrastCache,this._onChangeColors=this.register(new p.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:t,background:n,cursor:e,cursorAccent:r,selectionForeground:void 0,selectionBackgroundTransparent:d,selectionBackgroundOpaque:l.color.blend(n,d),selectionInactiveBackgroundTransparent:d,selectionInactiveBackgroundOpaque:l.color.blend(n,d),ansi:i.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",()=>this._contrastCache.clear())),this.register(this._optionsService.onSpecificOptionChange("theme",()=>this._setTheme(this._optionsService.rawOptions.theme)))}_setTheme(b={}){const v=this._colors;if(v.foreground=m(b.foreground,t),v.background=m(b.background,n),v.cursor=m(b.cursor,e),v.cursorAccent=m(b.cursorAccent,r),v.selectionBackgroundTransparent=m(b.selectionBackground,d),v.selectionBackgroundOpaque=l.color.blend(v.background,v.selectionBackgroundTransparent),v.selectionInactiveBackgroundTransparent=m(b.selectionInactiveBackground,v.selectionBackgroundTransparent),v.selectionInactiveBackgroundOpaque=l.color.blend(v.background,v.selectionInactiveBackgroundTransparent),v.selectionForeground=b.selectionForeground?m(b.selectionForeground,l.NULL_COLOR):void 0,v.selectionForeground===l.NULL_COLOR&&(v.selectionForeground=void 0),l.color.isOpaque(v.selectionBackgroundTransparent)&&(v.selectionBackgroundTransparent=l.color.opacity(v.selectionBackgroundTransparent,.3)),l.color.isOpaque(v.selectionInactiveBackgroundTransparent)&&(v.selectionInactiveBackgroundTransparent=l.color.opacity(v.selectionInactiveBackgroundTransparent,.3)),v.ansi=i.DEFAULT_ANSI_COLORS.slice(),v.ansi[0]=m(b.black,i.DEFAULT_ANSI_COLORS[0]),v.ansi[1]=m(b.red,i.DEFAULT_ANSI_COLORS[1]),v.ansi[2]=m(b.green,i.DEFAULT_ANSI_COLORS[2]),v.ansi[3]=m(b.yellow,i.DEFAULT_ANSI_COLORS[3]),v.ansi[4]=m(b.blue,i.DEFAULT_ANSI_COLORS[4]),v.ansi[5]=m(b.magenta,i.DEFAULT_ANSI_COLORS[5]),v.ansi[6]=m(b.cyan,i.DEFAULT_ANSI_COLORS[6]),v.ansi[7]=m(b.white,i.DEFAULT_ANSI_COLORS[7]),v.ansi[8]=m(b.brightBlack,i.DEFAULT_ANSI_COLORS[8]),v.ansi[9]=m(b.brightRed,i.DEFAULT_ANSI_COLORS[9]),v.ansi[10]=m(b.brightGreen,i.DEFAULT_ANSI_COLORS[10]),v.ansi[11]=m(b.brightYellow,i.DEFAULT_ANSI_COLORS[11]),v.ansi[12]=m(b.brightBlue,i.DEFAULT_ANSI_COLORS[12]),v.ansi[13]=m(b.brightMagenta,i.DEFAULT_ANSI_COLORS[13]),v.ansi[14]=m(b.brightCyan,i.DEFAULT_ANSI_COLORS[14]),v.ansi[15]=m(b.brightWhite,i.DEFAULT_ANSI_COLORS[15]),b.extendedAnsi){const w=Math.min(v.ansi.length-16,b.extendedAnsi.length);for(let R=0;R<w;R++)v.ansi[R+16]=m(b.extendedAnsi[R],i.DEFAULT_ANSI_COLORS[R+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(b){this._restoreColor(b),this._onChangeColors.fire(this.colors)}_restoreColor(b){if(b!==void 0)switch(b){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[b]=this._restoreColors.ansi[b]}else for(let v=0;v<this._restoreColors.ansi.length;++v)this._colors.ansi[v]=this._restoreColors.ansi[v]}modifyColors(b){b(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function m(b,v){if(b!==void 0)try{return l.css.toColor(b)}catch{}return v}i.ThemeService=g=c([f(0,u.IOptionsService)],g)},6349:(k,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CircularList=void 0;const c=o(8460),f=o(844);class a extends f.Disposable{constructor(p){super(),this._maxLength=p,this.onDeleteEmitter=this.register(new c.EventEmitter),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this.register(new c.EventEmitter),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this.register(new c.EventEmitter),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(p){if(this._maxLength===p)return;const S=new Array(p);for(let u=0;u<Math.min(p,this.length);u++)S[u]=this._array[this._getCyclicIndex(u)];this._array=S,this._maxLength=p,this._startIndex=0}get length(){return this._length}set length(p){if(p>this._length)for(let S=this._length;S<p;S++)this._array[S]=void 0;this._length=p}get(p){return this._array[this._getCyclicIndex(p)]}set(p,S){this._array[this._getCyclicIndex(p)]=S}push(p){this._array[this._getCyclicIndex(this._length)]=p,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(p,S,...u){if(S){for(let t=p;t<this._length-S;t++)this._array[this._getCyclicIndex(t)]=this._array[this._getCyclicIndex(t+S)];this._length-=S,this.onDeleteEmitter.fire({index:p,amount:S})}for(let t=this._length-1;t>=p;t--)this._array[this._getCyclicIndex(t+u.length)]=this._array[this._getCyclicIndex(t)];for(let t=0;t<u.length;t++)this._array[this._getCyclicIndex(p+t)]=u[t];if(u.length&&this.onInsertEmitter.fire({index:p,amount:u.length}),this._length+u.length>this._maxLength){const t=this._length+u.length-this._maxLength;this._startIndex+=t,this._length=this._maxLength,this.onTrimEmitter.fire(t)}else this._length+=u.length}trimStart(p){p>this._length&&(p=this._length),this._startIndex+=p,this._length-=p,this.onTrimEmitter.fire(p)}shiftElements(p,S,u){if(!(S<=0)){if(p<0||p>=this._length)throw new Error("start argument out of range");if(p+u<0)throw new Error("Cannot shift elements in list beyond index 0");if(u>0){for(let n=S-1;n>=0;n--)this.set(p+n+u,this.get(p+n));const t=p+S+u-this._length;if(t>0)for(this._length+=t;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let t=0;t<S;t++)this.set(p+t+u,this.get(p+t))}}_getCyclicIndex(p){return(this._startIndex+p)%this._maxLength}}i.CircularList=a},1439:(k,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.clone=void 0,i.clone=function o(c,f=5){if(typeof c!="object")return c;const a=Array.isArray(c)?[]:{};for(const l in c)a[l]=f<=1?c[l]:c[l]&&o(c[l],f-1);return a}},8055:(k,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.contrastRatio=i.toPaddedHex=i.rgba=i.rgb=i.css=i.color=i.channels=i.NULL_COLOR=void 0;let o=0,c=0,f=0,a=0;var l,p,S,u,t;function n(r){const d=r.toString(16);return d.length<2?"0"+d:d}function e(r,d){return r<d?(d+.05)/(r+.05):(r+.05)/(d+.05)}i.NULL_COLOR={css:"#00000000",rgba:0},function(r){r.toCss=function(d,g,m,b){return b!==void 0?`#${n(d)}${n(g)}${n(m)}${n(b)}`:`#${n(d)}${n(g)}${n(m)}`},r.toRgba=function(d,g,m,b=255){return(d<<24|g<<16|m<<8|b)>>>0},r.toColor=function(d,g,m,b){return{css:r.toCss(d,g,m,b),rgba:r.toRgba(d,g,m,b)}}}(l||(i.channels=l={})),function(r){function d(g,m){return a=Math.round(255*m),[o,c,f]=t.toChannels(g.rgba),{css:l.toCss(o,c,f,a),rgba:l.toRgba(o,c,f,a)}}r.blend=function(g,m){if(a=(255&m.rgba)/255,a===1)return{css:m.css,rgba:m.rgba};const b=m.rgba>>24&255,v=m.rgba>>16&255,w=m.rgba>>8&255,R=g.rgba>>24&255,B=g.rgba>>16&255,P=g.rgba>>8&255;return o=R+Math.round((b-R)*a),c=B+Math.round((v-B)*a),f=P+Math.round((w-P)*a),{css:l.toCss(o,c,f),rgba:l.toRgba(o,c,f)}},r.isOpaque=function(g){return(255&g.rgba)==255},r.ensureContrastRatio=function(g,m,b){const v=t.ensureContrastRatio(g.rgba,m.rgba,b);if(v)return l.toColor(v>>24&255,v>>16&255,v>>8&255)},r.opaque=function(g){const m=(255|g.rgba)>>>0;return[o,c,f]=t.toChannels(m),{css:l.toCss(o,c,f),rgba:m}},r.opacity=d,r.multiplyOpacity=function(g,m){return a=255&g.rgba,d(g,a*m/255)},r.toColorRGB=function(g){return[g.rgba>>24&255,g.rgba>>16&255,g.rgba>>8&255]}}(p||(i.color=p={})),function(r){let d,g;try{const m=document.createElement("canvas");m.width=1,m.height=1;const b=m.getContext("2d",{willReadFrequently:!0});b&&(d=b,d.globalCompositeOperation="copy",g=d.createLinearGradient(0,0,1,1))}catch{}r.toColor=function(m){if(m.match(/#[\da-f]{3,8}/i))switch(m.length){case 4:return o=parseInt(m.slice(1,2).repeat(2),16),c=parseInt(m.slice(2,3).repeat(2),16),f=parseInt(m.slice(3,4).repeat(2),16),l.toColor(o,c,f);case 5:return o=parseInt(m.slice(1,2).repeat(2),16),c=parseInt(m.slice(2,3).repeat(2),16),f=parseInt(m.slice(3,4).repeat(2),16),a=parseInt(m.slice(4,5).repeat(2),16),l.toColor(o,c,f,a);case 7:return{css:m,rgba:(parseInt(m.slice(1),16)<<8|255)>>>0};case 9:return{css:m,rgba:parseInt(m.slice(1),16)>>>0}}const b=m.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(b)return o=parseInt(b[1]),c=parseInt(b[2]),f=parseInt(b[3]),a=Math.round(255*(b[5]===void 0?1:parseFloat(b[5]))),l.toColor(o,c,f,a);if(!d||!g)throw new Error("css.toColor: Unsupported css format");if(d.fillStyle=g,d.fillStyle=m,typeof d.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(d.fillRect(0,0,1,1),[o,c,f,a]=d.getImageData(0,0,1,1).data,a!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:l.toRgba(o,c,f,a),css:m}}}(S||(i.css=S={})),function(r){function d(g,m,b){const v=g/255,w=m/255,R=b/255;return .2126*(v<=.03928?v/12.92:Math.pow((v+.055)/1.055,2.4))+.7152*(w<=.03928?w/12.92:Math.pow((w+.055)/1.055,2.4))+.0722*(R<=.03928?R/12.92:Math.pow((R+.055)/1.055,2.4))}r.relativeLuminance=function(g){return d(g>>16&255,g>>8&255,255&g)},r.relativeLuminance2=d}(u||(i.rgb=u={})),function(r){function d(m,b,v){const w=m>>24&255,R=m>>16&255,B=m>>8&255;let P=b>>24&255,A=b>>16&255,N=b>>8&255,q=e(u.relativeLuminance2(P,A,N),u.relativeLuminance2(w,R,B));for(;q<v&&(P>0||A>0||N>0);)P-=Math.max(0,Math.ceil(.1*P)),A-=Math.max(0,Math.ceil(.1*A)),N-=Math.max(0,Math.ceil(.1*N)),q=e(u.relativeLuminance2(P,A,N),u.relativeLuminance2(w,R,B));return(P<<24|A<<16|N<<8|255)>>>0}function g(m,b,v){const w=m>>24&255,R=m>>16&255,B=m>>8&255;let P=b>>24&255,A=b>>16&255,N=b>>8&255,q=e(u.relativeLuminance2(P,A,N),u.relativeLuminance2(w,R,B));for(;q<v&&(P<255||A<255||N<255);)P=Math.min(255,P+Math.ceil(.1*(255-P))),A=Math.min(255,A+Math.ceil(.1*(255-A))),N=Math.min(255,N+Math.ceil(.1*(255-N))),q=e(u.relativeLuminance2(P,A,N),u.relativeLuminance2(w,R,B));return(P<<24|A<<16|N<<8|255)>>>0}r.blend=function(m,b){if(a=(255&b)/255,a===1)return b;const v=b>>24&255,w=b>>16&255,R=b>>8&255,B=m>>24&255,P=m>>16&255,A=m>>8&255;return o=B+Math.round((v-B)*a),c=P+Math.round((w-P)*a),f=A+Math.round((R-A)*a),l.toRgba(o,c,f)},r.ensureContrastRatio=function(m,b,v){const w=u.relativeLuminance(m>>8),R=u.relativeLuminance(b>>8);if(e(w,R)<v){if(R<w){const A=d(m,b,v),N=e(w,u.relativeLuminance(A>>8));if(N<v){const q=g(m,b,v);return N>e(w,u.relativeLuminance(q>>8))?A:q}return A}const B=g(m,b,v),P=e(w,u.relativeLuminance(B>>8));if(P<v){const A=d(m,b,v);return P>e(w,u.relativeLuminance(A>>8))?B:A}return B}},r.reduceLuminance=d,r.increaseLuminance=g,r.toChannels=function(m){return[m>>24&255,m>>16&255,m>>8&255,255&m]}}(t||(i.rgba=t={})),i.toPaddedHex=n,i.contrastRatio=e},8969:(k,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CoreTerminal=void 0;const c=o(844),f=o(2585),a=o(4348),l=o(7866),p=o(744),S=o(7302),u=o(6975),t=o(8460),n=o(1753),e=o(1480),r=o(7994),d=o(9282),g=o(5435),m=o(5981),b=o(2660);let v=!1;class w extends c.Disposable{get onScroll(){return this._onScrollApi||(this._onScrollApi=this.register(new t.EventEmitter),this._onScroll.event(B=>{this._onScrollApi?.fire(B.position)})),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(B){for(const P in B)this.optionsService.options[P]=B[P]}constructor(B){super(),this._windowsWrappingHeuristics=this.register(new c.MutableDisposable),this._onBinary=this.register(new t.EventEmitter),this.onBinary=this._onBinary.event,this._onData=this.register(new t.EventEmitter),this.onData=this._onData.event,this._onLineFeed=this.register(new t.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onResize=this.register(new t.EventEmitter),this.onResize=this._onResize.event,this._onWriteParsed=this.register(new t.EventEmitter),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this.register(new t.EventEmitter),this._instantiationService=new a.InstantiationService,this.optionsService=this.register(new S.OptionsService(B)),this._instantiationService.setService(f.IOptionsService,this.optionsService),this._bufferService=this.register(this._instantiationService.createInstance(p.BufferService)),this._instantiationService.setService(f.IBufferService,this._bufferService),this._logService=this.register(this._instantiationService.createInstance(l.LogService)),this._instantiationService.setService(f.ILogService,this._logService),this.coreService=this.register(this._instantiationService.createInstance(u.CoreService)),this._instantiationService.setService(f.ICoreService,this.coreService),this.coreMouseService=this.register(this._instantiationService.createInstance(n.CoreMouseService)),this._instantiationService.setService(f.ICoreMouseService,this.coreMouseService),this.unicodeService=this.register(this._instantiationService.createInstance(e.UnicodeService)),this._instantiationService.setService(f.IUnicodeService,this.unicodeService),this._charsetService=this._instantiationService.createInstance(r.CharsetService),this._instantiationService.setService(f.ICharsetService,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(b.OscLinkService),this._instantiationService.setService(f.IOscLinkService,this._oscLinkService),this._inputHandler=this.register(new g.InputHandler(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this.register((0,t.forwardEvent)(this._inputHandler.onLineFeed,this._onLineFeed)),this.register(this._inputHandler),this.register((0,t.forwardEvent)(this._bufferService.onResize,this._onResize)),this.register((0,t.forwardEvent)(this.coreService.onData,this._onData)),this.register((0,t.forwardEvent)(this.coreService.onBinary,this._onBinary)),this.register(this.coreService.onRequestScrollToBottom(()=>this.scrollToBottom())),this.register(this.coreService.onUserInput(()=>this._writeBuffer.handleUserInput())),this.register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],()=>this._handleWindowsPtyOptionChange())),this.register(this._bufferService.onScroll(P=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this.register(this._inputHandler.onScroll(P=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this._writeBuffer=this.register(new m.WriteBuffer((P,A)=>this._inputHandler.parse(P,A))),this.register((0,t.forwardEvent)(this._writeBuffer.onWriteParsed,this._onWriteParsed))}write(B,P){this._writeBuffer.write(B,P)}writeSync(B,P){this._logService.logLevel<=f.LogLevelEnum.WARN&&!v&&(this._logService.warn("writeSync is unreliable and will be removed soon."),v=!0),this._writeBuffer.writeSync(B,P)}input(B,P=!0){this.coreService.triggerDataEvent(B,P)}resize(B,P){isNaN(B)||isNaN(P)||(B=Math.max(B,p.MINIMUM_COLS),P=Math.max(P,p.MINIMUM_ROWS),this._bufferService.resize(B,P))}scroll(B,P=!1){this._bufferService.scroll(B,P)}scrollLines(B,P,A){this._bufferService.scrollLines(B,P,A)}scrollPages(B){this.scrollLines(B*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(B){const P=B-this._bufferService.buffer.ydisp;P!==0&&this.scrollLines(P)}registerEscHandler(B,P){return this._inputHandler.registerEscHandler(B,P)}registerDcsHandler(B,P){return this._inputHandler.registerDcsHandler(B,P)}registerCsiHandler(B,P){return this._inputHandler.registerCsiHandler(B,P)}registerOscHandler(B,P){return this._inputHandler.registerOscHandler(B,P)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let B=!1;const P=this.optionsService.rawOptions.windowsPty;P&&P.buildNumber!==void 0&&P.buildNumber!==void 0?B=P.backend==="conpty"&&P.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(B=!0),B?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){const B=[];B.push(this.onLineFeed(d.updateWindowsModeWrappedState.bind(null,this._bufferService))),B.push(this.registerCsiHandler({final:"H"},()=>((0,d.updateWindowsModeWrappedState)(this._bufferService),!1))),this._windowsWrappingHeuristics.value=(0,c.toDisposable)(()=>{for(const P of B)P.dispose()})}}}i.CoreTerminal=w},8460:(k,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.runAndSubscribe=i.forwardEvent=i.EventEmitter=void 0,i.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=o=>(this._listeners.push(o),{dispose:()=>{if(!this._disposed){for(let c=0;c<this._listeners.length;c++)if(this._listeners[c]===o)return void this._listeners.splice(c,1)}}})),this._event}fire(o,c){const f=[];for(let a=0;a<this._listeners.length;a++)f.push(this._listeners[a]);for(let a=0;a<f.length;a++)f[a].call(void 0,o,c)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},i.forwardEvent=function(o,c){return o(f=>c.fire(f))},i.runAndSubscribe=function(o,c){return c(void 0),o(f=>c(f))}},5435:function(k,i,o){var c=this&&this.__decorate||function(G,x,T,M){var O,F=arguments.length,K=F<3?x:M===null?M=Object.getOwnPropertyDescriptor(x,T):M;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")K=Reflect.decorate(G,x,T,M);else for(var ee=G.length-1;ee>=0;ee--)(O=G[ee])&&(K=(F<3?O(K):F>3?O(x,T,K):O(x,T))||K);return F>3&&K&&Object.defineProperty(x,T,K),K},f=this&&this.__param||function(G,x){return function(T,M){x(T,M,G)}};Object.defineProperty(i,"__esModule",{value:!0}),i.InputHandler=i.WindowsOptionsReportType=void 0;const a=o(2584),l=o(7116),p=o(2015),S=o(844),u=o(482),t=o(8437),n=o(8460),e=o(643),r=o(511),d=o(3734),g=o(2585),m=o(1480),b=o(6242),v=o(6351),w=o(5941),R={"(":0,")":1,"*":2,"+":3,"-":1,".":2},B=131072;function P(G,x){if(G>24)return x.setWinLines||!1;switch(G){case 1:return!!x.restoreWin;case 2:return!!x.minimizeWin;case 3:return!!x.setWinPosition;case 4:return!!x.setWinSizePixels;case 5:return!!x.raiseWin;case 6:return!!x.lowerWin;case 7:return!!x.refreshWin;case 8:return!!x.setWinSizeChars;case 9:return!!x.maximizeWin;case 10:return!!x.fullscreenWin;case 11:return!!x.getWinState;case 13:return!!x.getWinPosition;case 14:return!!x.getWinSizePixels;case 15:return!!x.getScreenSizePixels;case 16:return!!x.getCellSizePixels;case 18:return!!x.getWinSizeChars;case 19:return!!x.getScreenSizeChars;case 20:return!!x.getIconTitle;case 21:return!!x.getWinTitle;case 22:return!!x.pushTitle;case 23:return!!x.popTitle;case 24:return!!x.setWinLines}return!1}var A;(function(G){G[G.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",G[G.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(A||(i.WindowsOptionsReportType=A={}));let N=0;class q extends S.Disposable{getAttrData(){return this._curAttrData}constructor(x,T,M,O,F,K,ee,re,I=new p.EscapeSequenceParser){super(),this._bufferService=x,this._charsetService=T,this._coreService=M,this._logService=O,this._optionsService=F,this._oscLinkService=K,this._coreMouseService=ee,this._unicodeService=re,this._parser=I,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new u.StringToUtf32,this._utf8Decoder=new u.Utf8ToUtf32,this._workCell=new r.CellData,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=t.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=t.DEFAULT_ATTR_DATA.clone(),this._onRequestBell=this.register(new n.EventEmitter),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this.register(new n.EventEmitter),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this.register(new n.EventEmitter),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this.register(new n.EventEmitter),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this.register(new n.EventEmitter),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this.register(new n.EventEmitter),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this.register(new n.EventEmitter),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this.register(new n.EventEmitter),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this.register(new n.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this.register(new n.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onScroll=this.register(new n.EventEmitter),this.onScroll=this._onScroll.event,this._onTitleChange=this.register(new n.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onColor=this.register(new n.EventEmitter),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this.register(this._parser),this._dirtyRowTracker=new V(this._bufferService),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(L=>this._activeBuffer=L.activeBuffer)),this._parser.setCsiHandlerFallback((L,z)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(L),params:z.toArray()})}),this._parser.setEscHandlerFallback(L=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(L)})}),this._parser.setExecuteHandlerFallback(L=>{this._logService.debug("Unknown EXECUTE code: ",{code:L})}),this._parser.setOscHandlerFallback((L,z,$)=>{this._logService.debug("Unknown OSC code: ",{identifier:L,action:z,data:$})}),this._parser.setDcsHandlerFallback((L,z,$)=>{z==="HOOK"&&($=$.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(L),action:z,payload:$})}),this._parser.setPrintHandler((L,z,$)=>this.print(L,z,$)),this._parser.registerCsiHandler({final:"@"},L=>this.insertChars(L)),this._parser.registerCsiHandler({intermediates:" ",final:"@"},L=>this.scrollLeft(L)),this._parser.registerCsiHandler({final:"A"},L=>this.cursorUp(L)),this._parser.registerCsiHandler({intermediates:" ",final:"A"},L=>this.scrollRight(L)),this._parser.registerCsiHandler({final:"B"},L=>this.cursorDown(L)),this._parser.registerCsiHandler({final:"C"},L=>this.cursorForward(L)),this._parser.registerCsiHandler({final:"D"},L=>this.cursorBackward(L)),this._parser.registerCsiHandler({final:"E"},L=>this.cursorNextLine(L)),this._parser.registerCsiHandler({final:"F"},L=>this.cursorPrecedingLine(L)),this._parser.registerCsiHandler({final:"G"},L=>this.cursorCharAbsolute(L)),this._parser.registerCsiHandler({final:"H"},L=>this.cursorPosition(L)),this._parser.registerCsiHandler({final:"I"},L=>this.cursorForwardTab(L)),this._parser.registerCsiHandler({final:"J"},L=>this.eraseInDisplay(L,!1)),this._parser.registerCsiHandler({prefix:"?",final:"J"},L=>this.eraseInDisplay(L,!0)),this._parser.registerCsiHandler({final:"K"},L=>this.eraseInLine(L,!1)),this._parser.registerCsiHandler({prefix:"?",final:"K"},L=>this.eraseInLine(L,!0)),this._parser.registerCsiHandler({final:"L"},L=>this.insertLines(L)),this._parser.registerCsiHandler({final:"M"},L=>this.deleteLines(L)),this._parser.registerCsiHandler({final:"P"},L=>this.deleteChars(L)),this._parser.registerCsiHandler({final:"S"},L=>this.scrollUp(L)),this._parser.registerCsiHandler({final:"T"},L=>this.scrollDown(L)),this._parser.registerCsiHandler({final:"X"},L=>this.eraseChars(L)),this._parser.registerCsiHandler({final:"Z"},L=>this.cursorBackwardTab(L)),this._parser.registerCsiHandler({final:"`"},L=>this.charPosAbsolute(L)),this._parser.registerCsiHandler({final:"a"},L=>this.hPositionRelative(L)),this._parser.registerCsiHandler({final:"b"},L=>this.repeatPrecedingCharacter(L)),this._parser.registerCsiHandler({final:"c"},L=>this.sendDeviceAttributesPrimary(L)),this._parser.registerCsiHandler({prefix:">",final:"c"},L=>this.sendDeviceAttributesSecondary(L)),this._parser.registerCsiHandler({final:"d"},L=>this.linePosAbsolute(L)),this._parser.registerCsiHandler({final:"e"},L=>this.vPositionRelative(L)),this._parser.registerCsiHandler({final:"f"},L=>this.hVPosition(L)),this._parser.registerCsiHandler({final:"g"},L=>this.tabClear(L)),this._parser.registerCsiHandler({final:"h"},L=>this.setMode(L)),this._parser.registerCsiHandler({prefix:"?",final:"h"},L=>this.setModePrivate(L)),this._parser.registerCsiHandler({final:"l"},L=>this.resetMode(L)),this._parser.registerCsiHandler({prefix:"?",final:"l"},L=>this.resetModePrivate(L)),this._parser.registerCsiHandler({final:"m"},L=>this.charAttributes(L)),this._parser.registerCsiHandler({final:"n"},L=>this.deviceStatus(L)),this._parser.registerCsiHandler({prefix:"?",final:"n"},L=>this.deviceStatusPrivate(L)),this._parser.registerCsiHandler({intermediates:"!",final:"p"},L=>this.softReset(L)),this._parser.registerCsiHandler({intermediates:" ",final:"q"},L=>this.setCursorStyle(L)),this._parser.registerCsiHandler({final:"r"},L=>this.setScrollRegion(L)),this._parser.registerCsiHandler({final:"s"},L=>this.saveCursor(L)),this._parser.registerCsiHandler({final:"t"},L=>this.windowOptions(L)),this._parser.registerCsiHandler({final:"u"},L=>this.restoreCursor(L)),this._parser.registerCsiHandler({intermediates:"'",final:"}"},L=>this.insertColumns(L)),this._parser.registerCsiHandler({intermediates:"'",final:"~"},L=>this.deleteColumns(L)),this._parser.registerCsiHandler({intermediates:'"',final:"q"},L=>this.selectProtected(L)),this._parser.registerCsiHandler({intermediates:"$",final:"p"},L=>this.requestMode(L,!0)),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},L=>this.requestMode(L,!1)),this._parser.setExecuteHandler(a.C0.BEL,()=>this.bell()),this._parser.setExecuteHandler(a.C0.LF,()=>this.lineFeed()),this._parser.setExecuteHandler(a.C0.VT,()=>this.lineFeed()),this._parser.setExecuteHandler(a.C0.FF,()=>this.lineFeed()),this._parser.setExecuteHandler(a.C0.CR,()=>this.carriageReturn()),this._parser.setExecuteHandler(a.C0.BS,()=>this.backspace()),this._parser.setExecuteHandler(a.C0.HT,()=>this.tab()),this._parser.setExecuteHandler(a.C0.SO,()=>this.shiftOut()),this._parser.setExecuteHandler(a.C0.SI,()=>this.shiftIn()),this._parser.setExecuteHandler(a.C1.IND,()=>this.index()),this._parser.setExecuteHandler(a.C1.NEL,()=>this.nextLine()),this._parser.setExecuteHandler(a.C1.HTS,()=>this.tabSet()),this._parser.registerOscHandler(0,new b.OscHandler(L=>(this.setTitle(L),this.setIconName(L),!0))),this._parser.registerOscHandler(1,new b.OscHandler(L=>this.setIconName(L))),this._parser.registerOscHandler(2,new b.OscHandler(L=>this.setTitle(L))),this._parser.registerOscHandler(4,new b.OscHandler(L=>this.setOrReportIndexedColor(L))),this._parser.registerOscHandler(8,new b.OscHandler(L=>this.setHyperlink(L))),this._parser.registerOscHandler(10,new b.OscHandler(L=>this.setOrReportFgColor(L))),this._parser.registerOscHandler(11,new b.OscHandler(L=>this.setOrReportBgColor(L))),this._parser.registerOscHandler(12,new b.OscHandler(L=>this.setOrReportCursorColor(L))),this._parser.registerOscHandler(104,new b.OscHandler(L=>this.restoreIndexedColor(L))),this._parser.registerOscHandler(110,new b.OscHandler(L=>this.restoreFgColor(L))),this._parser.registerOscHandler(111,new b.OscHandler(L=>this.restoreBgColor(L))),this._parser.registerOscHandler(112,new b.OscHandler(L=>this.restoreCursorColor(L))),this._parser.registerEscHandler({final:"7"},()=>this.saveCursor()),this._parser.registerEscHandler({final:"8"},()=>this.restoreCursor()),this._parser.registerEscHandler({final:"D"},()=>this.index()),this._parser.registerEscHandler({final:"E"},()=>this.nextLine()),this._parser.registerEscHandler({final:"H"},()=>this.tabSet()),this._parser.registerEscHandler({final:"M"},()=>this.reverseIndex()),this._parser.registerEscHandler({final:"="},()=>this.keypadApplicationMode()),this._parser.registerEscHandler({final:">"},()=>this.keypadNumericMode()),this._parser.registerEscHandler({final:"c"},()=>this.fullReset()),this._parser.registerEscHandler({final:"n"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"o"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"|"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"}"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"~"},()=>this.setgLevel(1)),this._parser.registerEscHandler({intermediates:"%",final:"@"},()=>this.selectDefaultCharset()),this._parser.registerEscHandler({intermediates:"%",final:"G"},()=>this.selectDefaultCharset());for(const L in l.CHARSETS)this._parser.registerEscHandler({intermediates:"(",final:L},()=>this.selectCharset("("+L)),this._parser.registerEscHandler({intermediates:")",final:L},()=>this.selectCharset(")"+L)),this._parser.registerEscHandler({intermediates:"*",final:L},()=>this.selectCharset("*"+L)),this._parser.registerEscHandler({intermediates:"+",final:L},()=>this.selectCharset("+"+L)),this._parser.registerEscHandler({intermediates:"-",final:L},()=>this.selectCharset("-"+L)),this._parser.registerEscHandler({intermediates:".",final:L},()=>this.selectCharset("."+L)),this._parser.registerEscHandler({intermediates:"/",final:L},()=>this.selectCharset("/"+L));this._parser.registerEscHandler({intermediates:"#",final:"8"},()=>this.screenAlignmentPattern()),this._parser.setErrorHandler(L=>(this._logService.error("Parsing error: ",L),L)),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new v.DcsHandler((L,z)=>this.requestStatusString(L,z)))}_preserveStack(x,T,M,O){this._parseStack.paused=!0,this._parseStack.cursorStartX=x,this._parseStack.cursorStartY=T,this._parseStack.decodedLength=M,this._parseStack.position=O}_logSlowResolvingAsync(x){this._logService.logLevel<=g.LogLevelEnum.WARN&&Promise.race([x,new Promise((T,M)=>setTimeout(()=>M("#SLOW_TIMEOUT"),5e3))]).catch(T=>{if(T!=="#SLOW_TIMEOUT")throw T;console.warn("async parser handler taking longer than 5000 ms")})}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(x,T){let M,O=this._activeBuffer.x,F=this._activeBuffer.y,K=0;const ee=this._parseStack.paused;if(ee){if(M=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,T))return this._logSlowResolvingAsync(M),M;O=this._parseStack.cursorStartX,F=this._parseStack.cursorStartY,this._parseStack.paused=!1,x.length>B&&(K=this._parseStack.position+B)}if(this._logService.logLevel<=g.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof x=="string"?` "${x}"`:` "${Array.prototype.map.call(x,L=>String.fromCharCode(L)).join("")}"`),typeof x=="string"?x.split("").map(L=>L.charCodeAt(0)):x),this._parseBuffer.length<x.length&&this._parseBuffer.length<B&&(this._parseBuffer=new Uint32Array(Math.min(x.length,B))),ee||this._dirtyRowTracker.clearRange(),x.length>B)for(let L=K;L<x.length;L+=B){const z=L+B<x.length?L+B:x.length,$=typeof x=="string"?this._stringDecoder.decode(x.substring(L,z),this._parseBuffer):this._utf8Decoder.decode(x.subarray(L,z),this._parseBuffer);if(M=this._parser.parse(this._parseBuffer,$))return this._preserveStack(O,F,$,L),this._logSlowResolvingAsync(M),M}else if(!ee){const L=typeof x=="string"?this._stringDecoder.decode(x,this._parseBuffer):this._utf8Decoder.decode(x,this._parseBuffer);if(M=this._parser.parse(this._parseBuffer,L))return this._preserveStack(O,F,L,0),this._logSlowResolvingAsync(M),M}this._activeBuffer.x===O&&this._activeBuffer.y===F||this._onCursorMove.fire();const re=this._dirtyRowTracker.end+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp),I=this._dirtyRowTracker.start+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp);I<this._bufferService.rows&&this._onRequestRefreshRows.fire(Math.min(I,this._bufferService.rows-1),Math.min(re,this._bufferService.rows-1))}print(x,T,M){let O,F;const K=this._charsetService.charset,ee=this._optionsService.rawOptions.screenReaderMode,re=this._bufferService.cols,I=this._coreService.decPrivateModes.wraparound,L=this._coreService.modes.insertMode,z=this._curAttrData;let $=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&M-T>0&&$.getWidth(this._activeBuffer.x-1)===2&&$.setCellFromCodepoint(this._activeBuffer.x-1,0,1,z);let X=this._parser.precedingJoinState;for(let J=T;J<M;++J){if(O=x[J],O<127&&K){const Re=K[String.fromCharCode(O)];Re&&(O=Re.charCodeAt(0))}const oe=this._unicodeService.charProperties(O,X);F=m.UnicodeService.extractWidth(oe);const _e=m.UnicodeService.extractShouldJoin(oe),ve=_e?m.UnicodeService.extractWidth(X):0;if(X=oe,ee&&this._onA11yChar.fire((0,u.stringFromCodePoint)(O)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),this._activeBuffer.x+F-ve>re){if(I){const Re=$;let ie=this._activeBuffer.x-ve;for(this._activeBuffer.x=ve,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),$=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y),ve>0&&$ instanceof t.BufferLine&&$.copyCellsFrom(Re,ie,0,ve,!1);ie<re;)Re.setCellFromCodepoint(ie++,0,1,z)}else if(this._activeBuffer.x=re-1,F===2)continue}if(_e&&this._activeBuffer.x){const Re=$.getWidth(this._activeBuffer.x-1)?1:2;$.addCodepointToCell(this._activeBuffer.x-Re,O,F);for(let ie=F-ve;--ie>=0;)$.setCellFromCodepoint(this._activeBuffer.x++,0,0,z)}else if(L&&($.insertCells(this._activeBuffer.x,F-ve,this._activeBuffer.getNullCell(z)),$.getWidth(re-1)===2&&$.setCellFromCodepoint(re-1,e.NULL_CELL_CODE,e.NULL_CELL_WIDTH,z)),$.setCellFromCodepoint(this._activeBuffer.x++,O,F,z),F>0)for(;--F;)$.setCellFromCodepoint(this._activeBuffer.x++,0,0,z)}this._parser.precedingJoinState=X,this._activeBuffer.x<re&&M-T>0&&$.getWidth(this._activeBuffer.x)===0&&!$.hasContent(this._activeBuffer.x)&&$.setCellFromCodepoint(this._activeBuffer.x,0,1,z),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(x,T){return x.final!=="t"||x.prefix||x.intermediates?this._parser.registerCsiHandler(x,T):this._parser.registerCsiHandler(x,M=>!P(M.params[0],this._optionsService.rawOptions.windowOptions)||T(M))}registerDcsHandler(x,T){return this._parser.registerDcsHandler(x,new v.DcsHandler(T))}registerEscHandler(x,T){return this._parser.registerEscHandler(x,T)}registerOscHandler(x,T){return this._parser.registerOscHandler(x,new b.OscHandler(T))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)?.isWrapped){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;const x=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);x.hasWidth(this._activeBuffer.x)&&!x.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;const x=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-x),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(x=this._bufferService.cols-1){this._activeBuffer.x=Math.min(x,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(x,T){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=x,this._activeBuffer.y=this._activeBuffer.scrollTop+T):(this._activeBuffer.x=x,this._activeBuffer.y=T),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(x,T){this._restrictCursor(),this._setCursor(this._activeBuffer.x+x,this._activeBuffer.y+T)}cursorUp(x){const T=this._activeBuffer.y-this._activeBuffer.scrollTop;return T>=0?this._moveCursor(0,-Math.min(T,x.params[0]||1)):this._moveCursor(0,-(x.params[0]||1)),!0}cursorDown(x){const T=this._activeBuffer.scrollBottom-this._activeBuffer.y;return T>=0?this._moveCursor(0,Math.min(T,x.params[0]||1)):this._moveCursor(0,x.params[0]||1),!0}cursorForward(x){return this._moveCursor(x.params[0]||1,0),!0}cursorBackward(x){return this._moveCursor(-(x.params[0]||1),0),!0}cursorNextLine(x){return this.cursorDown(x),this._activeBuffer.x=0,!0}cursorPrecedingLine(x){return this.cursorUp(x),this._activeBuffer.x=0,!0}cursorCharAbsolute(x){return this._setCursor((x.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(x){return this._setCursor(x.length>=2?(x.params[1]||1)-1:0,(x.params[0]||1)-1),!0}charPosAbsolute(x){return this._setCursor((x.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(x){return this._moveCursor(x.params[0]||1,0),!0}linePosAbsolute(x){return this._setCursor(this._activeBuffer.x,(x.params[0]||1)-1),!0}vPositionRelative(x){return this._moveCursor(0,x.params[0]||1),!0}hVPosition(x){return this.cursorPosition(x),!0}tabClear(x){const T=x.params[0];return T===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:T===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(x){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let T=x.params[0]||1;for(;T--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(x){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let T=x.params[0]||1;for(;T--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(x){const T=x.params[0];return T===1&&(this._curAttrData.bg|=536870912),T!==2&&T!==0||(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(x,T,M,O=!1,F=!1){const K=this._activeBuffer.lines.get(this._activeBuffer.ybase+x);K.replaceCells(T,M,this._activeBuffer.getNullCell(this._eraseAttrData()),F),O&&(K.isWrapped=!1)}_resetBufferLine(x,T=!1){const M=this._activeBuffer.lines.get(this._activeBuffer.ybase+x);M&&(M.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),T),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+x),M.isWrapped=!1)}eraseInDisplay(x,T=!1){let M;switch(this._restrictCursor(this._bufferService.cols),x.params[0]){case 0:for(M=this._activeBuffer.y,this._dirtyRowTracker.markDirty(M),this._eraseInBufferLine(M++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,T);M<this._bufferService.rows;M++)this._resetBufferLine(M,T);this._dirtyRowTracker.markDirty(M);break;case 1:for(M=this._activeBuffer.y,this._dirtyRowTracker.markDirty(M),this._eraseInBufferLine(M,0,this._activeBuffer.x+1,!0,T),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(M+1).isWrapped=!1);M--;)this._resetBufferLine(M,T);this._dirtyRowTracker.markDirty(0);break;case 2:for(M=this._bufferService.rows,this._dirtyRowTracker.markDirty(M-1);M--;)this._resetBufferLine(M,T);this._dirtyRowTracker.markDirty(0);break;case 3:const O=this._activeBuffer.lines.length-this._bufferService.rows;O>0&&(this._activeBuffer.lines.trimStart(O),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-O,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-O,0),this._onScroll.fire(0))}return!0}eraseInLine(x,T=!1){switch(this._restrictCursor(this._bufferService.cols),x.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,T);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,T);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,T)}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(x){this._restrictCursor();let T=x.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const M=this._activeBuffer.ybase+this._activeBuffer.y,O=this._bufferService.rows-1-this._activeBuffer.scrollBottom,F=this._bufferService.rows-1+this._activeBuffer.ybase-O+1;for(;T--;)this._activeBuffer.lines.splice(F-1,1),this._activeBuffer.lines.splice(M,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(x){this._restrictCursor();let T=x.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const M=this._activeBuffer.ybase+this._activeBuffer.y;let O;for(O=this._bufferService.rows-1-this._activeBuffer.scrollBottom,O=this._bufferService.rows-1+this._activeBuffer.ybase-O;T--;)this._activeBuffer.lines.splice(M,1),this._activeBuffer.lines.splice(O,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(x){this._restrictCursor();const T=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return T&&(T.insertCells(this._activeBuffer.x,x.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(x){this._restrictCursor();const T=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return T&&(T.deleteCells(this._activeBuffer.x,x.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(x){let T=x.params[0]||1;for(;T--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(x){let T=x.params[0]||1;for(;T--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(t.DEFAULT_ATTR_DATA));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(x){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const T=x.params[0]||1;for(let M=this._activeBuffer.scrollTop;M<=this._activeBuffer.scrollBottom;++M){const O=this._activeBuffer.lines.get(this._activeBuffer.ybase+M);O.deleteCells(0,T,this._activeBuffer.getNullCell(this._eraseAttrData())),O.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(x){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const T=x.params[0]||1;for(let M=this._activeBuffer.scrollTop;M<=this._activeBuffer.scrollBottom;++M){const O=this._activeBuffer.lines.get(this._activeBuffer.ybase+M);O.insertCells(0,T,this._activeBuffer.getNullCell(this._eraseAttrData())),O.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(x){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const T=x.params[0]||1;for(let M=this._activeBuffer.scrollTop;M<=this._activeBuffer.scrollBottom;++M){const O=this._activeBuffer.lines.get(this._activeBuffer.ybase+M);O.insertCells(this._activeBuffer.x,T,this._activeBuffer.getNullCell(this._eraseAttrData())),O.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(x){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const T=x.params[0]||1;for(let M=this._activeBuffer.scrollTop;M<=this._activeBuffer.scrollBottom;++M){const O=this._activeBuffer.lines.get(this._activeBuffer.ybase+M);O.deleteCells(this._activeBuffer.x,T,this._activeBuffer.getNullCell(this._eraseAttrData())),O.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(x){this._restrictCursor();const T=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return T&&(T.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(x.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(x){const T=this._parser.precedingJoinState;if(!T)return!0;const M=x.params[0]||1,O=m.UnicodeService.extractWidth(T),F=this._activeBuffer.x-O,K=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).getString(F),ee=new Uint32Array(K.length*M);let re=0;for(let L=0;L<K.length;){const z=K.codePointAt(L)||0;ee[re++]=z,L+=z>65535?2:1}let I=re;for(let L=1;L<M;++L)ee.copyWithin(I,0,re),I+=re;return this.print(ee,0,I),!0}sendDeviceAttributesPrimary(x){return x.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(a.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(a.C0.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(x){return x.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(a.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(a.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(x.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(a.C0.ESC+"[>83;40003;0c")),!0}_is(x){return(this._optionsService.rawOptions.termName+"").indexOf(x)===0}setMode(x){for(let T=0;T<x.length;T++)switch(x.params[T]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0}return!0}setModePrivate(x){for(let T=0;T<x.length;T++)switch(x.params[T]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,l.DEFAULT_CHARSET),this._charsetService.setgCharset(1,l.DEFAULT_CHARSET),this._charsetService.setgCharset(2,l.DEFAULT_CHARSET),this._charsetService.setgCharset(3,l.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0}resetMode(x){for(let T=0;T<x.length;T++)switch(x.params[T]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1}return!0}resetModePrivate(x){for(let T=0;T<x.length;T++)switch(x.params[T]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),x.params[T]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0}requestMode(x,T){const M=this._coreService.decPrivateModes,{activeProtocol:O,activeEncoding:F}=this._coreMouseService,K=this._coreService,{buffers:ee,cols:re}=this._bufferService,{active:I,alt:L}=ee,z=this._optionsService.rawOptions,$=_e=>_e?1:2,X=x.params[0];return J=X,oe=T?X===2?4:X===4?$(K.modes.insertMode):X===12?3:X===20?$(z.convertEol):0:X===1?$(M.applicationCursorKeys):X===3?z.windowOptions.setWinLines?re===80?2:re===132?1:0:0:X===6?$(M.origin):X===7?$(M.wraparound):X===8?3:X===9?$(O==="X10"):X===12?$(z.cursorBlink):X===25?$(!K.isCursorHidden):X===45?$(M.reverseWraparound):X===66?$(M.applicationKeypad):X===67?4:X===1e3?$(O==="VT200"):X===1002?$(O==="DRAG"):X===1003?$(O==="ANY"):X===1004?$(M.sendFocus):X===1005?4:X===1006?$(F==="SGR"):X===1015?4:X===1016?$(F==="SGR_PIXELS"):X===1048?1:X===47||X===1047||X===1049?$(I===L):X===2004?$(M.bracketedPasteMode):0,K.triggerDataEvent(`${a.C0.ESC}[${T?"":"?"}${J};${oe}$y`),!0;var J,oe}_updateAttrColor(x,T,M,O,F){return T===2?(x|=50331648,x&=-16777216,x|=d.AttributeData.fromColorRGB([M,O,F])):T===5&&(x&=-50331904,x|=33554432|255&M),x}_extractColor(x,T,M){const O=[0,0,-1,0,0,0];let F=0,K=0;do{if(O[K+F]=x.params[T+K],x.hasSubParams(T+K)){const ee=x.getSubParams(T+K);let re=0;do O[1]===5&&(F=1),O[K+re+1+F]=ee[re];while(++re<ee.length&&re+K+1+F<O.length);break}if(O[1]===5&&K+F>=2||O[1]===2&&K+F>=5)break;O[1]&&(F=1)}while(++K+T<x.length&&K+F<O.length);for(let ee=2;ee<O.length;++ee)O[ee]===-1&&(O[ee]=0);switch(O[0]){case 38:M.fg=this._updateAttrColor(M.fg,O[1],O[3],O[4],O[5]);break;case 48:M.bg=this._updateAttrColor(M.bg,O[1],O[3],O[4],O[5]);break;case 58:M.extended=M.extended.clone(),M.extended.underlineColor=this._updateAttrColor(M.extended.underlineColor,O[1],O[3],O[4],O[5])}return K}_processUnderline(x,T){T.extended=T.extended.clone(),(!~x||x>5)&&(x=1),T.extended.underlineStyle=x,T.fg|=268435456,x===0&&(T.fg&=-268435457),T.updateExtended()}_processSGR0(x){x.fg=t.DEFAULT_ATTR_DATA.fg,x.bg=t.DEFAULT_ATTR_DATA.bg,x.extended=x.extended.clone(),x.extended.underlineStyle=0,x.extended.underlineColor&=-67108864,x.updateExtended()}charAttributes(x){if(x.length===1&&x.params[0]===0)return this._processSGR0(this._curAttrData),!0;const T=x.length;let M;const O=this._curAttrData;for(let F=0;F<T;F++)M=x.params[F],M>=30&&M<=37?(O.fg&=-50331904,O.fg|=16777216|M-30):M>=40&&M<=47?(O.bg&=-50331904,O.bg|=16777216|M-40):M>=90&&M<=97?(O.fg&=-50331904,O.fg|=16777224|M-90):M>=100&&M<=107?(O.bg&=-50331904,O.bg|=16777224|M-100):M===0?this._processSGR0(O):M===1?O.fg|=134217728:M===3?O.bg|=67108864:M===4?(O.fg|=268435456,this._processUnderline(x.hasSubParams(F)?x.getSubParams(F)[0]:1,O)):M===5?O.fg|=536870912:M===7?O.fg|=67108864:M===8?O.fg|=1073741824:M===9?O.fg|=2147483648:M===2?O.bg|=134217728:M===21?this._processUnderline(2,O):M===22?(O.fg&=-134217729,O.bg&=-134217729):M===23?O.bg&=-67108865:M===24?(O.fg&=-268435457,this._processUnderline(0,O)):M===25?O.fg&=-536870913:M===27?O.fg&=-67108865:M===28?O.fg&=-1073741825:M===29?O.fg&=2147483647:M===39?(O.fg&=-67108864,O.fg|=16777215&t.DEFAULT_ATTR_DATA.fg):M===49?(O.bg&=-67108864,O.bg|=16777215&t.DEFAULT_ATTR_DATA.bg):M===38||M===48||M===58?F+=this._extractColor(x,F,O):M===53?O.bg|=1073741824:M===55?O.bg&=-1073741825:M===59?(O.extended=O.extended.clone(),O.extended.underlineColor=-1,O.updateExtended()):M===100?(O.fg&=-67108864,O.fg|=16777215&t.DEFAULT_ATTR_DATA.fg,O.bg&=-67108864,O.bg|=16777215&t.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",M);return!0}deviceStatus(x){switch(x.params[0]){case 5:this._coreService.triggerDataEvent(`${a.C0.ESC}[0n`);break;case 6:const T=this._activeBuffer.y+1,M=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${a.C0.ESC}[${T};${M}R`)}return!0}deviceStatusPrivate(x){if(x.params[0]===6){const T=this._activeBuffer.y+1,M=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${a.C0.ESC}[?${T};${M}R`)}return!0}softReset(x){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=t.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(x){const T=x.params[0]||1;switch(T){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}const M=T%2==1;return this._optionsService.options.cursorBlink=M,!0}setScrollRegion(x){const T=x.params[0]||1;let M;return(x.length<2||(M=x.params[1])>this._bufferService.rows||M===0)&&(M=this._bufferService.rows),M>T&&(this._activeBuffer.scrollTop=T-1,this._activeBuffer.scrollBottom=M-1,this._setCursor(0,0)),!0}windowOptions(x){if(!P(x.params[0],this._optionsService.rawOptions.windowOptions))return!0;const T=x.length>1?x.params[1]:0;switch(x.params[0]){case 14:T!==2&&this._onRequestWindowsOptionsReport.fire(A.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(A.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${a.C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:T!==0&&T!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),T!==0&&T!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:T!==0&&T!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),T!==0&&T!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0}saveCursor(x){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(x){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(x){return this._windowTitle=x,this._onTitleChange.fire(x),!0}setIconName(x){return this._iconName=x,!0}setOrReportIndexedColor(x){const T=[],M=x.split(";");for(;M.length>1;){const O=M.shift(),F=M.shift();if(/^\d+$/.exec(O)){const K=parseInt(O);if(Q(K))if(F==="?")T.push({type:0,index:K});else{const ee=(0,w.parseColor)(F);ee&&T.push({type:1,index:K,color:ee})}}}return T.length&&this._onColor.fire(T),!0}setHyperlink(x){const T=x.split(";");return!(T.length<2)&&(T[1]?this._createHyperlink(T[0],T[1]):!T[0]&&this._finishHyperlink())}_createHyperlink(x,T){this._getCurrentLinkId()&&this._finishHyperlink();const M=x.split(":");let O;const F=M.findIndex(K=>K.startsWith("id="));return F!==-1&&(O=M[F].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:O,uri:T}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(x,T){const M=x.split(";");for(let O=0;O<M.length&&!(T>=this._specialColors.length);++O,++T)if(M[O]==="?")this._onColor.fire([{type:0,index:this._specialColors[T]}]);else{const F=(0,w.parseColor)(M[O]);F&&this._onColor.fire([{type:1,index:this._specialColors[T],color:F}])}return!0}setOrReportFgColor(x){return this._setOrReportSpecialColor(x,0)}setOrReportBgColor(x){return this._setOrReportSpecialColor(x,1)}setOrReportCursorColor(x){return this._setOrReportSpecialColor(x,2)}restoreIndexedColor(x){if(!x)return this._onColor.fire([{type:2}]),!0;const T=[],M=x.split(";");for(let O=0;O<M.length;++O)if(/^\d+$/.exec(M[O])){const F=parseInt(M[O]);Q(F)&&T.push({type:2,index:F})}return T.length&&this._onColor.fire(T),!0}restoreFgColor(x){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(x){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(x){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,l.DEFAULT_CHARSET),!0}selectCharset(x){return x.length!==2?(this.selectDefaultCharset(),!0):(x[0]==="/"||this._charsetService.setgCharset(R[x[0]],l.CHARSETS[x[1]]||l.DEFAULT_CHARSET),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){const x=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,x,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=t.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=t.DEFAULT_ATTR_DATA.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal}setgLevel(x){return this._charsetService.setgLevel(x),!0}screenAlignmentPattern(){const x=new r.CellData;x.content=4194373,x.fg=this._curAttrData.fg,x.bg=this._curAttrData.bg,this._setCursor(0,0);for(let T=0;T<this._bufferService.rows;++T){const M=this._activeBuffer.ybase+this._activeBuffer.y+T,O=this._activeBuffer.lines.get(M);O&&(O.fill(x),O.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(x,T){const M=this._bufferService.buffer,O=this._optionsService.rawOptions;return(F=>(this._coreService.triggerDataEvent(`${a.C0.ESC}${F}${a.C0.ESC}\\`),!0))(x==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:x==='"p'?'P1$r61;1"p':x==="r"?`P1$r${M.scrollTop+1};${M.scrollBottom+1}r`:x==="m"?"P1$r0m":x===" q"?`P1$r${{block:2,underline:4,bar:6}[O.cursorStyle]-(O.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(x,T){this._dirtyRowTracker.markRangeDirty(x,T)}}i.InputHandler=q;let V=class{constructor(G){this._bufferService=G,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(G){G<this.start?this.start=G:G>this.end&&(this.end=G)}markRangeDirty(G,x){G>x&&(N=G,G=x,x=N),G<this.start&&(this.start=G),x>this.end&&(this.end=x)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};function Q(G){return 0<=G&&G<256}V=c([f(0,g.IBufferService)],V)},844:(k,i)=>{function o(c){for(const f of c)f.dispose();c.length=0}Object.defineProperty(i,"__esModule",{value:!0}),i.getDisposeArrayDisposable=i.disposeArray=i.toDisposable=i.MutableDisposable=i.Disposable=void 0,i.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const c of this._disposables)c.dispose();this._disposables.length=0}register(c){return this._disposables.push(c),c}unregister(c){const f=this._disposables.indexOf(c);f!==-1&&this._disposables.splice(f,1)}},i.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(c){this._isDisposed||c===this._value||(this._value?.dispose(),this._value=c)}clear(){this.value=void 0}dispose(){this._isDisposed=!0,this._value?.dispose(),this._value=void 0}},i.toDisposable=function(c){return{dispose:c}},i.disposeArray=o,i.getDisposeArrayDisposable=function(c){return{dispose:()=>o(c)}}},1505:(k,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.FourKeyMap=i.TwoKeyMap=void 0;class o{constructor(){this._data={}}set(f,a,l){this._data[f]||(this._data[f]={}),this._data[f][a]=l}get(f,a){return this._data[f]?this._data[f][a]:void 0}clear(){this._data={}}}i.TwoKeyMap=o,i.FourKeyMap=class{constructor(){this._data=new o}set(c,f,a,l,p){this._data.get(c,f)||this._data.set(c,f,new o),this._data.get(c,f).set(a,l,p)}get(c,f,a,l){return this._data.get(c,f)?.get(a,l)}clear(){this._data.clear()}}},6114:(k,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.isChromeOS=i.isLinux=i.isWindows=i.isIphone=i.isIpad=i.isMac=i.getSafariVersion=i.isSafari=i.isLegacyEdge=i.isFirefox=i.isNode=void 0,i.isNode=typeof process<"u"&&"title"in process;const o=i.isNode?"node":navigator.userAgent,c=i.isNode?"node":navigator.platform;i.isFirefox=o.includes("Firefox"),i.isLegacyEdge=o.includes("Edge"),i.isSafari=/^((?!chrome|android).)*safari/i.test(o),i.getSafariVersion=function(){if(!i.isSafari)return 0;const f=o.match(/Version\/(\d+)/);return f===null||f.length<2?0:parseInt(f[1])},i.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(c),i.isIpad=c==="iPad",i.isIphone=c==="iPhone",i.isWindows=["Windows","Win16","Win32","WinCE"].includes(c),i.isLinux=c.indexOf("Linux")>=0,i.isChromeOS=/\bCrOS\b/.test(o)},6106:(k,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.SortedList=void 0;let o=0;i.SortedList=class{constructor(c){this._getKey=c,this._array=[]}clear(){this._array.length=0}insert(c){this._array.length!==0?(o=this._search(this._getKey(c)),this._array.splice(o,0,c)):this._array.push(c)}delete(c){if(this._array.length===0)return!1;const f=this._getKey(c);if(f===void 0||(o=this._search(f),o===-1)||this._getKey(this._array[o])!==f)return!1;do if(this._array[o]===c)return this._array.splice(o,1),!0;while(++o<this._array.length&&this._getKey(this._array[o])===f);return!1}*getKeyIterator(c){if(this._array.length!==0&&(o=this._search(c),!(o<0||o>=this._array.length)&&this._getKey(this._array[o])===c))do yield this._array[o];while(++o<this._array.length&&this._getKey(this._array[o])===c)}forEachByKey(c,f){if(this._array.length!==0&&(o=this._search(c),!(o<0||o>=this._array.length)&&this._getKey(this._array[o])===c))do f(this._array[o]);while(++o<this._array.length&&this._getKey(this._array[o])===c)}values(){return[...this._array].values()}_search(c){let f=0,a=this._array.length-1;for(;a>=f;){let l=f+a>>1;const p=this._getKey(this._array[l]);if(p>c)a=l-1;else{if(!(p<c)){for(;l>0&&this._getKey(this._array[l-1])===c;)l--;return l}f=l+1}}return f}}},7226:(k,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DebouncedIdleTask=i.IdleTaskQueue=i.PriorityTaskQueue=void 0;const c=o(6114);class f{constructor(){this._tasks=[],this._i=0}enqueue(p){this._tasks.push(p),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(p){this._idleCallback=void 0;let S=0,u=0,t=p.timeRemaining(),n=0;for(;this._i<this._tasks.length;){if(S=Date.now(),this._tasks[this._i]()||this._i++,S=Math.max(1,Date.now()-S),u=Math.max(S,u),n=p.timeRemaining(),1.5*u>n)return t-S<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(t-S))}ms`),void this._start();t=n}this.clear()}}class a extends f{_requestCallback(p){return setTimeout(()=>p(this._createDeadline(16)))}_cancelCallback(p){clearTimeout(p)}_createDeadline(p){const S=Date.now()+p;return{timeRemaining:()=>Math.max(0,S-Date.now())}}}i.PriorityTaskQueue=a,i.IdleTaskQueue=!c.isNode&&"requestIdleCallback"in window?class extends f{_requestCallback(l){return requestIdleCallback(l)}_cancelCallback(l){cancelIdleCallback(l)}}:a,i.DebouncedIdleTask=class{constructor(){this._queue=new i.IdleTaskQueue}set(l){this._queue.clear(),this._queue.enqueue(l)}flush(){this._queue.flush()}}},9282:(k,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.updateWindowsModeWrappedState=void 0;const c=o(643);i.updateWindowsModeWrappedState=function(f){const a=f.buffer.lines.get(f.buffer.ybase+f.buffer.y-1),l=a?.get(f.cols-1),p=f.buffer.lines.get(f.buffer.ybase+f.buffer.y);p&&l&&(p.isWrapped=l[c.CHAR_DATA_CODE_INDEX]!==c.NULL_CELL_CODE&&l[c.CHAR_DATA_CODE_INDEX]!==c.WHITESPACE_CELL_CODE)}},3734:(k,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ExtendedAttrs=i.AttributeData=void 0;class o{constructor(){this.fg=0,this.bg=0,this.extended=new c}static toColorRGB(a){return[a>>>16&255,a>>>8&255,255&a]}static fromColorRGB(a){return(255&a[0])<<16|(255&a[1])<<8|255&a[2]}clone(){const a=new o;return a.fg=this.fg,a.bg=this.bg,a.extended=this.extended.clone(),a}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}getUnderlineVariantOffset(){return this.extended.underlineVariantOffset}}i.AttributeData=o;class c{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(a){this._ext=a}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(a){this._ext&=-469762049,this._ext|=a<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(a){this._ext&=-67108864,this._ext|=67108863&a}get urlId(){return this._urlId}set urlId(a){this._urlId=a}get underlineVariantOffset(){const a=(3758096384&this._ext)>>29;return a<0?4294967288^a:a}set underlineVariantOffset(a){this._ext&=536870911,this._ext|=a<<29&3758096384}constructor(a=0,l=0){this._ext=0,this._urlId=0,this._ext=a,this._urlId=l}clone(){return new c(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}i.ExtendedAttrs=c},9092:(k,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Buffer=i.MAX_BUFFER_SIZE=void 0;const c=o(6349),f=o(7226),a=o(3734),l=o(8437),p=o(4634),S=o(511),u=o(643),t=o(4863),n=o(7116);i.MAX_BUFFER_SIZE=4294967295,i.Buffer=class{constructor(e,r,d){this._hasScrollback=e,this._optionsService=r,this._bufferService=d,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=l.DEFAULT_ATTR_DATA.clone(),this.savedCharset=n.DEFAULT_CHARSET,this.markers=[],this._nullCell=S.CellData.fromCharData([0,u.NULL_CELL_CHAR,u.NULL_CELL_WIDTH,u.NULL_CELL_CODE]),this._whitespaceCell=S.CellData.fromCharData([0,u.WHITESPACE_CELL_CHAR,u.WHITESPACE_CELL_WIDTH,u.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._memoryCleanupQueue=new f.IdleTaskQueue,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new c.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(e){return e?(this._nullCell.fg=e.fg,this._nullCell.bg=e.bg,this._nullCell.extended=e.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new a.ExtendedAttrs),this._nullCell}getWhitespaceCell(e){return e?(this._whitespaceCell.fg=e.fg,this._whitespaceCell.bg=e.bg,this._whitespaceCell.extended=e.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new a.ExtendedAttrs),this._whitespaceCell}getBlankLine(e,r){return new l.BufferLine(this._bufferService.cols,this.getNullCell(e),r)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){const e=this.ybase+this.y-this.ydisp;return e>=0&&e<this._rows}_getCorrectBufferLength(e){if(!this._hasScrollback)return e;const r=e+this._optionsService.rawOptions.scrollback;return r>i.MAX_BUFFER_SIZE?i.MAX_BUFFER_SIZE:r}fillViewportRows(e){if(this.lines.length===0){e===void 0&&(e=l.DEFAULT_ATTR_DATA);let r=this._rows;for(;r--;)this.lines.push(this.getBlankLine(e))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new c.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(e,r){const d=this.getNullCell(l.DEFAULT_ATTR_DATA);let g=0;const m=this._getCorrectBufferLength(r);if(m>this.lines.maxLength&&(this.lines.maxLength=m),this.lines.length>0){if(this._cols<e)for(let v=0;v<this.lines.length;v++)g+=+this.lines.get(v).resize(e,d);let b=0;if(this._rows<r)for(let v=this._rows;v<r;v++)this.lines.length<r+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new l.BufferLine(e,d)):this.ybase>0&&this.lines.length<=this.ybase+this.y+b+1?(this.ybase--,b++,this.ydisp>0&&this.ydisp--):this.lines.push(new l.BufferLine(e,d)));else for(let v=this._rows;v>r;v--)this.lines.length>r+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(m<this.lines.maxLength){const v=this.lines.length-m;v>0&&(this.lines.trimStart(v),this.ybase=Math.max(this.ybase-v,0),this.ydisp=Math.max(this.ydisp-v,0),this.savedY=Math.max(this.savedY-v,0)),this.lines.maxLength=m}this.x=Math.min(this.x,e-1),this.y=Math.min(this.y,r-1),b&&(this.y+=b),this.savedX=Math.min(this.savedX,e-1),this.scrollTop=0}if(this.scrollBottom=r-1,this._isReflowEnabled&&(this._reflow(e,r),this._cols>e))for(let b=0;b<this.lines.length;b++)g+=+this.lines.get(b).resize(e,d);this._cols=e,this._rows=r,this._memoryCleanupQueue.clear(),g>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue(()=>this._batchedMemoryCleanup()))}_batchedMemoryCleanup(){let e=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,e=!1);let r=0;for(;this._memoryCleanupPosition<this.lines.length;)if(r+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),r>100)return!0;return e}get _isReflowEnabled(){const e=this._optionsService.rawOptions.windowsPty;return e&&e.buildNumber?this._hasScrollback&&e.backend==="conpty"&&e.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(e,r){this._cols!==e&&(e>this._cols?this._reflowLarger(e,r):this._reflowSmaller(e,r))}_reflowLarger(e,r){const d=(0,p.reflowLargerGetLinesToRemove)(this.lines,this._cols,e,this.ybase+this.y,this.getNullCell(l.DEFAULT_ATTR_DATA));if(d.length>0){const g=(0,p.reflowLargerCreateNewLayout)(this.lines,d);(0,p.reflowLargerApplyNewLayout)(this.lines,g.layout),this._reflowLargerAdjustViewport(e,r,g.countRemoved)}}_reflowLargerAdjustViewport(e,r,d){const g=this.getNullCell(l.DEFAULT_ATTR_DATA);let m=d;for(;m-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<r&&this.lines.push(new l.BufferLine(e,g))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-d,0)}_reflowSmaller(e,r){const d=this.getNullCell(l.DEFAULT_ATTR_DATA),g=[];let m=0;for(let b=this.lines.length-1;b>=0;b--){let v=this.lines.get(b);if(!v||!v.isWrapped&&v.getTrimmedLength()<=e)continue;const w=[v];for(;v.isWrapped&&b>0;)v=this.lines.get(--b),w.unshift(v);const R=this.ybase+this.y;if(R>=b&&R<b+w.length)continue;const B=w[w.length-1].getTrimmedLength(),P=(0,p.reflowSmallerGetNewLineLengths)(w,this._cols,e),A=P.length-w.length;let N;N=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+A):Math.max(0,this.lines.length-this.lines.maxLength+A);const q=[];for(let M=0;M<A;M++){const O=this.getBlankLine(l.DEFAULT_ATTR_DATA,!0);q.push(O)}q.length>0&&(g.push({start:b+w.length+m,newLines:q}),m+=q.length),w.push(...q);let V=P.length-1,Q=P[V];Q===0&&(V--,Q=P[V]);let G=w.length-A-1,x=B;for(;G>=0;){const M=Math.min(x,Q);if(w[V]===void 0)break;if(w[V].copyCellsFrom(w[G],x-M,Q-M,M,!0),Q-=M,Q===0&&(V--,Q=P[V]),x-=M,x===0){G--;const O=Math.max(G,0);x=(0,p.getWrappedLineTrimmedLength)(w,O,this._cols)}}for(let M=0;M<w.length;M++)P[M]<e&&w[M].setCell(P[M],d);let T=A-N;for(;T-- >0;)this.ybase===0?this.y<r-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+m)-r&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+A,this.ybase+r-1)}if(g.length>0){const b=[],v=[];for(let V=0;V<this.lines.length;V++)v.push(this.lines.get(V));const w=this.lines.length;let R=w-1,B=0,P=g[B];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+m);let A=0;for(let V=Math.min(this.lines.maxLength-1,w+m-1);V>=0;V--)if(P&&P.start>R+A){for(let Q=P.newLines.length-1;Q>=0;Q--)this.lines.set(V--,P.newLines[Q]);V++,b.push({index:R+1,amount:P.newLines.length}),A+=P.newLines.length,P=g[++B]}else this.lines.set(V,v[R--]);let N=0;for(let V=b.length-1;V>=0;V--)b[V].index+=N,this.lines.onInsertEmitter.fire(b[V]),N+=b[V].amount;const q=Math.max(0,w+m-this.lines.maxLength);q>0&&this.lines.onTrimEmitter.fire(q)}}translateBufferLineToString(e,r,d=0,g){const m=this.lines.get(e);return m?m.translateToString(r,d,g):""}getWrappedRangeForLine(e){let r=e,d=e;for(;r>0&&this.lines.get(r).isWrapped;)r--;for(;d+1<this.lines.length&&this.lines.get(d+1).isWrapped;)d++;return{first:r,last:d}}setupTabStops(e){for(e!=null?this.tabs[e]||(e=this.prevStop(e)):(this.tabs={},e=0);e<this._cols;e+=this._optionsService.rawOptions.tabStopWidth)this.tabs[e]=!0}prevStop(e){for(e==null&&(e=this.x);!this.tabs[--e]&&e>0;);return e>=this._cols?this._cols-1:e<0?0:e}nextStop(e){for(e==null&&(e=this.x);!this.tabs[++e]&&e<this._cols;);return e>=this._cols?this._cols-1:e<0?0:e}clearMarkers(e){this._isClearing=!0;for(let r=0;r<this.markers.length;r++)this.markers[r].line===e&&(this.markers[r].dispose(),this.markers.splice(r--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let e=0;e<this.markers.length;e++)this.markers[e].dispose(),this.markers.splice(e--,1);this._isClearing=!1}addMarker(e){const r=new t.Marker(e);return this.markers.push(r),r.register(this.lines.onTrim(d=>{r.line-=d,r.line<0&&r.dispose()})),r.register(this.lines.onInsert(d=>{r.line>=d.index&&(r.line+=d.amount)})),r.register(this.lines.onDelete(d=>{r.line>=d.index&&r.line<d.index+d.amount&&r.dispose(),r.line>d.index&&(r.line-=d.amount)})),r.register(r.onDispose(()=>this._removeMarker(r))),r}_removeMarker(e){this._isClearing||this.markers.splice(this.markers.indexOf(e),1)}}},8437:(k,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferLine=i.DEFAULT_ATTR_DATA=void 0;const c=o(3734),f=o(511),a=o(643),l=o(482);i.DEFAULT_ATTR_DATA=Object.freeze(new c.AttributeData);let p=0;class S{constructor(t,n,e=!1){this.isWrapped=e,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*t);const r=n||f.CellData.fromCharData([0,a.NULL_CELL_CHAR,a.NULL_CELL_WIDTH,a.NULL_CELL_CODE]);for(let d=0;d<t;++d)this.setCell(d,r);this.length=t}get(t){const n=this._data[3*t+0],e=2097151&n;return[this._data[3*t+1],2097152&n?this._combined[t]:e?(0,l.stringFromCodePoint)(e):"",n>>22,2097152&n?this._combined[t].charCodeAt(this._combined[t].length-1):e]}set(t,n){this._data[3*t+1]=n[a.CHAR_DATA_ATTR_INDEX],n[a.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[t]=n[1],this._data[3*t+0]=2097152|t|n[a.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*t+0]=n[a.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|n[a.CHAR_DATA_WIDTH_INDEX]<<22}getWidth(t){return this._data[3*t+0]>>22}hasWidth(t){return 12582912&this._data[3*t+0]}getFg(t){return this._data[3*t+1]}getBg(t){return this._data[3*t+2]}hasContent(t){return 4194303&this._data[3*t+0]}getCodePoint(t){const n=this._data[3*t+0];return 2097152&n?this._combined[t].charCodeAt(this._combined[t].length-1):2097151&n}isCombined(t){return 2097152&this._data[3*t+0]}getString(t){const n=this._data[3*t+0];return 2097152&n?this._combined[t]:2097151&n?(0,l.stringFromCodePoint)(2097151&n):""}isProtected(t){return 536870912&this._data[3*t+2]}loadCell(t,n){return p=3*t,n.content=this._data[p+0],n.fg=this._data[p+1],n.bg=this._data[p+2],2097152&n.content&&(n.combinedData=this._combined[t]),268435456&n.bg&&(n.extended=this._extendedAttrs[t]),n}setCell(t,n){2097152&n.content&&(this._combined[t]=n.combinedData),268435456&n.bg&&(this._extendedAttrs[t]=n.extended),this._data[3*t+0]=n.content,this._data[3*t+1]=n.fg,this._data[3*t+2]=n.bg}setCellFromCodepoint(t,n,e,r){268435456&r.bg&&(this._extendedAttrs[t]=r.extended),this._data[3*t+0]=n|e<<22,this._data[3*t+1]=r.fg,this._data[3*t+2]=r.bg}addCodepointToCell(t,n,e){let r=this._data[3*t+0];2097152&r?this._combined[t]+=(0,l.stringFromCodePoint)(n):2097151&r?(this._combined[t]=(0,l.stringFromCodePoint)(2097151&r)+(0,l.stringFromCodePoint)(n),r&=-2097152,r|=2097152):r=n|4194304,e&&(r&=-12582913,r|=e<<22),this._data[3*t+0]=r}insertCells(t,n,e){if((t%=this.length)&&this.getWidth(t-1)===2&&this.setCellFromCodepoint(t-1,0,1,e),n<this.length-t){const r=new f.CellData;for(let d=this.length-t-n-1;d>=0;--d)this.setCell(t+n+d,this.loadCell(t+d,r));for(let d=0;d<n;++d)this.setCell(t+d,e)}else for(let r=t;r<this.length;++r)this.setCell(r,e);this.getWidth(this.length-1)===2&&this.setCellFromCodepoint(this.length-1,0,1,e)}deleteCells(t,n,e){if(t%=this.length,n<this.length-t){const r=new f.CellData;for(let d=0;d<this.length-t-n;++d)this.setCell(t+d,this.loadCell(t+n+d,r));for(let d=this.length-n;d<this.length;++d)this.setCell(d,e)}else for(let r=t;r<this.length;++r)this.setCell(r,e);t&&this.getWidth(t-1)===2&&this.setCellFromCodepoint(t-1,0,1,e),this.getWidth(t)!==0||this.hasContent(t)||this.setCellFromCodepoint(t,0,1,e)}replaceCells(t,n,e,r=!1){if(r)for(t&&this.getWidth(t-1)===2&&!this.isProtected(t-1)&&this.setCellFromCodepoint(t-1,0,1,e),n<this.length&&this.getWidth(n-1)===2&&!this.isProtected(n)&&this.setCellFromCodepoint(n,0,1,e);t<n&&t<this.length;)this.isProtected(t)||this.setCell(t,e),t++;else for(t&&this.getWidth(t-1)===2&&this.setCellFromCodepoint(t-1,0,1,e),n<this.length&&this.getWidth(n-1)===2&&this.setCellFromCodepoint(n,0,1,e);t<n&&t<this.length;)this.setCell(t++,e)}resize(t,n){if(t===this.length)return 4*this._data.length*2<this._data.buffer.byteLength;const e=3*t;if(t>this.length){if(this._data.buffer.byteLength>=4*e)this._data=new Uint32Array(this._data.buffer,0,e);else{const r=new Uint32Array(e);r.set(this._data),this._data=r}for(let r=this.length;r<t;++r)this.setCell(r,n)}else{this._data=this._data.subarray(0,e);const r=Object.keys(this._combined);for(let g=0;g<r.length;g++){const m=parseInt(r[g],10);m>=t&&delete this._combined[m]}const d=Object.keys(this._extendedAttrs);for(let g=0;g<d.length;g++){const m=parseInt(d[g],10);m>=t&&delete this._extendedAttrs[m]}}return this.length=t,4*e*2<this._data.buffer.byteLength}cleanupMemory(){if(4*this._data.length*2<this._data.buffer.byteLength){const t=new Uint32Array(this._data.length);return t.set(this._data),this._data=t,1}return 0}fill(t,n=!1){if(n)for(let e=0;e<this.length;++e)this.isProtected(e)||this.setCell(e,t);else{this._combined={},this._extendedAttrs={};for(let e=0;e<this.length;++e)this.setCell(e,t)}}copyFrom(t){this.length!==t.length?this._data=new Uint32Array(t._data):this._data.set(t._data),this.length=t.length,this._combined={};for(const n in t._combined)this._combined[n]=t._combined[n];this._extendedAttrs={};for(const n in t._extendedAttrs)this._extendedAttrs[n]=t._extendedAttrs[n];this.isWrapped=t.isWrapped}clone(){const t=new S(0);t._data=new Uint32Array(this._data),t.length=this.length;for(const n in this._combined)t._combined[n]=this._combined[n];for(const n in this._extendedAttrs)t._extendedAttrs[n]=this._extendedAttrs[n];return t.isWrapped=this.isWrapped,t}getTrimmedLength(){for(let t=this.length-1;t>=0;--t)if(4194303&this._data[3*t+0])return t+(this._data[3*t+0]>>22);return 0}getNoBgTrimmedLength(){for(let t=this.length-1;t>=0;--t)if(4194303&this._data[3*t+0]||50331648&this._data[3*t+2])return t+(this._data[3*t+0]>>22);return 0}copyCellsFrom(t,n,e,r,d){const g=t._data;if(d)for(let b=r-1;b>=0;b--){for(let v=0;v<3;v++)this._data[3*(e+b)+v]=g[3*(n+b)+v];268435456&g[3*(n+b)+2]&&(this._extendedAttrs[e+b]=t._extendedAttrs[n+b])}else for(let b=0;b<r;b++){for(let v=0;v<3;v++)this._data[3*(e+b)+v]=g[3*(n+b)+v];268435456&g[3*(n+b)+2]&&(this._extendedAttrs[e+b]=t._extendedAttrs[n+b])}const m=Object.keys(t._combined);for(let b=0;b<m.length;b++){const v=parseInt(m[b],10);v>=n&&(this._combined[v-n+e]=t._combined[v])}}translateToString(t,n,e,r){n=n??0,e=e??this.length,t&&(e=Math.min(e,this.getTrimmedLength())),r&&(r.length=0);let d="";for(;n<e;){const g=this._data[3*n+0],m=2097151&g,b=2097152&g?this._combined[n]:m?(0,l.stringFromCodePoint)(m):a.WHITESPACE_CELL_CHAR;if(d+=b,r)for(let v=0;v<b.length;++v)r.push(n);n+=g>>22||1}return r&&r.push(n),d}}i.BufferLine=S},4841:(k,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.getRangeLength=void 0,i.getRangeLength=function(o,c){if(o.start.y>o.end.y)throw new Error(`Buffer range end (${o.end.x}, ${o.end.y}) cannot be before start (${o.start.x}, ${o.start.y})`);return c*(o.end.y-o.start.y)+(o.end.x-o.start.x+1)}},4634:(k,i)=>{function o(c,f,a){if(f===c.length-1)return c[f].getTrimmedLength();const l=!c[f].hasContent(a-1)&&c[f].getWidth(a-1)===1,p=c[f+1].getWidth(0)===2;return l&&p?a-1:a}Object.defineProperty(i,"__esModule",{value:!0}),i.getWrappedLineTrimmedLength=i.reflowSmallerGetNewLineLengths=i.reflowLargerApplyNewLayout=i.reflowLargerCreateNewLayout=i.reflowLargerGetLinesToRemove=void 0,i.reflowLargerGetLinesToRemove=function(c,f,a,l,p){const S=[];for(let u=0;u<c.length-1;u++){let t=u,n=c.get(++t);if(!n.isWrapped)continue;const e=[c.get(u)];for(;t<c.length&&n.isWrapped;)e.push(n),n=c.get(++t);if(l>=u&&l<t){u+=e.length-1;continue}let r=0,d=o(e,r,f),g=1,m=0;for(;g<e.length;){const v=o(e,g,f),w=v-m,R=a-d,B=Math.min(w,R);e[r].copyCellsFrom(e[g],m,d,B,!1),d+=B,d===a&&(r++,d=0),m+=B,m===v&&(g++,m=0),d===0&&r!==0&&e[r-1].getWidth(a-1)===2&&(e[r].copyCellsFrom(e[r-1],a-1,d++,1,!1),e[r-1].setCell(a-1,p))}e[r].replaceCells(d,a,p);let b=0;for(let v=e.length-1;v>0&&(v>r||e[v].getTrimmedLength()===0);v--)b++;b>0&&(S.push(u+e.length-b),S.push(b)),u+=e.length-1}return S},i.reflowLargerCreateNewLayout=function(c,f){const a=[];let l=0,p=f[l],S=0;for(let u=0;u<c.length;u++)if(p===u){const t=f[++l];c.onDeleteEmitter.fire({index:u-S,amount:t}),u+=t-1,S+=t,p=f[++l]}else a.push(u);return{layout:a,countRemoved:S}},i.reflowLargerApplyNewLayout=function(c,f){const a=[];for(let l=0;l<f.length;l++)a.push(c.get(f[l]));for(let l=0;l<a.length;l++)c.set(l,a[l]);c.length=f.length},i.reflowSmallerGetNewLineLengths=function(c,f,a){const l=[],p=c.map((n,e)=>o(c,e,f)).reduce((n,e)=>n+e);let S=0,u=0,t=0;for(;t<p;){if(p-t<a){l.push(p-t);break}S+=a;const n=o(c,u,f);S>n&&(S-=n,u++);const e=c[u].getWidth(S-1)===2;e&&S--;const r=e?a-1:a;l.push(r),t+=r}return l},i.getWrappedLineTrimmedLength=o},5295:(k,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferSet=void 0;const c=o(8460),f=o(844),a=o(9092);class l extends f.Disposable{constructor(S,u){super(),this._optionsService=S,this._bufferService=u,this._onBufferActivate=this.register(new c.EventEmitter),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.resize(this._bufferService.cols,this._bufferService.rows))),this.register(this._optionsService.onSpecificOptionChange("tabStopWidth",()=>this.setupTabStops()))}reset(){this._normal=new a.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new a.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(S){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(S),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(S,u){this._normal.resize(S,u),this._alt.resize(S,u),this.setupTabStops(S)}setupTabStops(S){this._normal.setupTabStops(S),this._alt.setupTabStops(S)}}i.BufferSet=l},511:(k,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CellData=void 0;const c=o(482),f=o(643),a=o(3734);class l extends a.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new a.ExtendedAttrs,this.combinedData=""}static fromCharData(S){const u=new l;return u.setFromCharData(S),u}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,c.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(S){this.fg=S[f.CHAR_DATA_ATTR_INDEX],this.bg=0;let u=!1;if(S[f.CHAR_DATA_CHAR_INDEX].length>2)u=!0;else if(S[f.CHAR_DATA_CHAR_INDEX].length===2){const t=S[f.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=t&&t<=56319){const n=S[f.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=n&&n<=57343?this.content=1024*(t-55296)+n-56320+65536|S[f.CHAR_DATA_WIDTH_INDEX]<<22:u=!0}else u=!0}else this.content=S[f.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|S[f.CHAR_DATA_WIDTH_INDEX]<<22;u&&(this.combinedData=S[f.CHAR_DATA_CHAR_INDEX],this.content=2097152|S[f.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}i.CellData=l},643:(k,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.WHITESPACE_CELL_CODE=i.WHITESPACE_CELL_WIDTH=i.WHITESPACE_CELL_CHAR=i.NULL_CELL_CODE=i.NULL_CELL_WIDTH=i.NULL_CELL_CHAR=i.CHAR_DATA_CODE_INDEX=i.CHAR_DATA_WIDTH_INDEX=i.CHAR_DATA_CHAR_INDEX=i.CHAR_DATA_ATTR_INDEX=i.DEFAULT_EXT=i.DEFAULT_ATTR=i.DEFAULT_COLOR=void 0,i.DEFAULT_COLOR=0,i.DEFAULT_ATTR=256|i.DEFAULT_COLOR<<9,i.DEFAULT_EXT=0,i.CHAR_DATA_ATTR_INDEX=0,i.CHAR_DATA_CHAR_INDEX=1,i.CHAR_DATA_WIDTH_INDEX=2,i.CHAR_DATA_CODE_INDEX=3,i.NULL_CELL_CHAR="",i.NULL_CELL_WIDTH=1,i.NULL_CELL_CODE=0,i.WHITESPACE_CELL_CHAR=" ",i.WHITESPACE_CELL_WIDTH=1,i.WHITESPACE_CELL_CODE=32},4863:(k,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Marker=void 0;const c=o(8460),f=o(844);class a{get id(){return this._id}constructor(p){this.line=p,this.isDisposed=!1,this._disposables=[],this._id=a._nextId++,this._onDispose=this.register(new c.EventEmitter),this.onDispose=this._onDispose.event}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),(0,f.disposeArray)(this._disposables),this._disposables.length=0)}register(p){return this._disposables.push(p),p}}i.Marker=a,a._nextId=1},7116:(k,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DEFAULT_CHARSET=i.CHARSETS=void 0,i.CHARSETS={},i.DEFAULT_CHARSET=i.CHARSETS.B,i.CHARSETS[0]={"`":"â",a:"â",b:"â",c:"â",d:"â",e:"â",f:"Â°",g:"Â±",h:"â¤",i:"â",j:"â",k:"â",l:"â",m:"â",n:"â¼",o:"âº",p:"â»",q:"â",r:"â¼",s:"â½",t:"â",u:"â¤",v:"â´",w:"â¬",x:"â",y:"â¤",z:"â¥","{":"Ï","|":"â ","}":"Â£","~":"Â·"},i.CHARSETS.A={"#":"Â£"},i.CHARSETS.B=void 0,i.CHARSETS[4]={"#":"Â£","@":"Â¾","[":"ij","\\":"Â½","]":"|","{":"Â¨","|":"f","}":"Â¼","~":"Â´"},i.CHARSETS.C=i.CHARSETS[5]={"[":"Ã","\\":"Ã","]":"Ã","^":"Ã","`":"Ã©","{":"Ã¤","|":"Ã¶","}":"Ã¥","~":"Ã¼"},i.CHARSETS.R={"#":"Â£","@":"Ã ","[":"Â°","\\":"Ã§","]":"Â§","{":"Ã©","|":"Ã¹","}":"Ã¨","~":"Â¨"},i.CHARSETS.Q={"@":"Ã ","[":"Ã¢","\\":"Ã§","]":"Ãª","^":"Ã®","`":"Ã´","{":"Ã©","|":"Ã¹","}":"Ã¨","~":"Ã»"},i.CHARSETS.K={"@":"Â§","[":"Ã","\\":"Ã","]":"Ã","{":"Ã¤","|":"Ã¶","}":"Ã¼","~":"Ã"},i.CHARSETS.Y={"#":"Â£","@":"Â§","[":"Â°","\\":"Ã§","]":"Ã©","`":"Ã¹","{":"Ã ","|":"Ã²","}":"Ã¨","~":"Ã¬"},i.CHARSETS.E=i.CHARSETS[6]={"@":"Ã","[":"Ã","\\":"Ã","]":"Ã","^":"Ã","`":"Ã¤","{":"Ã¦","|":"Ã¸","}":"Ã¥","~":"Ã¼"},i.CHARSETS.Z={"#":"Â£","@":"Â§","[":"Â¡","\\":"Ã","]":"Â¿","{":"Â°","|":"Ã±","}":"Ã§"},i.CHARSETS.H=i.CHARSETS[7]={"@":"Ã","[":"Ã","\\":"Ã","]":"Ã","^":"Ã","`":"Ã©","{":"Ã¤","|":"Ã¶","}":"Ã¥","~":"Ã¼"},i.CHARSETS["="]={"#":"Ã¹","@":"Ã ","[":"Ã©","\\":"Ã§","]":"Ãª","^":"Ã®",_:"Ã¨","`":"Ã´","{":"Ã¤","|":"Ã¶","}":"Ã¼","~":"Ã»"}},2584:(k,i)=>{var o,c,f;Object.defineProperty(i,"__esModule",{value:!0}),i.C1_ESCAPED=i.C1=i.C0=void 0,function(a){a.NUL="\0",a.SOH="",a.STX="",a.ETX="",a.EOT="",a.ENQ="",a.ACK="",a.BEL="\x07",a.BS="\b",a.HT="	",a.LF=`
`,a.VT="\v",a.FF="\f",a.CR="\r",a.SO="",a.SI="",a.DLE="",a.DC1="",a.DC2="",a.DC3="",a.DC4="",a.NAK="",a.SYN="",a.ETB="",a.CAN="",a.EM="",a.SUB="",a.ESC="\x1B",a.FS="",a.GS="",a.RS="",a.US="",a.SP=" ",a.DEL=""}(o||(i.C0=o={})),function(a){a.PAD="Â",a.HOP="Â",a.BPH="Â",a.NBH="Â",a.IND="Â",a.NEL="Â",a.SSA="Â",a.ESA="Â",a.HTS="Â",a.HTJ="Â",a.VTS="Â",a.PLD="Â",a.PLU="Â",a.RI="Â",a.SS2="Â",a.SS3="Â",a.DCS="Â",a.PU1="Â",a.PU2="Â",a.STS="Â",a.CCH="Â",a.MW="Â",a.SPA="Â",a.EPA="Â",a.SOS="Â",a.SGCI="Â",a.SCI="Â",a.CSI="Â",a.ST="Â",a.OSC="Â",a.PM="Â",a.APC="Â"}(c||(i.C1=c={})),function(a){a.ST=`${o.ESC}\\`}(f||(i.C1_ESCAPED=f={}))},7399:(k,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.evaluateKeyboardEvent=void 0;const c=o(2584),f={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};i.evaluateKeyboardEvent=function(a,l,p,S){const u={type:0,cancel:!1,key:void 0},t=(a.shiftKey?1:0)|(a.altKey?2:0)|(a.ctrlKey?4:0)|(a.metaKey?8:0);switch(a.keyCode){case 0:a.key==="UIKeyInputUpArrow"?u.key=l?c.C0.ESC+"OA":c.C0.ESC+"[A":a.key==="UIKeyInputLeftArrow"?u.key=l?c.C0.ESC+"OD":c.C0.ESC+"[D":a.key==="UIKeyInputRightArrow"?u.key=l?c.C0.ESC+"OC":c.C0.ESC+"[C":a.key==="UIKeyInputDownArrow"&&(u.key=l?c.C0.ESC+"OB":c.C0.ESC+"[B");break;case 8:u.key=a.ctrlKey?"\b":c.C0.DEL,a.altKey&&(u.key=c.C0.ESC+u.key);break;case 9:if(a.shiftKey){u.key=c.C0.ESC+"[Z";break}u.key=c.C0.HT,u.cancel=!0;break;case 13:u.key=a.altKey?c.C0.ESC+c.C0.CR:c.C0.CR,u.cancel=!0;break;case 27:u.key=c.C0.ESC,a.altKey&&(u.key=c.C0.ESC+c.C0.ESC),u.cancel=!0;break;case 37:if(a.metaKey)break;t?(u.key=c.C0.ESC+"[1;"+(t+1)+"D",u.key===c.C0.ESC+"[1;3D"&&(u.key=c.C0.ESC+(p?"b":"[1;5D"))):u.key=l?c.C0.ESC+"OD":c.C0.ESC+"[D";break;case 39:if(a.metaKey)break;t?(u.key=c.C0.ESC+"[1;"+(t+1)+"C",u.key===c.C0.ESC+"[1;3C"&&(u.key=c.C0.ESC+(p?"f":"[1;5C"))):u.key=l?c.C0.ESC+"OC":c.C0.ESC+"[C";break;case 38:if(a.metaKey)break;t?(u.key=c.C0.ESC+"[1;"+(t+1)+"A",p||u.key!==c.C0.ESC+"[1;3A"||(u.key=c.C0.ESC+"[1;5A")):u.key=l?c.C0.ESC+"OA":c.C0.ESC+"[A";break;case 40:if(a.metaKey)break;t?(u.key=c.C0.ESC+"[1;"+(t+1)+"B",p||u.key!==c.C0.ESC+"[1;3B"||(u.key=c.C0.ESC+"[1;5B")):u.key=l?c.C0.ESC+"OB":c.C0.ESC+"[B";break;case 45:a.shiftKey||a.ctrlKey||(u.key=c.C0.ESC+"[2~");break;case 46:u.key=t?c.C0.ESC+"[3;"+(t+1)+"~":c.C0.ESC+"[3~";break;case 36:u.key=t?c.C0.ESC+"[1;"+(t+1)+"H":l?c.C0.ESC+"OH":c.C0.ESC+"[H";break;case 35:u.key=t?c.C0.ESC+"[1;"+(t+1)+"F":l?c.C0.ESC+"OF":c.C0.ESC+"[F";break;case 33:a.shiftKey?u.type=2:a.ctrlKey?u.key=c.C0.ESC+"[5;"+(t+1)+"~":u.key=c.C0.ESC+"[5~";break;case 34:a.shiftKey?u.type=3:a.ctrlKey?u.key=c.C0.ESC+"[6;"+(t+1)+"~":u.key=c.C0.ESC+"[6~";break;case 112:u.key=t?c.C0.ESC+"[1;"+(t+1)+"P":c.C0.ESC+"OP";break;case 113:u.key=t?c.C0.ESC+"[1;"+(t+1)+"Q":c.C0.ESC+"OQ";break;case 114:u.key=t?c.C0.ESC+"[1;"+(t+1)+"R":c.C0.ESC+"OR";break;case 115:u.key=t?c.C0.ESC+"[1;"+(t+1)+"S":c.C0.ESC+"OS";break;case 116:u.key=t?c.C0.ESC+"[15;"+(t+1)+"~":c.C0.ESC+"[15~";break;case 117:u.key=t?c.C0.ESC+"[17;"+(t+1)+"~":c.C0.ESC+"[17~";break;case 118:u.key=t?c.C0.ESC+"[18;"+(t+1)+"~":c.C0.ESC+"[18~";break;case 119:u.key=t?c.C0.ESC+"[19;"+(t+1)+"~":c.C0.ESC+"[19~";break;case 120:u.key=t?c.C0.ESC+"[20;"+(t+1)+"~":c.C0.ESC+"[20~";break;case 121:u.key=t?c.C0.ESC+"[21;"+(t+1)+"~":c.C0.ESC+"[21~";break;case 122:u.key=t?c.C0.ESC+"[23;"+(t+1)+"~":c.C0.ESC+"[23~";break;case 123:u.key=t?c.C0.ESC+"[24;"+(t+1)+"~":c.C0.ESC+"[24~";break;default:if(!a.ctrlKey||a.shiftKey||a.altKey||a.metaKey)if(p&&!S||!a.altKey||a.metaKey)!p||a.altKey||a.ctrlKey||a.shiftKey||!a.metaKey?a.key&&!a.ctrlKey&&!a.altKey&&!a.metaKey&&a.keyCode>=48&&a.key.length===1?u.key=a.key:a.key&&a.ctrlKey&&(a.key==="_"&&(u.key=c.C0.US),a.key==="@"&&(u.key=c.C0.NUL)):a.keyCode===65&&(u.type=1);else{const n=f[a.keyCode],e=n?.[a.shiftKey?1:0];if(e)u.key=c.C0.ESC+e;else if(a.keyCode>=65&&a.keyCode<=90){const r=a.ctrlKey?a.keyCode-64:a.keyCode+32;let d=String.fromCharCode(r);a.shiftKey&&(d=d.toUpperCase()),u.key=c.C0.ESC+d}else if(a.keyCode===32)u.key=c.C0.ESC+(a.ctrlKey?c.C0.NUL:" ");else if(a.key==="Dead"&&a.code.startsWith("Key")){let r=a.code.slice(3,4);a.shiftKey||(r=r.toLowerCase()),u.key=c.C0.ESC+r,u.cancel=!0}}else a.keyCode>=65&&a.keyCode<=90?u.key=String.fromCharCode(a.keyCode-64):a.keyCode===32?u.key=c.C0.NUL:a.keyCode>=51&&a.keyCode<=55?u.key=String.fromCharCode(a.keyCode-51+27):a.keyCode===56?u.key=c.C0.DEL:a.keyCode===219?u.key=c.C0.ESC:a.keyCode===220?u.key=c.C0.FS:a.keyCode===221&&(u.key=c.C0.GS)}return u}},482:(k,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Utf8ToUtf32=i.StringToUtf32=i.utf32ToString=i.stringFromCodePoint=void 0,i.stringFromCodePoint=function(o){return o>65535?(o-=65536,String.fromCharCode(55296+(o>>10))+String.fromCharCode(o%1024+56320)):String.fromCharCode(o)},i.utf32ToString=function(o,c=0,f=o.length){let a="";for(let l=c;l<f;++l){let p=o[l];p>65535?(p-=65536,a+=String.fromCharCode(55296+(p>>10))+String.fromCharCode(p%1024+56320)):a+=String.fromCharCode(p)}return a},i.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(o,c){const f=o.length;if(!f)return 0;let a=0,l=0;if(this._interim){const p=o.charCodeAt(l++);56320<=p&&p<=57343?c[a++]=1024*(this._interim-55296)+p-56320+65536:(c[a++]=this._interim,c[a++]=p),this._interim=0}for(let p=l;p<f;++p){const S=o.charCodeAt(p);if(55296<=S&&S<=56319){if(++p>=f)return this._interim=S,a;const u=o.charCodeAt(p);56320<=u&&u<=57343?c[a++]=1024*(S-55296)+u-56320+65536:(c[a++]=S,c[a++]=u)}else S!==65279&&(c[a++]=S)}return a}},i.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(o,c){const f=o.length;if(!f)return 0;let a,l,p,S,u=0,t=0,n=0;if(this.interim[0]){let d=!1,g=this.interim[0];g&=(224&g)==192?31:(240&g)==224?15:7;let m,b=0;for(;(m=63&this.interim[++b])&&b<4;)g<<=6,g|=m;const v=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,w=v-b;for(;n<w;){if(n>=f)return 0;if(m=o[n++],(192&m)!=128){n--,d=!0;break}this.interim[b++]=m,g<<=6,g|=63&m}d||(v===2?g<128?n--:c[u++]=g:v===3?g<2048||g>=55296&&g<=57343||g===65279||(c[u++]=g):g<65536||g>1114111||(c[u++]=g)),this.interim.fill(0)}const e=f-4;let r=n;for(;r<f;){for(;!(!(r<e)||128&(a=o[r])||128&(l=o[r+1])||128&(p=o[r+2])||128&(S=o[r+3]));)c[u++]=a,c[u++]=l,c[u++]=p,c[u++]=S,r+=4;if(a=o[r++],a<128)c[u++]=a;else if((224&a)==192){if(r>=f)return this.interim[0]=a,u;if(l=o[r++],(192&l)!=128){r--;continue}if(t=(31&a)<<6|63&l,t<128){r--;continue}c[u++]=t}else if((240&a)==224){if(r>=f)return this.interim[0]=a,u;if(l=o[r++],(192&l)!=128){r--;continue}if(r>=f)return this.interim[0]=a,this.interim[1]=l,u;if(p=o[r++],(192&p)!=128){r--;continue}if(t=(15&a)<<12|(63&l)<<6|63&p,t<2048||t>=55296&&t<=57343||t===65279)continue;c[u++]=t}else if((248&a)==240){if(r>=f)return this.interim[0]=a,u;if(l=o[r++],(192&l)!=128){r--;continue}if(r>=f)return this.interim[0]=a,this.interim[1]=l,u;if(p=o[r++],(192&p)!=128){r--;continue}if(r>=f)return this.interim[0]=a,this.interim[1]=l,this.interim[2]=p,u;if(S=o[r++],(192&S)!=128){r--;continue}if(t=(7&a)<<18|(63&l)<<12|(63&p)<<6|63&S,t<65536||t>1114111)continue;c[u++]=t}}return u}}},225:(k,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.UnicodeV6=void 0;const c=o(1480),f=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],a=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]];let l;i.UnicodeV6=class{constructor(){if(this.version="6",!l){l=new Uint8Array(65536),l.fill(1),l[0]=0,l.fill(0,1,32),l.fill(0,127,160),l.fill(2,4352,4448),l[9001]=2,l[9002]=2,l.fill(2,11904,42192),l[12351]=1,l.fill(2,44032,55204),l.fill(2,63744,64256),l.fill(2,65040,65050),l.fill(2,65072,65136),l.fill(2,65280,65377),l.fill(2,65504,65511);for(let p=0;p<f.length;++p)l.fill(0,f[p][0],f[p][1]+1)}}wcwidth(p){return p<32?0:p<127?1:p<65536?l[p]:function(S,u){let t,n=0,e=u.length-1;if(S<u[0][0]||S>u[e][1])return!1;for(;e>=n;)if(t=n+e>>1,S>u[t][1])n=t+1;else{if(!(S<u[t][0]))return!0;e=t-1}return!1}(p,a)?0:p>=131072&&p<=196605||p>=196608&&p<=262141?2:1}charProperties(p,S){let u=this.wcwidth(p),t=u===0&&S!==0;if(t){const n=c.UnicodeService.extractWidth(S);n===0?t=!1:n>u&&(u=n)}return c.UnicodeService.createPropertyValue(0,u,t)}}},5981:(k,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.WriteBuffer=void 0;const c=o(8460),f=o(844);class a extends f.Disposable{constructor(p){super(),this._action=p,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this.register(new c.EventEmitter),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(p,S){if(S!==void 0&&this._syncCalls>S)return void(this._syncCalls=0);if(this._pendingData+=p.length,this._writeBuffer.push(p),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;let u;for(this._isSyncWriting=!0;u=this._writeBuffer.shift();){this._action(u);const t=this._callbacks.shift();t&&t()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(p,S){if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput)return this._didUserInput=!1,this._pendingData+=p.length,this._writeBuffer.push(p),this._callbacks.push(S),void this._innerWrite();setTimeout(()=>this._innerWrite())}this._pendingData+=p.length,this._writeBuffer.push(p),this._callbacks.push(S)}_innerWrite(p=0,S=!0){const u=p||Date.now();for(;this._writeBuffer.length>this._bufferOffset;){const t=this._writeBuffer[this._bufferOffset],n=this._action(t,S);if(n){const r=d=>Date.now()-u>=12?setTimeout(()=>this._innerWrite(0,d)):this._innerWrite(u,d);return void n.catch(d=>(queueMicrotask(()=>{throw d}),Promise.resolve(!1))).then(r)}const e=this._callbacks[this._bufferOffset];if(e&&e(),this._bufferOffset++,this._pendingData-=t.length,Date.now()-u>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(()=>this._innerWrite())):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}}i.WriteBuffer=a},5941:(k,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.toRgbString=i.parseColor=void 0;const o=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,c=/^[\da-f]+$/;function f(a,l){const p=a.toString(16),S=p.length<2?"0"+p:p;switch(l){case 4:return p[0];case 8:return S;case 12:return(S+S).slice(0,3);default:return S+S}}i.parseColor=function(a){if(!a)return;let l=a.toLowerCase();if(l.indexOf("rgb:")===0){l=l.slice(4);const p=o.exec(l);if(p){const S=p[1]?15:p[4]?255:p[7]?4095:65535;return[Math.round(parseInt(p[1]||p[4]||p[7]||p[10],16)/S*255),Math.round(parseInt(p[2]||p[5]||p[8]||p[11],16)/S*255),Math.round(parseInt(p[3]||p[6]||p[9]||p[12],16)/S*255)]}}else if(l.indexOf("#")===0&&(l=l.slice(1),c.exec(l)&&[3,6,9,12].includes(l.length))){const p=l.length/3,S=[0,0,0];for(let u=0;u<3;++u){const t=parseInt(l.slice(p*u,p*u+p),16);S[u]=p===1?t<<4:p===2?t:p===3?t>>4:t>>8}return S}},i.toRgbString=function(a,l=16){const[p,S,u]=a;return`rgb:${f(p,l)}/${f(S,l)}/${f(u,l)}`}},5770:(k,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.PAYLOAD_LIMIT=void 0,i.PAYLOAD_LIMIT=1e7},6351:(k,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DcsHandler=i.DcsParser=void 0;const c=o(482),f=o(8742),a=o(5770),l=[];i.DcsParser=class{constructor(){this._handlers=Object.create(null),this._active=l,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=l}registerHandler(S,u){this._handlers[S]===void 0&&(this._handlers[S]=[]);const t=this._handlers[S];return t.push(u),{dispose:()=>{const n=t.indexOf(u);n!==-1&&t.splice(n,1)}}}clearHandler(S){this._handlers[S]&&delete this._handlers[S]}setHandlerFallback(S){this._handlerFb=S}reset(){if(this._active.length)for(let S=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;S>=0;--S)this._active[S].unhook(!1);this._stack.paused=!1,this._active=l,this._ident=0}hook(S,u){if(this.reset(),this._ident=S,this._active=this._handlers[S]||l,this._active.length)for(let t=this._active.length-1;t>=0;t--)this._active[t].hook(u);else this._handlerFb(this._ident,"HOOK",u)}put(S,u,t){if(this._active.length)for(let n=this._active.length-1;n>=0;n--)this._active[n].put(S,u,t);else this._handlerFb(this._ident,"PUT",(0,c.utf32ToString)(S,u,t))}unhook(S,u=!0){if(this._active.length){let t=!1,n=this._active.length-1,e=!1;if(this._stack.paused&&(n=this._stack.loopPosition-1,t=u,e=this._stack.fallThrough,this._stack.paused=!1),!e&&t===!1){for(;n>=0&&(t=this._active[n].unhook(S),t!==!0);n--)if(t instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=n,this._stack.fallThrough=!1,t;n--}for(;n>=0;n--)if(t=this._active[n].unhook(!1),t instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=n,this._stack.fallThrough=!0,t}else this._handlerFb(this._ident,"UNHOOK",S);this._active=l,this._ident=0}};const p=new f.Params;p.addParam(0),i.DcsHandler=class{constructor(S){this._handler=S,this._data="",this._params=p,this._hitLimit=!1}hook(S){this._params=S.length>1||S.params[0]?S.clone():p,this._data="",this._hitLimit=!1}put(S,u,t){this._hitLimit||(this._data+=(0,c.utf32ToString)(S,u,t),this._data.length>a.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}unhook(S){let u=!1;if(this._hitLimit)u=!1;else if(S&&(u=this._handler(this._data,this._params),u instanceof Promise))return u.then(t=>(this._params=p,this._data="",this._hitLimit=!1,t));return this._params=p,this._data="",this._hitLimit=!1,u}}},2015:(k,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.EscapeSequenceParser=i.VT500_TRANSITION_TABLE=i.TransitionTable=void 0;const c=o(844),f=o(8742),a=o(6242),l=o(6351);class p{constructor(n){this.table=new Uint8Array(n)}setDefault(n,e){this.table.fill(n<<4|e)}add(n,e,r,d){this.table[e<<8|n]=r<<4|d}addMany(n,e,r,d){for(let g=0;g<n.length;g++)this.table[e<<8|n[g]]=r<<4|d}}i.TransitionTable=p;const S=160;i.VT500_TRANSITION_TABLE=function(){const t=new p(4095),n=Array.apply(null,Array(256)).map((b,v)=>v),e=(b,v)=>n.slice(b,v),r=e(32,127),d=e(0,24);d.push(25),d.push.apply(d,e(28,32));const g=e(0,14);let m;for(m in t.setDefault(1,0),t.addMany(r,0,2,0),g)t.addMany([24,26,153,154],m,3,0),t.addMany(e(128,144),m,3,0),t.addMany(e(144,152),m,3,0),t.add(156,m,0,0),t.add(27,m,11,1),t.add(157,m,4,8),t.addMany([152,158,159],m,0,7),t.add(155,m,11,3),t.add(144,m,11,9);return t.addMany(d,0,3,0),t.addMany(d,1,3,1),t.add(127,1,0,1),t.addMany(d,8,0,8),t.addMany(d,3,3,3),t.add(127,3,0,3),t.addMany(d,4,3,4),t.add(127,4,0,4),t.addMany(d,6,3,6),t.addMany(d,5,3,5),t.add(127,5,0,5),t.addMany(d,2,3,2),t.add(127,2,0,2),t.add(93,1,4,8),t.addMany(r,8,5,8),t.add(127,8,5,8),t.addMany([156,27,24,26,7],8,6,0),t.addMany(e(28,32),8,0,8),t.addMany([88,94,95],1,0,7),t.addMany(r,7,0,7),t.addMany(d,7,0,7),t.add(156,7,0,0),t.add(127,7,0,7),t.add(91,1,11,3),t.addMany(e(64,127),3,7,0),t.addMany(e(48,60),3,8,4),t.addMany([60,61,62,63],3,9,4),t.addMany(e(48,60),4,8,4),t.addMany(e(64,127),4,7,0),t.addMany([60,61,62,63],4,0,6),t.addMany(e(32,64),6,0,6),t.add(127,6,0,6),t.addMany(e(64,127),6,0,0),t.addMany(e(32,48),3,9,5),t.addMany(e(32,48),5,9,5),t.addMany(e(48,64),5,0,6),t.addMany(e(64,127),5,7,0),t.addMany(e(32,48),4,9,5),t.addMany(e(32,48),1,9,2),t.addMany(e(32,48),2,9,2),t.addMany(e(48,127),2,10,0),t.addMany(e(48,80),1,10,0),t.addMany(e(81,88),1,10,0),t.addMany([89,90,92],1,10,0),t.addMany(e(96,127),1,10,0),t.add(80,1,11,9),t.addMany(d,9,0,9),t.add(127,9,0,9),t.addMany(e(28,32),9,0,9),t.addMany(e(32,48),9,9,12),t.addMany(e(48,60),9,8,10),t.addMany([60,61,62,63],9,9,10),t.addMany(d,11,0,11),t.addMany(e(32,128),11,0,11),t.addMany(e(28,32),11,0,11),t.addMany(d,10,0,10),t.add(127,10,0,10),t.addMany(e(28,32),10,0,10),t.addMany(e(48,60),10,8,10),t.addMany([60,61,62,63],10,0,11),t.addMany(e(32,48),10,9,12),t.addMany(d,12,0,12),t.add(127,12,0,12),t.addMany(e(28,32),12,0,12),t.addMany(e(32,48),12,9,12),t.addMany(e(48,64),12,0,11),t.addMany(e(64,127),12,12,13),t.addMany(e(64,127),10,12,13),t.addMany(e(64,127),9,12,13),t.addMany(d,13,13,13),t.addMany(r,13,13,13),t.add(127,13,0,13),t.addMany([27,156,24,26],13,14,0),t.add(S,0,2,0),t.add(S,8,5,8),t.add(S,6,0,6),t.add(S,11,0,11),t.add(S,13,13,13),t}();class u extends c.Disposable{constructor(n=i.VT500_TRANSITION_TABLE){super(),this._transitions=n,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new f.Params,this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._printHandlerFb=(e,r,d)=>{},this._executeHandlerFb=e=>{},this._csiHandlerFb=(e,r)=>{},this._escHandlerFb=e=>{},this._errorHandlerFb=e=>e,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this.register((0,c.toDisposable)(()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)})),this._oscParser=this.register(new a.OscParser),this._dcsParser=this.register(new l.DcsParser),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},()=>!0)}_identifier(n,e=[64,126]){let r=0;if(n.prefix){if(n.prefix.length>1)throw new Error("only one byte as prefix supported");if(r=n.prefix.charCodeAt(0),r&&60>r||r>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(n.intermediates){if(n.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let g=0;g<n.intermediates.length;++g){const m=n.intermediates.charCodeAt(g);if(32>m||m>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");r<<=8,r|=m}}if(n.final.length!==1)throw new Error("final must be a single byte");const d=n.final.charCodeAt(0);if(e[0]>d||d>e[1])throw new Error(`final must be in range ${e[0]} .. ${e[1]}`);return r<<=8,r|=d,r}identToString(n){const e=[];for(;n;)e.push(String.fromCharCode(255&n)),n>>=8;return e.reverse().join("")}setPrintHandler(n){this._printHandler=n}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(n,e){const r=this._identifier(n,[48,126]);this._escHandlers[r]===void 0&&(this._escHandlers[r]=[]);const d=this._escHandlers[r];return d.push(e),{dispose:()=>{const g=d.indexOf(e);g!==-1&&d.splice(g,1)}}}clearEscHandler(n){this._escHandlers[this._identifier(n,[48,126])]&&delete this._escHandlers[this._identifier(n,[48,126])]}setEscHandlerFallback(n){this._escHandlerFb=n}setExecuteHandler(n,e){this._executeHandlers[n.charCodeAt(0)]=e}clearExecuteHandler(n){this._executeHandlers[n.charCodeAt(0)]&&delete this._executeHandlers[n.charCodeAt(0)]}setExecuteHandlerFallback(n){this._executeHandlerFb=n}registerCsiHandler(n,e){const r=this._identifier(n);this._csiHandlers[r]===void 0&&(this._csiHandlers[r]=[]);const d=this._csiHandlers[r];return d.push(e),{dispose:()=>{const g=d.indexOf(e);g!==-1&&d.splice(g,1)}}}clearCsiHandler(n){this._csiHandlers[this._identifier(n)]&&delete this._csiHandlers[this._identifier(n)]}setCsiHandlerFallback(n){this._csiHandlerFb=n}registerDcsHandler(n,e){return this._dcsParser.registerHandler(this._identifier(n),e)}clearDcsHandler(n){this._dcsParser.clearHandler(this._identifier(n))}setDcsHandlerFallback(n){this._dcsParser.setHandlerFallback(n)}registerOscHandler(n,e){return this._oscParser.registerHandler(n,e)}clearOscHandler(n){this._oscParser.clearHandler(n)}setOscHandlerFallback(n){this._oscParser.setHandlerFallback(n)}setErrorHandler(n){this._errorHandler=n}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(n,e,r,d,g){this._parseStack.state=n,this._parseStack.handlers=e,this._parseStack.handlerPos=r,this._parseStack.transition=d,this._parseStack.chunkPos=g}parse(n,e,r){let d,g=0,m=0,b=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,b=this._parseStack.chunkPos+1;else{if(r===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");const v=this._parseStack.handlers;let w=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(r===!1&&w>-1){for(;w>=0&&(d=v[w](this._params),d!==!0);w--)if(d instanceof Promise)return this._parseStack.handlerPos=w,d}this._parseStack.handlers=[];break;case 4:if(r===!1&&w>-1){for(;w>=0&&(d=v[w](),d!==!0);w--)if(d instanceof Promise)return this._parseStack.handlerPos=w,d}this._parseStack.handlers=[];break;case 6:if(g=n[this._parseStack.chunkPos],d=this._dcsParser.unhook(g!==24&&g!==26,r),d)return d;g===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(g=n[this._parseStack.chunkPos],d=this._oscParser.end(g!==24&&g!==26,r),d)return d;g===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,b=this._parseStack.chunkPos+1,this.precedingJoinState=0,this.currentState=15&this._parseStack.transition}for(let v=b;v<e;++v){switch(g=n[v],m=this._transitions.table[this.currentState<<8|(g<160?g:S)],m>>4){case 2:for(let A=v+1;;++A){if(A>=e||(g=n[A])<32||g>126&&g<S){this._printHandler(n,v,A),v=A-1;break}if(++A>=e||(g=n[A])<32||g>126&&g<S){this._printHandler(n,v,A),v=A-1;break}if(++A>=e||(g=n[A])<32||g>126&&g<S){this._printHandler(n,v,A),v=A-1;break}if(++A>=e||(g=n[A])<32||g>126&&g<S){this._printHandler(n,v,A),v=A-1;break}}break;case 3:this._executeHandlers[g]?this._executeHandlers[g]():this._executeHandlerFb(g),this.precedingJoinState=0;break;case 0:break;case 1:if(this._errorHandler({position:v,code:g,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:const w=this._csiHandlers[this._collect<<8|g];let R=w?w.length-1:-1;for(;R>=0&&(d=w[R](this._params),d!==!0);R--)if(d instanceof Promise)return this._preserveStack(3,w,R,m,v),d;R<0&&this._csiHandlerFb(this._collect<<8|g,this._params),this.precedingJoinState=0;break;case 8:do switch(g){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(g-48)}while(++v<e&&(g=n[v])>47&&g<60);v--;break;case 9:this._collect<<=8,this._collect|=g;break;case 10:const B=this._escHandlers[this._collect<<8|g];let P=B?B.length-1:-1;for(;P>=0&&(d=B[P](),d!==!0);P--)if(d instanceof Promise)return this._preserveStack(4,B,P,m,v),d;P<0&&this._escHandlerFb(this._collect<<8|g),this.precedingJoinState=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|g,this._params);break;case 13:for(let A=v+1;;++A)if(A>=e||(g=n[A])===24||g===26||g===27||g>127&&g<S){this._dcsParser.put(n,v,A),v=A-1;break}break;case 14:if(d=this._dcsParser.unhook(g!==24&&g!==26),d)return this._preserveStack(6,[],0,m,v),d;g===27&&(m|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0;break;case 4:this._oscParser.start();break;case 5:for(let A=v+1;;A++)if(A>=e||(g=n[A])<32||g>127&&g<S){this._oscParser.put(n,v,A),v=A-1;break}break;case 6:if(d=this._oscParser.end(g!==24&&g!==26),d)return this._preserveStack(5,[],0,m,v),d;g===27&&(m|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0}this.currentState=15&m}}}i.EscapeSequenceParser=u},6242:(k,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.OscHandler=i.OscParser=void 0;const c=o(5770),f=o(482),a=[];i.OscParser=class{constructor(){this._state=0,this._active=a,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(l,p){this._handlers[l]===void 0&&(this._handlers[l]=[]);const S=this._handlers[l];return S.push(p),{dispose:()=>{const u=S.indexOf(p);u!==-1&&S.splice(u,1)}}}clearHandler(l){this._handlers[l]&&delete this._handlers[l]}setHandlerFallback(l){this._handlerFb=l}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=a}reset(){if(this._state===2)for(let l=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;l>=0;--l)this._active[l].end(!1);this._stack.paused=!1,this._active=a,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||a,this._active.length)for(let l=this._active.length-1;l>=0;l--)this._active[l].start();else this._handlerFb(this._id,"START")}_put(l,p,S){if(this._active.length)for(let u=this._active.length-1;u>=0;u--)this._active[u].put(l,p,S);else this._handlerFb(this._id,"PUT",(0,f.utf32ToString)(l,p,S))}start(){this.reset(),this._state=1}put(l,p,S){if(this._state!==3){if(this._state===1)for(;p<S;){const u=l[p++];if(u===59){this._state=2,this._start();break}if(u<48||57<u)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+u-48}this._state===2&&S-p>0&&this._put(l,p,S)}}end(l,p=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){let S=!1,u=this._active.length-1,t=!1;if(this._stack.paused&&(u=this._stack.loopPosition-1,S=p,t=this._stack.fallThrough,this._stack.paused=!1),!t&&S===!1){for(;u>=0&&(S=this._active[u].end(l),S!==!0);u--)if(S instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=u,this._stack.fallThrough=!1,S;u--}for(;u>=0;u--)if(S=this._active[u].end(!1),S instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=u,this._stack.fallThrough=!0,S}else this._handlerFb(this._id,"END",l);this._active=a,this._id=-1,this._state=0}}},i.OscHandler=class{constructor(l){this._handler=l,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(l,p,S){this._hitLimit||(this._data+=(0,f.utf32ToString)(l,p,S),this._data.length>c.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}end(l){let p=!1;if(this._hitLimit)p=!1;else if(l&&(p=this._handler(this._data),p instanceof Promise))return p.then(S=>(this._data="",this._hitLimit=!1,S));return this._data="",this._hitLimit=!1,p}}},8742:(k,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Params=void 0;const o=2147483647;class c{static fromArray(a){const l=new c;if(!a.length)return l;for(let p=Array.isArray(a[0])?1:0;p<a.length;++p){const S=a[p];if(Array.isArray(S))for(let u=0;u<S.length;++u)l.addSubParam(S[u]);else l.addParam(S)}return l}constructor(a=32,l=32){if(this.maxLength=a,this.maxSubParamsLength=l,l>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(a),this.length=0,this._subParams=new Int32Array(l),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(a),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}clone(){const a=new c(this.maxLength,this.maxSubParamsLength);return a.params.set(this.params),a.length=this.length,a._subParams.set(this._subParams),a._subParamsLength=this._subParamsLength,a._subParamsIdx.set(this._subParamsIdx),a._rejectDigits=this._rejectDigits,a._rejectSubDigits=this._rejectSubDigits,a._digitIsSub=this._digitIsSub,a}toArray(){const a=[];for(let l=0;l<this.length;++l){a.push(this.params[l]);const p=this._subParamsIdx[l]>>8,S=255&this._subParamsIdx[l];S-p>0&&a.push(Array.prototype.slice.call(this._subParams,p,S))}return a}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(a){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(a<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=a>o?o:a}}addSubParam(a){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(a<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=a>o?o:a,this._subParamsIdx[this.length-1]++}}hasSubParams(a){return(255&this._subParamsIdx[a])-(this._subParamsIdx[a]>>8)>0}getSubParams(a){const l=this._subParamsIdx[a]>>8,p=255&this._subParamsIdx[a];return p-l>0?this._subParams.subarray(l,p):null}getSubParamsAll(){const a={};for(let l=0;l<this.length;++l){const p=this._subParamsIdx[l]>>8,S=255&this._subParamsIdx[l];S-p>0&&(a[l]=this._subParams.slice(p,S))}return a}addDigit(a){let l;if(this._rejectDigits||!(l=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;const p=this._digitIsSub?this._subParams:this.params,S=p[l-1];p[l-1]=~S?Math.min(10*S+a,o):a}}i.Params=c},5741:(k,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.AddonManager=void 0,i.AddonManager=class{constructor(){this._addons=[]}dispose(){for(let o=this._addons.length-1;o>=0;o--)this._addons[o].instance.dispose()}loadAddon(o,c){const f={instance:c,dispose:c.dispose,isDisposed:!1};this._addons.push(f),c.dispose=()=>this._wrappedAddonDispose(f),c.activate(o)}_wrappedAddonDispose(o){if(o.isDisposed)return;let c=-1;for(let f=0;f<this._addons.length;f++)if(this._addons[f]===o){c=f;break}if(c===-1)throw new Error("Could not dispose an addon that has not been loaded");o.isDisposed=!0,o.dispose.apply(o.instance),this._addons.splice(c,1)}}},8771:(k,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferApiView=void 0;const c=o(3785),f=o(511);i.BufferApiView=class{constructor(a,l){this._buffer=a,this.type=l}init(a){return this._buffer=a,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(a){const l=this._buffer.lines.get(a);if(l)return new c.BufferLineApiView(l)}getNullCell(){return new f.CellData}}},3785:(k,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferLineApiView=void 0;const c=o(511);i.BufferLineApiView=class{constructor(f){this._line=f}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(f,a){if(!(f<0||f>=this._line.length))return a?(this._line.loadCell(f,a),a):this._line.loadCell(f,new c.CellData)}translateToString(f,a,l){return this._line.translateToString(f,a,l)}}},8285:(k,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferNamespaceApi=void 0;const c=o(8771),f=o(8460),a=o(844);class l extends a.Disposable{constructor(S){super(),this._core=S,this._onBufferChange=this.register(new f.EventEmitter),this.onBufferChange=this._onBufferChange.event,this._normal=new c.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new c.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(()=>this._onBufferChange.fire(this.active))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}}i.BufferNamespaceApi=l},7975:(k,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ParserApi=void 0,i.ParserApi=class{constructor(o){this._core=o}registerCsiHandler(o,c){return this._core.registerCsiHandler(o,f=>c(f.toArray()))}addCsiHandler(o,c){return this.registerCsiHandler(o,c)}registerDcsHandler(o,c){return this._core.registerDcsHandler(o,(f,a)=>c(f,a.toArray()))}addDcsHandler(o,c){return this.registerDcsHandler(o,c)}registerEscHandler(o,c){return this._core.registerEscHandler(o,c)}addEscHandler(o,c){return this.registerEscHandler(o,c)}registerOscHandler(o,c){return this._core.registerOscHandler(o,c)}addOscHandler(o,c){return this.registerOscHandler(o,c)}}},7090:(k,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.UnicodeApi=void 0,i.UnicodeApi=class{constructor(o){this._core=o}register(o){this._core.unicodeService.register(o)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(o){this._core.unicodeService.activeVersion=o}}},744:function(k,i,o){var c=this&&this.__decorate||function(t,n,e,r){var d,g=arguments.length,m=g<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,e):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")m=Reflect.decorate(t,n,e,r);else for(var b=t.length-1;b>=0;b--)(d=t[b])&&(m=(g<3?d(m):g>3?d(n,e,m):d(n,e))||m);return g>3&&m&&Object.defineProperty(n,e,m),m},f=this&&this.__param||function(t,n){return function(e,r){n(e,r,t)}};Object.defineProperty(i,"__esModule",{value:!0}),i.BufferService=i.MINIMUM_ROWS=i.MINIMUM_COLS=void 0;const a=o(8460),l=o(844),p=o(5295),S=o(2585);i.MINIMUM_COLS=2,i.MINIMUM_ROWS=1;let u=i.BufferService=class extends l.Disposable{get buffer(){return this.buffers.active}constructor(t){super(),this.isUserScrolling=!1,this._onResize=this.register(new a.EventEmitter),this.onResize=this._onResize.event,this._onScroll=this.register(new a.EventEmitter),this.onScroll=this._onScroll.event,this.cols=Math.max(t.rawOptions.cols||0,i.MINIMUM_COLS),this.rows=Math.max(t.rawOptions.rows||0,i.MINIMUM_ROWS),this.buffers=this.register(new p.BufferSet(t,this))}resize(t,n){this.cols=t,this.rows=n,this.buffers.resize(t,n),this._onResize.fire({cols:t,rows:n})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(t,n=!1){const e=this.buffer;let r;r=this._cachedBlankLine,r&&r.length===this.cols&&r.getFg(0)===t.fg&&r.getBg(0)===t.bg||(r=e.getBlankLine(t,n),this._cachedBlankLine=r),r.isWrapped=n;const d=e.ybase+e.scrollTop,g=e.ybase+e.scrollBottom;if(e.scrollTop===0){const m=e.lines.isFull;g===e.lines.length-1?m?e.lines.recycle().copyFrom(r):e.lines.push(r.clone()):e.lines.splice(g+1,0,r.clone()),m?this.isUserScrolling&&(e.ydisp=Math.max(e.ydisp-1,0)):(e.ybase++,this.isUserScrolling||e.ydisp++)}else{const m=g-d+1;e.lines.shiftElements(d+1,m-1,-1),e.lines.set(g,r.clone())}this.isUserScrolling||(e.ydisp=e.ybase),this._onScroll.fire(e.ydisp)}scrollLines(t,n,e){const r=this.buffer;if(t<0){if(r.ydisp===0)return;this.isUserScrolling=!0}else t+r.ydisp>=r.ybase&&(this.isUserScrolling=!1);const d=r.ydisp;r.ydisp=Math.max(Math.min(r.ydisp+t,r.ybase),0),d!==r.ydisp&&(n||this._onScroll.fire(r.ydisp))}};i.BufferService=u=c([f(0,S.IOptionsService)],u)},7994:(k,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CharsetService=void 0,i.CharsetService=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(o){this.glevel=o,this.charset=this._charsets[o]}setgCharset(o,c){this._charsets[o]=c,this.glevel===o&&(this.charset=c)}}},1753:function(k,i,o){var c=this&&this.__decorate||function(r,d,g,m){var b,v=arguments.length,w=v<3?d:m===null?m=Object.getOwnPropertyDescriptor(d,g):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(r,d,g,m);else for(var R=r.length-1;R>=0;R--)(b=r[R])&&(w=(v<3?b(w):v>3?b(d,g,w):b(d,g))||w);return v>3&&w&&Object.defineProperty(d,g,w),w},f=this&&this.__param||function(r,d){return function(g,m){d(g,m,r)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CoreMouseService=void 0;const a=o(2585),l=o(8460),p=o(844),S={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:r=>r.button!==4&&r.action===1&&(r.ctrl=!1,r.alt=!1,r.shift=!1,!0)},VT200:{events:19,restrict:r=>r.action!==32},DRAG:{events:23,restrict:r=>r.action!==32||r.button!==3},ANY:{events:31,restrict:r=>!0}};function u(r,d){let g=(r.ctrl?16:0)|(r.shift?4:0)|(r.alt?8:0);return r.button===4?(g|=64,g|=r.action):(g|=3&r.button,4&r.button&&(g|=64),8&r.button&&(g|=128),r.action===32?g|=32:r.action!==0||d||(g|=3)),g}const t=String.fromCharCode,n={DEFAULT:r=>{const d=[u(r,!1)+32,r.col+32,r.row+32];return d[0]>255||d[1]>255||d[2]>255?"":`\x1B[M${t(d[0])}${t(d[1])}${t(d[2])}`},SGR:r=>{const d=r.action===0&&r.button!==4?"m":"M";return`\x1B[<${u(r,!0)};${r.col};${r.row}${d}`},SGR_PIXELS:r=>{const d=r.action===0&&r.button!==4?"m":"M";return`\x1B[<${u(r,!0)};${r.x};${r.y}${d}`}};let e=i.CoreMouseService=class extends p.Disposable{constructor(r,d){super(),this._bufferService=r,this._coreService=d,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._onProtocolChange=this.register(new l.EventEmitter),this.onProtocolChange=this._onProtocolChange.event;for(const g of Object.keys(S))this.addProtocol(g,S[g]);for(const g of Object.keys(n))this.addEncoding(g,n[g]);this.reset()}addProtocol(r,d){this._protocols[r]=d}addEncoding(r,d){this._encodings[r]=d}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(r){if(!this._protocols[r])throw new Error(`unknown protocol "${r}"`);this._activeProtocol=r,this._onProtocolChange.fire(this._protocols[r].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(r){if(!this._encodings[r])throw new Error(`unknown encoding "${r}"`);this._activeEncoding=r}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null}triggerMouseEvent(r){if(r.col<0||r.col>=this._bufferService.cols||r.row<0||r.row>=this._bufferService.rows||r.button===4&&r.action===32||r.button===3&&r.action!==32||r.button!==4&&(r.action===2||r.action===3)||(r.col++,r.row++,r.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,r,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(r))return!1;const d=this._encodings[this._activeEncoding](r);return d&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(d):this._coreService.triggerDataEvent(d,!0)),this._lastEvent=r,!0}explainEvents(r){return{down:!!(1&r),up:!!(2&r),drag:!!(4&r),move:!!(8&r),wheel:!!(16&r)}}_equalEvents(r,d,g){if(g){if(r.x!==d.x||r.y!==d.y)return!1}else if(r.col!==d.col||r.row!==d.row)return!1;return r.button===d.button&&r.action===d.action&&r.ctrl===d.ctrl&&r.alt===d.alt&&r.shift===d.shift}};i.CoreMouseService=e=c([f(0,a.IBufferService),f(1,a.ICoreService)],e)},6975:function(k,i,o){var c=this&&this.__decorate||function(e,r,d,g){var m,b=arguments.length,v=b<3?r:g===null?g=Object.getOwnPropertyDescriptor(r,d):g;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")v=Reflect.decorate(e,r,d,g);else for(var w=e.length-1;w>=0;w--)(m=e[w])&&(v=(b<3?m(v):b>3?m(r,d,v):m(r,d))||v);return b>3&&v&&Object.defineProperty(r,d,v),v},f=this&&this.__param||function(e,r){return function(d,g){r(d,g,e)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CoreService=void 0;const a=o(1439),l=o(8460),p=o(844),S=o(2585),u=Object.freeze({insertMode:!1}),t=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0});let n=i.CoreService=class extends p.Disposable{constructor(e,r,d){super(),this._bufferService=e,this._logService=r,this._optionsService=d,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this.register(new l.EventEmitter),this.onData=this._onData.event,this._onUserInput=this.register(new l.EventEmitter),this.onUserInput=this._onUserInput.event,this._onBinary=this.register(new l.EventEmitter),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this.register(new l.EventEmitter),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=(0,a.clone)(u),this.decPrivateModes=(0,a.clone)(t)}reset(){this.modes=(0,a.clone)(u),this.decPrivateModes=(0,a.clone)(t)}triggerDataEvent(e,r=!1){if(this._optionsService.rawOptions.disableStdin)return;const d=this._bufferService.buffer;r&&this._optionsService.rawOptions.scrollOnUserInput&&d.ybase!==d.ydisp&&this._onRequestScrollToBottom.fire(),r&&this._onUserInput.fire(),this._logService.debug(`sending data "${e}"`,()=>e.split("").map(g=>g.charCodeAt(0))),this._onData.fire(e)}triggerBinaryEvent(e){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${e}"`,()=>e.split("").map(r=>r.charCodeAt(0))),this._onBinary.fire(e))}};i.CoreService=n=c([f(0,S.IBufferService),f(1,S.ILogService),f(2,S.IOptionsService)],n)},9074:(k,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DecorationService=void 0;const c=o(8055),f=o(8460),a=o(844),l=o(6106);let p=0,S=0;class u extends a.Disposable{get decorations(){return this._decorations.values()}constructor(){super(),this._decorations=new l.SortedList(e=>e?.marker.line),this._onDecorationRegistered=this.register(new f.EventEmitter),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this.register(new f.EventEmitter),this.onDecorationRemoved=this._onDecorationRemoved.event,this.register((0,a.toDisposable)(()=>this.reset()))}registerDecoration(e){if(e.marker.isDisposed)return;const r=new t(e);if(r){const d=r.marker.onDispose(()=>r.dispose());r.onDispose(()=>{r&&(this._decorations.delete(r)&&this._onDecorationRemoved.fire(r),d.dispose())}),this._decorations.insert(r),this._onDecorationRegistered.fire(r)}return r}reset(){for(const e of this._decorations.values())e.dispose();this._decorations.clear()}*getDecorationsAtCell(e,r,d){let g=0,m=0;for(const b of this._decorations.getKeyIterator(r))g=b.options.x??0,m=g+(b.options.width??1),e>=g&&e<m&&(!d||(b.options.layer??"bottom")===d)&&(yield b)}forEachDecorationAtCell(e,r,d,g){this._decorations.forEachByKey(r,m=>{p=m.options.x??0,S=p+(m.options.width??1),e>=p&&e<S&&(!d||(m.options.layer??"bottom")===d)&&g(m)})}}i.DecorationService=u;class t extends a.Disposable{get isDisposed(){return this._isDisposed}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=c.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=c.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}constructor(e){super(),this.options=e,this.onRenderEmitter=this.register(new f.EventEmitter),this.onRender=this.onRenderEmitter.event,this._onDispose=this.register(new f.EventEmitter),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=e.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}dispose(){this._onDispose.fire(),super.dispose()}}},4348:(k,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.InstantiationService=i.ServiceCollection=void 0;const c=o(2585),f=o(8343);class a{constructor(...p){this._entries=new Map;for(const[S,u]of p)this.set(S,u)}set(p,S){const u=this._entries.get(p);return this._entries.set(p,S),u}forEach(p){for(const[S,u]of this._entries.entries())p(S,u)}has(p){return this._entries.has(p)}get(p){return this._entries.get(p)}}i.ServiceCollection=a,i.InstantiationService=class{constructor(){this._services=new a,this._services.set(c.IInstantiationService,this)}setService(l,p){this._services.set(l,p)}getService(l){return this._services.get(l)}createInstance(l,...p){const S=(0,f.getServiceDependencies)(l).sort((n,e)=>n.index-e.index),u=[];for(const n of S){const e=this._services.get(n.id);if(!e)throw new Error(`[createInstance] ${l.name} depends on UNKNOWN service ${n.id}.`);u.push(e)}const t=S.length>0?S[0].index:p.length;if(p.length!==t)throw new Error(`[createInstance] First service dependency of ${l.name} at position ${t+1} conflicts with ${p.length} static arguments`);return new l(...p,...u)}}},7866:function(k,i,o){var c=this&&this.__decorate||function(t,n,e,r){var d,g=arguments.length,m=g<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,e):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")m=Reflect.decorate(t,n,e,r);else for(var b=t.length-1;b>=0;b--)(d=t[b])&&(m=(g<3?d(m):g>3?d(n,e,m):d(n,e))||m);return g>3&&m&&Object.defineProperty(n,e,m),m},f=this&&this.__param||function(t,n){return function(e,r){n(e,r,t)}};Object.defineProperty(i,"__esModule",{value:!0}),i.traceCall=i.setTraceLogger=i.LogService=void 0;const a=o(844),l=o(2585),p={trace:l.LogLevelEnum.TRACE,debug:l.LogLevelEnum.DEBUG,info:l.LogLevelEnum.INFO,warn:l.LogLevelEnum.WARN,error:l.LogLevelEnum.ERROR,off:l.LogLevelEnum.OFF};let S,u=i.LogService=class extends a.Disposable{get logLevel(){return this._logLevel}constructor(t){super(),this._optionsService=t,this._logLevel=l.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),S=this}_updateLogLevel(){this._logLevel=p[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(t){for(let n=0;n<t.length;n++)typeof t[n]=="function"&&(t[n]=t[n]())}_log(t,n,e){this._evalLazyOptionalParams(e),t.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+n,...e)}trace(t,...n){this._logLevel<=l.LogLevelEnum.TRACE&&this._log(this._optionsService.options.logger?.trace.bind(this._optionsService.options.logger)??console.log,t,n)}debug(t,...n){this._logLevel<=l.LogLevelEnum.DEBUG&&this._log(this._optionsService.options.logger?.debug.bind(this._optionsService.options.logger)??console.log,t,n)}info(t,...n){this._logLevel<=l.LogLevelEnum.INFO&&this._log(this._optionsService.options.logger?.info.bind(this._optionsService.options.logger)??console.info,t,n)}warn(t,...n){this._logLevel<=l.LogLevelEnum.WARN&&this._log(this._optionsService.options.logger?.warn.bind(this._optionsService.options.logger)??console.warn,t,n)}error(t,...n){this._logLevel<=l.LogLevelEnum.ERROR&&this._log(this._optionsService.options.logger?.error.bind(this._optionsService.options.logger)??console.error,t,n)}};i.LogService=u=c([f(0,l.IOptionsService)],u),i.setTraceLogger=function(t){S=t},i.traceCall=function(t,n,e){if(typeof e.value!="function")throw new Error("not supported");const r=e.value;e.value=function(...d){if(S.logLevel!==l.LogLevelEnum.TRACE)return r.apply(this,d);S.trace(`GlyphRenderer#${r.name}(${d.map(m=>JSON.stringify(m)).join(", ")})`);const g=r.apply(this,d);return S.trace(`GlyphRenderer#${r.name} return`,g),g}}},7302:(k,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.OptionsService=i.DEFAULT_OPTIONS=void 0;const c=o(8460),f=o(844),a=o(6114);i.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,documentOverride:null,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rescaleOverlappingGlyphs:!1,rightClickSelectsWord:a.isMac,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:0};const l=["normal","bold","100","200","300","400","500","600","700","800","900"];class p extends f.Disposable{constructor(u){super(),this._onOptionChange=this.register(new c.EventEmitter),this.onOptionChange=this._onOptionChange.event;const t={...i.DEFAULT_OPTIONS};for(const n in u)if(n in t)try{const e=u[n];t[n]=this._sanitizeAndValidateOption(n,e)}catch(e){console.error(e)}this.rawOptions=t,this.options={...t},this._setupOptions(),this.register((0,f.toDisposable)(()=>{this.rawOptions.linkHandler=null,this.rawOptions.documentOverride=null}))}onSpecificOptionChange(u,t){return this.onOptionChange(n=>{n===u&&t(this.rawOptions[u])})}onMultipleOptionChange(u,t){return this.onOptionChange(n=>{u.indexOf(n)!==-1&&t()})}_setupOptions(){const u=n=>{if(!(n in i.DEFAULT_OPTIONS))throw new Error(`No option with key "${n}"`);return this.rawOptions[n]},t=(n,e)=>{if(!(n in i.DEFAULT_OPTIONS))throw new Error(`No option with key "${n}"`);e=this._sanitizeAndValidateOption(n,e),this.rawOptions[n]!==e&&(this.rawOptions[n]=e,this._onOptionChange.fire(n))};for(const n in this.rawOptions){const e={get:u.bind(this,n),set:t.bind(this,n)};Object.defineProperty(this.options,n,e)}}_sanitizeAndValidateOption(u,t){switch(u){case"cursorStyle":if(t||(t=i.DEFAULT_OPTIONS[u]),!function(n){return n==="block"||n==="underline"||n==="bar"}(t))throw new Error(`"${t}" is not a valid value for ${u}`);break;case"wordSeparator":t||(t=i.DEFAULT_OPTIONS[u]);break;case"fontWeight":case"fontWeightBold":if(typeof t=="number"&&1<=t&&t<=1e3)break;t=l.includes(t)?t:i.DEFAULT_OPTIONS[u];break;case"cursorWidth":t=Math.floor(t);case"lineHeight":case"tabStopWidth":if(t<1)throw new Error(`${u} cannot be less than 1, value: ${t}`);break;case"minimumContrastRatio":t=Math.max(1,Math.min(21,Math.round(10*t)/10));break;case"scrollback":if((t=Math.min(t,4294967295))<0)throw new Error(`${u} cannot be less than 0, value: ${t}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(t<=0)throw new Error(`${u} cannot be less than or equal to 0, value: ${t}`);break;case"rows":case"cols":if(!t&&t!==0)throw new Error(`${u} must be numeric, value: ${t}`);break;case"windowsPty":t=t??{}}return t}}i.OptionsService=p},2660:function(k,i,o){var c=this&&this.__decorate||function(p,S,u,t){var n,e=arguments.length,r=e<3?S:t===null?t=Object.getOwnPropertyDescriptor(S,u):t;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(p,S,u,t);else for(var d=p.length-1;d>=0;d--)(n=p[d])&&(r=(e<3?n(r):e>3?n(S,u,r):n(S,u))||r);return e>3&&r&&Object.defineProperty(S,u,r),r},f=this&&this.__param||function(p,S){return function(u,t){S(u,t,p)}};Object.defineProperty(i,"__esModule",{value:!0}),i.OscLinkService=void 0;const a=o(2585);let l=i.OscLinkService=class{constructor(p){this._bufferService=p,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(p){const S=this._bufferService.buffer;if(p.id===void 0){const d=S.addMarker(S.ybase+S.y),g={data:p,id:this._nextId++,lines:[d]};return d.onDispose(()=>this._removeMarkerFromLink(g,d)),this._dataByLinkId.set(g.id,g),g.id}const u=p,t=this._getEntryIdKey(u),n=this._entriesWithId.get(t);if(n)return this.addLineToLink(n.id,S.ybase+S.y),n.id;const e=S.addMarker(S.ybase+S.y),r={id:this._nextId++,key:this._getEntryIdKey(u),data:u,lines:[e]};return e.onDispose(()=>this._removeMarkerFromLink(r,e)),this._entriesWithId.set(r.key,r),this._dataByLinkId.set(r.id,r),r.id}addLineToLink(p,S){const u=this._dataByLinkId.get(p);if(u&&u.lines.every(t=>t.line!==S)){const t=this._bufferService.buffer.addMarker(S);u.lines.push(t),t.onDispose(()=>this._removeMarkerFromLink(u,t))}}getLinkData(p){return this._dataByLinkId.get(p)?.data}_getEntryIdKey(p){return`${p.id};;${p.uri}`}_removeMarkerFromLink(p,S){const u=p.lines.indexOf(S);u!==-1&&(p.lines.splice(u,1),p.lines.length===0&&(p.data.id!==void 0&&this._entriesWithId.delete(p.key),this._dataByLinkId.delete(p.id)))}};i.OscLinkService=l=c([f(0,a.IBufferService)],l)},8343:(k,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.createDecorator=i.getServiceDependencies=i.serviceRegistry=void 0;const o="di$target",c="di$dependencies";i.serviceRegistry=new Map,i.getServiceDependencies=function(f){return f[c]||[]},i.createDecorator=function(f){if(i.serviceRegistry.has(f))return i.serviceRegistry.get(f);const a=function(l,p,S){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(u,t,n){t[o]===t?t[c].push({id:u,index:n}):(t[c]=[{id:u,index:n}],t[o]=t)})(a,l,S)};return a.toString=()=>f,i.serviceRegistry.set(f,a),a}},2585:(k,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.IDecorationService=i.IUnicodeService=i.IOscLinkService=i.IOptionsService=i.ILogService=i.LogLevelEnum=i.IInstantiationService=i.ICharsetService=i.ICoreService=i.ICoreMouseService=i.IBufferService=void 0;const c=o(8343);var f;i.IBufferService=(0,c.createDecorator)("BufferService"),i.ICoreMouseService=(0,c.createDecorator)("CoreMouseService"),i.ICoreService=(0,c.createDecorator)("CoreService"),i.ICharsetService=(0,c.createDecorator)("CharsetService"),i.IInstantiationService=(0,c.createDecorator)("InstantiationService"),function(a){a[a.TRACE=0]="TRACE",a[a.DEBUG=1]="DEBUG",a[a.INFO=2]="INFO",a[a.WARN=3]="WARN",a[a.ERROR=4]="ERROR",a[a.OFF=5]="OFF"}(f||(i.LogLevelEnum=f={})),i.ILogService=(0,c.createDecorator)("LogService"),i.IOptionsService=(0,c.createDecorator)("OptionsService"),i.IOscLinkService=(0,c.createDecorator)("OscLinkService"),i.IUnicodeService=(0,c.createDecorator)("UnicodeService"),i.IDecorationService=(0,c.createDecorator)("DecorationService")},1480:(k,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.UnicodeService=void 0;const c=o(8460),f=o(225);class a{static extractShouldJoin(p){return(1&p)!=0}static extractWidth(p){return p>>1&3}static extractCharKind(p){return p>>3}static createPropertyValue(p,S,u=!1){return(16777215&p)<<3|(3&S)<<1|(u?1:0)}constructor(){this._providers=Object.create(null),this._active="",this._onChange=new c.EventEmitter,this.onChange=this._onChange.event;const p=new f.UnicodeV6;this.register(p),this._active=p.version,this._activeProvider=p}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(p){if(!this._providers[p])throw new Error(`unknown Unicode version "${p}"`);this._active=p,this._activeProvider=this._providers[p],this._onChange.fire(p)}register(p){this._providers[p.version]=p}wcwidth(p){return this._activeProvider.wcwidth(p)}getStringCellWidth(p){let S=0,u=0;const t=p.length;for(let n=0;n<t;++n){let e=p.charCodeAt(n);if(55296<=e&&e<=56319){if(++n>=t)return S+this.wcwidth(e);const g=p.charCodeAt(n);56320<=g&&g<=57343?e=1024*(e-55296)+g-56320+65536:S+=this.wcwidth(g)}const r=this.charProperties(e,u);let d=a.extractWidth(r);a.extractShouldJoin(r)&&(d-=a.extractWidth(u)),S+=d,u=r}return S}charProperties(p,S){return this._activeProvider.charProperties(p,S)}}i.UnicodeService=a}},C={};function E(k){var i=C[k];if(i!==void 0)return i.exports;var o=C[k]={exports:{}};return _[k].call(o.exports,o,o.exports,E),o.exports}var D={};return(()=>{var k=D;Object.defineProperty(k,"__esModule",{value:!0}),k.Terminal=void 0;const i=E(9042),o=E(3236),c=E(844),f=E(5741),a=E(8285),l=E(7975),p=E(7090),S=["cols","rows"];class u extends c.Disposable{constructor(n){super(),this._core=this.register(new o.Terminal(n)),this._addonManager=this.register(new f.AddonManager),this._publicOptions={...this._core.options};const e=d=>this._core.options[d],r=(d,g)=>{this._checkReadonlyOptions(d),this._core.options[d]=g};for(const d in this._core.options){const g={get:e.bind(this,d),set:r.bind(this,d)};Object.defineProperty(this._publicOptions,d,g)}}_checkReadonlyOptions(n){if(S.includes(n))throw new Error(`Option "${n}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new l.ParserApi(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new p.UnicodeApi(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this.register(new a.BufferNamespaceApi(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){const n=this._core.coreService.decPrivateModes;let e="none";switch(this._core.coreMouseService.activeProtocol){case"X10":e="x10";break;case"VT200":e="vt200";break;case"DRAG":e="drag";break;case"ANY":e="any"}return{applicationCursorKeysMode:n.applicationCursorKeys,applicationKeypadMode:n.applicationKeypad,bracketedPasteMode:n.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:e,originMode:n.origin,reverseWraparoundMode:n.reverseWraparound,sendFocusMode:n.sendFocus,wraparoundMode:n.wraparound}}get options(){return this._publicOptions}set options(n){for(const e in n)this._publicOptions[e]=n[e]}blur(){this._core.blur()}focus(){this._core.focus()}input(n,e=!0){this._core.input(n,e)}resize(n,e){this._verifyIntegers(n,e),this._core.resize(n,e)}open(n){this._core.open(n)}attachCustomKeyEventHandler(n){this._core.attachCustomKeyEventHandler(n)}attachCustomWheelEventHandler(n){this._core.attachCustomWheelEventHandler(n)}registerLinkProvider(n){return this._core.registerLinkProvider(n)}registerCharacterJoiner(n){return this._checkProposedApi(),this._core.registerCharacterJoiner(n)}deregisterCharacterJoiner(n){this._checkProposedApi(),this._core.deregisterCharacterJoiner(n)}registerMarker(n=0){return this._verifyIntegers(n),this._core.registerMarker(n)}registerDecoration(n){return this._checkProposedApi(),this._verifyPositiveIntegers(n.x??0,n.width??0,n.height??0),this._core.registerDecoration(n)}hasSelection(){return this._core.hasSelection()}select(n,e,r){this._verifyIntegers(n,e,r),this._core.select(n,e,r)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(n,e){this._verifyIntegers(n,e),this._core.selectLines(n,e)}dispose(){super.dispose()}scrollLines(n){this._verifyIntegers(n),this._core.scrollLines(n)}scrollPages(n){this._verifyIntegers(n),this._core.scrollPages(n)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(n){this._verifyIntegers(n),this._core.scrollToLine(n)}clear(){this._core.clear()}write(n,e){this._core.write(n,e)}writeln(n,e){this._core.write(n),this._core.write(`\r
`,e)}paste(n){this._core.paste(n)}refresh(n,e){this._verifyIntegers(n,e),this._core.refresh(n,e)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(n){this._addonManager.loadAddon(this,n)}static get strings(){return i}_verifyIntegers(...n){for(const e of n)if(e===1/0||isNaN(e)||e%1!=0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...n){for(const e of n)if(e&&(e===1/0||isNaN(e)||e%1!=0||e<0))throw new Error("This API only accepts positive integers")}}k.Terminal=u})(),D})())}(gi)),gi.exports}var Wc=zc(),mi={exports:{}},ds;function $c(){return ds||(ds=1,function(s,h){(function(_,C){s.exports=C()})(self,()=>(()=>{var _={};return(()=>{var C=_;Object.defineProperty(C,"__esModule",{value:!0}),C.FitAddon=void 0,C.FitAddon=class{activate(E){this._terminal=E}dispose(){}fit(){const E=this.proposeDimensions();if(!E||!this._terminal||isNaN(E.cols)||isNaN(E.rows))return;const D=this._terminal._core;this._terminal.rows===E.rows&&this._terminal.cols===E.cols||(D._renderService.clear(),this._terminal.resize(E.cols,E.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;const E=this._terminal._core,D=E._renderService.dimensions;if(D.css.cell.width===0||D.css.cell.height===0)return;const k=this._terminal.options.scrollback===0?0:E.viewport.scrollBarWidth,i=window.getComputedStyle(this._terminal.element.parentElement),o=parseInt(i.getPropertyValue("height")),c=Math.max(0,parseInt(i.getPropertyValue("width"))),f=window.getComputedStyle(this._terminal.element),a=o-(parseInt(f.getPropertyValue("padding-top"))+parseInt(f.getPropertyValue("padding-bottom"))),l=c-(parseInt(f.getPropertyValue("padding-right"))+parseInt(f.getPropertyValue("padding-left")))-k;return{cols:Math.max(2,Math.floor(l/D.css.cell.width)),rows:Math.max(1,Math.floor(a/D.css.cell.height))}}}})(),_})())}(mi)),mi.exports}var Uc=$c(),jc=Z('<div class="d-flex justify-content-end mb-2"><button type="button" class="btn mx-3" title="Fullscreen"><!></button> <button type="button" class="btn mx-3" title="Close Terminal"><!></button></div> <div class="border" style="height: calc(100vh - 280px)"></div>',1),qc=Z('<form class="container login-form"><div class="container" style="max-width: 400px"><div class="form-floating mb-2"><input type="text" class="form-control" id="inpTerminalCmd"/> <label for="inpTerminalCmd">Command</label></div> <div class="form-floating mb-2"><input type="text" class="form-control" id="inpTerminalUser"/> <label for="inpTerminalUser">User</label></div> <div class="col-12"><button type="submit" class="btn btn-primary w-100"><!> Open Terminal</button></div></div></form>');function Kc(s,h){it(h,!1);let _=he(h,"container_id",8),C,E=le(),D=le(!1);const k="sh";let i=le(k);const o="root";let c=le(o);const f=new Wc.Terminal({theme:{background:"#222",cursor:"white",cursorAccent:"#222"},cursorBlink:!0}),a=new Uc.FitAddon;$r(()=>{_()!==C&&(y(D)&&(ne.send("close_terminal"),S()),C=_())}),ut(()=>{ne.register("spawn_terminal",()=>{l(),f.focus()},d=>ke.add({text:d,type:"error"})),ne.register("close_terminal",()=>{ke.add({text:"Terminal has been closed",type:"info"}),S()},d=>ke.add({text:d,type:"error"})),ne.register("receive_terminal_output",async d=>{f.write(new Uint8Array(await d.blob.arrayBuffer()))},d=>ke.add({text:d,type:"error"})),f.onResize(d=>{ne.send("resize_terminal",d)}),f.loadAddon(a),f.onData(d=>{ne.send("transmit_terminal_input",{data:d})})}),Gt(()=>{y(D)&&ne.send("close_terminal"),ne.unregister("spawn_terminal"),ne.unregister("close_terminal"),ne.unregister("receive_terminal_output")});function l(){y(D)&&a.fit()}async function p(){Y(D,!0),ne.send("spawn_terminal",{container_id:_(),cmd:y(i),user:y(c)}),await Ni(),f.open(y(E))}function S(){Y(D,!1),f.reset(),f.clear(),Y(i,k),Y(c,o)}function u(){y(E)?.requestFullscreen&&y(E).requestFullscreen({navigationUI:"show"})}ct();var t=Ue();Se("resize",Yr,l);var n=ge(t);{var e=d=>{var g=jc(),m=ge(g),b=H(m),v=H(b);de(v,{get icon(){return nn},size:"lg",color:"#666"});var w=U(b,2),R=H(w);de(R,{get icon(){return Ka},size:"lg",color:"#666"});var B=U(m,2);ci(B,P=>Y(E,P),()=>y(E)),Se("click",b,u),Se("click",w,()=>ne.send("close_terminal")),W(d,g)},r=d=>{var g=qc(),m=H(g),b=H(m),v=H(b),w=U(b,2),R=H(w),B=U(w,2),P=H(B),A=H(P);de(A,{get icon(){return Qa}}),ti(v,()=>y(i),N=>Y(i,N)),ti(R,()=>y(c),N=>Y(c,N)),Se("submit",g,ri(p)),vt(3,g,()=>Ft),W(d,g)};te(n,d=>{y(D)?d(e):d(r,!1)})}W(s,t),st()}/*!
 * Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2025 Fonticons, Inc.
 */var Vc={prefix:"fab",iconName:"github",icon:[512,512,[],"f09b","M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3 .3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5 .3-6.2 2.3zm44.2-1.7c-2.9 .7-4.9 2.6-4.6 4.9 .3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM252.8 8c-138.7 0-244.8 105.3-244.8 244 0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1 100-33.2 167.8-128.1 167.8-239 0-138.7-112.5-244-251.2-244zM105.2 352.9c-1.3 1-1 3.3 .7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3 .3 2.9 2.3 3.9 1.6 1 3.6 .7 4.3-.7 .7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3 .7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3 .7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"]},Gc={prefix:"fab",iconName:"docker",icon:[640,512,[],"f395","M349.9 236.3l-66.1 0 0-59.4 66.1 0 0 59.4zm0-204.3l-66.1 0 0 60.7 66.1 0 0-60.7zm78.2 144.8l-66.1 0 0 59.4 66.1 0 0-59.4zM271.8 104.7l-66.1 0 0 60.1 66.1 0 0-60.1zm78.1 0l-66.1 0 0 60.1 66.1 0 0-60.1zm276.8 100c-14.4-9.7-47.6-13.2-73.1-8.4-3.3-24-16.7-44.9-41.1-63.7l-14-9.3-9.3 14c-18.4 27.8-23.4 73.6-3.7 103.8-8.7 4.7-25.8 11.1-48.4 10.7l-434.7 0c-8.7 50.8 5.8 116.8 44 162.1 37.1 43.9 92.7 66.2 165.4 66.2 157.4 0 273.9-72.5 328.4-204.2 21.4 .4 67.6 .1 91.3-45.2 1.5-2.5 6.6-13.2 8.5-17.1l-13.3-8.9zM115.6 176.8l-66 0 0 59.4 66.1 0 0-59.4-.1 0zm78.1 0l-66.1 0 0 59.4 66.1 0 0-59.4zm78.1 0l-66.1 0 0 59.4 66.1 0 0-59.4zm-78.1-72.1l-66.1 0 0 60.1 66.1 0 0-60.1z"]},Xc=Z('<div class="d-flex align-items-center"><strong class="mx-5">Loading...</strong> <div class="spinner-border ms-auto" role="status" aria-hidden="true"></div></div>'),Zc=Z('<div class="card"><div class="card-body"><div class="fs-4 text-uppercase mb-3">Host</div> <div class="d-flex align-items-center mb-2"><!> </div> <div class="d-flex align-items-center mb-2"><!> </div> <div class="d-flex align-items-center mb-2"><!> </div> <div class="d-flex align-items-center mb-2"><!> </div> <div class="d-flex align-items-center mb-2"><!> </div> <div class="mt-3"><a href="https://github.com/knrdl/caasa" target="_blank" rel="noopener noreferrer" class="text-decoration-none"><!> CaaSa on Github</a></div></div></div>'),Jc=Z('<div class="flex-grow-1 d-flex justify-content-center align-items-start mt-5"><!></div>');function Yc(s,h){it(h,!1);let _=le(!0),C=le();ut(()=>{ne.register("get_system_info",o=>{Y(C,o),Y(_,!1)},o=>{Y(_,!1),ke.add({text:o,type:"error"})}),ne.send("get_system_info")}),Gt(()=>{ne.unregister("get_system_info")}),ct();var E=Jc(),D=H(E);{var k=o=>{var c=Xc();W(o,c)},i=o=>{var c=Ue(),f=ge(c);{var a=l=>{var p=Zc(),S=H(p),u=U(H(S),2),t=H(u);de(t,{get icon(){return el},size:"lg",style:"width: 3rem"});var n=U(t),e=U(u,2),r=H(e);de(r,{get icon(){return an},size:"lg",style:"width: 3rem"});var d=U(r),g=U(e,2),m=H(g);de(m,{get icon(){return sn},size:"lg",style:"width: 3rem"});var b=U(m),v=U(g,2),w=H(v);de(w,{get icon(){return Gc},size:"lg",style:"width: 3rem"});var R=U(w),B=U(v,2),P=H(B);de(P,{get icon(){return on},size:"lg",style:"width: 3rem"});var A=U(P),N=U(B,2),q=H(N),V=H(q);de(V,{get icon(){return Vc},size:"sm"}),ae(Q=>{se(n,` ${y(C).os??""}`),se(d,` ${y(C).cpus??""} CPUs`),se(b,` ${Q??""}
          Memory`),se(R,` ${y(C).engine_version??""}`),se(A,` ${y(C).containers.running??""}/${y(C).containers.total??""} Containers running`)},[()=>Ct(y(C).mem)]),W(l,p)};te(f,l=>{y(C)&&l(a)},!0)}W(o,c)};te(D,o=>{y(_)?o(k):o(i,!1)})}W(s,E),st()}var Qc=Z('<p class="mx-5 my-2">No containers found</p>'),eh=Z('<button type="button" style="cursor: pointer; text-align: left"><div style="width: 10px; flex: none"></div> <div class="p-2 pe-4"><div> </div> <div> </div></div></button>'),th=Z('<p class="mx-2 my-1">No containers match search term</p>'),rh=Z('<input type="search" class="form-control svelte-19p7dlr" placeholder="Search"/> <!>',1),ih=Z('<aside class="d-flex flex-column pb-1 svelte-19p7dlr"><!></aside>');function us(s,h){it(h,!1);const _=le();let C=he(h,"containers",8),E=he(h,"selectedContainer",8);const D=Xs();let k=le("");At(()=>(Me(C()),y(k)),()=>{Y(_,C()?.filter(f=>f.name.toLowerCase().replace(/\s+/g,"").includes(y(k).replace(/\s+/g,""))||f.namespace?.toLowerCase().replace(/\s+/g,"").includes(y(k).replace(/\s+/g,""))))}),Nr(),ct();var i=ih(),o=H(i);{var c=f=>{var a=Ue(),l=ge(a);{var p=u=>{var t=Qc();W(u,t)},S=u=>{var t=rh(),n=ge(t),e=U(n,2);bt(e,1,()=>y(_),St,(r,d)=>{const g=xt(()=>(Me(E()),y(d),j(()=>E()&&E().id===y(d).id)));var m=eh();let b;var v=H(m);let w;var R=U(v,2),B=H(R);let P;var A=H(B),N=U(B,2),q=H(N);ae((V,Q,G)=>{b=Je(m,1,"btn d-flex border-top border-bottom",null,b,V),w=Je(v,1,"",null,w,Q),P=Je(B,1,"text-uppercase",null,P,G),se(A,(y(d),j(()=>y(d).namespace||""))),se(q,(y(d),j(()=>y(d).name)))},[()=>({"bg-dark":y(g),"text-light":y(g)}),()=>({"bg-success":y(d).status==="running","bg-danger":["exited","dead","removing"].includes(y(d).status),"bg-warning":["created","paused","restarting"].includes(y(d).status)}),()=>({"text-muted":E()?.id!==y(d).id})]),Se("click",m,()=>D("select-container",y(d))),W(r,m)},r=>{var d=th();W(r,d)}),ae(()=>na(n,y(k))),Se("input",n,r=>Y(k,r.currentTarget.value.toLowerCase())),W(u,t)};te(l,u=>{Me(C()),j(()=>C().length===0)?u(p):u(S,!1)})}W(f,a)};te(o,f=>{C()&&f(c)})}W(s,i),st()}var sh=Z('<div class="position-absolute"><!></div>'),nh=Z('<li><button type="button">Info</button></li>'),oh=Z('<li><button type="button">Logs</button></li>'),ah=Z('<li><button type="button">Terminal</button></li>'),lh=Z('<li><button type="button">Processes</button></li>'),ch=Z('<li><button type="button">Files</button></li>'),hh=Z("<div><!></div>"),dh=Z("<div><!></div>"),uh=Z("<div><!></div>"),fh=Z("<div><!></div>"),_h=Z("<div><!></div>"),vh=Z('<div class="container-md" style="overflow: hidden"><div class="card tabs"><ul class="card-header"><!> <!> <!> <!> <!></ul> <div class="card-body py-4"><!></div></div></div>'),ph=Z('<!> <div style="z-index: 100;"><button type="button" class="position-fixed top-0 bottom-0 start-0 end-0" style="background: rgba(0, 0, 0, .55);" aria-label="Hide list"></button> <!></div> <div class="d-flex pb-3 align-items-start"><aside class="d-none d-md-block me-4"><!></aside> <!></div>',1);function gh(s,h){it(h,!1);const _=le();let C,E=le(!0),D=le(),k=le(),i=he(h,"showHostInfo",12),o=he(h,"showContainerListOverlay",12),c=le(null);ut(()=>{ne.register("get_container_list",R=>{Y(D,R),Y(E,!1)},R=>ke.add({text:R,type:"error"})),ne.send("get_container_list"),C=setInterval(()=>{ne.send("get_container_list")},3e3)}),Gt(()=>{ne.unregister("get_container_list"),clearInterval(C)});function f(R){Y(c,null),i(!1),o(!1),Y(k,null),window.scrollTo({top:0,behavior:"smooth"}),setTimeout(()=>{Y(k,R);const B=["info","logs","procs","term","files"];for(let P of B)if(y(k)?.permissions?.includes(P)){Y(c,P);break}y(c)||(Y(k,null),ke.add({type:"warning",text:"No permissions to access container"}))},100)}function a(R){Y(c,R)}At(()=>y(k),()=>{Y(_,y(k)?.status==="running")}),Nr(),ct();var l=ph(),p=ge(l);{var S=R=>{cn(R,{})};te(p,R=>{y(E)&&R(S)})}var u=U(p,2);let t;var n=H(u),e=U(n,2);{var r=R=>{var B=sh(),P=H(B);{let A=xt(()=>i()?null:y(k));us(P,{get containers(){return y(D)},get selectedContainer(){return y(A)},$$events:{"select-container":N=>f(N.detail)}})}vt(3,B,()=>ns,()=>({y:-50,duration:200})),W(R,B)};te(e,R=>{o()&&R(r)})}var d=U(u,2),g=H(d),m=H(g);{let R=xt(()=>i()?null:y(k));us(m,{get containers(){return y(D)},get selectedContainer(){return y(R)},$$events:{"select-container":B=>f(B.detail)}})}var b=U(g,2);{var v=R=>{Yc(R,{})},w=R=>{var B=vh(),P=H(B),A=H(P),N=H(A);{var q=I=>{var L=nh(),z=H(L);let $;ae(X=>$=Je(z,1,"text-uppercase",null,$,X),[()=>({active:y(c)==="info"})]),Se("click",z,()=>a("info")),W(I,L)};te(N,I=>{y(k),j(()=>y(k)?.permissions?.includes("info"))&&I(q)})}var V=U(N,2);{var Q=I=>{var L=oh(),z=H(L);let $;ae(X=>$=Je(z,1,"text-uppercase",null,$,X),[()=>({active:y(c)==="logs"})]),Se("click",z,()=>a("logs")),W(I,L)};te(V,I=>{y(k),j(()=>y(k)?.permissions?.includes("logs"))&&I(Q)})}var G=U(V,2);{var x=I=>{var L=ah(),z=H(L);let $;ae(X=>$=Je(z,1,"text-uppercase",null,$,X),[()=>({active:y(c)==="term"})]),Se("click",z,()=>a("term")),W(I,L)};te(G,I=>{y(_),y(k),j(()=>y(_)&&y(k)?.permissions?.includes("term"))&&I(x)})}var T=U(G,2);{var M=I=>{var L=lh(),z=H(L);let $;ae(X=>$=Je(z,1,"text-uppercase",null,$,X),[()=>({active:y(c)==="procs"})]),Se("click",z,()=>a("procs")),W(I,L)};te(T,I=>{y(_),y(k),j(()=>y(_)&&y(k)?.permissions?.includes("procs"))&&I(M)})}var O=U(T,2);{var F=I=>{var L=ch(),z=H(L);let $;ae(X=>$=Je(z,1,"text-uppercase",null,$,X),[()=>({active:y(c)==="files"})]),Se("click",z,()=>a("files")),W(I,L)};te(O,I=>{y(_),y(k),j(()=>y(_)&&y(k)?.permissions?.includes("files"))&&I(F)})}var K=U(A,2),ee=H(K);{var re=I=>{var L=Ue(),z=ge(L);{var $=J=>{var oe=hh(),_e=H(oe);{let ve=xt(()=>(y(k),j(()=>y(k).permissions.includes("state"))));ac(_e,{get container_id(){return y(k),j(()=>y(k).id)},get enable_actions(){return y(ve)}})}vt(1,oe,()=>Ft),W(J,oe)},X=J=>{var oe=Ue(),_e=ge(oe);{var ve=ie=>{var Ae=dh(),Ve=H(Ae);gc(Ve,{get container_id(){return y(k),j(()=>y(k).id)}}),vt(1,Ae,()=>Ft),W(ie,Ae)},Re=ie=>{var Ae=Ue(),Ve=ge(Ae);{var yt=He=>{var Te=uh(),nt=H(Te);Kc(nt,{get container_id(){return y(k),j(()=>y(k).id)}}),vt(1,Te,()=>Ft),W(He,Te)},Le=He=>{var Te=Ue(),nt=ge(Te);{var Ge=Ye=>{var Ne=fh(),ft=H(Ne);Nc(ft,{get container_id(){return y(k),j(()=>y(k).id)}}),vt(1,Ne,()=>Ft),W(Ye,Ne)},Xe=Ye=>{var Ne=Ue(),ft=ge(Ne);{var ot=ze=>{var be=_h(),Er=H(be);{let hi=xt(()=>(y(k),j(()=>y(k).permissions.includes("files-read")))),Ur=xt(()=>(y(k),j(()=>y(k).permissions.includes("files-write"))));Mc(Er,{get container_id(){return y(k),j(()=>y(k).id)},get allow_download(){return y(hi)},get allow_upload(){return y(Ur)}})}vt(1,be,()=>Ft),W(ze,be)};te(ft,ze=>{y(c)==="files"&&ze(ot)},!0)}W(Ye,Ne)};te(nt,Ye=>{y(c)==="procs"?Ye(Ge):Ye(Xe,!1)},!0)}W(He,Te)};te(Ve,He=>{y(c)==="term"?He(yt):He(Le,!1)},!0)}W(ie,Ae)};te(_e,ie=>{y(c)==="logs"?ie(ve):ie(Re,!1)},!0)}W(J,oe)};te(z,J=>{y(c)==="info"?J($):J(X,!1)})}W(I,L)};te(ee,I=>{y(k)&&I(re)})}vt(3,B,()=>ns,()=>({x:300,duration:200})),W(R,B)};te(b,R=>{i()?R(v):R(w,!1)})}ae(R=>t=Je(u,1,"d-md-none position-relative",null,t,R),[()=>({"d-none":!o()})]),Se("click",n,()=>o(!1)),W(s,l),st()}var mh=Z('<a href="/#/" class="d-md-none d-flex justify-content-center align-items-center svelte-1n46o8q"><!></a>'),Sh=Z('<button type="button" class="btn mx-2"><!></button>'),bh=Z('<!> <main class="svelte-1n46o8q"><header class="svelte-1n46o8q"><!> <a href="/#/" class="d-flex justify-content-center align-items-center svelte-1n46o8q"><span><!></span> <span class="text-black ps-2 fs-2 fw-light">Container as a Service admin</span></a> <div class="items-right svelte-1n46o8q"><!> <!></div></header> <!></main>',1);function wh(s,h){it(h,!1);let _=le(null),C=le(!0),E=le(!0),D=le(!1);ut(async()=>{ne.register("ws-error",null,w=>ke.add({text:w,type:"error"})),ne.register("ws-close",null,w=>{ke.add({text:w,type:"error"}),Y(_,null),alert("Lost connection. Reconnect?"),window.location.reload()}),ne.register("webproxy_auth",({username:w})=>{Y(_,w),Y(C,!1)},w=>{ke.add({text:w,type:"error"})}),await ne.init()});function k(){ne.close(),Y(_,null),ke.add({text:"Logged out",type:"info"}),window.location.reload()}function i(){alert("An error occurred!")}ct();var o=bh();Se("error",Yr,i);var c=ge(o);ya(c,{});var f=U(c,2),a=H(f),l=H(a);{var p=w=>{var R=mh(),B=H(R);de(B,{get icon(){return hl},color:"#123",size:"2x",style:"width: 3rem;height: 3rem;"}),Se("click",R,ri(()=>Y(D,!y(D)))),W(w,R)};te(l,w=>{y(_)&&w(p)})}var S=U(l,2),u=H(S);let t;var n=H(u);de(n,{get icon(){return il},color:"#123",size:"2x",style:"width: 3rem;height: 3rem;"});var e=U(S,2),r=H(e);fl(r,{});var d=U(r,2);{var g=w=>{var R=Sh(),B=H(R);de(B,{get icon(){return $a},color:"#333",size:"2x"}),ae(()=>Fe(R,"title",`Logout ${y(_)??""}`)),Se("click",R,k),W(w,R)};te(d,w=>{y(_)&&y(C)&&w(g)})}var m=U(a,2);{var b=w=>{gh(w,{get showHostInfo(){return y(E)},set showHostInfo(R){Y(E,R)},get showContainerListOverlay(){return y(D)},set showContainerListOverlay(R){Y(D,R)},$$legacy:!0})},v=w=>{Dl(w,{$$events:{login:R=>Y(_,R.detail.username)}})};te(m,w=>{y(_)?w(b):w(v,!1)})}ae(w=>t=Je(u,1,"",null,t,w),[()=>({"d-none":y(_),"d-md-block":y(_)})]),Se("click",S,ri(()=>Y(E,!0))),W(s,o),st()}Vo(wh,{target:document.getElementById("app")});
