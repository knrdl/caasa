var Rs=Object.defineProperty;var As=(n,u,g)=>u in n?Rs(n,u,{enumerable:!0,configurable:!0,writable:!0,value:g}):n[u]=g;var Oe=(n,u,g)=>As(n,typeof u!="symbol"?u+"":u,g);(function(){const u=document.createElement("link").relList;if(u&&u.supports&&u.supports("modulepreload"))return;for(const E of document.querySelectorAll('link[rel="modulepreload"]'))x(E);new MutationObserver(E=>{for(const B of E)if(B.type==="childList")for(const D of B.addedNodes)D.tagName==="LINK"&&D.rel==="modulepreload"&&x(D)}).observe(document,{childList:!0,subtree:!0});function g(E){const B={};return E.integrity&&(B.integrity=E.integrity),E.referrerPolicy&&(B.referrerPolicy=E.referrerPolicy),E.crossOrigin==="use-credentials"?B.credentials="include":E.crossOrigin==="anonymous"?B.credentials="omit":B.credentials="same-origin",B}function x(E){if(E.ep)return;E.ep=!0;const B=g(E);fetch(E.href,B)}})();const Ts="5";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Ts);let Ut=!1;function Bs(){Ut=!0}Bs();const Ji=1,Qi=2,Dr=4,Ms=8,Os=16,Ps=1,Is=2,Hs=4,Fs=8,zs=16,$s=1,Ns=2,Ws=4,Rr=1,Us=2,Ue=Symbol(),Ar=!1;var si=Array.isArray,Tr=Array.from,js=Object.defineProperty,fi=Object.getOwnPropertyDescriptor,Br=Object.getOwnPropertyDescriptors,qs=Object.prototype,Ks=Array.prototype,gi=Object.getPrototypeOf;function Vs(n){return typeof n=="function"}const pt=()=>{};function Gs(n){return n()}function Wi(n){for(var u=0;u<n.length;u++)n[u]()}const Je=2,Mr=4,ni=8,ki=16,it=32,Li=64,Ui=128,Ot=256,mi=512,Pe=1024,kt=2048,jt=4096,ht=8192,qt=16384,Or=32768,Di=65536,Pr=1<<17,Xs=1<<19,Ir=1<<20,St=Symbol("$state"),Zs=Symbol("legacy props"),Ys=Symbol("");function Hr(n){return n===this.v}function Fr(n,u){return n!=n?u==u:n!==u||n!==null&&typeof n=="object"||typeof n=="function"}function er(n){return!Fr(n,this.v)}function Js(n){throw new Error("effect_in_teardown")}function Qs(){throw new Error("effect_in_unowned_derived")}function en(n){throw new Error("effect_orphan")}function tn(){throw new Error("effect_update_depth_exceeded")}function rn(n){throw new Error("lifecycle_legacy_only")}function sn(n){throw new Error("props_invalid_value")}function nn(){throw new Error("state_descriptors_fixed")}function on(){throw new Error("state_prototype_fixed")}function an(){throw new Error("state_unsafe_local_read")}function ln(){throw new Error("state_unsafe_mutation")}function Ve(n){return{f:0,v:n,reactions:null,equals:Hr,version:0}}function tr(n,u=!1){var x;const g=Ve(n);return u||(g.equals=er),Ut&&pe!==null&&pe.l!==null&&((x=pe.l).s??(x.s=[])).push(g),g}function se(n,u=!1){return cn(tr(n,u))}function cn(n){return ge!==null&&ge.f&Je&&(dt===null?gn([n]):dt.push(n)),n}function Jt(n,u){return X(n,tt(()=>k(n))),u}function X(n,u){return ge!==null&&Ti()&&ge.f&(Je|ki)&&(dt===null||!dt.includes(n))&&ln(),ji(n,u)}function ji(n,u){return n.equals(u)||(n.v=u,n.version=Qr(),zr(n,kt),Ti()&&de!==null&&de.f&Pe&&!(de.f&it)&&(Me!==null&&Me.includes(n)?(rt(de,kt),Bi(de)):xt===null?mn([n]):xt.push(n))),u}function zr(n,u){var g=n.reactions;if(g!==null)for(var x=Ti(),E=g.length,B=0;B<E;B++){var D=g[B],s=D.f;s&kt||!x&&D===de||(rt(D,u),s&(Pe|Ot)&&(s&Je?zr(D,jt):Bi(D)))}}function Si(n){var u=Je|kt;de===null?u|=Ot:de.f|=Ir;var g=ge!==null&&ge.f&Je?ge:null;const x={children:null,ctx:pe,deps:null,equals:Hr,f:u,fn:n,reactions:null,v:null,version:0,parent:g??de};return g!==null&&(g.children??(g.children=[])).push(x),x}function et(n){const u=Si(n);return u.equals=er,u}function $r(n){var u=n.children;if(u!==null){n.children=null;for(var g=0;g<u.length;g+=1){var x=u[g];x.f&Je?ir(x):Vt(x)}}}function hn(n){for(var u=n.parent;u!==null;){if(!(u.f&Je))return u;u=u.parent}return null}function Nr(n){var u,g=de;Qe(hn(n));try{$r(n),u=es(n)}finally{Qe(g)}return u}function Wr(n){var u=Nr(n),g=(zt||n.f&Ot)&&n.deps!==null?jt:Pe;rt(n,g),n.equals(u)||(n.v=u,n.version=Qr())}function ir(n){$r(n),ti(n,0),rt(n,qt),n.v=n.children=n.deps=n.ctx=n.reactions=null}function Ur(n){de===null&&ge===null&&en(),ge!==null&&ge.f&Ot&&Qs(),nr&&Js()}function dn(n,u){var g=u.last;g===null?u.last=u.first=n:(g.next=n,n.prev=g,u.last=n)}function oi(n,u,g,x=!0){var E=(n&Li)!==0,B=de,D={ctx:pe,deps:null,deriveds:null,nodes_start:null,nodes_end:null,f:n|kt,first:null,fn:u,last:null,next:null,parent:E?null:B,prev:null,teardown:null,transitions:null,version:0};if(g){var s=$t;try{cr(!0),ci(D),D.f|=Or}catch(f){throw Vt(D),f}finally{cr(s)}}else u!==null&&Bi(D);var a=g&&D.deps===null&&D.first===null&&D.nodes_start===null&&D.teardown===null&&(D.f&Ir)===0;if(!a&&!E&&x&&(B!==null&&dn(D,B),ge!==null&&ge.f&Je)){var l=ge;(l.children??(l.children=[])).push(D)}return D}function un(n){const u=oi(ni,null,!1);return rt(u,Pe),u.teardown=n,u}function qi(n){Ur();var u=de!==null&&(de.f&it)!==0&&pe!==null&&!pe.m;if(u){var g=pe;(g.e??(g.e=[])).push({fn:n,effect:de,reaction:ge})}else{var x=Kt(n);return x}}function _n(n){return Ur(),li(n)}function Kt(n){return oi(Mr,n,!1)}function ct(n,u){var g=pe,x={effect:null,ran:!1};g.l.r1.push(x),x.effect=li(()=>{n(),!x.ran&&(x.ran=!0,X(g.l.r2,!0),tt(u))})}function ai(){var n=pe;li(()=>{if(k(n.l.r2)){for(var u of n.l.r1){var g=u.effect;g.f&Pe&&rt(g,jt),Gt(g)&&ci(g),u.ran=!1}n.l.r2.v=!1}})}function li(n){return oi(ni,n,!0)}function ee(n){return rr(n)}function rr(n,u=0){return oi(ni|ki|u,n,!0)}function bi(n,u=!0){return oi(ni|it,n,!0,u)}function jr(n){var u=n.teardown;if(u!==null){const g=nr,x=ge;hr(!0),ut(null);try{u.call(null)}finally{hr(g),ut(x)}}}function qr(n){var u=n.deriveds;if(u!==null){n.deriveds=null;for(var g=0;g<u.length;g+=1)ir(u[g])}}function Kr(n,u=!1){var g=n.first;for(n.first=n.last=null;g!==null;){var x=g.next;Vt(g,u),g=x}}function fn(n){for(var u=n.first;u!==null;){var g=u.next;u.f&it||Vt(u),u=g}}function Vt(n,u=!0){var g=!1;if((u||n.f&Xs)&&n.nodes_start!==null){for(var x=n.nodes_start,E=n.nodes_end;x!==null;){var B=x===E?null:Mi(x);x.remove(),x=B}g=!0}Kr(n,u&&!g),qr(n),ti(n,0),rt(n,qt);var D=n.transitions;if(D!==null)for(const a of D)a.stop();jr(n);var s=n.parent;s!==null&&s.first!==null&&Vr(n),n.next=n.prev=n.teardown=n.ctx=n.deps=n.fn=n.nodes_start=n.nodes_end=null}function Vr(n){var u=n.parent,g=n.prev,x=n.next;g!==null&&(g.next=x),x!==null&&(x.prev=g),u!==null&&(u.first===n&&(u.first=x),u.last===n&&(u.last=g))}function Ki(n,u){var g=[];sr(n,g,!0),Gr(g,()=>{Vt(n),u&&u()})}function Gr(n,u){var g=n.length;if(g>0){var x=()=>--g||u();for(var E of n)E.out(x)}else u()}function sr(n,u,g){if(!(n.f&ht)){if(n.f^=ht,n.transitions!==null)for(const D of n.transitions)(D.is_global||g)&&u.push(D);for(var x=n.first;x!==null;){var E=x.next,B=(x.f&Di)!==0||(x.f&it)!==0;sr(x,u,B?g:!1),x=E}}}function Ci(n){Xr(n,!0)}function Xr(n,u){if(n.f&ht){Gt(n)&&ci(n),n.f^=ht;for(var g=n.first;g!==null;){var x=g.next,E=(g.f&Di)!==0||(g.f&it)!==0;Xr(g,E?u:!1),g=x}if(n.transitions!==null)for(const B of n.transitions)(B.is_global||u)&&B.in()}}let yi=!1,Vi=[];function Zr(){yi=!1;const n=Vi.slice();Vi=[],Wi(n)}function Ri(n){yi||(yi=!0,queueMicrotask(Zr)),Vi.push(n)}function vn(){yi&&Zr()}function Ai(n){throw new Error("lifecycle_outside_component")}const Yr=0,pn=1;let vi=!1,pi=Yr,ei=!1,$t=!1,nr=!1;function cr(n){$t=n}function hr(n){nr=n}let Mt=[],Nt=0;let ge=null;function ut(n){ge=n}let de=null;function Qe(n){de=n}let dt=null;function gn(n){dt=n}let Me=null,je=0,xt=null;function mn(n){xt=n}let Jr=0,zt=!1,wt=null,pe=null;function Qr(){return++Jr}function Ti(){return!Ut||pe!==null&&pe.l===null}function Gt(n){var D,s;var u=n.f;if(u&kt)return!0;if(u&jt){var g=n.deps,x=(u&Ot)!==0;if(g!==null){var E;if(u&mi){for(E=0;E<g.length;E++)((D=g[E]).reactions??(D.reactions=[])).push(n);n.f^=mi}for(E=0;E<g.length;E++){var B=g[E];if(Gt(B)&&Wr(B),x&&de!==null&&!zt&&!((s=B==null?void 0:B.reactions)!=null&&s.includes(n))&&(B.reactions??(B.reactions=[])).push(n),B.version>n.version)return!0}}x||rt(n,Pe)}return!1}function Sn(n,u){for(var g=u;g!==null;){if(g.f&Ui)try{g.fn(n);return}catch{g.f^=Ui}g=g.parent}throw vi=!1,n}function bn(n){return(n.f&qt)===0&&(n.parent===null||(n.parent.f&Ui)===0)}function or(n,u,g,x){if(vi){if(g===null&&(vi=!1),bn(u))throw n;return}g!==null&&(vi=!0);{Sn(n,u);return}}function es(n){var h;var u=Me,g=je,x=xt,E=ge,B=zt,D=dt,s=pe,a=n.f;Me=null,je=0,xt=null,ge=a&(it|Li)?null:n,zt=!$t&&(a&Ot)!==0,dt=null,pe=n.ctx;try{var l=(0,n.fn)(),f=n.deps;if(Me!==null){var o;if(ti(n,je),f!==null&&je>0)for(f.length=je+Me.length,o=0;o<Me.length;o++)f[je+o]=Me[o];else n.deps=f=Me;if(!zt)for(o=je;o<f.length;o++)((h=f[o]).reactions??(h.reactions=[])).push(n)}else f!==null&&je<f.length&&(ti(n,je),f.length=je);return l}finally{Me=u,je=g,xt=x,ge=E,zt=B,dt=D,pe=s}}function Cn(n,u){let g=u.reactions;if(g!==null){var x=g.indexOf(n);if(x!==-1){var E=g.length-1;E===0?g=u.reactions=null:(g[x]=g[E],g.pop())}}g===null&&u.f&Je&&(Me===null||!Me.includes(u))&&(rt(u,jt),u.f&(Ot|mi)||(u.f^=mi),ti(u,0))}function ti(n,u){var g=n.deps;if(g!==null)for(var x=u;x<g.length;x++)Cn(n,g[x])}function ci(n){var u=n.f;if(!(u&qt)){rt(n,Pe);var g=de,x=pe;de=n;try{u&ki?fn(n):Kr(n),qr(n),jr(n);var E=es(n);n.teardown=typeof E=="function"?E:null,n.version=Jr}catch(B){or(B,n,g,x||n.ctx)}finally{de=g}}}function ts(){Nt>1e3&&(Nt=0,tn()),Nt++}function is(n){var u=n.length;if(u!==0){ts();var g=$t;$t=!0;try{for(var x=0;x<u;x++){var E=n[x];E.f&Pe||(E.f^=Pe);var B=[];rs(E,B),yn(B)}}finally{$t=g}}}function yn(n){var u=n.length;if(u!==0)for(var g=0;g<u;g++){var x=n[g];if(!(x.f&(qt|ht)))try{Gt(x)&&(ci(x),x.deps===null&&x.first===null&&x.nodes_start===null&&(x.teardown===null?Vr(x):x.fn=null))}catch(E){or(E,x,null,x.ctx)}}}function wn(){if(ei=!1,Nt>1001)return;const n=Mt;Mt=[],is(n),ei||(Nt=0)}function Bi(n){pi===Yr&&(ei||(ei=!0,queueMicrotask(wn)));for(var u=n;u.parent!==null;){u=u.parent;var g=u.f;if(g&(Li|it)){if(!(g&Pe))return;u.f^=Pe}}Mt.push(u)}function rs(n,u){var g=n.first,x=[];e:for(;g!==null;){var E=g.f,B=(E&it)!==0,D=B&&(E&Pe)!==0,s=g.next;if(!D&&!(E&ht))if(E&ni){if(B)g.f^=Pe;else try{Gt(g)&&ci(g)}catch(o){or(o,g,null,g.ctx)}var a=g.first;if(a!==null){g=a;continue}}else E&Mr&&x.push(g);if(s===null){let o=g.parent;for(;o!==null;){if(n===o)break e;var l=o.next;if(l!==null){g=l;continue e}o=o.parent}}g=s}for(var f=0;f<x.length;f++)a=x[f],u.push(a),rs(a,u)}function ss(n){var u=pi,g=Mt;try{ts();const E=[];pi=pn,Mt=E,ei=!1,is(g);var x=n==null?void 0:n();return vn(),(Mt.length>0||E.length>0)&&ss(),Nt=0,x}finally{pi=u,Mt=g}}async function ns(){await Promise.resolve(),ss()}function k(n){var f;var u=n.f,g=(u&Je)!==0;if(g&&u&qt){var x=Nr(n);return ir(n),x}if(wt!==null&&wt.add(n),ge!==null){dt!==null&&dt.includes(n)&&an();var E=ge.deps;Me===null&&E!==null&&E[je]===n?je++:Me===null?Me=[n]:Me.push(n),xt!==null&&de!==null&&de.f&Pe&&!(de.f&it)&&xt.includes(n)&&(rt(de,kt),Bi(de))}else if(g&&n.deps===null)for(var B=n,D=B.parent,s=B;D!==null;)if(D.f&Je){var a=D;s=a,D=a.parent}else{var l=D;(f=l.deriveds)!=null&&f.includes(s)||(l.deriveds??(l.deriveds=[])).push(s);break}return g&&(B=n,Gt(B)&&Wr(B)),n.v}function En(n){var u=wt;wt=new Set;var g=wt,x;try{if(tt(n),u!==null)for(x of wt)u.add(x)}finally{wt=u}for(x of g)if(x.f&Pr)for(const E of x.deps||[])E.f&Je||Jt(E,null);else Jt(x,null)}function tt(n){const u=ge;try{return ge=null,n()}finally{ge=u}}const xn=~(kt|jt|Pe);function rt(n,u){n.f=n.f&xn|u}function Fe(n,u=!1,g){pe={p:pe,c:null,e:null,m:!1,s:n,x:null,l:null},Ut&&!u&&(pe.l={s:null,u:null,r1:[],r2:Ve(!1)})}function ze(n){const u=pe;if(u!==null){const D=u.e;if(D!==null){var g=de,x=ge;u.e=null;try{for(var E=0;E<D.length;E++){var B=D[E];Qe(B.effect),ut(B.reaction),Kt(B.fn)}}finally{Qe(g),ut(x)}}pe=u.p,u.m=!0}return{}}function vt(n){if(!(typeof n!="object"||!n||n instanceof EventTarget)){if(St in n)Gi(n);else if(!Array.isArray(n))for(let u in n){const g=n[u];typeof g=="object"&&g&&St in g&&Gi(g)}}}function Gi(n,u=new Set){if(typeof n=="object"&&n!==null&&!(n instanceof EventTarget)&&!u.has(n)){u.add(n),n instanceof Date&&n.getTime();for(let x in n)try{Gi(n[x],u)}catch{}const g=gi(n);if(g!==Object.prototype&&g!==Array.prototype&&g!==Map.prototype&&g!==Set.prototype&&g!==Date.prototype){const x=Br(g);for(let E in x){const B=x[E].get;if(B)try{B.call(n)}catch{}}}}}function Ht(n,u=null,g){if(typeof n!="object"||n===null||St in n)return n;const x=gi(n);if(x!==qs&&x!==Ks)return n;var E=new Map,B=si(n),D=Ve(0);B&&E.set("length",Ve(n.length));var s;return new Proxy(n,{defineProperty(a,l,f){(!("value"in f)||f.configurable===!1||f.enumerable===!1||f.writable===!1)&&nn();var o=E.get(l);return o===void 0?(o=Ve(f.value),E.set(l,o)):X(o,Ht(f.value,s)),!0},deleteProperty(a,l){var f=E.get(l);if(f===void 0)l in a&&E.set(l,Ve(Ue));else{if(B&&typeof l=="string"){var o=E.get("length"),h=Number(l);Number.isInteger(h)&&h<o.v&&X(o,h)}X(f,Ue),dr(D)}return!0},get(a,l,f){var m;if(l===St)return n;var o=E.get(l),h=l in a;if(o===void 0&&(!h||(m=fi(a,l))!=null&&m.writable)&&(o=Ve(Ht(h?a[l]:Ue,s)),E.set(l,o)),o!==void 0){var p=k(o);return p===Ue?void 0:p}return Reflect.get(a,l,f)},getOwnPropertyDescriptor(a,l){var f=Reflect.getOwnPropertyDescriptor(a,l);if(f&&"value"in f){var o=E.get(l);o&&(f.value=k(o))}else if(f===void 0){var h=E.get(l),p=h==null?void 0:h.v;if(h!==void 0&&p!==Ue)return{enumerable:!0,configurable:!0,value:p,writable:!0}}return f},has(a,l){var p;if(l===St)return!0;var f=E.get(l),o=f!==void 0&&f.v!==Ue||Reflect.has(a,l);if(f!==void 0||de!==null&&(!o||(p=fi(a,l))!=null&&p.writable)){f===void 0&&(f=Ve(o?Ht(a[l],s):Ue),E.set(l,f));var h=k(f);if(h===Ue)return!1}return o},set(a,l,f,o){var i;var h=E.get(l),p=l in a;if(B&&l==="length")for(var m=f;m<h.v;m+=1){var v=E.get(m+"");v!==void 0?X(v,Ue):m in a&&(v=Ve(Ue),E.set(m+"",v))}h===void 0?(!p||(i=fi(a,l))!=null&&i.writable)&&(h=Ve(void 0),X(h,Ht(f,s)),E.set(l,h)):(p=h.v!==Ue,X(h,Ht(f,s)));var e=Reflect.getOwnPropertyDescriptor(a,l);if(e!=null&&e.set&&e.set.call(o,f),!p){if(B&&typeof l=="string"){var r=E.get("length"),t=Number(l);Number.isInteger(t)&&t>=r.v&&X(r,t+1)}dr(D)}return!0},ownKeys(a){k(D);var l=Reflect.ownKeys(a).filter(h=>{var p=E.get(h);return p===void 0||p.v!==Ue});for(var[f,o]of E)o.v!==Ue&&!(f in a)&&l.push(f);return l},setPrototypeOf(){on()}})}function dr(n,u=1){X(n,n.v+u)}function ur(n){return n!==null&&typeof n=="object"&&St in n?n[St]:n}function kn(n,u){return Object.is(ur(n),ur(u))}var os,Ln,Dn;function ar(n=""){return document.createTextNode(n)}function gt(n){return Ln.call(n)}function Mi(n){return Dn.call(n)}function I(n,u){return gt(n)}function ue(n,u){{var g=gt(n);return g instanceof Comment&&g.data===""?Mi(g):g}}function j(n,u=1,g=!1){let x=n;for(;u--;)x=Mi(x);return x}function Rn(n){n.textContent=""}let lr=!1,_r=!1;function An(){_r||(_r=!0,document.addEventListener("reset",n=>{Promise.resolve().then(()=>{var u;if(!n.defaultPrevented)for(const g of n.target.elements)(u=g.__on_r)==null||u.call(g)})},{capture:!0}))}function as(n){var u=ge,g=de;ut(null),Qe(null);try{return n()}finally{ut(u),Qe(g)}}function ls(n,u,g,x=g){n.addEventListener(u,()=>as(g));const E=n.__on_r;E?n.__on_r=()=>{E(),x()}:n.__on_r=x,An()}function Tn(n,u,g,x){function E(B){if(x.capture||Bn.call(u,B),!B.cancelBubble)return as(()=>g.call(this,B))}return n.startsWith("pointer")||n.startsWith("touch")||n==="wheel"?Ri(()=>{u.addEventListener(n,E,x)}):u.addEventListener(n,E,x),E}function _e(n,u,g,x,E){var B={capture:x,passive:E},D=Tn(n,u,g,B);(u===document.body||u===window||u===document)&&un(()=>{u.removeEventListener(n,D,B)})}function Bn(n){var t;var u=this,g=u.ownerDocument,x=n.type,E=((t=n.composedPath)==null?void 0:t.call(n))||[],B=E[0]||n.target,D=0,s=n.__root;if(s){var a=E.indexOf(s);if(a!==-1&&(u===document||u===window)){n.__root=u;return}var l=E.indexOf(u);if(l===-1)return;a<=l&&(D=a)}if(B=E[D]||n.target,B!==u){js(n,"currentTarget",{configurable:!0,get(){return B||g}});var f=ge,o=de;ut(null),Qe(null);try{for(var h,p=[];B!==null;){var m=B.assignedSlot||B.parentNode||B.host||null;try{var v=B["__"+x];if(v!==void 0&&!B.disabled)if(si(v)){var[e,...r]=v;e.apply(B,[n,...r])}else v.call(B,n)}catch(i){h?p.push(i):h=i}if(n.cancelBubble||m===u||m===null)break;B=m}if(h){for(let i of p)queueMicrotask(()=>{throw i});throw h}}finally{n.__root=u,delete n.currentTarget,ut(f),Qe(o)}}}function cs(n){var u=document.createElement("template");return u.innerHTML=n,u.content}function Wt(n,u){var g=de;g.nodes_start===null&&(g.nodes_start=n,g.nodes_end=u)}function V(n,u){var g=(u&Rr)!==0,x=(u&Us)!==0,E,B=!n.startsWith("<!>");return()=>{E===void 0&&(E=cs(B?n:"<!>"+n),g||(E=gt(E)));var D=x?document.importNode(E,!0):E.cloneNode(!0);if(g){var s=gt(D),a=D.lastChild;Wt(s,a)}else Wt(D,D);return D}}function Oi(n,u,g="svg"){var x=!n.startsWith("<!>"),E=(u&Rr)!==0,B=`<${g}>${x?n:"<!>"+n}</${g}>`,D;return()=>{if(!D){var s=cs(B),a=gt(s);if(E)for(D=document.createDocumentFragment();gt(a);)D.appendChild(gt(a));else D=gt(a)}var l=D.cloneNode(!0);if(E){var f=gt(l),o=l.lastChild;Wt(f,o)}else Wt(l,l);return l}}function Xe(n=""){{var u=ar(n+"");return Wt(u,u),u}}function Be(){var n=document.createDocumentFragment(),u=document.createComment(""),g=ar();return n.append(u,g),Wt(u,g),n}function N(n,u){n!==null&&n.before(u)}let Mn=!0;function te(n,u){var g=u==null?"":typeof u=="object"?u+"":u;g!==(n.__t??(n.__t=n.nodeValue))&&(n.__t=g,n.nodeValue=g==null?"":g+"")}function J(n,u,g,x=null,E=!1){var B=n,D=null,s=null,a=null,l=E?Di:0;rr(()=>{a!==(a=!!u())&&(a?(D?Ci(D):D=bi(()=>g(B)),s&&Ki(s,()=>{s=null})):(s?Ci(s):x&&(s=bi(()=>x(B))),D&&Ki(D,()=>{D=null})))},l)}function Ze(n,u){return u}function On(n,u,g,x){for(var E=[],B=u.length,D=0;D<B;D++)sr(u[D].e,E,!0);var s=B>0&&E.length===0&&g!==null;if(s){var a=g.parentNode;Rn(a),a.append(g),x.clear(),yt(n,u[0].prev,u[B-1].next)}Gr(E,()=>{for(var l=0;l<B;l++){var f=u[l];s||(x.delete(f.k),yt(n,f.prev,f.next)),Vt(f.e,!s)}})}function Ye(n,u,g,x,E,B=null){var D=n,s={flags:u,items:new Map,first:null},a=(u&Dr)!==0;if(a){var l=n;D=l.appendChild(ar())}var f=null,o=!1;rr(()=>{var h=g(),p=si(h)?h:h==null?[]:Tr(h),m=p.length;if(!(o&&m===0)){o=m===0;{var v=ge;Pn(p,s,D,E,u,(v.f&ht)!==0,x)}B!==null&&(m===0?f?Ci(f):f=bi(()=>B(D)):f!==null&&Ki(f,()=>{f=null})),g()}})}function Pn(n,u,g,x,E,B,D){var z,W,q,F;var s=(E&Ms)!==0,a=(E&(Ji|Qi))!==0,l=n.length,f=u.items,o=u.first,h=o,p,m=null,v,e=[],r=[],t,i,c,_;if(s)for(_=0;_<l;_+=1)t=n[_],i=D(t,_),c=f.get(i),c!==void 0&&((z=c.a)==null||z.measure(),(v??(v=new Set)).add(c));for(_=0;_<l;_+=1){if(t=n[_],i=D(t,_),c=f.get(i),c===void 0){var S=h?h.e.nodes_start:g;m=Hn(S,u,m,m===null?u.first:m.next,t,i,_,x,E),f.set(i,m),e=[],r=[],h=m.next;continue}if(a&&In(c,t,_,E),c.e.f&ht&&(Ci(c.e),s&&((W=c.a)==null||W.unfix(),(v??(v=new Set)).delete(c))),c!==h){if(p!==void 0&&p.has(c)){if(e.length<r.length){var y=r[0],d;m=y.prev;var b=e[0],R=e[e.length-1];for(d=0;d<e.length;d+=1)fr(e[d],y,g);for(d=0;d<r.length;d+=1)p.delete(r[d]);yt(u,b.prev,R.next),yt(u,m,b),yt(u,R,y),h=y,m=R,_-=1,e=[],r=[]}else p.delete(c),fr(c,h,g),yt(u,c.prev,c.next),yt(u,c,m===null?u.first:m.next),yt(u,m,c),m=c;continue}for(e=[],r=[];h!==null&&h.k!==i;)(B||!(h.e.f&ht))&&(p??(p=new Set)).add(h),r.push(h),h=h.next;if(h===null)continue;c=h}e.push(c),m=c,h=c.next}if(h!==null||p!==void 0){for(var O=p===void 0?[]:Tr(p);h!==null;)(B||!(h.e.f&ht))&&O.push(h),h=h.next;var A=O.length;if(A>0){var M=E&Dr&&l===0?g:null;if(s){for(_=0;_<A;_+=1)(q=O[_].a)==null||q.measure();for(_=0;_<A;_+=1)(F=O[_].a)==null||F.fix()}On(u,O,M,f)}}s&&Ri(()=>{var C;if(v!==void 0)for(c of v)(C=c.a)==null||C.apply()}),de.first=u.first&&u.first.e,de.last=m&&m.e}function In(n,u,g,x){x&Ji&&ji(n.v,u),x&Qi?ji(n.i,g):n.i=g}function Hn(n,u,g,x,E,B,D,s,a){var l=(a&Ji)!==0,f=(a&Os)===0,o=l?f?tr(E):Ve(E):E,h=a&Qi?Ve(D):D,p={i:h,v:o,k:B,a:null,e:null,prev:g,next:x};try{return p.e=bi(()=>s(n,o,h),lr),p.e.prev=g&&g.e,p.e.next=x&&x.e,g===null?u.first=p:(g.next=p,g.e.next=p.e),x!==null&&(x.prev=p,x.e.prev=p.e),p}finally{}}function fr(n,u,g){for(var x=n.next?n.next.e.nodes_start:g,E=u?u.e.nodes_start:g,B=n.e.nodes_start;B!==x;){var D=Mi(B);E.before(B),B=D}}function yt(n,u,g){u===null?n.first=g:(u.next=g,u.e.next=g&&g.e),g!==null&&(g.prev=u,g.e.prev=u&&u.e)}function wi(n,u,g,x,E){var s;var B=(s=u.$$slots)==null?void 0:s[g],D=!1;B===!0&&(B=u[g==="default"?"children":g],D=!0),B===void 0?E!==null&&E(n):B(n,D?()=>x:x)}function Fn(n,u){var g=n.__attributes??(n.__attributes={});g.value===(g.value=u)||n.value===u&&(u!==0||n.nodeName!=="PROGRESS")||(n.value=u)}function xe(n,u,g,x){var E=n.__attributes??(n.__attributes={});E[u]!==(E[u]=g)&&(u==="style"&&"__styles"in n&&(n.__styles={}),u==="loading"&&(n[Ys]=g),g==null?n.removeAttribute(u):typeof g!="string"&&zn(n).includes(u)?n[u]=g:n.setAttribute(u,g))}var vr=new Map;function zn(n){var u=vr.get(n.nodeName);if(u)return u;vr.set(n.nodeName,u=[]);for(var g,x=gi(n),E=Element.prototype;E!==x;){g=Br(x);for(var B in g)g[B].set&&u.push(B);x=gi(x)}return u}function $n(n,u){var g=n.__className,x=hs(u);(g!==x||lr)&&(x===""?n.removeAttribute("class"):n.setAttribute("class",x),n.__className=x)}function Nn(n,u){var g=n.__className,x=hs(u);(g!==x||lr)&&(u==null?n.removeAttribute("class"):n.className=x,n.__className=x)}function hs(n){return n??""}function fe(n,u,g){if(g){if(n.classList.contains(u))return;n.classList.add(u)}else{if(!n.classList.contains(u))return;n.classList.remove(u)}}const Wn=()=>performance.now(),Et={tick:n=>requestAnimationFrame(n),now:()=>Wn(),tasks:new Set};function ds(n){Et.tasks.forEach(u=>{u.c(n)||(Et.tasks.delete(u),u.f())}),Et.tasks.size!==0&&Et.tick(ds)}function Un(n){let u;return Et.tasks.size===0&&Et.tick(ds),{promise:new Promise(g=>{Et.tasks.add(u={c:n,f:g})}),abort(){Et.tasks.delete(u)}}}function di(n,u){n.dispatchEvent(new CustomEvent(u))}function jn(n){if(n==="float")return"cssFloat";if(n==="offset")return"cssOffset";if(n.startsWith("--"))return n;const u=n.split("-");return u.length===1?u[0]:u[0]+u.slice(1).map(g=>g[0].toUpperCase()+g.slice(1)).join("")}function pr(n){const u={},g=n.split(";");for(const x of g){const[E,B]=x.split(":");if(!E||B===void 0)break;const D=jn(E.trim());u[D]=B.trim()}return u}const qn=n=>n;function Ge(n,u,g,x){var E=(n&$s)!==0,B=(n&Ns)!==0,D=E&&B,s=(n&Ws)!==0,a=D?"both":E?"in":"out",l,f=u.inert,o,h;function p(){var t=ge,i=de;ut(null),Qe(null);try{return l??(l=g()(u,(x==null?void 0:x())??{},{direction:a}))}finally{ut(t),Qe(i)}}var m={is_global:s,in(){var t;if(u.inert=f,!E){h==null||h.abort(),(t=h==null?void 0:h.reset)==null||t.call(h);return}B||o==null||o.abort(),di(u,"introstart"),o=Xi(u,p(),h,1,()=>{di(u,"introend"),o==null||o.abort(),o=l=void 0})},out(t){if(!B){t==null||t(),l=void 0;return}u.inert=!0,di(u,"outrostart"),h=Xi(u,p(),o,0,()=>{di(u,"outroend"),t==null||t()})},stop:()=>{o==null||o.abort(),h==null||h.abort()}},v=de;if((v.transitions??(v.transitions=[])).push(m),E&&Mn){var e=s;if(!e){for(var r=v.parent;r&&r.f&Di;)for(;(r=r.parent)&&!(r.f&ki););e=!r||(r.f&Or)!==0}e&&Kt(()=>{tt(()=>m.in())})}}function Xi(n,u,g,x,E){var B=x===1;if(Vs(u)){var D,s=!1;return Ri(()=>{if(!s){var e=u({direction:B?"in":"out"});D=Xi(n,e,g,x,E)}}),{abort:()=>{s=!0,D==null||D.abort()},deactivate:()=>D.deactivate(),reset:()=>D.reset(),t:()=>D.t()}}if(g==null||g.deactivate(),!(u!=null&&u.duration))return E(),{abort:pt,deactivate:pt,reset:pt,t:()=>x};const{delay:a=0,css:l,tick:f,easing:o=qn}=u;var h=[];if(B&&g===void 0&&(f&&f(0,1),l)){var p=pr(l(0,1));h.push(p,p)}var m=()=>1-x,v=n.animate(h,{duration:a});return v.onfinish=()=>{var e=(g==null?void 0:g.t())??1-x;g==null||g.abort();var r=x-e,t=u.duration*Math.abs(r),i=[];if(t>0){if(l)for(var c=Math.ceil(t/16.666666666666668),_=0;_<=c;_+=1){var S=e+r*o(_/c),y=l(S,1-S);i.push(pr(y))}m=()=>{var d=v.currentTime;return e+r*o(d/t)},f&&Un(()=>{if(v.playState!=="running")return!1;var d=m();return f(d,1-d),!0})}v=n.animate(i,{duration:t,fill:"forwards"}),v.onfinish=()=>{m=()=>x,f==null||f(x,1-x),E()}},{abort:()=>{v&&(v.cancel(),v.effect=null,v.onfinish=pt)},deactivate:()=>{E=pt},reset:()=>{x===0&&(f==null||f(1,0))},t:()=>m()}}function Ei(n,u,g=u){var x=Ti();ls(n,"input",()=>{var E=gr(n)?mr(n.value):n.value;g(E),x&&E!==(E=u())&&(n.value=E??"")}),li(()=>{var E=u();gr(n)&&E===mr(n.value)||n.type==="date"&&!E&&!n.value||E!==n.value&&(n.value=E??"")})}function gr(n){var u=n.type;return u==="number"||u==="range"}function mr(n){return n===""?null:+n}function us(n,u,g){if(n.multiple)return Gn(n,u);for(var x of n.options){var E=Qt(x);if(kn(E,u)){x.selected=!0;return}}(!g||u!==void 0)&&(n.selectedIndex=-1)}function Kn(n,u){Kt(()=>{var g=new MutationObserver(()=>{var x=n.__value;us(n,x)});return g.observe(n,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{g.disconnect()}})}function Vn(n,u,g=u){var x=!0;ls(n,"change",()=>{var E;if(n.multiple)E=[].map.call(n.querySelectorAll(":checked"),Qt);else{var B=n.querySelector(":checked");E=B&&Qt(B)}g(E)}),Kt(()=>{var E=u();if(us(n,E,x),x&&E===void 0){var B=n.querySelector(":checked");B!==null&&(E=Qt(B),g(E))}n.__value=E,x=!1}),Kn(n)}function Gn(n,u){for(var g of n.options)g.selected=~u.indexOf(Qt(g))}function Qt(n){return"__value"in n?n.__value:n.value}function Sr(n,u){return n===u||(n==null?void 0:n[St])===u}function Pi(n={},u,g,x){return Kt(()=>{var E,B;return li(()=>{E=B,B=[],tt(()=>{n!==g(...B)&&(u(n,...B),E&&Sr(g(...E),n)&&u(null,...E))})}),()=>{Ri(()=>{B&&Sr(g(...B),n)&&u(null,...B)})}}),n}function xi(n){return function(...u){var g=u[0];return g.preventDefault(),n==null?void 0:n.apply(this,u)}}function $e(n=!1){const u=pe,g=u.l.u;if(!g)return;let x=()=>vt(u.s);if(n){let E=0,B={};const D=Si(()=>{let s=!1;const a=u.s;for(const l in a)a[l]!==B[l]&&(B[l]=a[l],s=!0);return s&&E++,E});x=()=>k(D)}g.b.length&&_n(()=>{br(u,x),Wi(g.b)}),qi(()=>{const E=tt(()=>g.m.map(Gs));return()=>{for(const B of E)typeof B=="function"&&B()}}),g.a.length&&qi(()=>{br(u,x),Wi(g.a)})}function br(n,u){if(n.l.s)for(const g of n.l.s)k(g);u()}function Xn(n,u){var B;var g=(B=n.$$events)==null?void 0:B[u.type],x=si(g)?g.slice():g==null?[]:[g];for(var E of x)E.call(this,u)}function qe(n){pe===null&&Ai(),Ut&&pe.l!==null?fs(pe).m.push(n):qi(()=>{const u=tt(n);if(typeof u=="function")return u})}function Lt(n){pe===null&&Ai(),qe(()=>()=>tt(n))}function Zn(n,u,{bubbles:g=!1,cancelable:x=!1}={}){return new CustomEvent(n,{detail:u,bubbles:g,cancelable:x})}function _s(){const n=pe;return n===null&&Ai(),(u,g,x)=>{var B;const E=(B=n.s.$$events)==null?void 0:B[u];if(E){const D=si(E)?E.slice():[E],s=Zn(u,g,x);for(const a of D)a.call(n.x,s);return!s.defaultPrevented}return!0}}function hi(n){pe===null&&Ai(),pe.l===null&&rn(),fs(pe).b.push(n)}function fs(n){var u=n.l;return u.u??(u.u={a:[],b:[],m:[]})}function Yn(n,u,g){if(n==null)return u(void 0),pt;const x=tt(()=>n.subscribe(u,g));return x.unsubscribe?()=>x.unsubscribe():x}let ui=!1;function Jn(n){var u=ui;try{return ui=!1,[n(),ui]}finally{ui=u}}function Cr(n){for(var u=de,g=de;u!==null&&!(u.f&(it|Li));)u=u.parent;try{return Qe(u),n()}finally{Qe(g)}}function ce(n,u,g,x){var y;var E=(g&Ps)!==0,B=!Ut||(g&Is)!==0,D=(g&Fs)!==0,s=(g&zs)!==0,a=!1,l;D?[l,a]=Jn(()=>n[u]):l=n[u];var f=St in n||Zs in n,o=((y=fi(n,u))==null?void 0:y.set)??(f&&D&&u in n?d=>n[u]=d:void 0),h=x,p=!0,m=!1,v=()=>(m=!0,p&&(p=!1,s?h=tt(x):h=x),h);l===void 0&&x!==void 0&&(o&&B&&sn(),l=v(),o&&o(l));var e;if(B)e=()=>{var d=n[u];return d===void 0?v():(p=!0,m=!1,d)};else{var r=Cr(()=>(E?Si:et)(()=>n[u]));r.f|=Pr,e=()=>{var d=k(r);return d!==void 0&&(h=void 0),d===void 0?h:d}}if(!(g&Hs))return e;if(o){var t=n.$$legacy;return function(d,b){return arguments.length>0?((!B||!b||t||a)&&o(b?e():d),d):e()}}var i=!1,c=!1,_=tr(l),S=Cr(()=>Si(()=>{var d=e(),b=k(_);return i?(i=!1,c=!0,b):(c=!1,_.v=d)}));return E||(S.equals=er),function(d,b){if(wt!==null&&(i=c,e(),k(_)),arguments.length>0){const R=b?k(S):B&&D?Ht(d):d;return S.equals(R)||(i=!0,X(_,R),m&&h!==void 0&&(h=R),tt(()=>k(S))),d}return k(S)}}const It=[];function Qn(n,u=pt){let g=null;const x=new Set;function E(s){if(Fr(n,s)&&(n=s,g)){const a=!It.length;for(const l of x)l[1](),It.push(l,n);if(a){for(let l=0;l<It.length;l+=2)It[l][0](It[l+1]);It.length=0}}}function B(s){E(s(n))}function D(s,a=pt){const l=[s,a];return x.add(l),x.size===1&&(g=u(E,B)||pt),s(n),()=>{x.delete(l),x.size===0&&g&&(g(),g=null)}}return{set:E,update:B,subscribe:D}}function $i(n){let u;return Yn(n,g=>u=g)(),u}const eo=10,to=function(){let n=Qn([]);return setInterval(()=>{let u=$i(n);const g=Math.floor(new Date().getTime()/1e3),x=u.filter(E=>E.created_at+eo>g);x.length!==u.length&&n.set(x)},1e3),{add(u){let g=$i(n);g.push({...u,created_at:Math.floor(new Date().getTime()/1e3)}),n.set(g)},remove(u){let g=$i(n);n.set(g.filter(x=>!["created_at","type","text"].every(E=>x[E]===u[E])))},subscribe:n.subscribe}},ye=to();function vs(n){const u=n-1;return u*u*u+1}function io(n){return n<.5?4*n*n*n:.5*Math.pow(2*n-2,3)+1}function Zi(n){const u=typeof n=="string"&&n.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return u?[parseFloat(u[1]),u[2]||"px"]:[n,"px"]}function ro(n,{delay:u=0,duration:g=400,easing:x=io,amount:E=5,opacity:B=0}={}){const D=getComputedStyle(n),s=+D.opacity,a=D.filter==="none"?"":D.filter,l=s*(1-B),[f,o]=Zi(E);return{delay:u,duration:g,easing:x,css:(h,p)=>`opacity: ${s-l*p}; filter: ${a} blur(${p*f}${o});`}}function yr(n,{delay:u=0,duration:g=400,easing:x=vs,x:E=0,y:B=0,opacity:D=0}={}){const s=getComputedStyle(n),a=+s.opacity,l=s.transform==="none"?"":s.transform,f=a*(1-D),[o,h]=Zi(E),[p,m]=Zi(B);return{delay:u,duration:g,easing:x,css:(v,e)=>`
			transform: ${l} translate(${(1-v)*o}${h}, ${(1-v)*p}${m});
			opacity: ${a-f*e}`}}function mt(n,{delay:u=0,duration:g=400,easing:x=vs,axis:E="y"}={}){const B=getComputedStyle(n),D=+B.opacity,s=E==="y"?"height":"width",a=parseFloat(B[s]),l=E==="y"?["top","bottom"]:["left","right"],f=l.map(r=>`${r[0].toUpperCase()}${r.slice(1)}`),o=parseFloat(B[`padding${f[0]}`]),h=parseFloat(B[`padding${f[1]}`]),p=parseFloat(B[`margin${f[0]}`]),m=parseFloat(B[`margin${f[1]}`]),v=parseFloat(B[`border${f[0]}Width`]),e=parseFloat(B[`border${f[1]}Width`]);return{delay:u,duration:g,easing:x,css:r=>`overflow: hidden;opacity: ${Math.min(r*20,1)*D};${s}: ${r*a}px;padding-${l[0]}: ${r*o}px;padding-${l[1]}: ${r*h}px;margin-${l[0]}: ${r*p}px;margin-${l[1]}: ${r*m}px;border-${l[0]}-width: ${r*v}px;border-${l[1]}-width: ${r*e}px;`}}var so=V('<div class="toast show align-items-center text-white border-0 mb-2"><div class="d-flex"><div class="toast-body"> </div> <button type="button" class="btn-close btn-close-white me-2 m-auto"></button></div></div>'),no=V('<div class="position-fixed bottom-0 end-0 p-3" style="z-index: 470"></div>');function oo(n,u){Fe(u,!1);let g=se([]);qe(()=>{ye.subscribe(E=>X(g,E))}),$e();var x=no();Ye(x,5,()=>k(g),Ze,(E,B)=>{var D=so(),s=I(D),a=I(s),l=I(a),f=j(a,2);ee(()=>{fe(D,"bg-danger",k(B).type==="error"),fe(D,"bg-warning",k(B).type==="warning"),fe(D,"bg-success",k(B).type==="success"),fe(D,"bg-primary",k(B).type==="info"),te(l,k(B).text)}),_e("click",f,()=>ye.remove(k(B))),Ge(3,D,()=>mt),N(E,D)}),N(n,x),ze()}function wr(n,u){u&&u!=="lg"&&u!=="sm"&&u!=="xs"?n.style.fontSize=u.replace("x","em"):n.style.fontSize=""}function ao(n,u,g,x,E,B=1,D="",s=""){let a=1,l=1;E&&(E=="horizontal"?a=-1:E=="vertical"?l=-1:a=l=-1),typeof n=="string"&&(n=parseFloat(n)),typeof u=="string"&&(u=parseFloat(u)),typeof g=="string"&&(g=parseFloat(g));const f=`${u*B}${D}`,o=`${g*B}${D}`;let h=`translate(${f},${o}) scale(${a*n},${l*n})`;return x&&(h+=` rotate(${x}${s})`),h}var lo=Oi('<title class="svelte-bvo74f"> </title>'),co=Oi('<path class="svelte-bvo74f"></path>'),ho=Oi('<path class="svelte-bvo74f"></path><path class="svelte-bvo74f"></path>',1),uo=Oi('<svg aria-hidden="true" role="img" xmlns="http://www.w3.org/2000/svg"><!><g class="svelte-bvo74f"><g class="svelte-bvo74f"><!></g></g></svg>');function he(n,u){Fe(u,!1);const g=se(),x=se();let E=ce(u,"class",24,()=>{}),B=ce(u,"id",24,()=>{}),D=ce(u,"style",24,()=>{}),s=ce(u,"icon",8),a=ce(u,"title",24,()=>{}),l=ce(u,"size",24,()=>{}),f=ce(u,"color",24,()=>{}),o=ce(u,"fw",8,!1),h=ce(u,"pull",24,()=>{}),p=ce(u,"scale",8,1),m=ce(u,"translateX",8,0),v=ce(u,"translateY",8,0),e=ce(u,"rotate",24,()=>{}),r=ce(u,"flip",24,()=>{}),t=ce(u,"spin",8,!1),i=ce(u,"pulse",8,!1),c=ce(u,"primaryColor",8,""),_=ce(u,"secondaryColor",8,""),S=ce(u,"primaryOpacity",8,1),y=ce(u,"secondaryOpacity",8,.4),d=ce(u,"swapOpacity",8,!1),b=se();ct(()=>(k(b),vt(l()),wr),()=>{k(b)&&l()&&wr(k(b),l())}),ct(()=>vt(s()),()=>{X(g,s()&&s().icon||[0,0,"",[],""])}),ct(()=>(vt(p()),vt(m()),vt(v()),vt(e()),vt(r())),()=>{X(x,ao(p(),m(),v(),e(),r(),512))}),ai(),$e();var R=Be(),O=ue(R);J(O,()=>k(g)[4],A=>{var M=uo(),z=I(M);J(z,a,C=>{var L=lo(),T=I(L);ee(()=>te(T,a())),N(C,L)});var W=j(z),q=I(W),F=I(q);J(F,()=>typeof k(g)[4]=="string",C=>{var L=co();ee(()=>{xe(L,"d",k(g)[4]),xe(L,"fill",f()||c()||"currentColor"),xe(L,"transform",`translate(${k(g)[0]/-2} ${k(g)[1]/-2})`)}),N(C,L)},C=>{var L=ho(),T=ue(L),P=j(T);ee(()=>{xe(T,"d",k(g)[4][0]),xe(T,"fill",_()||f()||"currentColor"),xe(T,"fill-opacity",d()!=!1?S():y()),xe(T,"transform",`translate(${k(g)[0]/-2} ${k(g)[1]/-2})`),xe(P,"d",k(g)[4][1]),xe(P,"fill",c()||f()||"currentColor"),xe(P,"fill-opacity",d()!=!1?y():S()),xe(P,"transform",`translate(${k(g)[0]/-2} ${k(g)[1]/-2})`)}),N(C,L)}),Pi(M,C=>X(b,C),()=>k(b)),ee(()=>{xe(M,"id",B()),$n(M,`svelte-fa svelte-fa-base ${E()??""} svelte-bvo74f`),xe(M,"style",D()),xe(M,"viewBox",`0 0 ${k(g)[0]??""} ${k(g)[1]??""}`),fe(M,"pulse",i()),fe(M,"svelte-fa-size-lg",l()==="lg"),fe(M,"svelte-fa-size-sm",l()==="sm"),fe(M,"svelte-fa-size-xs",l()==="xs"),fe(M,"svelte-fa-fw",o()),fe(M,"svelte-fa-pull-left",h()==="left"),fe(M,"svelte-fa-pull-right",h()==="right"),fe(M,"spin",t()),xe(W,"transform",`translate(${k(g)[0]/2} ${k(g)[1]/2})`),xe(W,"transform-origin",`${k(g)[0]/4} 0`),xe(q,"transform",k(x))}),N(A,M)}),N(n,R),ze()}/*!
 * Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2024 Fonticons, Inc.
 */const _o={prefix:"fas",iconName:"right-from-bracket",icon:[512,512,["sign-out-alt"],"f2f5","M377.9 105.9L500.7 228.7c7.2 7.2 11.3 17.1 11.3 27.3s-4.1 20.1-11.3 27.3L377.9 406.1c-6.4 6.4-15 9.9-24 9.9c-18.7 0-33.9-15.2-33.9-33.9l0-62.1-128 0c-17.7 0-32-14.3-32-32l0-64c0-17.7 14.3-32 32-32l128 0 0-62.1c0-18.7 15.2-33.9 33.9-33.9c9 0 17.6 3.6 24 9.9zM160 96L96 96c-17.7 0-32 14.3-32 32l0 256c0 17.7 14.3 32 32 32l64 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-64 0c-53 0-96-43-96-96L0 128C0 75 43 32 96 32l64 0c17.7 0 32 14.3 32 32s-14.3 32-32 32z"]},fo=_o,vo={prefix:"fas",iconName:"laptop-code",icon:[640,512,[],"f5fc","M64 96c0-35.3 28.7-64 64-64l384 0c35.3 0 64 28.7 64 64l0 256-64 0 0-256L128 96l0 256-64 0L64 96zM0 403.2C0 392.6 8.6 384 19.2 384l601.6 0c10.6 0 19.2 8.6 19.2 19.2c0 42.4-34.4 76.8-76.8 76.8L76.8 480C34.4 480 0 445.6 0 403.2zM281 209l-31 31 31 31c9.4 9.4 9.4 24.6 0 33.9s-24.6 9.4-33.9 0l-48-48c-9.4-9.4-9.4-24.6 0-33.9l48-48c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9zM393 175l48 48c9.4 9.4 9.4 24.6 0 33.9l-48 48c-9.4 9.4-24.6 9.4-33.9 0s-9.4-24.6 0-33.9l31-31-31-31c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0z"]},po={prefix:"fas",iconName:"bars",icon:[448,512,["navicon"],"f0c9","M0 96C0 78.3 14.3 64 32 64l384 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L32 128C14.3 128 0 113.7 0 96zM0 256c0-17.7 14.3-32 32-32l384 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L32 288c-17.7 0-32-14.3-32-32zM448 416c0 17.7-14.3 32-32 32L32 448c-17.7 0-32-14.3-32-32s14.3-32 32-32l384 0c17.7 0 32 14.3 32 32z"]},go={prefix:"fas",iconName:"square-up-right",icon:[448,512,[8599,"external-link-square-alt"],"f360","M384 32c35.3 0 64 28.7 64 64l0 320c0 35.3-28.7 64-64 64L64 480c-35.3 0-64-28.7-64-64L0 96C0 60.7 28.7 32 64 32l320 0zM160 160c-6.5 0-12.3 3.9-14.8 9.9s-1.1 12.9 3.5 17.4l40 40-71 71C114 302 112 306.9 112 312s2 10 5.7 13.7l36.7 36.7c3.6 3.6 8.5 5.7 13.7 5.7s10-2 13.7-5.7l71-71 40 40c4.6 4.6 11.5 5.9 17.4 3.5s9.9-8.3 9.9-14.8l0-144c0-8.8-7.2-16-16-16l-144 0z"]},mo=go,So={prefix:"fas",iconName:"circle-chevron-down",icon:[512,512,["chevron-circle-down"],"f13a","M256 0a256 256 0 1 0 0 512A256 256 0 1 0 256 0zM135 241c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0l87 87 87-87c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9L273 345c-9.4 9.4-24.6 9.4-33.9 0L135 241z"]},bo=So,ps={prefix:"fas",iconName:"memory",icon:[576,512,[],"f538","M64 64C28.7 64 0 92.7 0 128l0 7.4c0 6.8 4.4 12.6 10.1 16.3C23.3 160.3 32 175.1 32 192s-8.7 31.7-21.9 40.3C4.4 236 0 241.8 0 248.6L0 320l576 0 0-71.4c0-6.8-4.4-12.6-10.1-16.3C552.7 223.7 544 208.9 544 192s8.7-31.7 21.9-40.3c5.7-3.7 10.1-9.5 10.1-16.3l0-7.4c0-35.3-28.7-64-64-64L64 64zM576 352L0 352l0 64c0 17.7 14.3 32 32 32l48 0 0-32c0-8.8 7.2-16 16-16s16 7.2 16 16l0 32 96 0 0-32c0-8.8 7.2-16 16-16s16 7.2 16 16l0 32 96 0 0-32c0-8.8 7.2-16 16-16s16 7.2 16 16l0 32 96 0 0-32c0-8.8 7.2-16 16-16s16 7.2 16 16l0 32 48 0c17.7 0 32-14.3 32-32l0-64zM192 160l0 64c0 17.7-14.3 32-32 32s-32-14.3-32-32l0-64c0-17.7 14.3-32 32-32s32 14.3 32 32zm128 0l0 64c0 17.7-14.3 32-32 32s-32-14.3-32-32l0-64c0-17.7 14.3-32 32-32s32 14.3 32 32zm128 0l0 64c0 17.7-14.3 32-32 32s-32-14.3-32-32l0-64c0-17.7 14.3-32 32-32s32 14.3 32 32z"]},Co={prefix:"fas",iconName:"folder",icon:[512,512,[128193,128447,61716,"folder-blank"],"f07b","M64 480H448c35.3 0 64-28.7 64-64V160c0-35.3-28.7-64-64-64H288c-10.1 0-19.6-4.7-25.6-12.8L243.2 57.6C231.1 41.5 212.1 32 192 32H64C28.7 32 0 60.7 0 96V416c0 35.3 28.7 64 64 64z"]},yo={prefix:"fas",iconName:"box",icon:[448,512,[128230],"f466","M50.7 58.5L0 160l208 0 0-128L93.7 32C75.5 32 58.9 42.3 50.7 58.5zM240 160l208 0L397.3 58.5C389.1 42.3 372.5 32 354.3 32L240 32l0 128zm208 32L0 192 0 416c0 35.3 28.7 64 64 64l320 0c35.3 0 64-28.7 64-64l0-224z"]},wo={prefix:"fas",iconName:"maximize",icon:[512,512,["expand-arrows-alt"],"f31e","M200 32L56 32C42.7 32 32 42.7 32 56l0 144c0 9.7 5.8 18.5 14.8 22.2s19.3 1.7 26.2-5.2l40-40 79 79-79 79L73 295c-6.9-6.9-17.2-8.9-26.2-5.2S32 302.3 32 312l0 144c0 13.3 10.7 24 24 24l144 0c9.7 0 18.5-5.8 22.2-14.8s1.7-19.3-5.2-26.2l-40-40 79-79 79 79-40 40c-6.9 6.9-8.9 17.2-5.2 26.2s12.5 14.8 22.2 14.8l144 0c13.3 0 24-10.7 24-24l0-144c0-9.7-5.8-18.5-14.8-22.2s-19.3-1.7-26.2 5.2l-40 40-79-79 79-79 40 40c6.9 6.9 17.2 8.9 26.2 5.2s14.8-12.5 14.8-22.2l0-144c0-13.3-10.7-24-24-24L312 32c-9.7 0-18.5 5.8-22.2 14.8s-1.7 19.3 5.2 26.2l40 40-79 79-79-79 40-40c6.9-6.9 8.9-17.2 5.2-26.2S209.7 32 200 32z"]},gs=wo,Eo={prefix:"fas",iconName:"server",icon:[512,512,[],"f233","M64 32C28.7 32 0 60.7 0 96l0 64c0 35.3 28.7 64 64 64l384 0c35.3 0 64-28.7 64-64l0-64c0-35.3-28.7-64-64-64L64 32zm280 72a24 24 0 1 1 0 48 24 24 0 1 1 0-48zm48 24a24 24 0 1 1 48 0 24 24 0 1 1 -48 0zM64 288c-35.3 0-64 28.7-64 64l0 64c0 35.3 28.7 64 64 64l384 0c35.3 0 64-28.7 64-64l0-64c0-35.3-28.7-64-64-64L64 288zm280 72a24 24 0 1 1 0 48 24 24 0 1 1 0-48zm56 24a24 24 0 1 1 48 0 24 24 0 1 1 -48 0z"]},ms={prefix:"fas",iconName:"microchip",icon:[512,512,[],"f2db","M176 24c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 40c-35.3 0-64 28.7-64 64l-40 0c-13.3 0-24 10.7-24 24s10.7 24 24 24l40 0 0 56-40 0c-13.3 0-24 10.7-24 24s10.7 24 24 24l40 0 0 56-40 0c-13.3 0-24 10.7-24 24s10.7 24 24 24l40 0c0 35.3 28.7 64 64 64l0 40c0 13.3 10.7 24 24 24s24-10.7 24-24l0-40 56 0 0 40c0 13.3 10.7 24 24 24s24-10.7 24-24l0-40 56 0 0 40c0 13.3 10.7 24 24 24s24-10.7 24-24l0-40c35.3 0 64-28.7 64-64l40 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-40 0 0-56 40 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-40 0 0-56 40 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-40 0c0-35.3-28.7-64-64-64l0-40c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 40-56 0 0-40c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 40-56 0 0-40zM160 128l192 0c17.7 0 32 14.3 32 32l0 192c0 17.7-14.3 32-32 32l-192 0c-17.7 0-32-14.3-32-32l0-192c0-17.7 14.3-32 32-32zm192 32l-192 0 0 192 192 0 0-192z"]},xo={prefix:"fas",iconName:"circle-chevron-up",icon:[512,512,["chevron-circle-up"],"f139","M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM377 271c9.4 9.4 9.4 24.6 0 33.9s-24.6 9.4-33.9 0l-87-87-87 87c-9.4 9.4-24.6 9.4-33.9 0s-9.4-24.6 0-33.9L239 167c9.4-9.4 24.6-9.4 33.9 0L377 271z"]},ko=xo,Ss={prefix:"fas",iconName:"box-open",icon:[640,512,[],"f49e","M58.9 42.1c3-6.1 9.6-9.6 16.3-8.7L320 64 564.8 33.4c6.7-.8 13.3 2.7 16.3 8.7l41.7 83.4c9 17.9-.6 39.6-19.8 45.1L439.6 217.3c-13.9 4-28.8-1.9-36.2-14.3L320 64 236.6 203c-7.4 12.4-22.3 18.3-36.2 14.3L37.1 170.6c-19.3-5.5-28.8-27.2-19.8-45.1L58.9 42.1zM321.1 128l54.9 91.4c14.9 24.8 44.6 36.6 72.5 28.6L576 211.6l0 167c0 22-15 41.2-36.4 46.6l-204.1 51c-10.2 2.6-20.9 2.6-31 0l-204.1-51C79 419.7 64 400.5 64 378.5l0-167L191.6 248c27.8 8 57.6-3.8 72.5-28.6L318.9 128l2.2 0z"]},Lo={prefix:"fas",iconName:"arrows-rotate",icon:[512,512,[128472,"refresh","sync"],"f021","M105.1 202.6c7.7-21.8 20.2-42.3 37.8-59.8c62.5-62.5 163.8-62.5 226.3 0L386.3 160 352 160c-17.7 0-32 14.3-32 32s14.3 32 32 32l111.5 0c0 0 0 0 0 0l.4 0c17.7 0 32-14.3 32-32l0-112c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 35.2L414.4 97.6c-87.5-87.5-229.3-87.5-316.8 0C73.2 122 55.6 150.7 44.8 181.4c-5.9 16.7 2.9 34.9 19.5 40.8s34.9-2.9 40.8-19.5zM39 289.3c-5 1.5-9.8 4.2-13.7 8.2c-4 4-6.7 8.8-8.1 14c-.3 1.2-.6 2.5-.8 3.8c-.3 1.7-.4 3.4-.4 5.1L16 432c0 17.7 14.3 32 32 32s32-14.3 32-32l0-35.1 17.6 17.5c0 0 0 0 0 0c87.5 87.4 229.3 87.4 316.7 0c24.4-24.4 42.1-53.1 52.9-83.8c5.9-16.7-2.9-34.9-19.5-40.8s-34.9 2.9-40.8 19.5c-7.7 21.8-20.2 42.3-37.8 59.8c-62.5 62.5-163.8 62.5-226.3 0l-.1-.1L125.6 352l34.4 0c17.7 0 32-14.3 32-32s-14.3-32-32-32L48.4 288c-1.6 0-3.2 .1-4.8 .3s-3.1 .5-4.6 1z"]},bs=Lo,Do={prefix:"fas",iconName:"house-user",icon:[576,512,["home-user"],"e1b0","M575.8 255.5c0 18-15 32.1-32 32.1l-32 0 .7 160.2c.2 35.5-28.5 64.3-64 64.3l-320.4 0c-35.3 0-64-28.7-64-64l0-160.4-32 0c-18 0-32-14-32-32.1c0-9 3-17 10-24L266.4 8c7-7 15-8 22-8s15 2 21 7L564.8 231.5c8 7 12 15 11 24zM352 224a64 64 0 1 0 -128 0 64 64 0 1 0 128 0zm-96 96c-44.2 0-80 35.8-80 80c0 8.8 7.2 16 16 16l192 0c8.8 0 16-7.2 16-16c0-44.2-35.8-80-80-80l-64 0z"]},Ro={prefix:"fas",iconName:"tags",icon:[512,512,[],"f02c","M345 39.1L472.8 168.4c52.4 53 52.4 138.2 0 191.2L360.8 472.9c-9.3 9.4-24.5 9.5-33.9 .2s-9.5-24.5-.2-33.9L438.6 325.9c33.9-34.3 33.9-89.4 0-123.7L310.9 72.9c-9.3-9.4-9.2-24.6 .2-33.9s24.6-9.2 33.9 .2zM0 229.5L0 80C0 53.5 21.5 32 48 32l149.5 0c17 0 33.3 6.7 45.3 18.7l168 168c25 25 25 65.5 0 90.5L277.3 442.7c-25 25-65.5 25-90.5 0l-168-168C6.7 262.7 0 246.5 0 229.5zM144 144a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z"]},Ao={prefix:"fas",iconName:"terminal",icon:[576,512,[],"f120","M9.4 86.6C-3.1 74.1-3.1 53.9 9.4 41.4s32.8-12.5 45.3 0l192 192c12.5 12.5 12.5 32.8 0 45.3l-192 192c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L178.7 256 9.4 86.6zM256 416l288 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-288 0c-17.7 0-32-14.3-32-32s14.3-32 32-32z"]},To={prefix:"fas",iconName:"tag",icon:[448,512,[127991],"f02b","M0 80L0 229.5c0 17 6.7 33.3 18.7 45.3l176 176c25 25 65.5 25 90.5 0L418.7 317.3c25-25 25-65.5 0-90.5l-176-176c-12-12-28.3-18.7-45.3-18.7L48 32C21.5 32 0 53.5 0 80zm112 32a32 32 0 1 1 0 64 32 32 0 1 1 0-64z"]},Bo={prefix:"fas",iconName:"hard-drive",icon:[512,512,[128436,"hdd"],"f0a0","M0 96C0 60.7 28.7 32 64 32l384 0c35.3 0 64 28.7 64 64l0 184.4c-17-15.2-39.4-24.4-64-24.4L64 256c-24.6 0-47 9.2-64 24.4L0 96zM64 288l384 0c35.3 0 64 28.7 64 64l0 64c0 35.3-28.7 64-64 64L64 480c-35.3 0-64-28.7-64-64l0-64c0-35.3 28.7-64 64-64zM320 416a32 32 0 1 0 0-64 32 32 0 1 0 0 64zm128-32a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z"]},Mo=Bo,Oo={prefix:"fas",iconName:"gear",icon:[512,512,[9881,"cog"],"f013","M495.9 166.6c3.2 8.7 .5 18.4-6.4 24.6l-43.3 39.4c1.1 8.3 1.7 16.8 1.7 25.4s-.6 17.1-1.7 25.4l43.3 39.4c6.9 6.2 9.6 15.9 6.4 24.6c-4.4 11.9-9.7 23.3-15.8 34.3l-4.7 8.1c-6.6 11-14 21.4-22.1 31.2c-5.9 7.2-15.7 9.6-24.5 6.8l-55.7-17.7c-13.4 10.3-28.2 18.9-44 25.4l-12.5 57.1c-2 9.1-9 16.3-18.2 17.8c-13.8 2.3-28 3.5-42.5 3.5s-28.7-1.2-42.5-3.5c-9.2-1.5-16.2-8.7-18.2-17.8l-12.5-57.1c-15.8-6.5-30.6-15.1-44-25.4L83.1 425.9c-8.8 2.8-18.6 .3-24.5-6.8c-8.1-9.8-15.5-20.2-22.1-31.2l-4.7-8.1c-6.1-11-11.4-22.4-15.8-34.3c-3.2-8.7-.5-18.4 6.4-24.6l43.3-39.4C64.6 273.1 64 264.6 64 256s.6-17.1 1.7-25.4L22.4 191.2c-6.9-6.2-9.6-15.9-6.4-24.6c4.4-11.9 9.7-23.3 15.8-34.3l4.7-8.1c6.6-11 14-21.4 22.1-31.2c5.9-7.2 15.7-9.6 24.5-6.8l55.7 17.7c13.4-10.3 28.2-18.9 44-25.4l12.5-57.1c2-9.1 9-16.3 18.2-17.8C227.3 1.2 241.5 0 256 0s28.7 1.2 42.5 3.5c9.2 1.5 16.2 8.7 18.2 17.8l12.5 57.1c15.8 6.5 30.6 15.1 44 25.4l55.7-17.7c8.8-2.8 18.6-.3 24.5 6.8c8.1 9.8 15.5 20.2 22.1 31.2l4.7 8.1c6.1 11 11.4 22.4 15.8 34.3zM256 336a80 80 0 1 0 0-160 80 80 0 1 0 0 160z"]},Po=Oo,Io={prefix:"fas",iconName:"clock",icon:[512,512,[128339,"clock-four"],"f017","M256 0a256 256 0 1 1 0 512A256 256 0 1 1 256 0zM232 120l0 136c0 8 4 15.5 10.7 20l96 64c11 7.4 25.9 4.4 33.3-6.7s4.4-25.9-6.7-33.3L280 243.2 280 120c0-13.3-10.7-24-24-24s-24 10.7-24 24z"]},Ho={prefix:"fas",iconName:"network-wired",icon:[640,512,[],"f6ff","M256 64l128 0 0 64-128 0 0-64zM240 0c-26.5 0-48 21.5-48 48l0 96c0 26.5 21.5 48 48 48l48 0 0 32L32 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l96 0 0 32-48 0c-26.5 0-48 21.5-48 48l0 96c0 26.5 21.5 48 48 48l160 0c26.5 0 48-21.5 48-48l0-96c0-26.5-21.5-48-48-48l-48 0 0-32 256 0 0 32-48 0c-26.5 0-48 21.5-48 48l0 96c0 26.5 21.5 48 48 48l160 0c26.5 0 48-21.5 48-48l0-96c0-26.5-21.5-48-48-48l-48 0 0-32 96 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-256 0 0-32 48 0c26.5 0 48-21.5 48-48l0-96c0-26.5-21.5-48-48-48L240 0zM96 448l0-64 128 0 0 64L96 448zm320-64l128 0 0 64-128 0 0-64z"]},Fo={prefix:"fas",iconName:"download",icon:[512,512,[],"f019","M288 32c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 242.7-73.4-73.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l128 128c12.5 12.5 32.8 12.5 45.3 0l128-128c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L288 274.7 288 32zM64 352c-35.3 0-64 28.7-64 64l0 32c0 35.3 28.7 64 64 64l384 0c35.3 0 64-28.7 64-64l0-32c0-35.3-28.7-64-64-64l-101.5 0-45.3 45.3c-25 25-65.5 25-90.5 0L165.5 352 64 352zm368 56a24 24 0 1 1 0 48 24 24 0 1 1 0-48z"]},zo={prefix:"fas",iconName:"house",icon:[576,512,[127968,63498,63500,"home","home-alt","home-lg-alt"],"f015","M575.8 255.5c0 18-15 32.1-32 32.1l-32 0 .7 160.2c0 2.7-.2 5.4-.5 8.1l0 16.2c0 22.1-17.9 40-40 40l-16 0c-1.1 0-2.2 0-3.3-.1c-1.4 .1-2.8 .1-4.2 .1L416 512l-24 0c-22.1 0-40-17.9-40-40l0-24 0-64c0-17.7-14.3-32-32-32l-64 0c-17.7 0-32 14.3-32 32l0 64 0 24c0 22.1-17.9 40-40 40l-24 0-31.9 0c-1.5 0-3-.1-4.5-.2c-1.2 .1-2.4 .2-3.6 .2l-16 0c-22.1 0-40-17.9-40-40l0-112c0-.9 0-1.9 .1-2.8l0-69.7-32 0c-18 0-32-14-32-32.1c0-9 3-17 10-24L266.4 8c7-7 15-8 22-8s15 2 21 7L564.8 231.5c8 7 12 15 11 24z"]},$o=zo,No={prefix:"fas",iconName:"stop",icon:[384,512,[9209],"f04d","M0 128C0 92.7 28.7 64 64 64H320c35.3 0 64 28.7 64 64V384c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V128z"]},Wo={prefix:"fas",iconName:"sun",icon:[512,512,[9728],"f185","M361.5 1.2c5 2.1 8.6 6.6 9.6 11.9L391 121l107.9 19.8c5.3 1 9.8 4.6 11.9 9.6s1.5 10.7-1.6 15.2L446.9 256l62.3 90.3c3.1 4.5 3.7 10.2 1.6 15.2s-6.6 8.6-11.9 9.6L391 391 371.1 498.9c-1 5.3-4.6 9.8-9.6 11.9s-10.7 1.5-15.2-1.6L256 446.9l-90.3 62.3c-4.5 3.1-10.2 3.7-15.2 1.6s-8.6-6.6-9.6-11.9L121 391 13.1 371.1c-5.3-1-9.8-4.6-11.9-9.6s-1.5-10.7 1.6-15.2L65.1 256 2.8 165.7c-3.1-4.5-3.7-10.2-1.6-15.2s6.6-8.6 11.9-9.6L121 121 140.9 13.1c1-5.3 4.6-9.8 9.6-11.9s10.7-1.5 15.2 1.6L256 65.1 346.3 2.8c4.5-3.1 10.2-3.7 15.2-1.6zM160 256a96 96 0 1 1 192 0 96 96 0 1 1 -192 0zm224 0a128 128 0 1 0 -256 0 128 128 0 1 0 256 0z"]},Uo={prefix:"fas",iconName:"file",icon:[384,512,[128196,128459,61462],"f15b","M0 64C0 28.7 28.7 0 64 0L224 0l0 128c0 17.7 14.3 32 32 32l128 0 0 288c0 35.3-28.7 64-64 64L64 512c-35.3 0-64-28.7-64-64L0 64zm384 64l-128 0L256 0 384 128z"]},jo={prefix:"fas",iconName:"play",icon:[384,512,[9654],"f04b","M73 39c-14.8-9.1-33.4-9.4-48.5-.9S0 62.6 0 80L0 432c0 17.4 9.4 33.4 24.5 41.9s33.7 8.1 48.5-.9L361 297c14.3-8.7 23-24.2 23-41s-8.7-32.2-23-41L73 39z"]},qo={prefix:"fas",iconName:"plus",icon:[448,512,[10133,61543,"add"],"2b","M256 80c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 144L48 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l144 0 0 144c0 17.7 14.3 32 32 32s32-14.3 32-32l0-144 144 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-144 0 0-144z"]},Ko={prefix:"fas",iconName:"moon",icon:[384,512,[127769,9214],"f186","M223.5 32C100 32 0 132.3 0 256S100 480 223.5 480c60.6 0 115.5-24.2 155.8-63.4c5-4.9 6.3-12.5 3.1-18.7s-10.1-9.7-17-8.5c-9.8 1.7-19.8 2.6-30.1 2.6c-96.9 0-175.5-78.8-175.5-176c0-65.8 36-123.1 89.3-153.3c6.1-3.5 9.2-10.5 7.7-17.3s-7.3-11.9-14.3-12.5c-6.3-.5-12.6-.8-19-.8z"]},Vo={prefix:"fas",iconName:"rectangle-xmark",icon:[512,512,[62164,"rectangle-times","times-rectangle","window-close"],"f410","M64 32C28.7 32 0 60.7 0 96L0 416c0 35.3 28.7 64 64 64l384 0c35.3 0 64-28.7 64-64l0-320c0-35.3-28.7-64-64-64L64 32zM175 175c9.4-9.4 24.6-9.4 33.9 0l47 47 47-47c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9l-47 47 47 47c9.4 9.4 9.4 24.6 0 33.9s-24.6 9.4-33.9 0l-47-47-47 47c-9.4 9.4-24.6 9.4-33.9 0s-9.4-24.6 0-33.9l47-47-47-47c-9.4-9.4-9.4-24.6 0-33.9z"]},Go=Vo,Xo={prefix:"fas",iconName:"turn-up",icon:[384,512,[10548,"level-up-alt"],"f3bf","M350 177.5c3.8-8.8 2-19-4.6-26l-136-144C204.9 2.7 198.6 0 192 0s-12.9 2.7-17.4 7.5l-136 144c-6.6 7-8.4 17.2-4.6 26s12.5 14.5 22 14.5l88 0 0 192c0 17.7-14.3 32-32 32l-80 0c-17.7 0-32 14.3-32 32l0 32c0 17.7 14.3 32 32 32l80 0c70.7 0 128-57.3 128-128l0-192 88 0c9.6 0 18.2-5.7 22-14.5z"]},Zo=Xo;var Yo=V('<button type="button" class="btn mx-2" title="Switch Theme"><!></button>');function Jo(n,u){Fe(u,!1);let g=se();function x(){k(g)==="light"?(X(g,"dark"),document.querySelector("html").classList.add("dark")):(X(g,"light"),document.querySelector("html").classList.remove("dark"))}qe(()=>{X(g,"dark"),k(g)==="dark"&&document.querySelector("html").classList.add("dark")}),$e();var E=Yo(),B=I(E);J(B,()=>k(g)==="dark",D=>{he(D,{icon:Ko,color:"#333",size:"2x"})},D=>{he(D,{icon:Wo,color:"#333",size:"2x"})}),_e("click",E,x),N(n,E),ze()}var Qo=V('<svg class="bi flex-shrink-0 me-2" width="24" height="24" role="img" aria-label="Danger:"><use xlink:href="#exclamation-triangle-fill"></use></svg>'),ea=V('<svg class="bi flex-shrink-0 me-2" width="24" height="24" role="img" aria-label="Success:"><use xlink:href="#check-circle-fill"></use></svg>'),ta=V('<svg class="bi flex-shrink-0 me-2" width="24" height="24" role="img" aria-label="Info:"><use xlink:href="#info-fill"></use></svg>'),ia=V("<strong>Error:</strong>"),ra=V('<button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>'),sa=V('<div class="alert d-flex align-items-center" role="alert"><!> <div><!> <!> <!></div></div>'),na=V('<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><symbol id="check-circle-fill" fill="currentColor" viewBox="0 0 16 16"><path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"></path></symbol><symbol id="info-fill" fill="currentColor" viewBox="0 0 16 16"><path d="M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zm.93-9.412-1 4.705c-.07.34.029.533.304.533.194 0 .487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703 0-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381 2.29-.287zM8 5.5a1 1 0 1 1 0-2 1 1 0 0 1 0 2z"></path></symbol><symbol id="exclamation-triangle-fill" fill="currentColor" viewBox="0 0 16 16"><path d="M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5zm.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"></path></symbol></svg> <!>',1);function oa(n,u){let g=ce(u,"type",8),x=ce(u,"dismissible",8,!1),E=se(!1);var B=na(),D=j(ue(B),2);J(D,()=>!k(E),s=>{var a=sa(),l=I(a);J(l,()=>g()==="error"||g()==="warning",m=>{var v=Qo();N(m,v)},m=>{var v=Be(),e=ue(v);J(e,()=>g()==="success",r=>{var t=ea();N(r,t)},r=>{var t=Be(),i=ue(t);J(i,()=>g()==="info",c=>{var _=ta();N(c,_)},null,!0),N(r,t)},!0),N(m,v)});var f=j(l,2),o=I(f);J(o,()=>g()==="error",m=>{var v=ia();N(m,v)});var h=j(o,2);wi(h,u,"default",{},null);var p=j(h,2);J(p,x,m=>{var v=ra();_e("click",v,()=>X(E,!0)),N(m,v)}),ee(()=>{fe(a,"alert-danger",g()==="error"),fe(a,"alert-warning",g()==="warning"),fe(a,"alert-success",g()==="success"),fe(a,"alert-info",g()==="info"),fe(a,"alert-dismissible",x())}),Ge(3,a,()=>mt),N(s,a)}),N(n,B)}function aa(n){switch(n.request){case"login":return`{"response": "login", "payload": {"username": "${n.payload.username}"}}`;case"get_system_info":return'{"response": "get_system_info", "payload": {"engine_version": "Docker 20.10.7", "containers": {"total": 178, "running": 170, "stopped": 0}, "os": "Ubuntu 20.04.3 LTS", "cpus": 24, "mem": 31277850624}}';case"get_container_list":return`{"response": "get_container_list", "payload": [
                {"id": "2b7eb6b9d2f7fd2dd26738500a81a16310f78e46eea2f9c2a27ed876d85d8586", "name": "CaaSa Demo", "namespace": null, "status": "running", "permissions": ["info", "info-annotations", "procs", "files-read", "files-write", "files", "logs", "state", "term"]},
                {"id": "2b7eb6b9d2f7fd2dd26738500a81a16310f78e46eea2f9c2a27ed876d85d8587", "name": "Backend", "namespace": "Cool Web App", "status": "running", "permissions": ["info", "info-annotations", "procs", "files-read", "files-write", "files", "logs", "state", "term"]},
                {"id": "2b7eb6b9d2f7fd2dd26738500a81a16310f78e46eea2f9c2a27ed876d85d8588", "name": "Gateway", "namespace": "Cool Web App", "status": "running", "permissions": ["info", "info-annotations", "procs", "files-read", "files-write", "files", "logs", "state", "term"]}
               ]}`;case"get_processes":return'{"response": "get_processes", "payload": [{"pid": "45756", "ppid": "45733", "%cpu": "0.0", "%mem": "0.0", "user": "root", "stime": "16:24", "command": "nginx: master process nginx -g daemon off;", "level": 0}, {"pid": "45822", "ppid": "45756", "%cpu": "0.0", "%mem": "0.0", "user": "systemd+", "stime": "16:24", "command": "nginx: worker process", "level": 1}, {"pid": "45823", "ppid": "45756", "%cpu": "0.0", "%mem": "0.0", "user": "systemd+", "stime": "16:24", "command": "nginx: worker process", "level": 1}, {"pid": "45824", "ppid": "45756", "%cpu": "0.0", "%mem": "0.0", "user": "systemd+", "stime": "16:24", "command": "nginx: worker process", "level": 1}, {"pid": "45825", "ppid": "45756", "%cpu": "0.0", "%mem": "0.0", "user": "systemd+", "stime": "16:24", "command": "nginx: worker process", "level": 1}, {"pid": "45826", "ppid": "45756", "%cpu": "0.0", "%mem": "0.0", "user": "systemd+", "stime": "16:24", "command": "nginx: worker process", "level": 1}, {"pid": "45827", "ppid": "45756", "%cpu": "0.0", "%mem": "0.0", "user": "systemd+", "stime": "16:24", "command": "nginx: worker process", "level": 1}, {"pid": "45828", "ppid": "45756", "%cpu": "0.0", "%mem": "0.0", "user": "systemd+", "stime": "16:24", "command": "nginx: worker process", "level": 1}, {"pid": "45829", "ppid": "45756", "%cpu": "0.0", "%mem": "0.0", "user": "systemd+", "stime": "16:24", "command": "nginx: worker process", "level": 1}, {"pid": "45830", "ppid": "45756", "%cpu": "0.0", "%mem": "0.0", "user": "systemd+", "stime": "16:24", "command": "nginx: worker process", "level": 1}, {"pid": "45831", "ppid": "45756", "%cpu": "0.0", "%mem": "0.0", "user": "systemd+", "stime": "16:24", "command": "nginx: worker process", "level": 1}, {"pid": "45832", "ppid": "45756", "%cpu": "0.0", "%mem": "0.0", "user": "systemd+", "stime": "16:24", "command": "nginx: worker process", "level": 1}, {"pid": "45833", "ppid": "45756", "%cpu": "0.0", "%mem": "0.0", "user": "systemd+", "stime": "16:24", "command": "nginx: worker process", "level": 1}, {"pid": "46825", "ppid": "45733", "%cpu": "0.0", "%mem": "0.0", "user": "root", "stime": "16:34", "command": "sh", "level": 0}]}';case"get_container_info":const u={"2b7eb6b9d2f7fd2dd26738500a81a16310f78e46eea2f9c2a27ed876d85d8586":"/caasa_demo","2b7eb6b9d2f7fd2dd26738500a81a16310f78e46eea2f9c2a27ed876d85d8587":"/cool_web_app_backend_1","2b7eb6b9d2f7fd2dd26738500a81a16310f78e46eea2f9c2a27ed876d85d8588":"/cool_web_app_gateway_1"};return`{"response": "get_container_info", "payload": {"id": "${n.payload.container_id}", "name": "${u[n.payload.container_id]}", "status": "running", "command": "/docker-entrypoint.sh nginx -g daemon off;", "created_at": "2021-12-02T10:33:16.628618832Z", "started_at": "2021-12-02T10:33:17.015866729Z", "finished_at": "0001-01-01T00:00:00Z", "crashes": 0, "env": {"PATH": "/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin", "NGINX_VERSION": "1.21.1", "NJS_VERSION": "0.6.1", "PKG_RELEASE": "1"}, "labels": {"caasa.admin.full": "user1,user2", "maintainer": "NGINX Docker Maintainers <docker-maint@nginx.com>"}, "image": {"name": "nginx:alpine", "hash": "sha256:b9e2356ea1be9452f3777a587b0b6a30bc16c295fe6190eda6a0776522f27439"}, "mem": {"used": 10452992, "max_used": 19345408, "total": 52428800}, "cpu": {"perc": ${Math.random()*10}}, "net": {"rx_bytes": 18201, "tx_bytes": 0}, "ports": ["80/tcp"]}}`;case"get_container_logs":return n.payload.onlynew?'{"response": "get_container_logs", "payload":[]}':'{"response": "get_container_logs", "payload": ["2021-12-02T10:33:17.021946340Z /docker-entrypoint.sh: /docker-entrypoint.d/ is not empty, will attempt to perform configuration","2021-12-02T10:33:17.021988550Z /docker-entrypoint.sh: Looking for shell scripts in /docker-entrypoint.d/","2021-12-02T10:33:17.023417432Z /docker-entrypoint.sh: Launching /docker-entrypoint.d/10-listen-on-ipv6-by-default.sh","2021-12-02T10:33:17.031231257Z 10-listen-on-ipv6-by-default.sh: info: Getting the checksum of /etc/nginx/conf.d/default.conf","2021-12-02T10:33:17.055742664Z 10-listen-on-ipv6-by-default.sh: info: Enabled listen on IPv6 in /etc/nginx/conf.d/default.conf","2021-12-02T10:33:17.056041305Z /docker-entrypoint.sh: Launching /docker-entrypoint.d/20-envsubst-on-templates.sh","2021-12-02T10:33:17.059979717Z /docker-entrypoint.sh: Launching /docker-entrypoint.d/30-tune-worker-processes.sh","2021-12-02T10:33:17.062059371Z /docker-entrypoint.sh: Configuration complete; ready for start up","2021-12-02T10:33:17.074027144Z 2021/12/02 10:33:17 [notice] 1#1: using the \\"epoll\\" event method","2021-12-02T10:33:17.074056600Z 2021/12/02 10:33:17 [notice] 1#1: nginx/1.21.1","2021-12-02T10:33:17.074063653Z 2021/12/02 10:33:17 [notice] 1#1: built by gcc 10.3.1 20210424 (Alpine 10.3.1_git20210424) ","2021-12-02T10:33:17.074069845Z 2021/12/02 10:33:17 [notice] 1#1: OS: Linux 5.11.0-40-generic","2021-12-02T10:33:17.074075475Z 2021/12/02 10:33:17 [notice] 1#1: getrlimit(RLIMIT_NOFILE): 1048576:1048576","2021-12-02T10:33:17.074245905Z 2021/12/02 10:33:17 [notice] 1#1: start worker processes","2021-12-02T10:33:17.074276953Z 2021/12/02 10:33:17 [notice] 1#1: start worker process 32","2021-12-02T10:33:17.074379486Z 2021/12/02 10:33:17 [notice] 1#1: start worker process 33","2021-12-02T10:33:17.074401427Z 2021/12/02 10:33:17 [notice] 1#1: start worker process 34","2021-12-02T10:33:17.074513127Z 2021/12/02 10:33:17 [notice] 1#1: start worker process 35","2021-12-02T10:33:17.074601242Z 2021/12/02 10:33:17 [notice] 1#1: start worker process 36","2021-12-02T10:33:17.074666745Z 2021/12/02 10:33:17 [notice] 1#1: start worker process 37","2021-12-02T10:33:17.074817979Z 2021/12/02 10:33:17 [notice] 1#1: start worker process 38","2021-12-02T10:33:17.074873423Z 2021/12/02 10:33:17 [notice] 1#1: start worker process 39","2021-12-02T10:33:17.075007344Z 2021/12/02 10:33:17 [notice] 1#1: start worker process 40","2021-12-02T10:33:17.075141746Z 2021/12/02 10:33:17 [notice] 1#1: start worker process 41","2021-12-02T10:33:17.075279715Z 2021/12/02 10:33:17 [notice] 1#1: start worker process 42","2021-12-02T10:33:17.075393118Z 2021/12/02 10:33:17 [notice] 1#1: start worker process 43"]}';case"get_filesystem_info":return'{"response": "get_filesystem_info", "payload": {"workdir": "", "mounts": [{"type": "bind", "destination": "/etc/ssl/certs", "readonly": true, "source": "/etc/ssl/certs"}]}}';case"get_directory_list":return n.payload.path===""||n.payload.path==="/"?'{"response": "get_directory_list", "payload": {"entries": [{"type": "f", "permissions": "rwxr-xr-x", "owner": "root", "group": "root", "filesize": "0B", "modtime": "2021-12-02 16:19:13", "name": ".dockerenv"}, {"type": "d", "permissions": "rwxr-xr-x", "owner": "root", "group": "root", "filesize": "4.0KB", "modtime": "2021-06-15 14:34:40", "name": "bin"}, {"type": "d", "permissions": "rwxr-xr-x", "owner": "root", "group": "root", "filesize": "360B", "modtime": "2021-12-02 16:19:13", "name": "dev"}, {"type": "d", "permissions": "rwxr-xr-x", "owner": "root", "group": "root", "filesize": "4.0KB", "modtime": "2021-07-06 19:40:27", "name": "docker-entrypoint.d"}, {"type": "f", "permissions": "rwxrwxr-x", "owner": "root", "group": "root", "filesize": "1.2KB", "modtime": "2021-07-06 19:40:16", "name": "docker-entrypoint.sh"}, {"type": "d", "permissions": "rwxr-xr-x", "owner": "root", "group": "root", "filesize": "4.0KB", "modtime": "2021-12-02 16:19:13", "name": "etc"}, {"type": "d", "permissions": "rwxr-xr-x", "owner": "root", "group": "root", "filesize": "4.0KB", "modtime": "2021-06-15 14:34:40", "name": "home"}, {"type": "d", "permissions": "rwxr-xr-x", "owner": "root", "group": "root", "filesize": "4.0KB", "modtime": "2021-06-15 14:34:40", "name": "lib"}, {"type": "d", "permissions": "rwxr-xr-x", "owner": "root", "group": "root", "filesize": "4.0KB", "modtime": "2021-06-15 14:34:40", "name": "media"}, {"type": "d", "permissions": "rwxr-xr-x", "owner": "root", "group": "root", "filesize": "4.0KB", "modtime": "2021-06-15 14:34:40", "name": "mnt"}, {"type": "d", "permissions": "rwxr-xr-x", "owner": "root", "group": "root", "filesize": "4.0KB", "modtime": "2021-06-15 14:34:40", "name": "opt"}, {"type": "d", "permissions": "r-xr-xr-x", "owner": "root", "group": "root", "filesize": "0B", "modtime": "2021-12-02 16:19:13", "name": "proc"}, {"type": "d", "permissions": "rwx------", "owner": "root", "group": "root", "filesize": "4.0KB", "modtime": "2021-06-15 14:34:40", "name": "root"}, {"type": "d", "permissions": "rwxr-xr-x", "owner": "root", "group": "root", "filesize": "4.0KB", "modtime": "2021-12-02 16:19:13", "name": "run"}, {"type": "d", "permissions": "rwxr-xr-x", "owner": "root", "group": "root", "filesize": "4.0KB", "modtime": "2021-06-15 14:34:40", "name": "sbin"}, {"type": "d", "permissions": "rwxr-xr-x", "owner": "root", "group": "root", "filesize": "4.0KB", "modtime": "2021-06-15 14:34:40", "name": "srv"}, {"type": "d", "permissions": "r-xr-xr-x", "owner": "root", "group": "root", "filesize": "0B", "modtime": "2021-12-02 16:19:13", "name": "sys"}, {"type": "d", "permissions": "rwxr-xr-x", "owner": "root", "group": "root", "filesize": "4.0KB", "modtime": "2021-06-15 14:34:40", "name": "usr"}, {"type": "d", "permissions": "rwxr-xr-x", "owner": "root", "group": "root", "filesize": "4.0KB", "modtime": "2021-06-15 14:34:40", "name": "var"}], "path": "/"}}':!1;case"spawn_terminal":return'{"response": "spawn_terminal", "payload": {"execId": "2680be7b4aa3c0b6599edf3521f5813a770ccec7966a59c57cfdac5b4e3b7e9a"}}';case"resize_terminal":return!0;case"transmit_terminal_input":return n.payload.data==="\r"?`56!{"response": "receive_terminal_output", "payload": null}\r
This is just a demo`:'56!{"response": "receive_terminal_output", "payload": null}'+n.payload.data;default:return!1}}class la{constructor(u){Oe(this,"binaryType");Oe(this,"bufferedAmount");Oe(this,"extensions");Oe(this,"onclose");Oe(this,"onerror");Oe(this,"onmessage");Oe(this,"onopen");Oe(this,"protocol");Oe(this,"readyState");Oe(this,"url");Oe(this,"CLOSED");Oe(this,"CLOSING");Oe(this,"CONNECTING");Oe(this,"OPEN")}close(u,g){}addEventListener(u,g,x){throw new Error("Method not implemented.")}removeEventListener(u,g,x){throw new Error("Method not implemented.")}dispatchEvent(u){throw new Error("Method not implemented.")}send(u){const g=JSON.parse(u),x=aa(g),E={data:void 0,...new Event("api-mock")};if(x===!1?E.data=`{"response": "${g.request}", "error": "Sorry, command not mocked in demo"}`:x===!0||(x[0]!=="{"?E.data=new Blob([x]):E.data=x),E.data&&(setTimeout(()=>this.onmessage(E),200),typeof E.data=="string"&&E.data.includes("spawn_terminal"))){console.log("extra response for terminal");const B={data:void 0,...new Event("api-mock")};B.data=new Blob(['56!{"response": "receive_terminal_output", "payload": null}/ # ']),setTimeout(()=>this.onmessage(B),300)}}}let ft,ii={},ri={};function Er(n,u){n in ii?ii[n](u):console.error("WS-API Unknown websocket event:",n)}function _i(n,u){n in ri?ri[n](u):console.error("WS-API Unknown websocket event:",n)}function xr(){ii={},ri={}}const ie={init(){try{ft&&ft.close(1e3),ft=new la(`${window.location.protocol.replace("http","ws")}//${window.location.host}/ws`),ft.binaryType="blob",ft.onclose=n=>{_i("ws-close",n.reason||"Connection closed"),xr()},ft.onmessage=async n=>{if(n.data instanceof Blob){const u=parseInt(await n.data.slice(0,10).text()),g=u.toString().length+1,x=await n.data.slice(g,g+u).text(),E=JSON.parse(x);E.error?_i(E.response,E.error):Er(E.response,{payload:E.payload,blob:n.data.slice(g+u)})}else{const u=JSON.parse(n.data);u.error?_i(u.response,u.error):Er(u.response,u.payload)}},ft.onerror=n=>{_i("ws-error","Connection error")}}catch(n){alert(n)}},register(n,u,g){u&&(ii[n]=u),g&&(ri[n]=g)},unregister(...n){n.forEach(u=>{delete ri[u],delete ii[u]})},send(n,u){ft.send(JSON.stringify({request:n,payload:u}))},close(){xr(),ft.close()}};var ca=V('<div class="spinner-grow mx-2 text-light" role="status"><span class="visually-hidden">Loading...</span></div>'),ha=V('<div class="mt-4 text-light"> </div>'),da=V('<div class="bg-outer position-fixed d-flex justify-content-center align-items-center top-0 start-0 end-0 bottom-0 svelte-1l5azpb"><div class="bg-inner d-flex flex-column rounded p-3 svelte-1l5azpb"><div class="d-flex justify-content-center align-items-center"></div> <!></div></div>');function Cs(n,u){Fe(u,!1);let g=ce(u,"text",8,""),x=se(!1);qe(()=>{setTimeout(()=>X(x,!0),250)}),$e();var E=Be(),B=ue(E);J(B,()=>k(x),D=>{var s=da(),a=I(s),l=I(a);Ye(l,4,()=>[1,2,3],Ze,(o,h)=>{var p=ca();N(o,p)});var f=j(l,2);J(f,g,o=>{var h=ha(),p=I(h);ee(()=>te(p,g())),N(o,h)}),Ge(1,s,()=>ro),N(D,s)}),N(n,E),ze()}var ua=V('<!> <div class="container pt-5"><!> <form class="container login-form svelte-ur79cd"><div class="form-floating mb-2"><input type="text" class="form-control" id="loginName" placeholder=" " required autocomplete="username"> <label for="loginName">Username</label></div> <div class="form-floating mb-2"><input type="password" class="form-control" id="loginPw" placeholder=" " required autocomplete="current-password"> <label for="loginPw">Password</label></div> <div class="col-12"><button type="submit" class="btn btn-primary w-100">Login</button></div></form></div>',1);function _a(n,u){Fe(u,!1);let g=ce(u,"username",12,"admin"),x=se("123456"),E=se(!1),B=se("");const D=_s();qe(()=>{ie.register("login",({username:r})=>{D("login",{username:r})},r=>{X(E,!1),ye.add({text:r,type:"error"})})}),Lt(()=>{ie.unregister("login")});async function s(){X(E,!0),ie.send("login",{username:g(),password:k(x)}),X(B,""),X(x,"")}$e();var a=ua(),l=ue(a);J(l,()=>k(E),r=>{Cs(r,{})});var f=j(l,2),o=I(f);J(o,()=>k(B),r=>{oa(r,{type:"error",dismissible:!0,children:(t,i)=>{var c=Xe();ee(()=>te(c,k(B))),N(t,c)},$$slots:{default:!0}})});var h=j(o,2),p=I(h),m=I(p),v=j(p,2),e=I(v);Ei(m,g),_e("input",m,()=>{g(g().toLowerCase().trim())}),Ei(e,()=>k(x),r=>X(x,r)),_e("submit",h,xi(()=>s())),Ge(3,h,()=>mt),N(n,a),ze()}function Yi(n,u=0){return Math.round(n*10**u)/10**u}function Ft(n){const u=["","Ki","Mi","Gi","Ti"];let g=0;for(;n>=1024;)n/=1024,g++;const x=Math.max(Math.floor(Math.log10(Math.floor(n))),0);return Yi(n,2-x)+" "+u[g]+"B"}function Yt(n){return new Date(n).toLocaleString(void 0,{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})}function ys(n,u){var g;if((g=window==null?void 0:window.navigator)!=null&&g.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(n,u);else{const x=document.createElement("a");document.body.appendChild(x);const E=window.URL.createObjectURL(n);x.href=E,x.download=u,x.click(),setTimeout(()=>{window.URL.revokeObjectURL(E),document.body.removeChild(x)},0)}}var fa=V('<div class="d-flex align-items-center"><strong>Loading...</strong> <div class="spinner-border ms-auto" role="status" aria-hidden="true"></div></div>'),va=V('<span class="spinner-grow spinner-grow-sm" role="status" aria-hidden="true"></span>'),pa=V('<button type="button" class="btn btn-outline-warning"><!> Restart</button>'),ga=V('<span class="spinner-grow spinner-grow-sm" role="status" aria-hidden="true"></span>'),ma=V('<button type="button" class="btn btn-outline-danger"><!> Stop</button>'),Sa=V("<!> <!>",1),ba=V('<span class="spinner-grow spinner-grow-sm" role="status" aria-hidden="true"></span>'),Ca=V('<button type="button" class="btn btn-outline-success"><!> Start</button>'),ya=V('<div class="ms-4"><!></div>'),wa=V('<span class="text-muted font-monospace"> </span>'),Ea=V('<a target="_blank" rel="noopener noreferrer" class="text-decoration-none"> </a>'),xa=V('<a target="_blank" rel="noopener noreferrer" class="text-decoration-none"> </a>'),ka=V('<div class="d-flex mb-3"><div class="icon-left ms-1 me-3 svelte-n9m8lc"><!></div> <div class="flex-grow-1"><div class="mb-1">Processor</div> <div class="progress"><div class="progress-bar text-white overflow-visible ps-1"> </div></div></div></div>'),La=V('<span class="badge rounded-pill bg-primary ms-2"> </span>'),Da=V('<span class="badge rounded-pill bg-warning ms-2"> </span>'),Ra=V('<span class="badge rounded-pill bg-info ms-2"> </span>'),Aa=V('<div class="progress-bar progress-bar-striped bg-warning"></div>'),Ta=V('<div class="progress"><div class="progress-bar text-white overflow-visible ps-1"> </div> <!></div>'),Ba=V('<div class="d-flex mb-3"><div class="icon-left ms-1 me-3 svelte-n9m8lc"><!></div> <div class="flex-grow-1"><div class="mb-1"><span class="me-2">Memory</span> <!> <!> <!></div> <!></div></div>'),Ma=V('<span class="badge bg-dark me-2"> </span>'),Oa=V('<div class="flex-grow-1"><div class="mb-1">Ports</div> <!></div>'),Pa=V('<div class="d-flex mb-3"><div class="icon-left ms-1 me-3 svelte-n9m8lc"><!></div> <div class="me-5"><div class="mb-1">Network</div> <span title="Received Traffic" class="me-3"> </span> <span title="Sent Traffic"> </span></div> <!></div>'),Ia=V('<div class="fw-bold">Stopped</div> <!>',1),Ha=V('<div class="fw-bold">Started</div> ',1),Fa=V('<div class="fw-bold">Stopped</div> ',1),za=V('<div class="fw-bold">Started</div> ',1),$a=V('<tr><td class="text-end border-end text-break"> </td><td class="text-break"> </td></tr>'),Na=V('<tr><td class="text-end border-end text-break"> </td><td class="text-break"> </td></tr>'),Wa=V('<div class="d-flex mb-3"><div class="icon-left ms-1 me-3 svelte-n9m8lc"><!></div> <div class="flex-grow-1 d-lg-flex" style="font-size: small"><div><table class="table table-striped border"><thead><tr><th scope="col" colspan="2" style="font-weight: normal">Environment Variables</th></tr></thead><tbody></tbody></table></div> <div><table class="table table-striped border"><thead><tr><th scope="col" colspan="2" style="font-weight: normal">Labels</th></tr></thead><tbody></tbody></table></div></div></div>'),Ua=V('<div class="d-flex mb-3"><div class="icon-left ms-1 me-3 svelte-n9m8lc"><!></div> <div class="d-flex flex-column flex-grow-1"><div class="flex-grow-1 d-flex align-items-center justify-content-between"><div class="flex-grow-1"><div class="mb-1"><span class="me-2">Container</span> <span class="text-muted font-monospace"> </span></div> <div><h6> </h6></div></div> <!></div> <div><!> <code> </code></div></div></div> <div class="d-flex mb-3"><div class="icon-left ms-1 me-3 svelte-n9m8lc"><!></div> <div class="flex-grow-1"><div class="mb-1"><span class="me-2">Image</span> <!></div> <div><h6><!> <span class="ms-1"><!> </span></h6></div></div></div> <!> <!> <!> <div class="d-flex mb-3"><div class="icon-left ms-1 me-3 svelte-n9m8lc"><!></div> <div class="flex-grow-1 pb-5 mb-5"><div class="mb-1">Timeline</div> <div class="timeline mt-2 svelte-n9m8lc"><div class="tl-container svelte-n9m8lc" style="margin-left: 5%"><div class="popup svelte-n9m8lc"><div class="fw-bold">Created</div> </div></div> <div class="tl-container svelte-n9m8lc" style="margin-left: 27%"><div class="popup svelte-n9m8lc"><div class="fw-bold"> </div> Crashes</div></div> <div class="tl-container svelte-n9m8lc" style="margin-left: 49%"><div class="popup svelte-n9m8lc"><!></div></div> <div class="tl-container svelte-n9m8lc" style="margin-left: 71%"><div class="popup svelte-n9m8lc"><!></div></div> <div class="tl-container svelte-n9m8lc" style="margin-left: 93%"><div class="popup svelte-n9m8lc">Currently <div class="fw-bold"> </div></div></div></div></div></div> <!>',1),ja=V("<div><!></div>");function qa(n,u){Fe(u,!1);const g=se(),x=se(),E=se(),B=se();let D=ce(u,"enable_actions",8),s=ce(u,"container_id",8),a,l,f=se(!0),o=se(null),h=se();hi(()=>{s()!==a&&(a=s(),X(f,!0),X(o,null),s()&&ie.send("get_container_info",{container_id:s()}))}),qe(()=>{window.scrollTo({top:0,behavior:"smooth"}),ie.register("get_container_info",e=>{e.id===s()&&(X(h,e),X(f,!1))},e=>ye.add({text:e,type:"error"})),ie.register("set_container_state",()=>{X(o,null)},e=>ye.add({text:e,type:"error"})),l=setInterval(()=>{ie.send("get_container_info",{container_id:s()})},3e3)}),Lt(()=>{clearInterval(l),ie.unregister("get_container_info"),ie.unregister("set_container_state")});function p(e){switch(ie.send("set_container_state",{container_id:s(),action:e}),X(o,e),e){case"start":ye.add({text:"Starting container ...",type:"success"});break;case"restart":ye.add({text:"Restarting container ...",type:"info"});break;case"stop":ye.add({text:"Stopping container ...",type:"info"});break}}ct(()=>k(h),()=>{var e,r,t,i;X(g,((r=(e=k(h))==null?void 0:e.mem)==null?void 0:r.used)*100/((i=(t=k(h))==null?void 0:t.mem)==null?void 0:i.total))}),ct(()=>k(h),()=>{var e,r,t,i;X(x,((r=(e=k(h))==null?void 0:e.mem)==null?void 0:r.max_used)*100/((i=(t=k(h))==null?void 0:t.mem)==null?void 0:i.total))}),ct(()=>k(h),()=>{var e,r,t,i;X(E,(e=k(h))!=null&&e.image.name.includes(":")?(t=k(h))==null?void 0:t.image.name.slice(0,(r=k(h))==null?void 0:r.image.name.lastIndexOf(":")):(i=k(h))==null?void 0:i.image.name)}),ct(()=>k(h),()=>{var e,r;X(B,(e=k(h))!=null&&e.image.name.includes(":")?(r=k(h))==null?void 0:r.image.name.split(":").pop():"latest")}),ai(),$e();var m=ja(),v=I(m);J(v,()=>k(f),e=>{var r=fa();N(e,r)},e=>{var r=Ua(),t=ue(r),i=I(t),c=I(i);he(c,{icon:Ss,size:"2x"});var _=j(i,2),S=I(_),y=I(S),d=I(y),b=j(I(d),2),R=I(b);ee(()=>te(R,`#${k(h).id.substring(0,12)??""}`));var O=j(d,2),A=I(O),M=I(A);ee(()=>te(M,k(h).name.replace(/^\//,"")));var z=j(y,2);J(z,D,Se=>{var le=ya(),ve=I(le);J(ve,()=>k(h).status==="running",De=>{var be=Sa(),Re=ue(be);J(Re,()=>!k(o)||k(o)==="restart",Ae=>{var Te=pa(),We=I(Te);J(We,()=>!k(o),Ee=>{he(Ee,{icon:bs})},Ee=>{var Ce=va();N(Ee,Ce)}),ee(()=>Te.disabled=!!k(o)),_e("click",Te,()=>p("restart")),N(Ae,Te)});var Ne=j(Re,2);J(Ne,()=>!k(o)||k(o)==="stop",Ae=>{var Te=ma(),We=I(Te);J(We,()=>!k(o),Ee=>{he(Ee,{icon:No})},Ee=>{var Ce=ga();N(Ee,Ce)}),ee(()=>Te.disabled=!!k(o)),_e("click",Te,()=>p("stop")),N(Ae,Te)}),N(De,be)},De=>{var be=Be(),Re=ue(be);J(Re,()=>!k(o)||k(o)==="start",Ne=>{var Ae=Ca(),Te=I(Ae);J(Te,()=>!k(o),We=>{he(We,{icon:jo})},We=>{var Ee=ba();N(We,Ee)}),ee(()=>Ae.disabled=!!k(o)),_e("click",Ae,()=>p("start")),N(Ne,Ae)},null,!0),N(De,be)}),N(Se,le)});var W=j(S,2),q=I(W);he(q,{icon:Ao});var F=j(q,2),C=I(F),L=j(t,2),T=I(L),P=I(T);he(P,{icon:yo,size:"2x"});var K=j(T,2),G=I(K),Z=j(I(G),2);J(Z,()=>{var Se,le,ve;return((Se=k(h).image)==null?void 0:Se.hash)!==((ve=(le=k(h))==null?void 0:le.image)==null?void 0:ve.name)},Se=>{var le=wa(),ve=I(le);ee(()=>te(ve,k(h).image.hash.substring(0,19))),N(Se,le)});var Q=j(G,2),ae=I(Q),w=I(ae);J(w,()=>!k(E).includes("/"),Se=>{var le=Ea(),ve=I(le);ee(()=>{xe(le,"href",`https://hub.docker.com/_/${k(E)??""}`),te(ve,k(E))}),N(Se,le)},Se=>{var le=Be(),ve=ue(le);J(ve,()=>k(E).match(/^\w+\/\w+$/),De=>{var be=xa(),Re=I(be);ee(()=>{xe(be,"href",`https://hub.docker.com/r/${k(E)??""}`),te(Re,k(E))}),N(De,be)},De=>{var be=Xe();ee(()=>te(be,k(E))),N(De,be)},!0),N(Se,le)});var H=j(w,2),U=I(H);he(U,{icon:To});var $=j(U),re=j(L,2);J(re,()=>k(h).cpu,Se=>{var le=ka(),ve=I(le),De=I(ve);he(De,{icon:ms,size:"2x"});var be=j(ve,2),Re=j(I(be),2),Ne=I(Re),Ae=I(Ne);ee(()=>te(Ae,`${Yi(k(h).cpu.perc)??""}%`)),ee(()=>xe(Ne,"style",`width: ${k(h).cpu.perc??""}%`)),N(Se,le)});var Y=j(re,2);J(Y,()=>k(h).mem,Se=>{var le=Ba(),ve=I(le),De=I(ve);he(De,{icon:ps,size:"2x"});var be=j(ve,2),Re=I(be),Ne=j(I(Re),2);J(Ne,()=>k(h).mem.used!==null,Ee=>{var Ce=La(),Le=I(Ce);ee(()=>te(Le,`Now ${Ft(k(h).mem.used)??""}`)),N(Ee,Ce)});var Ae=j(Ne,2);J(Ae,()=>k(h).mem.max_used!==null,Ee=>{var Ce=Da(),Le=I(Ce);ee(()=>te(Le,`Max ${Ft(k(h).mem.max_used)??""}`)),N(Ee,Ce)});var Te=j(Ae,2);J(Te,()=>k(h).mem.total!==null,Ee=>{var Ce=Ra(),Le=I(Ce);ee(()=>te(Le,`Limit ${Ft(k(h).mem.total)??""}`)),N(Ee,Ce)});var We=j(Re,2);J(We,()=>k(h).mem.used!==null&&k(h).mem.total!==null,Ee=>{var Ce=Ta(),Le=I(Ce),Tt=I(Le);ee(()=>te(Tt,`${Yi(k(g))??""}%`));var Bt=j(Le,2);J(Bt,()=>k(h).mem.max_used!==null,at=>{var lt=Aa();ee(()=>xe(lt,"style",`width: ${k(x)-k(g)}%`)),N(at,lt)}),ee(()=>xe(Le,"style",`width: ${k(g)??""}%; z-index: 2`)),N(Ee,Ce)}),N(Se,le)});var oe=j(Y,2);J(oe,()=>k(h).net,Se=>{var le=Pa(),ve=I(le),De=I(ve);he(De,{icon:Ho,size:"2x"});var be=j(ve,2),Re=j(I(be),2),Ne=I(Re);ee(()=>te(Ne,`▼ ${Ft(k(h).net.rx_bytes)??""}`));var Ae=j(Re,2),Te=I(Ae);ee(()=>te(Te,`▲ ${Ft(k(h).net.tx_bytes)??""}`));var We=j(be,2);J(We,()=>{var Ee;return((Ee=k(h).ports)==null?void 0:Ee.length)>0},Ee=>{var Ce=Oa(),Le=j(I(Ce),2);Ye(Le,1,()=>k(h).ports,Ze,(Tt,Bt)=>{var at=Ma(),lt=I(at);ee(()=>te(lt,k(Bt))),N(Tt,at)}),N(Ee,Ce)}),N(Se,le)});var me=j(oe,2),ke=I(me),Ie=I(ke);he(Ie,{icon:Io,size:"2x"});var ne=j(ke,2),_t=j(I(ne),2),st=I(_t),bt=I(st),Xt=j(I(bt));ee(()=>te(Xt,` ${Yt(k(h).created_at)??""}`));var Dt=j(st,2),He=I(Dt),Rt=I(He),Ke=I(Rt),Ct=j(Dt,2),Zt=I(Ct),nt=I(Zt);J(nt,()=>k(h).finished_at<k(h).started_at,Se=>{var le=Ia(),ve=j(ue(le),2);J(ve,()=>k(h).finished_at<k(h).created_at,De=>{var be=Xe("Never");N(De,be)},De=>{var be=Xe();ee(()=>te(be,Yt(k(h).finished_at))),N(De,be)}),N(Se,le)},Se=>{var le=Ha(),ve=j(ue(le));ee(()=>te(ve,` ${Yt(k(h).started_at)??""}`)),N(Se,le)});var Pt=j(Ct,2),ot=I(Pt),At=I(ot);J(At,()=>k(h).finished_at>k(h).started_at,Se=>{var le=Fa(),ve=j(ue(le));ee(()=>te(ve,` ${Yt(k(h).finished_at)??""}`)),N(Se,le)},Se=>{var le=za(),ve=j(ue(le));ee(()=>te(ve,` ${Yt(k(h).started_at)??""}`)),N(Se,le)});var we=j(Pt,2),Ii=I(we),ks=j(I(Ii)),Ls=I(ks);ee(()=>te(Ls,k(h).status.charAt(0).toUpperCase()+k(h).status.slice(1).toLowerCase()));var Ds=j(me,2);J(Ds,()=>k(h).env||k(h).labels,Se=>{var le=Wa(),ve=I(le),De=I(ve);he(De,{icon:Ro,size:"2x"});var be=j(ve,2),Re=I(be),Ne=I(Re),Ae=j(I(Ne));Ye(Ae,5,()=>Object.entries(k(h).env).sort(([Ce],[Le])=>Ce.localeCompare(Le)),Ze,(Ce,Le)=>{let Tt=()=>k(Le)[0],Bt=()=>k(Le)[1];var at=$a(),lt=I(at),Hi=I(lt),Fi=j(lt),zi=I(Fi);ee(()=>{te(Hi,Tt()),te(zi,Bt())}),N(Ce,at)});var Te=j(Re,2),We=I(Te),Ee=j(I(We));Ye(Ee,5,()=>Object.entries(k(h).labels).sort(([Ce],[Le])=>Ce.localeCompare(Le)),Ze,(Ce,Le)=>{let Tt=()=>k(Le)[0],Bt=()=>k(Le)[1];var at=Na(),lt=I(at),Hi=I(lt),Fi=j(lt),zi=I(Fi);ee(()=>{te(Hi,Tt()),te(zi,Bt())}),N(Ce,at)}),N(Se,le)}),ee(()=>{te(C,k(h).command),te($,` ${k(B)??""}`),te(Ke,k(h).crashes)}),N(e,r)}),N(n,m),ze()}function Ka({onlyFirst:n=!1}={}){const g=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?(?:\\u0007|\\u001B\\u005C|\\u009C))","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-nq-uy=><~]))"].join("|");return new RegExp(g,n?void 0:"g")}const Va=Ka();function Ga(n){if(typeof n!="string")throw new TypeError(`Expected a \`string\`, got \`${typeof n}\``);return n.replace(Va,"")}var Xa=V('<div class="d-flex align-items-center"><strong>Loading...</strong> <div class="spinner-border ms-auto" role="status" aria-hidden="true"></div></div>'),Za=V("<p>No Log Output yet ...</p>"),Ya=V('<time class="me-1 px-1 svelte-itlo0b"><!></time>'),Ja=V('<span class="pe-3 svelte-itlo0b"><!><span class="pe-3"> </span></span>'),Qa=V('<div class="d-flex justify-content-between align-items-center mb-2"><div><select class="form-select"><option>hide timestamps</option><option>local timestamps</option><option>raw timestamps</option></select></div> <div><button type="button" class="btn mx-1" title="Scroll to Top"><!></button> <button type="button" class="btn mx-1" title="Scroll to Bottom"><!></button> <button type="button" class="btn mx-1" title="Download shown log lines"><!></button> <button type="button" class="btn mx-1" title="Fullscreen"><!></button></div></div> <pre class="mb-0 svelte-itlo0b"></pre>',1),el=V("<div><!></div>");function tl(n,u){Fe(u,!1);let g=ce(u,"container_id",8),x,E=se(),B,D=se(!0),s=se([]),a=se("local");hi(()=>{g()!==x&&(x=g(),X(D,!0),X(s,[]),g()&&ie.send("get_container_logs",{container_id:g()}))}),qe(()=>{ie.register("get_container_logs",m=>{if(X(D,!1),(m==null?void 0:m.length)>0){let v=!k(s)||k(E)&&k(E).scrollTop>=k(E).scrollHeight-k(E).clientHeight;const e=k(s).length+m.length;e>5e3&&k(s).slice(e-5e3),k(s).push(...m.map(r=>Ga(r))),v&&ns().then(()=>Jt(E,k(E).scrollTop=k(E).scrollHeight))}},m=>ye.add({text:m,type:"error"})),B=setInterval(()=>{ie.send("get_container_logs",{container_id:g(),onlynew:!0})},3e3)}),Lt(()=>{clearInterval(B),ie.unregister("get_container_logs")});function l(){var m;(m=k(E))!=null&&m.requestFullscreen&&k(E).requestFullscreen({navigationUI:"show"})}function f(){ys(new Blob(k(s),{type:"text/plain"}),g()+".log")}function o(m){return new Date(m).toLocaleDateString(void 0,{weekday:"short",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})}$e();var h=el(),p=I(h);J(p,()=>k(D),m=>{var v=Xa();N(m,v)},m=>{var v=Be(),e=ue(v);J(e,()=>k(s).length===0,r=>{var t=Za();N(r,t)},r=>{var t=Qa(),i=ue(t),c=I(i),_=I(c);ee(()=>{k(a),En(()=>{})});var S=I(_);S.value=(S.__value="off")==null?"":"off";var y=j(S);y.value=(y.__value="local")==null?"":"local";var d=j(y);d.value=(d.__value="raw")==null?"":"raw";var b=j(c,2),R=I(b),O=I(R);he(O,{icon:ko,size:"lg",color:"#666"});var A=j(R,2),M=I(A);he(M,{icon:bo,size:"lg",color:"#666"});var z=j(A,2),W=I(z);he(W,{icon:Fo,size:"lg",color:"#666"});var q=j(z,2),F=I(q);he(F,{icon:gs,size:"lg",color:"#666"});var C=j(i,2);Ye(C,5,()=>k(s),Ze,(L,T)=>{var P=Ja();const K=et(()=>k(T).substring(0,k(T).indexOf(" "))),G=et(()=>k(T).substring(k(T).indexOf(" ")+1));var Z=I(P);J(Z,()=>k(a)!=="off",w=>{var H=Ya(),U=I(H);J(U,()=>k(a)==="local",$=>{var re=Xe();ee(()=>te(re,o(k(K)))),N($,re)},$=>{var re=Xe();ee(()=>te(re,k(K))),N($,re)}),ee(()=>xe(H,"datetime",k(K))),N(w,H)});var Q=j(Z),ae=I(Q);ee(()=>te(ae,k(G))),N(L,P)}),Pi(C,L=>X(E,L),()=>k(E)),Vn(_,()=>k(a),L=>X(a,L)),_e("click",R,()=>Jt(E,k(E).scrollTop=0)),_e("click",A,()=>Jt(E,k(E).scrollTop=k(E).scrollHeight)),_e("click",z,f),_e("click",q,l),N(r,t)},!0),N(m,v)}),N(n,h),ze()}var il=V('<div class="dropdown"><button type="button"><!></button> <ul class="dropdown-menu svelte-17q1qz7"><!></ul></div>');function kr(n,u){let g=ce(u,"btnClass",8,"secondary");var x=il(),E=I(x),B=I(E);wi(B,u,"button",{},a=>{he(a,{icon:Po})});var D=j(E,2),s=I(D);wi(s,u,"default",{},null),ee(()=>Nn(E,`btn btn-${g()??""} dropdown-toggle svelte-17q1qz7`)),N(n,x)}var rl=V('<li><button class="dropdown-item" type="button"><!></button></li>');function Ni(n,u){let g=ce(u,"active",8,!1);var x=rl(),E=I(x),B=I(E);wi(B,u,"default",{},null),ee(()=>fe(E,"active",g())),_e("click",E,function(D){Xn.call(this,u,D)}),N(n,x)}var sl=V('<div class="d-flex align-items-center"><strong>Loading...</strong> <div class="spinner-border ms-auto" role="status" aria-hidden="true"></div></div>'),nl=V('<button type="button" class="btn btn-secondary border-dark"> </button>'),ol=V("<!> <!>",1),al=V('<span slot="button" class="me-1"><!> Add</span>'),ll=V('<!> <input type="file" style="display: none">',1),cl=V('<span class="badge bg-warning ms-2">readonly</span>'),hl=V('<div class="d-flex justify-content-between align-items-center"><span> </span> <span><!> <span class="badge bg-secondary ms-2"> </span></span></div>'),dl=V('<span slot="button" class="me-1"><!> Volumes</span>'),ul=V('<div class="ms-4"><!></div>'),_l=V('<tr class="svelte-1hbb9tz"><td><!> <wbr> </td><td class="text-end" style="word-break: break-all"><!></td><td class="text-center"> <wbr> </td><td class="text-center"> </td><td class="text-center font-monospace" style="word-break: break-all"> </td></tr>'),fl=V('<div class="d-flex justify-content-between align-items-center"><div class="d-flex"><div class="btn-group me-1"><button type="button" class="btn btn-outline-primary"><!></button> <button type="button" class="btn btn-outline-primary"><!></button></div> <div class="btn-group mx-2" role="group"></div></div> <div class="d-flex"><!> <!></div></div> <table class="table table-hover"><thead><tr><th scope="col">Name</th><th scope="col" class="text-end">Size</th><th scope="col" class="text-center">Owner</th><th scope="col" class="text-center">Modified</th><th scope="col" class="text-center">Permissions</th></tr></thead><tbody></tbody></table>',1),vl=V('<div style="overflow-x:auto"><!></div>');function pl(n,u){Fe(u,!1);const g=se();let x=ce(u,"container_id",8),E=ce(u,"allow_download",8),B=ce(u,"allow_upload",8),D=se(),s=se(!0),a,l=se("/"),f=se(null),o=se(null);hi(()=>{x()!==a&&(a=x(),X(s,!0),X(l,"/"),X(f,null),X(o,null),x()&&ie.send("get_filesystem_info",{container_id:x()}))}),qe(()=>{ie.register("get_filesystem_info",i=>{p(i.workdir),X(o,i)},i=>ye.add({text:i,type:"error"})),ie.register("get_directory_list",i=>{window.scrollTo({top:0,behavior:"smooth"}),X(f,i.entries),X(l,i.path),X(s,!1)},i=>{ye.add({text:i,type:"error"}),X(f,null),X(s,!1)}),ie.register("download_file",i=>{ys(i.blob,i.payload.path.split("/").pop())},i=>ye.add({text:i,type:"error"})),ie.register("create_folder",()=>{p(k(l))},i=>ye.add({text:i,type:"error"})),ie.register("upload_file",()=>{p(k(l))},i=>ye.add({text:i,type:"error"}))}),Lt(()=>{ie.unregister("get_filesystem_info"),ie.unregister("get_directory_list"),ie.unregister("create_folder"),ie.unregister("upload_file"),ie.unregister("download_file")});function h(i){let c=k(l);c.endsWith("/")||(c+="/"),c+=i,p(c)}function p(i){X(l,i),ie.send("get_directory_list",{container_id:x(),path:i}),X(s,!0),X(f,null)}function m(i){E()&&ie.send("download_file",{container_id:x(),path:`${k(l)}/${i}`})}function v(){const i=prompt("Folder name:");i&&ie.send("create_folder",{container_id:x(),path:`${k(l)}/${i}`})}async function e(){const i=_=>new Promise((S,y)=>{const d=new FileReader;d.readAsDataURL(_),d.onload=()=>S(d.result.split(",")[1]),d.onerror=b=>y(b)}),c=k(D).files[0];confirm(`Upload file "${c.name}"?`)&&ie.send("upload_file",{container_id:x(),path:`${k(l)}/${c.name}`,content:await i(c)})}ct(()=>k(l),()=>{X(g,()=>{const i=[],c=k(l).split("/");let _="";for(const S of c)S&&(_+="/"+S,i.push({segment:S,totalPath:_}));return i.unshift({segment:"/",totalPath:"/"}),i})}),ai(),$e();var r=vl(),t=I(r);J(t,()=>k(s),i=>{var c=sl();N(i,c)},i=>{var c=fl(),_=ue(c),S=I(_),y=I(S),d=I(y),b=I(d);he(b,{icon:$o});var R=j(d,2),O=I(R);he(O,{icon:bs});var A=j(y,2);Ye(A,5,()=>k(g)(),Ze,(C,L)=>{var T=nl(),P=I(T);ee(()=>te(P,k(L).segment||"/")),_e("click",T,()=>p(k(L).totalPath)),N(C,T)});var M=j(S,2),z=I(M);J(z,B,C=>{var L=ll(),T=ue(L);kr(T,{btnClass:"outline-primary",children:(K,G)=>{var Z=ol(),Q=ue(Z);Ni(Q,{$$events:{click:v},children:(w,H)=>{var U=Xe("Add Folder");N(w,U)},$$slots:{default:!0}});var ae=j(Q,2);Ni(ae,{$$events:{click:()=>k(D).click()},children:(w,H)=>{var U=Xe("Upload File");N(w,U)},$$slots:{default:!0}}),N(K,Z)},$$slots:{default:!0,button:(K,G)=>{var Z=al(),Q=I(Z);he(Q,{icon:qo}),N(K,Z)}}});var P=j(T,2);Pi(P,K=>X(D,K),()=>k(D)),_e("change",P,e),N(C,L)});var W=j(z,2);J(W,()=>{var C,L;return((L=(C=k(o))==null?void 0:C.mounts)==null?void 0:L.length)>0},C=>{var L=ul(),T=I(L);kr(T,{children:(P,K)=>{var G=Be(),Z=ue(G);Ye(Z,1,()=>k(o).mounts,Ze,(Q,ae)=>{Ni(Q,{$$events:{click:()=>p(k(ae).destination)},children:(w,H)=>{var U=hl(),$=I(U),re=I($),Y=j($,2),oe=I(Y);J(oe,()=>k(ae).readonly,Ie=>{var ne=cl();N(Ie,ne)});var me=j(oe,2),ke=I(me);ee(()=>{te(re,k(ae).destination),te(ke,k(ae).type)}),N(w,U)},$$slots:{default:!0}})}),N(P,G)},$$slots:{default:!0,button:(P,K)=>{var G=dl(),Z=I(G);he(Z,{icon:Mo}),N(P,G)}}}),N(C,L)});var q=j(_,2),F=j(I(q));Ye(F,5,()=>k(f)||[],Ze,(C,L)=>{var T=_l(),P=I(T),K=I(P);J(K,()=>k(L).type==="d",oe=>{he(oe,{icon:Co,size:"lg",color:"#3B6"})},oe=>{var me=Be(),ke=ue(me);J(ke,()=>k(L).type==="f",Ie=>{he(Ie,{icon:Uo,size:"lg",color:"#36B"})},Ie=>{var ne=Be(),_t=ue(ne);J(_t,()=>k(L).type==="l",st=>{he(st,{icon:mo,size:"lg",color:"#B36"})},st=>{var bt=Xe();ee(()=>te(bt,k(L).type)),N(st,bt)},!0),N(Ie,ne)},!0),N(oe,me)});var G=j(K,3),Z=j(P),Q=I(Z);J(Q,()=>k(L).type==="f",oe=>{var me=Xe();ee(()=>te(me,k(L).filesize)),N(oe,me)});var ae=j(Z),w=I(ae),H=j(w,2,!0),U=j(ae),$=I(U),re=j(U),Y=I(re);ee(()=>{fe(T,"clickable",k(L).type==="d"||E()),te(G,` ${k(L).name??""}`),te(w,`${k(L).owner??""} `),te(H,k(L).group),te($,k(L).modtime),te(Y,k(L).permissions)}),_e("click",T,()=>k(L).type==="d"?h(k(L).name):m(k(L).name)),N(C,T)}),_e("click",d,()=>p(k(o).workdir)),_e("click",R,()=>p(k(l))),N(i,c)}),N(n,r),ze()}var gl=V('<div class="d-flex align-items-center"><strong>Loading...</strong> <div class="spinner-border ms-auto" role="status" aria-hidden="true"></div></div>'),ml=V('<div style="width: 2rem" class="me-2 d-flex justify-content-end align-items-center"><!></div>'),Sl=V('<tr><td class="text-end"> </td><td class="text-end"><!></td><td class="text-end"><!></td><td class="text-center"> </td><td class="text-center"> </td><td class="text-start"><div class="d-flex"><!> <div class="font-monospace"> </div></div></td></tr>'),bl=V('<table class="table table-striped"><thead><tr><th scope="col" class="text-end" title="Process ID">PID</th><th scope="col" class="text-end" title="Processor Usage">CPU</th><th scope="col" class="text-end">Memory</th><th scope="col" class="text-center">Started At</th><th scope="col" class="text-center">User</th><th scope="col" class="text-start">Command</th></tr></thead><tbody></tbody></table>'),Cl=V('<div style="overflow-x:auto"><!></div>');function yl(n,u){Fe(u,!1);let g=ce(u,"container_id",8),x,E,B=se(!0),D=se(null);hi(()=>{g()!==x&&(x=g(),X(B,!0),X(D,null),g()&&ie.send("get_processes",{container_id:g()}))}),qe(()=>{ie.register("get_processes",f=>{X(D,f),X(B,!1)},f=>ye.add({text:f,type:"error"})),E=setInterval(()=>{ie.send("get_processes",{container_id:g()})},3e3)}),Lt(()=>{clearInterval(E),ie.unregister("get_processes")});function s(f,o){return f??o}$e();var a=Cl(),l=I(a);J(l,()=>k(B),f=>{var o=gl();N(f,o)},f=>{var o=bl(),h=j(I(o));Ye(h,5,()=>k(D)||[],Ze,(p,m)=>{var v=Sl(),e=I(v),r=I(e),t=j(e),i=I(t);J(i,()=>s(k(m)["%cpu"],null),W=>{var q=Xe();ee(()=>te(q,`${k(m)["%cpu"]??""}%`)),N(W,q)});var c=j(t),_=I(c);J(_,()=>s(k(m)["%mem"],null),W=>{var q=Xe();ee(()=>te(q,`${k(m)["%mem"]??""}%`)),N(W,q)});var S=j(c),y=I(S);ee(()=>te(y,s(k(m).stime,"")));var d=j(S),b=I(d);ee(()=>te(b,s(k(m).user,"")));var R=j(d),O=I(R),A=I(O);Ye(A,1,()=>Array(k(m).level),Ze,(W,q,F)=>{var C=ml(),L=I(C);J(L,()=>parseInt(k(m).level)===F+1,T=>{he(T,{icon:Zo,rotate:90})}),N(W,C)});var M=j(A,2),z=I(M);ee(()=>{te(r,k(m).pid),te(z,k(m).command)}),N(p,v)}),N(f,o)}),N(n,a),ze()}var ws={exports:{}};(function(n,u){(function(g,x){n.exports=x()})(self,()=>(()=>{var g={4567:function(D,s,a){var l=this&&this.__decorate||function(i,c,_,S){var y,d=arguments.length,b=d<3?c:S===null?S=Object.getOwnPropertyDescriptor(c,_):S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(i,c,_,S);else for(var R=i.length-1;R>=0;R--)(y=i[R])&&(b=(d<3?y(b):d>3?y(c,_,b):y(c,_))||b);return d>3&&b&&Object.defineProperty(c,_,b),b},f=this&&this.__param||function(i,c){return function(_,S){c(_,S,i)}};Object.defineProperty(s,"__esModule",{value:!0}),s.AccessibilityManager=void 0;const o=a(9042),h=a(6114),p=a(9924),m=a(844),v=a(5596),e=a(4725),r=a(3656);let t=s.AccessibilityManager=class extends m.Disposable{constructor(i,c){super(),this._terminal=i,this._renderService=c,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="",this._accessibilityContainer=document.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=document.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let _=0;_<this._terminal.rows;_++)this._rowElements[_]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[_]);if(this._topBoundaryFocusListener=_=>this._handleBoundaryFocus(_,0),this._bottomBoundaryFocusListener=_=>this._handleBoundaryFocus(_,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions(),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=document.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this.register(new p.TimeBasedDebouncer(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this.register(this._terminal.onResize(_=>this._handleResize(_.rows))),this.register(this._terminal.onRender(_=>this._refreshRows(_.start,_.end))),this.register(this._terminal.onScroll(()=>this._refreshRows())),this.register(this._terminal.onA11yChar(_=>this._handleChar(_))),this.register(this._terminal.onLineFeed(()=>this._handleChar(`
`))),this.register(this._terminal.onA11yTab(_=>this._handleTab(_))),this.register(this._terminal.onKey(_=>this._handleKey(_.key))),this.register(this._terminal.onBlur(()=>this._clearLiveRegion())),this.register(this._renderService.onDimensionsChange(()=>this._refreshRowsDimensions())),this._screenDprMonitor=new v.ScreenDprMonitor(window),this.register(this._screenDprMonitor),this._screenDprMonitor.setListener(()=>this._refreshRowsDimensions()),this.register((0,r.addDisposableDomListener)(window,"resize",()=>this._refreshRowsDimensions())),this._refreshRows(),this.register((0,m.toDisposable)(()=>{this._accessibilityContainer.remove(),this._rowElements.length=0}))}_handleTab(i){for(let c=0;c<i;c++)this._handleChar(" ")}_handleChar(i){this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==i&&(this._charsToAnnounce+=i):this._charsToAnnounce+=i,i===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=o.tooMuchOutput)),h.isMac&&this._liveRegion.textContent&&this._liveRegion.textContent.length>0&&!this._liveRegion.parentNode&&setTimeout(()=>{this._accessibilityContainer.appendChild(this._liveRegion)},0))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0,h.isMac&&this._liveRegion.remove()}_handleKey(i){this._clearLiveRegion(),new RegExp("\\p{Control}","u").test(i)||this._charsToConsume.push(i)}_refreshRows(i,c){this._liveRegionDebouncer.refresh(i,c,this._terminal.rows)}_renderRows(i,c){const _=this._terminal.buffer,S=_.lines.length.toString();for(let y=i;y<=c;y++){const d=_.translateBufferLineToString(_.ydisp+y,!0),b=(_.ydisp+y+1).toString(),R=this._rowElements[y];R&&(d.length===0?R.innerText=" ":R.textContent=d,R.setAttribute("aria-posinset",b),R.setAttribute("aria-setsize",S))}this._announceCharacters()}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(i,c){const _=i.target,S=this._rowElements[c===0?1:this._rowElements.length-2];if(_.getAttribute("aria-posinset")===(c===0?"1":`${this._terminal.buffer.lines.length}`)||i.relatedTarget!==S)return;let y,d;if(c===0?(y=_,d=this._rowElements.pop(),this._rowContainer.removeChild(d)):(y=this._rowElements.shift(),d=_,this._rowContainer.removeChild(y)),y.removeEventListener("focus",this._topBoundaryFocusListener),d.removeEventListener("focus",this._bottomBoundaryFocusListener),c===0){const b=this._createAccessibilityTreeNode();this._rowElements.unshift(b),this._rowContainer.insertAdjacentElement("afterbegin",b)}else{const b=this._createAccessibilityTreeNode();this._rowElements.push(b),this._rowContainer.appendChild(b)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(c===0?-1:1),this._rowElements[c===0?1:this._rowElements.length-2].focus(),i.preventDefault(),i.stopImmediatePropagation()}_handleResize(i){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let c=this._rowContainer.children.length;c<this._terminal.rows;c++)this._rowElements[c]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[c]);for(;this._rowElements.length>i;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){const i=document.createElement("div");return i.setAttribute("role","listitem"),i.tabIndex=-1,this._refreshRowDimensions(i),i}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){this._accessibilityContainer.style.width=`${this._renderService.dimensions.css.canvas.width}px`,this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let i=0;i<this._terminal.rows;i++)this._refreshRowDimensions(this._rowElements[i])}}_refreshRowDimensions(i){i.style.height=`${this._renderService.dimensions.css.cell.height}px`}};s.AccessibilityManager=t=l([f(1,e.IRenderService)],t)},3614:(D,s)=>{function a(h){return h.replace(/\r?\n/g,"\r")}function l(h,p){return p?"\x1B[200~"+h+"\x1B[201~":h}function f(h,p,m,v){h=l(h=a(h),m.decPrivateModes.bracketedPasteMode&&v.rawOptions.ignoreBracketedPasteMode!==!0),m.triggerDataEvent(h,!0),p.value=""}function o(h,p,m){const v=m.getBoundingClientRect(),e=h.clientX-v.left-10,r=h.clientY-v.top-10;p.style.width="20px",p.style.height="20px",p.style.left=`${e}px`,p.style.top=`${r}px`,p.style.zIndex="1000",p.focus()}Object.defineProperty(s,"__esModule",{value:!0}),s.rightClickHandler=s.moveTextAreaUnderMouseCursor=s.paste=s.handlePasteEvent=s.copyHandler=s.bracketTextForPaste=s.prepareTextForTerminal=void 0,s.prepareTextForTerminal=a,s.bracketTextForPaste=l,s.copyHandler=function(h,p){h.clipboardData&&h.clipboardData.setData("text/plain",p.selectionText),h.preventDefault()},s.handlePasteEvent=function(h,p,m,v){h.stopPropagation(),h.clipboardData&&f(h.clipboardData.getData("text/plain"),p,m,v)},s.paste=f,s.moveTextAreaUnderMouseCursor=o,s.rightClickHandler=function(h,p,m,v,e){o(h,p,m),e&&v.rightClickSelect(h),p.value=v.selectionText,p.select()}},7239:(D,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ColorContrastCache=void 0;const l=a(1505);s.ColorContrastCache=class{constructor(){this._color=new l.TwoKeyMap,this._css=new l.TwoKeyMap}setCss(f,o,h){this._css.set(f,o,h)}getCss(f,o){return this._css.get(f,o)}setColor(f,o,h){this._color.set(f,o,h)}getColor(f,o){return this._color.get(f,o)}clear(){this._color.clear(),this._css.clear()}}},3656:(D,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.addDisposableDomListener=void 0,s.addDisposableDomListener=function(a,l,f,o){a.addEventListener(l,f,o);let h=!1;return{dispose:()=>{h||(h=!0,a.removeEventListener(l,f,o))}}}},6465:function(D,s,a){var l=this&&this.__decorate||function(e,r,t,i){var c,_=arguments.length,S=_<3?r:i===null?i=Object.getOwnPropertyDescriptor(r,t):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(e,r,t,i);else for(var y=e.length-1;y>=0;y--)(c=e[y])&&(S=(_<3?c(S):_>3?c(r,t,S):c(r,t))||S);return _>3&&S&&Object.defineProperty(r,t,S),S},f=this&&this.__param||function(e,r){return function(t,i){r(t,i,e)}};Object.defineProperty(s,"__esModule",{value:!0}),s.Linkifier2=void 0;const o=a(3656),h=a(8460),p=a(844),m=a(2585);let v=s.Linkifier2=class extends p.Disposable{get currentLink(){return this._currentLink}constructor(e){super(),this._bufferService=e,this._linkProviders=[],this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this.register(new h.EventEmitter),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this.register(new h.EventEmitter),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this.register((0,p.getDisposeArrayDisposable)(this._linkCacheDisposables)),this.register((0,p.toDisposable)(()=>{this._lastMouseEvent=void 0})),this.register(this._bufferService.onResize(()=>{this._clearCurrentLink(),this._wasResized=!0}))}registerLinkProvider(e){return this._linkProviders.push(e),{dispose:()=>{const r=this._linkProviders.indexOf(e);r!==-1&&this._linkProviders.splice(r,1)}}}attachToDom(e,r,t){this._element=e,this._mouseService=r,this._renderService=t,this.register((0,o.addDisposableDomListener)(this._element,"mouseleave",()=>{this._isMouseOut=!0,this._clearCurrentLink()})),this.register((0,o.addDisposableDomListener)(this._element,"mousemove",this._handleMouseMove.bind(this))),this.register((0,o.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,o.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))}_handleMouseMove(e){if(this._lastMouseEvent=e,!this._element||!this._mouseService)return;const r=this._positionFromMouseEvent(e,this._element,this._mouseService);if(!r)return;this._isMouseOut=!1;const t=e.composedPath();for(let i=0;i<t.length;i++){const c=t[i];if(c.classList.contains("xterm"))break;if(c.classList.contains("xterm-hover"))return}this._lastBufferCell&&r.x===this._lastBufferCell.x&&r.y===this._lastBufferCell.y||(this._handleHover(r),this._lastBufferCell=r)}_handleHover(e){if(this._activeLine!==e.y||this._wasResized)return this._clearCurrentLink(),this._askForLink(e,!1),void(this._wasResized=!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,e)||(this._clearCurrentLink(),this._askForLink(e,!0))}_askForLink(e,r){var t,i;this._activeProviderReplies&&r||((t=this._activeProviderReplies)===null||t===void 0||t.forEach(_=>{_==null||_.forEach(S=>{S.link.dispose&&S.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=e.y);let c=!1;for(const[_,S]of this._linkProviders.entries())r?!((i=this._activeProviderReplies)===null||i===void 0)&&i.get(_)&&(c=this._checkLinkProviderResult(_,e,c)):S.provideLinks(e.y,y=>{var d,b;if(this._isMouseOut)return;const R=y==null?void 0:y.map(O=>({link:O}));(d=this._activeProviderReplies)===null||d===void 0||d.set(_,R),c=this._checkLinkProviderResult(_,e,c),((b=this._activeProviderReplies)===null||b===void 0?void 0:b.size)===this._linkProviders.length&&this._removeIntersectingLinks(e.y,this._activeProviderReplies)})}_removeIntersectingLinks(e,r){const t=new Set;for(let i=0;i<r.size;i++){const c=r.get(i);if(c)for(let _=0;_<c.length;_++){const S=c[_],y=S.link.range.start.y<e?0:S.link.range.start.x,d=S.link.range.end.y>e?this._bufferService.cols:S.link.range.end.x;for(let b=y;b<=d;b++){if(t.has(b)){c.splice(_--,1);break}t.add(b)}}}}_checkLinkProviderResult(e,r,t){var i;if(!this._activeProviderReplies)return t;const c=this._activeProviderReplies.get(e);let _=!1;for(let S=0;S<e;S++)this._activeProviderReplies.has(S)&&!this._activeProviderReplies.get(S)||(_=!0);if(!_&&c){const S=c.find(y=>this._linkAtPosition(y.link,r));S&&(t=!0,this._handleNewLink(S))}if(this._activeProviderReplies.size===this._linkProviders.length&&!t)for(let S=0;S<this._activeProviderReplies.size;S++){const y=(i=this._activeProviderReplies.get(S))===null||i===void 0?void 0:i.find(d=>this._linkAtPosition(d.link,r));if(y){t=!0,this._handleNewLink(y);break}}return t}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(e){if(!this._element||!this._mouseService||!this._currentLink)return;const r=this._positionFromMouseEvent(e,this._element,this._mouseService);r&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,r)&&this._currentLink.link.activate(e,this._currentLink.link.text)}_clearCurrentLink(e,r){this._element&&this._currentLink&&this._lastMouseEvent&&(!e||!r||this._currentLink.link.range.start.y>=e&&this._currentLink.link.range.end.y<=r)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,p.disposeArray)(this._linkCacheDisposables))}_handleNewLink(e){if(!this._element||!this._lastMouseEvent||!this._mouseService)return;const r=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);r&&this._linkAtPosition(e.link,r)&&(this._currentLink=e,this._currentLink.state={decorations:{underline:e.link.decorations===void 0||e.link.decorations.underline,pointerCursor:e.link.decorations===void 0||e.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,e.link,this._lastMouseEvent),e.link.decorations={},Object.defineProperties(e.link.decorations,{pointerCursor:{get:()=>{var t,i;return(i=(t=this._currentLink)===null||t===void 0?void 0:t.state)===null||i===void 0?void 0:i.decorations.pointerCursor},set:t=>{var i,c;!((i=this._currentLink)===null||i===void 0)&&i.state&&this._currentLink.state.decorations.pointerCursor!==t&&(this._currentLink.state.decorations.pointerCursor=t,this._currentLink.state.isHovered&&((c=this._element)===null||c===void 0||c.classList.toggle("xterm-cursor-pointer",t)))}},underline:{get:()=>{var t,i;return(i=(t=this._currentLink)===null||t===void 0?void 0:t.state)===null||i===void 0?void 0:i.decorations.underline},set:t=>{var i,c,_;!((i=this._currentLink)===null||i===void 0)&&i.state&&((_=(c=this._currentLink)===null||c===void 0?void 0:c.state)===null||_===void 0?void 0:_.decorations.underline)!==t&&(this._currentLink.state.decorations.underline=t,this._currentLink.state.isHovered&&this._fireUnderlineEvent(e.link,t))}}}),this._renderService&&this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange(t=>{if(!this._currentLink)return;const i=t.start===0?0:t.start+1+this._bufferService.buffer.ydisp,c=this._bufferService.buffer.ydisp+1+t.end;if(this._currentLink.link.range.start.y>=i&&this._currentLink.link.range.end.y<=c&&(this._clearCurrentLink(i,c),this._lastMouseEvent&&this._element)){const _=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);_&&this._askForLink(_,!1)}})))}_linkHover(e,r,t){var i;!((i=this._currentLink)===null||i===void 0)&&i.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(r,!0),this._currentLink.state.decorations.pointerCursor&&e.classList.add("xterm-cursor-pointer")),r.hover&&r.hover(t,r.text)}_fireUnderlineEvent(e,r){const t=e.range,i=this._bufferService.buffer.ydisp,c=this._createLinkUnderlineEvent(t.start.x-1,t.start.y-i-1,t.end.x,t.end.y-i-1,void 0);(r?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(c)}_linkLeave(e,r,t){var i;!((i=this._currentLink)===null||i===void 0)&&i.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(r,!1),this._currentLink.state.decorations.pointerCursor&&e.classList.remove("xterm-cursor-pointer")),r.leave&&r.leave(t,r.text)}_linkAtPosition(e,r){const t=e.range.start.y*this._bufferService.cols+e.range.start.x,i=e.range.end.y*this._bufferService.cols+e.range.end.x,c=r.y*this._bufferService.cols+r.x;return t<=c&&c<=i}_positionFromMouseEvent(e,r,t){const i=t.getCoords(e,r,this._bufferService.cols,this._bufferService.rows);if(i)return{x:i[0],y:i[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(e,r,t,i,c){return{x1:e,y1:r,x2:t,y2:i,cols:this._bufferService.cols,fg:c}}};s.Linkifier2=v=l([f(0,m.IBufferService)],v)},9042:(D,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.tooMuchOutput=s.promptLabel=void 0,s.promptLabel="Terminal input",s.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},3730:function(D,s,a){var l=this&&this.__decorate||function(v,e,r,t){var i,c=arguments.length,_=c<3?e:t===null?t=Object.getOwnPropertyDescriptor(e,r):t;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")_=Reflect.decorate(v,e,r,t);else for(var S=v.length-1;S>=0;S--)(i=v[S])&&(_=(c<3?i(_):c>3?i(e,r,_):i(e,r))||_);return c>3&&_&&Object.defineProperty(e,r,_),_},f=this&&this.__param||function(v,e){return function(r,t){e(r,t,v)}};Object.defineProperty(s,"__esModule",{value:!0}),s.OscLinkProvider=void 0;const o=a(511),h=a(2585);let p=s.OscLinkProvider=class{constructor(v,e,r){this._bufferService=v,this._optionsService=e,this._oscLinkService=r}provideLinks(v,e){var r;const t=this._bufferService.buffer.lines.get(v-1);if(!t)return void e(void 0);const i=[],c=this._optionsService.rawOptions.linkHandler,_=new o.CellData,S=t.getTrimmedLength();let y=-1,d=-1,b=!1;for(let R=0;R<S;R++)if(d!==-1||t.hasContent(R)){if(t.loadCell(R,_),_.hasExtendedAttrs()&&_.extended.urlId){if(d===-1){d=R,y=_.extended.urlId;continue}b=_.extended.urlId!==y}else d!==-1&&(b=!0);if(b||d!==-1&&R===S-1){const O=(r=this._oscLinkService.getLinkData(y))===null||r===void 0?void 0:r.uri;if(O){const A={start:{x:d+1,y:v},end:{x:R+(b||R!==S-1?0:1),y:v}};let M=!1;if(!(c!=null&&c.allowNonHttpProtocols))try{const z=new URL(O);["http:","https:"].includes(z.protocol)||(M=!0)}catch{M=!0}M||i.push({text:O,range:A,activate:(z,W)=>c?c.activate(z,W,A):m(0,W),hover:(z,W)=>{var q;return(q=c==null?void 0:c.hover)===null||q===void 0?void 0:q.call(c,z,W,A)},leave:(z,W)=>{var q;return(q=c==null?void 0:c.leave)===null||q===void 0?void 0:q.call(c,z,W,A)}})}b=!1,_.hasExtendedAttrs()&&_.extended.urlId?(d=R,y=_.extended.urlId):(d=-1,y=-1)}}e(i)}};function m(v,e){if(confirm(`Do you want to navigate to ${e}?

WARNING: This link could potentially be dangerous`)){const r=window.open();if(r){try{r.opener=null}catch{}r.location.href=e}else console.warn("Opening link blocked as opener could not be cleared")}}s.OscLinkProvider=p=l([f(0,h.IBufferService),f(1,h.IOptionsService),f(2,h.IOscLinkService)],p)},6193:(D,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.RenderDebouncer=void 0,s.RenderDebouncer=class{constructor(a,l){this._parentWindow=a,this._renderCallback=l,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._parentWindow.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(a){return this._refreshCallbacks.push(a),this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame(()=>this._innerRefresh())),this._animationFrame}refresh(a,l,f){this._rowCount=f,a=a!==void 0?a:0,l=l!==void 0?l:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,a):a,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,l):l,this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return void this._runRefreshCallbacks();const a=Math.max(this._rowStart,0),l=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(a,l),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(const a of this._refreshCallbacks)a(0);this._refreshCallbacks=[]}}},5596:(D,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ScreenDprMonitor=void 0;const l=a(844);class f extends l.Disposable{constructor(h){super(),this._parentWindow=h,this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this.register((0,l.toDisposable)(()=>{this.clearListener()}))}setListener(h){this._listener&&this.clearListener(),this._listener=h,this._outerListener=()=>{this._listener&&(this._listener(this._parentWindow.devicePixelRatio,this._currentDevicePixelRatio),this._updateDpr())},this._updateDpr()}_updateDpr(){var h;this._outerListener&&((h=this._resolutionMediaMatchList)===null||h===void 0||h.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){this._resolutionMediaMatchList&&this._listener&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._listener=void 0,this._outerListener=void 0)}}s.ScreenDprMonitor=f},3236:(D,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Terminal=void 0;const l=a(3614),f=a(3656),o=a(6465),h=a(9042),p=a(3730),m=a(1680),v=a(3107),e=a(5744),r=a(2950),t=a(1296),i=a(428),c=a(4269),_=a(5114),S=a(8934),y=a(3230),d=a(9312),b=a(4725),R=a(6731),O=a(8055),A=a(8969),M=a(8460),z=a(844),W=a(6114),q=a(8437),F=a(2584),C=a(7399),L=a(5941),T=a(9074),P=a(2585),K=a(5435),G=a(4567),Z=typeof window<"u"?window.document:null;class Q extends A.CoreTerminal{get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}constructor(w={}){super(w),this.browser=W,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this.register(new z.MutableDisposable),this._onCursorMove=this.register(new M.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onKey=this.register(new M.EventEmitter),this.onKey=this._onKey.event,this._onRender=this.register(new M.EventEmitter),this.onRender=this._onRender.event,this._onSelectionChange=this.register(new M.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this.register(new M.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onBell=this.register(new M.EventEmitter),this.onBell=this._onBell.event,this._onFocus=this.register(new M.EventEmitter),this._onBlur=this.register(new M.EventEmitter),this._onA11yCharEmitter=this.register(new M.EventEmitter),this._onA11yTabEmitter=this.register(new M.EventEmitter),this._onWillOpen=this.register(new M.EventEmitter),this._setup(),this.linkifier2=this.register(this._instantiationService.createInstance(o.Linkifier2)),this.linkifier2.registerLinkProvider(this._instantiationService.createInstance(p.OscLinkProvider)),this._decorationService=this._instantiationService.createInstance(T.DecorationService),this._instantiationService.setService(P.IDecorationService,this._decorationService),this.register(this._inputHandler.onRequestBell(()=>this._onBell.fire())),this.register(this._inputHandler.onRequestRefreshRows((H,U)=>this.refresh(H,U))),this.register(this._inputHandler.onRequestSendFocus(()=>this._reportFocus())),this.register(this._inputHandler.onRequestReset(()=>this.reset())),this.register(this._inputHandler.onRequestWindowsOptionsReport(H=>this._reportWindowsOptions(H))),this.register(this._inputHandler.onColor(H=>this._handleColorEvent(H))),this.register((0,M.forwardEvent)(this._inputHandler.onCursorMove,this._onCursorMove)),this.register((0,M.forwardEvent)(this._inputHandler.onTitleChange,this._onTitleChange)),this.register((0,M.forwardEvent)(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this.register((0,M.forwardEvent)(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this.register(this._bufferService.onResize(H=>this._afterResize(H.cols,H.rows))),this.register((0,z.toDisposable)(()=>{var H,U;this._customKeyEventHandler=void 0,(U=(H=this.element)===null||H===void 0?void 0:H.parentNode)===null||U===void 0||U.removeChild(this.element)}))}_handleColorEvent(w){if(this._themeService)for(const H of w){let U,$="";switch(H.index){case 256:U="foreground",$="10";break;case 257:U="background",$="11";break;case 258:U="cursor",$="12";break;default:U="ansi",$="4;"+H.index}switch(H.type){case 0:const re=O.color.toColorRGB(U==="ansi"?this._themeService.colors.ansi[H.index]:this._themeService.colors[U]);this.coreService.triggerDataEvent(`${F.C0.ESC}]${$};${(0,L.toRgbString)(re)}${F.C1_ESCAPED.ST}`);break;case 1:if(U==="ansi")this._themeService.modifyColors(Y=>Y.ansi[H.index]=O.rgba.toColor(...H.color));else{const Y=U;this._themeService.modifyColors(oe=>oe[Y]=O.rgba.toColor(...H.color))}break;case 2:this._themeService.restoreColor(H.index)}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(w){w?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(G.AccessibilityManager,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(w){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(F.C0.ESC+"[I"),this.updateCursorStyle(w),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){var w;return(w=this.textarea)===null||w===void 0?void 0:w.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(F.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;const w=this.buffer.ybase+this.buffer.y,H=this.buffer.lines.get(w);if(!H)return;const U=Math.min(this.buffer.x,this.cols-1),$=this._renderService.dimensions.css.cell.height,re=H.getWidth(U),Y=this._renderService.dimensions.css.cell.width*re,oe=this.buffer.y*this._renderService.dimensions.css.cell.height,me=U*this._renderService.dimensions.css.cell.width;this.textarea.style.left=me+"px",this.textarea.style.top=oe+"px",this.textarea.style.width=Y+"px",this.textarea.style.height=$+"px",this.textarea.style.lineHeight=$+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this.register((0,f.addDisposableDomListener)(this.element,"copy",H=>{this.hasSelection()&&(0,l.copyHandler)(H,this._selectionService)}));const w=H=>(0,l.handlePasteEvent)(H,this.textarea,this.coreService,this.optionsService);this.register((0,f.addDisposableDomListener)(this.textarea,"paste",w)),this.register((0,f.addDisposableDomListener)(this.element,"paste",w)),W.isFirefox?this.register((0,f.addDisposableDomListener)(this.element,"mousedown",H=>{H.button===2&&(0,l.rightClickHandler)(H,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})):this.register((0,f.addDisposableDomListener)(this.element,"contextmenu",H=>{(0,l.rightClickHandler)(H,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})),W.isLinux&&this.register((0,f.addDisposableDomListener)(this.element,"auxclick",H=>{H.button===1&&(0,l.moveTextAreaUnderMouseCursor)(H,this.textarea,this.screenElement)}))}_bindKeys(){this.register((0,f.addDisposableDomListener)(this.textarea,"keyup",w=>this._keyUp(w),!0)),this.register((0,f.addDisposableDomListener)(this.textarea,"keydown",w=>this._keyDown(w),!0)),this.register((0,f.addDisposableDomListener)(this.textarea,"keypress",w=>this._keyPress(w),!0)),this.register((0,f.addDisposableDomListener)(this.textarea,"compositionstart",()=>this._compositionHelper.compositionstart())),this.register((0,f.addDisposableDomListener)(this.textarea,"compositionupdate",w=>this._compositionHelper.compositionupdate(w))),this.register((0,f.addDisposableDomListener)(this.textarea,"compositionend",()=>this._compositionHelper.compositionend())),this.register((0,f.addDisposableDomListener)(this.textarea,"input",w=>this._inputEvent(w),!0)),this.register(this.onRender(()=>this._compositionHelper.updateCompositionElements()))}open(w){var H;if(!w)throw new Error("Terminal requires a parent element.");w.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this._document=w.ownerDocument,this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),w.appendChild(this.element);const U=Z.createDocumentFragment();this._viewportElement=Z.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),U.appendChild(this._viewportElement),this._viewportScrollArea=Z.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=Z.createElement("div"),this.screenElement.classList.add("xterm-screen"),this._helperContainer=Z.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),U.appendChild(this.screenElement),this.textarea=Z.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",h.promptLabel),W.isChromeOS||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._coreBrowserService=this._instantiationService.createInstance(_.CoreBrowserService,this.textarea,(H=this._document.defaultView)!==null&&H!==void 0?H:window),this._instantiationService.setService(b.ICoreBrowserService,this._coreBrowserService),this.register((0,f.addDisposableDomListener)(this.textarea,"focus",$=>this._handleTextAreaFocus($))),this.register((0,f.addDisposableDomListener)(this.textarea,"blur",()=>this._handleTextAreaBlur())),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(i.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(b.ICharSizeService,this._charSizeService),this._themeService=this._instantiationService.createInstance(R.ThemeService),this._instantiationService.setService(b.IThemeService,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(c.CharacterJoinerService),this._instantiationService.setService(b.ICharacterJoinerService,this._characterJoinerService),this._renderService=this.register(this._instantiationService.createInstance(y.RenderService,this.rows,this.screenElement)),this._instantiationService.setService(b.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange($=>this._onRender.fire($))),this.onResize($=>this._renderService.resize($.cols,$.rows)),this._compositionView=Z.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(r.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this.element.appendChild(U);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this._mouseService=this._instantiationService.createInstance(S.MouseService),this._instantiationService.setService(b.IMouseService,this._mouseService),this.viewport=this._instantiationService.createInstance(m.Viewport,this._viewportElement,this._viewportScrollArea),this.viewport.onRequestScrollLines($=>this.scrollLines($.amount,$.suppressScrollEvent,1)),this.register(this._inputHandler.onRequestSyncScrollBar(()=>this.viewport.syncScrollArea())),this.register(this.viewport),this.register(this.onCursorMove(()=>{this._renderService.handleCursorMove(),this._syncTextArea()})),this.register(this.onResize(()=>this._renderService.handleResize(this.cols,this.rows))),this.register(this.onBlur(()=>this._renderService.handleBlur())),this.register(this.onFocus(()=>this._renderService.handleFocus())),this.register(this._renderService.onDimensionsChange(()=>this.viewport.syncScrollArea())),this._selectionService=this.register(this._instantiationService.createInstance(d.SelectionService,this.element,this.screenElement,this.linkifier2)),this._instantiationService.setService(b.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines($=>this.scrollLines($.amount,$.suppressScrollEvent))),this.register(this._selectionService.onSelectionChange(()=>this._onSelectionChange.fire())),this.register(this._selectionService.onRequestRedraw($=>this._renderService.handleSelectionChanged($.start,$.end,$.columnSelectMode))),this.register(this._selectionService.onLinuxMouseSelection($=>{this.textarea.value=$,this.textarea.focus(),this.textarea.select()})),this.register(this._onScroll.event($=>{this.viewport.syncScrollArea(),this._selectionService.refresh()})),this.register((0,f.addDisposableDomListener)(this._viewportElement,"scroll",()=>this._selectionService.refresh())),this.linkifier2.attachToDom(this.screenElement,this._mouseService,this._renderService),this.register(this._instantiationService.createInstance(v.BufferDecorationRenderer,this.screenElement)),this.register((0,f.addDisposableDomListener)(this.element,"mousedown",$=>this._selectionService.handleMouseDown($))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(G.AccessibilityManager,this)),this.register(this.optionsService.onSpecificOptionChange("screenReaderMode",$=>this._handleScreenReaderModeOptionChange($))),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(e.OverviewRulerRenderer,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRulerWidth",$=>{!this._overviewRulerRenderer&&$&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(e.OverviewRulerRenderer,this._viewportElement,this.screenElement)))}),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(t.DomRenderer,this.element,this.screenElement,this._viewportElement,this.linkifier2)}bindMouse(){const w=this,H=this.element;function U(Y){const oe=w._mouseService.getMouseReportCoords(Y,w.screenElement);if(!oe)return!1;let me,ke;switch(Y.overrideType||Y.type){case"mousemove":ke=32,Y.buttons===void 0?(me=3,Y.button!==void 0&&(me=Y.button<3?Y.button:3)):me=1&Y.buttons?0:4&Y.buttons?1:2&Y.buttons?2:3;break;case"mouseup":ke=0,me=Y.button<3?Y.button:3;break;case"mousedown":ke=1,me=Y.button<3?Y.button:3;break;case"wheel":if(w.viewport.getLinesScrolled(Y)===0)return!1;ke=Y.deltaY<0?0:1,me=4;break;default:return!1}return!(ke===void 0||me===void 0||me>4)&&w.coreMouseService.triggerMouseEvent({col:oe.col,row:oe.row,x:oe.x,y:oe.y,button:me,action:ke,ctrl:Y.ctrlKey,alt:Y.altKey,shift:Y.shiftKey})}const $={mouseup:null,wheel:null,mousedrag:null,mousemove:null},re={mouseup:Y=>(U(Y),Y.buttons||(this._document.removeEventListener("mouseup",$.mouseup),$.mousedrag&&this._document.removeEventListener("mousemove",$.mousedrag)),this.cancel(Y)),wheel:Y=>(U(Y),this.cancel(Y,!0)),mousedrag:Y=>{Y.buttons&&U(Y)},mousemove:Y=>{Y.buttons||U(Y)}};this.register(this.coreMouseService.onProtocolChange(Y=>{Y?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(Y)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),8&Y?$.mousemove||(H.addEventListener("mousemove",re.mousemove),$.mousemove=re.mousemove):(H.removeEventListener("mousemove",$.mousemove),$.mousemove=null),16&Y?$.wheel||(H.addEventListener("wheel",re.wheel,{passive:!1}),$.wheel=re.wheel):(H.removeEventListener("wheel",$.wheel),$.wheel=null),2&Y?$.mouseup||(H.addEventListener("mouseup",re.mouseup),$.mouseup=re.mouseup):(this._document.removeEventListener("mouseup",$.mouseup),H.removeEventListener("mouseup",$.mouseup),$.mouseup=null),4&Y?$.mousedrag||($.mousedrag=re.mousedrag):(this._document.removeEventListener("mousemove",$.mousedrag),$.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,f.addDisposableDomListener)(H,"mousedown",Y=>{if(Y.preventDefault(),this.focus(),this.coreMouseService.areMouseEventsActive&&!this._selectionService.shouldForceSelection(Y))return U(Y),$.mouseup&&this._document.addEventListener("mouseup",$.mouseup),$.mousedrag&&this._document.addEventListener("mousemove",$.mousedrag),this.cancel(Y)})),this.register((0,f.addDisposableDomListener)(H,"wheel",Y=>{if(!$.wheel){if(!this.buffer.hasScrollback){const oe=this.viewport.getLinesScrolled(Y);if(oe===0)return;const me=F.C0.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(Y.deltaY<0?"A":"B");let ke="";for(let Ie=0;Ie<Math.abs(oe);Ie++)ke+=me;return this.coreService.triggerDataEvent(ke,!0),this.cancel(Y,!0)}return this.viewport.handleWheel(Y)?this.cancel(Y):void 0}},{passive:!1})),this.register((0,f.addDisposableDomListener)(H,"touchstart",Y=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchStart(Y),this.cancel(Y)},{passive:!0})),this.register((0,f.addDisposableDomListener)(H,"touchmove",Y=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchMove(Y)?void 0:this.cancel(Y)},{passive:!1}))}refresh(w,H){var U;(U=this._renderService)===null||U===void 0||U.refreshRows(w,H)}updateCursorStyle(w){var H;!((H=this._selectionService)===null||H===void 0)&&H.shouldColumnSelect(w)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(w,H,U=0){var $;U===1?(super.scrollLines(w,H,U),this.refresh(0,this.rows-1)):($=this.viewport)===null||$===void 0||$.scrollLines(w)}paste(w){(0,l.paste)(w,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(w){this._customKeyEventHandler=w}registerLinkProvider(w){return this.linkifier2.registerLinkProvider(w)}registerCharacterJoiner(w){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");const H=this._characterJoinerService.register(w);return this.refresh(0,this.rows-1),H}deregisterCharacterJoiner(w){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(w)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(w){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+w)}registerDecoration(w){return this._decorationService.registerDecoration(w)}hasSelection(){return!!this._selectionService&&this._selectionService.hasSelection}select(w,H,U){this._selectionService.setSelection(w,H,U)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(this._selectionService&&this._selectionService.hasSelection)return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){var w;(w=this._selectionService)===null||w===void 0||w.clearSelection()}selectAll(){var w;(w=this._selectionService)===null||w===void 0||w.selectAll()}selectLines(w,H){var U;(U=this._selectionService)===null||U===void 0||U.selectLines(w,H)}_keyDown(w){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(w)===!1)return!1;const H=this.browser.isMac&&this.options.macOptionIsMeta&&w.altKey;if(!H&&!this._compositionHelper.keydown(w))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;H||w.key!=="Dead"&&w.key!=="AltGraph"||(this._unprocessedDeadKey=!0);const U=(0,C.evaluateKeyboardEvent)(w,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(w),U.type===3||U.type===2){const $=this.rows-1;return this.scrollLines(U.type===2?-$:$),this.cancel(w,!0)}return U.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,w)||(U.cancel&&this.cancel(w,!0),!U.key||!!(w.key&&!w.ctrlKey&&!w.altKey&&!w.metaKey&&w.key.length===1&&w.key.charCodeAt(0)>=65&&w.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(U.key!==F.C0.ETX&&U.key!==F.C0.CR||(this.textarea.value=""),this._onKey.fire({key:U.key,domEvent:w}),this._showCursor(),this.coreService.triggerDataEvent(U.key,!0),!this.optionsService.rawOptions.screenReaderMode||w.altKey||w.ctrlKey?this.cancel(w,!0):void(this._keyDownHandled=!0))))}_isThirdLevelShift(w,H){const U=w.isMac&&!this.options.macOptionIsMeta&&H.altKey&&!H.ctrlKey&&!H.metaKey||w.isWindows&&H.altKey&&H.ctrlKey&&!H.metaKey||w.isWindows&&H.getModifierState("AltGraph");return H.type==="keypress"?U:U&&(!H.keyCode||H.keyCode>47)}_keyUp(w){this._keyDownSeen=!1,this._customKeyEventHandler&&this._customKeyEventHandler(w)===!1||(function(H){return H.keyCode===16||H.keyCode===17||H.keyCode===18}(w)||this.focus(),this.updateCursorStyle(w),this._keyPressHandled=!1)}_keyPress(w){let H;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(w)===!1)return!1;if(this.cancel(w),w.charCode)H=w.charCode;else if(w.which===null||w.which===void 0)H=w.keyCode;else{if(w.which===0||w.charCode===0)return!1;H=w.which}return!(!H||(w.altKey||w.ctrlKey||w.metaKey)&&!this._isThirdLevelShift(this.browser,w)||(H=String.fromCharCode(H),this._onKey.fire({key:H,domEvent:w}),this._showCursor(),this.coreService.triggerDataEvent(H,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))}_inputEvent(w){if(w.data&&w.inputType==="insertText"&&(!w.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;const H=w.data;return this.coreService.triggerDataEvent(H,!0),this.cancel(w),!0}return!1}resize(w,H){w!==this.cols||H!==this.rows?super.resize(w,H):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()}_afterResize(w,H){var U,$;(U=this._charSizeService)===null||U===void 0||U.measure(),($=this.viewport)===null||$===void 0||$.syncScrollArea(!0)}clear(){var w;if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let H=1;H<this.rows;H++)this.buffer.lines.push(this.buffer.getBlankLine(q.DEFAULT_ATTR_DATA));this._onScroll.fire({position:this.buffer.ydisp,source:0}),(w=this.viewport)===null||w===void 0||w.reset(),this.refresh(0,this.rows-1)}}reset(){var w,H;this.options.rows=this.rows,this.options.cols=this.cols;const U=this._customKeyEventHandler;this._setup(),super.reset(),(w=this._selectionService)===null||w===void 0||w.reset(),this._decorationService.reset(),(H=this.viewport)===null||H===void 0||H.reset(),this._customKeyEventHandler=U,this.refresh(0,this.rows-1)}clearTextureAtlas(){var w;(w=this._renderService)===null||w===void 0||w.clearTextureAtlas()}_reportFocus(){var w;!((w=this.element)===null||w===void 0)&&w.classList.contains("focus")?this.coreService.triggerDataEvent(F.C0.ESC+"[I"):this.coreService.triggerDataEvent(F.C0.ESC+"[O")}_reportWindowsOptions(w){if(this._renderService)switch(w){case K.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:const H=this._renderService.dimensions.css.canvas.width.toFixed(0),U=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${F.C0.ESC}[4;${U};${H}t`);break;case K.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:const $=this._renderService.dimensions.css.cell.width.toFixed(0),re=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${F.C0.ESC}[6;${re};${$}t`)}}cancel(w,H){if(this.options.cancelEvents||H)return w.preventDefault(),w.stopPropagation(),!1}}s.Terminal=Q},9924:(D,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.TimeBasedDebouncer=void 0,s.TimeBasedDebouncer=class{constructor(a,l=1e3){this._renderCallback=a,this._debounceThresholdMS=l,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(a,l,f){this._rowCount=f,a=a!==void 0?a:0,l=l!==void 0?l:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,a):a,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,l):l;const o=Date.now();if(o-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=o,this._innerRefresh();else if(!this._additionalRefreshRequested){const h=o-this._lastRefreshMs,p=this._debounceThresholdMS-h;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(()=>{this._lastRefreshMs=Date.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0},p)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;const a=Math.max(this._rowStart,0),l=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(a,l)}}},1680:function(D,s,a){var l=this&&this.__decorate||function(r,t,i,c){var _,S=arguments.length,y=S<3?t:c===null?c=Object.getOwnPropertyDescriptor(t,i):c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(r,t,i,c);else for(var d=r.length-1;d>=0;d--)(_=r[d])&&(y=(S<3?_(y):S>3?_(t,i,y):_(t,i))||y);return S>3&&y&&Object.defineProperty(t,i,y),y},f=this&&this.__param||function(r,t){return function(i,c){t(i,c,r)}};Object.defineProperty(s,"__esModule",{value:!0}),s.Viewport=void 0;const o=a(3656),h=a(4725),p=a(8460),m=a(844),v=a(2585);let e=s.Viewport=class extends m.Disposable{constructor(r,t,i,c,_,S,y,d){super(),this._viewportElement=r,this._scrollArea=t,this._bufferService=i,this._optionsService=c,this._charSizeService=_,this._renderService=S,this._coreBrowserService=y,this.scrollBarWidth=0,this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._wheelPartialScroll=0,this._refreshAnimationFrame=null,this._ignoreNextScrollEvent=!1,this._smoothScrollState={startTime:0,origin:-1,target:-1},this._onRequestScrollLines=this.register(new p.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this.register((0,o.addDisposableDomListener)(this._viewportElement,"scroll",this._handleScroll.bind(this))),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(b=>this._activeBuffer=b.activeBuffer)),this._renderDimensions=this._renderService.dimensions,this.register(this._renderService.onDimensionsChange(b=>this._renderDimensions=b)),this._handleThemeChange(d.colors),this.register(d.onChangeColors(b=>this._handleThemeChange(b))),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.syncScrollArea())),setTimeout(()=>this.syncScrollArea())}_handleThemeChange(r){this._viewportElement.style.backgroundColor=r.background.css}reset(){this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._coreBrowserService.window.requestAnimationFrame(()=>this.syncScrollArea())}_refresh(r){if(r)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&this._coreBrowserService.window.cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderService.dimensions.device.cell.height/this._coreBrowserService.dpr,this._currentDeviceCellHeight=this._renderService.dimensions.device.cell.height,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;const t=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderService.dimensions.css.canvas.height);this._lastRecordedBufferHeight!==t&&(this._lastRecordedBufferHeight=t,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}const r=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==r&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=r),this._refreshAnimationFrame=null}syncScrollArea(r=!1){if(this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(r);this._lastRecordedViewportHeight===this._renderService.dimensions.css.canvas.height&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.device.cell.height===this._currentDeviceCellHeight||this._refresh(r)}_handleScroll(r){if(this._lastScrollTop=this._viewportElement.scrollTop,!this._viewportElement.offsetParent)return;if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._onRequestScrollLines.fire({amount:0,suppressScrollEvent:!0});const t=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._onRequestScrollLines.fire({amount:t,suppressScrollEvent:!0})}_smoothScroll(){if(this._isDisposed||this._smoothScrollState.origin===-1||this._smoothScrollState.target===-1)return;const r=this._smoothScrollPercent();this._viewportElement.scrollTop=this._smoothScrollState.origin+Math.round(r*(this._smoothScrollState.target-this._smoothScrollState.origin)),r<1?this._coreBrowserService.window.requestAnimationFrame(()=>this._smoothScroll()):this._clearSmoothScrollState()}_smoothScrollPercent(){return this._optionsService.rawOptions.smoothScrollDuration&&this._smoothScrollState.startTime?Math.max(Math.min((Date.now()-this._smoothScrollState.startTime)/this._optionsService.rawOptions.smoothScrollDuration,1),0):1}_clearSmoothScrollState(){this._smoothScrollState.startTime=0,this._smoothScrollState.origin=-1,this._smoothScrollState.target=-1}_bubbleScroll(r,t){const i=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(t<0&&this._viewportElement.scrollTop!==0||t>0&&i<this._lastRecordedBufferHeight)||(r.cancelable&&r.preventDefault(),!1)}handleWheel(r){const t=this._getPixelsScrolled(r);return t!==0&&(this._optionsService.rawOptions.smoothScrollDuration?(this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target===-1?this._smoothScrollState.target=this._viewportElement.scrollTop+t:this._smoothScrollState.target+=t,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()):this._viewportElement.scrollTop+=t,this._bubbleScroll(r,t))}scrollLines(r){if(r!==0)if(this._optionsService.rawOptions.smoothScrollDuration){const t=r*this._currentRowHeight;this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target=this._smoothScrollState.origin+t,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()}else this._onRequestScrollLines.fire({amount:r,suppressScrollEvent:!1})}_getPixelsScrolled(r){if(r.deltaY===0||r.shiftKey)return 0;let t=this._applyScrollModifier(r.deltaY,r);return r.deltaMode===WheelEvent.DOM_DELTA_LINE?t*=this._currentRowHeight:r.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(t*=this._currentRowHeight*this._bufferService.rows),t}getBufferElements(r,t){var i;let c,_="";const S=[],y=t??this._bufferService.buffer.lines.length,d=this._bufferService.buffer.lines;for(let b=r;b<y;b++){const R=d.get(b);if(!R)continue;const O=(i=d.get(b+1))===null||i===void 0?void 0:i.isWrapped;if(_+=R.translateToString(!O),!O||b===d.length-1){const A=document.createElement("div");A.textContent=_,S.push(A),_.length>0&&(c=A),_=""}}return{bufferElements:S,cursorElement:c}}getLinesScrolled(r){if(r.deltaY===0||r.shiftKey)return 0;let t=this._applyScrollModifier(r.deltaY,r);return r.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(t/=this._currentRowHeight+0,this._wheelPartialScroll+=t,t=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):r.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(t*=this._bufferService.rows),t}_applyScrollModifier(r,t){const i=this._optionsService.rawOptions.fastScrollModifier;return i==="alt"&&t.altKey||i==="ctrl"&&t.ctrlKey||i==="shift"&&t.shiftKey?r*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:r*this._optionsService.rawOptions.scrollSensitivity}handleTouchStart(r){this._lastTouchY=r.touches[0].pageY}handleTouchMove(r){const t=this._lastTouchY-r.touches[0].pageY;return this._lastTouchY=r.touches[0].pageY,t!==0&&(this._viewportElement.scrollTop+=t,this._bubbleScroll(r,t))}};s.Viewport=e=l([f(2,v.IBufferService),f(3,v.IOptionsService),f(4,h.ICharSizeService),f(5,h.IRenderService),f(6,h.ICoreBrowserService),f(7,h.IThemeService)],e)},3107:function(D,s,a){var l=this&&this.__decorate||function(e,r,t,i){var c,_=arguments.length,S=_<3?r:i===null?i=Object.getOwnPropertyDescriptor(r,t):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(e,r,t,i);else for(var y=e.length-1;y>=0;y--)(c=e[y])&&(S=(_<3?c(S):_>3?c(r,t,S):c(r,t))||S);return _>3&&S&&Object.defineProperty(r,t,S),S},f=this&&this.__param||function(e,r){return function(t,i){r(t,i,e)}};Object.defineProperty(s,"__esModule",{value:!0}),s.BufferDecorationRenderer=void 0;const o=a(3656),h=a(4725),p=a(844),m=a(2585);let v=s.BufferDecorationRenderer=class extends p.Disposable{constructor(e,r,t,i){super(),this._screenElement=e,this._bufferService=r,this._decorationService=t,this._renderService=i,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this.register(this._renderService.onRenderedViewportChange(()=>this._doRefreshDecorations())),this.register(this._renderService.onDimensionsChange(()=>{this._dimensionsChanged=!0,this._queueRefresh()})),this.register((0,o.addDisposableDomListener)(window,"resize",()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt})),this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh())),this.register(this._decorationService.onDecorationRemoved(c=>this._removeDecoration(c))),this.register((0,p.toDisposable)(()=>{this._container.remove(),this._decorationElements.clear()}))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback(()=>{this._doRefreshDecorations(),this._animationFrame=void 0}))}_doRefreshDecorations(){for(const e of this._decorationService.decorations)this._renderDecoration(e);this._dimensionsChanged=!1}_renderDecoration(e){this._refreshStyle(e),this._dimensionsChanged&&this._refreshXPosition(e)}_createElement(e){var r,t;const i=document.createElement("div");i.classList.add("xterm-decoration"),i.classList.toggle("xterm-decoration-top-layer",((r=e==null?void 0:e.options)===null||r===void 0?void 0:r.layer)==="top"),i.style.width=`${Math.round((e.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,i.style.height=(e.options.height||1)*this._renderService.dimensions.css.cell.height+"px",i.style.top=(e.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height+"px",i.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;const c=(t=e.options.x)!==null&&t!==void 0?t:0;return c&&c>this._bufferService.cols&&(i.style.display="none"),this._refreshXPosition(e,i),i}_refreshStyle(e){const r=e.marker.line-this._bufferService.buffers.active.ydisp;if(r<0||r>=this._bufferService.rows)e.element&&(e.element.style.display="none",e.onRenderEmitter.fire(e.element));else{let t=this._decorationElements.get(e);t||(t=this._createElement(e),e.element=t,this._decorationElements.set(e,t),this._container.appendChild(t),e.onDispose(()=>{this._decorationElements.delete(e),t.remove()})),t.style.top=r*this._renderService.dimensions.css.cell.height+"px",t.style.display=this._altBufferIsActive?"none":"block",e.onRenderEmitter.fire(t)}}_refreshXPosition(e,r=e.element){var t;if(!r)return;const i=(t=e.options.x)!==null&&t!==void 0?t:0;(e.options.anchor||"left")==="right"?r.style.right=i?i*this._renderService.dimensions.css.cell.width+"px":"":r.style.left=i?i*this._renderService.dimensions.css.cell.width+"px":""}_removeDecoration(e){var r;(r=this._decorationElements.get(e))===null||r===void 0||r.remove(),this._decorationElements.delete(e),e.dispose()}};s.BufferDecorationRenderer=v=l([f(1,m.IBufferService),f(2,m.IDecorationService),f(3,h.IRenderService)],v)},5871:(D,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ColorZoneStore=void 0,s.ColorZoneStore=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(a){if(a.options.overviewRulerOptions){for(const l of this._zones)if(l.color===a.options.overviewRulerOptions.color&&l.position===a.options.overviewRulerOptions.position){if(this._lineIntersectsZone(l,a.marker.line))return;if(this._lineAdjacentToZone(l,a.marker.line,a.options.overviewRulerOptions.position))return void this._addLineToZone(l,a.marker.line)}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=a.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=a.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=a.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=a.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:a.options.overviewRulerOptions.color,position:a.options.overviewRulerOptions.position,startBufferLine:a.marker.line,endBufferLine:a.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(a){this._linePadding=a}_lineIntersectsZone(a,l){return l>=a.startBufferLine&&l<=a.endBufferLine}_lineAdjacentToZone(a,l,f){return l>=a.startBufferLine-this._linePadding[f||"full"]&&l<=a.endBufferLine+this._linePadding[f||"full"]}_addLineToZone(a,l){a.startBufferLine=Math.min(a.startBufferLine,l),a.endBufferLine=Math.max(a.endBufferLine,l)}}},5744:function(D,s,a){var l=this&&this.__decorate||function(c,_,S,y){var d,b=arguments.length,R=b<3?_:y===null?y=Object.getOwnPropertyDescriptor(_,S):y;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")R=Reflect.decorate(c,_,S,y);else for(var O=c.length-1;O>=0;O--)(d=c[O])&&(R=(b<3?d(R):b>3?d(_,S,R):d(_,S))||R);return b>3&&R&&Object.defineProperty(_,S,R),R},f=this&&this.__param||function(c,_){return function(S,y){_(S,y,c)}};Object.defineProperty(s,"__esModule",{value:!0}),s.OverviewRulerRenderer=void 0;const o=a(5871),h=a(3656),p=a(4725),m=a(844),v=a(2585),e={full:0,left:0,center:0,right:0},r={full:0,left:0,center:0,right:0},t={full:0,left:0,center:0,right:0};let i=s.OverviewRulerRenderer=class extends m.Disposable{get _width(){return this._optionsService.options.overviewRulerWidth||0}constructor(c,_,S,y,d,b,R){var O;super(),this._viewportElement=c,this._screenElement=_,this._bufferService=S,this._decorationService=y,this._renderService=d,this._optionsService=b,this._coreBrowseService=R,this._colorZoneStore=new o.ColorZoneStore,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=document.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),(O=this._viewportElement.parentElement)===null||O===void 0||O.insertBefore(this._canvas,this._viewportElement);const A=this._canvas.getContext("2d");if(!A)throw new Error("Ctx cannot be null");this._ctx=A,this._registerDecorationListeners(),this._registerBufferChangeListeners(),this._registerDimensionChangeListeners(),this.register((0,m.toDisposable)(()=>{var M;(M=this._canvas)===null||M===void 0||M.remove()}))}_registerDecorationListeners(){this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh(void 0,!0))),this.register(this._decorationService.onDecorationRemoved(()=>this._queueRefresh(void 0,!0)))}_registerBufferChangeListeners(){this.register(this._renderService.onRenderedViewportChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"})),this.register(this._bufferService.onScroll(()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())}))}_registerDimensionChangeListeners(){this.register(this._renderService.onRender(()=>{this._containerHeight&&this._containerHeight===this._screenElement.clientHeight||(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)})),this.register(this._optionsService.onSpecificOptionChange("overviewRulerWidth",()=>this._queueRefresh(!0))),this.register((0,h.addDisposableDomListener)(this._coreBrowseService.window,"resize",()=>this._queueRefresh(!0))),this._queueRefresh(!0)}_refreshDrawConstants(){const c=Math.floor(this._canvas.width/3),_=Math.ceil(this._canvas.width/3);r.full=this._canvas.width,r.left=c,r.center=_,r.right=c,this._refreshDrawHeightConstants(),t.full=0,t.left=0,t.center=r.left,t.right=r.left+r.center}_refreshDrawHeightConstants(){e.full=Math.round(2*this._coreBrowseService.dpr);const c=this._canvas.height/this._bufferService.buffer.lines.length,_=Math.round(Math.max(Math.min(c,12),6)*this._coreBrowseService.dpr);e.left=_,e.center=_,e.right=_}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*e.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*e.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*e.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*e.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowseService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowseService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(const _ of this._decorationService.decorations)this._colorZoneStore.addDecoration(_);this._ctx.lineWidth=1;const c=this._colorZoneStore.zones;for(const _ of c)_.position!=="full"&&this._renderColorZone(_);for(const _ of c)_.position==="full"&&this._renderColorZone(_);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderColorZone(c){this._ctx.fillStyle=c.color,this._ctx.fillRect(t[c.position||"full"],Math.round((this._canvas.height-1)*(c.startBufferLine/this._bufferService.buffers.active.lines.length)-e[c.position||"full"]/2),r[c.position||"full"],Math.round((this._canvas.height-1)*((c.endBufferLine-c.startBufferLine)/this._bufferService.buffers.active.lines.length)+e[c.position||"full"]))}_queueRefresh(c,_){this._shouldUpdateDimensions=c||this._shouldUpdateDimensions,this._shouldUpdateAnchor=_||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowseService.window.requestAnimationFrame(()=>{this._refreshDecorations(),this._animationFrame=void 0}))}};s.OverviewRulerRenderer=i=l([f(2,v.IBufferService),f(3,v.IDecorationService),f(4,p.IRenderService),f(5,v.IOptionsService),f(6,p.ICoreBrowserService)],i)},2950:function(D,s,a){var l=this&&this.__decorate||function(v,e,r,t){var i,c=arguments.length,_=c<3?e:t===null?t=Object.getOwnPropertyDescriptor(e,r):t;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")_=Reflect.decorate(v,e,r,t);else for(var S=v.length-1;S>=0;S--)(i=v[S])&&(_=(c<3?i(_):c>3?i(e,r,_):i(e,r))||_);return c>3&&_&&Object.defineProperty(e,r,_),_},f=this&&this.__param||function(v,e){return function(r,t){e(r,t,v)}};Object.defineProperty(s,"__esModule",{value:!0}),s.CompositionHelper=void 0;const o=a(4725),h=a(2585),p=a(2584);let m=s.CompositionHelper=class{get isComposing(){return this._isComposing}constructor(v,e,r,t,i,c){this._textarea=v,this._compositionView=e,this._bufferService=r,this._optionsService=t,this._coreService=i,this._renderService=c,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(v){this._compositionView.textContent=v.data,this.updateCompositionElements(),setTimeout(()=>{this._compositionPosition.end=this._textarea.value.length},0)}compositionend(){this._finalizeComposition(!0)}keydown(v){if(this._isComposing||this._isSendingComposition){if(v.keyCode===229||v.keyCode===16||v.keyCode===17||v.keyCode===18)return!1;this._finalizeComposition(!1)}return v.keyCode!==229||(this._handleAnyTextareaChanges(),!1)}_finalizeComposition(v){if(this._compositionView.classList.remove("active"),this._isComposing=!1,v){const e={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(()=>{if(this._isSendingComposition){let r;this._isSendingComposition=!1,e.start+=this._dataAlreadySent.length,r=this._isComposing?this._textarea.value.substring(e.start,e.end):this._textarea.value.substring(e.start),r.length>0&&this._coreService.triggerDataEvent(r,!0)}},0)}else{this._isSendingComposition=!1;const e=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(e,!0)}}_handleAnyTextareaChanges(){const v=this._textarea.value;setTimeout(()=>{if(!this._isComposing){const e=this._textarea.value,r=e.replace(v,"");this._dataAlreadySent=r,e.length>v.length?this._coreService.triggerDataEvent(r,!0):e.length<v.length?this._coreService.triggerDataEvent(`${p.C0.DEL}`,!0):e.length===v.length&&e!==v&&this._coreService.triggerDataEvent(e,!0)}},0)}updateCompositionElements(v){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){const e=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),r=this._renderService.dimensions.css.cell.height,t=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,i=e*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=i+"px",this._compositionView.style.top=t+"px",this._compositionView.style.height=r+"px",this._compositionView.style.lineHeight=r+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";const c=this._compositionView.getBoundingClientRect();this._textarea.style.left=i+"px",this._textarea.style.top=t+"px",this._textarea.style.width=Math.max(c.width,1)+"px",this._textarea.style.height=Math.max(c.height,1)+"px",this._textarea.style.lineHeight=c.height+"px"}v||setTimeout(()=>this.updateCompositionElements(!0),0)}}};s.CompositionHelper=m=l([f(2,h.IBufferService),f(3,h.IOptionsService),f(4,h.ICoreService),f(5,o.IRenderService)],m)},9806:(D,s)=>{function a(l,f,o){const h=o.getBoundingClientRect(),p=l.getComputedStyle(o),m=parseInt(p.getPropertyValue("padding-left")),v=parseInt(p.getPropertyValue("padding-top"));return[f.clientX-h.left-m,f.clientY-h.top-v]}Object.defineProperty(s,"__esModule",{value:!0}),s.getCoords=s.getCoordsRelativeToElement=void 0,s.getCoordsRelativeToElement=a,s.getCoords=function(l,f,o,h,p,m,v,e,r){if(!m)return;const t=a(l,f,o);return t?(t[0]=Math.ceil((t[0]+(r?v/2:0))/v),t[1]=Math.ceil(t[1]/e),t[0]=Math.min(Math.max(t[0],1),h+(r?1:0)),t[1]=Math.min(Math.max(t[1],1),p),t):void 0}},9504:(D,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.moveToCellSequence=void 0;const l=a(2584);function f(e,r,t,i){const c=e-o(e,t),_=r-o(r,t),S=Math.abs(c-_)-function(y,d,b){let R=0;const O=y-o(y,b),A=d-o(d,b);for(let M=0;M<Math.abs(O-A);M++){const z=h(y,d)==="A"?-1:1,W=b.buffer.lines.get(O+z*M);W!=null&&W.isWrapped&&R++}return R}(e,r,t);return v(S,m(h(e,r),i))}function o(e,r){let t=0,i=r.buffer.lines.get(e),c=i==null?void 0:i.isWrapped;for(;c&&e>=0&&e<r.rows;)t++,i=r.buffer.lines.get(--e),c=i==null?void 0:i.isWrapped;return t}function h(e,r){return e>r?"A":"B"}function p(e,r,t,i,c,_){let S=e,y=r,d="";for(;S!==t||y!==i;)S+=c?1:-1,c&&S>_.cols-1?(d+=_.buffer.translateBufferLineToString(y,!1,e,S),S=0,e=0,y++):!c&&S<0&&(d+=_.buffer.translateBufferLineToString(y,!1,0,e+1),S=_.cols-1,e=S,y--);return d+_.buffer.translateBufferLineToString(y,!1,e,S)}function m(e,r){const t=r?"O":"[";return l.C0.ESC+t+e}function v(e,r){e=Math.floor(e);let t="";for(let i=0;i<e;i++)t+=r;return t}s.moveToCellSequence=function(e,r,t,i){const c=t.buffer.x,_=t.buffer.y;if(!t.buffer.hasScrollback)return function(d,b,R,O,A,M){return f(b,O,A,M).length===0?"":v(p(d,b,d,b-o(b,A),!1,A).length,m("D",M))}(c,_,0,r,t,i)+f(_,r,t,i)+function(d,b,R,O,A,M){let z;z=f(b,O,A,M).length>0?O-o(O,A):b;const W=O,q=function(F,C,L,T,P,K){let G;return G=f(L,T,P,K).length>0?T-o(T,P):C,F<L&&G<=T||F>=L&&G<T?"C":"D"}(d,b,R,O,A,M);return v(p(d,z,R,W,q==="C",A).length,m(q,M))}(c,_,e,r,t,i);let S;if(_===r)return S=c>e?"D":"C",v(Math.abs(c-e),m(S,i));S=_>r?"D":"C";const y=Math.abs(_-r);return v(function(d,b){return b.cols-d}(_>r?e:c,t)+(y-1)*t.cols+1+((_>r?c:e)-1),m(S,i))}},1296:function(D,s,a){var l=this&&this.__decorate||function(A,M,z,W){var q,F=arguments.length,C=F<3?M:W===null?W=Object.getOwnPropertyDescriptor(M,z):W;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(A,M,z,W);else for(var L=A.length-1;L>=0;L--)(q=A[L])&&(C=(F<3?q(C):F>3?q(M,z,C):q(M,z))||C);return F>3&&C&&Object.defineProperty(M,z,C),C},f=this&&this.__param||function(A,M){return function(z,W){M(z,W,A)}};Object.defineProperty(s,"__esModule",{value:!0}),s.DomRenderer=void 0;const o=a(3787),h=a(2550),p=a(2223),m=a(6171),v=a(4725),e=a(8055),r=a(8460),t=a(844),i=a(2585),c="xterm-dom-renderer-owner-",_="xterm-rows",S="xterm-fg-",y="xterm-bg-",d="xterm-focus",b="xterm-selection";let R=1,O=s.DomRenderer=class extends t.Disposable{constructor(A,M,z,W,q,F,C,L,T,P){super(),this._element=A,this._screenElement=M,this._viewportElement=z,this._linkifier2=W,this._charSizeService=F,this._optionsService=C,this._bufferService=L,this._coreBrowserService=T,this._themeService=P,this._terminalClass=R++,this._rowElements=[],this.onRequestRedraw=this.register(new r.EventEmitter).event,this._rowContainer=document.createElement("div"),this._rowContainer.classList.add(_),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=document.createElement("div"),this._selectionContainer.classList.add(b),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=(0,m.createRenderDimensions)(),this._updateDimensions(),this.register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._themeService.onChangeColors(K=>this._injectCss(K))),this._injectCss(this._themeService.colors),this._rowFactory=q.createInstance(o.DomRendererRowFactory,document),this._element.classList.add(c+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this.register(this._linkifier2.onShowLinkUnderline(K=>this._handleLinkHover(K))),this.register(this._linkifier2.onHideLinkUnderline(K=>this._handleLinkLeave(K))),this.register((0,t.toDisposable)(()=>{this._element.classList.remove(c+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()})),this._widthCache=new h.WidthCache(document),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){const A=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*A,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*A),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/A),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/A),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(const z of this._rowElements)z.style.width=`${this.dimensions.css.canvas.width}px`,z.style.height=`${this.dimensions.css.cell.height}px`,z.style.lineHeight=`${this.dimensions.css.cell.height}px`,z.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));const M=`${this._terminalSelector} .${_} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=M,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(A){this._themeStyleElement||(this._themeStyleElement=document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let M=`${this._terminalSelector} .${_} { color: ${A.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;M+=`${this._terminalSelector} .${_} .xterm-dim { color: ${e.color.multiplyOpacity(A.foreground,.5).css};}`,M+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`,M+="@keyframes blink_box_shadow_"+this._terminalClass+" { 50% {  border-bottom-style: hidden; }}",M+="@keyframes blink_block_"+this._terminalClass+` { 0% {  background-color: ${A.cursor.css};  color: ${A.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${A.cursor.css}; }}`,M+=`${this._terminalSelector} .${_}.${d} .xterm-cursor.xterm-cursor-blink:not(.xterm-cursor-block) { animation: blink_box_shadow_`+this._terminalClass+` 1s step-end infinite;}${this._terminalSelector} .${_}.${d} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: blink_block_`+this._terminalClass+` 1s step-end infinite;}${this._terminalSelector} .${_} .xterm-cursor.xterm-cursor-block { background-color: ${A.cursor.css}; color: ${A.cursorAccent.css};}${this._terminalSelector} .${_} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${A.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${_} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${A.cursor.css} inset;}${this._terminalSelector} .${_} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${A.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,M+=`${this._terminalSelector} .${b} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${b} div { position: absolute; background-color: ${A.selectionBackgroundOpaque.css};}${this._terminalSelector} .${b} div { position: absolute; background-color: ${A.selectionInactiveBackgroundOpaque.css};}`;for(const[z,W]of A.ansi.entries())M+=`${this._terminalSelector} .${S}${z} { color: ${W.css}; }${this._terminalSelector} .${S}${z}.xterm-dim { color: ${e.color.multiplyOpacity(W,.5).css}; }${this._terminalSelector} .${y}${z} { background-color: ${W.css}; }`;M+=`${this._terminalSelector} .${S}${p.INVERTED_DEFAULT_COLOR} { color: ${e.color.opaque(A.background).css}; }${this._terminalSelector} .${S}${p.INVERTED_DEFAULT_COLOR}.xterm-dim { color: ${e.color.multiplyOpacity(e.color.opaque(A.background),.5).css}; }${this._terminalSelector} .${y}${p.INVERTED_DEFAULT_COLOR} { background-color: ${A.foreground.css}; }`,this._themeStyleElement.textContent=M}_setDefaultSpacing(){const A=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${A}px`,this._rowFactory.defaultSpacing=A}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(A,M){for(let z=this._rowElements.length;z<=M;z++){const W=document.createElement("div");this._rowContainer.appendChild(W),this._rowElements.push(W)}for(;this._rowElements.length>M;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(A,M){this._refreshRowElements(A,M),this._updateDimensions()}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(d)}handleFocus(){this._rowContainer.classList.add(d),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(A,M,z){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(A,M,z),this.renderRows(0,this._bufferService.rows-1),!A||!M)return;const W=A[1]-this._bufferService.buffer.ydisp,q=M[1]-this._bufferService.buffer.ydisp,F=Math.max(W,0),C=Math.min(q,this._bufferService.rows-1);if(F>=this._bufferService.rows||C<0)return;const L=document.createDocumentFragment();if(z){const T=A[0]>M[0];L.appendChild(this._createSelectionElement(F,T?M[0]:A[0],T?A[0]:M[0],C-F+1))}else{const T=W===F?A[0]:0,P=F===q?M[0]:this._bufferService.cols;L.appendChild(this._createSelectionElement(F,T,P));const K=C-F-1;if(L.appendChild(this._createSelectionElement(F+1,0,this._bufferService.cols,K)),F!==C){const G=q===C?M[0]:this._bufferService.cols;L.appendChild(this._createSelectionElement(C,0,G))}}this._selectionContainer.appendChild(L)}_createSelectionElement(A,M,z,W=1){const q=document.createElement("div");return q.style.height=W*this.dimensions.css.cell.height+"px",q.style.top=A*this.dimensions.css.cell.height+"px",q.style.left=M*this.dimensions.css.cell.width+"px",q.style.width=this.dimensions.css.cell.width*(z-M)+"px",q}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(const A of this._rowElements)A.replaceChildren()}renderRows(A,M){const z=this._bufferService.buffer,W=z.ybase+z.y,q=Math.min(z.x,this._bufferService.cols-1),F=this._optionsService.rawOptions.cursorBlink,C=this._optionsService.rawOptions.cursorStyle,L=this._optionsService.rawOptions.cursorInactiveStyle;for(let T=A;T<=M;T++){const P=T+z.ydisp,K=this._rowElements[T],G=z.lines.get(P);if(!K||!G)break;K.replaceChildren(...this._rowFactory.createRow(G,P,P===W,C,L,q,F,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${c}${this._terminalClass}`}_handleLinkHover(A){this._setCellUnderline(A.x1,A.x2,A.y1,A.y2,A.cols,!0)}_handleLinkLeave(A){this._setCellUnderline(A.x1,A.x2,A.y1,A.y2,A.cols,!1)}_setCellUnderline(A,M,z,W,q,F){z<0&&(A=0),W<0&&(M=0);const C=this._bufferService.rows-1;z=Math.max(Math.min(z,C),0),W=Math.max(Math.min(W,C),0),q=Math.min(q,this._bufferService.cols);const L=this._bufferService.buffer,T=L.ybase+L.y,P=Math.min(L.x,q-1),K=this._optionsService.rawOptions.cursorBlink,G=this._optionsService.rawOptions.cursorStyle,Z=this._optionsService.rawOptions.cursorInactiveStyle;for(let Q=z;Q<=W;++Q){const ae=Q+L.ydisp,w=this._rowElements[Q],H=L.lines.get(ae);if(!w||!H)break;w.replaceChildren(...this._rowFactory.createRow(H,ae,ae===T,G,Z,P,K,this.dimensions.css.cell.width,this._widthCache,F?Q===z?A:0:-1,F?(Q===W?M:q)-1:-1))}}};s.DomRenderer=O=l([f(4,i.IInstantiationService),f(5,v.ICharSizeService),f(6,i.IOptionsService),f(7,i.IBufferService),f(8,v.ICoreBrowserService),f(9,v.IThemeService)],O)},3787:function(D,s,a){var l=this&&this.__decorate||function(S,y,d,b){var R,O=arguments.length,A=O<3?y:b===null?b=Object.getOwnPropertyDescriptor(y,d):b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")A=Reflect.decorate(S,y,d,b);else for(var M=S.length-1;M>=0;M--)(R=S[M])&&(A=(O<3?R(A):O>3?R(y,d,A):R(y,d))||A);return O>3&&A&&Object.defineProperty(y,d,A),A},f=this&&this.__param||function(S,y){return function(d,b){y(d,b,S)}};Object.defineProperty(s,"__esModule",{value:!0}),s.DomRendererRowFactory=void 0;const o=a(2223),h=a(643),p=a(511),m=a(2585),v=a(8055),e=a(4725),r=a(4269),t=a(6171),i=a(3734);let c=s.DomRendererRowFactory=class{constructor(S,y,d,b,R,O,A){this._document=S,this._characterJoinerService=y,this._optionsService=d,this._coreBrowserService=b,this._coreService=R,this._decorationService=O,this._themeService=A,this._workCell=new p.CellData,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(S,y,d){this._selectionStart=S,this._selectionEnd=y,this._columnSelectMode=d}createRow(S,y,d,b,R,O,A,M,z,W,q){const F=[],C=this._characterJoinerService.getJoinedCharacters(y),L=this._themeService.colors;let T,P=S.getNoBgTrimmedLength();d&&P<O+1&&(P=O+1);let K=0,G="",Z=0,Q=0,ae=0,w=!1,H=0,U=!1,$=0;const re=[],Y=W!==-1&&q!==-1;for(let oe=0;oe<P;oe++){S.loadCell(oe,this._workCell);let me=this._workCell.getWidth();if(me===0)continue;let ke=!1,Ie=oe,ne=this._workCell;if(C.length>0&&oe===C[0][0]){ke=!0;const we=C.shift();ne=new r.JoinedCellData(this._workCell,S.translateToString(!0,we[0],we[1]),we[1]-we[0]),Ie=we[1]-1,me=ne.getWidth()}const _t=this._isCellInSelection(oe,y),st=d&&oe===O,bt=Y&&oe>=W&&oe<=q;let Xt=!1;this._decorationService.forEachDecorationAtCell(oe,y,void 0,we=>{Xt=!0});let Dt=ne.getChars()||h.WHITESPACE_CELL_CHAR;if(Dt===" "&&(ne.isUnderline()||ne.isOverline())&&(Dt=" "),$=me*M-z.get(Dt,ne.isBold(),ne.isItalic()),T){if(K&&(_t&&U||!_t&&!U&&ne.bg===Z)&&(_t&&U&&L.selectionForeground||ne.fg===Q)&&ne.extended.ext===ae&&bt===w&&$===H&&!st&&!ke&&!Xt){G+=Dt,K++;continue}K&&(T.textContent=G),T=this._document.createElement("span"),K=0,G=""}else T=this._document.createElement("span");if(Z=ne.bg,Q=ne.fg,ae=ne.extended.ext,w=bt,H=$,U=_t,ke&&O>=oe&&O<=Ie&&(O=oe),!this._coreService.isCursorHidden&&st){if(re.push("xterm-cursor"),this._coreBrowserService.isFocused)A&&re.push("xterm-cursor-blink"),re.push(b==="bar"?"xterm-cursor-bar":b==="underline"?"xterm-cursor-underline":"xterm-cursor-block");else if(R)switch(R){case"outline":re.push("xterm-cursor-outline");break;case"block":re.push("xterm-cursor-block");break;case"bar":re.push("xterm-cursor-bar");break;case"underline":re.push("xterm-cursor-underline")}}if(ne.isBold()&&re.push("xterm-bold"),ne.isItalic()&&re.push("xterm-italic"),ne.isDim()&&re.push("xterm-dim"),G=ne.isInvisible()?h.WHITESPACE_CELL_CHAR:ne.getChars()||h.WHITESPACE_CELL_CHAR,ne.isUnderline()&&(re.push(`xterm-underline-${ne.extended.underlineStyle}`),G===" "&&(G=" "),!ne.isUnderlineColorDefault()))if(ne.isUnderlineColorRGB())T.style.textDecorationColor=`rgb(${i.AttributeData.toColorRGB(ne.getUnderlineColor()).join(",")})`;else{let we=ne.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&ne.isBold()&&we<8&&(we+=8),T.style.textDecorationColor=L.ansi[we].css}ne.isOverline()&&(re.push("xterm-overline"),G===" "&&(G=" ")),ne.isStrikethrough()&&re.push("xterm-strikethrough"),bt&&(T.style.textDecoration="underline");let He=ne.getFgColor(),Rt=ne.getFgColorMode(),Ke=ne.getBgColor(),Ct=ne.getBgColorMode();const Zt=!!ne.isInverse();if(Zt){const we=He;He=Ke,Ke=we;const Ii=Rt;Rt=Ct,Ct=Ii}let nt,Pt,ot,At=!1;switch(this._decorationService.forEachDecorationAtCell(oe,y,void 0,we=>{we.options.layer!=="top"&&At||(we.backgroundColorRGB&&(Ct=50331648,Ke=we.backgroundColorRGB.rgba>>8&16777215,nt=we.backgroundColorRGB),we.foregroundColorRGB&&(Rt=50331648,He=we.foregroundColorRGB.rgba>>8&16777215,Pt=we.foregroundColorRGB),At=we.options.layer==="top")}),!At&&_t&&(nt=this._coreBrowserService.isFocused?L.selectionBackgroundOpaque:L.selectionInactiveBackgroundOpaque,Ke=nt.rgba>>8&16777215,Ct=50331648,At=!0,L.selectionForeground&&(Rt=50331648,He=L.selectionForeground.rgba>>8&16777215,Pt=L.selectionForeground)),At&&re.push("xterm-decoration-top"),Ct){case 16777216:case 33554432:ot=L.ansi[Ke],re.push(`xterm-bg-${Ke}`);break;case 50331648:ot=v.rgba.toColor(Ke>>16,Ke>>8&255,255&Ke),this._addStyle(T,`background-color:#${_((Ke>>>0).toString(16),"0",6)}`);break;default:Zt?(ot=L.foreground,re.push(`xterm-bg-${o.INVERTED_DEFAULT_COLOR}`)):ot=L.background}switch(nt||ne.isDim()&&(nt=v.color.multiplyOpacity(ot,.5)),Rt){case 16777216:case 33554432:ne.isBold()&&He<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(He+=8),this._applyMinimumContrast(T,ot,L.ansi[He],ne,nt,void 0)||re.push(`xterm-fg-${He}`);break;case 50331648:const we=v.rgba.toColor(He>>16&255,He>>8&255,255&He);this._applyMinimumContrast(T,ot,we,ne,nt,Pt)||this._addStyle(T,`color:#${_(He.toString(16),"0",6)}`);break;default:this._applyMinimumContrast(T,ot,L.foreground,ne,nt,void 0)||Zt&&re.push(`xterm-fg-${o.INVERTED_DEFAULT_COLOR}`)}re.length&&(T.className=re.join(" "),re.length=0),st||ke||Xt?T.textContent=G:K++,$!==this.defaultSpacing&&(T.style.letterSpacing=`${$}px`),F.push(T),oe=Ie}return T&&K&&(T.textContent=G),F}_applyMinimumContrast(S,y,d,b,R,O){if(this._optionsService.rawOptions.minimumContrastRatio===1||(0,t.excludeFromContrastRatioDemands)(b.getCode()))return!1;const A=this._getContrastCache(b);let M;if(R||O||(M=A.getColor(y.rgba,d.rgba)),M===void 0){const z=this._optionsService.rawOptions.minimumContrastRatio/(b.isDim()?2:1);M=v.color.ensureContrastRatio(R||y,O||d,z),A.setColor((R||y).rgba,(O||d).rgba,M??null)}return!!M&&(this._addStyle(S,`color:${M.css}`),!0)}_getContrastCache(S){return S.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(S,y){S.setAttribute("style",`${S.getAttribute("style")||""}${y};`)}_isCellInSelection(S,y){const d=this._selectionStart,b=this._selectionEnd;return!(!d||!b)&&(this._columnSelectMode?d[0]<=b[0]?S>=d[0]&&y>=d[1]&&S<b[0]&&y<=b[1]:S<d[0]&&y>=d[1]&&S>=b[0]&&y<=b[1]:y>d[1]&&y<b[1]||d[1]===b[1]&&y===d[1]&&S>=d[0]&&S<b[0]||d[1]<b[1]&&y===b[1]&&S<b[0]||d[1]<b[1]&&y===d[1]&&S>=d[0])}};function _(S,y,d){for(;S.length<d;)S=y+S;return S}s.DomRendererRowFactory=c=l([f(1,e.ICharacterJoinerService),f(2,m.IOptionsService),f(3,e.ICoreBrowserService),f(4,m.ICoreService),f(5,m.IDecorationService),f(6,e.IThemeService)],c)},2550:(D,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.WidthCache=void 0,s.WidthCache=class{constructor(a){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=a.createElement("div"),this._container.style.position="absolute",this._container.style.top="-50000px",this._container.style.width="50000px",this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";const l=a.createElement("span"),f=a.createElement("span");f.style.fontWeight="bold";const o=a.createElement("span");o.style.fontStyle="italic";const h=a.createElement("span");h.style.fontWeight="bold",h.style.fontStyle="italic",this._measureElements=[l,f,o,h],this._container.appendChild(l),this._container.appendChild(f),this._container.appendChild(o),this._container.appendChild(h),a.body.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(a,l,f,o){a===this._font&&l===this._fontSize&&f===this._weight&&o===this._weightBold||(this._font=a,this._fontSize=l,this._weight=f,this._weightBold=o,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${f}`,this._measureElements[1].style.fontWeight=`${o}`,this._measureElements[2].style.fontWeight=`${f}`,this._measureElements[3].style.fontWeight=`${o}`,this.clear())}get(a,l,f){let o=0;if(!l&&!f&&a.length===1&&(o=a.charCodeAt(0))<256)return this._flat[o]!==-9999?this._flat[o]:this._flat[o]=this._measure(a,0);let h=a;l&&(h+="B"),f&&(h+="I");let p=this._holey.get(h);if(p===void 0){let m=0;l&&(m|=1),f&&(m|=2),p=this._measure(a,m),this._holey.set(h,p)}return p}_measure(a,l){const f=this._measureElements[l];return f.textContent=a.repeat(32),f.offsetWidth/32}}},2223:(D,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.TEXT_BASELINE=s.DIM_OPACITY=s.INVERTED_DEFAULT_COLOR=void 0;const l=a(6114);s.INVERTED_DEFAULT_COLOR=257,s.DIM_OPACITY=.5,s.TEXT_BASELINE=l.isFirefox||l.isLegacyEdge?"bottom":"ideographic"},6171:(D,s)=>{function a(l){return 57508<=l&&l<=57558}Object.defineProperty(s,"__esModule",{value:!0}),s.createRenderDimensions=s.excludeFromContrastRatioDemands=s.isRestrictedPowerlineGlyph=s.isPowerlineGlyph=s.throwIfFalsy=void 0,s.throwIfFalsy=function(l){if(!l)throw new Error("value must not be falsy");return l},s.isPowerlineGlyph=a,s.isRestrictedPowerlineGlyph=function(l){return 57520<=l&&l<=57527},s.excludeFromContrastRatioDemands=function(l){return a(l)||function(f){return 9472<=f&&f<=9631}(l)},s.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}}},456:(D,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.SelectionModel=void 0,s.SelectionModel=class{constructor(a){this._bufferService=a,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){const a=this.selectionStart[0]+this.selectionStartLength;return a>this._bufferService.cols?a%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(a/this._bufferService.cols)-1]:[a%this._bufferService.cols,this.selectionStart[1]+Math.floor(a/this._bufferService.cols)]:[a,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){const a=this.selectionStart[0]+this.selectionStartLength;return a>this._bufferService.cols?[a%this._bufferService.cols,this.selectionStart[1]+Math.floor(a/this._bufferService.cols)]:[Math.max(a,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){const a=this.selectionStart,l=this.selectionEnd;return!(!a||!l)&&(a[1]>l[1]||a[1]===l[1]&&a[0]>l[0])}handleTrim(a){return this.selectionStart&&(this.selectionStart[1]-=a),this.selectionEnd&&(this.selectionEnd[1]-=a),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}}},428:function(D,s,a){var l=this&&this.__decorate||function(e,r,t,i){var c,_=arguments.length,S=_<3?r:i===null?i=Object.getOwnPropertyDescriptor(r,t):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(e,r,t,i);else for(var y=e.length-1;y>=0;y--)(c=e[y])&&(S=(_<3?c(S):_>3?c(r,t,S):c(r,t))||S);return _>3&&S&&Object.defineProperty(r,t,S),S},f=this&&this.__param||function(e,r){return function(t,i){r(t,i,e)}};Object.defineProperty(s,"__esModule",{value:!0}),s.CharSizeService=void 0;const o=a(2585),h=a(8460),p=a(844);let m=s.CharSizeService=class extends p.Disposable{get hasValidSize(){return this.width>0&&this.height>0}constructor(e,r,t){super(),this._optionsService=t,this.width=0,this.height=0,this._onCharSizeChange=this.register(new h.EventEmitter),this.onCharSizeChange=this._onCharSizeChange.event,this._measureStrategy=new v(e,r,this._optionsService),this.register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],()=>this.measure()))}measure(){const e=this._measureStrategy.measure();e.width===this.width&&e.height===this.height||(this.width=e.width,this.height=e.height,this._onCharSizeChange.fire())}};s.CharSizeService=m=l([f(2,o.IOptionsService)],m);class v{constructor(r,t,i){this._document=r,this._parentElement=t,this._optionsService=i,this._result={width:0,height:0},this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`;const r={height:Number(this._measureElement.offsetHeight),width:Number(this._measureElement.offsetWidth)};return r.width!==0&&r.height!==0&&(this._result.width=r.width/32,this._result.height=Math.ceil(r.height)),this._result}}},4269:function(D,s,a){var l=this&&this.__decorate||function(r,t,i,c){var _,S=arguments.length,y=S<3?t:c===null?c=Object.getOwnPropertyDescriptor(t,i):c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(r,t,i,c);else for(var d=r.length-1;d>=0;d--)(_=r[d])&&(y=(S<3?_(y):S>3?_(t,i,y):_(t,i))||y);return S>3&&y&&Object.defineProperty(t,i,y),y},f=this&&this.__param||function(r,t){return function(i,c){t(i,c,r)}};Object.defineProperty(s,"__esModule",{value:!0}),s.CharacterJoinerService=s.JoinedCellData=void 0;const o=a(3734),h=a(643),p=a(511),m=a(2585);class v extends o.AttributeData{constructor(t,i,c){super(),this.content=0,this.combinedData="",this.fg=t.fg,this.bg=t.bg,this.combinedData=i,this._width=c}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(t){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}s.JoinedCellData=v;let e=s.CharacterJoinerService=class Es{constructor(t){this._bufferService=t,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new p.CellData}register(t){const i={id:this._nextCharacterJoinerId++,handler:t};return this._characterJoiners.push(i),i.id}deregister(t){for(let i=0;i<this._characterJoiners.length;i++)if(this._characterJoiners[i].id===t)return this._characterJoiners.splice(i,1),!0;return!1}getJoinedCharacters(t){if(this._characterJoiners.length===0)return[];const i=this._bufferService.buffer.lines.get(t);if(!i||i.length===0)return[];const c=[],_=i.translateToString(!0);let S=0,y=0,d=0,b=i.getFg(0),R=i.getBg(0);for(let O=0;O<i.getTrimmedLength();O++)if(i.loadCell(O,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==b||this._workCell.bg!==R){if(O-S>1){const A=this._getJoinedRanges(_,d,y,i,S);for(let M=0;M<A.length;M++)c.push(A[M])}S=O,d=y,b=this._workCell.fg,R=this._workCell.bg}y+=this._workCell.getChars().length||h.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-S>1){const O=this._getJoinedRanges(_,d,y,i,S);for(let A=0;A<O.length;A++)c.push(O[A])}return c}_getJoinedRanges(t,i,c,_,S){const y=t.substring(i,c);let d=[];try{d=this._characterJoiners[0].handler(y)}catch(b){console.error(b)}for(let b=1;b<this._characterJoiners.length;b++)try{const R=this._characterJoiners[b].handler(y);for(let O=0;O<R.length;O++)Es._mergeRanges(d,R[O])}catch(R){console.error(R)}return this._stringRangesToCellRanges(d,_,S),d}_stringRangesToCellRanges(t,i,c){let _=0,S=!1,y=0,d=t[_];if(d){for(let b=c;b<this._bufferService.cols;b++){const R=i.getWidth(b),O=i.getString(b).length||h.WHITESPACE_CELL_CHAR.length;if(R!==0){if(!S&&d[0]<=y&&(d[0]=b,S=!0),d[1]<=y){if(d[1]=b,d=t[++_],!d)break;d[0]<=y?(d[0]=b,S=!0):S=!1}y+=O}}d&&(d[1]=this._bufferService.cols)}}static _mergeRanges(t,i){let c=!1;for(let _=0;_<t.length;_++){const S=t[_];if(c){if(i[1]<=S[0])return t[_-1][1]=i[1],t;if(i[1]<=S[1])return t[_-1][1]=Math.max(i[1],S[1]),t.splice(_,1),t;t.splice(_,1),_--}else{if(i[1]<=S[0])return t.splice(_,0,i),t;if(i[1]<=S[1])return S[0]=Math.min(i[0],S[0]),t;i[0]<S[1]&&(S[0]=Math.min(i[0],S[0]),c=!0)}}return c?t[t.length-1][1]=i[1]:t.push(i),t}};s.CharacterJoinerService=e=l([f(0,m.IBufferService)],e)},5114:(D,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CoreBrowserService=void 0,s.CoreBrowserService=class{constructor(a,l){this._textarea=a,this.window=l,this._isFocused=!1,this._cachedIsFocused=void 0,this._textarea.addEventListener("focus",()=>this._isFocused=!0),this._textarea.addEventListener("blur",()=>this._isFocused=!1)}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask(()=>this._cachedIsFocused=void 0)),this._cachedIsFocused}}},8934:function(D,s,a){var l=this&&this.__decorate||function(m,v,e,r){var t,i=arguments.length,c=i<3?v:r===null?r=Object.getOwnPropertyDescriptor(v,e):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(m,v,e,r);else for(var _=m.length-1;_>=0;_--)(t=m[_])&&(c=(i<3?t(c):i>3?t(v,e,c):t(v,e))||c);return i>3&&c&&Object.defineProperty(v,e,c),c},f=this&&this.__param||function(m,v){return function(e,r){v(e,r,m)}};Object.defineProperty(s,"__esModule",{value:!0}),s.MouseService=void 0;const o=a(4725),h=a(9806);let p=s.MouseService=class{constructor(m,v){this._renderService=m,this._charSizeService=v}getCoords(m,v,e,r,t){return(0,h.getCoords)(window,m,v,e,r,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,t)}getMouseReportCoords(m,v){const e=(0,h.getCoordsRelativeToElement)(window,m,v);if(this._charSizeService.hasValidSize)return e[0]=Math.min(Math.max(e[0],0),this._renderService.dimensions.css.canvas.width-1),e[1]=Math.min(Math.max(e[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(e[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(e[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(e[0]),y:Math.floor(e[1])}}};s.MouseService=p=l([f(0,o.IRenderService),f(1,o.ICharSizeService)],p)},3230:function(D,s,a){var l=this&&this.__decorate||function(c,_,S,y){var d,b=arguments.length,R=b<3?_:y===null?y=Object.getOwnPropertyDescriptor(_,S):y;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")R=Reflect.decorate(c,_,S,y);else for(var O=c.length-1;O>=0;O--)(d=c[O])&&(R=(b<3?d(R):b>3?d(_,S,R):d(_,S))||R);return b>3&&R&&Object.defineProperty(_,S,R),R},f=this&&this.__param||function(c,_){return function(S,y){_(S,y,c)}};Object.defineProperty(s,"__esModule",{value:!0}),s.RenderService=void 0;const o=a(3656),h=a(6193),p=a(5596),m=a(4725),v=a(8460),e=a(844),r=a(7226),t=a(2585);let i=s.RenderService=class extends e.Disposable{get dimensions(){return this._renderer.value.dimensions}constructor(c,_,S,y,d,b,R,O){if(super(),this._rowCount=c,this._charSizeService=y,this._renderer=this.register(new e.MutableDisposable),this._pausedResizeTask=new r.DebouncedIdleTask,this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this.register(new v.EventEmitter),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this.register(new v.EventEmitter),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this.register(new v.EventEmitter),this.onRender=this._onRender.event,this._onRefreshRequest=this.register(new v.EventEmitter),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new h.RenderDebouncer(R.window,(A,M)=>this._renderRows(A,M)),this.register(this._renderDebouncer),this._screenDprMonitor=new p.ScreenDprMonitor(R.window),this._screenDprMonitor.setListener(()=>this.handleDevicePixelRatioChange()),this.register(this._screenDprMonitor),this.register(b.onResize(()=>this._fullRefresh())),this.register(b.buffers.onBufferActivate(()=>{var A;return(A=this._renderer.value)===null||A===void 0?void 0:A.clear()})),this.register(S.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._charSizeService.onCharSizeChange(()=>this.handleCharSizeChanged())),this.register(d.onDecorationRegistered(()=>this._fullRefresh())),this.register(d.onDecorationRemoved(()=>this._fullRefresh())),this.register(S.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio"],()=>{this.clear(),this.handleResize(b.cols,b.rows),this._fullRefresh()})),this.register(S.onMultipleOptionChange(["cursorBlink","cursorStyle"],()=>this.refreshRows(b.buffer.y,b.buffer.y,!0))),this.register((0,o.addDisposableDomListener)(R.window,"resize",()=>this.handleDevicePixelRatioChange())),this.register(O.onChangeColors(()=>this._fullRefresh())),"IntersectionObserver"in R.window){const A=new R.window.IntersectionObserver(M=>this._handleIntersectionChange(M[M.length-1]),{threshold:0});A.observe(_),this.register({dispose:()=>A.disconnect()})}}_handleIntersectionChange(c){this._isPaused=c.isIntersecting===void 0?c.intersectionRatio===0:!c.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(c,_,S=!1){this._isPaused?this._needsFullRefresh=!0:(S||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(c,_,this._rowCount))}_renderRows(c,_){this._renderer.value&&(c=Math.min(c,this._rowCount-1),_=Math.min(_,this._rowCount-1),this._renderer.value.renderRows(c,_),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:c,end:_}),this._onRender.fire({start:c,end:_}),this._isNextRenderRedrawOnly=!0)}resize(c,_){this._rowCount=_,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(c){this._renderer.value=c,this._renderer.value.onRequestRedraw(_=>this.refreshRows(_.start,_.end,!0)),this._needsSelectionRefresh=!0,this._fullRefresh()}addRefreshCallback(c){return this._renderDebouncer.addRefreshCallback(c)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){var c,_;this._renderer.value&&((_=(c=this._renderer.value).clearTextureAtlas)===null||_===void 0||_.call(c),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(c,_){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set(()=>this._renderer.value.handleResize(c,_)):this._renderer.value.handleResize(c,_),this._fullRefresh())}handleCharSizeChanged(){var c;(c=this._renderer.value)===null||c===void 0||c.handleCharSizeChanged()}handleBlur(){var c;(c=this._renderer.value)===null||c===void 0||c.handleBlur()}handleFocus(){var c;(c=this._renderer.value)===null||c===void 0||c.handleFocus()}handleSelectionChanged(c,_,S){var y;this._selectionState.start=c,this._selectionState.end=_,this._selectionState.columnSelectMode=S,(y=this._renderer.value)===null||y===void 0||y.handleSelectionChanged(c,_,S)}handleCursorMove(){var c;(c=this._renderer.value)===null||c===void 0||c.handleCursorMove()}clear(){var c;(c=this._renderer.value)===null||c===void 0||c.clear()}};s.RenderService=i=l([f(2,t.IOptionsService),f(3,m.ICharSizeService),f(4,t.IDecorationService),f(5,t.IBufferService),f(6,m.ICoreBrowserService),f(7,m.IThemeService)],i)},9312:function(D,s,a){var l=this&&this.__decorate||function(d,b,R,O){var A,M=arguments.length,z=M<3?b:O===null?O=Object.getOwnPropertyDescriptor(b,R):O;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")z=Reflect.decorate(d,b,R,O);else for(var W=d.length-1;W>=0;W--)(A=d[W])&&(z=(M<3?A(z):M>3?A(b,R,z):A(b,R))||z);return M>3&&z&&Object.defineProperty(b,R,z),z},f=this&&this.__param||function(d,b){return function(R,O){b(R,O,d)}};Object.defineProperty(s,"__esModule",{value:!0}),s.SelectionService=void 0;const o=a(9806),h=a(9504),p=a(456),m=a(4725),v=a(8460),e=a(844),r=a(6114),t=a(4841),i=a(511),c=a(2585),_=" ",S=new RegExp(_,"g");let y=s.SelectionService=class extends e.Disposable{constructor(d,b,R,O,A,M,z,W,q){super(),this._element=d,this._screenElement=b,this._linkifier=R,this._bufferService=O,this._coreService=A,this._mouseService=M,this._optionsService=z,this._renderService=W,this._coreBrowserService=q,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new i.CellData,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this.register(new v.EventEmitter),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this.register(new v.EventEmitter),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this.register(new v.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this.register(new v.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=F=>this._handleMouseMove(F),this._mouseUpListener=F=>this._handleMouseUp(F),this._coreService.onUserInput(()=>{this.hasSelection&&this.clearSelection()}),this._trimListener=this._bufferService.buffer.lines.onTrim(F=>this._handleTrim(F)),this.register(this._bufferService.buffers.onBufferActivate(F=>this._handleBufferActivate(F))),this.enable(),this._model=new p.SelectionModel(this._bufferService),this._activeSelectionMode=0,this.register((0,e.toDisposable)(()=>{this._removeMouseDownListeners()}))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){const d=this._model.finalSelectionStart,b=this._model.finalSelectionEnd;return!(!d||!b||d[0]===b[0]&&d[1]===b[1])}get selectionText(){const d=this._model.finalSelectionStart,b=this._model.finalSelectionEnd;if(!d||!b)return"";const R=this._bufferService.buffer,O=[];if(this._activeSelectionMode===3){if(d[0]===b[0])return"";const A=d[0]<b[0]?d[0]:b[0],M=d[0]<b[0]?b[0]:d[0];for(let z=d[1];z<=b[1];z++){const W=R.translateBufferLineToString(z,!0,A,M);O.push(W)}}else{const A=d[1]===b[1]?b[0]:void 0;O.push(R.translateBufferLineToString(d[1],!0,d[0],A));for(let M=d[1]+1;M<=b[1]-1;M++){const z=R.lines.get(M),W=R.translateBufferLineToString(M,!0);z!=null&&z.isWrapped?O[O.length-1]+=W:O.push(W)}if(d[1]!==b[1]){const M=R.lines.get(b[1]),z=R.translateBufferLineToString(b[1],!0,0,b[0]);M&&M.isWrapped?O[O.length-1]+=z:O.push(z)}}return O.map(A=>A.replace(S," ")).join(r.isWindows?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(d){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._refresh())),r.isLinux&&d&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(d){const b=this._getMouseBufferCoords(d),R=this._model.finalSelectionStart,O=this._model.finalSelectionEnd;return!!(R&&O&&b)&&this._areCoordsInSelection(b,R,O)}isCellInSelection(d,b){const R=this._model.finalSelectionStart,O=this._model.finalSelectionEnd;return!(!R||!O)&&this._areCoordsInSelection([d,b],R,O)}_areCoordsInSelection(d,b,R){return d[1]>b[1]&&d[1]<R[1]||b[1]===R[1]&&d[1]===b[1]&&d[0]>=b[0]&&d[0]<R[0]||b[1]<R[1]&&d[1]===R[1]&&d[0]<R[0]||b[1]<R[1]&&d[1]===b[1]&&d[0]>=b[0]}_selectWordAtCursor(d,b){var R,O;const A=(O=(R=this._linkifier.currentLink)===null||R===void 0?void 0:R.link)===null||O===void 0?void 0:O.range;if(A)return this._model.selectionStart=[A.start.x-1,A.start.y-1],this._model.selectionStartLength=(0,t.getRangeLength)(A,this._bufferService.cols),this._model.selectionEnd=void 0,!0;const M=this._getMouseBufferCoords(d);return!!M&&(this._selectWordAt(M,b),this._model.selectionEnd=void 0,!0)}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(d,b){this._model.clearSelection(),d=Math.max(d,0),b=Math.min(b,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,d],this._model.selectionEnd=[this._bufferService.cols,b],this.refresh(),this._onSelectionChange.fire()}_handleTrim(d){this._model.handleTrim(d)&&this.refresh()}_getMouseBufferCoords(d){const b=this._mouseService.getCoords(d,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(b)return b[0]--,b[1]--,b[1]+=this._bufferService.buffer.ydisp,b}_getMouseEventScrollAmount(d){let b=(0,o.getCoordsRelativeToElement)(this._coreBrowserService.window,d,this._screenElement)[1];const R=this._renderService.dimensions.css.canvas.height;return b>=0&&b<=R?0:(b>R&&(b-=R),b=Math.min(Math.max(b,-50),50),b/=50,b/Math.abs(b)+Math.round(14*b))}shouldForceSelection(d){return r.isMac?d.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:d.shiftKey}handleMouseDown(d){if(this._mouseDownTimeStamp=d.timeStamp,(d.button!==2||!this.hasSelection)&&d.button===0){if(!this._enabled){if(!this.shouldForceSelection(d))return;d.stopPropagation()}d.preventDefault(),this._dragScrollAmount=0,this._enabled&&d.shiftKey?this._handleIncrementalClick(d):d.detail===1?this._handleSingleClick(d):d.detail===2?this._handleDoubleClick(d):d.detail===3&&this._handleTripleClick(d),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval(()=>this._dragScroll(),50)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(d){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(d))}_handleSingleClick(d){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(d)?3:0,this._model.selectionStart=this._getMouseBufferCoords(d),!this._model.selectionStart)return;this._model.selectionEnd=void 0;const b=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);b&&b.length!==this._model.selectionStart[0]&&b.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(d){this._selectWordAtCursor(d,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(d){const b=this._getMouseBufferCoords(d);b&&(this._activeSelectionMode=2,this._selectLineAt(b[1]))}shouldColumnSelect(d){return d.altKey&&!(r.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(d){if(d.stopImmediatePropagation(),!this._model.selectionStart)return;const b=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(d),!this._model.selectionEnd)return void this.refresh(!0);this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(d),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));const R=this._bufferService.buffer;if(this._model.selectionEnd[1]<R.lines.length){const O=R.lines.get(this._model.selectionEnd[1]);O&&O.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]++}b&&b[0]===this._model.selectionEnd[0]&&b[1]===this._model.selectionEnd[1]||this.refresh(!0)}_dragScroll(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});const d=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(d.ydisp+this._bufferService.rows,d.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=d.ydisp),this.refresh()}}_handleMouseUp(d){const b=d.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&b<500&&d.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){const R=this._mouseService.getCoords(d,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(R&&R[0]!==void 0&&R[1]!==void 0){const O=(0,h.moveToCellSequence)(R[0]-1,R[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(O,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){const d=this._model.finalSelectionStart,b=this._model.finalSelectionEnd,R=!(!d||!b||d[0]===b[0]&&d[1]===b[1]);R?d&&b&&(this._oldSelectionStart&&this._oldSelectionEnd&&d[0]===this._oldSelectionStart[0]&&d[1]===this._oldSelectionStart[1]&&b[0]===this._oldSelectionEnd[0]&&b[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(d,b,R)):this._oldHasSelection&&this._fireOnSelectionChange(d,b,R)}_fireOnSelectionChange(d,b,R){this._oldSelectionStart=d,this._oldSelectionEnd=b,this._oldHasSelection=R,this._onSelectionChange.fire()}_handleBufferActivate(d){this.clearSelection(),this._trimListener.dispose(),this._trimListener=d.activeBuffer.lines.onTrim(b=>this._handleTrim(b))}_convertViewportColToCharacterIndex(d,b){let R=b;for(let O=0;b>=O;O++){const A=d.loadCell(O,this._workCell).getChars().length;this._workCell.getWidth()===0?R--:A>1&&b!==O&&(R+=A-1)}return R}setSelection(d,b,R){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[d,b],this._model.selectionStartLength=R,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(d){this._isClickInSelection(d)||(this._selectWordAtCursor(d,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(d,b,R=!0,O=!0){if(d[0]>=this._bufferService.cols)return;const A=this._bufferService.buffer,M=A.lines.get(d[1]);if(!M)return;const z=A.translateBufferLineToString(d[1],!1);let W=this._convertViewportColToCharacterIndex(M,d[0]),q=W;const F=d[0]-W;let C=0,L=0,T=0,P=0;if(z.charAt(W)===" "){for(;W>0&&z.charAt(W-1)===" ";)W--;for(;q<z.length&&z.charAt(q+1)===" ";)q++}else{let Z=d[0],Q=d[0];M.getWidth(Z)===0&&(C++,Z--),M.getWidth(Q)===2&&(L++,Q++);const ae=M.getString(Q).length;for(ae>1&&(P+=ae-1,q+=ae-1);Z>0&&W>0&&!this._isCharWordSeparator(M.loadCell(Z-1,this._workCell));){M.loadCell(Z-1,this._workCell);const w=this._workCell.getChars().length;this._workCell.getWidth()===0?(C++,Z--):w>1&&(T+=w-1,W-=w-1),W--,Z--}for(;Q<M.length&&q+1<z.length&&!this._isCharWordSeparator(M.loadCell(Q+1,this._workCell));){M.loadCell(Q+1,this._workCell);const w=this._workCell.getChars().length;this._workCell.getWidth()===2?(L++,Q++):w>1&&(P+=w-1,q+=w-1),q++,Q++}}q++;let K=W+F-C+T,G=Math.min(this._bufferService.cols,q-W+C+L-T-P);if(b||z.slice(W,q).trim()!==""){if(R&&K===0&&M.getCodePoint(0)!==32){const Z=A.lines.get(d[1]-1);if(Z&&M.isWrapped&&Z.getCodePoint(this._bufferService.cols-1)!==32){const Q=this._getWordAt([this._bufferService.cols-1,d[1]-1],!1,!0,!1);if(Q){const ae=this._bufferService.cols-Q.start;K-=ae,G+=ae}}}if(O&&K+G===this._bufferService.cols&&M.getCodePoint(this._bufferService.cols-1)!==32){const Z=A.lines.get(d[1]+1);if(Z!=null&&Z.isWrapped&&Z.getCodePoint(0)!==32){const Q=this._getWordAt([0,d[1]+1],!1,!1,!0);Q&&(G+=Q.length)}}return{start:K,length:G}}}_selectWordAt(d,b){const R=this._getWordAt(d,b);if(R){for(;R.start<0;)R.start+=this._bufferService.cols,d[1]--;this._model.selectionStart=[R.start,d[1]],this._model.selectionStartLength=R.length}}_selectToWordAt(d){const b=this._getWordAt(d,!0);if(b){let R=d[1];for(;b.start<0;)b.start+=this._bufferService.cols,R--;if(!this._model.areSelectionValuesReversed())for(;b.start+b.length>this._bufferService.cols;)b.length-=this._bufferService.cols,R++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?b.start:b.start+b.length,R]}}_isCharWordSeparator(d){return d.getWidth()!==0&&this._optionsService.rawOptions.wordSeparator.indexOf(d.getChars())>=0}_selectLineAt(d){const b=this._bufferService.buffer.getWrappedRangeForLine(d),R={start:{x:0,y:b.first},end:{x:this._bufferService.cols-1,y:b.last}};this._model.selectionStart=[0,b.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,t.getRangeLength)(R,this._bufferService.cols)}};s.SelectionService=y=l([f(3,c.IBufferService),f(4,c.ICoreService),f(5,m.IMouseService),f(6,c.IOptionsService),f(7,m.IRenderService),f(8,m.ICoreBrowserService)],y)},4725:(D,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.IThemeService=s.ICharacterJoinerService=s.ISelectionService=s.IRenderService=s.IMouseService=s.ICoreBrowserService=s.ICharSizeService=void 0;const l=a(8343);s.ICharSizeService=(0,l.createDecorator)("CharSizeService"),s.ICoreBrowserService=(0,l.createDecorator)("CoreBrowserService"),s.IMouseService=(0,l.createDecorator)("MouseService"),s.IRenderService=(0,l.createDecorator)("RenderService"),s.ISelectionService=(0,l.createDecorator)("SelectionService"),s.ICharacterJoinerService=(0,l.createDecorator)("CharacterJoinerService"),s.IThemeService=(0,l.createDecorator)("ThemeService")},6731:function(D,s,a){var l=this&&this.__decorate||function(y,d,b,R){var O,A=arguments.length,M=A<3?d:R===null?R=Object.getOwnPropertyDescriptor(d,b):R;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")M=Reflect.decorate(y,d,b,R);else for(var z=y.length-1;z>=0;z--)(O=y[z])&&(M=(A<3?O(M):A>3?O(d,b,M):O(d,b))||M);return A>3&&M&&Object.defineProperty(d,b,M),M},f=this&&this.__param||function(y,d){return function(b,R){d(b,R,y)}};Object.defineProperty(s,"__esModule",{value:!0}),s.ThemeService=s.DEFAULT_ANSI_COLORS=void 0;const o=a(7239),h=a(8055),p=a(8460),m=a(844),v=a(2585),e=h.css.toColor("#ffffff"),r=h.css.toColor("#000000"),t=h.css.toColor("#ffffff"),i=h.css.toColor("#000000"),c={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};s.DEFAULT_ANSI_COLORS=Object.freeze((()=>{const y=[h.css.toColor("#2e3436"),h.css.toColor("#cc0000"),h.css.toColor("#4e9a06"),h.css.toColor("#c4a000"),h.css.toColor("#3465a4"),h.css.toColor("#75507b"),h.css.toColor("#06989a"),h.css.toColor("#d3d7cf"),h.css.toColor("#555753"),h.css.toColor("#ef2929"),h.css.toColor("#8ae234"),h.css.toColor("#fce94f"),h.css.toColor("#729fcf"),h.css.toColor("#ad7fa8"),h.css.toColor("#34e2e2"),h.css.toColor("#eeeeec")],d=[0,95,135,175,215,255];for(let b=0;b<216;b++){const R=d[b/36%6|0],O=d[b/6%6|0],A=d[b%6];y.push({css:h.channels.toCss(R,O,A),rgba:h.channels.toRgba(R,O,A)})}for(let b=0;b<24;b++){const R=8+10*b;y.push({css:h.channels.toCss(R,R,R),rgba:h.channels.toRgba(R,R,R)})}return y})());let _=s.ThemeService=class extends m.Disposable{get colors(){return this._colors}constructor(y){super(),this._optionsService=y,this._contrastCache=new o.ColorContrastCache,this._halfContrastCache=new o.ColorContrastCache,this._onChangeColors=this.register(new p.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:e,background:r,cursor:t,cursorAccent:i,selectionForeground:void 0,selectionBackgroundTransparent:c,selectionBackgroundOpaque:h.color.blend(r,c),selectionInactiveBackgroundTransparent:c,selectionInactiveBackgroundOpaque:h.color.blend(r,c),ansi:s.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",()=>this._contrastCache.clear())),this.register(this._optionsService.onSpecificOptionChange("theme",()=>this._setTheme(this._optionsService.rawOptions.theme)))}_setTheme(y={}){const d=this._colors;if(d.foreground=S(y.foreground,e),d.background=S(y.background,r),d.cursor=S(y.cursor,t),d.cursorAccent=S(y.cursorAccent,i),d.selectionBackgroundTransparent=S(y.selectionBackground,c),d.selectionBackgroundOpaque=h.color.blend(d.background,d.selectionBackgroundTransparent),d.selectionInactiveBackgroundTransparent=S(y.selectionInactiveBackground,d.selectionBackgroundTransparent),d.selectionInactiveBackgroundOpaque=h.color.blend(d.background,d.selectionInactiveBackgroundTransparent),d.selectionForeground=y.selectionForeground?S(y.selectionForeground,h.NULL_COLOR):void 0,d.selectionForeground===h.NULL_COLOR&&(d.selectionForeground=void 0),h.color.isOpaque(d.selectionBackgroundTransparent)&&(d.selectionBackgroundTransparent=h.color.opacity(d.selectionBackgroundTransparent,.3)),h.color.isOpaque(d.selectionInactiveBackgroundTransparent)&&(d.selectionInactiveBackgroundTransparent=h.color.opacity(d.selectionInactiveBackgroundTransparent,.3)),d.ansi=s.DEFAULT_ANSI_COLORS.slice(),d.ansi[0]=S(y.black,s.DEFAULT_ANSI_COLORS[0]),d.ansi[1]=S(y.red,s.DEFAULT_ANSI_COLORS[1]),d.ansi[2]=S(y.green,s.DEFAULT_ANSI_COLORS[2]),d.ansi[3]=S(y.yellow,s.DEFAULT_ANSI_COLORS[3]),d.ansi[4]=S(y.blue,s.DEFAULT_ANSI_COLORS[4]),d.ansi[5]=S(y.magenta,s.DEFAULT_ANSI_COLORS[5]),d.ansi[6]=S(y.cyan,s.DEFAULT_ANSI_COLORS[6]),d.ansi[7]=S(y.white,s.DEFAULT_ANSI_COLORS[7]),d.ansi[8]=S(y.brightBlack,s.DEFAULT_ANSI_COLORS[8]),d.ansi[9]=S(y.brightRed,s.DEFAULT_ANSI_COLORS[9]),d.ansi[10]=S(y.brightGreen,s.DEFAULT_ANSI_COLORS[10]),d.ansi[11]=S(y.brightYellow,s.DEFAULT_ANSI_COLORS[11]),d.ansi[12]=S(y.brightBlue,s.DEFAULT_ANSI_COLORS[12]),d.ansi[13]=S(y.brightMagenta,s.DEFAULT_ANSI_COLORS[13]),d.ansi[14]=S(y.brightCyan,s.DEFAULT_ANSI_COLORS[14]),d.ansi[15]=S(y.brightWhite,s.DEFAULT_ANSI_COLORS[15]),y.extendedAnsi){const b=Math.min(d.ansi.length-16,y.extendedAnsi.length);for(let R=0;R<b;R++)d.ansi[R+16]=S(y.extendedAnsi[R],s.DEFAULT_ANSI_COLORS[R+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(y){this._restoreColor(y),this._onChangeColors.fire(this.colors)}_restoreColor(y){if(y!==void 0)switch(y){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[y]=this._restoreColors.ansi[y]}else for(let d=0;d<this._restoreColors.ansi.length;++d)this._colors.ansi[d]=this._restoreColors.ansi[d]}modifyColors(y){y(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function S(y,d){if(y!==void 0)try{return h.css.toColor(y)}catch{}return d}s.ThemeService=_=l([f(0,v.IOptionsService)],_)},6349:(D,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CircularList=void 0;const l=a(8460),f=a(844);class o extends f.Disposable{constructor(p){super(),this._maxLength=p,this.onDeleteEmitter=this.register(new l.EventEmitter),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this.register(new l.EventEmitter),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this.register(new l.EventEmitter),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(p){if(this._maxLength===p)return;const m=new Array(p);for(let v=0;v<Math.min(p,this.length);v++)m[v]=this._array[this._getCyclicIndex(v)];this._array=m,this._maxLength=p,this._startIndex=0}get length(){return this._length}set length(p){if(p>this._length)for(let m=this._length;m<p;m++)this._array[m]=void 0;this._length=p}get(p){return this._array[this._getCyclicIndex(p)]}set(p,m){this._array[this._getCyclicIndex(p)]=m}push(p){this._array[this._getCyclicIndex(this._length)]=p,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(p,m,...v){if(m){for(let e=p;e<this._length-m;e++)this._array[this._getCyclicIndex(e)]=this._array[this._getCyclicIndex(e+m)];this._length-=m,this.onDeleteEmitter.fire({index:p,amount:m})}for(let e=this._length-1;e>=p;e--)this._array[this._getCyclicIndex(e+v.length)]=this._array[this._getCyclicIndex(e)];for(let e=0;e<v.length;e++)this._array[this._getCyclicIndex(p+e)]=v[e];if(v.length&&this.onInsertEmitter.fire({index:p,amount:v.length}),this._length+v.length>this._maxLength){const e=this._length+v.length-this._maxLength;this._startIndex+=e,this._length=this._maxLength,this.onTrimEmitter.fire(e)}else this._length+=v.length}trimStart(p){p>this._length&&(p=this._length),this._startIndex+=p,this._length-=p,this.onTrimEmitter.fire(p)}shiftElements(p,m,v){if(!(m<=0)){if(p<0||p>=this._length)throw new Error("start argument out of range");if(p+v<0)throw new Error("Cannot shift elements in list beyond index 0");if(v>0){for(let r=m-1;r>=0;r--)this.set(p+r+v,this.get(p+r));const e=p+m+v-this._length;if(e>0)for(this._length+=e;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let e=0;e<m;e++)this.set(p+e+v,this.get(p+e))}}_getCyclicIndex(p){return(this._startIndex+p)%this._maxLength}}s.CircularList=o},1439:(D,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.clone=void 0,s.clone=function a(l,f=5){if(typeof l!="object")return l;const o=Array.isArray(l)?[]:{};for(const h in l)o[h]=f<=1?l[h]:l[h]&&a(l[h],f-1);return o}},8055:(D,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.contrastRatio=s.toPaddedHex=s.rgba=s.rgb=s.css=s.color=s.channels=s.NULL_COLOR=void 0;const l=a(6114);let f=0,o=0,h=0,p=0;var m,v,e,r,t;function i(_){const S=_.toString(16);return S.length<2?"0"+S:S}function c(_,S){return _<S?(S+.05)/(_+.05):(_+.05)/(S+.05)}s.NULL_COLOR={css:"#00000000",rgba:0},function(_){_.toCss=function(S,y,d,b){return b!==void 0?`#${i(S)}${i(y)}${i(d)}${i(b)}`:`#${i(S)}${i(y)}${i(d)}`},_.toRgba=function(S,y,d,b=255){return(S<<24|y<<16|d<<8|b)>>>0}}(m||(s.channels=m={})),function(_){function S(y,d){return p=Math.round(255*d),[f,o,h]=t.toChannels(y.rgba),{css:m.toCss(f,o,h,p),rgba:m.toRgba(f,o,h,p)}}_.blend=function(y,d){if(p=(255&d.rgba)/255,p===1)return{css:d.css,rgba:d.rgba};const b=d.rgba>>24&255,R=d.rgba>>16&255,O=d.rgba>>8&255,A=y.rgba>>24&255,M=y.rgba>>16&255,z=y.rgba>>8&255;return f=A+Math.round((b-A)*p),o=M+Math.round((R-M)*p),h=z+Math.round((O-z)*p),{css:m.toCss(f,o,h),rgba:m.toRgba(f,o,h)}},_.isOpaque=function(y){return(255&y.rgba)==255},_.ensureContrastRatio=function(y,d,b){const R=t.ensureContrastRatio(y.rgba,d.rgba,b);if(R)return t.toColor(R>>24&255,R>>16&255,R>>8&255)},_.opaque=function(y){const d=(255|y.rgba)>>>0;return[f,o,h]=t.toChannels(d),{css:m.toCss(f,o,h),rgba:d}},_.opacity=S,_.multiplyOpacity=function(y,d){return p=255&y.rgba,S(y,p*d/255)},_.toColorRGB=function(y){return[y.rgba>>24&255,y.rgba>>16&255,y.rgba>>8&255]}}(v||(s.color=v={})),function(_){let S,y;if(!l.isNode){const d=document.createElement("canvas");d.width=1,d.height=1;const b=d.getContext("2d",{willReadFrequently:!0});b&&(S=b,S.globalCompositeOperation="copy",y=S.createLinearGradient(0,0,1,1))}_.toColor=function(d){if(d.match(/#[\da-f]{3,8}/i))switch(d.length){case 4:return f=parseInt(d.slice(1,2).repeat(2),16),o=parseInt(d.slice(2,3).repeat(2),16),h=parseInt(d.slice(3,4).repeat(2),16),t.toColor(f,o,h);case 5:return f=parseInt(d.slice(1,2).repeat(2),16),o=parseInt(d.slice(2,3).repeat(2),16),h=parseInt(d.slice(3,4).repeat(2),16),p=parseInt(d.slice(4,5).repeat(2),16),t.toColor(f,o,h,p);case 7:return{css:d,rgba:(parseInt(d.slice(1),16)<<8|255)>>>0};case 9:return{css:d,rgba:parseInt(d.slice(1),16)>>>0}}const b=d.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(b)return f=parseInt(b[1]),o=parseInt(b[2]),h=parseInt(b[3]),p=Math.round(255*(b[5]===void 0?1:parseFloat(b[5]))),t.toColor(f,o,h,p);if(!S||!y)throw new Error("css.toColor: Unsupported css format");if(S.fillStyle=y,S.fillStyle=d,typeof S.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(S.fillRect(0,0,1,1),[f,o,h,p]=S.getImageData(0,0,1,1).data,p!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:m.toRgba(f,o,h,p),css:d}}}(e||(s.css=e={})),function(_){function S(y,d,b){const R=y/255,O=d/255,A=b/255;return .2126*(R<=.03928?R/12.92:Math.pow((R+.055)/1.055,2.4))+.7152*(O<=.03928?O/12.92:Math.pow((O+.055)/1.055,2.4))+.0722*(A<=.03928?A/12.92:Math.pow((A+.055)/1.055,2.4))}_.relativeLuminance=function(y){return S(y>>16&255,y>>8&255,255&y)},_.relativeLuminance2=S}(r||(s.rgb=r={})),function(_){function S(d,b,R){const O=d>>24&255,A=d>>16&255,M=d>>8&255;let z=b>>24&255,W=b>>16&255,q=b>>8&255,F=c(r.relativeLuminance2(z,W,q),r.relativeLuminance2(O,A,M));for(;F<R&&(z>0||W>0||q>0);)z-=Math.max(0,Math.ceil(.1*z)),W-=Math.max(0,Math.ceil(.1*W)),q-=Math.max(0,Math.ceil(.1*q)),F=c(r.relativeLuminance2(z,W,q),r.relativeLuminance2(O,A,M));return(z<<24|W<<16|q<<8|255)>>>0}function y(d,b,R){const O=d>>24&255,A=d>>16&255,M=d>>8&255;let z=b>>24&255,W=b>>16&255,q=b>>8&255,F=c(r.relativeLuminance2(z,W,q),r.relativeLuminance2(O,A,M));for(;F<R&&(z<255||W<255||q<255);)z=Math.min(255,z+Math.ceil(.1*(255-z))),W=Math.min(255,W+Math.ceil(.1*(255-W))),q=Math.min(255,q+Math.ceil(.1*(255-q))),F=c(r.relativeLuminance2(z,W,q),r.relativeLuminance2(O,A,M));return(z<<24|W<<16|q<<8|255)>>>0}_.ensureContrastRatio=function(d,b,R){const O=r.relativeLuminance(d>>8),A=r.relativeLuminance(b>>8);if(c(O,A)<R){if(A<O){const W=S(d,b,R),q=c(O,r.relativeLuminance(W>>8));if(q<R){const F=y(d,b,R);return q>c(O,r.relativeLuminance(F>>8))?W:F}return W}const M=y(d,b,R),z=c(O,r.relativeLuminance(M>>8));if(z<R){const W=S(d,b,R);return z>c(O,r.relativeLuminance(W>>8))?M:W}return M}},_.reduceLuminance=S,_.increaseLuminance=y,_.toChannels=function(d){return[d>>24&255,d>>16&255,d>>8&255,255&d]},_.toColor=function(d,b,R,O){return{css:m.toCss(d,b,R,O),rgba:m.toRgba(d,b,R,O)}}}(t||(s.rgba=t={})),s.toPaddedHex=i,s.contrastRatio=c},8969:(D,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CoreTerminal=void 0;const l=a(844),f=a(2585),o=a(4348),h=a(7866),p=a(744),m=a(7302),v=a(6975),e=a(8460),r=a(1753),t=a(1480),i=a(7994),c=a(9282),_=a(5435),S=a(5981),y=a(2660);let d=!1;class b extends l.Disposable{get onScroll(){return this._onScrollApi||(this._onScrollApi=this.register(new e.EventEmitter),this._onScroll.event(O=>{var A;(A=this._onScrollApi)===null||A===void 0||A.fire(O.position)})),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(O){for(const A in O)this.optionsService.options[A]=O[A]}constructor(O){super(),this._windowsWrappingHeuristics=this.register(new l.MutableDisposable),this._onBinary=this.register(new e.EventEmitter),this.onBinary=this._onBinary.event,this._onData=this.register(new e.EventEmitter),this.onData=this._onData.event,this._onLineFeed=this.register(new e.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onResize=this.register(new e.EventEmitter),this.onResize=this._onResize.event,this._onWriteParsed=this.register(new e.EventEmitter),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this.register(new e.EventEmitter),this._instantiationService=new o.InstantiationService,this.optionsService=this.register(new m.OptionsService(O)),this._instantiationService.setService(f.IOptionsService,this.optionsService),this._bufferService=this.register(this._instantiationService.createInstance(p.BufferService)),this._instantiationService.setService(f.IBufferService,this._bufferService),this._logService=this.register(this._instantiationService.createInstance(h.LogService)),this._instantiationService.setService(f.ILogService,this._logService),this.coreService=this.register(this._instantiationService.createInstance(v.CoreService)),this._instantiationService.setService(f.ICoreService,this.coreService),this.coreMouseService=this.register(this._instantiationService.createInstance(r.CoreMouseService)),this._instantiationService.setService(f.ICoreMouseService,this.coreMouseService),this.unicodeService=this.register(this._instantiationService.createInstance(t.UnicodeService)),this._instantiationService.setService(f.IUnicodeService,this.unicodeService),this._charsetService=this._instantiationService.createInstance(i.CharsetService),this._instantiationService.setService(f.ICharsetService,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(y.OscLinkService),this._instantiationService.setService(f.IOscLinkService,this._oscLinkService),this._inputHandler=this.register(new _.InputHandler(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this.register((0,e.forwardEvent)(this._inputHandler.onLineFeed,this._onLineFeed)),this.register(this._inputHandler),this.register((0,e.forwardEvent)(this._bufferService.onResize,this._onResize)),this.register((0,e.forwardEvent)(this.coreService.onData,this._onData)),this.register((0,e.forwardEvent)(this.coreService.onBinary,this._onBinary)),this.register(this.coreService.onRequestScrollToBottom(()=>this.scrollToBottom())),this.register(this.coreService.onUserInput(()=>this._writeBuffer.handleUserInput())),this.register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],()=>this._handleWindowsPtyOptionChange())),this.register(this._bufferService.onScroll(A=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this.register(this._inputHandler.onScroll(A=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this._writeBuffer=this.register(new S.WriteBuffer((A,M)=>this._inputHandler.parse(A,M))),this.register((0,e.forwardEvent)(this._writeBuffer.onWriteParsed,this._onWriteParsed))}write(O,A){this._writeBuffer.write(O,A)}writeSync(O,A){this._logService.logLevel<=f.LogLevelEnum.WARN&&!d&&(this._logService.warn("writeSync is unreliable and will be removed soon."),d=!0),this._writeBuffer.writeSync(O,A)}resize(O,A){isNaN(O)||isNaN(A)||(O=Math.max(O,p.MINIMUM_COLS),A=Math.max(A,p.MINIMUM_ROWS),this._bufferService.resize(O,A))}scroll(O,A=!1){this._bufferService.scroll(O,A)}scrollLines(O,A,M){this._bufferService.scrollLines(O,A,M)}scrollPages(O){this.scrollLines(O*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(O){const A=O-this._bufferService.buffer.ydisp;A!==0&&this.scrollLines(A)}registerEscHandler(O,A){return this._inputHandler.registerEscHandler(O,A)}registerDcsHandler(O,A){return this._inputHandler.registerDcsHandler(O,A)}registerCsiHandler(O,A){return this._inputHandler.registerCsiHandler(O,A)}registerOscHandler(O,A){return this._inputHandler.registerOscHandler(O,A)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let O=!1;const A=this.optionsService.rawOptions.windowsPty;A&&A.buildNumber!==void 0&&A.buildNumber!==void 0?O=A.backend==="conpty"&&A.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(O=!0),O?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){const O=[];O.push(this.onLineFeed(c.updateWindowsModeWrappedState.bind(null,this._bufferService))),O.push(this.registerCsiHandler({final:"H"},()=>((0,c.updateWindowsModeWrappedState)(this._bufferService),!1))),this._windowsWrappingHeuristics.value=(0,l.toDisposable)(()=>{for(const A of O)A.dispose()})}}}s.CoreTerminal=b},8460:(D,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.forwardEvent=s.EventEmitter=void 0,s.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=a=>(this._listeners.push(a),{dispose:()=>{if(!this._disposed){for(let l=0;l<this._listeners.length;l++)if(this._listeners[l]===a)return void this._listeners.splice(l,1)}}})),this._event}fire(a,l){const f=[];for(let o=0;o<this._listeners.length;o++)f.push(this._listeners[o]);for(let o=0;o<f.length;o++)f[o].call(void 0,a,l)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},s.forwardEvent=function(a,l){return a(f=>l.fire(f))}},5435:function(D,s,a){var l=this&&this.__decorate||function(F,C,L,T){var P,K=arguments.length,G=K<3?C:T===null?T=Object.getOwnPropertyDescriptor(C,L):T;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")G=Reflect.decorate(F,C,L,T);else for(var Z=F.length-1;Z>=0;Z--)(P=F[Z])&&(G=(K<3?P(G):K>3?P(C,L,G):P(C,L))||G);return K>3&&G&&Object.defineProperty(C,L,G),G},f=this&&this.__param||function(F,C){return function(L,T){C(L,T,F)}};Object.defineProperty(s,"__esModule",{value:!0}),s.InputHandler=s.WindowsOptionsReportType=void 0;const o=a(2584),h=a(7116),p=a(2015),m=a(844),v=a(482),e=a(8437),r=a(8460),t=a(643),i=a(511),c=a(3734),_=a(2585),S=a(6242),y=a(6351),d=a(5941),b={"(":0,")":1,"*":2,"+":3,"-":1,".":2},R=131072;function O(F,C){if(F>24)return C.setWinLines||!1;switch(F){case 1:return!!C.restoreWin;case 2:return!!C.minimizeWin;case 3:return!!C.setWinPosition;case 4:return!!C.setWinSizePixels;case 5:return!!C.raiseWin;case 6:return!!C.lowerWin;case 7:return!!C.refreshWin;case 8:return!!C.setWinSizeChars;case 9:return!!C.maximizeWin;case 10:return!!C.fullscreenWin;case 11:return!!C.getWinState;case 13:return!!C.getWinPosition;case 14:return!!C.getWinSizePixels;case 15:return!!C.getScreenSizePixels;case 16:return!!C.getCellSizePixels;case 18:return!!C.getWinSizeChars;case 19:return!!C.getScreenSizeChars;case 20:return!!C.getIconTitle;case 21:return!!C.getWinTitle;case 22:return!!C.pushTitle;case 23:return!!C.popTitle;case 24:return!!C.setWinLines}return!1}var A;(function(F){F[F.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",F[F.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(A||(s.WindowsOptionsReportType=A={}));let M=0;class z extends m.Disposable{getAttrData(){return this._curAttrData}constructor(C,L,T,P,K,G,Z,Q,ae=new p.EscapeSequenceParser){super(),this._bufferService=C,this._charsetService=L,this._coreService=T,this._logService=P,this._optionsService=K,this._oscLinkService=G,this._coreMouseService=Z,this._unicodeService=Q,this._parser=ae,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new v.StringToUtf32,this._utf8Decoder=new v.Utf8ToUtf32,this._workCell=new i.CellData,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=e.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=e.DEFAULT_ATTR_DATA.clone(),this._onRequestBell=this.register(new r.EventEmitter),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this.register(new r.EventEmitter),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this.register(new r.EventEmitter),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this.register(new r.EventEmitter),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this.register(new r.EventEmitter),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this.register(new r.EventEmitter),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this.register(new r.EventEmitter),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this.register(new r.EventEmitter),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this.register(new r.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this.register(new r.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onScroll=this.register(new r.EventEmitter),this.onScroll=this._onScroll.event,this._onTitleChange=this.register(new r.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onColor=this.register(new r.EventEmitter),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this.register(this._parser),this._dirtyRowTracker=new W(this._bufferService),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(w=>this._activeBuffer=w.activeBuffer)),this._parser.setCsiHandlerFallback((w,H)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(w),params:H.toArray()})}),this._parser.setEscHandlerFallback(w=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(w)})}),this._parser.setExecuteHandlerFallback(w=>{this._logService.debug("Unknown EXECUTE code: ",{code:w})}),this._parser.setOscHandlerFallback((w,H,U)=>{this._logService.debug("Unknown OSC code: ",{identifier:w,action:H,data:U})}),this._parser.setDcsHandlerFallback((w,H,U)=>{H==="HOOK"&&(U=U.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(w),action:H,payload:U})}),this._parser.setPrintHandler((w,H,U)=>this.print(w,H,U)),this._parser.registerCsiHandler({final:"@"},w=>this.insertChars(w)),this._parser.registerCsiHandler({intermediates:" ",final:"@"},w=>this.scrollLeft(w)),this._parser.registerCsiHandler({final:"A"},w=>this.cursorUp(w)),this._parser.registerCsiHandler({intermediates:" ",final:"A"},w=>this.scrollRight(w)),this._parser.registerCsiHandler({final:"B"},w=>this.cursorDown(w)),this._parser.registerCsiHandler({final:"C"},w=>this.cursorForward(w)),this._parser.registerCsiHandler({final:"D"},w=>this.cursorBackward(w)),this._parser.registerCsiHandler({final:"E"},w=>this.cursorNextLine(w)),this._parser.registerCsiHandler({final:"F"},w=>this.cursorPrecedingLine(w)),this._parser.registerCsiHandler({final:"G"},w=>this.cursorCharAbsolute(w)),this._parser.registerCsiHandler({final:"H"},w=>this.cursorPosition(w)),this._parser.registerCsiHandler({final:"I"},w=>this.cursorForwardTab(w)),this._parser.registerCsiHandler({final:"J"},w=>this.eraseInDisplay(w,!1)),this._parser.registerCsiHandler({prefix:"?",final:"J"},w=>this.eraseInDisplay(w,!0)),this._parser.registerCsiHandler({final:"K"},w=>this.eraseInLine(w,!1)),this._parser.registerCsiHandler({prefix:"?",final:"K"},w=>this.eraseInLine(w,!0)),this._parser.registerCsiHandler({final:"L"},w=>this.insertLines(w)),this._parser.registerCsiHandler({final:"M"},w=>this.deleteLines(w)),this._parser.registerCsiHandler({final:"P"},w=>this.deleteChars(w)),this._parser.registerCsiHandler({final:"S"},w=>this.scrollUp(w)),this._parser.registerCsiHandler({final:"T"},w=>this.scrollDown(w)),this._parser.registerCsiHandler({final:"X"},w=>this.eraseChars(w)),this._parser.registerCsiHandler({final:"Z"},w=>this.cursorBackwardTab(w)),this._parser.registerCsiHandler({final:"`"},w=>this.charPosAbsolute(w)),this._parser.registerCsiHandler({final:"a"},w=>this.hPositionRelative(w)),this._parser.registerCsiHandler({final:"b"},w=>this.repeatPrecedingCharacter(w)),this._parser.registerCsiHandler({final:"c"},w=>this.sendDeviceAttributesPrimary(w)),this._parser.registerCsiHandler({prefix:">",final:"c"},w=>this.sendDeviceAttributesSecondary(w)),this._parser.registerCsiHandler({final:"d"},w=>this.linePosAbsolute(w)),this._parser.registerCsiHandler({final:"e"},w=>this.vPositionRelative(w)),this._parser.registerCsiHandler({final:"f"},w=>this.hVPosition(w)),this._parser.registerCsiHandler({final:"g"},w=>this.tabClear(w)),this._parser.registerCsiHandler({final:"h"},w=>this.setMode(w)),this._parser.registerCsiHandler({prefix:"?",final:"h"},w=>this.setModePrivate(w)),this._parser.registerCsiHandler({final:"l"},w=>this.resetMode(w)),this._parser.registerCsiHandler({prefix:"?",final:"l"},w=>this.resetModePrivate(w)),this._parser.registerCsiHandler({final:"m"},w=>this.charAttributes(w)),this._parser.registerCsiHandler({final:"n"},w=>this.deviceStatus(w)),this._parser.registerCsiHandler({prefix:"?",final:"n"},w=>this.deviceStatusPrivate(w)),this._parser.registerCsiHandler({intermediates:"!",final:"p"},w=>this.softReset(w)),this._parser.registerCsiHandler({intermediates:" ",final:"q"},w=>this.setCursorStyle(w)),this._parser.registerCsiHandler({final:"r"},w=>this.setScrollRegion(w)),this._parser.registerCsiHandler({final:"s"},w=>this.saveCursor(w)),this._parser.registerCsiHandler({final:"t"},w=>this.windowOptions(w)),this._parser.registerCsiHandler({final:"u"},w=>this.restoreCursor(w)),this._parser.registerCsiHandler({intermediates:"'",final:"}"},w=>this.insertColumns(w)),this._parser.registerCsiHandler({intermediates:"'",final:"~"},w=>this.deleteColumns(w)),this._parser.registerCsiHandler({intermediates:'"',final:"q"},w=>this.selectProtected(w)),this._parser.registerCsiHandler({intermediates:"$",final:"p"},w=>this.requestMode(w,!0)),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},w=>this.requestMode(w,!1)),this._parser.setExecuteHandler(o.C0.BEL,()=>this.bell()),this._parser.setExecuteHandler(o.C0.LF,()=>this.lineFeed()),this._parser.setExecuteHandler(o.C0.VT,()=>this.lineFeed()),this._parser.setExecuteHandler(o.C0.FF,()=>this.lineFeed()),this._parser.setExecuteHandler(o.C0.CR,()=>this.carriageReturn()),this._parser.setExecuteHandler(o.C0.BS,()=>this.backspace()),this._parser.setExecuteHandler(o.C0.HT,()=>this.tab()),this._parser.setExecuteHandler(o.C0.SO,()=>this.shiftOut()),this._parser.setExecuteHandler(o.C0.SI,()=>this.shiftIn()),this._parser.setExecuteHandler(o.C1.IND,()=>this.index()),this._parser.setExecuteHandler(o.C1.NEL,()=>this.nextLine()),this._parser.setExecuteHandler(o.C1.HTS,()=>this.tabSet()),this._parser.registerOscHandler(0,new S.OscHandler(w=>(this.setTitle(w),this.setIconName(w),!0))),this._parser.registerOscHandler(1,new S.OscHandler(w=>this.setIconName(w))),this._parser.registerOscHandler(2,new S.OscHandler(w=>this.setTitle(w))),this._parser.registerOscHandler(4,new S.OscHandler(w=>this.setOrReportIndexedColor(w))),this._parser.registerOscHandler(8,new S.OscHandler(w=>this.setHyperlink(w))),this._parser.registerOscHandler(10,new S.OscHandler(w=>this.setOrReportFgColor(w))),this._parser.registerOscHandler(11,new S.OscHandler(w=>this.setOrReportBgColor(w))),this._parser.registerOscHandler(12,new S.OscHandler(w=>this.setOrReportCursorColor(w))),this._parser.registerOscHandler(104,new S.OscHandler(w=>this.restoreIndexedColor(w))),this._parser.registerOscHandler(110,new S.OscHandler(w=>this.restoreFgColor(w))),this._parser.registerOscHandler(111,new S.OscHandler(w=>this.restoreBgColor(w))),this._parser.registerOscHandler(112,new S.OscHandler(w=>this.restoreCursorColor(w))),this._parser.registerEscHandler({final:"7"},()=>this.saveCursor()),this._parser.registerEscHandler({final:"8"},()=>this.restoreCursor()),this._parser.registerEscHandler({final:"D"},()=>this.index()),this._parser.registerEscHandler({final:"E"},()=>this.nextLine()),this._parser.registerEscHandler({final:"H"},()=>this.tabSet()),this._parser.registerEscHandler({final:"M"},()=>this.reverseIndex()),this._parser.registerEscHandler({final:"="},()=>this.keypadApplicationMode()),this._parser.registerEscHandler({final:">"},()=>this.keypadNumericMode()),this._parser.registerEscHandler({final:"c"},()=>this.fullReset()),this._parser.registerEscHandler({final:"n"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"o"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"|"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"}"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"~"},()=>this.setgLevel(1)),this._parser.registerEscHandler({intermediates:"%",final:"@"},()=>this.selectDefaultCharset()),this._parser.registerEscHandler({intermediates:"%",final:"G"},()=>this.selectDefaultCharset());for(const w in h.CHARSETS)this._parser.registerEscHandler({intermediates:"(",final:w},()=>this.selectCharset("("+w)),this._parser.registerEscHandler({intermediates:")",final:w},()=>this.selectCharset(")"+w)),this._parser.registerEscHandler({intermediates:"*",final:w},()=>this.selectCharset("*"+w)),this._parser.registerEscHandler({intermediates:"+",final:w},()=>this.selectCharset("+"+w)),this._parser.registerEscHandler({intermediates:"-",final:w},()=>this.selectCharset("-"+w)),this._parser.registerEscHandler({intermediates:".",final:w},()=>this.selectCharset("."+w)),this._parser.registerEscHandler({intermediates:"/",final:w},()=>this.selectCharset("/"+w));this._parser.registerEscHandler({intermediates:"#",final:"8"},()=>this.screenAlignmentPattern()),this._parser.setErrorHandler(w=>(this._logService.error("Parsing error: ",w),w)),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new y.DcsHandler((w,H)=>this.requestStatusString(w,H)))}_preserveStack(C,L,T,P){this._parseStack.paused=!0,this._parseStack.cursorStartX=C,this._parseStack.cursorStartY=L,this._parseStack.decodedLength=T,this._parseStack.position=P}_logSlowResolvingAsync(C){this._logService.logLevel<=_.LogLevelEnum.WARN&&Promise.race([C,new Promise((L,T)=>setTimeout(()=>T("#SLOW_TIMEOUT"),5e3))]).catch(L=>{if(L!=="#SLOW_TIMEOUT")throw L;console.warn("async parser handler taking longer than 5000 ms")})}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(C,L){let T,P=this._activeBuffer.x,K=this._activeBuffer.y,G=0;const Z=this._parseStack.paused;if(Z){if(T=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,L))return this._logSlowResolvingAsync(T),T;P=this._parseStack.cursorStartX,K=this._parseStack.cursorStartY,this._parseStack.paused=!1,C.length>R&&(G=this._parseStack.position+R)}if(this._logService.logLevel<=_.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof C=="string"?` "${C}"`:` "${Array.prototype.map.call(C,Q=>String.fromCharCode(Q)).join("")}"`),typeof C=="string"?C.split("").map(Q=>Q.charCodeAt(0)):C),this._parseBuffer.length<C.length&&this._parseBuffer.length<R&&(this._parseBuffer=new Uint32Array(Math.min(C.length,R))),Z||this._dirtyRowTracker.clearRange(),C.length>R)for(let Q=G;Q<C.length;Q+=R){const ae=Q+R<C.length?Q+R:C.length,w=typeof C=="string"?this._stringDecoder.decode(C.substring(Q,ae),this._parseBuffer):this._utf8Decoder.decode(C.subarray(Q,ae),this._parseBuffer);if(T=this._parser.parse(this._parseBuffer,w))return this._preserveStack(P,K,w,Q),this._logSlowResolvingAsync(T),T}else if(!Z){const Q=typeof C=="string"?this._stringDecoder.decode(C,this._parseBuffer):this._utf8Decoder.decode(C,this._parseBuffer);if(T=this._parser.parse(this._parseBuffer,Q))return this._preserveStack(P,K,Q,0),this._logSlowResolvingAsync(T),T}this._activeBuffer.x===P&&this._activeBuffer.y===K||this._onCursorMove.fire(),this._onRequestRefreshRows.fire(this._dirtyRowTracker.start,this._dirtyRowTracker.end)}print(C,L,T){let P,K;const G=this._charsetService.charset,Z=this._optionsService.rawOptions.screenReaderMode,Q=this._bufferService.cols,ae=this._coreService.decPrivateModes.wraparound,w=this._coreService.modes.insertMode,H=this._curAttrData;let U=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&T-L>0&&U.getWidth(this._activeBuffer.x-1)===2&&U.setCellFromCodePoint(this._activeBuffer.x-1,0,1,H.fg,H.bg,H.extended);for(let $=L;$<T;++$){if(P=C[$],K=this._unicodeService.wcwidth(P),P<127&&G){const re=G[String.fromCharCode(P)];re&&(P=re.charCodeAt(0))}if(Z&&this._onA11yChar.fire((0,v.stringFromCodePoint)(P)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),K||!this._activeBuffer.x){if(this._activeBuffer.x+K-1>=Q){if(ae){for(;this._activeBuffer.x<Q;)U.setCellFromCodePoint(this._activeBuffer.x++,0,1,H.fg,H.bg,H.extended);this._activeBuffer.x=0,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),U=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)}else if(this._activeBuffer.x=Q-1,K===2)continue}if(w&&(U.insertCells(this._activeBuffer.x,K,this._activeBuffer.getNullCell(H),H),U.getWidth(Q-1)===2&&U.setCellFromCodePoint(Q-1,t.NULL_CELL_CODE,t.NULL_CELL_WIDTH,H.fg,H.bg,H.extended)),U.setCellFromCodePoint(this._activeBuffer.x++,P,K,H.fg,H.bg,H.extended),K>0)for(;--K;)U.setCellFromCodePoint(this._activeBuffer.x++,0,0,H.fg,H.bg,H.extended)}else U.getWidth(this._activeBuffer.x-1)?U.addCodepointToCell(this._activeBuffer.x-1,P):U.addCodepointToCell(this._activeBuffer.x-2,P)}T-L>0&&(U.loadCell(this._activeBuffer.x-1,this._workCell),this._workCell.getWidth()===2||this._workCell.getCode()>65535?this._parser.precedingCodepoint=0:this._workCell.isCombined()?this._parser.precedingCodepoint=this._workCell.getChars().charCodeAt(0):this._parser.precedingCodepoint=this._workCell.content),this._activeBuffer.x<Q&&T-L>0&&U.getWidth(this._activeBuffer.x)===0&&!U.hasContent(this._activeBuffer.x)&&U.setCellFromCodePoint(this._activeBuffer.x,0,1,H.fg,H.bg,H.extended),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(C,L){return C.final!=="t"||C.prefix||C.intermediates?this._parser.registerCsiHandler(C,L):this._parser.registerCsiHandler(C,T=>!O(T.params[0],this._optionsService.rawOptions.windowOptions)||L(T))}registerDcsHandler(C,L){return this._parser.registerDcsHandler(C,new y.DcsHandler(L))}registerEscHandler(C,L){return this._parser.registerEscHandler(C,L)}registerOscHandler(C,L){return this._parser.registerOscHandler(C,new S.OscHandler(L))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){var C;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&(!((C=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))===null||C===void 0)&&C.isWrapped)){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;const L=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);L.hasWidth(this._activeBuffer.x)&&!L.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;const C=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-C),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(C=this._bufferService.cols-1){this._activeBuffer.x=Math.min(C,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(C,L){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=C,this._activeBuffer.y=this._activeBuffer.scrollTop+L):(this._activeBuffer.x=C,this._activeBuffer.y=L),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(C,L){this._restrictCursor(),this._setCursor(this._activeBuffer.x+C,this._activeBuffer.y+L)}cursorUp(C){const L=this._activeBuffer.y-this._activeBuffer.scrollTop;return L>=0?this._moveCursor(0,-Math.min(L,C.params[0]||1)):this._moveCursor(0,-(C.params[0]||1)),!0}cursorDown(C){const L=this._activeBuffer.scrollBottom-this._activeBuffer.y;return L>=0?this._moveCursor(0,Math.min(L,C.params[0]||1)):this._moveCursor(0,C.params[0]||1),!0}cursorForward(C){return this._moveCursor(C.params[0]||1,0),!0}cursorBackward(C){return this._moveCursor(-(C.params[0]||1),0),!0}cursorNextLine(C){return this.cursorDown(C),this._activeBuffer.x=0,!0}cursorPrecedingLine(C){return this.cursorUp(C),this._activeBuffer.x=0,!0}cursorCharAbsolute(C){return this._setCursor((C.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(C){return this._setCursor(C.length>=2?(C.params[1]||1)-1:0,(C.params[0]||1)-1),!0}charPosAbsolute(C){return this._setCursor((C.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(C){return this._moveCursor(C.params[0]||1,0),!0}linePosAbsolute(C){return this._setCursor(this._activeBuffer.x,(C.params[0]||1)-1),!0}vPositionRelative(C){return this._moveCursor(0,C.params[0]||1),!0}hVPosition(C){return this.cursorPosition(C),!0}tabClear(C){const L=C.params[0];return L===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:L===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(C){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let L=C.params[0]||1;for(;L--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(C){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let L=C.params[0]||1;for(;L--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(C){const L=C.params[0];return L===1&&(this._curAttrData.bg|=536870912),L!==2&&L!==0||(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(C,L,T,P=!1,K=!1){const G=this._activeBuffer.lines.get(this._activeBuffer.ybase+C);G.replaceCells(L,T,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData(),K),P&&(G.isWrapped=!1)}_resetBufferLine(C,L=!1){const T=this._activeBuffer.lines.get(this._activeBuffer.ybase+C);T&&(T.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),L),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+C),T.isWrapped=!1)}eraseInDisplay(C,L=!1){let T;switch(this._restrictCursor(this._bufferService.cols),C.params[0]){case 0:for(T=this._activeBuffer.y,this._dirtyRowTracker.markDirty(T),this._eraseInBufferLine(T++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,L);T<this._bufferService.rows;T++)this._resetBufferLine(T,L);this._dirtyRowTracker.markDirty(T);break;case 1:for(T=this._activeBuffer.y,this._dirtyRowTracker.markDirty(T),this._eraseInBufferLine(T,0,this._activeBuffer.x+1,!0,L),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(T+1).isWrapped=!1);T--;)this._resetBufferLine(T,L);this._dirtyRowTracker.markDirty(0);break;case 2:for(T=this._bufferService.rows,this._dirtyRowTracker.markDirty(T-1);T--;)this._resetBufferLine(T,L);this._dirtyRowTracker.markDirty(0);break;case 3:const P=this._activeBuffer.lines.length-this._bufferService.rows;P>0&&(this._activeBuffer.lines.trimStart(P),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-P,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-P,0),this._onScroll.fire(0))}return!0}eraseInLine(C,L=!1){switch(this._restrictCursor(this._bufferService.cols),C.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,L);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,L);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,L)}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(C){this._restrictCursor();let L=C.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const T=this._activeBuffer.ybase+this._activeBuffer.y,P=this._bufferService.rows-1-this._activeBuffer.scrollBottom,K=this._bufferService.rows-1+this._activeBuffer.ybase-P+1;for(;L--;)this._activeBuffer.lines.splice(K-1,1),this._activeBuffer.lines.splice(T,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(C){this._restrictCursor();let L=C.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const T=this._activeBuffer.ybase+this._activeBuffer.y;let P;for(P=this._bufferService.rows-1-this._activeBuffer.scrollBottom,P=this._bufferService.rows-1+this._activeBuffer.ybase-P;L--;)this._activeBuffer.lines.splice(T,1),this._activeBuffer.lines.splice(P,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(C){this._restrictCursor();const L=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return L&&(L.insertCells(this._activeBuffer.x,C.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(C){this._restrictCursor();const L=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return L&&(L.deleteCells(this._activeBuffer.x,C.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(C){let L=C.params[0]||1;for(;L--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(C){let L=C.params[0]||1;for(;L--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(e.DEFAULT_ATTR_DATA));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(C){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const L=C.params[0]||1;for(let T=this._activeBuffer.scrollTop;T<=this._activeBuffer.scrollBottom;++T){const P=this._activeBuffer.lines.get(this._activeBuffer.ybase+T);P.deleteCells(0,L,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),P.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(C){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const L=C.params[0]||1;for(let T=this._activeBuffer.scrollTop;T<=this._activeBuffer.scrollBottom;++T){const P=this._activeBuffer.lines.get(this._activeBuffer.ybase+T);P.insertCells(0,L,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),P.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(C){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const L=C.params[0]||1;for(let T=this._activeBuffer.scrollTop;T<=this._activeBuffer.scrollBottom;++T){const P=this._activeBuffer.lines.get(this._activeBuffer.ybase+T);P.insertCells(this._activeBuffer.x,L,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),P.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(C){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const L=C.params[0]||1;for(let T=this._activeBuffer.scrollTop;T<=this._activeBuffer.scrollBottom;++T){const P=this._activeBuffer.lines.get(this._activeBuffer.ybase+T);P.deleteCells(this._activeBuffer.x,L,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),P.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(C){this._restrictCursor();const L=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return L&&(L.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(C.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(C){if(!this._parser.precedingCodepoint)return!0;const L=C.params[0]||1,T=new Uint32Array(L);for(let P=0;P<L;++P)T[P]=this._parser.precedingCodepoint;return this.print(T,0,T.length),!0}sendDeviceAttributesPrimary(C){return C.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(o.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(o.C0.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(C){return C.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(o.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(o.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(C.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(o.C0.ESC+"[>83;40003;0c")),!0}_is(C){return(this._optionsService.rawOptions.termName+"").indexOf(C)===0}setMode(C){for(let L=0;L<C.length;L++)switch(C.params[L]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0}return!0}setModePrivate(C){for(let L=0;L<C.length;L++)switch(C.params[L]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,h.DEFAULT_CHARSET),this._charsetService.setgCharset(1,h.DEFAULT_CHARSET),this._charsetService.setgCharset(2,h.DEFAULT_CHARSET),this._charsetService.setgCharset(3,h.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0}resetMode(C){for(let L=0;L<C.length;L++)switch(C.params[L]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1}return!0}resetModePrivate(C){for(let L=0;L<C.length;L++)switch(C.params[L]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),C.params[L]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0}requestMode(C,L){const T=this._coreService.decPrivateModes,{activeProtocol:P,activeEncoding:K}=this._coreMouseService,G=this._coreService,{buffers:Z,cols:Q}=this._bufferService,{active:ae,alt:w}=Z,H=this._optionsService.rawOptions,U=oe=>oe?1:2,$=C.params[0];return re=$,Y=L?$===2?4:$===4?U(G.modes.insertMode):$===12?3:$===20?U(H.convertEol):0:$===1?U(T.applicationCursorKeys):$===3?H.windowOptions.setWinLines?Q===80?2:Q===132?1:0:0:$===6?U(T.origin):$===7?U(T.wraparound):$===8?3:$===9?U(P==="X10"):$===12?U(H.cursorBlink):$===25?U(!G.isCursorHidden):$===45?U(T.reverseWraparound):$===66?U(T.applicationKeypad):$===67?4:$===1e3?U(P==="VT200"):$===1002?U(P==="DRAG"):$===1003?U(P==="ANY"):$===1004?U(T.sendFocus):$===1005?4:$===1006?U(K==="SGR"):$===1015?4:$===1016?U(K==="SGR_PIXELS"):$===1048?1:$===47||$===1047||$===1049?U(ae===w):$===2004?U(T.bracketedPasteMode):0,G.triggerDataEvent(`${o.C0.ESC}[${L?"":"?"}${re};${Y}$y`),!0;var re,Y}_updateAttrColor(C,L,T,P,K){return L===2?(C|=50331648,C&=-16777216,C|=c.AttributeData.fromColorRGB([T,P,K])):L===5&&(C&=-50331904,C|=33554432|255&T),C}_extractColor(C,L,T){const P=[0,0,-1,0,0,0];let K=0,G=0;do{if(P[G+K]=C.params[L+G],C.hasSubParams(L+G)){const Z=C.getSubParams(L+G);let Q=0;do P[1]===5&&(K=1),P[G+Q+1+K]=Z[Q];while(++Q<Z.length&&Q+G+1+K<P.length);break}if(P[1]===5&&G+K>=2||P[1]===2&&G+K>=5)break;P[1]&&(K=1)}while(++G+L<C.length&&G+K<P.length);for(let Z=2;Z<P.length;++Z)P[Z]===-1&&(P[Z]=0);switch(P[0]){case 38:T.fg=this._updateAttrColor(T.fg,P[1],P[3],P[4],P[5]);break;case 48:T.bg=this._updateAttrColor(T.bg,P[1],P[3],P[4],P[5]);break;case 58:T.extended=T.extended.clone(),T.extended.underlineColor=this._updateAttrColor(T.extended.underlineColor,P[1],P[3],P[4],P[5])}return G}_processUnderline(C,L){L.extended=L.extended.clone(),(!~C||C>5)&&(C=1),L.extended.underlineStyle=C,L.fg|=268435456,C===0&&(L.fg&=-268435457),L.updateExtended()}_processSGR0(C){C.fg=e.DEFAULT_ATTR_DATA.fg,C.bg=e.DEFAULT_ATTR_DATA.bg,C.extended=C.extended.clone(),C.extended.underlineStyle=0,C.extended.underlineColor&=-67108864,C.updateExtended()}charAttributes(C){if(C.length===1&&C.params[0]===0)return this._processSGR0(this._curAttrData),!0;const L=C.length;let T;const P=this._curAttrData;for(let K=0;K<L;K++)T=C.params[K],T>=30&&T<=37?(P.fg&=-50331904,P.fg|=16777216|T-30):T>=40&&T<=47?(P.bg&=-50331904,P.bg|=16777216|T-40):T>=90&&T<=97?(P.fg&=-50331904,P.fg|=16777224|T-90):T>=100&&T<=107?(P.bg&=-50331904,P.bg|=16777224|T-100):T===0?this._processSGR0(P):T===1?P.fg|=134217728:T===3?P.bg|=67108864:T===4?(P.fg|=268435456,this._processUnderline(C.hasSubParams(K)?C.getSubParams(K)[0]:1,P)):T===5?P.fg|=536870912:T===7?P.fg|=67108864:T===8?P.fg|=1073741824:T===9?P.fg|=2147483648:T===2?P.bg|=134217728:T===21?this._processUnderline(2,P):T===22?(P.fg&=-134217729,P.bg&=-134217729):T===23?P.bg&=-67108865:T===24?(P.fg&=-268435457,this._processUnderline(0,P)):T===25?P.fg&=-536870913:T===27?P.fg&=-67108865:T===28?P.fg&=-1073741825:T===29?P.fg&=2147483647:T===39?(P.fg&=-67108864,P.fg|=16777215&e.DEFAULT_ATTR_DATA.fg):T===49?(P.bg&=-67108864,P.bg|=16777215&e.DEFAULT_ATTR_DATA.bg):T===38||T===48||T===58?K+=this._extractColor(C,K,P):T===53?P.bg|=1073741824:T===55?P.bg&=-1073741825:T===59?(P.extended=P.extended.clone(),P.extended.underlineColor=-1,P.updateExtended()):T===100?(P.fg&=-67108864,P.fg|=16777215&e.DEFAULT_ATTR_DATA.fg,P.bg&=-67108864,P.bg|=16777215&e.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",T);return!0}deviceStatus(C){switch(C.params[0]){case 5:this._coreService.triggerDataEvent(`${o.C0.ESC}[0n`);break;case 6:const L=this._activeBuffer.y+1,T=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${o.C0.ESC}[${L};${T}R`)}return!0}deviceStatusPrivate(C){if(C.params[0]===6){const L=this._activeBuffer.y+1,T=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${o.C0.ESC}[?${L};${T}R`)}return!0}softReset(C){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=e.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(C){const L=C.params[0]||1;switch(L){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}const T=L%2==1;return this._optionsService.options.cursorBlink=T,!0}setScrollRegion(C){const L=C.params[0]||1;let T;return(C.length<2||(T=C.params[1])>this._bufferService.rows||T===0)&&(T=this._bufferService.rows),T>L&&(this._activeBuffer.scrollTop=L-1,this._activeBuffer.scrollBottom=T-1,this._setCursor(0,0)),!0}windowOptions(C){if(!O(C.params[0],this._optionsService.rawOptions.windowOptions))return!0;const L=C.length>1?C.params[1]:0;switch(C.params[0]){case 14:L!==2&&this._onRequestWindowsOptionsReport.fire(A.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(A.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${o.C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:L!==0&&L!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),L!==0&&L!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:L!==0&&L!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),L!==0&&L!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0}saveCursor(C){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(C){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(C){return this._windowTitle=C,this._onTitleChange.fire(C),!0}setIconName(C){return this._iconName=C,!0}setOrReportIndexedColor(C){const L=[],T=C.split(";");for(;T.length>1;){const P=T.shift(),K=T.shift();if(/^\d+$/.exec(P)){const G=parseInt(P);if(q(G))if(K==="?")L.push({type:0,index:G});else{const Z=(0,d.parseColor)(K);Z&&L.push({type:1,index:G,color:Z})}}}return L.length&&this._onColor.fire(L),!0}setHyperlink(C){const L=C.split(";");return!(L.length<2)&&(L[1]?this._createHyperlink(L[0],L[1]):!L[0]&&this._finishHyperlink())}_createHyperlink(C,L){this._getCurrentLinkId()&&this._finishHyperlink();const T=C.split(":");let P;const K=T.findIndex(G=>G.startsWith("id="));return K!==-1&&(P=T[K].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:P,uri:L}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(C,L){const T=C.split(";");for(let P=0;P<T.length&&!(L>=this._specialColors.length);++P,++L)if(T[P]==="?")this._onColor.fire([{type:0,index:this._specialColors[L]}]);else{const K=(0,d.parseColor)(T[P]);K&&this._onColor.fire([{type:1,index:this._specialColors[L],color:K}])}return!0}setOrReportFgColor(C){return this._setOrReportSpecialColor(C,0)}setOrReportBgColor(C){return this._setOrReportSpecialColor(C,1)}setOrReportCursorColor(C){return this._setOrReportSpecialColor(C,2)}restoreIndexedColor(C){if(!C)return this._onColor.fire([{type:2}]),!0;const L=[],T=C.split(";");for(let P=0;P<T.length;++P)if(/^\d+$/.exec(T[P])){const K=parseInt(T[P]);q(K)&&L.push({type:2,index:K})}return L.length&&this._onColor.fire(L),!0}restoreFgColor(C){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(C){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(C){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,h.DEFAULT_CHARSET),!0}selectCharset(C){return C.length!==2?(this.selectDefaultCharset(),!0):(C[0]==="/"||this._charsetService.setgCharset(b[C[0]],h.CHARSETS[C[1]]||h.DEFAULT_CHARSET),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){const C=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,C,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=e.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=e.DEFAULT_ATTR_DATA.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal}setgLevel(C){return this._charsetService.setgLevel(C),!0}screenAlignmentPattern(){const C=new i.CellData;C.content=4194373,C.fg=this._curAttrData.fg,C.bg=this._curAttrData.bg,this._setCursor(0,0);for(let L=0;L<this._bufferService.rows;++L){const T=this._activeBuffer.ybase+this._activeBuffer.y+L,P=this._activeBuffer.lines.get(T);P&&(P.fill(C),P.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(C,L){const T=this._bufferService.buffer,P=this._optionsService.rawOptions;return(K=>(this._coreService.triggerDataEvent(`${o.C0.ESC}${K}${o.C0.ESC}\\`),!0))(C==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:C==='"p'?'P1$r61;1"p':C==="r"?`P1$r${T.scrollTop+1};${T.scrollBottom+1}r`:C==="m"?"P1$r0m":C===" q"?`P1$r${{block:2,underline:4,bar:6}[P.cursorStyle]-(P.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(C,L){this._dirtyRowTracker.markRangeDirty(C,L)}}s.InputHandler=z;let W=class{constructor(F){this._bufferService=F,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(F){F<this.start?this.start=F:F>this.end&&(this.end=F)}markRangeDirty(F,C){F>C&&(M=F,F=C,C=M),F<this.start&&(this.start=F),C>this.end&&(this.end=C)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};function q(F){return 0<=F&&F<256}W=l([f(0,_.IBufferService)],W)},844:(D,s)=>{function a(l){for(const f of l)f.dispose();l.length=0}Object.defineProperty(s,"__esModule",{value:!0}),s.getDisposeArrayDisposable=s.disposeArray=s.toDisposable=s.MutableDisposable=s.Disposable=void 0,s.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const l of this._disposables)l.dispose();this._disposables.length=0}register(l){return this._disposables.push(l),l}unregister(l){const f=this._disposables.indexOf(l);f!==-1&&this._disposables.splice(f,1)}},s.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(l){var f;this._isDisposed||l===this._value||((f=this._value)===null||f===void 0||f.dispose(),this._value=l)}clear(){this.value=void 0}dispose(){var l;this._isDisposed=!0,(l=this._value)===null||l===void 0||l.dispose(),this._value=void 0}},s.toDisposable=function(l){return{dispose:l}},s.disposeArray=a,s.getDisposeArrayDisposable=function(l){return{dispose:()=>a(l)}}},1505:(D,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.FourKeyMap=s.TwoKeyMap=void 0;class a{constructor(){this._data={}}set(f,o,h){this._data[f]||(this._data[f]={}),this._data[f][o]=h}get(f,o){return this._data[f]?this._data[f][o]:void 0}clear(){this._data={}}}s.TwoKeyMap=a,s.FourKeyMap=class{constructor(){this._data=new a}set(l,f,o,h,p){this._data.get(l,f)||this._data.set(l,f,new a),this._data.get(l,f).set(o,h,p)}get(l,f,o,h){var p;return(p=this._data.get(l,f))===null||p===void 0?void 0:p.get(o,h)}clear(){this._data.clear()}}},6114:(D,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.isChromeOS=s.isLinux=s.isWindows=s.isIphone=s.isIpad=s.isMac=s.getSafariVersion=s.isSafari=s.isLegacyEdge=s.isFirefox=s.isNode=void 0,s.isNode=typeof navigator>"u";const a=s.isNode?"node":navigator.userAgent,l=s.isNode?"node":navigator.platform;s.isFirefox=a.includes("Firefox"),s.isLegacyEdge=a.includes("Edge"),s.isSafari=/^((?!chrome|android).)*safari/i.test(a),s.getSafariVersion=function(){if(!s.isSafari)return 0;const f=a.match(/Version\/(\d+)/);return f===null||f.length<2?0:parseInt(f[1])},s.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(l),s.isIpad=l==="iPad",s.isIphone=l==="iPhone",s.isWindows=["Windows","Win16","Win32","WinCE"].includes(l),s.isLinux=l.indexOf("Linux")>=0,s.isChromeOS=/\bCrOS\b/.test(a)},6106:(D,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.SortedList=void 0;let a=0;s.SortedList=class{constructor(l){this._getKey=l,this._array=[]}clear(){this._array.length=0}insert(l){this._array.length!==0?(a=this._search(this._getKey(l)),this._array.splice(a,0,l)):this._array.push(l)}delete(l){if(this._array.length===0)return!1;const f=this._getKey(l);if(f===void 0||(a=this._search(f),a===-1)||this._getKey(this._array[a])!==f)return!1;do if(this._array[a]===l)return this._array.splice(a,1),!0;while(++a<this._array.length&&this._getKey(this._array[a])===f);return!1}*getKeyIterator(l){if(this._array.length!==0&&(a=this._search(l),!(a<0||a>=this._array.length)&&this._getKey(this._array[a])===l))do yield this._array[a];while(++a<this._array.length&&this._getKey(this._array[a])===l)}forEachByKey(l,f){if(this._array.length!==0&&(a=this._search(l),!(a<0||a>=this._array.length)&&this._getKey(this._array[a])===l))do f(this._array[a]);while(++a<this._array.length&&this._getKey(this._array[a])===l)}values(){return[...this._array].values()}_search(l){let f=0,o=this._array.length-1;for(;o>=f;){let h=f+o>>1;const p=this._getKey(this._array[h]);if(p>l)o=h-1;else{if(!(p<l)){for(;h>0&&this._getKey(this._array[h-1])===l;)h--;return h}f=h+1}}return f}}},7226:(D,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.DebouncedIdleTask=s.IdleTaskQueue=s.PriorityTaskQueue=void 0;const l=a(6114);class f{constructor(){this._tasks=[],this._i=0}enqueue(p){this._tasks.push(p),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(p){this._idleCallback=void 0;let m=0,v=0,e=p.timeRemaining(),r=0;for(;this._i<this._tasks.length;){if(m=Date.now(),this._tasks[this._i]()||this._i++,m=Math.max(1,Date.now()-m),v=Math.max(m,v),r=p.timeRemaining(),1.5*v>r)return e-m<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(e-m))}ms`),void this._start();e=r}this.clear()}}class o extends f{_requestCallback(p){return setTimeout(()=>p(this._createDeadline(16)))}_cancelCallback(p){clearTimeout(p)}_createDeadline(p){const m=Date.now()+p;return{timeRemaining:()=>Math.max(0,m-Date.now())}}}s.PriorityTaskQueue=o,s.IdleTaskQueue=!l.isNode&&"requestIdleCallback"in window?class extends f{_requestCallback(h){return requestIdleCallback(h)}_cancelCallback(h){cancelIdleCallback(h)}}:o,s.DebouncedIdleTask=class{constructor(){this._queue=new s.IdleTaskQueue}set(h){this._queue.clear(),this._queue.enqueue(h)}flush(){this._queue.flush()}}},9282:(D,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.updateWindowsModeWrappedState=void 0;const l=a(643);s.updateWindowsModeWrappedState=function(f){const o=f.buffer.lines.get(f.buffer.ybase+f.buffer.y-1),h=o==null?void 0:o.get(f.cols-1),p=f.buffer.lines.get(f.buffer.ybase+f.buffer.y);p&&h&&(p.isWrapped=h[l.CHAR_DATA_CODE_INDEX]!==l.NULL_CELL_CODE&&h[l.CHAR_DATA_CODE_INDEX]!==l.WHITESPACE_CELL_CODE)}},3734:(D,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ExtendedAttrs=s.AttributeData=void 0;class a{constructor(){this.fg=0,this.bg=0,this.extended=new l}static toColorRGB(o){return[o>>>16&255,o>>>8&255,255&o]}static fromColorRGB(o){return(255&o[0])<<16|(255&o[1])<<8|255&o[2]}clone(){const o=new a;return o.fg=this.fg,o.bg=this.bg,o.extended=this.extended.clone(),o}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}}s.AttributeData=a;class l{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(o){this._ext=o}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(o){this._ext&=-469762049,this._ext|=o<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(o){this._ext&=-67108864,this._ext|=67108863&o}get urlId(){return this._urlId}set urlId(o){this._urlId=o}constructor(o=0,h=0){this._ext=0,this._urlId=0,this._ext=o,this._urlId=h}clone(){return new l(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}s.ExtendedAttrs=l},9092:(D,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Buffer=s.MAX_BUFFER_SIZE=void 0;const l=a(6349),f=a(7226),o=a(3734),h=a(8437),p=a(4634),m=a(511),v=a(643),e=a(4863),r=a(7116);s.MAX_BUFFER_SIZE=4294967295,s.Buffer=class{constructor(t,i,c){this._hasScrollback=t,this._optionsService=i,this._bufferService=c,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=h.DEFAULT_ATTR_DATA.clone(),this.savedCharset=r.DEFAULT_CHARSET,this.markers=[],this._nullCell=m.CellData.fromCharData([0,v.NULL_CELL_CHAR,v.NULL_CELL_WIDTH,v.NULL_CELL_CODE]),this._whitespaceCell=m.CellData.fromCharData([0,v.WHITESPACE_CELL_CHAR,v.WHITESPACE_CELL_WIDTH,v.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._memoryCleanupQueue=new f.IdleTaskQueue,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new l.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(t){return t?(this._nullCell.fg=t.fg,this._nullCell.bg=t.bg,this._nullCell.extended=t.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new o.ExtendedAttrs),this._nullCell}getWhitespaceCell(t){return t?(this._whitespaceCell.fg=t.fg,this._whitespaceCell.bg=t.bg,this._whitespaceCell.extended=t.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new o.ExtendedAttrs),this._whitespaceCell}getBlankLine(t,i){return new h.BufferLine(this._bufferService.cols,this.getNullCell(t),i)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){const t=this.ybase+this.y-this.ydisp;return t>=0&&t<this._rows}_getCorrectBufferLength(t){if(!this._hasScrollback)return t;const i=t+this._optionsService.rawOptions.scrollback;return i>s.MAX_BUFFER_SIZE?s.MAX_BUFFER_SIZE:i}fillViewportRows(t){if(this.lines.length===0){t===void 0&&(t=h.DEFAULT_ATTR_DATA);let i=this._rows;for(;i--;)this.lines.push(this.getBlankLine(t))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new l.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(t,i){const c=this.getNullCell(h.DEFAULT_ATTR_DATA);let _=0;const S=this._getCorrectBufferLength(i);if(S>this.lines.maxLength&&(this.lines.maxLength=S),this.lines.length>0){if(this._cols<t)for(let d=0;d<this.lines.length;d++)_+=+this.lines.get(d).resize(t,c);let y=0;if(this._rows<i)for(let d=this._rows;d<i;d++)this.lines.length<i+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new h.BufferLine(t,c)):this.ybase>0&&this.lines.length<=this.ybase+this.y+y+1?(this.ybase--,y++,this.ydisp>0&&this.ydisp--):this.lines.push(new h.BufferLine(t,c)));else for(let d=this._rows;d>i;d--)this.lines.length>i+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(S<this.lines.maxLength){const d=this.lines.length-S;d>0&&(this.lines.trimStart(d),this.ybase=Math.max(this.ybase-d,0),this.ydisp=Math.max(this.ydisp-d,0),this.savedY=Math.max(this.savedY-d,0)),this.lines.maxLength=S}this.x=Math.min(this.x,t-1),this.y=Math.min(this.y,i-1),y&&(this.y+=y),this.savedX=Math.min(this.savedX,t-1),this.scrollTop=0}if(this.scrollBottom=i-1,this._isReflowEnabled&&(this._reflow(t,i),this._cols>t))for(let y=0;y<this.lines.length;y++)_+=+this.lines.get(y).resize(t,c);this._cols=t,this._rows=i,this._memoryCleanupQueue.clear(),_>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue(()=>this._batchedMemoryCleanup()))}_batchedMemoryCleanup(){let t=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,t=!1);let i=0;for(;this._memoryCleanupPosition<this.lines.length;)if(i+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),i>100)return!0;return t}get _isReflowEnabled(){const t=this._optionsService.rawOptions.windowsPty;return t&&t.buildNumber?this._hasScrollback&&t.backend==="conpty"&&t.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(t,i){this._cols!==t&&(t>this._cols?this._reflowLarger(t,i):this._reflowSmaller(t,i))}_reflowLarger(t,i){const c=(0,p.reflowLargerGetLinesToRemove)(this.lines,this._cols,t,this.ybase+this.y,this.getNullCell(h.DEFAULT_ATTR_DATA));if(c.length>0){const _=(0,p.reflowLargerCreateNewLayout)(this.lines,c);(0,p.reflowLargerApplyNewLayout)(this.lines,_.layout),this._reflowLargerAdjustViewport(t,i,_.countRemoved)}}_reflowLargerAdjustViewport(t,i,c){const _=this.getNullCell(h.DEFAULT_ATTR_DATA);let S=c;for(;S-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<i&&this.lines.push(new h.BufferLine(t,_))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-c,0)}_reflowSmaller(t,i){const c=this.getNullCell(h.DEFAULT_ATTR_DATA),_=[];let S=0;for(let y=this.lines.length-1;y>=0;y--){let d=this.lines.get(y);if(!d||!d.isWrapped&&d.getTrimmedLength()<=t)continue;const b=[d];for(;d.isWrapped&&y>0;)d=this.lines.get(--y),b.unshift(d);const R=this.ybase+this.y;if(R>=y&&R<y+b.length)continue;const O=b[b.length-1].getTrimmedLength(),A=(0,p.reflowSmallerGetNewLineLengths)(b,this._cols,t),M=A.length-b.length;let z;z=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+M):Math.max(0,this.lines.length-this.lines.maxLength+M);const W=[];for(let P=0;P<M;P++){const K=this.getBlankLine(h.DEFAULT_ATTR_DATA,!0);W.push(K)}W.length>0&&(_.push({start:y+b.length+S,newLines:W}),S+=W.length),b.push(...W);let q=A.length-1,F=A[q];F===0&&(q--,F=A[q]);let C=b.length-M-1,L=O;for(;C>=0;){const P=Math.min(L,F);if(b[q]===void 0)break;if(b[q].copyCellsFrom(b[C],L-P,F-P,P,!0),F-=P,F===0&&(q--,F=A[q]),L-=P,L===0){C--;const K=Math.max(C,0);L=(0,p.getWrappedLineTrimmedLength)(b,K,this._cols)}}for(let P=0;P<b.length;P++)A[P]<t&&b[P].setCell(A[P],c);let T=M-z;for(;T-- >0;)this.ybase===0?this.y<i-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+S)-i&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+M,this.ybase+i-1)}if(_.length>0){const y=[],d=[];for(let q=0;q<this.lines.length;q++)d.push(this.lines.get(q));const b=this.lines.length;let R=b-1,O=0,A=_[O];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+S);let M=0;for(let q=Math.min(this.lines.maxLength-1,b+S-1);q>=0;q--)if(A&&A.start>R+M){for(let F=A.newLines.length-1;F>=0;F--)this.lines.set(q--,A.newLines[F]);q++,y.push({index:R+1,amount:A.newLines.length}),M+=A.newLines.length,A=_[++O]}else this.lines.set(q,d[R--]);let z=0;for(let q=y.length-1;q>=0;q--)y[q].index+=z,this.lines.onInsertEmitter.fire(y[q]),z+=y[q].amount;const W=Math.max(0,b+S-this.lines.maxLength);W>0&&this.lines.onTrimEmitter.fire(W)}}translateBufferLineToString(t,i,c=0,_){const S=this.lines.get(t);return S?S.translateToString(i,c,_):""}getWrappedRangeForLine(t){let i=t,c=t;for(;i>0&&this.lines.get(i).isWrapped;)i--;for(;c+1<this.lines.length&&this.lines.get(c+1).isWrapped;)c++;return{first:i,last:c}}setupTabStops(t){for(t!=null?this.tabs[t]||(t=this.prevStop(t)):(this.tabs={},t=0);t<this._cols;t+=this._optionsService.rawOptions.tabStopWidth)this.tabs[t]=!0}prevStop(t){for(t==null&&(t=this.x);!this.tabs[--t]&&t>0;);return t>=this._cols?this._cols-1:t<0?0:t}nextStop(t){for(t==null&&(t=this.x);!this.tabs[++t]&&t<this._cols;);return t>=this._cols?this._cols-1:t<0?0:t}clearMarkers(t){this._isClearing=!0;for(let i=0;i<this.markers.length;i++)this.markers[i].line===t&&(this.markers[i].dispose(),this.markers.splice(i--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let t=0;t<this.markers.length;t++)this.markers[t].dispose(),this.markers.splice(t--,1);this._isClearing=!1}addMarker(t){const i=new e.Marker(t);return this.markers.push(i),i.register(this.lines.onTrim(c=>{i.line-=c,i.line<0&&i.dispose()})),i.register(this.lines.onInsert(c=>{i.line>=c.index&&(i.line+=c.amount)})),i.register(this.lines.onDelete(c=>{i.line>=c.index&&i.line<c.index+c.amount&&i.dispose(),i.line>c.index&&(i.line-=c.amount)})),i.register(i.onDispose(()=>this._removeMarker(i))),i}_removeMarker(t){this._isClearing||this.markers.splice(this.markers.indexOf(t),1)}}},8437:(D,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BufferLine=s.DEFAULT_ATTR_DATA=void 0;const l=a(3734),f=a(511),o=a(643),h=a(482);s.DEFAULT_ATTR_DATA=Object.freeze(new l.AttributeData);let p=0;class m{constructor(e,r,t=!1){this.isWrapped=t,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*e);const i=r||f.CellData.fromCharData([0,o.NULL_CELL_CHAR,o.NULL_CELL_WIDTH,o.NULL_CELL_CODE]);for(let c=0;c<e;++c)this.setCell(c,i);this.length=e}get(e){const r=this._data[3*e+0],t=2097151&r;return[this._data[3*e+1],2097152&r?this._combined[e]:t?(0,h.stringFromCodePoint)(t):"",r>>22,2097152&r?this._combined[e].charCodeAt(this._combined[e].length-1):t]}set(e,r){this._data[3*e+1]=r[o.CHAR_DATA_ATTR_INDEX],r[o.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[e]=r[1],this._data[3*e+0]=2097152|e|r[o.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*e+0]=r[o.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|r[o.CHAR_DATA_WIDTH_INDEX]<<22}getWidth(e){return this._data[3*e+0]>>22}hasWidth(e){return 12582912&this._data[3*e+0]}getFg(e){return this._data[3*e+1]}getBg(e){return this._data[3*e+2]}hasContent(e){return 4194303&this._data[3*e+0]}getCodePoint(e){const r=this._data[3*e+0];return 2097152&r?this._combined[e].charCodeAt(this._combined[e].length-1):2097151&r}isCombined(e){return 2097152&this._data[3*e+0]}getString(e){const r=this._data[3*e+0];return 2097152&r?this._combined[e]:2097151&r?(0,h.stringFromCodePoint)(2097151&r):""}isProtected(e){return 536870912&this._data[3*e+2]}loadCell(e,r){return p=3*e,r.content=this._data[p+0],r.fg=this._data[p+1],r.bg=this._data[p+2],2097152&r.content&&(r.combinedData=this._combined[e]),268435456&r.bg&&(r.extended=this._extendedAttrs[e]),r}setCell(e,r){2097152&r.content&&(this._combined[e]=r.combinedData),268435456&r.bg&&(this._extendedAttrs[e]=r.extended),this._data[3*e+0]=r.content,this._data[3*e+1]=r.fg,this._data[3*e+2]=r.bg}setCellFromCodePoint(e,r,t,i,c,_){268435456&c&&(this._extendedAttrs[e]=_),this._data[3*e+0]=r|t<<22,this._data[3*e+1]=i,this._data[3*e+2]=c}addCodepointToCell(e,r){let t=this._data[3*e+0];2097152&t?this._combined[e]+=(0,h.stringFromCodePoint)(r):(2097151&t?(this._combined[e]=(0,h.stringFromCodePoint)(2097151&t)+(0,h.stringFromCodePoint)(r),t&=-2097152,t|=2097152):t=r|4194304,this._data[3*e+0]=t)}insertCells(e,r,t,i){if((e%=this.length)&&this.getWidth(e-1)===2&&this.setCellFromCodePoint(e-1,0,1,(i==null?void 0:i.fg)||0,(i==null?void 0:i.bg)||0,(i==null?void 0:i.extended)||new l.ExtendedAttrs),r<this.length-e){const c=new f.CellData;for(let _=this.length-e-r-1;_>=0;--_)this.setCell(e+r+_,this.loadCell(e+_,c));for(let _=0;_<r;++_)this.setCell(e+_,t)}else for(let c=e;c<this.length;++c)this.setCell(c,t);this.getWidth(this.length-1)===2&&this.setCellFromCodePoint(this.length-1,0,1,(i==null?void 0:i.fg)||0,(i==null?void 0:i.bg)||0,(i==null?void 0:i.extended)||new l.ExtendedAttrs)}deleteCells(e,r,t,i){if(e%=this.length,r<this.length-e){const c=new f.CellData;for(let _=0;_<this.length-e-r;++_)this.setCell(e+_,this.loadCell(e+r+_,c));for(let _=this.length-r;_<this.length;++_)this.setCell(_,t)}else for(let c=e;c<this.length;++c)this.setCell(c,t);e&&this.getWidth(e-1)===2&&this.setCellFromCodePoint(e-1,0,1,(i==null?void 0:i.fg)||0,(i==null?void 0:i.bg)||0,(i==null?void 0:i.extended)||new l.ExtendedAttrs),this.getWidth(e)!==0||this.hasContent(e)||this.setCellFromCodePoint(e,0,1,(i==null?void 0:i.fg)||0,(i==null?void 0:i.bg)||0,(i==null?void 0:i.extended)||new l.ExtendedAttrs)}replaceCells(e,r,t,i,c=!1){if(c)for(e&&this.getWidth(e-1)===2&&!this.isProtected(e-1)&&this.setCellFromCodePoint(e-1,0,1,(i==null?void 0:i.fg)||0,(i==null?void 0:i.bg)||0,(i==null?void 0:i.extended)||new l.ExtendedAttrs),r<this.length&&this.getWidth(r-1)===2&&!this.isProtected(r)&&this.setCellFromCodePoint(r,0,1,(i==null?void 0:i.fg)||0,(i==null?void 0:i.bg)||0,(i==null?void 0:i.extended)||new l.ExtendedAttrs);e<r&&e<this.length;)this.isProtected(e)||this.setCell(e,t),e++;else for(e&&this.getWidth(e-1)===2&&this.setCellFromCodePoint(e-1,0,1,(i==null?void 0:i.fg)||0,(i==null?void 0:i.bg)||0,(i==null?void 0:i.extended)||new l.ExtendedAttrs),r<this.length&&this.getWidth(r-1)===2&&this.setCellFromCodePoint(r,0,1,(i==null?void 0:i.fg)||0,(i==null?void 0:i.bg)||0,(i==null?void 0:i.extended)||new l.ExtendedAttrs);e<r&&e<this.length;)this.setCell(e++,t)}resize(e,r){if(e===this.length)return 4*this._data.length*2<this._data.buffer.byteLength;const t=3*e;if(e>this.length){if(this._data.buffer.byteLength>=4*t)this._data=new Uint32Array(this._data.buffer,0,t);else{const i=new Uint32Array(t);i.set(this._data),this._data=i}for(let i=this.length;i<e;++i)this.setCell(i,r)}else{this._data=this._data.subarray(0,t);const i=Object.keys(this._combined);for(let _=0;_<i.length;_++){const S=parseInt(i[_],10);S>=e&&delete this._combined[S]}const c=Object.keys(this._extendedAttrs);for(let _=0;_<c.length;_++){const S=parseInt(c[_],10);S>=e&&delete this._extendedAttrs[S]}}return this.length=e,4*t*2<this._data.buffer.byteLength}cleanupMemory(){if(4*this._data.length*2<this._data.buffer.byteLength){const e=new Uint32Array(this._data.length);return e.set(this._data),this._data=e,1}return 0}fill(e,r=!1){if(r)for(let t=0;t<this.length;++t)this.isProtected(t)||this.setCell(t,e);else{this._combined={},this._extendedAttrs={};for(let t=0;t<this.length;++t)this.setCell(t,e)}}copyFrom(e){this.length!==e.length?this._data=new Uint32Array(e._data):this._data.set(e._data),this.length=e.length,this._combined={};for(const r in e._combined)this._combined[r]=e._combined[r];this._extendedAttrs={};for(const r in e._extendedAttrs)this._extendedAttrs[r]=e._extendedAttrs[r];this.isWrapped=e.isWrapped}clone(){const e=new m(0);e._data=new Uint32Array(this._data),e.length=this.length;for(const r in this._combined)e._combined[r]=this._combined[r];for(const r in this._extendedAttrs)e._extendedAttrs[r]=this._extendedAttrs[r];return e.isWrapped=this.isWrapped,e}getTrimmedLength(){for(let e=this.length-1;e>=0;--e)if(4194303&this._data[3*e+0])return e+(this._data[3*e+0]>>22);return 0}getNoBgTrimmedLength(){for(let e=this.length-1;e>=0;--e)if(4194303&this._data[3*e+0]||50331648&this._data[3*e+2])return e+(this._data[3*e+0]>>22);return 0}copyCellsFrom(e,r,t,i,c){const _=e._data;if(c)for(let y=i-1;y>=0;y--){for(let d=0;d<3;d++)this._data[3*(t+y)+d]=_[3*(r+y)+d];268435456&_[3*(r+y)+2]&&(this._extendedAttrs[t+y]=e._extendedAttrs[r+y])}else for(let y=0;y<i;y++){for(let d=0;d<3;d++)this._data[3*(t+y)+d]=_[3*(r+y)+d];268435456&_[3*(r+y)+2]&&(this._extendedAttrs[t+y]=e._extendedAttrs[r+y])}const S=Object.keys(e._combined);for(let y=0;y<S.length;y++){const d=parseInt(S[y],10);d>=r&&(this._combined[d-r+t]=e._combined[d])}}translateToString(e=!1,r=0,t=this.length){e&&(t=Math.min(t,this.getTrimmedLength()));let i="";for(;r<t;){const c=this._data[3*r+0],_=2097151&c;i+=2097152&c?this._combined[r]:_?(0,h.stringFromCodePoint)(_):o.WHITESPACE_CELL_CHAR,r+=c>>22||1}return i}}s.BufferLine=m},4841:(D,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.getRangeLength=void 0,s.getRangeLength=function(a,l){if(a.start.y>a.end.y)throw new Error(`Buffer range end (${a.end.x}, ${a.end.y}) cannot be before start (${a.start.x}, ${a.start.y})`);return l*(a.end.y-a.start.y)+(a.end.x-a.start.x+1)}},4634:(D,s)=>{function a(l,f,o){if(f===l.length-1)return l[f].getTrimmedLength();const h=!l[f].hasContent(o-1)&&l[f].getWidth(o-1)===1,p=l[f+1].getWidth(0)===2;return h&&p?o-1:o}Object.defineProperty(s,"__esModule",{value:!0}),s.getWrappedLineTrimmedLength=s.reflowSmallerGetNewLineLengths=s.reflowLargerApplyNewLayout=s.reflowLargerCreateNewLayout=s.reflowLargerGetLinesToRemove=void 0,s.reflowLargerGetLinesToRemove=function(l,f,o,h,p){const m=[];for(let v=0;v<l.length-1;v++){let e=v,r=l.get(++e);if(!r.isWrapped)continue;const t=[l.get(v)];for(;e<l.length&&r.isWrapped;)t.push(r),r=l.get(++e);if(h>=v&&h<e){v+=t.length-1;continue}let i=0,c=a(t,i,f),_=1,S=0;for(;_<t.length;){const d=a(t,_,f),b=d-S,R=o-c,O=Math.min(b,R);t[i].copyCellsFrom(t[_],S,c,O,!1),c+=O,c===o&&(i++,c=0),S+=O,S===d&&(_++,S=0),c===0&&i!==0&&t[i-1].getWidth(o-1)===2&&(t[i].copyCellsFrom(t[i-1],o-1,c++,1,!1),t[i-1].setCell(o-1,p))}t[i].replaceCells(c,o,p);let y=0;for(let d=t.length-1;d>0&&(d>i||t[d].getTrimmedLength()===0);d--)y++;y>0&&(m.push(v+t.length-y),m.push(y)),v+=t.length-1}return m},s.reflowLargerCreateNewLayout=function(l,f){const o=[];let h=0,p=f[h],m=0;for(let v=0;v<l.length;v++)if(p===v){const e=f[++h];l.onDeleteEmitter.fire({index:v-m,amount:e}),v+=e-1,m+=e,p=f[++h]}else o.push(v);return{layout:o,countRemoved:m}},s.reflowLargerApplyNewLayout=function(l,f){const o=[];for(let h=0;h<f.length;h++)o.push(l.get(f[h]));for(let h=0;h<o.length;h++)l.set(h,o[h]);l.length=f.length},s.reflowSmallerGetNewLineLengths=function(l,f,o){const h=[],p=l.map((r,t)=>a(l,t,f)).reduce((r,t)=>r+t);let m=0,v=0,e=0;for(;e<p;){if(p-e<o){h.push(p-e);break}m+=o;const r=a(l,v,f);m>r&&(m-=r,v++);const t=l[v].getWidth(m-1)===2;t&&m--;const i=t?o-1:o;h.push(i),e+=i}return h},s.getWrappedLineTrimmedLength=a},5295:(D,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BufferSet=void 0;const l=a(8460),f=a(844),o=a(9092);class h extends f.Disposable{constructor(m,v){super(),this._optionsService=m,this._bufferService=v,this._onBufferActivate=this.register(new l.EventEmitter),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.resize(this._bufferService.cols,this._bufferService.rows))),this.register(this._optionsService.onSpecificOptionChange("tabStopWidth",()=>this.setupTabStops()))}reset(){this._normal=new o.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new o.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(m){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(m),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(m,v){this._normal.resize(m,v),this._alt.resize(m,v),this.setupTabStops(m)}setupTabStops(m){this._normal.setupTabStops(m),this._alt.setupTabStops(m)}}s.BufferSet=h},511:(D,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CellData=void 0;const l=a(482),f=a(643),o=a(3734);class h extends o.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new o.ExtendedAttrs,this.combinedData=""}static fromCharData(m){const v=new h;return v.setFromCharData(m),v}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,l.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(m){this.fg=m[f.CHAR_DATA_ATTR_INDEX],this.bg=0;let v=!1;if(m[f.CHAR_DATA_CHAR_INDEX].length>2)v=!0;else if(m[f.CHAR_DATA_CHAR_INDEX].length===2){const e=m[f.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=e&&e<=56319){const r=m[f.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=r&&r<=57343?this.content=1024*(e-55296)+r-56320+65536|m[f.CHAR_DATA_WIDTH_INDEX]<<22:v=!0}else v=!0}else this.content=m[f.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|m[f.CHAR_DATA_WIDTH_INDEX]<<22;v&&(this.combinedData=m[f.CHAR_DATA_CHAR_INDEX],this.content=2097152|m[f.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}s.CellData=h},643:(D,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.WHITESPACE_CELL_CODE=s.WHITESPACE_CELL_WIDTH=s.WHITESPACE_CELL_CHAR=s.NULL_CELL_CODE=s.NULL_CELL_WIDTH=s.NULL_CELL_CHAR=s.CHAR_DATA_CODE_INDEX=s.CHAR_DATA_WIDTH_INDEX=s.CHAR_DATA_CHAR_INDEX=s.CHAR_DATA_ATTR_INDEX=s.DEFAULT_EXT=s.DEFAULT_ATTR=s.DEFAULT_COLOR=void 0,s.DEFAULT_COLOR=0,s.DEFAULT_ATTR=256|s.DEFAULT_COLOR<<9,s.DEFAULT_EXT=0,s.CHAR_DATA_ATTR_INDEX=0,s.CHAR_DATA_CHAR_INDEX=1,s.CHAR_DATA_WIDTH_INDEX=2,s.CHAR_DATA_CODE_INDEX=3,s.NULL_CELL_CHAR="",s.NULL_CELL_WIDTH=1,s.NULL_CELL_CODE=0,s.WHITESPACE_CELL_CHAR=" ",s.WHITESPACE_CELL_WIDTH=1,s.WHITESPACE_CELL_CODE=32},4863:(D,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Marker=void 0;const l=a(8460),f=a(844);class o{get id(){return this._id}constructor(p){this.line=p,this.isDisposed=!1,this._disposables=[],this._id=o._nextId++,this._onDispose=this.register(new l.EventEmitter),this.onDispose=this._onDispose.event}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),(0,f.disposeArray)(this._disposables),this._disposables.length=0)}register(p){return this._disposables.push(p),p}}s.Marker=o,o._nextId=1},7116:(D,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.DEFAULT_CHARSET=s.CHARSETS=void 0,s.CHARSETS={},s.DEFAULT_CHARSET=s.CHARSETS.B,s.CHARSETS[0]={"`":"◆",a:"▒",b:"␉",c:"␌",d:"␍",e:"␊",f:"°",g:"±",h:"␤",i:"␋",j:"┘",k:"┐",l:"┌",m:"└",n:"┼",o:"⎺",p:"⎻",q:"─",r:"⎼",s:"⎽",t:"├",u:"┤",v:"┴",w:"┬",x:"│",y:"≤",z:"≥","{":"π","|":"≠","}":"£","~":"·"},s.CHARSETS.A={"#":"£"},s.CHARSETS.B=void 0,s.CHARSETS[4]={"#":"£","@":"¾","[":"ij","\\":"½","]":"|","{":"¨","|":"f","}":"¼","~":"´"},s.CHARSETS.C=s.CHARSETS[5]={"[":"Ä","\\":"Ö","]":"Å","^":"Ü","`":"é","{":"ä","|":"ö","}":"å","~":"ü"},s.CHARSETS.R={"#":"£","@":"à","[":"°","\\":"ç","]":"§","{":"é","|":"ù","}":"è","~":"¨"},s.CHARSETS.Q={"@":"à","[":"â","\\":"ç","]":"ê","^":"î","`":"ô","{":"é","|":"ù","}":"è","~":"û"},s.CHARSETS.K={"@":"§","[":"Ä","\\":"Ö","]":"Ü","{":"ä","|":"ö","}":"ü","~":"ß"},s.CHARSETS.Y={"#":"£","@":"§","[":"°","\\":"ç","]":"é","`":"ù","{":"à","|":"ò","}":"è","~":"ì"},s.CHARSETS.E=s.CHARSETS[6]={"@":"Ä","[":"Æ","\\":"Ø","]":"Å","^":"Ü","`":"ä","{":"æ","|":"ø","}":"å","~":"ü"},s.CHARSETS.Z={"#":"£","@":"§","[":"¡","\\":"Ñ","]":"¿","{":"°","|":"ñ","}":"ç"},s.CHARSETS.H=s.CHARSETS[7]={"@":"É","[":"Ä","\\":"Ö","]":"Å","^":"Ü","`":"é","{":"ä","|":"ö","}":"å","~":"ü"},s.CHARSETS["="]={"#":"ù","@":"à","[":"é","\\":"ç","]":"ê","^":"î",_:"è","`":"ô","{":"ä","|":"ö","}":"ü","~":"û"}},2584:(D,s)=>{var a,l,f;Object.defineProperty(s,"__esModule",{value:!0}),s.C1_ESCAPED=s.C1=s.C0=void 0,function(o){o.NUL="\0",o.SOH="",o.STX="",o.ETX="",o.EOT="",o.ENQ="",o.ACK="",o.BEL="\x07",o.BS="\b",o.HT="	",o.LF=`
`,o.VT="\v",o.FF="\f",o.CR="\r",o.SO="",o.SI="",o.DLE="",o.DC1="",o.DC2="",o.DC3="",o.DC4="",o.NAK="",o.SYN="",o.ETB="",o.CAN="",o.EM="",o.SUB="",o.ESC="\x1B",o.FS="",o.GS="",o.RS="",o.US="",o.SP=" ",o.DEL=""}(a||(s.C0=a={})),function(o){o.PAD="",o.HOP="",o.BPH="",o.NBH="",o.IND="",o.NEL="",o.SSA="",o.ESA="",o.HTS="",o.HTJ="",o.VTS="",o.PLD="",o.PLU="",o.RI="",o.SS2="",o.SS3="",o.DCS="",o.PU1="",o.PU2="",o.STS="",o.CCH="",o.MW="",o.SPA="",o.EPA="",o.SOS="",o.SGCI="",o.SCI="",o.CSI="",o.ST="",o.OSC="",o.PM="",o.APC=""}(l||(s.C1=l={})),function(o){o.ST=`${a.ESC}\\`}(f||(s.C1_ESCAPED=f={}))},7399:(D,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.evaluateKeyboardEvent=void 0;const l=a(2584),f={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};s.evaluateKeyboardEvent=function(o,h,p,m){const v={type:0,cancel:!1,key:void 0},e=(o.shiftKey?1:0)|(o.altKey?2:0)|(o.ctrlKey?4:0)|(o.metaKey?8:0);switch(o.keyCode){case 0:o.key==="UIKeyInputUpArrow"?v.key=h?l.C0.ESC+"OA":l.C0.ESC+"[A":o.key==="UIKeyInputLeftArrow"?v.key=h?l.C0.ESC+"OD":l.C0.ESC+"[D":o.key==="UIKeyInputRightArrow"?v.key=h?l.C0.ESC+"OC":l.C0.ESC+"[C":o.key==="UIKeyInputDownArrow"&&(v.key=h?l.C0.ESC+"OB":l.C0.ESC+"[B");break;case 8:if(o.altKey){v.key=l.C0.ESC+l.C0.DEL;break}v.key=l.C0.DEL;break;case 9:if(o.shiftKey){v.key=l.C0.ESC+"[Z";break}v.key=l.C0.HT,v.cancel=!0;break;case 13:v.key=o.altKey?l.C0.ESC+l.C0.CR:l.C0.CR,v.cancel=!0;break;case 27:v.key=l.C0.ESC,o.altKey&&(v.key=l.C0.ESC+l.C0.ESC),v.cancel=!0;break;case 37:if(o.metaKey)break;e?(v.key=l.C0.ESC+"[1;"+(e+1)+"D",v.key===l.C0.ESC+"[1;3D"&&(v.key=l.C0.ESC+(p?"b":"[1;5D"))):v.key=h?l.C0.ESC+"OD":l.C0.ESC+"[D";break;case 39:if(o.metaKey)break;e?(v.key=l.C0.ESC+"[1;"+(e+1)+"C",v.key===l.C0.ESC+"[1;3C"&&(v.key=l.C0.ESC+(p?"f":"[1;5C"))):v.key=h?l.C0.ESC+"OC":l.C0.ESC+"[C";break;case 38:if(o.metaKey)break;e?(v.key=l.C0.ESC+"[1;"+(e+1)+"A",p||v.key!==l.C0.ESC+"[1;3A"||(v.key=l.C0.ESC+"[1;5A")):v.key=h?l.C0.ESC+"OA":l.C0.ESC+"[A";break;case 40:if(o.metaKey)break;e?(v.key=l.C0.ESC+"[1;"+(e+1)+"B",p||v.key!==l.C0.ESC+"[1;3B"||(v.key=l.C0.ESC+"[1;5B")):v.key=h?l.C0.ESC+"OB":l.C0.ESC+"[B";break;case 45:o.shiftKey||o.ctrlKey||(v.key=l.C0.ESC+"[2~");break;case 46:v.key=e?l.C0.ESC+"[3;"+(e+1)+"~":l.C0.ESC+"[3~";break;case 36:v.key=e?l.C0.ESC+"[1;"+(e+1)+"H":h?l.C0.ESC+"OH":l.C0.ESC+"[H";break;case 35:v.key=e?l.C0.ESC+"[1;"+(e+1)+"F":h?l.C0.ESC+"OF":l.C0.ESC+"[F";break;case 33:o.shiftKey?v.type=2:o.ctrlKey?v.key=l.C0.ESC+"[5;"+(e+1)+"~":v.key=l.C0.ESC+"[5~";break;case 34:o.shiftKey?v.type=3:o.ctrlKey?v.key=l.C0.ESC+"[6;"+(e+1)+"~":v.key=l.C0.ESC+"[6~";break;case 112:v.key=e?l.C0.ESC+"[1;"+(e+1)+"P":l.C0.ESC+"OP";break;case 113:v.key=e?l.C0.ESC+"[1;"+(e+1)+"Q":l.C0.ESC+"OQ";break;case 114:v.key=e?l.C0.ESC+"[1;"+(e+1)+"R":l.C0.ESC+"OR";break;case 115:v.key=e?l.C0.ESC+"[1;"+(e+1)+"S":l.C0.ESC+"OS";break;case 116:v.key=e?l.C0.ESC+"[15;"+(e+1)+"~":l.C0.ESC+"[15~";break;case 117:v.key=e?l.C0.ESC+"[17;"+(e+1)+"~":l.C0.ESC+"[17~";break;case 118:v.key=e?l.C0.ESC+"[18;"+(e+1)+"~":l.C0.ESC+"[18~";break;case 119:v.key=e?l.C0.ESC+"[19;"+(e+1)+"~":l.C0.ESC+"[19~";break;case 120:v.key=e?l.C0.ESC+"[20;"+(e+1)+"~":l.C0.ESC+"[20~";break;case 121:v.key=e?l.C0.ESC+"[21;"+(e+1)+"~":l.C0.ESC+"[21~";break;case 122:v.key=e?l.C0.ESC+"[23;"+(e+1)+"~":l.C0.ESC+"[23~";break;case 123:v.key=e?l.C0.ESC+"[24;"+(e+1)+"~":l.C0.ESC+"[24~";break;default:if(!o.ctrlKey||o.shiftKey||o.altKey||o.metaKey)if(p&&!m||!o.altKey||o.metaKey)!p||o.altKey||o.ctrlKey||o.shiftKey||!o.metaKey?o.key&&!o.ctrlKey&&!o.altKey&&!o.metaKey&&o.keyCode>=48&&o.key.length===1?v.key=o.key:o.key&&o.ctrlKey&&(o.key==="_"&&(v.key=l.C0.US),o.key==="@"&&(v.key=l.C0.NUL)):o.keyCode===65&&(v.type=1);else{const r=f[o.keyCode],t=r==null?void 0:r[o.shiftKey?1:0];if(t)v.key=l.C0.ESC+t;else if(o.keyCode>=65&&o.keyCode<=90){const i=o.ctrlKey?o.keyCode-64:o.keyCode+32;let c=String.fromCharCode(i);o.shiftKey&&(c=c.toUpperCase()),v.key=l.C0.ESC+c}else if(o.keyCode===32)v.key=l.C0.ESC+(o.ctrlKey?l.C0.NUL:" ");else if(o.key==="Dead"&&o.code.startsWith("Key")){let i=o.code.slice(3,4);o.shiftKey||(i=i.toLowerCase()),v.key=l.C0.ESC+i,v.cancel=!0}}else o.keyCode>=65&&o.keyCode<=90?v.key=String.fromCharCode(o.keyCode-64):o.keyCode===32?v.key=l.C0.NUL:o.keyCode>=51&&o.keyCode<=55?v.key=String.fromCharCode(o.keyCode-51+27):o.keyCode===56?v.key=l.C0.DEL:o.keyCode===219?v.key=l.C0.ESC:o.keyCode===220?v.key=l.C0.FS:o.keyCode===221&&(v.key=l.C0.GS)}return v}},482:(D,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Utf8ToUtf32=s.StringToUtf32=s.utf32ToString=s.stringFromCodePoint=void 0,s.stringFromCodePoint=function(a){return a>65535?(a-=65536,String.fromCharCode(55296+(a>>10))+String.fromCharCode(a%1024+56320)):String.fromCharCode(a)},s.utf32ToString=function(a,l=0,f=a.length){let o="";for(let h=l;h<f;++h){let p=a[h];p>65535?(p-=65536,o+=String.fromCharCode(55296+(p>>10))+String.fromCharCode(p%1024+56320)):o+=String.fromCharCode(p)}return o},s.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(a,l){const f=a.length;if(!f)return 0;let o=0,h=0;if(this._interim){const p=a.charCodeAt(h++);56320<=p&&p<=57343?l[o++]=1024*(this._interim-55296)+p-56320+65536:(l[o++]=this._interim,l[o++]=p),this._interim=0}for(let p=h;p<f;++p){const m=a.charCodeAt(p);if(55296<=m&&m<=56319){if(++p>=f)return this._interim=m,o;const v=a.charCodeAt(p);56320<=v&&v<=57343?l[o++]=1024*(m-55296)+v-56320+65536:(l[o++]=m,l[o++]=v)}else m!==65279&&(l[o++]=m)}return o}},s.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(a,l){const f=a.length;if(!f)return 0;let o,h,p,m,v=0,e=0,r=0;if(this.interim[0]){let c=!1,_=this.interim[0];_&=(224&_)==192?31:(240&_)==224?15:7;let S,y=0;for(;(S=63&this.interim[++y])&&y<4;)_<<=6,_|=S;const d=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,b=d-y;for(;r<b;){if(r>=f)return 0;if(S=a[r++],(192&S)!=128){r--,c=!0;break}this.interim[y++]=S,_<<=6,_|=63&S}c||(d===2?_<128?r--:l[v++]=_:d===3?_<2048||_>=55296&&_<=57343||_===65279||(l[v++]=_):_<65536||_>1114111||(l[v++]=_)),this.interim.fill(0)}const t=f-4;let i=r;for(;i<f;){for(;!(!(i<t)||128&(o=a[i])||128&(h=a[i+1])||128&(p=a[i+2])||128&(m=a[i+3]));)l[v++]=o,l[v++]=h,l[v++]=p,l[v++]=m,i+=4;if(o=a[i++],o<128)l[v++]=o;else if((224&o)==192){if(i>=f)return this.interim[0]=o,v;if(h=a[i++],(192&h)!=128){i--;continue}if(e=(31&o)<<6|63&h,e<128){i--;continue}l[v++]=e}else if((240&o)==224){if(i>=f)return this.interim[0]=o,v;if(h=a[i++],(192&h)!=128){i--;continue}if(i>=f)return this.interim[0]=o,this.interim[1]=h,v;if(p=a[i++],(192&p)!=128){i--;continue}if(e=(15&o)<<12|(63&h)<<6|63&p,e<2048||e>=55296&&e<=57343||e===65279)continue;l[v++]=e}else if((248&o)==240){if(i>=f)return this.interim[0]=o,v;if(h=a[i++],(192&h)!=128){i--;continue}if(i>=f)return this.interim[0]=o,this.interim[1]=h,v;if(p=a[i++],(192&p)!=128){i--;continue}if(i>=f)return this.interim[0]=o,this.interim[1]=h,this.interim[2]=p,v;if(m=a[i++],(192&m)!=128){i--;continue}if(e=(7&o)<<18|(63&h)<<12|(63&p)<<6|63&m,e<65536||e>1114111)continue;l[v++]=e}}return v}}},225:(D,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.UnicodeV6=void 0;const a=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],l=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]];let f;s.UnicodeV6=class{constructor(){if(this.version="6",!f){f=new Uint8Array(65536),f.fill(1),f[0]=0,f.fill(0,1,32),f.fill(0,127,160),f.fill(2,4352,4448),f[9001]=2,f[9002]=2,f.fill(2,11904,42192),f[12351]=1,f.fill(2,44032,55204),f.fill(2,63744,64256),f.fill(2,65040,65050),f.fill(2,65072,65136),f.fill(2,65280,65377),f.fill(2,65504,65511);for(let o=0;o<a.length;++o)f.fill(0,a[o][0],a[o][1]+1)}}wcwidth(o){return o<32?0:o<127?1:o<65536?f[o]:function(h,p){let m,v=0,e=p.length-1;if(h<p[0][0]||h>p[e][1])return!1;for(;e>=v;)if(m=v+e>>1,h>p[m][1])v=m+1;else{if(!(h<p[m][0]))return!0;e=m-1}return!1}(o,l)?0:o>=131072&&o<=196605||o>=196608&&o<=262141?2:1}}},5981:(D,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.WriteBuffer=void 0;const l=a(8460),f=a(844);class o extends f.Disposable{constructor(p){super(),this._action=p,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this.register(new l.EventEmitter),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(p,m){if(m!==void 0&&this._syncCalls>m)return void(this._syncCalls=0);if(this._pendingData+=p.length,this._writeBuffer.push(p),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;let v;for(this._isSyncWriting=!0;v=this._writeBuffer.shift();){this._action(v);const e=this._callbacks.shift();e&&e()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(p,m){if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput)return this._didUserInput=!1,this._pendingData+=p.length,this._writeBuffer.push(p),this._callbacks.push(m),void this._innerWrite();setTimeout(()=>this._innerWrite())}this._pendingData+=p.length,this._writeBuffer.push(p),this._callbacks.push(m)}_innerWrite(p=0,m=!0){const v=p||Date.now();for(;this._writeBuffer.length>this._bufferOffset;){const e=this._writeBuffer[this._bufferOffset],r=this._action(e,m);if(r){const i=c=>Date.now()-v>=12?setTimeout(()=>this._innerWrite(0,c)):this._innerWrite(v,c);return void r.catch(c=>(queueMicrotask(()=>{throw c}),Promise.resolve(!1))).then(i)}const t=this._callbacks[this._bufferOffset];if(t&&t(),this._bufferOffset++,this._pendingData-=e.length,Date.now()-v>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(()=>this._innerWrite())):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}}s.WriteBuffer=o},5941:(D,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.toRgbString=s.parseColor=void 0;const a=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,l=/^[\da-f]+$/;function f(o,h){const p=o.toString(16),m=p.length<2?"0"+p:p;switch(h){case 4:return p[0];case 8:return m;case 12:return(m+m).slice(0,3);default:return m+m}}s.parseColor=function(o){if(!o)return;let h=o.toLowerCase();if(h.indexOf("rgb:")===0){h=h.slice(4);const p=a.exec(h);if(p){const m=p[1]?15:p[4]?255:p[7]?4095:65535;return[Math.round(parseInt(p[1]||p[4]||p[7]||p[10],16)/m*255),Math.round(parseInt(p[2]||p[5]||p[8]||p[11],16)/m*255),Math.round(parseInt(p[3]||p[6]||p[9]||p[12],16)/m*255)]}}else if(h.indexOf("#")===0&&(h=h.slice(1),l.exec(h)&&[3,6,9,12].includes(h.length))){const p=h.length/3,m=[0,0,0];for(let v=0;v<3;++v){const e=parseInt(h.slice(p*v,p*v+p),16);m[v]=p===1?e<<4:p===2?e:p===3?e>>4:e>>8}return m}},s.toRgbString=function(o,h=16){const[p,m,v]=o;return`rgb:${f(p,h)}/${f(m,h)}/${f(v,h)}`}},5770:(D,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.PAYLOAD_LIMIT=void 0,s.PAYLOAD_LIMIT=1e7},6351:(D,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.DcsHandler=s.DcsParser=void 0;const l=a(482),f=a(8742),o=a(5770),h=[];s.DcsParser=class{constructor(){this._handlers=Object.create(null),this._active=h,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=h}registerHandler(m,v){this._handlers[m]===void 0&&(this._handlers[m]=[]);const e=this._handlers[m];return e.push(v),{dispose:()=>{const r=e.indexOf(v);r!==-1&&e.splice(r,1)}}}clearHandler(m){this._handlers[m]&&delete this._handlers[m]}setHandlerFallback(m){this._handlerFb=m}reset(){if(this._active.length)for(let m=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;m>=0;--m)this._active[m].unhook(!1);this._stack.paused=!1,this._active=h,this._ident=0}hook(m,v){if(this.reset(),this._ident=m,this._active=this._handlers[m]||h,this._active.length)for(let e=this._active.length-1;e>=0;e--)this._active[e].hook(v);else this._handlerFb(this._ident,"HOOK",v)}put(m,v,e){if(this._active.length)for(let r=this._active.length-1;r>=0;r--)this._active[r].put(m,v,e);else this._handlerFb(this._ident,"PUT",(0,l.utf32ToString)(m,v,e))}unhook(m,v=!0){if(this._active.length){let e=!1,r=this._active.length-1,t=!1;if(this._stack.paused&&(r=this._stack.loopPosition-1,e=v,t=this._stack.fallThrough,this._stack.paused=!1),!t&&e===!1){for(;r>=0&&(e=this._active[r].unhook(m),e!==!0);r--)if(e instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=r,this._stack.fallThrough=!1,e;r--}for(;r>=0;r--)if(e=this._active[r].unhook(!1),e instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=r,this._stack.fallThrough=!0,e}else this._handlerFb(this._ident,"UNHOOK",m);this._active=h,this._ident=0}};const p=new f.Params;p.addParam(0),s.DcsHandler=class{constructor(m){this._handler=m,this._data="",this._params=p,this._hitLimit=!1}hook(m){this._params=m.length>1||m.params[0]?m.clone():p,this._data="",this._hitLimit=!1}put(m,v,e){this._hitLimit||(this._data+=(0,l.utf32ToString)(m,v,e),this._data.length>o.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}unhook(m){let v=!1;if(this._hitLimit)v=!1;else if(m&&(v=this._handler(this._data,this._params),v instanceof Promise))return v.then(e=>(this._params=p,this._data="",this._hitLimit=!1,e));return this._params=p,this._data="",this._hitLimit=!1,v}}},2015:(D,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.EscapeSequenceParser=s.VT500_TRANSITION_TABLE=s.TransitionTable=void 0;const l=a(844),f=a(8742),o=a(6242),h=a(6351);class p{constructor(r){this.table=new Uint8Array(r)}setDefault(r,t){this.table.fill(r<<4|t)}add(r,t,i,c){this.table[t<<8|r]=i<<4|c}addMany(r,t,i,c){for(let _=0;_<r.length;_++)this.table[t<<8|r[_]]=i<<4|c}}s.TransitionTable=p;const m=160;s.VT500_TRANSITION_TABLE=function(){const e=new p(4095),r=Array.apply(null,Array(256)).map((y,d)=>d),t=(y,d)=>r.slice(y,d),i=t(32,127),c=t(0,24);c.push(25),c.push.apply(c,t(28,32));const _=t(0,14);let S;for(S in e.setDefault(1,0),e.addMany(i,0,2,0),_)e.addMany([24,26,153,154],S,3,0),e.addMany(t(128,144),S,3,0),e.addMany(t(144,152),S,3,0),e.add(156,S,0,0),e.add(27,S,11,1),e.add(157,S,4,8),e.addMany([152,158,159],S,0,7),e.add(155,S,11,3),e.add(144,S,11,9);return e.addMany(c,0,3,0),e.addMany(c,1,3,1),e.add(127,1,0,1),e.addMany(c,8,0,8),e.addMany(c,3,3,3),e.add(127,3,0,3),e.addMany(c,4,3,4),e.add(127,4,0,4),e.addMany(c,6,3,6),e.addMany(c,5,3,5),e.add(127,5,0,5),e.addMany(c,2,3,2),e.add(127,2,0,2),e.add(93,1,4,8),e.addMany(i,8,5,8),e.add(127,8,5,8),e.addMany([156,27,24,26,7],8,6,0),e.addMany(t(28,32),8,0,8),e.addMany([88,94,95],1,0,7),e.addMany(i,7,0,7),e.addMany(c,7,0,7),e.add(156,7,0,0),e.add(127,7,0,7),e.add(91,1,11,3),e.addMany(t(64,127),3,7,0),e.addMany(t(48,60),3,8,4),e.addMany([60,61,62,63],3,9,4),e.addMany(t(48,60),4,8,4),e.addMany(t(64,127),4,7,0),e.addMany([60,61,62,63],4,0,6),e.addMany(t(32,64),6,0,6),e.add(127,6,0,6),e.addMany(t(64,127),6,0,0),e.addMany(t(32,48),3,9,5),e.addMany(t(32,48),5,9,5),e.addMany(t(48,64),5,0,6),e.addMany(t(64,127),5,7,0),e.addMany(t(32,48),4,9,5),e.addMany(t(32,48),1,9,2),e.addMany(t(32,48),2,9,2),e.addMany(t(48,127),2,10,0),e.addMany(t(48,80),1,10,0),e.addMany(t(81,88),1,10,0),e.addMany([89,90,92],1,10,0),e.addMany(t(96,127),1,10,0),e.add(80,1,11,9),e.addMany(c,9,0,9),e.add(127,9,0,9),e.addMany(t(28,32),9,0,9),e.addMany(t(32,48),9,9,12),e.addMany(t(48,60),9,8,10),e.addMany([60,61,62,63],9,9,10),e.addMany(c,11,0,11),e.addMany(t(32,128),11,0,11),e.addMany(t(28,32),11,0,11),e.addMany(c,10,0,10),e.add(127,10,0,10),e.addMany(t(28,32),10,0,10),e.addMany(t(48,60),10,8,10),e.addMany([60,61,62,63],10,0,11),e.addMany(t(32,48),10,9,12),e.addMany(c,12,0,12),e.add(127,12,0,12),e.addMany(t(28,32),12,0,12),e.addMany(t(32,48),12,9,12),e.addMany(t(48,64),12,0,11),e.addMany(t(64,127),12,12,13),e.addMany(t(64,127),10,12,13),e.addMany(t(64,127),9,12,13),e.addMany(c,13,13,13),e.addMany(i,13,13,13),e.add(127,13,0,13),e.addMany([27,156,24,26],13,14,0),e.add(m,0,2,0),e.add(m,8,5,8),e.add(m,6,0,6),e.add(m,11,0,11),e.add(m,13,13,13),e}();class v extends l.Disposable{constructor(r=s.VT500_TRANSITION_TABLE){super(),this._transitions=r,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new f.Params,this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._printHandlerFb=(t,i,c)=>{},this._executeHandlerFb=t=>{},this._csiHandlerFb=(t,i)=>{},this._escHandlerFb=t=>{},this._errorHandlerFb=t=>t,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this.register((0,l.toDisposable)(()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)})),this._oscParser=this.register(new o.OscParser),this._dcsParser=this.register(new h.DcsParser),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},()=>!0)}_identifier(r,t=[64,126]){let i=0;if(r.prefix){if(r.prefix.length>1)throw new Error("only one byte as prefix supported");if(i=r.prefix.charCodeAt(0),i&&60>i||i>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(r.intermediates){if(r.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let _=0;_<r.intermediates.length;++_){const S=r.intermediates.charCodeAt(_);if(32>S||S>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");i<<=8,i|=S}}if(r.final.length!==1)throw new Error("final must be a single byte");const c=r.final.charCodeAt(0);if(t[0]>c||c>t[1])throw new Error(`final must be in range ${t[0]} .. ${t[1]}`);return i<<=8,i|=c,i}identToString(r){const t=[];for(;r;)t.push(String.fromCharCode(255&r)),r>>=8;return t.reverse().join("")}setPrintHandler(r){this._printHandler=r}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(r,t){const i=this._identifier(r,[48,126]);this._escHandlers[i]===void 0&&(this._escHandlers[i]=[]);const c=this._escHandlers[i];return c.push(t),{dispose:()=>{const _=c.indexOf(t);_!==-1&&c.splice(_,1)}}}clearEscHandler(r){this._escHandlers[this._identifier(r,[48,126])]&&delete this._escHandlers[this._identifier(r,[48,126])]}setEscHandlerFallback(r){this._escHandlerFb=r}setExecuteHandler(r,t){this._executeHandlers[r.charCodeAt(0)]=t}clearExecuteHandler(r){this._executeHandlers[r.charCodeAt(0)]&&delete this._executeHandlers[r.charCodeAt(0)]}setExecuteHandlerFallback(r){this._executeHandlerFb=r}registerCsiHandler(r,t){const i=this._identifier(r);this._csiHandlers[i]===void 0&&(this._csiHandlers[i]=[]);const c=this._csiHandlers[i];return c.push(t),{dispose:()=>{const _=c.indexOf(t);_!==-1&&c.splice(_,1)}}}clearCsiHandler(r){this._csiHandlers[this._identifier(r)]&&delete this._csiHandlers[this._identifier(r)]}setCsiHandlerFallback(r){this._csiHandlerFb=r}registerDcsHandler(r,t){return this._dcsParser.registerHandler(this._identifier(r),t)}clearDcsHandler(r){this._dcsParser.clearHandler(this._identifier(r))}setDcsHandlerFallback(r){this._dcsParser.setHandlerFallback(r)}registerOscHandler(r,t){return this._oscParser.registerHandler(r,t)}clearOscHandler(r){this._oscParser.clearHandler(r)}setOscHandlerFallback(r){this._oscParser.setHandlerFallback(r)}setErrorHandler(r){this._errorHandler=r}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(r,t,i,c,_){this._parseStack.state=r,this._parseStack.handlers=t,this._parseStack.handlerPos=i,this._parseStack.transition=c,this._parseStack.chunkPos=_}parse(r,t,i){let c,_=0,S=0,y=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,y=this._parseStack.chunkPos+1;else{if(i===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");const d=this._parseStack.handlers;let b=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(i===!1&&b>-1){for(;b>=0&&(c=d[b](this._params),c!==!0);b--)if(c instanceof Promise)return this._parseStack.handlerPos=b,c}this._parseStack.handlers=[];break;case 4:if(i===!1&&b>-1){for(;b>=0&&(c=d[b](),c!==!0);b--)if(c instanceof Promise)return this._parseStack.handlerPos=b,c}this._parseStack.handlers=[];break;case 6:if(_=r[this._parseStack.chunkPos],c=this._dcsParser.unhook(_!==24&&_!==26,i),c)return c;_===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(_=r[this._parseStack.chunkPos],c=this._oscParser.end(_!==24&&_!==26,i),c)return c;_===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,y=this._parseStack.chunkPos+1,this.precedingCodepoint=0,this.currentState=15&this._parseStack.transition}for(let d=y;d<t;++d){switch(_=r[d],S=this._transitions.table[this.currentState<<8|(_<160?_:m)],S>>4){case 2:for(let M=d+1;;++M){if(M>=t||(_=r[M])<32||_>126&&_<m){this._printHandler(r,d,M),d=M-1;break}if(++M>=t||(_=r[M])<32||_>126&&_<m){this._printHandler(r,d,M),d=M-1;break}if(++M>=t||(_=r[M])<32||_>126&&_<m){this._printHandler(r,d,M),d=M-1;break}if(++M>=t||(_=r[M])<32||_>126&&_<m){this._printHandler(r,d,M),d=M-1;break}}break;case 3:this._executeHandlers[_]?this._executeHandlers[_]():this._executeHandlerFb(_),this.precedingCodepoint=0;break;case 0:break;case 1:if(this._errorHandler({position:d,code:_,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:const b=this._csiHandlers[this._collect<<8|_];let R=b?b.length-1:-1;for(;R>=0&&(c=b[R](this._params),c!==!0);R--)if(c instanceof Promise)return this._preserveStack(3,b,R,S,d),c;R<0&&this._csiHandlerFb(this._collect<<8|_,this._params),this.precedingCodepoint=0;break;case 8:do switch(_){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(_-48)}while(++d<t&&(_=r[d])>47&&_<60);d--;break;case 9:this._collect<<=8,this._collect|=_;break;case 10:const O=this._escHandlers[this._collect<<8|_];let A=O?O.length-1:-1;for(;A>=0&&(c=O[A](),c!==!0);A--)if(c instanceof Promise)return this._preserveStack(4,O,A,S,d),c;A<0&&this._escHandlerFb(this._collect<<8|_),this.precedingCodepoint=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|_,this._params);break;case 13:for(let M=d+1;;++M)if(M>=t||(_=r[M])===24||_===26||_===27||_>127&&_<m){this._dcsParser.put(r,d,M),d=M-1;break}break;case 14:if(c=this._dcsParser.unhook(_!==24&&_!==26),c)return this._preserveStack(6,[],0,S,d),c;_===27&&(S|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0;break;case 4:this._oscParser.start();break;case 5:for(let M=d+1;;M++)if(M>=t||(_=r[M])<32||_>127&&_<m){this._oscParser.put(r,d,M),d=M-1;break}break;case 6:if(c=this._oscParser.end(_!==24&&_!==26),c)return this._preserveStack(5,[],0,S,d),c;_===27&&(S|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0}this.currentState=15&S}}}s.EscapeSequenceParser=v},6242:(D,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.OscHandler=s.OscParser=void 0;const l=a(5770),f=a(482),o=[];s.OscParser=class{constructor(){this._state=0,this._active=o,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(h,p){this._handlers[h]===void 0&&(this._handlers[h]=[]);const m=this._handlers[h];return m.push(p),{dispose:()=>{const v=m.indexOf(p);v!==-1&&m.splice(v,1)}}}clearHandler(h){this._handlers[h]&&delete this._handlers[h]}setHandlerFallback(h){this._handlerFb=h}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=o}reset(){if(this._state===2)for(let h=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;h>=0;--h)this._active[h].end(!1);this._stack.paused=!1,this._active=o,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||o,this._active.length)for(let h=this._active.length-1;h>=0;h--)this._active[h].start();else this._handlerFb(this._id,"START")}_put(h,p,m){if(this._active.length)for(let v=this._active.length-1;v>=0;v--)this._active[v].put(h,p,m);else this._handlerFb(this._id,"PUT",(0,f.utf32ToString)(h,p,m))}start(){this.reset(),this._state=1}put(h,p,m){if(this._state!==3){if(this._state===1)for(;p<m;){const v=h[p++];if(v===59){this._state=2,this._start();break}if(v<48||57<v)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+v-48}this._state===2&&m-p>0&&this._put(h,p,m)}}end(h,p=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){let m=!1,v=this._active.length-1,e=!1;if(this._stack.paused&&(v=this._stack.loopPosition-1,m=p,e=this._stack.fallThrough,this._stack.paused=!1),!e&&m===!1){for(;v>=0&&(m=this._active[v].end(h),m!==!0);v--)if(m instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=v,this._stack.fallThrough=!1,m;v--}for(;v>=0;v--)if(m=this._active[v].end(!1),m instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=v,this._stack.fallThrough=!0,m}else this._handlerFb(this._id,"END",h);this._active=o,this._id=-1,this._state=0}}},s.OscHandler=class{constructor(h){this._handler=h,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(h,p,m){this._hitLimit||(this._data+=(0,f.utf32ToString)(h,p,m),this._data.length>l.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}end(h){let p=!1;if(this._hitLimit)p=!1;else if(h&&(p=this._handler(this._data),p instanceof Promise))return p.then(m=>(this._data="",this._hitLimit=!1,m));return this._data="",this._hitLimit=!1,p}}},8742:(D,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Params=void 0;const a=2147483647;class l{static fromArray(o){const h=new l;if(!o.length)return h;for(let p=Array.isArray(o[0])?1:0;p<o.length;++p){const m=o[p];if(Array.isArray(m))for(let v=0;v<m.length;++v)h.addSubParam(m[v]);else h.addParam(m)}return h}constructor(o=32,h=32){if(this.maxLength=o,this.maxSubParamsLength=h,h>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(o),this.length=0,this._subParams=new Int32Array(h),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(o),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}clone(){const o=new l(this.maxLength,this.maxSubParamsLength);return o.params.set(this.params),o.length=this.length,o._subParams.set(this._subParams),o._subParamsLength=this._subParamsLength,o._subParamsIdx.set(this._subParamsIdx),o._rejectDigits=this._rejectDigits,o._rejectSubDigits=this._rejectSubDigits,o._digitIsSub=this._digitIsSub,o}toArray(){const o=[];for(let h=0;h<this.length;++h){o.push(this.params[h]);const p=this._subParamsIdx[h]>>8,m=255&this._subParamsIdx[h];m-p>0&&o.push(Array.prototype.slice.call(this._subParams,p,m))}return o}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(o){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(o<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=o>a?a:o}}addSubParam(o){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(o<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=o>a?a:o,this._subParamsIdx[this.length-1]++}}hasSubParams(o){return(255&this._subParamsIdx[o])-(this._subParamsIdx[o]>>8)>0}getSubParams(o){const h=this._subParamsIdx[o]>>8,p=255&this._subParamsIdx[o];return p-h>0?this._subParams.subarray(h,p):null}getSubParamsAll(){const o={};for(let h=0;h<this.length;++h){const p=this._subParamsIdx[h]>>8,m=255&this._subParamsIdx[h];m-p>0&&(o[h]=this._subParams.slice(p,m))}return o}addDigit(o){let h;if(this._rejectDigits||!(h=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;const p=this._digitIsSub?this._subParams:this.params,m=p[h-1];p[h-1]=~m?Math.min(10*m+o,a):o}}s.Params=l},5741:(D,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.AddonManager=void 0,s.AddonManager=class{constructor(){this._addons=[]}dispose(){for(let a=this._addons.length-1;a>=0;a--)this._addons[a].instance.dispose()}loadAddon(a,l){const f={instance:l,dispose:l.dispose,isDisposed:!1};this._addons.push(f),l.dispose=()=>this._wrappedAddonDispose(f),l.activate(a)}_wrappedAddonDispose(a){if(a.isDisposed)return;let l=-1;for(let f=0;f<this._addons.length;f++)if(this._addons[f]===a){l=f;break}if(l===-1)throw new Error("Could not dispose an addon that has not been loaded");a.isDisposed=!0,a.dispose.apply(a.instance),this._addons.splice(l,1)}}},8771:(D,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BufferApiView=void 0;const l=a(3785),f=a(511);s.BufferApiView=class{constructor(o,h){this._buffer=o,this.type=h}init(o){return this._buffer=o,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(o){const h=this._buffer.lines.get(o);if(h)return new l.BufferLineApiView(h)}getNullCell(){return new f.CellData}}},3785:(D,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BufferLineApiView=void 0;const l=a(511);s.BufferLineApiView=class{constructor(f){this._line=f}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(f,o){if(!(f<0||f>=this._line.length))return o?(this._line.loadCell(f,o),o):this._line.loadCell(f,new l.CellData)}translateToString(f,o,h){return this._line.translateToString(f,o,h)}}},8285:(D,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BufferNamespaceApi=void 0;const l=a(8771),f=a(8460),o=a(844);class h extends o.Disposable{constructor(m){super(),this._core=m,this._onBufferChange=this.register(new f.EventEmitter),this.onBufferChange=this._onBufferChange.event,this._normal=new l.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new l.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(()=>this._onBufferChange.fire(this.active))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}}s.BufferNamespaceApi=h},7975:(D,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ParserApi=void 0,s.ParserApi=class{constructor(a){this._core=a}registerCsiHandler(a,l){return this._core.registerCsiHandler(a,f=>l(f.toArray()))}addCsiHandler(a,l){return this.registerCsiHandler(a,l)}registerDcsHandler(a,l){return this._core.registerDcsHandler(a,(f,o)=>l(f,o.toArray()))}addDcsHandler(a,l){return this.registerDcsHandler(a,l)}registerEscHandler(a,l){return this._core.registerEscHandler(a,l)}addEscHandler(a,l){return this.registerEscHandler(a,l)}registerOscHandler(a,l){return this._core.registerOscHandler(a,l)}addOscHandler(a,l){return this.registerOscHandler(a,l)}}},7090:(D,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.UnicodeApi=void 0,s.UnicodeApi=class{constructor(a){this._core=a}register(a){this._core.unicodeService.register(a)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(a){this._core.unicodeService.activeVersion=a}}},744:function(D,s,a){var l=this&&this.__decorate||function(e,r,t,i){var c,_=arguments.length,S=_<3?r:i===null?i=Object.getOwnPropertyDescriptor(r,t):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(e,r,t,i);else for(var y=e.length-1;y>=0;y--)(c=e[y])&&(S=(_<3?c(S):_>3?c(r,t,S):c(r,t))||S);return _>3&&S&&Object.defineProperty(r,t,S),S},f=this&&this.__param||function(e,r){return function(t,i){r(t,i,e)}};Object.defineProperty(s,"__esModule",{value:!0}),s.BufferService=s.MINIMUM_ROWS=s.MINIMUM_COLS=void 0;const o=a(8460),h=a(844),p=a(5295),m=a(2585);s.MINIMUM_COLS=2,s.MINIMUM_ROWS=1;let v=s.BufferService=class extends h.Disposable{get buffer(){return this.buffers.active}constructor(e){super(),this.isUserScrolling=!1,this._onResize=this.register(new o.EventEmitter),this.onResize=this._onResize.event,this._onScroll=this.register(new o.EventEmitter),this.onScroll=this._onScroll.event,this.cols=Math.max(e.rawOptions.cols||0,s.MINIMUM_COLS),this.rows=Math.max(e.rawOptions.rows||0,s.MINIMUM_ROWS),this.buffers=this.register(new p.BufferSet(e,this))}resize(e,r){this.cols=e,this.rows=r,this.buffers.resize(e,r),this._onResize.fire({cols:e,rows:r})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(e,r=!1){const t=this.buffer;let i;i=this._cachedBlankLine,i&&i.length===this.cols&&i.getFg(0)===e.fg&&i.getBg(0)===e.bg||(i=t.getBlankLine(e,r),this._cachedBlankLine=i),i.isWrapped=r;const c=t.ybase+t.scrollTop,_=t.ybase+t.scrollBottom;if(t.scrollTop===0){const S=t.lines.isFull;_===t.lines.length-1?S?t.lines.recycle().copyFrom(i):t.lines.push(i.clone()):t.lines.splice(_+1,0,i.clone()),S?this.isUserScrolling&&(t.ydisp=Math.max(t.ydisp-1,0)):(t.ybase++,this.isUserScrolling||t.ydisp++)}else{const S=_-c+1;t.lines.shiftElements(c+1,S-1,-1),t.lines.set(_,i.clone())}this.isUserScrolling||(t.ydisp=t.ybase),this._onScroll.fire(t.ydisp)}scrollLines(e,r,t){const i=this.buffer;if(e<0){if(i.ydisp===0)return;this.isUserScrolling=!0}else e+i.ydisp>=i.ybase&&(this.isUserScrolling=!1);const c=i.ydisp;i.ydisp=Math.max(Math.min(i.ydisp+e,i.ybase),0),c!==i.ydisp&&(r||this._onScroll.fire(i.ydisp))}};s.BufferService=v=l([f(0,m.IOptionsService)],v)},7994:(D,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CharsetService=void 0,s.CharsetService=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(a){this.glevel=a,this.charset=this._charsets[a]}setgCharset(a,l){this._charsets[a]=l,this.glevel===a&&(this.charset=l)}}},1753:function(D,s,a){var l=this&&this.__decorate||function(i,c,_,S){var y,d=arguments.length,b=d<3?c:S===null?S=Object.getOwnPropertyDescriptor(c,_):S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(i,c,_,S);else for(var R=i.length-1;R>=0;R--)(y=i[R])&&(b=(d<3?y(b):d>3?y(c,_,b):y(c,_))||b);return d>3&&b&&Object.defineProperty(c,_,b),b},f=this&&this.__param||function(i,c){return function(_,S){c(_,S,i)}};Object.defineProperty(s,"__esModule",{value:!0}),s.CoreMouseService=void 0;const o=a(2585),h=a(8460),p=a(844),m={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:i=>i.button!==4&&i.action===1&&(i.ctrl=!1,i.alt=!1,i.shift=!1,!0)},VT200:{events:19,restrict:i=>i.action!==32},DRAG:{events:23,restrict:i=>i.action!==32||i.button!==3},ANY:{events:31,restrict:i=>!0}};function v(i,c){let _=(i.ctrl?16:0)|(i.shift?4:0)|(i.alt?8:0);return i.button===4?(_|=64,_|=i.action):(_|=3&i.button,4&i.button&&(_|=64),8&i.button&&(_|=128),i.action===32?_|=32:i.action!==0||c||(_|=3)),_}const e=String.fromCharCode,r={DEFAULT:i=>{const c=[v(i,!1)+32,i.col+32,i.row+32];return c[0]>255||c[1]>255||c[2]>255?"":`\x1B[M${e(c[0])}${e(c[1])}${e(c[2])}`},SGR:i=>{const c=i.action===0&&i.button!==4?"m":"M";return`\x1B[<${v(i,!0)};${i.col};${i.row}${c}`},SGR_PIXELS:i=>{const c=i.action===0&&i.button!==4?"m":"M";return`\x1B[<${v(i,!0)};${i.x};${i.y}${c}`}};let t=s.CoreMouseService=class extends p.Disposable{constructor(i,c){super(),this._bufferService=i,this._coreService=c,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._onProtocolChange=this.register(new h.EventEmitter),this.onProtocolChange=this._onProtocolChange.event;for(const _ of Object.keys(m))this.addProtocol(_,m[_]);for(const _ of Object.keys(r))this.addEncoding(_,r[_]);this.reset()}addProtocol(i,c){this._protocols[i]=c}addEncoding(i,c){this._encodings[i]=c}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(i){if(!this._protocols[i])throw new Error(`unknown protocol "${i}"`);this._activeProtocol=i,this._onProtocolChange.fire(this._protocols[i].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(i){if(!this._encodings[i])throw new Error(`unknown encoding "${i}"`);this._activeEncoding=i}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null}triggerMouseEvent(i){if(i.col<0||i.col>=this._bufferService.cols||i.row<0||i.row>=this._bufferService.rows||i.button===4&&i.action===32||i.button===3&&i.action!==32||i.button!==4&&(i.action===2||i.action===3)||(i.col++,i.row++,i.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,i,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(i))return!1;const c=this._encodings[this._activeEncoding](i);return c&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(c):this._coreService.triggerDataEvent(c,!0)),this._lastEvent=i,!0}explainEvents(i){return{down:!!(1&i),up:!!(2&i),drag:!!(4&i),move:!!(8&i),wheel:!!(16&i)}}_equalEvents(i,c,_){if(_){if(i.x!==c.x||i.y!==c.y)return!1}else if(i.col!==c.col||i.row!==c.row)return!1;return i.button===c.button&&i.action===c.action&&i.ctrl===c.ctrl&&i.alt===c.alt&&i.shift===c.shift}};s.CoreMouseService=t=l([f(0,o.IBufferService),f(1,o.ICoreService)],t)},6975:function(D,s,a){var l=this&&this.__decorate||function(t,i,c,_){var S,y=arguments.length,d=y<3?i:_===null?_=Object.getOwnPropertyDescriptor(i,c):_;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(t,i,c,_);else for(var b=t.length-1;b>=0;b--)(S=t[b])&&(d=(y<3?S(d):y>3?S(i,c,d):S(i,c))||d);return y>3&&d&&Object.defineProperty(i,c,d),d},f=this&&this.__param||function(t,i){return function(c,_){i(c,_,t)}};Object.defineProperty(s,"__esModule",{value:!0}),s.CoreService=void 0;const o=a(1439),h=a(8460),p=a(844),m=a(2585),v=Object.freeze({insertMode:!1}),e=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0});let r=s.CoreService=class extends p.Disposable{constructor(t,i,c){super(),this._bufferService=t,this._logService=i,this._optionsService=c,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this.register(new h.EventEmitter),this.onData=this._onData.event,this._onUserInput=this.register(new h.EventEmitter),this.onUserInput=this._onUserInput.event,this._onBinary=this.register(new h.EventEmitter),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this.register(new h.EventEmitter),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=(0,o.clone)(v),this.decPrivateModes=(0,o.clone)(e)}reset(){this.modes=(0,o.clone)(v),this.decPrivateModes=(0,o.clone)(e)}triggerDataEvent(t,i=!1){if(this._optionsService.rawOptions.disableStdin)return;const c=this._bufferService.buffer;i&&this._optionsService.rawOptions.scrollOnUserInput&&c.ybase!==c.ydisp&&this._onRequestScrollToBottom.fire(),i&&this._onUserInput.fire(),this._logService.debug(`sending data "${t}"`,()=>t.split("").map(_=>_.charCodeAt(0))),this._onData.fire(t)}triggerBinaryEvent(t){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${t}"`,()=>t.split("").map(i=>i.charCodeAt(0))),this._onBinary.fire(t))}};s.CoreService=r=l([f(0,m.IBufferService),f(1,m.ILogService),f(2,m.IOptionsService)],r)},9074:(D,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.DecorationService=void 0;const l=a(8055),f=a(8460),o=a(844),h=a(6106);let p=0,m=0;class v extends o.Disposable{get decorations(){return this._decorations.values()}constructor(){super(),this._decorations=new h.SortedList(t=>t==null?void 0:t.marker.line),this._onDecorationRegistered=this.register(new f.EventEmitter),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this.register(new f.EventEmitter),this.onDecorationRemoved=this._onDecorationRemoved.event,this.register((0,o.toDisposable)(()=>this.reset()))}registerDecoration(t){if(t.marker.isDisposed)return;const i=new e(t);if(i){const c=i.marker.onDispose(()=>i.dispose());i.onDispose(()=>{i&&(this._decorations.delete(i)&&this._onDecorationRemoved.fire(i),c.dispose())}),this._decorations.insert(i),this._onDecorationRegistered.fire(i)}return i}reset(){for(const t of this._decorations.values())t.dispose();this._decorations.clear()}*getDecorationsAtCell(t,i,c){var _,S,y;let d=0,b=0;for(const R of this._decorations.getKeyIterator(i))d=(_=R.options.x)!==null&&_!==void 0?_:0,b=d+((S=R.options.width)!==null&&S!==void 0?S:1),t>=d&&t<b&&(!c||((y=R.options.layer)!==null&&y!==void 0?y:"bottom")===c)&&(yield R)}forEachDecorationAtCell(t,i,c,_){this._decorations.forEachByKey(i,S=>{var y,d,b;p=(y=S.options.x)!==null&&y!==void 0?y:0,m=p+((d=S.options.width)!==null&&d!==void 0?d:1),t>=p&&t<m&&(!c||((b=S.options.layer)!==null&&b!==void 0?b:"bottom")===c)&&_(S)})}}s.DecorationService=v;class e extends o.Disposable{get isDisposed(){return this._isDisposed}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=l.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=l.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}constructor(t){super(),this.options=t,this.onRenderEmitter=this.register(new f.EventEmitter),this.onRender=this.onRenderEmitter.event,this._onDispose=this.register(new f.EventEmitter),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=t.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}dispose(){this._onDispose.fire(),super.dispose()}}},4348:(D,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.InstantiationService=s.ServiceCollection=void 0;const l=a(2585),f=a(8343);class o{constructor(...p){this._entries=new Map;for(const[m,v]of p)this.set(m,v)}set(p,m){const v=this._entries.get(p);return this._entries.set(p,m),v}forEach(p){for(const[m,v]of this._entries.entries())p(m,v)}has(p){return this._entries.has(p)}get(p){return this._entries.get(p)}}s.ServiceCollection=o,s.InstantiationService=class{constructor(){this._services=new o,this._services.set(l.IInstantiationService,this)}setService(h,p){this._services.set(h,p)}getService(h){return this._services.get(h)}createInstance(h,...p){const m=(0,f.getServiceDependencies)(h).sort((r,t)=>r.index-t.index),v=[];for(const r of m){const t=this._services.get(r.id);if(!t)throw new Error(`[createInstance] ${h.name} depends on UNKNOWN service ${r.id}.`);v.push(t)}const e=m.length>0?m[0].index:p.length;if(p.length!==e)throw new Error(`[createInstance] First service dependency of ${h.name} at position ${e+1} conflicts with ${p.length} static arguments`);return new h(...p,...v)}}},7866:function(D,s,a){var l=this&&this.__decorate||function(e,r,t,i){var c,_=arguments.length,S=_<3?r:i===null?i=Object.getOwnPropertyDescriptor(r,t):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(e,r,t,i);else for(var y=e.length-1;y>=0;y--)(c=e[y])&&(S=(_<3?c(S):_>3?c(r,t,S):c(r,t))||S);return _>3&&S&&Object.defineProperty(r,t,S),S},f=this&&this.__param||function(e,r){return function(t,i){r(t,i,e)}};Object.defineProperty(s,"__esModule",{value:!0}),s.traceCall=s.setTraceLogger=s.LogService=void 0;const o=a(844),h=a(2585),p={trace:h.LogLevelEnum.TRACE,debug:h.LogLevelEnum.DEBUG,info:h.LogLevelEnum.INFO,warn:h.LogLevelEnum.WARN,error:h.LogLevelEnum.ERROR,off:h.LogLevelEnum.OFF};let m,v=s.LogService=class extends o.Disposable{get logLevel(){return this._logLevel}constructor(e){super(),this._optionsService=e,this._logLevel=h.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),m=this}_updateLogLevel(){this._logLevel=p[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(e){for(let r=0;r<e.length;r++)typeof e[r]=="function"&&(e[r]=e[r]())}_log(e,r,t){this._evalLazyOptionalParams(t),e.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+r,...t)}trace(e,...r){var t,i;this._logLevel<=h.LogLevelEnum.TRACE&&this._log((i=(t=this._optionsService.options.logger)===null||t===void 0?void 0:t.trace.bind(this._optionsService.options.logger))!==null&&i!==void 0?i:console.log,e,r)}debug(e,...r){var t,i;this._logLevel<=h.LogLevelEnum.DEBUG&&this._log((i=(t=this._optionsService.options.logger)===null||t===void 0?void 0:t.debug.bind(this._optionsService.options.logger))!==null&&i!==void 0?i:console.log,e,r)}info(e,...r){var t,i;this._logLevel<=h.LogLevelEnum.INFO&&this._log((i=(t=this._optionsService.options.logger)===null||t===void 0?void 0:t.info.bind(this._optionsService.options.logger))!==null&&i!==void 0?i:console.info,e,r)}warn(e,...r){var t,i;this._logLevel<=h.LogLevelEnum.WARN&&this._log((i=(t=this._optionsService.options.logger)===null||t===void 0?void 0:t.warn.bind(this._optionsService.options.logger))!==null&&i!==void 0?i:console.warn,e,r)}error(e,...r){var t,i;this._logLevel<=h.LogLevelEnum.ERROR&&this._log((i=(t=this._optionsService.options.logger)===null||t===void 0?void 0:t.error.bind(this._optionsService.options.logger))!==null&&i!==void 0?i:console.error,e,r)}};s.LogService=v=l([f(0,h.IOptionsService)],v),s.setTraceLogger=function(e){m=e},s.traceCall=function(e,r,t){if(typeof t.value!="function")throw new Error("not supported");const i=t.value;t.value=function(...c){if(m.logLevel!==h.LogLevelEnum.TRACE)return i.apply(this,c);m.trace(`GlyphRenderer#${i.name}(${c.map(S=>JSON.stringify(S)).join(", ")})`);const _=i.apply(this,c);return m.trace(`GlyphRenderer#${i.name} return`,_),_}}},7302:(D,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.OptionsService=s.DEFAULT_OPTIONS=void 0;const l=a(8460),f=a(844),o=a(6114);s.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rightClickSelectsWord:o.isMac,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:0};const h=["normal","bold","100","200","300","400","500","600","700","800","900"];class p extends f.Disposable{constructor(v){super(),this._onOptionChange=this.register(new l.EventEmitter),this.onOptionChange=this._onOptionChange.event;const e=Object.assign({},s.DEFAULT_OPTIONS);for(const r in v)if(r in e)try{const t=v[r];e[r]=this._sanitizeAndValidateOption(r,t)}catch(t){console.error(t)}this.rawOptions=e,this.options=Object.assign({},e),this._setupOptions()}onSpecificOptionChange(v,e){return this.onOptionChange(r=>{r===v&&e(this.rawOptions[v])})}onMultipleOptionChange(v,e){return this.onOptionChange(r=>{v.indexOf(r)!==-1&&e()})}_setupOptions(){const v=r=>{if(!(r in s.DEFAULT_OPTIONS))throw new Error(`No option with key "${r}"`);return this.rawOptions[r]},e=(r,t)=>{if(!(r in s.DEFAULT_OPTIONS))throw new Error(`No option with key "${r}"`);t=this._sanitizeAndValidateOption(r,t),this.rawOptions[r]!==t&&(this.rawOptions[r]=t,this._onOptionChange.fire(r))};for(const r in this.rawOptions){const t={get:v.bind(this,r),set:e.bind(this,r)};Object.defineProperty(this.options,r,t)}}_sanitizeAndValidateOption(v,e){switch(v){case"cursorStyle":if(e||(e=s.DEFAULT_OPTIONS[v]),!function(r){return r==="block"||r==="underline"||r==="bar"}(e))throw new Error(`"${e}" is not a valid value for ${v}`);break;case"wordSeparator":e||(e=s.DEFAULT_OPTIONS[v]);break;case"fontWeight":case"fontWeightBold":if(typeof e=="number"&&1<=e&&e<=1e3)break;e=h.includes(e)?e:s.DEFAULT_OPTIONS[v];break;case"cursorWidth":e=Math.floor(e);case"lineHeight":case"tabStopWidth":if(e<1)throw new Error(`${v} cannot be less than 1, value: ${e}`);break;case"minimumContrastRatio":e=Math.max(1,Math.min(21,Math.round(10*e)/10));break;case"scrollback":if((e=Math.min(e,4294967295))<0)throw new Error(`${v} cannot be less than 0, value: ${e}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(e<=0)throw new Error(`${v} cannot be less than or equal to 0, value: ${e}`);break;case"rows":case"cols":if(!e&&e!==0)throw new Error(`${v} must be numeric, value: ${e}`);break;case"windowsPty":e=e??{}}return e}}s.OptionsService=p},2660:function(D,s,a){var l=this&&this.__decorate||function(p,m,v,e){var r,t=arguments.length,i=t<3?m:e===null?e=Object.getOwnPropertyDescriptor(m,v):e;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(p,m,v,e);else for(var c=p.length-1;c>=0;c--)(r=p[c])&&(i=(t<3?r(i):t>3?r(m,v,i):r(m,v))||i);return t>3&&i&&Object.defineProperty(m,v,i),i},f=this&&this.__param||function(p,m){return function(v,e){m(v,e,p)}};Object.defineProperty(s,"__esModule",{value:!0}),s.OscLinkService=void 0;const o=a(2585);let h=s.OscLinkService=class{constructor(p){this._bufferService=p,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(p){const m=this._bufferService.buffer;if(p.id===void 0){const c=m.addMarker(m.ybase+m.y),_={data:p,id:this._nextId++,lines:[c]};return c.onDispose(()=>this._removeMarkerFromLink(_,c)),this._dataByLinkId.set(_.id,_),_.id}const v=p,e=this._getEntryIdKey(v),r=this._entriesWithId.get(e);if(r)return this.addLineToLink(r.id,m.ybase+m.y),r.id;const t=m.addMarker(m.ybase+m.y),i={id:this._nextId++,key:this._getEntryIdKey(v),data:v,lines:[t]};return t.onDispose(()=>this._removeMarkerFromLink(i,t)),this._entriesWithId.set(i.key,i),this._dataByLinkId.set(i.id,i),i.id}addLineToLink(p,m){const v=this._dataByLinkId.get(p);if(v&&v.lines.every(e=>e.line!==m)){const e=this._bufferService.buffer.addMarker(m);v.lines.push(e),e.onDispose(()=>this._removeMarkerFromLink(v,e))}}getLinkData(p){var m;return(m=this._dataByLinkId.get(p))===null||m===void 0?void 0:m.data}_getEntryIdKey(p){return`${p.id};;${p.uri}`}_removeMarkerFromLink(p,m){const v=p.lines.indexOf(m);v!==-1&&(p.lines.splice(v,1),p.lines.length===0&&(p.data.id!==void 0&&this._entriesWithId.delete(p.key),this._dataByLinkId.delete(p.id)))}};s.OscLinkService=h=l([f(0,o.IBufferService)],h)},8343:(D,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.createDecorator=s.getServiceDependencies=s.serviceRegistry=void 0;const a="di$target",l="di$dependencies";s.serviceRegistry=new Map,s.getServiceDependencies=function(f){return f[l]||[]},s.createDecorator=function(f){if(s.serviceRegistry.has(f))return s.serviceRegistry.get(f);const o=function(h,p,m){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(v,e,r){e[a]===e?e[l].push({id:v,index:r}):(e[l]=[{id:v,index:r}],e[a]=e)})(o,h,m)};return o.toString=()=>f,s.serviceRegistry.set(f,o),o}},2585:(D,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.IDecorationService=s.IUnicodeService=s.IOscLinkService=s.IOptionsService=s.ILogService=s.LogLevelEnum=s.IInstantiationService=s.ICharsetService=s.ICoreService=s.ICoreMouseService=s.IBufferService=void 0;const l=a(8343);var f;s.IBufferService=(0,l.createDecorator)("BufferService"),s.ICoreMouseService=(0,l.createDecorator)("CoreMouseService"),s.ICoreService=(0,l.createDecorator)("CoreService"),s.ICharsetService=(0,l.createDecorator)("CharsetService"),s.IInstantiationService=(0,l.createDecorator)("InstantiationService"),function(o){o[o.TRACE=0]="TRACE",o[o.DEBUG=1]="DEBUG",o[o.INFO=2]="INFO",o[o.WARN=3]="WARN",o[o.ERROR=4]="ERROR",o[o.OFF=5]="OFF"}(f||(s.LogLevelEnum=f={})),s.ILogService=(0,l.createDecorator)("LogService"),s.IOptionsService=(0,l.createDecorator)("OptionsService"),s.IOscLinkService=(0,l.createDecorator)("OscLinkService"),s.IUnicodeService=(0,l.createDecorator)("UnicodeService"),s.IDecorationService=(0,l.createDecorator)("DecorationService")},1480:(D,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.UnicodeService=void 0;const l=a(8460),f=a(225);s.UnicodeService=class{constructor(){this._providers=Object.create(null),this._active="",this._onChange=new l.EventEmitter,this.onChange=this._onChange.event;const o=new f.UnicodeV6;this.register(o),this._active=o.version,this._activeProvider=o}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(o){if(!this._providers[o])throw new Error(`unknown Unicode version "${o}"`);this._active=o,this._activeProvider=this._providers[o],this._onChange.fire(o)}register(o){this._providers[o.version]=o}wcwidth(o){return this._activeProvider.wcwidth(o)}getStringCellWidth(o){let h=0;const p=o.length;for(let m=0;m<p;++m){let v=o.charCodeAt(m);if(55296<=v&&v<=56319){if(++m>=p)return h+this.wcwidth(v);const e=o.charCodeAt(m);56320<=e&&e<=57343?v=1024*(v-55296)+e-56320+65536:h+=this.wcwidth(e)}h+=this.wcwidth(v)}return h}}}},x={};function E(D){var s=x[D];if(s!==void 0)return s.exports;var a=x[D]={exports:{}};return g[D].call(a.exports,a,a.exports,E),a.exports}var B={};return(()=>{var D=B;Object.defineProperty(D,"__esModule",{value:!0}),D.Terminal=void 0;const s=E(9042),a=E(3236),l=E(844),f=E(5741),o=E(8285),h=E(7975),p=E(7090),m=["cols","rows"];class v extends l.Disposable{constructor(r){super(),this._core=this.register(new a.Terminal(r)),this._addonManager=this.register(new f.AddonManager),this._publicOptions=Object.assign({},this._core.options);const t=c=>this._core.options[c],i=(c,_)=>{this._checkReadonlyOptions(c),this._core.options[c]=_};for(const c in this._core.options){const _={get:t.bind(this,c),set:i.bind(this,c)};Object.defineProperty(this._publicOptions,c,_)}}_checkReadonlyOptions(r){if(m.includes(r))throw new Error(`Option "${r}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new h.ParserApi(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new p.UnicodeApi(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this.register(new o.BufferNamespaceApi(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){const r=this._core.coreService.decPrivateModes;let t="none";switch(this._core.coreMouseService.activeProtocol){case"X10":t="x10";break;case"VT200":t="vt200";break;case"DRAG":t="drag";break;case"ANY":t="any"}return{applicationCursorKeysMode:r.applicationCursorKeys,applicationKeypadMode:r.applicationKeypad,bracketedPasteMode:r.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:t,originMode:r.origin,reverseWraparoundMode:r.reverseWraparound,sendFocusMode:r.sendFocus,wraparoundMode:r.wraparound}}get options(){return this._publicOptions}set options(r){for(const t in r)this._publicOptions[t]=r[t]}blur(){this._core.blur()}focus(){this._core.focus()}resize(r,t){this._verifyIntegers(r,t),this._core.resize(r,t)}open(r){this._core.open(r)}attachCustomKeyEventHandler(r){this._core.attachCustomKeyEventHandler(r)}registerLinkProvider(r){return this._core.registerLinkProvider(r)}registerCharacterJoiner(r){return this._checkProposedApi(),this._core.registerCharacterJoiner(r)}deregisterCharacterJoiner(r){this._checkProposedApi(),this._core.deregisterCharacterJoiner(r)}registerMarker(r=0){return this._verifyIntegers(r),this._core.registerMarker(r)}registerDecoration(r){var t,i,c;return this._checkProposedApi(),this._verifyPositiveIntegers((t=r.x)!==null&&t!==void 0?t:0,(i=r.width)!==null&&i!==void 0?i:0,(c=r.height)!==null&&c!==void 0?c:0),this._core.registerDecoration(r)}hasSelection(){return this._core.hasSelection()}select(r,t,i){this._verifyIntegers(r,t,i),this._core.select(r,t,i)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(r,t){this._verifyIntegers(r,t),this._core.selectLines(r,t)}dispose(){super.dispose()}scrollLines(r){this._verifyIntegers(r),this._core.scrollLines(r)}scrollPages(r){this._verifyIntegers(r),this._core.scrollPages(r)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(r){this._verifyIntegers(r),this._core.scrollToLine(r)}clear(){this._core.clear()}write(r,t){this._core.write(r,t)}writeln(r,t){this._core.write(r),this._core.write(`\r
`,t)}paste(r){this._core.paste(r)}refresh(r,t){this._verifyIntegers(r,t),this._core.refresh(r,t)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(r){this._addonManager.loadAddon(this,r)}static get strings(){return s}_verifyIntegers(...r){for(const t of r)if(t===1/0||isNaN(t)||t%1!=0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...r){for(const t of r)if(t&&(t===1/0||isNaN(t)||t%1!=0||t<0))throw new Error("This API only accepts positive integers")}}D.Terminal=v})(),B})())})(ws);var wl=ws.exports,xs={exports:{}};(function(n,u){(function(g,x){n.exports=x()})(self,()=>(()=>{var g={};return(()=>{var x=g;Object.defineProperty(x,"__esModule",{value:!0}),x.FitAddon=void 0,x.FitAddon=class{activate(E){this._terminal=E}dispose(){}fit(){const E=this.proposeDimensions();if(!E||!this._terminal||isNaN(E.cols)||isNaN(E.rows))return;const B=this._terminal._core;this._terminal.rows===E.rows&&this._terminal.cols===E.cols||(B._renderService.clear(),this._terminal.resize(E.cols,E.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;const E=this._terminal._core,B=E._renderService.dimensions;if(B.css.cell.width===0||B.css.cell.height===0)return;const D=this._terminal.options.scrollback===0?0:E.viewport.scrollBarWidth,s=window.getComputedStyle(this._terminal.element.parentElement),a=parseInt(s.getPropertyValue("height")),l=Math.max(0,parseInt(s.getPropertyValue("width"))),f=window.getComputedStyle(this._terminal.element),o=a-(parseInt(f.getPropertyValue("padding-top"))+parseInt(f.getPropertyValue("padding-bottom"))),h=l-(parseInt(f.getPropertyValue("padding-right"))+parseInt(f.getPropertyValue("padding-left")))-D;return{cols:Math.max(2,Math.floor(h/B.css.cell.width)),rows:Math.max(1,Math.floor(o/B.css.cell.height))}}}})(),g})())})(xs);var El=xs.exports,xl=V('<div class="d-flex justify-content-end mb-2"><button type="button" class="btn mx-3" title="Fullscreen"><!></button> <button type="button" class="btn mx-3" title="Close Terminal"><!></button></div> <div class="border" style="height: calc(100vh - 280px)"></div>',1),kl=V('<form class="container login-form"><div class="container" style="max-width: 400px"><div class="form-floating mb-2"><input type="text" class="form-control" id="inpTerminalCmd"> <label for="inpTerminalCmd">Command</label></div> <div class="form-floating mb-2"><input type="text" class="form-control" id="inpTerminalUser"> <label for="inpTerminalUser">User</label></div> <div class="col-12"><button type="submit" class="btn btn-primary w-100"><!> Open Terminal</button></div></div></form>');function Ll(n,u){Fe(u,!1);let g=ce(u,"container_id",8),x,E=se(),B=se(!1);const D="sh";let s=se(D);const a="root";let l=se(a);const f=new wl.Terminal({theme:{background:"#222",cursor:"white",cursorAccent:"#222"},cursorBlink:!0}),o=new El.FitAddon;hi(()=>{g()!==x&&(k(B)&&(ie.send("close_terminal"),m()),x=g())}),qe(()=>{ie.register("spawn_terminal",()=>{h(),f.focus()},t=>ye.add({text:t,type:"error"})),ie.register("close_terminal",()=>{ye.add({text:"Terminal has been closed",type:"info"}),m()},t=>ye.add({text:t,type:"error"})),ie.register("receive_terminal_output",async t=>{f.write(new Uint8Array(await t.blob.arrayBuffer()))},t=>ye.add({text:t,type:"error"})),f.onResize(t=>{ie.send("resize_terminal",t)}),f.loadAddon(o),f.onData(t=>{ie.send("transmit_terminal_input",{data:t})})}),Lt(()=>{k(B)&&ie.send("close_terminal"),ie.unregister("spawn_terminal"),ie.unregister("close_terminal"),ie.unregister("receive_terminal_output")});function h(){k(B)&&o.fit()}async function p(){X(B,!0),ie.send("spawn_terminal",{container_id:g(),cmd:k(s),user:k(l)}),await ns(),f.open(k(E))}function m(){X(B,!1),f.reset(),f.clear(),X(s,D),X(l,a)}function v(){var t;(t=k(E))!=null&&t.requestFullscreen&&k(E).requestFullscreen({navigationUI:"show"})}$e();var e=Be();_e("resize",os,h);var r=ue(e);J(r,()=>k(B),t=>{var i=xl(),c=ue(i),_=I(c),S=I(_);he(S,{icon:gs,size:"lg",color:"#666"});var y=j(_,2),d=I(y);he(d,{icon:Go,size:"lg",color:"#666"});var b=j(c,2);Pi(b,R=>X(E,R),()=>k(E)),_e("click",_,v),_e("click",y,()=>ie.send("close_terminal")),N(t,i)},t=>{var i=kl(),c=I(i),_=I(c),S=I(_),y=j(_,2),d=I(y),b=j(y,2),R=I(b),O=I(R);he(O,{icon:vo}),Ei(S,()=>k(s),A=>X(s,A)),Ei(d,()=>k(l),A=>X(l,A)),_e("submit",i,xi(p)),Ge(3,i,()=>mt),N(t,i)}),N(n,e),ze()}/*!
 * Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2024 Fonticons, Inc.
 */const Dl={prefix:"fab",iconName:"docker",icon:[640,512,[],"f395","M349.9 236.3h-66.1v-59.4h66.1v59.4zm0-204.3h-66.1v60.7h66.1V32zm78.2 144.8H362v59.4h66.1v-59.4zm-156.3-72.1h-66.1v60.1h66.1v-60.1zm78.1 0h-66.1v60.1h66.1v-60.1zm276.8 100c-14.4-9.7-47.6-13.2-73.1-8.4-3.3-24-16.7-44.9-41.1-63.7l-14-9.3-9.3 14c-18.4 27.8-23.4 73.6-3.7 103.8-8.7 4.7-25.8 11.1-48.4 10.7H2.4c-8.7 50.8 5.8 116.8 44 162.1 37.1 43.9 92.7 66.2 165.4 66.2 157.4 0 273.9-72.5 328.4-204.2 21.4.4 67.6.1 91.3-45.2 1.5-2.5 6.6-13.2 8.5-17.1l-13.3-8.9zm-511.1-27.9h-66v59.4h66.1v-59.4zm78.1 0h-66.1v59.4h66.1v-59.4zm78.1 0h-66.1v59.4h66.1v-59.4zm-78.1-72.1h-66.1v60.1h66.1v-60.1z"]},Rl={prefix:"fab",iconName:"github",icon:[496,512,[],"f09b","M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"]};var Al=V('<div class="d-flex align-items-center"><strong class="mx-5">Loading...</strong> <div class="spinner-border ms-auto" role="status" aria-hidden="true"></div></div>'),Tl=V('<div class="card"><div class="card-body"><div class="fs-4 text-uppercase mb-3">Host</div> <div class="d-flex align-items-center mb-2"><!> </div> <div class="d-flex align-items-center mb-2"><!> </div> <div class="d-flex align-items-center mb-2"><!> </div> <div class="d-flex align-items-center mb-2"><!> </div> <div class="d-flex align-items-center mb-2"><!> </div> <div class="mt-3"><a href="https://github.com/knrdl/caasa" target="_blank" rel="noopener noreferrer" class="text-decoration-none"><!> CaaSa on Github</a></div></div></div>'),Bl=V('<div class="flex-grow-1 d-flex justify-content-center align-items-start mt-5"><!></div>');function Ml(n,u){Fe(u,!1);let g=se(!0),x=se();qe(()=>{ie.register("get_system_info",D=>{X(x,D),X(g,!1)},D=>{X(g,!1),ye.add({text:D,type:"error"})}),ie.send("get_system_info")}),Lt(()=>{ie.unregister("get_system_info")}),$e();var E=Bl(),B=I(E);J(B,()=>k(g),D=>{var s=Al();N(D,s)},D=>{var s=Be(),a=ue(s);J(a,()=>k(x),l=>{var f=Tl(),o=I(f),h=j(I(o),2),p=I(h);he(p,{icon:Eo,size:"lg",style:"width: 3rem"});var m=j(p),v=j(h,2),e=I(v);he(e,{icon:ms,size:"lg",style:"width: 3rem"});var r=j(e),t=j(v,2),i=I(t);he(i,{icon:ps,size:"lg",style:"width: 3rem"});var c=j(i);ee(()=>te(c,` ${Ft(k(x).mem)??""}
          Memory`));var _=j(t,2),S=I(_);he(S,{icon:Dl,size:"lg",style:"width: 3rem"});var y=j(S),d=j(_,2),b=I(d);he(b,{icon:Ss,size:"lg",style:"width: 3rem"});var R=j(b),O=j(d,2),A=I(O),M=I(A);he(M,{icon:Rl,size:"sm"}),ee(()=>{te(m,` ${k(x).os??""}`),te(r,` ${k(x).cpus??""} CPUs`),te(y,` ${k(x).engine_version??""}`),te(R,` ${k(x).containers.running??""}/${k(x).containers.total??""} Containers running`)}),N(l,f)},null,!0),N(D,s)}),N(n,E),ze()}var Ol=V('<p class="mx-5 my-2">No containers found</p>'),Pl=V('<div class="d-flex border-top border-bottom" style="cursor: pointer"><div style="width: 10px; flex: none"></div> <div class="p-2 pe-4"><div class="text-uppercase"> </div> <div> </div></div></div>'),Il=V('<p class="mx-2 my-1">No containers match search term</p>'),Hl=V('<input type="search" class="form-control svelte-6rcsrg" placeholder="Search"> <!>',1),Fl=V('<aside class="d-flex flex-column pb-1 svelte-6rcsrg"><!></aside>');function Lr(n,u){Fe(u,!1);const g=se();let x=ce(u,"containers",8),E=ce(u,"selectedContainer",8);const B=_s();let D=se("");ct(()=>(vt(x()),k(D)),()=>{var l;X(g,(l=x())==null?void 0:l.filter(f=>{var o;return f.name.toLowerCase().replace(/\s+/g,"").includes(k(D).replace(/\s+/g,""))||((o=f.namespace)==null?void 0:o.toLowerCase().replace(/\s+/g,"").includes(k(D).replace(/\s+/g,"")))}))}),ai(),$e();var s=Fl(),a=I(s);J(a,x,l=>{var f=Be(),o=ue(f);J(o,()=>x().length===0,h=>{var p=Ol();N(h,p)},h=>{var p=Hl(),m=ue(p),v=j(m,2);Ye(v,1,()=>k(g),Ze,(e,r)=>{var t=Pl();const i=et(()=>E()&&E().id===k(r).id);var c=I(t);const _=et(()=>["exited","dead","removing"].includes(k(r).status));ee(()=>fe(c,"bg-danger",k(_)));const S=et(()=>["created","paused","restarting"].includes(k(r).status));ee(()=>fe(c,"bg-warning",k(S)));var y=j(c,2),d=I(y),b=I(d),R=j(d,2),O=I(R);ee(()=>{var A;fe(t,"bg-dark",k(i)),fe(t,"text-light",k(i)),fe(c,"bg-success",k(r).status==="running"),fe(d,"text-muted",((A=E())==null?void 0:A.id)!==k(r).id),te(b,k(r).namespace||""),te(O,k(r).name)}),_e("click",t,()=>B("select-container",k(r))),N(e,t)},e=>{var r=Il();N(e,r)}),ee(()=>Fn(m,k(D))),_e("input",m,e=>X(D,e.target.value.toLowerCase())),N(h,p)}),N(l,f)}),N(n,s),ze()}var zl=V('<div class="position-absolute"><!></div>'),$l=V('<li><button type="button" class="text-uppercase">Info</button></li>'),Nl=V('<li><button type="button" class="text-uppercase">Logs</button></li>'),Wl=V('<li><button type="button" class="text-uppercase">Terminal</button></li>'),Ul=V('<li><button type="button" class="text-uppercase">Processes</button></li>'),jl=V('<li><button type="button" class="text-uppercase">Files</button></li>'),ql=V("<div><!></div>"),Kl=V("<div><!></div>"),Vl=V("<div><!></div>"),Gl=V("<div><!></div>"),Xl=V("<div><!></div>"),Zl=V('<div class="container-md" style="overflow: hidden"><div class="card tabs"><ul class="card-header"><!> <!> <!> <!> <!></ul> <div class="card-body py-4"><!></div></div></div>'),Yl=V('<!> <div class="d-md-none position-relative" style="z-index: 100;"><div class="position-fixed top-0 bottom-0 start-0 end-0" style="background: rgba(0, 0, 0, .55);"></div> <!></div> <div class="d-flex pb-3 align-items-start"><aside class="d-none d-md-block me-4"><!></aside> <!></div>',1);function Jl(n,u){Fe(u,!1);const g=se();let x,E=se(!0),B=se(),D=se(),s=ce(u,"showHostInfo",12),a=ce(u,"showContainerListOverlay",12),l=se(null);qe(()=>{ie.register("get_container_list",S=>{X(B,S),X(E,!1)},S=>ye.add({text:S,type:"error"})),ie.send("get_container_list"),x=setInterval(()=>{ie.send("get_container_list")},3e3)}),Lt(()=>{ie.unregister("get_container_list"),clearInterval(x)});function f(S){X(l,null),s(!1),a(!1),X(D,null),window.scrollTo({top:0,behavior:"smooth"}),setTimeout(()=>{var d,b;X(D,S);const y=["info","logs","procs","term","files"];for(let R of y)if((b=(d=k(D))==null?void 0:d.permissions)!=null&&b.includes(R)){X(l,R);break}k(l)||(X(D,null),ye.add({type:"warning",text:"No permissions to access container"}))},100)}function o(S){X(l,S)}ct(()=>k(D),()=>{var S;X(g,((S=k(D))==null?void 0:S.status)==="running")}),ai(),$e();var h=Yl(),p=ue(h);J(p,()=>k(E),S=>{Cs(S,{})});var m=j(p,2),v=I(m),e=j(v,2);J(e,a,S=>{var y=zl(),d=I(y),b=et(()=>s()?null:k(D));Lr(d,{get containers(){return k(B)},get selectedContainer(){return k(b)},$$events:{"select-container":R=>f(R.detail)}}),Ge(3,y,()=>yr,()=>({y:-50,duration:200})),N(S,y)});var r=j(m,2),t=I(r),i=I(t),c=et(()=>s()?null:k(D));Lr(i,{get containers(){return k(B)},get selectedContainer(){return k(c)},$$events:{"select-container":S=>f(S.detail)}});var _=j(t,2);J(_,s,S=>{Ml(S,{})},S=>{var y=Zl(),d=I(y),b=I(d),R=I(b);J(R,()=>{var F,C;return(C=(F=k(D))==null?void 0:F.permissions)==null?void 0:C.includes("info")},F=>{var C=$l(),L=I(C);ee(()=>fe(L,"active",k(l)==="info")),_e("click",L,()=>o("info")),N(F,C)});var O=j(R,2);J(O,()=>{var F,C;return(C=(F=k(D))==null?void 0:F.permissions)==null?void 0:C.includes("logs")},F=>{var C=Nl(),L=I(C);ee(()=>fe(L,"active",k(l)==="logs")),_e("click",L,()=>o("logs")),N(F,C)});var A=j(O,2);J(A,()=>{var F,C;return k(g)&&((C=(F=k(D))==null?void 0:F.permissions)==null?void 0:C.includes("term"))},F=>{var C=Wl(),L=I(C);ee(()=>fe(L,"active",k(l)==="term")),_e("click",L,()=>o("term")),N(F,C)});var M=j(A,2);J(M,()=>{var F,C;return k(g)&&((C=(F=k(D))==null?void 0:F.permissions)==null?void 0:C.includes("procs"))},F=>{var C=Ul(),L=I(C);ee(()=>fe(L,"active",k(l)==="procs")),_e("click",L,()=>o("procs")),N(F,C)});var z=j(M,2);J(z,()=>{var F,C;return k(g)&&((C=(F=k(D))==null?void 0:F.permissions)==null?void 0:C.includes("files"))},F=>{var C=jl(),L=I(C);ee(()=>fe(L,"active",k(l)==="files")),_e("click",L,()=>o("files")),N(F,C)});var W=j(b,2),q=I(W);J(q,()=>k(l)==="info",F=>{var C=ql(),L=I(C),T=et(()=>k(D).permissions.includes("state"));qa(L,{get container_id(){return k(D).id},get enable_actions(){return k(T)}}),Ge(1,C,()=>mt),N(F,C)},F=>{var C=Be(),L=ue(C);J(L,()=>k(l)==="logs",T=>{var P=Kl(),K=I(P);tl(K,{get container_id(){return k(D).id}}),Ge(1,P,()=>mt),N(T,P)},T=>{var P=Be(),K=ue(P);J(K,()=>k(l)==="term",G=>{var Z=Vl(),Q=I(Z);Ll(Q,{get container_id(){return k(D).id}}),Ge(1,Z,()=>mt),N(G,Z)},G=>{var Z=Be(),Q=ue(Z);J(Q,()=>k(l)==="procs",ae=>{var w=Gl(),H=I(w);yl(H,{get container_id(){return k(D).id}}),Ge(1,w,()=>mt),N(ae,w)},ae=>{var w=Be(),H=ue(w);J(H,()=>k(l)==="files",U=>{var $=Xl(),re=I($),Y=et(()=>k(D).permissions.includes("files-read")),oe=et(()=>k(D).permissions.includes("files-write"));pl(re,{get container_id(){return k(D).id},get allow_download(){return k(Y)},get allow_upload(){return k(oe)}}),Ge(1,$,()=>mt),N(U,$)},null,!0),N(ae,w)},!0),N(G,Z)},!0),N(T,P)},!0),N(F,C)}),Ge(3,y,()=>yr,()=>({x:300,duration:200})),N(S,y)}),ee(()=>fe(m,"d-none",!a())),_e("click",v,()=>a(!1)),N(n,h),ze()}var Ql=V('<a href="/#/" class="d-md-none d-flex justify-content-center align-items-center svelte-1b5nrvg"><!></a>'),ec=V('<button type="button" class="btn mx-2"><!></button>'),tc=V('<!> <main class="svelte-1b5nrvg"><header class="svelte-1b5nrvg"><!> <a href="/#/" class="d-flex justify-content-center align-items-center svelte-1b5nrvg"><span><!></span> <span class="text-black ps-2 fs-2 fw-light">Container as a Service admin</span></a> <div class="items-right svelte-1b5nrvg"><!> <!></div></header> <!></main>',1);function ic(n,u){Fe(u,!1);let g=se(null),x=se(!0),E=se(!0),B=se(!1);qe(async()=>{ie.register("ws-error",null,c=>ye.add({text:c,type:"error"})),ie.register("ws-close",null,c=>{ye.add({text:c,type:"error"}),X(g,null),alert("Lost connection. Reconnect?"),window.location.reload()}),ie.register("webproxy_auth",({username:c})=>{X(g,c),X(x,!1)},c=>{ye.add({text:c,type:"error"})}),await ie.init()});function D(){ie.close(),X(g,null),ye.add({text:"Logged out",type:"info"}),window.location.reload()}function s(){alert("An error occurred!")}$e();var a=tc();_e("error",os,s);var l=ue(a);oo(l,{});var f=j(l,2),o=I(f),h=I(o);J(h,()=>k(g),c=>{var _=Ql(),S=I(_);he(S,{icon:po,color:"#123",size:"2x",style:"width: 3rem;height: 3rem;"}),_e("click",_,xi(()=>X(B,!k(B)))),N(c,_)});var p=j(h,2),m=I(p),v=I(m);he(v,{icon:Do,color:"#123",size:"2x",style:"width: 3rem;height: 3rem;"});var e=j(p,2),r=I(e);Jo(r,{});var t=j(r,2);J(t,()=>k(g)&&k(x),c=>{var _=ec(),S=I(_);he(S,{icon:fo,color:"#333",size:"2x"}),ee(()=>xe(_,"title",`Logout ${k(g)??""}`)),_e("click",_,D),N(c,_)});var i=j(o,2);J(i,()=>k(g),c=>{Jl(c,{get showHostInfo(){return k(E)},set showHostInfo(_){X(E,_)},get showContainerListOverlay(){return k(B)},set showContainerListOverlay(_){X(B,_)},$$legacy:!0})},c=>{_a(c,{$$events:{login:_=>X(g,_.detail.username)}})}),ee(()=>{fe(m,"d-none",k(g)),fe(m,"d-md-block",k(g))}),_e("click",p,xi(()=>X(E,!0))),N(n,a),ze()}new ic({target:document.getElementById("app")});
