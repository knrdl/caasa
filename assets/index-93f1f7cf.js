var Lr=Object.defineProperty;var Dr=(o,e,t)=>e in o?Lr(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t;var Pe=(o,e,t)=>(Dr(o,typeof e!="symbol"?e+"":e,t),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))s(d);new MutationObserver(d=>{for(const m of d)if(m.type==="childList")for(const _ of m.addedNodes)_.tagName==="LINK"&&_.rel==="modulepreload"&&s(_)}).observe(document,{childList:!0,subtree:!0});function t(d){const m={};return d.integrity&&(m.integrity=d.integrity),d.referrerPolicy&&(m.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?m.credentials="include":d.crossOrigin==="anonymous"?m.credentials="omit":m.credentials="same-origin",m}function s(d){if(d.ep)return;d.ep=!0;const m=t(d);fetch(d.href,m)}})();function ce(){}const Js=o=>o;function Rr(o,e){for(const t in e)o[t]=e[t];return o}function Ys(o){return o()}function Bi(){return Object.create(null)}function qe(o){o.forEach(Ys)}function Qt(o){return typeof o=="function"}function xe(o,e){return o!=o?e==e:o!==e||o&&typeof o=="object"||typeof o=="function"}function Ar(o){return Object.keys(o).length===0}function Br(o,...e){if(o==null){for(const s of e)s(void 0);return ce}const t=o.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function ni(o){let e;return Br(o,t=>e=t)(),e}function Kt(o,e,t,s){if(o){const d=Qs(o,e,t,s);return o[0](d)}}function Qs(o,e,t,s){return o[1]&&s?Rr(t.ctx.slice(),o[1](s(e))):t.ctx}function qt(o,e,t,s){if(o[2]&&s){const d=o[2](s(t));if(e.dirty===void 0)return d;if(typeof d=="object"){const m=[],_=Math.max(e.dirty.length,d.length);for(let i=0;i<_;i+=1)m[i]=e.dirty[i]|d[i];return m}return e.dirty|d}return e.dirty}function Gt(o,e,t,s,d,m){if(d){const _=Qs(e,t,s,m);o.p(_,d)}}function Xt(o){if(o.ctx.length>32){const e=[],t=o.ctx.length/32;for(let s=0;s<t;s++)e[s]=-1;return e}return-1}function li(o){const e=typeof o=="string"&&o.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return e?[parseFloat(e[1]),e[2]||"px"]:[o,"px"]}const er=typeof window<"u";let tr=er?()=>window.performance.now():()=>Date.now(),_i=er?o=>requestAnimationFrame(o):ce;const St=new Set;function ir(o){St.forEach(e=>{e.c(o)||(St.delete(e),e.f())}),St.size!==0&&_i(ir)}function sr(o){let e;return St.size===0&&_i(ir),{promise:new Promise(t=>{St.add(e={c:o,f:t})}),abort(){St.delete(e)}}}const Mr=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function A(o,e){o.appendChild(e)}function rr(o){if(!o)return document;const e=o.getRootNode?o.getRootNode():o.ownerDocument;return e&&e.host?e:o.ownerDocument}function Tr(o){const e=P("style");return e.textContent="/* empty */",xr(rr(o),e),e.sheet}function xr(o,e){return A(o.head||o,e),e.sheet}function j(o,e,t){o.insertBefore(e,t||null)}function W(o){o.parentNode&&o.parentNode.removeChild(o)}function Ve(o,e){for(let t=0;t<o.length;t+=1)o[t]&&o[t].d(e)}function P(o){return document.createElement(o)}function Ee(o){return document.createElementNS("http://www.w3.org/2000/svg",o)}function Y(o){return document.createTextNode(o)}function G(){return Y(" ")}function rt(){return Y("")}function pe(o,e,t,s){return o.addEventListener(e,t,s),()=>o.removeEventListener(e,t,s)}function ei(o){return function(e){return e.preventDefault(),o.call(this,e)}}function R(o,e,t){t==null?o.removeAttribute(e):o.getAttribute(e)!==t&&o.setAttribute(e,t)}function pi(o,e,t){o.setAttributeNS("http://www.w3.org/1999/xlink",e,t)}function Or(o){return Array.from(o.childNodes)}function ae(o,e){e=""+e,o.data!==e&&(o.data=e)}function Ye(o,e){o.value=e??""}function be(o,e,t,s){t==null?o.style.removeProperty(e):o.style.setProperty(e,t,s?"important":"")}function Mi(o,e,t){for(let s=0;s<o.options.length;s+=1){const d=o.options[s];if(d.__value===e){d.selected=!0;return}}(!t||e!==void 0)&&(o.selectedIndex=-1)}function Pr(o){const e=o.querySelector(":checked");return e&&e.__value}function he(o,e,t){o.classList.toggle(e,!!t)}function nr(o,e,{bubbles:t=!1,cancelable:s=!1}={}){return new CustomEvent(o,{detail:e,bubbles:t,cancelable:s})}const Zt=new Map;let Jt=0;function Ir(o){let e=5381,t=o.length;for(;t--;)e=(e<<5)-e^o.charCodeAt(t);return e>>>0}function Hr(o,e){const t={stylesheet:Tr(e),rules:{}};return Zt.set(o,t),t}function ai(o,e,t,s,d,m,_,i=0){const r=16.666/s;let c=`{
`;for(let n=0;n<=1;n+=r){const h=e+(t-e)*m(n);c+=n*100+`%{${_(h,1-h)}}
`}const f=c+`100% {${_(t,1-t)}}
}`,l=`__svelte_${Ir(f)}_${i}`,p=rr(o),{stylesheet:b,rules:w}=Zt.get(p)||Hr(p,o);w[l]||(w[l]=!0,b.insertRule(`@keyframes ${l} ${f}`,b.cssRules.length));const S=o.style.animation||"";return o.style.animation=`${S?`${S}, `:""}${l} ${s}ms linear ${d}ms 1 both`,Jt+=1,l}function ci(o,e){const t=(o.style.animation||"").split(", "),s=t.filter(e?m=>m.indexOf(e)<0:m=>m.indexOf("__svelte")===-1),d=t.length-s.length;d&&(o.style.animation=s.join(", "),Jt-=d,Jt||$r())}function $r(){_i(()=>{Jt||(Zt.forEach(o=>{const{ownerNode:e}=o.stylesheet;e&&W(e)}),Zt.clear())})}let xt;function Mt(o){xt=o}function ti(){if(!xt)throw new Error("Function called outside component initialization");return xt}function Ht(o){ti().$$.before_update.push(o)}function Ge(o){ti().$$.on_mount.push(o)}function dt(o){ti().$$.on_destroy.push(o)}function or(){const o=ti();return(e,t,{cancelable:s=!1}={})=>{const d=o.$$.callbacks[e];if(d){const m=nr(e,t,{cancelable:s});return d.slice().forEach(_=>{_.call(o,m)}),!m.defaultPrevented}return!0}}function Fr(o,e){const t=o.$$.callbacks[e.type];t&&t.slice().forEach(s=>s.call(this,e))}const bt=[],ft=[];let Ct=[];const hi=[],lr=Promise.resolve();let ui=!1;function ar(){ui||(ui=!0,lr.then(hr))}function cr(){return ar(),lr}function Te(o){Ct.push(o)}function Ti(o){hi.push(o)}const oi=new Set;let vt=0;function hr(){if(vt!==0)return;const o=xt;do{try{for(;vt<bt.length;){const e=bt[vt];vt++,Mt(e),zr(e.$$)}}catch(e){throw bt.length=0,vt=0,e}for(Mt(null),bt.length=0,vt=0;ft.length;)ft.pop()();for(let e=0;e<Ct.length;e+=1){const t=Ct[e];oi.has(t)||(oi.add(t),t())}Ct.length=0}while(bt.length);for(;hi.length;)hi.pop()();ui=!1,oi.clear(),Mt(o)}function zr(o){if(o.fragment!==null){o.update(),qe(o.before_update);const e=o.dirty;o.dirty=[-1],o.fragment&&o.fragment.p(o.ctx,e),o.after_update.forEach(Te)}}function Nr(o){const e=[],t=[];Ct.forEach(s=>o.indexOf(s)===-1?e.push(s):t.push(s)),t.forEach(s=>s()),Ct=e}let Bt;function ur(){return Bt||(Bt=Promise.resolve(),Bt.then(()=>{Bt=null})),Bt}function Tt(o,e,t){o.dispatchEvent(nr(`${e?"intro":"outro"}${t}`))}const Vt=new Set;let ot;function ve(){ot={r:0,c:[],p:ot}}function ge(){ot.r||qe(ot.c),ot=ot.p}function N(o,e){o&&o.i&&(Vt.delete(o),o.i(e))}function K(o,e,t,s){if(o&&o.o){if(Vt.has(o))return;Vt.add(o),ot.c.push(()=>{Vt.delete(o),s&&(t&&o.d(1),s())}),o.o(e)}else s&&s()}const dr={duration:0};function wt(o,e,t){const s={direction:"in"};let d=e(o,t,s),m=!1,_,i,r=0;function c(){_&&ci(o,_)}function f(){const{delay:p=0,duration:b=300,easing:w=Js,tick:S=ce,css:n}=d||dr;n&&(_=ai(o,0,1,b,p,w,n,r++)),S(0,1);const h=tr()+p,a=h+b;i&&i.abort(),m=!0,Te(()=>Tt(o,!0,"start")),i=sr(u=>{if(m){if(u>=a)return S(1,0),Tt(o,!0,"end"),c(),m=!1;if(u>=h){const g=w((u-h)/b);S(g,1-g)}}return m})}let l=!1;return{start(){l||(l=!0,ci(o),Qt(d)?(d=d(s),ur().then(f)):f())},invalidate(){l=!1},end(){m&&(c(),m=!1)}}}function Ke(o,e,t,s){let m=e(o,t,{direction:"both"}),_=s?0:1,i=null,r=null,c=null,f;function l(){c&&ci(o,c)}function p(w,S){const n=w.b-_;return S*=Math.abs(n),{a:_,b:w.b,d:n,duration:S,start:w.start,end:w.start+S,group:w.group}}function b(w){const{delay:S=0,duration:n=300,easing:h=Js,tick:a=ce,css:u}=m||dr,g={start:tr()+S,b:w};w||(g.group=ot,ot.r+=1),"inert"in o&&(w?f!==void 0&&(o.inert=f):(f=o.inert,o.inert=!0)),i||r?r=g:(u&&(l(),c=ai(o,_,w,n,S,h,u)),w&&a(0,1),i=p(g,n),Te(()=>Tt(o,w,"start")),sr(v=>{if(r&&v>r.start&&(i=p(r,n),r=null,Tt(o,i.b,"start"),u&&(l(),c=ai(o,_,i.b,i.duration,0,h,m.css))),i){if(v>=i.end)a(_=i.b,1-_),Tt(o,i.b,"end"),r||(i.b?l():--i.group.r||qe(i.group.c)),i=null;else if(v>=i.start){const y=v-i.start;_=i.a+i.d*h(y/i.duration),a(_,1-_)}}return!!(i||r)}))}return{run(w){Qt(m)?ur().then(()=>{m=m({direction:w?"in":"out"}),b(w)}):b(w)},end(){l(),i=r=null}}}function ye(o){return(o==null?void 0:o.length)!==void 0?o:Array.from(o)}function xi(o,e,t){const s=o.$$.props[e];s!==void 0&&(o.$$.bound[s]=t,t(o.$$.ctx[s]))}function ne(o){o&&o.c()}function se(o,e,t){const{fragment:s,after_update:d}=o.$$;s&&s.m(e,t),Te(()=>{const m=o.$$.on_mount.map(Ys).filter(Qt);o.$$.on_destroy?o.$$.on_destroy.push(...m):qe(m),o.$$.on_mount=[]}),d.forEach(Te)}function re(o,e){const t=o.$$;t.fragment!==null&&(Nr(t.after_update),qe(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function Wr(o,e){o.$$.dirty[0]===-1&&(bt.push(o),ar(),o.$$.dirty.fill(0)),o.$$.dirty[e/31|0]|=1<<e%31}function Ie(o,e,t,s,d,m,_=null,i=[-1]){const r=xt;Mt(o);const c=o.$$={fragment:null,ctx:[],props:m,update:ce,not_equal:d,bound:Bi(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(r?r.$$.context:[])),callbacks:Bi(),dirty:i,skip_bound:!1,root:e.target||r.$$.root};_&&_(c.root);let f=!1;if(c.ctx=t?t(o,e.props||{},(l,p,...b)=>{const w=b.length?b[0]:p;return c.ctx&&d(c.ctx[l],c.ctx[l]=w)&&(!c.skip_bound&&c.bound[l]&&c.bound[l](w),f&&Wr(o,l)),p}):[],c.update(),f=!0,qe(c.before_update),c.fragment=s?s(c.ctx):!1,e.target){if(e.hydrate){const l=Or(e.target);c.fragment&&c.fragment.l(l),l.forEach(W)}else c.fragment&&c.fragment.c();e.intro&&N(o.$$.fragment),se(o,e.target,e.anchor),hr()}Mt(r)}class He{constructor(){Pe(this,"$$");Pe(this,"$$set")}$destroy(){re(this,1),this.$destroy=ce}$on(e,t){if(!Qt(t))return ce;const s=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return s.push(t),()=>{const d=s.indexOf(t);d!==-1&&s.splice(d,1)}}$set(e){this.$$set&&!Ar(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Ur="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Ur);const gt=[];function jr(o,e=ce){let t;const s=new Set;function d(i){if(xe(o,i)&&(o=i,t)){const r=!gt.length;for(const c of s)c[1](),gt.push(c,o);if(r){for(let c=0;c<gt.length;c+=2)gt[c][0](gt[c+1]);gt.length=0}}}function m(i){d(i(o))}function _(i,r=ce){const c=[i,r];return s.add(c),s.size===1&&(t=e(d,m)||ce),i(o),()=>{s.delete(c),s.size===0&&t&&(t(),t=null)}}return{set:d,update:m,subscribe:_}}const Vr=10,Kr=function(){let o=jr([]);return setInterval(()=>{let e=ni(o);const t=Math.floor(new Date().getTime()/1e3),s=e.filter(d=>d.created_at+Vr>t);s.length!==e.length&&o.set(s)},1e3),{add(e){let t=ni(o);t.push({...e,created_at:Math.floor(new Date().getTime()/1e3)}),o.set(t)},remove(e){let t=ni(o);o.set(t.filter(s=>!["created_at","type","text"].every(d=>s[d]===e[d])))},subscribe:o.subscribe}},Ce=Kr();function qr(o){return o<.5?4*o*o*o:.5*Math.pow(2*o-2,3)+1}function fr(o){const e=o-1;return e*e*e+1}function Gr(o,{delay:e=0,duration:t=400,easing:s=qr,amount:d=5,opacity:m=0}={}){const _=getComputedStyle(o),i=+_.opacity,r=_.filter==="none"?"":_.filter,c=i*(1-m),[f,l]=li(d);return{delay:e,duration:t,easing:s,css:(p,b)=>`opacity: ${i-c*b}; filter: ${r} blur(${b*f}${l});`}}function Yt(o,{delay:e=0,duration:t=400,easing:s=fr,x:d=0,y:m=0,opacity:_=0}={}){const i=getComputedStyle(o),r=+i.opacity,c=i.transform==="none"?"":i.transform,f=r*(1-_),[l,p]=li(d),[b,w]=li(m);return{delay:e,duration:t,easing:s,css:(S,n)=>`
			transform: ${c} translate(${(1-S)*l}${p}, ${(1-S)*b}${w});
			opacity: ${r-f*n}`}}function Ne(o,{delay:e=0,duration:t=400,easing:s=fr,axis:d="y"}={}){const m=getComputedStyle(o),_=+m.opacity,i=d==="y"?"height":"width",r=parseFloat(m[i]),c=d==="y"?["top","bottom"]:["left","right"],f=c.map(h=>`${h[0].toUpperCase()}${h.slice(1)}`),l=parseFloat(m[`padding${f[0]}`]),p=parseFloat(m[`padding${f[1]}`]),b=parseFloat(m[`margin${f[0]}`]),w=parseFloat(m[`margin${f[1]}`]),S=parseFloat(m[`border${f[0]}Width`]),n=parseFloat(m[`border${f[1]}Width`]);return{delay:e,duration:t,easing:s,css:h=>`overflow: hidden;opacity: ${Math.min(h*20,1)*_};${i}: ${h*r}px;padding-${c[0]}: ${h*l}px;padding-${c[1]}: ${h*p}px;margin-${c[0]}: ${h*b}px;margin-${c[1]}: ${h*w}px;border-${c[0]}-width: ${h*S}px;border-${c[1]}-width: ${h*n}px;`}}function Oi(o,e,t){const s=o.slice();return s[2]=e[t],s}function Pi(o){let e,t,s,d=o[2].text+"",m,_,i,r,c,f,l,p;function b(){return o[1](o[2])}return{c(){e=P("div"),t=P("div"),s=P("div"),m=Y(d),_=G(),i=P("button"),r=G(),R(s,"class","toast-body"),R(i,"type","button"),R(i,"class","btn-close btn-close-white me-2 m-auto"),R(t,"class","d-flex"),R(e,"class","toast show align-items-center text-white border-0 mb-2"),he(e,"bg-danger",o[2].type==="error"),he(e,"bg-warning",o[2].type==="warning"),he(e,"bg-success",o[2].type==="success"),he(e,"bg-primary",o[2].type==="info")},m(w,S){j(w,e,S),A(e,t),A(t,s),A(s,m),A(t,_),A(t,i),A(e,r),f=!0,l||(p=pe(i,"click",b),l=!0)},p(w,S){o=w,(!f||S&1)&&d!==(d=o[2].text+"")&&ae(m,d),(!f||S&1)&&he(e,"bg-danger",o[2].type==="error"),(!f||S&1)&&he(e,"bg-warning",o[2].type==="warning"),(!f||S&1)&&he(e,"bg-success",o[2].type==="success"),(!f||S&1)&&he(e,"bg-primary",o[2].type==="info")},i(w){f||(w&&Te(()=>{f&&(c||(c=Ke(e,Ne,{},!0)),c.run(1))}),f=!0)},o(w){w&&(c||(c=Ke(e,Ne,{},!1)),c.run(0)),f=!1},d(w){w&&W(e),w&&c&&c.end(),l=!1,p()}}}function Xr(o){let e,t,s=ye(o[0]),d=[];for(let _=0;_<s.length;_+=1)d[_]=Pi(Oi(o,s,_));const m=_=>K(d[_],1,1,()=>{d[_]=null});return{c(){e=P("div");for(let _=0;_<d.length;_+=1)d[_].c();R(e,"class","position-fixed bottom-0 end-0 p-3"),be(e,"z-index","470")},m(_,i){j(_,e,i);for(let r=0;r<d.length;r+=1)d[r]&&d[r].m(e,null);t=!0},p(_,[i]){if(i&1){s=ye(_[0]);let r;for(r=0;r<s.length;r+=1){const c=Oi(_,s,r);d[r]?(d[r].p(c,i),N(d[r],1)):(d[r]=Pi(c),d[r].c(),N(d[r],1),d[r].m(e,null))}for(ve(),r=s.length;r<d.length;r+=1)m(r);ge()}},i(_){if(!t){for(let i=0;i<s.length;i+=1)N(d[i]);t=!0}},o(_){d=d.filter(Boolean);for(let i=0;i<d.length;i+=1)K(d[i]);t=!1},d(_){_&&W(e),Ve(d,_)}}}function Zr(o,e,t){let s=[];return Ge(()=>{Ce.subscribe(m=>t(0,s=m))}),[s,m=>Ce.remove(m)]}class Jr extends He{constructor(e){super(),Ie(this,e,Zr,Xr,xe,{})}}const Ut=parseFloat;function di(o,e=";"){let t;if(Array.isArray(o))t=o.filter(s=>s);else{t=[];for(const s in o)o[s]&&t.push(`${s}:${o[s]}`)}return t.join(e)}function Yr(o,e,t,s){let d,m;const _="1em";let i,r,c,f="-.125em";const l="visible";return s&&(c="center",m="1.25em"),t&&(d=t),e&&(e=="lg"?(r="1.33333em",i=".75em",f="-.225em"):e=="xs"?r=".75em":e=="sm"?r=".875em":r=e.replace("x","em")),di([di({float:d,width:m,height:_,"line-height":i,"font-size":r,"text-align":c,"vertical-align":f,"transform-origin":"center",overflow:l}),o])}function Qr(o,e,t,s,d,m=1,_="",i=""){let r=1,c=1;return d&&(d=="horizontal"?r=-1:d=="vertical"?c=-1:r=c=-1),di([`translate(${Ut(e)*m}${_},${Ut(t)*m}${_})`,`scale(${r*Ut(o)},${c*Ut(o)})`,s&&`rotate(${s}${i})`]," ")}function Ii(o){let e,t,s,d,m,_,i,r;function c(p,b){return typeof p[10][4]=="string"?tn:en}let f=c(o),l=f(o);return{c(){e=Ee("svg"),t=Ee("g"),s=Ee("g"),l.c(),R(s,"transform",o[12]),R(t,"transform",d="translate("+o[10][0]/2+" "+o[10][1]/2+")"),R(t,"transform-origin",m=o[10][0]/4+" 0"),R(e,"id",_=o[1]||void 0),R(e,"class",i="svelte-fa "+o[0]+" svelte-1cj2gr0"),R(e,"style",o[11]),R(e,"viewBox",r="0 0 "+o[10][0]+" "+o[10][1]),R(e,"aria-hidden","true"),R(e,"role","img"),R(e,"xmlns","http://www.w3.org/2000/svg"),he(e,"pulse",o[4]),he(e,"spin",o[3])},m(p,b){j(p,e,b),A(e,t),A(t,s),l.m(s,null)},p(p,b){f===(f=c(p))&&l?l.p(p,b):(l.d(1),l=f(p),l&&(l.c(),l.m(s,null))),b&4096&&R(s,"transform",p[12]),b&1024&&d!==(d="translate("+p[10][0]/2+" "+p[10][1]/2+")")&&R(t,"transform",d),b&1024&&m!==(m=p[10][0]/4+" 0")&&R(t,"transform-origin",m),b&2&&_!==(_=p[1]||void 0)&&R(e,"id",_),b&1&&i!==(i="svelte-fa "+p[0]+" svelte-1cj2gr0")&&R(e,"class",i),b&2048&&R(e,"style",p[11]),b&1024&&r!==(r="0 0 "+p[10][0]+" "+p[10][1])&&R(e,"viewBox",r),b&17&&he(e,"pulse",p[4]),b&9&&he(e,"spin",p[3])},d(p){p&&W(e),l.d()}}}function en(o){let e,t,s,d,m,_,i,r,c,f;return{c(){e=Ee("path"),_=Ee("path"),R(e,"d",t=o[10][4][0]),R(e,"fill",s=o[6]||o[2]||"currentColor"),R(e,"fill-opacity",d=o[9]!=!1?o[7]:o[8]),R(e,"transform",m="translate("+o[10][0]/-2+" "+o[10][1]/-2+")"),R(_,"d",i=o[10][4][1]),R(_,"fill",r=o[5]||o[2]||"currentColor"),R(_,"fill-opacity",c=o[9]!=!1?o[8]:o[7]),R(_,"transform",f="translate("+o[10][0]/-2+" "+o[10][1]/-2+")")},m(l,p){j(l,e,p),j(l,_,p)},p(l,p){p&1024&&t!==(t=l[10][4][0])&&R(e,"d",t),p&68&&s!==(s=l[6]||l[2]||"currentColor")&&R(e,"fill",s),p&896&&d!==(d=l[9]!=!1?l[7]:l[8])&&R(e,"fill-opacity",d),p&1024&&m!==(m="translate("+l[10][0]/-2+" "+l[10][1]/-2+")")&&R(e,"transform",m),p&1024&&i!==(i=l[10][4][1])&&R(_,"d",i),p&36&&r!==(r=l[5]||l[2]||"currentColor")&&R(_,"fill",r),p&896&&c!==(c=l[9]!=!1?l[8]:l[7])&&R(_,"fill-opacity",c),p&1024&&f!==(f="translate("+l[10][0]/-2+" "+l[10][1]/-2+")")&&R(_,"transform",f)},d(l){l&&(W(e),W(_))}}}function tn(o){let e,t,s,d;return{c(){e=Ee("path"),R(e,"d",t=o[10][4]),R(e,"fill",s=o[2]||o[5]||"currentColor"),R(e,"transform",d="translate("+o[10][0]/-2+" "+o[10][1]/-2+")")},m(m,_){j(m,e,_)},p(m,_){_&1024&&t!==(t=m[10][4])&&R(e,"d",t),_&36&&s!==(s=m[2]||m[5]||"currentColor")&&R(e,"fill",s),_&1024&&d!==(d="translate("+m[10][0]/-2+" "+m[10][1]/-2+")")&&R(e,"transform",d)},d(m){m&&W(e)}}}function sn(o){let e,t=o[10][4]&&Ii(o);return{c(){t&&t.c(),e=rt()},m(s,d){t&&t.m(s,d),j(s,e,d)},p(s,[d]){s[10][4]?t?t.p(s,d):(t=Ii(s),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:ce,o:ce,d(s){s&&W(e),t&&t.d(s)}}}function rn(o,e,t){let{class:s=""}=e,{id:d=""}=e,{style:m=""}=e,{icon:_}=e,{size:i=""}=e,{color:r=""}=e,{fw:c=!1}=e,{pull:f=""}=e,{scale:l=1}=e,{translateX:p=0}=e,{translateY:b=0}=e,{rotate:w=""}=e,{flip:S=!1}=e,{spin:n=!1}=e,{pulse:h=!1}=e,{primaryColor:a=""}=e,{secondaryColor:u=""}=e,{primaryOpacity:g=1}=e,{secondaryOpacity:v=.4}=e,{swapOpacity:y=!1}=e,E,C,k;return o.$$set=L=>{"class"in L&&t(0,s=L.class),"id"in L&&t(1,d=L.id),"style"in L&&t(13,m=L.style),"icon"in L&&t(14,_=L.icon),"size"in L&&t(15,i=L.size),"color"in L&&t(2,r=L.color),"fw"in L&&t(16,c=L.fw),"pull"in L&&t(17,f=L.pull),"scale"in L&&t(18,l=L.scale),"translateX"in L&&t(19,p=L.translateX),"translateY"in L&&t(20,b=L.translateY),"rotate"in L&&t(21,w=L.rotate),"flip"in L&&t(22,S=L.flip),"spin"in L&&t(3,n=L.spin),"pulse"in L&&t(4,h=L.pulse),"primaryColor"in L&&t(5,a=L.primaryColor),"secondaryColor"in L&&t(6,u=L.secondaryColor),"primaryOpacity"in L&&t(7,g=L.primaryOpacity),"secondaryOpacity"in L&&t(8,v=L.secondaryOpacity),"swapOpacity"in L&&t(9,y=L.swapOpacity)},o.$$.update=()=>{o.$$.dirty&16384&&t(10,E=_&&_.icon||[0,0,"",[],""]),o.$$.dirty&237568&&t(11,C=Yr(m,i,f,c)),o.$$.dirty&8126464&&t(12,k=Qr(l,p,b,w,S,512))},[s,d,r,n,h,a,u,g,v,y,E,C,k,m,_,i,c,f,l,p,b,w,S]}class _e extends He{constructor(e){super(),Ie(this,e,rn,sn,xe,{class:0,id:1,style:13,icon:14,size:15,color:2,fw:16,pull:17,scale:18,translateX:19,translateY:20,rotate:21,flip:22,spin:3,pulse:4,primaryColor:5,secondaryColor:6,primaryOpacity:7,secondaryOpacity:8,swapOpacity:9})}}var nn={prefix:"fas",iconName:"right-from-bracket",icon:[512,512,["sign-out-alt"],"f2f5","M377.9 105.9L500.7 228.7c7.2 7.2 11.3 17.1 11.3 27.3s-4.1 20.1-11.3 27.3L377.9 406.1c-6.4 6.4-15 9.9-24 9.9c-18.7 0-33.9-15.2-33.9-33.9l0-62.1-128 0c-17.7 0-32-14.3-32-32l0-64c0-17.7 14.3-32 32-32l128 0 0-62.1c0-18.7 15.2-33.9 33.9-33.9c9 0 17.6 3.6 24 9.9zM160 96L96 96c-17.7 0-32 14.3-32 32l0 256c0 17.7 14.3 32 32 32l64 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-64 0c-53 0-96-43-96-96L0 128C0 75 43 32 96 32l64 0c17.7 0 32 14.3 32 32s-14.3 32-32 32z"]},on=nn,ln={prefix:"fas",iconName:"laptop-code",icon:[640,512,[],"f5fc","M64 96c0-35.3 28.7-64 64-64H512c35.3 0 64 28.7 64 64V352H512V96H128V352H64V96zM0 403.2C0 392.6 8.6 384 19.2 384H620.8c10.6 0 19.2 8.6 19.2 19.2c0 42.4-34.4 76.8-76.8 76.8H76.8C34.4 480 0 445.6 0 403.2zM281 209l-31 31 31 31c9.4 9.4 9.4 24.6 0 33.9s-24.6 9.4-33.9 0l-48-48c-9.4-9.4-9.4-24.6 0-33.9l48-48c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9zM393 175l48 48c9.4 9.4 9.4 24.6 0 33.9l-48 48c-9.4 9.4-24.6 9.4-33.9 0s-9.4-24.6 0-33.9l31-31-31-31c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0z"]},an={prefix:"fas",iconName:"bars",icon:[448,512,["navicon"],"f0c9","M0 96C0 78.3 14.3 64 32 64H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 128 0 113.7 0 96zM0 256c0-17.7 14.3-32 32-32H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32c-17.7 0-32-14.3-32-32zM448 416c0 17.7-14.3 32-32 32H32c-17.7 0-32-14.3-32-32s14.3-32 32-32H416c17.7 0 32 14.3 32 32z"]},cn={prefix:"fas",iconName:"square-up-right",icon:[448,512,[8599,"external-link-square-alt"],"f360","M384 32c35.3 0 64 28.7 64 64V416c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V96C0 60.7 28.7 32 64 32H384zM320 313.4V176c0-8.8-7.2-16-16-16H166.6c-12.5 0-22.6 10.1-22.6 22.6c0 6 2.4 11.8 6.6 16L184 232l-66.3 66.3C114 302 112 306.9 112 312s2 10 5.7 13.7l36.7 36.7c3.6 3.6 8.5 5.7 13.7 5.7s10-2 13.7-5.7L248 296l33.4 33.4c4.2 4.2 10 6.6 16 6.6c12.5 0 22.6-10.1 22.6-22.6z"]},hn=cn,un={prefix:"fas",iconName:"circle-chevron-down",icon:[512,512,["chevron-circle-down"],"f13a","M256 0a256 256 0 1 0 0 512A256 256 0 1 0 256 0zM135 241c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0l87 87 87-87c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9L273 345c-9.4 9.4-24.6 9.4-33.9 0L135 241z"]},dn=un,_r={prefix:"fas",iconName:"memory",icon:[576,512,[],"f538","M64 64C28.7 64 0 92.7 0 128v7.4c0 6.8 4.4 12.6 10.1 16.3C23.3 160.3 32 175.1 32 192s-8.7 31.7-21.9 40.3C4.4 236 0 241.8 0 248.6V320H576V248.6c0-6.8-4.4-12.6-10.1-16.3C552.7 223.7 544 208.9 544 192s8.7-31.7 21.9-40.3c5.7-3.7 10.1-9.5 10.1-16.3V128c0-35.3-28.7-64-64-64H64zM576 352H0v64c0 17.7 14.3 32 32 32H80V416c0-8.8 7.2-16 16-16s16 7.2 16 16v32h96V416c0-8.8 7.2-16 16-16s16 7.2 16 16v32h96V416c0-8.8 7.2-16 16-16s16 7.2 16 16v32h96V416c0-8.8 7.2-16 16-16s16 7.2 16 16v32h48c17.7 0 32-14.3 32-32V352zM192 160v64c0 17.7-14.3 32-32 32s-32-14.3-32-32V160c0-17.7 14.3-32 32-32s32 14.3 32 32zm128 0v64c0 17.7-14.3 32-32 32s-32-14.3-32-32V160c0-17.7 14.3-32 32-32s32 14.3 32 32zm128 0v64c0 17.7-14.3 32-32 32s-32-14.3-32-32V160c0-17.7 14.3-32 32-32s32 14.3 32 32z"]},fn={prefix:"fas",iconName:"folder",icon:[512,512,[128193,128447,61716,"folder-blank"],"f07b","M64 480H448c35.3 0 64-28.7 64-64V160c0-35.3-28.7-64-64-64H288c-10.1 0-19.6-4.7-25.6-12.8L243.2 57.6C231.1 41.5 212.1 32 192 32H64C28.7 32 0 60.7 0 96V416c0 35.3 28.7 64 64 64z"]},_n={prefix:"fas",iconName:"box",icon:[448,512,[128230],"f466","M50.7 58.5L0 160H208V32H93.7C75.5 32 58.9 42.3 50.7 58.5zM240 160H448L397.3 58.5C389.1 42.3 372.5 32 354.3 32H240V160zm208 32H0V416c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V192z"]},pn={prefix:"fas",iconName:"maximize",icon:[512,512,["expand-arrows-alt"],"f31e","M200 32H56C42.7 32 32 42.7 32 56V200c0 9.7 5.8 18.5 14.8 22.2s19.3 1.7 26.2-5.2l40-40 79 79-79 79L73 295c-6.9-6.9-17.2-8.9-26.2-5.2S32 302.3 32 312V456c0 13.3 10.7 24 24 24H200c9.7 0 18.5-5.8 22.2-14.8s1.7-19.3-5.2-26.2l-40-40 79-79 79 79-40 40c-6.9 6.9-8.9 17.2-5.2 26.2s12.5 14.8 22.2 14.8H456c13.3 0 24-10.7 24-24V312c0-9.7-5.8-18.5-14.8-22.2s-19.3-1.7-26.2 5.2l-40 40-79-79 79-79 40 40c6.9 6.9 17.2 8.9 26.2 5.2s14.8-12.5 14.8-22.2V56c0-13.3-10.7-24-24-24H312c-9.7 0-18.5 5.8-22.2 14.8s-1.7 19.3 5.2 26.2l40 40-79 79-79-79 40-40c6.9-6.9 8.9-17.2 5.2-26.2S209.7 32 200 32z"]},pr=pn,mn={prefix:"fas",iconName:"server",icon:[512,512,[],"f233","M64 32C28.7 32 0 60.7 0 96v64c0 35.3 28.7 64 64 64H448c35.3 0 64-28.7 64-64V96c0-35.3-28.7-64-64-64H64zm280 72a24 24 0 1 1 0 48 24 24 0 1 1 0-48zm48 24a24 24 0 1 1 48 0 24 24 0 1 1 -48 0zM64 288c-35.3 0-64 28.7-64 64v64c0 35.3 28.7 64 64 64H448c35.3 0 64-28.7 64-64V352c0-35.3-28.7-64-64-64H64zm280 72a24 24 0 1 1 0 48 24 24 0 1 1 0-48zm56 24a24 24 0 1 1 48 0 24 24 0 1 1 -48 0z"]},mr={prefix:"fas",iconName:"microchip",icon:[512,512,[],"f2db","M176 24c0-13.3-10.7-24-24-24s-24 10.7-24 24V64c-35.3 0-64 28.7-64 64H24c-13.3 0-24 10.7-24 24s10.7 24 24 24H64v56H24c-13.3 0-24 10.7-24 24s10.7 24 24 24H64v56H24c-13.3 0-24 10.7-24 24s10.7 24 24 24H64c0 35.3 28.7 64 64 64v40c0 13.3 10.7 24 24 24s24-10.7 24-24V448h56v40c0 13.3 10.7 24 24 24s24-10.7 24-24V448h56v40c0 13.3 10.7 24 24 24s24-10.7 24-24V448c35.3 0 64-28.7 64-64h40c13.3 0 24-10.7 24-24s-10.7-24-24-24H448V280h40c13.3 0 24-10.7 24-24s-10.7-24-24-24H448V176h40c13.3 0 24-10.7 24-24s-10.7-24-24-24H448c0-35.3-28.7-64-64-64V24c0-13.3-10.7-24-24-24s-24 10.7-24 24V64H280V24c0-13.3-10.7-24-24-24s-24 10.7-24 24V64H176V24zM160 128H352c17.7 0 32 14.3 32 32V352c0 17.7-14.3 32-32 32H160c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32zm192 32H160V352H352V160z"]},vn={prefix:"fas",iconName:"circle-chevron-up",icon:[512,512,["chevron-circle-up"],"f139","M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM377 271c9.4 9.4 9.4 24.6 0 33.9s-24.6 9.4-33.9 0l-87-87-87 87c-9.4 9.4-24.6 9.4-33.9 0s-9.4-24.6 0-33.9L239 167c9.4-9.4 24.6-9.4 33.9 0L377 271z"]},gn=vn,vr={prefix:"fas",iconName:"box-open",icon:[640,512,[],"f49e","M58.9 42.1c3-6.1 9.6-9.6 16.3-8.7L320 64 564.8 33.4c6.7-.8 13.3 2.7 16.3 8.7l41.7 83.4c9 17.9-.6 39.6-19.8 45.1L439.6 217.3c-13.9 4-28.8-1.9-36.2-14.3L320 64 236.6 203c-7.4 12.4-22.3 18.3-36.2 14.3L37.1 170.6c-19.3-5.5-28.8-27.2-19.8-45.1L58.9 42.1zM321.1 128l54.9 91.4c14.9 24.8 44.6 36.6 72.5 28.6L576 211.6v167c0 22-15 41.2-36.4 46.6l-204.1 51c-10.2 2.6-20.9 2.6-31 0l-204.1-51C79 419.7 64 400.5 64 378.5v-167L191.6 248c27.8 8 57.6-3.8 72.5-28.6L318.9 128h2.2z"]},bn={prefix:"fas",iconName:"arrows-rotate",icon:[512,512,[128472,"refresh","sync"],"f021","M105.1 202.6c7.7-21.8 20.2-42.3 37.8-59.8c62.5-62.5 163.8-62.5 226.3 0L386.3 160H352c-17.7 0-32 14.3-32 32s14.3 32 32 32H463.5c0 0 0 0 0 0h.4c17.7 0 32-14.3 32-32V80c0-17.7-14.3-32-32-32s-32 14.3-32 32v35.2L414.4 97.6c-87.5-87.5-229.3-87.5-316.8 0C73.2 122 55.6 150.7 44.8 181.4c-5.9 16.7 2.9 34.9 19.5 40.8s34.9-2.9 40.8-19.5zM39 289.3c-5 1.5-9.8 4.2-13.7 8.2c-4 4-6.7 8.8-8.1 14c-.3 1.2-.6 2.5-.8 3.8c-.3 1.7-.4 3.4-.4 5.1V432c0 17.7 14.3 32 32 32s32-14.3 32-32V396.9l17.6 17.5 0 0c87.5 87.4 229.3 87.4 316.7 0c24.4-24.4 42.1-53.1 52.9-83.7c5.9-16.7-2.9-34.9-19.5-40.8s-34.9 2.9-40.8 19.5c-7.7 21.8-20.2 42.3-37.8 59.8c-62.5 62.5-163.8 62.5-226.3 0l-.1-.1L125.6 352H160c17.7 0 32-14.3 32-32s-14.3-32-32-32H48.4c-1.6 0-3.2 .1-4.8 .3s-3.1 .5-4.6 1z"]},gr=bn,Sn={prefix:"fas",iconName:"house-user",icon:[576,512,["home-user"],"e1b0","M575.8 255.5c0 18-15 32.1-32 32.1h-32l.7 160.2c.2 35.5-28.5 64.3-64 64.3H128.1c-35.3 0-64-28.7-64-64V287.6H32c-18 0-32-14-32-32.1c0-9 3-17 10-24L266.4 8c7-7 15-8 22-8s15 2 21 7L564.8 231.5c8 7 12 15 11 24zM352 224a64 64 0 1 0 -128 0 64 64 0 1 0 128 0zm-96 96c-44.2 0-80 35.8-80 80c0 8.8 7.2 16 16 16H384c8.8 0 16-7.2 16-16c0-44.2-35.8-80-80-80H256z"]},Cn={prefix:"fas",iconName:"tags",icon:[512,512,[],"f02c","M345 39.1L472.8 168.4c52.4 53 52.4 138.2 0 191.2L360.8 472.9c-9.3 9.4-24.5 9.5-33.9 .2s-9.5-24.5-.2-33.9L438.6 325.9c33.9-34.3 33.9-89.4 0-123.7L310.9 72.9c-9.3-9.4-9.2-24.6 .2-33.9s24.6-9.2 33.9 .2zM0 229.5V80C0 53.5 21.5 32 48 32H197.5c17 0 33.3 6.7 45.3 18.7l168 168c25 25 25 65.5 0 90.5L277.3 442.7c-25 25-65.5 25-90.5 0l-168-168C6.7 262.7 0 246.5 0 229.5zM144 144a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z"]},wn={prefix:"fas",iconName:"terminal",icon:[576,512,[],"f120","M9.4 86.6C-3.1 74.1-3.1 53.9 9.4 41.4s32.8-12.5 45.3 0l192 192c12.5 12.5 12.5 32.8 0 45.3l-192 192c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L178.7 256 9.4 86.6zM256 416H544c17.7 0 32 14.3 32 32s-14.3 32-32 32H256c-17.7 0-32-14.3-32-32s14.3-32 32-32z"]},yn={prefix:"fas",iconName:"tag",icon:[448,512,[127991],"f02b","M0 80V229.5c0 17 6.7 33.3 18.7 45.3l176 176c25 25 65.5 25 90.5 0L418.7 317.3c25-25 25-65.5 0-90.5l-176-176c-12-12-28.3-18.7-45.3-18.7H48C21.5 32 0 53.5 0 80zm112 32a32 32 0 1 1 0 64 32 32 0 1 1 0-64z"]},kn={prefix:"fas",iconName:"hard-drive",icon:[512,512,[128436,"hdd"],"f0a0","M0 96C0 60.7 28.7 32 64 32H448c35.3 0 64 28.7 64 64V280.4c-17-15.2-39.4-24.4-64-24.4H64c-24.6 0-47 9.2-64 24.4V96zM64 288H448c35.3 0 64 28.7 64 64v64c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V352c0-35.3 28.7-64 64-64zM320 416a32 32 0 1 0 0-64 32 32 0 1 0 0 64zm128-32a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z"]},En=kn,Ln={prefix:"fas",iconName:"gear",icon:[512,512,[9881,"cog"],"f013","M495.9 166.6c3.2 8.7 .5 18.4-6.4 24.6l-43.3 39.4c1.1 8.3 1.7 16.8 1.7 25.4s-.6 17.1-1.7 25.4l43.3 39.4c6.9 6.2 9.6 15.9 6.4 24.6c-4.4 11.9-9.7 23.3-15.8 34.3l-4.7 8.1c-6.6 11-14 21.4-22.1 31.2c-5.9 7.2-15.7 9.6-24.5 6.8l-55.7-17.7c-13.4 10.3-28.2 18.9-44 25.4l-12.5 57.1c-2 9.1-9 16.3-18.2 17.8c-13.8 2.3-28 3.5-42.5 3.5s-28.7-1.2-42.5-3.5c-9.2-1.5-16.2-8.7-18.2-17.8l-12.5-57.1c-15.8-6.5-30.6-15.1-44-25.4L83.1 425.9c-8.8 2.8-18.6 .3-24.5-6.8c-8.1-9.8-15.5-20.2-22.1-31.2l-4.7-8.1c-6.1-11-11.4-22.4-15.8-34.3c-3.2-8.7-.5-18.4 6.4-24.6l43.3-39.4C64.6 273.1 64 264.6 64 256s.6-17.1 1.7-25.4L22.4 191.2c-6.9-6.2-9.6-15.9-6.4-24.6c4.4-11.9 9.7-23.3 15.8-34.3l4.7-8.1c6.6-11 14-21.4 22.1-31.2c5.9-7.2 15.7-9.6 24.5-6.8l55.7 17.7c13.4-10.3 28.2-18.9 44-25.4l12.5-57.1c2-9.1 9-16.3 18.2-17.8C227.3 1.2 241.5 0 256 0s28.7 1.2 42.5 3.5c9.2 1.5 16.2 8.7 18.2 17.8l12.5 57.1c15.8 6.5 30.6 15.1 44 25.4l55.7-17.7c8.8-2.8 18.6-.3 24.5 6.8c8.1 9.8 15.5 20.2 22.1 31.2l4.7 8.1c6.1 11 11.4 22.4 15.8 34.3zM256 336a80 80 0 1 0 0-160 80 80 0 1 0 0 160z"]},Dn=Ln,Rn={prefix:"fas",iconName:"clock",icon:[512,512,[128339,"clock-four"],"f017","M256 0a256 256 0 1 1 0 512A256 256 0 1 1 256 0zM232 120V256c0 8 4 15.5 10.7 20l96 64c11 7.4 25.9 4.4 33.3-6.7s4.4-25.9-6.7-33.3L280 243.2V120c0-13.3-10.7-24-24-24s-24 10.7-24 24z"]},An={prefix:"fas",iconName:"network-wired",icon:[640,512,[],"f6ff","M256 64H384v64H256V64zM240 0c-26.5 0-48 21.5-48 48v96c0 26.5 21.5 48 48 48h48v32H32c-17.7 0-32 14.3-32 32s14.3 32 32 32h96v32H80c-26.5 0-48 21.5-48 48v96c0 26.5 21.5 48 48 48H240c26.5 0 48-21.5 48-48V368c0-26.5-21.5-48-48-48H192V288H448v32H400c-26.5 0-48 21.5-48 48v96c0 26.5 21.5 48 48 48H560c26.5 0 48-21.5 48-48V368c0-26.5-21.5-48-48-48H512V288h96c17.7 0 32-14.3 32-32s-14.3-32-32-32H352V192h48c26.5 0 48-21.5 48-48V48c0-26.5-21.5-48-48-48H240zM96 448V384H224v64H96zm320-64H544v64H416V384z"]},Bn={prefix:"fas",iconName:"download",icon:[512,512,[],"f019","M288 32c0-17.7-14.3-32-32-32s-32 14.3-32 32V274.7l-73.4-73.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l128 128c12.5 12.5 32.8 12.5 45.3 0l128-128c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L288 274.7V32zM64 352c-35.3 0-64 28.7-64 64v32c0 35.3 28.7 64 64 64H448c35.3 0 64-28.7 64-64V416c0-35.3-28.7-64-64-64H346.5l-45.3 45.3c-25 25-65.5 25-90.5 0L165.5 352H64zm368 56a24 24 0 1 1 0 48 24 24 0 1 1 0-48z"]},Mn={prefix:"fas",iconName:"house",icon:[576,512,[127968,63498,63500,"home","home-alt","home-lg-alt"],"f015","M575.8 255.5c0 18-15 32.1-32 32.1h-32l.7 160.2c0 2.7-.2 5.4-.5 8.1V472c0 22.1-17.9 40-40 40H456c-1.1 0-2.2 0-3.3-.1c-1.4 .1-2.8 .1-4.2 .1H416 392c-22.1 0-40-17.9-40-40V448 384c0-17.7-14.3-32-32-32H256c-17.7 0-32 14.3-32 32v64 24c0 22.1-17.9 40-40 40H160 128.1c-1.5 0-3-.1-4.5-.2c-1.2 .1-2.4 .2-3.6 .2H104c-22.1 0-40-17.9-40-40V360c0-.9 0-1.9 .1-2.8V287.6H32c-18 0-32-14-32-32.1c0-9 3-17 10-24L266.4 8c7-7 15-8 22-8s15 2 21 7L564.8 231.5c8 7 12 15 11 24z"]},Tn=Mn,xn={prefix:"fas",iconName:"stop",icon:[384,512,[9209],"f04d","M0 128C0 92.7 28.7 64 64 64H320c35.3 0 64 28.7 64 64V384c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V128z"]},On={prefix:"fas",iconName:"sun",icon:[512,512,[9728],"f185","M361.5 1.2c5 2.1 8.6 6.6 9.6 11.9L391 121l107.9 19.8c5.3 1 9.8 4.6 11.9 9.6s1.5 10.7-1.6 15.2L446.9 256l62.3 90.3c3.1 4.5 3.7 10.2 1.6 15.2s-6.6 8.6-11.9 9.6L391 391 371.1 498.9c-1 5.3-4.6 9.8-9.6 11.9s-10.7 1.5-15.2-1.6L256 446.9l-90.3 62.3c-4.5 3.1-10.2 3.7-15.2 1.6s-8.6-6.6-9.6-11.9L121 391 13.1 371.1c-5.3-1-9.8-4.6-11.9-9.6s-1.5-10.7 1.6-15.2L65.1 256 2.8 165.7c-3.1-4.5-3.7-10.2-1.6-15.2s6.6-8.6 11.9-9.6L121 121 140.9 13.1c1-5.3 4.6-9.8 9.6-11.9s10.7-1.5 15.2 1.6L256 65.1 346.3 2.8c4.5-3.1 10.2-3.7 15.2-1.6zM160 256a96 96 0 1 1 192 0 96 96 0 1 1 -192 0zm224 0a128 128 0 1 0 -256 0 128 128 0 1 0 256 0z"]},Pn={prefix:"fas",iconName:"file",icon:[384,512,[128196,128459,61462],"f15b","M0 64C0 28.7 28.7 0 64 0H224V128c0 17.7 14.3 32 32 32H384V448c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V64zm384 64H256V0L384 128z"]},In={prefix:"fas",iconName:"play",icon:[384,512,[9654],"f04b","M73 39c-14.8-9.1-33.4-9.4-48.5-.9S0 62.6 0 80V432c0 17.4 9.4 33.4 24.5 41.9s33.7 8.1 48.5-.9L361 297c14.3-8.7 23-24.2 23-41s-8.7-32.2-23-41L73 39z"]},Hn={prefix:"fas",iconName:"plus",icon:[448,512,[10133,61543,"add"],"2b","M256 80c0-17.7-14.3-32-32-32s-32 14.3-32 32V224H48c-17.7 0-32 14.3-32 32s14.3 32 32 32H192V432c0 17.7 14.3 32 32 32s32-14.3 32-32V288H400c17.7 0 32-14.3 32-32s-14.3-32-32-32H256V80z"]},$n={prefix:"fas",iconName:"moon",icon:[384,512,[127769,9214],"f186","M223.5 32C100 32 0 132.3 0 256S100 480 223.5 480c60.6 0 115.5-24.2 155.8-63.4c5-4.9 6.3-12.5 3.1-18.7s-10.1-9.7-17-8.5c-9.8 1.7-19.8 2.6-30.1 2.6c-96.9 0-175.5-78.8-175.5-176c0-65.8 36-123.1 89.3-153.3c6.1-3.5 9.2-10.5 7.7-17.3s-7.3-11.9-14.3-12.5c-6.3-.5-12.6-.8-19-.8z"]},Fn={prefix:"fas",iconName:"rectangle-xmark",icon:[512,512,[62164,"rectangle-times","times-rectangle","window-close"],"f410","M64 32C28.7 32 0 60.7 0 96V416c0 35.3 28.7 64 64 64H448c35.3 0 64-28.7 64-64V96c0-35.3-28.7-64-64-64H64zM175 175c9.4-9.4 24.6-9.4 33.9 0l47 47 47-47c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9l-47 47 47 47c9.4 9.4 9.4 24.6 0 33.9s-24.6 9.4-33.9 0l-47-47-47 47c-9.4 9.4-24.6 9.4-33.9 0s-9.4-24.6 0-33.9l47-47-47-47c-9.4-9.4-9.4-24.6 0-33.9z"]},zn=Fn,Nn={prefix:"fas",iconName:"turn-up",icon:[384,512,[10548,"level-up-alt"],"f3bf","M350 177.5c3.8-8.8 2-19-4.6-26l-136-144C204.9 2.7 198.6 0 192 0s-12.9 2.7-17.4 7.5l-136 144c-6.6 7-8.4 17.2-4.6 26s12.5 14.5 22 14.5h88l0 192c0 17.7-14.3 32-32 32H32c-17.7 0-32 14.3-32 32v32c0 17.7 14.3 32 32 32l80 0c70.7 0 128-57.3 128-128l0-192h88c9.6 0 18.2-5.7 22-14.5z"]},Wn=Nn;function Un(o){let e,t;return e=new _e({props:{icon:On,color:"#333",size:"2x"}}),{c(){ne(e.$$.fragment)},m(s,d){se(e,s,d),t=!0},i(s){t||(N(e.$$.fragment,s),t=!0)},o(s){K(e.$$.fragment,s),t=!1},d(s){re(e,s)}}}function jn(o){let e,t;return e=new _e({props:{icon:$n,color:"#333",size:"2x"}}),{c(){ne(e.$$.fragment)},m(s,d){se(e,s,d),t=!0},i(s){t||(N(e.$$.fragment,s),t=!0)},o(s){K(e.$$.fragment,s),t=!1},d(s){re(e,s)}}}function Vn(o){let e,t,s,d,m,_;const i=[jn,Un],r=[];function c(f,l){return f[0]==="dark"?0:1}return t=c(o),s=r[t]=i[t](o),{c(){e=P("button"),s.c(),R(e,"type","button"),R(e,"class","btn mx-2"),R(e,"title","Switch Theme")},m(f,l){j(f,e,l),r[t].m(e,null),d=!0,m||(_=pe(e,"click",o[1]),m=!0)},p(f,[l]){let p=t;t=c(f),t!==p&&(ve(),K(r[p],1,1,()=>{r[p]=null}),ge(),s=r[t],s||(s=r[t]=i[t](f),s.c()),N(s,1),s.m(e,null))},i(f){d||(N(s),d=!0)},o(f){K(s),d=!1},d(f){f&&W(e),r[t].d(),m=!1,_()}}}function Kn(o,e,t){let s;function d(){s==="light"?(t(0,s="dark"),document.querySelector("html").classList.add("dark")):(t(0,s="light"),document.querySelector("html").classList.remove("dark"))}return Ge(()=>{t(0,s="dark"),s==="dark"&&document.querySelector("html").classList.add("dark")}),[s,d]}class qn extends He{constructor(e){super(),Ie(this,e,Kn,Vn,xe,{})}}function Hi(o){let e,t,s,d,m,_,i;function r(S,n){if(S[0]==="error"||S[0]==="warning")return Zn;if(S[0]==="success")return Xn;if(S[0]==="info")return Gn}let c=r(o),f=c&&c(o),l=o[0]==="error"&&$i();const p=o[4].default,b=Kt(p,o,o[3],null);let w=o[1]&&Fi(o);return{c(){e=P("div"),f&&f.c(),t=G(),s=P("div"),l&&l.c(),d=G(),b&&b.c(),m=G(),w&&w.c(),R(e,"class","alert d-flex align-items-center"),R(e,"role","alert"),he(e,"alert-danger",o[0]==="error"),he(e,"alert-warning",o[0]==="warning"),he(e,"alert-success",o[0]==="success"),he(e,"alert-info",o[0]==="info"),he(e,"alert-dismissible",o[1])},m(S,n){j(S,e,n),f&&f.m(e,null),A(e,t),A(e,s),l&&l.m(s,null),A(s,d),b&&b.m(s,null),A(s,m),w&&w.m(s,null),i=!0},p(S,n){c!==(c=r(S))&&(f&&f.d(1),f=c&&c(S),f&&(f.c(),f.m(e,t))),S[0]==="error"?l||(l=$i(),l.c(),l.m(s,d)):l&&(l.d(1),l=null),b&&b.p&&(!i||n&8)&&Gt(b,p,S,S[3],i?qt(p,S[3],n,null):Xt(S[3]),null),S[1]?w?w.p(S,n):(w=Fi(S),w.c(),w.m(s,null)):w&&(w.d(1),w=null),(!i||n&1)&&he(e,"alert-danger",S[0]==="error"),(!i||n&1)&&he(e,"alert-warning",S[0]==="warning"),(!i||n&1)&&he(e,"alert-success",S[0]==="success"),(!i||n&1)&&he(e,"alert-info",S[0]==="info"),(!i||n&2)&&he(e,"alert-dismissible",S[1])},i(S){i||(N(b,S),S&&Te(()=>{i&&(_||(_=Ke(e,Ne,{},!0)),_.run(1))}),i=!0)},o(S){K(b,S),S&&(_||(_=Ke(e,Ne,{},!1)),_.run(0)),i=!1},d(S){S&&W(e),f&&f.d(),l&&l.d(),b&&b.d(S),w&&w.d(),S&&_&&_.end()}}}function Gn(o){let e,t;return{c(){e=Ee("svg"),t=Ee("use"),pi(t,"xlink:href","#info-fill"),R(e,"class","bi flex-shrink-0 me-2"),R(e,"width","24"),R(e,"height","24"),R(e,"role","img"),R(e,"aria-label","Info:")},m(s,d){j(s,e,d),A(e,t)},d(s){s&&W(e)}}}function Xn(o){let e,t;return{c(){e=Ee("svg"),t=Ee("use"),pi(t,"xlink:href","#check-circle-fill"),R(e,"class","bi flex-shrink-0 me-2"),R(e,"width","24"),R(e,"height","24"),R(e,"role","img"),R(e,"aria-label","Success:")},m(s,d){j(s,e,d),A(e,t)},d(s){s&&W(e)}}}function Zn(o){let e,t;return{c(){e=Ee("svg"),t=Ee("use"),pi(t,"xlink:href","#exclamation-triangle-fill"),R(e,"class","bi flex-shrink-0 me-2"),R(e,"width","24"),R(e,"height","24"),R(e,"role","img"),R(e,"aria-label","Danger:")},m(s,d){j(s,e,d),A(e,t)},d(s){s&&W(e)}}}function $i(o){let e;return{c(){e=P("strong"),e.textContent="Error:"},m(t,s){j(t,e,s)},d(t){t&&W(e)}}}function Fi(o){let e,t,s;return{c(){e=P("button"),R(e,"type","button"),R(e,"class","btn-close"),R(e,"data-bs-dismiss","alert"),R(e,"aria-label","Close")},m(d,m){j(d,e,m),t||(s=pe(e,"click",o[5]),t=!0)},p:ce,d(d){d&&W(e),t=!1,s()}}}function Jn(o){let e,t,s,d,m,_,i,r,c,f,l=!o[2]&&Hi(o);return{c(){e=Ee("svg"),t=Ee("symbol"),s=Ee("path"),d=Ee("symbol"),m=Ee("path"),_=Ee("symbol"),i=Ee("path"),r=G(),l&&l.c(),c=rt(),R(s,"d","M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"),R(t,"id","check-circle-fill"),R(t,"fill","currentColor"),R(t,"viewBox","0 0 16 16"),R(m,"d","M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zm.93-9.412-1 4.705c-.07.34.029.533.304.533.194 0 .487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703 0-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381 2.29-.287zM8 5.5a1 1 0 1 1 0-2 1 1 0 0 1 0 2z"),R(d,"id","info-fill"),R(d,"fill","currentColor"),R(d,"viewBox","0 0 16 16"),R(i,"d","M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5zm.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"),R(_,"id","exclamation-triangle-fill"),R(_,"fill","currentColor"),R(_,"viewBox","0 0 16 16"),R(e,"xmlns","http://www.w3.org/2000/svg"),be(e,"display","none")},m(p,b){j(p,e,b),A(e,t),A(t,s),A(e,d),A(d,m),A(e,_),A(_,i),j(p,r,b),l&&l.m(p,b),j(p,c,b),f=!0},p(p,[b]){p[2]?l&&(ve(),K(l,1,1,()=>{l=null}),ge()):l?(l.p(p,b),b&4&&N(l,1)):(l=Hi(p),l.c(),N(l,1),l.m(c.parentNode,c))},i(p){f||(N(l),f=!0)},o(p){K(l),f=!1},d(p){p&&(W(e),W(r),W(c)),l&&l.d(p)}}}function Yn(o,e,t){let{$$slots:s={},$$scope:d}=e,{type:m}=e,{dismissible:_=!1}=e,i=!1;const r=()=>t(2,i=!0);return o.$$set=c=>{"type"in c&&t(0,m=c.type),"dismissible"in c&&t(1,_=c.dismissible),"$$scope"in c&&t(3,d=c.$$scope)},[m,_,i,d,s,r]}class Qn extends He{constructor(e){super(),Ie(this,e,Yn,Jn,xe,{type:0,dismissible:1})}}function eo(o){switch(o.request){case"login":return`{"response": "login", "payload": {"username": "${o.payload.username}"}}`;case"get_system_info":return'{"response": "get_system_info", "payload": {"engine_version": "Docker 20.10.7", "containers": {"total": 178, "running": 170, "stopped": 0}, "os": "Ubuntu 20.04.3 LTS", "cpus": 24, "mem": 31277850624}}';case"get_container_list":return`{"response": "get_container_list", "payload": [
                {"id": "2b7eb6b9d2f7fd2dd26738500a81a16310f78e46eea2f9c2a27ed876d85d8586", "name": "CaaSa Demo", "namespace": null, "status": "running", "permissions": ["info", "info-annotations", "procs", "files-read", "files-write", "files", "logs", "state", "term"]},
                {"id": "2b7eb6b9d2f7fd2dd26738500a81a16310f78e46eea2f9c2a27ed876d85d8587", "name": "Backend", "namespace": "Cool Web App", "status": "running", "permissions": ["info", "info-annotations", "procs", "files-read", "files-write", "files", "logs", "state", "term"]},
                {"id": "2b7eb6b9d2f7fd2dd26738500a81a16310f78e46eea2f9c2a27ed876d85d8588", "name": "Gateway", "namespace": "Cool Web App", "status": "running", "permissions": ["info", "info-annotations", "procs", "files-read", "files-write", "files", "logs", "state", "term"]}
               ]}`;case"get_processes":return'{"response": "get_processes", "payload": [{"pid": "45756", "ppid": "45733", "%cpu": "0.0", "%mem": "0.0", "user": "root", "stime": "16:24", "command": "nginx: master process nginx -g daemon off;", "level": 0}, {"pid": "45822", "ppid": "45756", "%cpu": "0.0", "%mem": "0.0", "user": "systemd+", "stime": "16:24", "command": "nginx: worker process", "level": 1}, {"pid": "45823", "ppid": "45756", "%cpu": "0.0", "%mem": "0.0", "user": "systemd+", "stime": "16:24", "command": "nginx: worker process", "level": 1}, {"pid": "45824", "ppid": "45756", "%cpu": "0.0", "%mem": "0.0", "user": "systemd+", "stime": "16:24", "command": "nginx: worker process", "level": 1}, {"pid": "45825", "ppid": "45756", "%cpu": "0.0", "%mem": "0.0", "user": "systemd+", "stime": "16:24", "command": "nginx: worker process", "level": 1}, {"pid": "45826", "ppid": "45756", "%cpu": "0.0", "%mem": "0.0", "user": "systemd+", "stime": "16:24", "command": "nginx: worker process", "level": 1}, {"pid": "45827", "ppid": "45756", "%cpu": "0.0", "%mem": "0.0", "user": "systemd+", "stime": "16:24", "command": "nginx: worker process", "level": 1}, {"pid": "45828", "ppid": "45756", "%cpu": "0.0", "%mem": "0.0", "user": "systemd+", "stime": "16:24", "command": "nginx: worker process", "level": 1}, {"pid": "45829", "ppid": "45756", "%cpu": "0.0", "%mem": "0.0", "user": "systemd+", "stime": "16:24", "command": "nginx: worker process", "level": 1}, {"pid": "45830", "ppid": "45756", "%cpu": "0.0", "%mem": "0.0", "user": "systemd+", "stime": "16:24", "command": "nginx: worker process", "level": 1}, {"pid": "45831", "ppid": "45756", "%cpu": "0.0", "%mem": "0.0", "user": "systemd+", "stime": "16:24", "command": "nginx: worker process", "level": 1}, {"pid": "45832", "ppid": "45756", "%cpu": "0.0", "%mem": "0.0", "user": "systemd+", "stime": "16:24", "command": "nginx: worker process", "level": 1}, {"pid": "45833", "ppid": "45756", "%cpu": "0.0", "%mem": "0.0", "user": "systemd+", "stime": "16:24", "command": "nginx: worker process", "level": 1}, {"pid": "46825", "ppid": "45733", "%cpu": "0.0", "%mem": "0.0", "user": "root", "stime": "16:34", "command": "sh", "level": 0}]}';case"get_container_info":const e={"2b7eb6b9d2f7fd2dd26738500a81a16310f78e46eea2f9c2a27ed876d85d8586":"/caasa_demo","2b7eb6b9d2f7fd2dd26738500a81a16310f78e46eea2f9c2a27ed876d85d8587":"/cool_web_app_backend_1","2b7eb6b9d2f7fd2dd26738500a81a16310f78e46eea2f9c2a27ed876d85d8588":"/cool_web_app_gateway_1"};return`{"response": "get_container_info", "payload": {"id": "${o.payload.container_id}", "name": "${e[o.payload.container_id]}", "status": "running", "command": "/docker-entrypoint.sh nginx -g daemon off;", "created_at": "2021-12-02T10:33:16.628618832Z", "started_at": "2021-12-02T10:33:17.015866729Z", "finished_at": "0001-01-01T00:00:00Z", "crashes": 0, "env": {"PATH": "/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin", "NGINX_VERSION": "1.21.1", "NJS_VERSION": "0.6.1", "PKG_RELEASE": "1"}, "labels": {"caasa.admin.full": "user1,user2", "maintainer": "NGINX Docker Maintainers <docker-maint@nginx.com>"}, "image": {"name": "nginx:alpine", "hash": "sha256:b9e2356ea1be9452f3777a587b0b6a30bc16c295fe6190eda6a0776522f27439"}, "mem": {"used": 10452992, "max_used": 19345408, "total": 52428800}, "cpu": {"perc": ${Math.random()*10}}, "net": {"rx_bytes": 18201, "tx_bytes": 0}, "ports": ["80/tcp"]}}`;case"get_container_logs":return o.payload.onlynew?'{"response": "get_container_logs", "payload":[]}':'{"response": "get_container_logs", "payload": ["2021-12-02T10:33:17.021946340Z /docker-entrypoint.sh: /docker-entrypoint.d/ is not empty, will attempt to perform configuration","2021-12-02T10:33:17.021988550Z /docker-entrypoint.sh: Looking for shell scripts in /docker-entrypoint.d/","2021-12-02T10:33:17.023417432Z /docker-entrypoint.sh: Launching /docker-entrypoint.d/10-listen-on-ipv6-by-default.sh","2021-12-02T10:33:17.031231257Z 10-listen-on-ipv6-by-default.sh: info: Getting the checksum of /etc/nginx/conf.d/default.conf","2021-12-02T10:33:17.055742664Z 10-listen-on-ipv6-by-default.sh: info: Enabled listen on IPv6 in /etc/nginx/conf.d/default.conf","2021-12-02T10:33:17.056041305Z /docker-entrypoint.sh: Launching /docker-entrypoint.d/20-envsubst-on-templates.sh","2021-12-02T10:33:17.059979717Z /docker-entrypoint.sh: Launching /docker-entrypoint.d/30-tune-worker-processes.sh","2021-12-02T10:33:17.062059371Z /docker-entrypoint.sh: Configuration complete; ready for start up","2021-12-02T10:33:17.074027144Z 2021/12/02 10:33:17 [notice] 1#1: using the \\"epoll\\" event method","2021-12-02T10:33:17.074056600Z 2021/12/02 10:33:17 [notice] 1#1: nginx/1.21.1","2021-12-02T10:33:17.074063653Z 2021/12/02 10:33:17 [notice] 1#1: built by gcc 10.3.1 20210424 (Alpine 10.3.1_git20210424) ","2021-12-02T10:33:17.074069845Z 2021/12/02 10:33:17 [notice] 1#1: OS: Linux 5.11.0-40-generic","2021-12-02T10:33:17.074075475Z 2021/12/02 10:33:17 [notice] 1#1: getrlimit(RLIMIT_NOFILE): 1048576:1048576","2021-12-02T10:33:17.074245905Z 2021/12/02 10:33:17 [notice] 1#1: start worker processes","2021-12-02T10:33:17.074276953Z 2021/12/02 10:33:17 [notice] 1#1: start worker process 32","2021-12-02T10:33:17.074379486Z 2021/12/02 10:33:17 [notice] 1#1: start worker process 33","2021-12-02T10:33:17.074401427Z 2021/12/02 10:33:17 [notice] 1#1: start worker process 34","2021-12-02T10:33:17.074513127Z 2021/12/02 10:33:17 [notice] 1#1: start worker process 35","2021-12-02T10:33:17.074601242Z 2021/12/02 10:33:17 [notice] 1#1: start worker process 36","2021-12-02T10:33:17.074666745Z 2021/12/02 10:33:17 [notice] 1#1: start worker process 37","2021-12-02T10:33:17.074817979Z 2021/12/02 10:33:17 [notice] 1#1: start worker process 38","2021-12-02T10:33:17.074873423Z 2021/12/02 10:33:17 [notice] 1#1: start worker process 39","2021-12-02T10:33:17.075007344Z 2021/12/02 10:33:17 [notice] 1#1: start worker process 40","2021-12-02T10:33:17.075141746Z 2021/12/02 10:33:17 [notice] 1#1: start worker process 41","2021-12-02T10:33:17.075279715Z 2021/12/02 10:33:17 [notice] 1#1: start worker process 42","2021-12-02T10:33:17.075393118Z 2021/12/02 10:33:17 [notice] 1#1: start worker process 43"]}';case"get_filesystem_info":return'{"response": "get_filesystem_info", "payload": {"workdir": "", "mounts": [{"type": "bind", "destination": "/etc/ssl/certs", "readonly": true, "source": "/etc/ssl/certs"}]}}';case"get_directory_list":return o.payload.path===""||o.payload.path==="/"?'{"response": "get_directory_list", "payload": {"entries": [{"type": "f", "permissions": "rwxr-xr-x", "owner": "root", "group": "root", "filesize": "0B", "modtime": "2021-12-02 16:19:13", "name": ".dockerenv"}, {"type": "d", "permissions": "rwxr-xr-x", "owner": "root", "group": "root", "filesize": "4.0KB", "modtime": "2021-06-15 14:34:40", "name": "bin"}, {"type": "d", "permissions": "rwxr-xr-x", "owner": "root", "group": "root", "filesize": "360B", "modtime": "2021-12-02 16:19:13", "name": "dev"}, {"type": "d", "permissions": "rwxr-xr-x", "owner": "root", "group": "root", "filesize": "4.0KB", "modtime": "2021-07-06 19:40:27", "name": "docker-entrypoint.d"}, {"type": "f", "permissions": "rwxrwxr-x", "owner": "root", "group": "root", "filesize": "1.2KB", "modtime": "2021-07-06 19:40:16", "name": "docker-entrypoint.sh"}, {"type": "d", "permissions": "rwxr-xr-x", "owner": "root", "group": "root", "filesize": "4.0KB", "modtime": "2021-12-02 16:19:13", "name": "etc"}, {"type": "d", "permissions": "rwxr-xr-x", "owner": "root", "group": "root", "filesize": "4.0KB", "modtime": "2021-06-15 14:34:40", "name": "home"}, {"type": "d", "permissions": "rwxr-xr-x", "owner": "root", "group": "root", "filesize": "4.0KB", "modtime": "2021-06-15 14:34:40", "name": "lib"}, {"type": "d", "permissions": "rwxr-xr-x", "owner": "root", "group": "root", "filesize": "4.0KB", "modtime": "2021-06-15 14:34:40", "name": "media"}, {"type": "d", "permissions": "rwxr-xr-x", "owner": "root", "group": "root", "filesize": "4.0KB", "modtime": "2021-06-15 14:34:40", "name": "mnt"}, {"type": "d", "permissions": "rwxr-xr-x", "owner": "root", "group": "root", "filesize": "4.0KB", "modtime": "2021-06-15 14:34:40", "name": "opt"}, {"type": "d", "permissions": "r-xr-xr-x", "owner": "root", "group": "root", "filesize": "0B", "modtime": "2021-12-02 16:19:13", "name": "proc"}, {"type": "d", "permissions": "rwx------", "owner": "root", "group": "root", "filesize": "4.0KB", "modtime": "2021-06-15 14:34:40", "name": "root"}, {"type": "d", "permissions": "rwxr-xr-x", "owner": "root", "group": "root", "filesize": "4.0KB", "modtime": "2021-12-02 16:19:13", "name": "run"}, {"type": "d", "permissions": "rwxr-xr-x", "owner": "root", "group": "root", "filesize": "4.0KB", "modtime": "2021-06-15 14:34:40", "name": "sbin"}, {"type": "d", "permissions": "rwxr-xr-x", "owner": "root", "group": "root", "filesize": "4.0KB", "modtime": "2021-06-15 14:34:40", "name": "srv"}, {"type": "d", "permissions": "r-xr-xr-x", "owner": "root", "group": "root", "filesize": "0B", "modtime": "2021-12-02 16:19:13", "name": "sys"}, {"type": "d", "permissions": "rwxr-xr-x", "owner": "root", "group": "root", "filesize": "4.0KB", "modtime": "2021-06-15 14:34:40", "name": "usr"}, {"type": "d", "permissions": "rwxr-xr-x", "owner": "root", "group": "root", "filesize": "4.0KB", "modtime": "2021-06-15 14:34:40", "name": "var"}], "path": "/"}}':!1;case"spawn_terminal":return'{"response": "spawn_terminal", "payload": {"execId": "2680be7b4aa3c0b6599edf3521f5813a770ccec7966a59c57cfdac5b4e3b7e9a"}}';case"resize_terminal":return!0;case"transmit_terminal_input":return o.payload.data==="\r"?`56!{"response": "receive_terminal_output", "payload": null}\r
This is just a demo`:'56!{"response": "receive_terminal_output", "payload": null}'+o.payload.data;default:return!1}}class to{constructor(e){Pe(this,"binaryType");Pe(this,"bufferedAmount");Pe(this,"extensions");Pe(this,"onclose");Pe(this,"onerror");Pe(this,"onmessage");Pe(this,"onopen");Pe(this,"protocol");Pe(this,"readyState");Pe(this,"url");Pe(this,"CLOSED");Pe(this,"CLOSING");Pe(this,"CONNECTING");Pe(this,"OPEN")}close(e,t){}addEventListener(e,t,s){throw new Error("Method not implemented.")}removeEventListener(e,t,s){throw new Error("Method not implemented.")}dispatchEvent(e){throw new Error("Method not implemented.")}send(e){const t=JSON.parse(e),s=eo(t),d={data:void 0,...new Event("api-mock")};if(s===!1?d.data=`{"response": "${t.request}", "error": "Sorry, command not mocked in demo"}`:s===!0||(s[0]!=="{"?d.data=new Blob([s]):d.data=s),d.data&&(setTimeout(()=>this.onmessage(d),200),typeof d.data=="string"&&d.data.includes("spawn_terminal"))){console.log("extra response for terminal");const m={data:void 0,...new Event("api-mock")};m.data=new Blob(['56!{"response": "receive_terminal_output", "payload": null}/ # ']),setTimeout(()=>this.onmessage(m),300)}}}let nt,Ot={},Pt={};function zi(o,e){o in Ot?Ot[o](e):console.error("WS-API Unknown websocket event:",o)}function jt(o,e){o in Pt?Pt[o](e):console.error("WS-API Unknown websocket event:",o)}function Ni(){Ot={},Pt={}}const le={init(){try{nt&&nt.close(1e3),nt=new to(`${window.location.protocol.replace("http","ws")}//${window.location.host}/ws`),nt.binaryType="blob",nt.onclose=o=>{jt("ws-close",o.reason||"Connection closed"),Ni()},nt.onmessage=async o=>{if(o.data instanceof Blob){const e=parseInt(await o.data.slice(0,10).text()),t=e.toString().length+1,s=await o.data.slice(t,t+e).text(),d=JSON.parse(s);d.error?jt(d.response,d.error):zi(d.response,{payload:d.payload,blob:o.data.slice(t+e)})}else{const e=JSON.parse(o.data);e.error?jt(e.response,e.error):zi(e.response,e.payload)}},nt.onerror=o=>{jt("ws-error","Connection error")}}catch(o){alert(o)}},register(o,e,t){e&&(Ot[o]=e),t&&(Pt[o]=t)},unregister(...o){o.forEach(e=>{delete Pt[e],delete Ot[e]})},send(o,e){nt.send(JSON.stringify({request:o,payload:e}))},close(){Ni(),nt.close()}};function io(o,e,t){const s=o.slice();return s[2]=e[t],s}function Wi(o){let e,t,s,d,m,_=ye([1,2,3]),i=[];for(let c=0;c<3;c+=1)i[c]=so(io(o,_,c));let r=o[0]&&Ui(o);return{c(){e=P("div"),t=P("div"),s=P("div");for(let c=0;c<3;c+=1)i[c].c();d=G(),r&&r.c(),R(s,"class","d-flex justify-content-center align-items-center"),R(t,"class","bg-inner d-flex flex-column rounded p-3 svelte-1l5azpb"),R(e,"class","bg-outer position-fixed d-flex justify-content-center align-items-center top-0 start-0 end-0 bottom-0 svelte-1l5azpb")},m(c,f){j(c,e,f),A(e,t),A(t,s);for(let l=0;l<3;l+=1)i[l]&&i[l].m(s,null);A(t,d),r&&r.m(t,null)},p(c,f){c[0]?r?r.p(c,f):(r=Ui(c),r.c(),r.m(t,null)):r&&(r.d(1),r=null)},i(c){c&&(m||Te(()=>{m=wt(e,Gr,{}),m.start()}))},o:ce,d(c){c&&W(e),Ve(i,c),r&&r.d()}}}function so(o){let e;return{c(){e=P("div"),e.innerHTML='<span class="visually-hidden">Loading...</span> ',R(e,"class","spinner-grow mx-2 text-light"),R(e,"role","status")},m(t,s){j(t,e,s)},p:ce,d(t){t&&W(e)}}}function Ui(o){let e,t;return{c(){e=P("div"),t=Y(o[0]),R(e,"class","mt-4 text-light")},m(s,d){j(s,e,d),A(e,t)},p(s,d){d&1&&ae(t,s[0])},d(s){s&&W(e)}}}function ro(o){let e,t=o[1]&&Wi(o);return{c(){t&&t.c(),e=rt()},m(s,d){t&&t.m(s,d),j(s,e,d)},p(s,[d]){s[1]?t?(t.p(s,d),d&2&&N(t,1)):(t=Wi(s),t.c(),N(t,1),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i(s){N(t)},o:ce,d(s){s&&W(e),t&&t.d(s)}}}function no(o,e,t){let{text:s=""}=e,d=!1;return Ge(()=>{setTimeout(()=>t(1,d=!0),250)}),o.$$set=m=>{"text"in m&&t(0,s=m.text)},[s,d]}class br extends He{constructor(e){super(),Ie(this,e,no,ro,xe,{text:0})}}function ji(o){let e,t;return e=new br({}),{c(){ne(e.$$.fragment)},m(s,d){se(e,s,d),t=!0},i(s){t||(N(e.$$.fragment,s),t=!0)},o(s){K(e.$$.fragment,s),t=!1},d(s){re(e,s)}}}function Vi(o){let e,t;return e=new Qn({props:{type:"error",dismissible:!0,$$slots:{default:[oo]},$$scope:{ctx:o}}}),{c(){ne(e.$$.fragment)},m(s,d){se(e,s,d),t=!0},p(s,d){const m={};d&1032&&(m.$$scope={dirty:d,ctx:s}),e.$set(m)},i(s){t||(N(e.$$.fragment,s),t=!0)},o(s){K(e.$$.fragment,s),t=!1},d(s){re(e,s)}}}function oo(o){let e;return{c(){e=Y(o[3])},m(t,s){j(t,e,s)},p(t,s){s&8&&ae(e,t[3])},d(t){t&&W(e)}}}function lo(o){let e,t,s,d,m,_,i,r,c,f,l,p,b,w,S,n,h,a,u,g=o[2]&&ji(),v=o[3]&&Vi(o);return{c(){g&&g.c(),e=G(),t=P("div"),v&&v.c(),s=G(),d=P("form"),m=P("div"),_=P("input"),i=G(),r=P("label"),r.textContent="Username",c=G(),f=P("div"),l=P("input"),p=G(),b=P("label"),b.textContent="Password",w=G(),S=P("div"),S.innerHTML='<button type="submit" class="btn btn-primary w-100">Login</button>',R(_,"type","text"),R(_,"class","form-control"),R(_,"id","loginName"),R(_,"placeholder"," "),_.required=!0,R(_,"autocomplete","username"),R(r,"for","loginName"),R(m,"class","form-floating mb-2"),R(l,"type","password"),R(l,"class","form-control"),R(l,"id","loginPw"),R(l,"placeholder"," "),l.required=!0,R(l,"autocomplete","current-password"),R(b,"for","loginPw"),R(f,"class","form-floating mb-2"),R(S,"class","col-12"),R(d,"class","container login-form svelte-ur79cd"),R(t,"class","container pt-5")},m(y,E){g&&g.m(y,E),j(y,e,E),j(y,t,E),v&&v.m(t,null),A(t,s),A(t,d),A(d,m),A(m,_),Ye(_,o[0]),A(m,i),A(m,r),A(d,c),A(d,f),A(f,l),Ye(l,o[1]),A(f,p),A(f,b),A(d,w),A(d,S),h=!0,a||(u=[pe(_,"input",o[5]),pe(_,"input",o[6]),pe(l,"input",o[7]),pe(d,"submit",ei(o[8]))],a=!0)},p(y,[E]){y[2]?g?E&4&&N(g,1):(g=ji(),g.c(),N(g,1),g.m(e.parentNode,e)):g&&(ve(),K(g,1,1,()=>{g=null}),ge()),y[3]?v?(v.p(y,E),E&8&&N(v,1)):(v=Vi(y),v.c(),N(v,1),v.m(t,s)):v&&(ve(),K(v,1,1,()=>{v=null}),ge()),E&1&&_.value!==y[0]&&Ye(_,y[0]),E&2&&l.value!==y[1]&&Ye(l,y[1])},i(y){h||(N(g),N(v),y&&Te(()=>{h&&(n||(n=Ke(d,Ne,{},!0)),n.run(1))}),h=!0)},o(y){K(g),K(v),y&&(n||(n=Ke(d,Ne,{},!1)),n.run(0)),h=!1},d(y){y&&(W(e),W(t)),g&&g.d(y),v&&v.d(),y&&n&&n.end(),a=!1,qe(u)}}}function ao(o,e,t){let{username:s="admin"}=e,d="123456",m=!1,_="";const i=or();Ge(()=>{le.register("login",({username:b})=>{i("login",{username:b})},b=>{t(2,m=!1),Ce.add({text:b,type:"error"})})}),dt(()=>{le.unregister("login")});async function r(){t(2,m=!0),le.send("login",{username:s,password:d}),t(3,_=""),t(1,d="")}function c(){s=this.value,t(0,s)}const f=()=>{t(0,s=s.toLowerCase().trim())};function l(){d=this.value,t(1,d)}const p=()=>r();return o.$$set=b=>{"username"in b&&t(0,s=b.username)},[s,d,m,_,r,c,f,l,p]}class co extends He{constructor(e){super(),Ie(this,e,ao,lo,xe,{username:0})}}function It(o,e=0){return Math.round(o*10**e)/10**e}function je(o){const e=["","Ki","Mi","Gi","Ti"];let t=0;for(;o>=1024;)o/=1024,t++;const s=Math.max(Math.floor(Math.log10(Math.floor(o))),0);return It(o,2-s)+" "+e[t]+"B"}function st(o){return new Date(o).toLocaleString(void 0,{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})}function Sr(o,e){var t;if((t=window==null?void 0:window.navigator)!=null&&t.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(o,e);else{const s=document.createElement("a");document.body.appendChild(s);const d=window.URL.createObjectURL(o);s.href=d,s.download=e,s.click(),setTimeout(()=>{window.URL.revokeObjectURL(d),document.body.removeChild(s)},0)}}function Ki(o,e,t){const s=o.slice();return s[15]=e[t][0],s[16]=e[t][1],s}function qi(o,e,t){const s=o.slice();return s[15]=e[t][0],s[16]=e[t][1],s}function Gi(o,e,t){const s=o.slice();return s[21]=e[t],s}function ho(o){var ki,Ei,Li;let e,t,s,d,m,_,i,r,c,f,l,p,b=o[1].id.substring(0,12)+"",w,S,n,h,a=o[1].name.replace(/^\//,"")+"",u,g,v,y,E,C,k,L=o[1].command+"",T,x,O,U,$,q,F,D,M,H,I,X,J,ie,te,fe,B,z,Z,V,oe,ee,me,we,ke,Xe,ue,lt,Qe,at,_t,Oe,Le,We,$e,ct,ht=st(o[1].created_at)+"",Ue,pt,Fe,Ze,Se,mt=o[1].crashes+"",ii,mi,vi,yt,kt,gi,Et,Lt,bi,Dt,Rt,Si,$t,Ft=o[1].status.charAt(0).toUpperCase()+o[1].status.slice(1).toLowerCase()+"",si,ri,At,Je;s=new _e({props:{icon:vr,size:"2x"}});let De=o[0]&&Xi(o);E=new _e({props:{icon:wn}}),$=new _e({props:{icon:_n,size:"2x"}});let ze=((ki=o[1].image)==null?void 0:ki.hash)!==((Li=(Ei=o[1])==null?void 0:Ei.image)==null?void 0:Li.name)&&Yi(o);function Ci(Q,de){return de&32&&(ie=null),de&32&&(te=null),ie==null&&(ie=!Q[5].includes("/")),ie?yo:(te==null&&(te=!!Q[5].match(/^\w+\/\w+$/)),te?wo:Co)}let zt=Ci(o,-1),et=zt(o);z=new _e({props:{icon:yn}});let Re=o[1].cpu&&Qi(o),Ae=o[1].mem&&es(o),Be=o[1].net&&os(o);ue=new _e({props:{icon:Rn,size:"2x"}});function wi(Q,de){return Q[1].finished_at<Q[1].started_at?Eo:ko}let Nt=wi(o),tt=Nt(o);function yi(Q,de){return Q[1].finished_at>Q[1].started_at?Ao:Ro}let Wt=yi(o),it=Wt(o),Me=(o[1].env||o[1].labels)&&cs(o);return{c(){e=P("div"),t=P("div"),ne(s.$$.fragment),d=G(),m=P("div"),_=P("div"),i=P("div"),r=P("div"),c=P("span"),c.textContent="Container",f=G(),l=P("span"),p=Y("#"),w=Y(b),S=G(),n=P("div"),h=P("h6"),u=Y(a),g=G(),De&&De.c(),v=G(),y=P("div"),ne(E.$$.fragment),C=G(),k=P("code"),T=Y(L),x=G(),O=P("div"),U=P("div"),ne($.$$.fragment),q=G(),F=P("div"),D=P("div"),M=P("span"),M.textContent="Image",H=G(),ze&&ze.c(),I=G(),X=P("div"),J=P("h6"),et.c(),fe=G(),B=P("span"),ne(z.$$.fragment),Z=G(),V=Y(o[4]),oe=G(),Re&&Re.c(),ee=G(),Ae&&Ae.c(),me=G(),Be&&Be.c(),we=G(),ke=P("div"),Xe=P("div"),ne(ue.$$.fragment),lt=G(),Qe=P("div"),at=P("div"),at.textContent="Timeline",_t=G(),Oe=P("div"),Le=P("div"),We=P("div"),$e=P("div"),$e.textContent="Created",ct=G(),Ue=Y(ht),pt=G(),Fe=P("div"),Ze=P("div"),Se=P("div"),ii=Y(mt),mi=Y(`
              Crashes`),vi=G(),yt=P("div"),kt=P("div"),tt.c(),gi=G(),Et=P("div"),Lt=P("div"),it.c(),bi=G(),Dt=P("div"),Rt=P("div"),Si=Y(`Currently
              `),$t=P("div"),si=Y(Ft),ri=G(),Me&&Me.c(),At=rt(),R(t,"class","icon-left ms-1 me-3 svelte-n9m8lc"),R(c,"class","me-2"),R(l,"class","text-muted font-monospace"),R(r,"class","mb-1"),R(i,"class","flex-grow-1"),R(_,"class","flex-grow-1 d-flex align-items-center justify-content-between"),R(m,"class","d-flex flex-column flex-grow-1"),R(e,"class","d-flex mb-3"),R(U,"class","icon-left ms-1 me-3 svelte-n9m8lc"),R(M,"class","me-2"),R(D,"class","mb-1"),R(B,"class","ms-1"),R(F,"class","flex-grow-1"),R(O,"class","d-flex mb-3"),R(Xe,"class","icon-left ms-1 me-3 svelte-n9m8lc"),R(at,"class","mb-1"),R($e,"class","fw-bold"),R(We,"class","popup svelte-n9m8lc"),R(Le,"class","tl-container svelte-n9m8lc"),be(Le,"margin-left","5%"),R(Se,"class","fw-bold"),R(Ze,"class","popup svelte-n9m8lc"),R(Fe,"class","tl-container svelte-n9m8lc"),be(Fe,"margin-left","27%"),R(kt,"class","popup svelte-n9m8lc"),R(yt,"class","tl-container svelte-n9m8lc"),be(yt,"margin-left","49%"),R(Lt,"class","popup svelte-n9m8lc"),R(Et,"class","tl-container svelte-n9m8lc"),be(Et,"margin-left","71%"),R($t,"class","fw-bold"),R(Rt,"class","popup svelte-n9m8lc"),R(Dt,"class","tl-container svelte-n9m8lc"),be(Dt,"margin-left","93%"),R(Oe,"class","timeline mt-2 svelte-n9m8lc"),R(Qe,"class","flex-grow-1 pb-5 mb-5"),R(ke,"class","d-flex mb-3")},m(Q,de){j(Q,e,de),A(e,t),se(s,t,null),A(e,d),A(e,m),A(m,_),A(_,i),A(i,r),A(r,c),A(r,f),A(r,l),A(l,p),A(l,w),A(i,S),A(i,n),A(n,h),A(h,u),A(_,g),De&&De.m(_,null),A(m,v),A(m,y),se(E,y,null),A(y,C),A(y,k),A(k,T),j(Q,x,de),j(Q,O,de),A(O,U),se($,U,null),A(O,q),A(O,F),A(F,D),A(D,M),A(D,H),ze&&ze.m(D,null),A(F,I),A(F,X),A(X,J),et.m(J,null),A(J,fe),A(J,B),se(z,B,null),A(B,Z),A(B,V),j(Q,oe,de),Re&&Re.m(Q,de),j(Q,ee,de),Ae&&Ae.m(Q,de),j(Q,me,de),Be&&Be.m(Q,de),j(Q,we,de),j(Q,ke,de),A(ke,Xe),se(ue,Xe,null),A(ke,lt),A(ke,Qe),A(Qe,at),A(Qe,_t),A(Qe,Oe),A(Oe,Le),A(Le,We),A(We,$e),A(We,ct),A(We,Ue),A(Oe,pt),A(Oe,Fe),A(Fe,Ze),A(Ze,Se),A(Se,ii),A(Ze,mi),A(Oe,vi),A(Oe,yt),A(yt,kt),tt.m(kt,null),A(Oe,gi),A(Oe,Et),A(Et,Lt),it.m(Lt,null),A(Oe,bi),A(Oe,Dt),A(Dt,Rt),A(Rt,Si),A(Rt,$t),A($t,si),j(Q,ri,de),Me&&Me.m(Q,de),j(Q,At,de),Je=!0},p(Q,de){var Di,Ri,Ai;(!Je||de&2)&&b!==(b=Q[1].id.substring(0,12)+"")&&ae(w,b),(!Je||de&2)&&a!==(a=Q[1].name.replace(/^\//,"")+"")&&ae(u,a),Q[0]?De?(De.p(Q,de),de&1&&N(De,1)):(De=Xi(Q),De.c(),N(De,1),De.m(_,null)):De&&(ve(),K(De,1,1,()=>{De=null}),ge()),(!Je||de&2)&&L!==(L=Q[1].command+"")&&ae(T,L),((Di=Q[1].image)==null?void 0:Di.hash)!==((Ai=(Ri=Q[1])==null?void 0:Ri.image)==null?void 0:Ai.name)?ze?ze.p(Q,de):(ze=Yi(Q),ze.c(),ze.m(D,null)):ze&&(ze.d(1),ze=null),zt===(zt=Ci(Q,de))&&et?et.p(Q,de):(et.d(1),et=zt(Q),et&&(et.c(),et.m(J,fe))),(!Je||de&16)&&ae(V,Q[4]),Q[1].cpu?Re?(Re.p(Q,de),de&2&&N(Re,1)):(Re=Qi(Q),Re.c(),N(Re,1),Re.m(ee.parentNode,ee)):Re&&(ve(),K(Re,1,1,()=>{Re=null}),ge()),Q[1].mem?Ae?(Ae.p(Q,de),de&2&&N(Ae,1)):(Ae=es(Q),Ae.c(),N(Ae,1),Ae.m(me.parentNode,me)):Ae&&(ve(),K(Ae,1,1,()=>{Ae=null}),ge()),Q[1].net?Be?(Be.p(Q,de),de&2&&N(Be,1)):(Be=os(Q),Be.c(),N(Be,1),Be.m(we.parentNode,we)):Be&&(ve(),K(Be,1,1,()=>{Be=null}),ge()),(!Je||de&2)&&ht!==(ht=st(Q[1].created_at)+"")&&ae(Ue,ht),(!Je||de&2)&&mt!==(mt=Q[1].crashes+"")&&ae(ii,mt),Nt===(Nt=wi(Q))&&tt?tt.p(Q,de):(tt.d(1),tt=Nt(Q),tt&&(tt.c(),tt.m(kt,null))),Wt===(Wt=yi(Q))&&it?it.p(Q,de):(it.d(1),it=Wt(Q),it&&(it.c(),it.m(Lt,null))),(!Je||de&2)&&Ft!==(Ft=Q[1].status.charAt(0).toUpperCase()+Q[1].status.slice(1).toLowerCase()+"")&&ae(si,Ft),Q[1].env||Q[1].labels?Me?(Me.p(Q,de),de&2&&N(Me,1)):(Me=cs(Q),Me.c(),N(Me,1),Me.m(At.parentNode,At)):Me&&(ve(),K(Me,1,1,()=>{Me=null}),ge())},i(Q){Je||(N(s.$$.fragment,Q),N(De),N(E.$$.fragment,Q),N($.$$.fragment,Q),N(z.$$.fragment,Q),N(Re),N(Ae),N(Be),N(ue.$$.fragment,Q),N(Me),Je=!0)},o(Q){K(s.$$.fragment,Q),K(De),K(E.$$.fragment,Q),K($.$$.fragment,Q),K(z.$$.fragment,Q),K(Re),K(Ae),K(Be),K(ue.$$.fragment,Q),K(Me),Je=!1},d(Q){Q&&(W(e),W(x),W(O),W(oe),W(ee),W(me),W(we),W(ke),W(ri),W(At)),re(s),De&&De.d(),re(E),re($),ze&&ze.d(),et.d(),re(z),Re&&Re.d(Q),Ae&&Ae.d(Q),Be&&Be.d(Q),re(ue),tt.d(),it.d(),Me&&Me.d(Q)}}}function uo(o){let e;return{c(){e=P("div"),e.innerHTML='<strong>Loading...</strong> <div class="spinner-border ms-auto" role="status" aria-hidden="true"></div>',R(e,"class","d-flex align-items-center")},m(t,s){j(t,e,s)},p:ce,i:ce,o:ce,d(t){t&&W(e)}}}function Xi(o){let e,t,s,d;const m=[_o,fo],_=[];function i(r,c){return r[1].status==="running"?0:!r[3]||r[3]==="start"?1:-1}return~(t=i(o))&&(s=_[t]=m[t](o)),{c(){e=P("div"),s&&s.c(),R(e,"class","ms-4")},m(r,c){j(r,e,c),~t&&_[t].m(e,null),d=!0},p(r,c){let f=t;t=i(r),t===f?~t&&_[t].p(r,c):(s&&(ve(),K(_[f],1,1,()=>{_[f]=null}),ge()),~t?(s=_[t],s?s.p(r,c):(s=_[t]=m[t](r),s.c()),N(s,1),s.m(e,null)):s=null)},i(r){d||(N(s),d=!0)},o(r){K(s),d=!1},d(r){r&&W(e),~t&&_[t].d()}}}function fo(o){let e,t,s,d,m,_,i,r;const c=[mo,po],f=[];function l(p,b){return p[3]?1:0}return t=l(o),s=f[t]=c[t](o),{c(){e=P("button"),s.c(),d=Y(`
                  Start`),R(e,"type","button"),R(e,"class","btn btn-outline-success"),e.disabled=m=!!o[3]},m(p,b){j(p,e,b),f[t].m(e,null),A(e,d),_=!0,i||(r=pe(e,"click",o[12]),i=!0)},p(p,b){let w=t;t=l(p),t!==w&&(ve(),K(f[w],1,1,()=>{f[w]=null}),ge(),s=f[t],s||(s=f[t]=c[t](p),s.c()),N(s,1),s.m(e,d)),(!_||b&8&&m!==(m=!!p[3]))&&(e.disabled=m)},i(p){_||(N(s),_=!0)},o(p){K(s),_=!1},d(p){p&&W(e),f[t].d(),i=!1,r()}}}function _o(o){let e,t,s,d=(!o[3]||o[3]==="restart")&&Zi(o),m=(!o[3]||o[3]==="stop")&&Ji(o);return{c(){d&&d.c(),e=G(),m&&m.c(),t=rt()},m(_,i){d&&d.m(_,i),j(_,e,i),m&&m.m(_,i),j(_,t,i),s=!0},p(_,i){!_[3]||_[3]==="restart"?d?(d.p(_,i),i&8&&N(d,1)):(d=Zi(_),d.c(),N(d,1),d.m(e.parentNode,e)):d&&(ve(),K(d,1,1,()=>{d=null}),ge()),!_[3]||_[3]==="stop"?m?(m.p(_,i),i&8&&N(m,1)):(m=Ji(_),m.c(),N(m,1),m.m(t.parentNode,t)):m&&(ve(),K(m,1,1,()=>{m=null}),ge())},i(_){s||(N(d),N(m),s=!0)},o(_){K(d),K(m),s=!1},d(_){_&&(W(e),W(t)),d&&d.d(_),m&&m.d(_)}}}function po(o){let e;return{c(){e=P("span"),R(e,"class","spinner-grow spinner-grow-sm"),R(e,"role","status"),R(e,"aria-hidden","true")},m(t,s){j(t,e,s)},i:ce,o:ce,d(t){t&&W(e)}}}function mo(o){let e,t;return e=new _e({props:{icon:In}}),{c(){ne(e.$$.fragment)},m(s,d){se(e,s,d),t=!0},i(s){t||(N(e.$$.fragment,s),t=!0)},o(s){K(e.$$.fragment,s),t=!1},d(s){re(e,s)}}}function Zi(o){let e,t,s,d,m,_,i,r;const c=[go,vo],f=[];function l(p,b){return p[3]?1:0}return t=l(o),s=f[t]=c[t](o),{c(){e=P("button"),s.c(),d=Y(`
                    Restart`),R(e,"type","button"),R(e,"class","btn btn-outline-warning"),e.disabled=m=!!o[3]},m(p,b){j(p,e,b),f[t].m(e,null),A(e,d),_=!0,i||(r=pe(e,"click",o[10]),i=!0)},p(p,b){let w=t;t=l(p),t!==w&&(ve(),K(f[w],1,1,()=>{f[w]=null}),ge(),s=f[t],s||(s=f[t]=c[t](p),s.c()),N(s,1),s.m(e,d)),(!_||b&8&&m!==(m=!!p[3]))&&(e.disabled=m)},i(p){_||(N(s),_=!0)},o(p){K(s),_=!1},d(p){p&&W(e),f[t].d(),i=!1,r()}}}function vo(o){let e;return{c(){e=P("span"),R(e,"class","spinner-grow spinner-grow-sm"),R(e,"role","status"),R(e,"aria-hidden","true")},m(t,s){j(t,e,s)},i:ce,o:ce,d(t){t&&W(e)}}}function go(o){let e,t;return e=new _e({props:{icon:gr}}),{c(){ne(e.$$.fragment)},m(s,d){se(e,s,d),t=!0},i(s){t||(N(e.$$.fragment,s),t=!0)},o(s){K(e.$$.fragment,s),t=!1},d(s){re(e,s)}}}function Ji(o){let e,t,s,d,m,_,i,r;const c=[So,bo],f=[];function l(p,b){return p[3]?1:0}return t=l(o),s=f[t]=c[t](o),{c(){e=P("button"),s.c(),d=Y(`
                    Stop`),R(e,"type","button"),R(e,"class","btn btn-outline-danger"),e.disabled=m=!!o[3]},m(p,b){j(p,e,b),f[t].m(e,null),A(e,d),_=!0,i||(r=pe(e,"click",o[11]),i=!0)},p(p,b){let w=t;t=l(p),t!==w&&(ve(),K(f[w],1,1,()=>{f[w]=null}),ge(),s=f[t],s||(s=f[t]=c[t](p),s.c()),N(s,1),s.m(e,d)),(!_||b&8&&m!==(m=!!p[3]))&&(e.disabled=m)},i(p){_||(N(s),_=!0)},o(p){K(s),_=!1},d(p){p&&W(e),f[t].d(),i=!1,r()}}}function bo(o){let e;return{c(){e=P("span"),R(e,"class","spinner-grow spinner-grow-sm"),R(e,"role","status"),R(e,"aria-hidden","true")},m(t,s){j(t,e,s)},i:ce,o:ce,d(t){t&&W(e)}}}function So(o){let e,t;return e=new _e({props:{icon:xn}}),{c(){ne(e.$$.fragment)},m(s,d){se(e,s,d),t=!0},i(s){t||(N(e.$$.fragment,s),t=!0)},o(s){K(e.$$.fragment,s),t=!1},d(s){re(e,s)}}}function Yi(o){let e,t=o[1].image.hash.substring(0,19)+"",s;return{c(){e=P("span"),s=Y(t),R(e,"class","text-muted font-monospace")},m(d,m){j(d,e,m),A(e,s)},p(d,m){m&2&&t!==(t=d[1].image.hash.substring(0,12+7)+"")&&ae(s,t)},d(d){d&&W(e)}}}function Co(o){let e;return{c(){e=Y(o[5])},m(t,s){j(t,e,s)},p(t,s){s&32&&ae(e,t[5])},d(t){t&&W(e)}}}function wo(o){let e,t,s;return{c(){e=P("a"),t=Y(o[5]),R(e,"href",s="https://hub.docker.com/r/"+o[5]),R(e,"target","_blank"),R(e,"rel","noopener noreferrer"),R(e,"class","text-decoration-none")},m(d,m){j(d,e,m),A(e,t)},p(d,m){m&32&&ae(t,d[5]),m&32&&s!==(s="https://hub.docker.com/r/"+d[5])&&R(e,"href",s)},d(d){d&&W(e)}}}function yo(o){let e,t,s;return{c(){e=P("a"),t=Y(o[5]),R(e,"href",s="https://hub.docker.com/_/"+o[5]),R(e,"target","_blank"),R(e,"rel","noopener noreferrer"),R(e,"class","text-decoration-none")},m(d,m){j(d,e,m),A(e,t)},p(d,m){m&32&&ae(t,d[5]),m&32&&s!==(s="https://hub.docker.com/_/"+d[5])&&R(e,"href",s)},d(d){d&&W(e)}}}function Qi(o){let e,t,s,d,m,_,i,r,c,f=It(o[1].cpu.perc)+"",l,p,b;return s=new _e({props:{icon:mr,size:"2x"}}),{c(){e=P("div"),t=P("div"),ne(s.$$.fragment),d=G(),m=P("div"),_=P("div"),_.textContent="Processor",i=G(),r=P("div"),c=P("div"),l=Y(f),p=Y("%"),R(t,"class","icon-left ms-1 me-3 svelte-n9m8lc"),R(_,"class","mb-1"),R(c,"class","progress-bar text-white overflow-visible ps-1"),be(c,"width",o[1].cpu.perc+"%"),R(r,"class","progress"),R(m,"class","flex-grow-1"),R(e,"class","d-flex mb-3")},m(w,S){j(w,e,S),A(e,t),se(s,t,null),A(e,d),A(e,m),A(m,_),A(m,i),A(m,r),A(r,c),A(c,l),A(c,p),b=!0},p(w,S){(!b||S&2)&&f!==(f=It(w[1].cpu.perc)+"")&&ae(l,f),(!b||S&2)&&be(c,"width",w[1].cpu.perc+"%")},i(w){b||(N(s.$$.fragment,w),b=!0)},o(w){K(s.$$.fragment,w),b=!1},d(w){w&&W(e),re(s)}}}function es(o){let e,t,s,d,m,_,i,r,c,f,l,p;s=new _e({props:{icon:_r,size:"2x"}});let b=o[1].mem.used!==null&&ts(o),w=o[1].mem.max_used!==null&&is(o),S=o[1].mem.total!==null&&ss(o),n=o[1].mem.used!==null&&o[1].mem.total!==null&&rs(o);return{c(){e=P("div"),t=P("div"),ne(s.$$.fragment),d=G(),m=P("div"),_=P("div"),i=P("span"),i.textContent="Memory",r=G(),b&&b.c(),c=G(),w&&w.c(),f=G(),S&&S.c(),l=G(),n&&n.c(),R(t,"class","icon-left ms-1 me-3 svelte-n9m8lc"),R(i,"class","me-2"),R(_,"class","mb-1"),R(m,"class","flex-grow-1"),R(e,"class","d-flex mb-3")},m(h,a){j(h,e,a),A(e,t),se(s,t,null),A(e,d),A(e,m),A(m,_),A(_,i),A(_,r),b&&b.m(_,null),A(_,c),w&&w.m(_,null),A(_,f),S&&S.m(_,null),A(m,l),n&&n.m(m,null),p=!0},p(h,a){h[1].mem.used!==null?b?b.p(h,a):(b=ts(h),b.c(),b.m(_,c)):b&&(b.d(1),b=null),h[1].mem.max_used!==null?w?w.p(h,a):(w=is(h),w.c(),w.m(_,f)):w&&(w.d(1),w=null),h[1].mem.total!==null?S?S.p(h,a):(S=ss(h),S.c(),S.m(_,null)):S&&(S.d(1),S=null),h[1].mem.used!==null&&h[1].mem.total!==null?n?n.p(h,a):(n=rs(h),n.c(),n.m(m,null)):n&&(n.d(1),n=null)},i(h){p||(N(s.$$.fragment,h),p=!0)},o(h){K(s.$$.fragment,h),p=!1},d(h){h&&W(e),re(s),b&&b.d(),w&&w.d(),S&&S.d(),n&&n.d()}}}function ts(o){let e,t,s=je(o[1].mem.used)+"",d;return{c(){e=P("span"),t=Y("Now "),d=Y(s),R(e,"class","badge rounded-pill bg-primary ms-2")},m(m,_){j(m,e,_),A(e,t),A(e,d)},p(m,_){_&2&&s!==(s=je(m[1].mem.used)+"")&&ae(d,s)},d(m){m&&W(e)}}}function is(o){let e,t,s=je(o[1].mem.max_used)+"",d;return{c(){e=P("span"),t=Y("Max "),d=Y(s),R(e,"class","badge rounded-pill bg-warning ms-2")},m(m,_){j(m,e,_),A(e,t),A(e,d)},p(m,_){_&2&&s!==(s=je(m[1].mem.max_used)+"")&&ae(d,s)},d(m){m&&W(e)}}}function ss(o){let e,t,s=je(o[1].mem.total)+"",d;return{c(){e=P("span"),t=Y("Limit "),d=Y(s),R(e,"class","badge rounded-pill bg-info ms-2")},m(m,_){j(m,e,_),A(e,t),A(e,d)},p(m,_){_&2&&s!==(s=je(m[1].mem.total)+"")&&ae(d,s)},d(m){m&&W(e)}}}function rs(o){let e,t,s=It(o[7])+"",d,m,_,i=o[1].mem.max_used!==null&&ns(o);return{c(){e=P("div"),t=P("div"),d=Y(s),m=Y("%"),_=G(),i&&i.c(),R(t,"class","progress-bar text-white overflow-visible ps-1"),be(t,"width",o[7]+"%"),be(t,"z-index","2"),R(e,"class","progress")},m(r,c){j(r,e,c),A(e,t),A(t,d),A(t,m),A(e,_),i&&i.m(e,null)},p(r,c){c&128&&s!==(s=It(r[7])+"")&&ae(d,s),c&128&&be(t,"width",r[7]+"%"),r[1].mem.max_used!==null?i?i.p(r,c):(i=ns(r),i.c(),i.m(e,null)):i&&(i.d(1),i=null)},d(r){r&&W(e),i&&i.d()}}}function ns(o){let e;return{c(){e=P("div"),R(e,"class","progress-bar progress-bar-striped bg-warning"),be(e,"width",o[6]-o[7]+"%")},m(t,s){j(t,e,s)},p(t,s){s&192&&be(e,"width",t[6]-t[7]+"%")},d(t){t&&W(e)}}}function os(o){var g;let e,t,s,d,m,_,i,r,c,f=je(o[1].net.rx_bytes)+"",l,p,b,w,S=je(o[1].net.tx_bytes)+"",n,h,a;s=new _e({props:{icon:An,size:"2x"}});let u=((g=o[1].ports)==null?void 0:g.length)>0&&ls(o);return{c(){e=P("div"),t=P("div"),ne(s.$$.fragment),d=G(),m=P("div"),_=P("div"),_.textContent="Network",i=G(),r=P("span"),c=Y("▼ "),l=Y(f),p=G(),b=P("span"),w=Y("▲ "),n=Y(S),h=G(),u&&u.c(),R(t,"class","icon-left ms-1 me-3 svelte-n9m8lc"),R(_,"class","mb-1"),R(r,"title","Received Traffic"),R(r,"class","me-3"),R(b,"title","Sent Traffic"),R(m,"class","me-5"),R(e,"class","d-flex mb-3")},m(v,y){j(v,e,y),A(e,t),se(s,t,null),A(e,d),A(e,m),A(m,_),A(m,i),A(m,r),A(r,c),A(r,l),A(m,p),A(m,b),A(b,w),A(b,n),A(e,h),u&&u.m(e,null),a=!0},p(v,y){var E;(!a||y&2)&&f!==(f=je(v[1].net.rx_bytes)+"")&&ae(l,f),(!a||y&2)&&S!==(S=je(v[1].net.tx_bytes)+"")&&ae(n,S),((E=v[1].ports)==null?void 0:E.length)>0?u?u.p(v,y):(u=ls(v),u.c(),u.m(e,null)):u&&(u.d(1),u=null)},i(v){a||(N(s.$$.fragment,v),a=!0)},o(v){K(s.$$.fragment,v),a=!1},d(v){v&&W(e),re(s),u&&u.d()}}}function ls(o){let e,t,s,d=ye(o[1].ports),m=[];for(let _=0;_<d.length;_+=1)m[_]=as(Gi(o,d,_));return{c(){e=P("div"),t=P("div"),t.textContent="Ports",s=G();for(let _=0;_<m.length;_+=1)m[_].c();R(t,"class","mb-1"),R(e,"class","flex-grow-1")},m(_,i){j(_,e,i),A(e,t),A(e,s);for(let r=0;r<m.length;r+=1)m[r]&&m[r].m(e,null)},p(_,i){if(i&2){d=ye(_[1].ports);let r;for(r=0;r<d.length;r+=1){const c=Gi(_,d,r);m[r]?m[r].p(c,i):(m[r]=as(c),m[r].c(),m[r].m(e,null))}for(;r<m.length;r+=1)m[r].d(1);m.length=d.length}},d(_){_&&W(e),Ve(m,_)}}}function as(o){let e,t=o[21]+"",s;return{c(){e=P("span"),s=Y(t),R(e,"class","badge bg-dark me-2")},m(d,m){j(d,e,m),A(e,s)},p(d,m){m&2&&t!==(t=d[21]+"")&&ae(s,t)},d(d){d&&W(e)}}}function ko(o){let e,t,s=st(o[1].started_at)+"",d;return{c(){e=P("div"),e.textContent="Started",t=G(),d=Y(s),R(e,"class","fw-bold")},m(m,_){j(m,e,_),j(m,t,_),j(m,d,_)},p(m,_){_&2&&s!==(s=st(m[1].started_at)+"")&&ae(d,s)},d(m){m&&(W(e),W(t),W(d))}}}function Eo(o){let e,t,s;function d(i,r){return i[1].finished_at<i[1].created_at?Do:Lo}let m=d(o),_=m(o);return{c(){e=P("div"),e.textContent="Stopped",t=G(),_.c(),s=rt(),R(e,"class","fw-bold")},m(i,r){j(i,e,r),j(i,t,r),_.m(i,r),j(i,s,r)},p(i,r){m===(m=d(i))&&_?_.p(i,r):(_.d(1),_=m(i),_&&(_.c(),_.m(s.parentNode,s)))},d(i){i&&(W(e),W(t),W(s)),_.d(i)}}}function Lo(o){let e=st(o[1].finished_at)+"",t;return{c(){t=Y(e)},m(s,d){j(s,t,d)},p(s,d){d&2&&e!==(e=st(s[1].finished_at)+"")&&ae(t,e)},d(s){s&&W(t)}}}function Do(o){let e;return{c(){e=Y("Never")},m(t,s){j(t,e,s)},p:ce,d(t){t&&W(e)}}}function Ro(o){let e,t,s=st(o[1].started_at)+"",d;return{c(){e=P("div"),e.textContent="Started",t=G(),d=Y(s),R(e,"class","fw-bold")},m(m,_){j(m,e,_),j(m,t,_),j(m,d,_)},p(m,_){_&2&&s!==(s=st(m[1].started_at)+"")&&ae(d,s)},d(m){m&&(W(e),W(t),W(d))}}}function Ao(o){let e,t,s=st(o[1].finished_at)+"",d;return{c(){e=P("div"),e.textContent="Stopped",t=G(),d=Y(s),R(e,"class","fw-bold")},m(m,_){j(m,e,_),j(m,t,_),j(m,d,_)},p(m,_){_&2&&s!==(s=st(m[1].finished_at)+"")&&ae(d,s)},d(m){m&&(W(e),W(t),W(d))}}}function cs(o){let e,t,s,d,m,_,i,r,c,f,l,p,b,w,S,n,h;s=new _e({props:{icon:Cn,size:"2x"}});let a=ye(Object.entries(o[1].env).sort(ds)),u=[];for(let y=0;y<a.length;y+=1)u[y]=hs(qi(o,a,y));let g=ye(Object.entries(o[1].labels).sort(fs)),v=[];for(let y=0;y<g.length;y+=1)v[y]=us(Ki(o,g,y));return{c(){e=P("div"),t=P("div"),ne(s.$$.fragment),d=G(),m=P("div"),_=P("div"),i=P("table"),r=P("thead"),r.innerHTML='<tr><th scope="col" colspan="2" style="font-weight: normal">Environment Variables</th></tr>',c=G(),f=P("tbody");for(let y=0;y<u.length;y+=1)u[y].c();l=G(),p=P("div"),b=P("table"),w=P("thead"),w.innerHTML='<tr><th scope="col" colspan="2" style="font-weight: normal">Labels</th></tr>',S=G(),n=P("tbody");for(let y=0;y<v.length;y+=1)v[y].c();R(t,"class","icon-left ms-1 me-3 svelte-n9m8lc"),R(i,"class","table table-striped border"),R(b,"class","table table-striped border"),R(m,"class","flex-grow-1 d-lg-flex"),be(m,"font-size","small"),R(e,"class","d-flex mb-3")},m(y,E){j(y,e,E),A(e,t),se(s,t,null),A(e,d),A(e,m),A(m,_),A(_,i),A(i,r),A(i,c),A(i,f);for(let C=0;C<u.length;C+=1)u[C]&&u[C].m(f,null);A(m,l),A(m,p),A(p,b),A(b,w),A(b,S),A(b,n);for(let C=0;C<v.length;C+=1)v[C]&&v[C].m(n,null);h=!0},p(y,E){if(E&2){a=ye(Object.entries(y[1].env).sort(ds));let C;for(C=0;C<a.length;C+=1){const k=qi(y,a,C);u[C]?u[C].p(k,E):(u[C]=hs(k),u[C].c(),u[C].m(f,null))}for(;C<u.length;C+=1)u[C].d(1);u.length=a.length}if(E&2){g=ye(Object.entries(y[1].labels).sort(fs));let C;for(C=0;C<g.length;C+=1){const k=Ki(y,g,C);v[C]?v[C].p(k,E):(v[C]=us(k),v[C].c(),v[C].m(n,null))}for(;C<v.length;C+=1)v[C].d(1);v.length=g.length}},i(y){h||(N(s.$$.fragment,y),h=!0)},o(y){K(s.$$.fragment,y),h=!1},d(y){y&&W(e),re(s),Ve(u,y),Ve(v,y)}}}function hs(o){let e,t,s=o[15]+"",d,m,_,i=o[16]+"",r,c;return{c(){e=P("tr"),t=P("td"),d=Y(s),m=G(),_=P("td"),r=Y(i),c=G(),R(t,"class","text-end border-end text-break"),R(_,"class","text-break")},m(f,l){j(f,e,l),A(e,t),A(t,d),A(e,m),A(e,_),A(_,r),A(e,c)},p(f,l){l&2&&s!==(s=f[15]+"")&&ae(d,s),l&2&&i!==(i=f[16]+"")&&ae(r,i)},d(f){f&&W(e)}}}function us(o){let e,t,s=o[15]+"",d,m,_,i=o[16]+"",r,c;return{c(){e=P("tr"),t=P("td"),d=Y(s),m=G(),_=P("td"),r=Y(i),c=G(),R(t,"class","text-end border-end text-break"),R(_,"class","text-break")},m(f,l){j(f,e,l),A(e,t),A(t,d),A(e,m),A(e,_),A(_,r),A(e,c)},p(f,l){l&2&&s!==(s=f[15]+"")&&ae(d,s),l&2&&i!==(i=f[16]+"")&&ae(r,i)},d(f){f&&W(e)}}}function Bo(o){let e,t,s,d;const m=[uo,ho],_=[];function i(r,c){return r[2]?0:1}return t=i(o),s=_[t]=m[t](o),{c(){e=P("div"),s.c()},m(r,c){j(r,e,c),_[t].m(e,null),d=!0},p(r,[c]){let f=t;t=i(r),t===f?_[t].p(r,c):(ve(),K(_[f],1,1,()=>{_[f]=null}),ge(),s=_[t],s?s.p(r,c):(s=_[t]=m[t](r),s.c()),N(s,1),s.m(e,null))},i(r){d||(N(s),d=!0)},o(r){K(s),d=!1},d(r){r&&W(e),_[t].d()}}}const ds=([o],[e])=>o.localeCompare(e),fs=([o],[e])=>o.localeCompare(e);function Mo(o,e,t){let s,d,m,_,{enable_actions:i}=e,{container_id:r}=e,c,f,l=!0,p=null,b;Ht(()=>{r!==c&&(c=r,t(2,l=!0),t(3,p=null),r&&le.send("get_container_info",{container_id:r}))}),Ge(()=>{window.scrollTo({top:0,behavior:"smooth"}),le.register("get_container_info",a=>{a.id===r&&(t(1,b=a),t(2,l=!1))},a=>Ce.add({text:a,type:"error"})),le.register("set_container_state",()=>{t(3,p=null)},a=>Ce.add({text:a,type:"error"})),f=setInterval(()=>{le.send("get_container_info",{container_id:r})},3e3)}),dt(()=>{clearInterval(f),le.unregister("get_container_info"),le.unregister("set_container_state")});function w(a){switch(le.send("set_container_state",{container_id:r,action:a}),t(3,p=a),a){case"start":Ce.add({text:"Starting container ...",type:"success"});break;case"restart":Ce.add({text:"Restarting container ...",type:"info"});break;case"stop":Ce.add({text:"Stopping container ...",type:"info"});break}}const S=()=>w("restart"),n=()=>w("stop"),h=()=>w("start");return o.$$set=a=>{"enable_actions"in a&&t(0,i=a.enable_actions),"container_id"in a&&t(9,r=a.container_id)},o.$$.update=()=>{var a,u,g,v;o.$$.dirty&2&&t(7,s=((a=b==null?void 0:b.mem)==null?void 0:a.used)*100/((u=b==null?void 0:b.mem)==null?void 0:u.total)),o.$$.dirty&2&&t(6,d=((g=b==null?void 0:b.mem)==null?void 0:g.max_used)*100/((v=b==null?void 0:b.mem)==null?void 0:v.total)),o.$$.dirty&2&&t(5,m=b!=null&&b.image.name.includes(":")?b==null?void 0:b.image.name.slice(0,b==null?void 0:b.image.name.lastIndexOf(":")):b==null?void 0:b.image.name),o.$$.dirty&2&&t(4,_=b!=null&&b.image.name.includes(":")?b==null?void 0:b.image.name.split(":").pop():"latest")},[i,b,l,p,_,m,d,s,w,r,S,n,h]}class To extends He{constructor(e){super(),Ie(this,e,Mo,Bo,xe,{enable_actions:0,container_id:9})}}function xo({onlyFirst:o=!1}={}){const e=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?\\u0007)","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-ntqry=><~]))"].join("|");return new RegExp(e,o?void 0:"g")}const Oo=xo();function Po(o){if(typeof o!="string")throw new TypeError(`Expected a \`string\`, got \`${typeof o}\``);return o.replace(Oo,"")}function _s(o,e,t){const s=o.slice();s[13]=e[t];const d=s[13].substring(0,s[13].indexOf(" "));s[14]=d;const m=s[13].substring(s[13].indexOf(" ")+1);return s[15]=m,s}function Io(o){let e,t,s,d,m,_,i,r,c,f,l,p,b,w,S,n,h,a,u,g,v,y,E,C;f=new _e({props:{icon:gn,size:"lg",color:"#666"}}),b=new _e({props:{icon:dn,size:"lg",color:"#666"}}),n=new _e({props:{icon:Bn,size:"lg",color:"#666"}}),u=new _e({props:{icon:pr,size:"lg",color:"#666"}});let k=ye(o[2]),L=[];for(let T=0;T<k.length;T+=1)L[T]=ms(_s(o,k,T));return{c(){e=P("div"),t=P("div"),s=P("select"),d=P("option"),d.textContent="hide timestamps",m=P("option"),m.textContent="local timestamps",_=P("option"),_.textContent="raw timestamps",i=G(),r=P("div"),c=P("button"),ne(f.$$.fragment),l=G(),p=P("button"),ne(b.$$.fragment),w=G(),S=P("button"),ne(n.$$.fragment),h=G(),a=P("button"),ne(u.$$.fragment),g=G(),v=P("pre");for(let T=0;T<L.length;T+=1)L[T].c();d.__value="off",Ye(d,d.__value),m.__value="local",Ye(m,m.__value),_.__value="raw",Ye(_,_.__value),R(s,"class","form-select"),o[3]===void 0&&Te(()=>o[7].call(s)),R(c,"type","button"),R(c,"class","btn mx-1"),R(c,"title","Scroll to Top"),R(p,"type","button"),R(p,"class","btn mx-1"),R(p,"title","Scroll to Bottom"),R(S,"type","button"),R(S,"class","btn mx-1"),R(S,"title","Download shown log lines"),R(a,"type","button"),R(a,"class","btn mx-1"),R(a,"title","Fullscreen"),R(e,"class","d-flex justify-content-between align-items-center mb-2"),R(v,"class","mb-0 svelte-itlo0b")},m(T,x){j(T,e,x),A(e,t),A(t,s),A(s,d),A(s,m),A(s,_),Mi(s,o[3],!0),A(e,i),A(e,r),A(r,c),se(f,c,null),A(r,l),A(r,p),se(b,p,null),A(r,w),A(r,S),se(n,S,null),A(r,h),A(r,a),se(u,a,null),j(T,g,x),j(T,v,x);for(let O=0;O<L.length;O+=1)L[O]&&L[O].m(v,null);o[10](v),y=!0,E||(C=[pe(s,"change",o[7]),pe(c,"click",o[8]),pe(p,"click",o[9]),pe(S,"click",o[5]),pe(a,"click",o[4])],E=!0)},p(T,x){if(x&8&&Mi(s,T[3]),x&12){k=ye(T[2]);let O;for(O=0;O<k.length;O+=1){const U=_s(T,k,O);L[O]?L[O].p(U,x):(L[O]=ms(U),L[O].c(),L[O].m(v,null))}for(;O<L.length;O+=1)L[O].d(1);L.length=k.length}},i(T){y||(N(f.$$.fragment,T),N(b.$$.fragment,T),N(n.$$.fragment,T),N(u.$$.fragment,T),y=!0)},o(T){K(f.$$.fragment,T),K(b.$$.fragment,T),K(n.$$.fragment,T),K(u.$$.fragment,T),y=!1},d(T){T&&(W(e),W(g),W(v)),re(f),re(b),re(n),re(u),Ve(L,T),o[10](null),E=!1,qe(C)}}}function Ho(o){let e;return{c(){e=P("p"),e.textContent="No Log Output yet ..."},m(t,s){j(t,e,s)},p:ce,i:ce,o:ce,d(t){t&&W(e)}}}function $o(o){let e;return{c(){e=P("div"),e.innerHTML='<strong>Loading...</strong> <div class="spinner-border ms-auto" role="status" aria-hidden="true"></div>',R(e,"class","d-flex align-items-center")},m(t,s){j(t,e,s)},p:ce,i:ce,o:ce,d(t){t&&W(e)}}}function ps(o){let e,t;function s(_,i){return _[3]==="local"?zo:Fo}let d=s(o),m=d(o);return{c(){e=P("time"),m.c(),R(e,"datetime",t=o[14]),R(e,"class","me-1 px-1 svelte-itlo0b")},m(_,i){j(_,e,i),m.m(e,null)},p(_,i){d===(d=s(_))&&m?m.p(_,i):(m.d(1),m=d(_),m&&(m.c(),m.m(e,null))),i&4&&t!==(t=_[14])&&R(e,"datetime",t)},d(_){_&&W(e),m.d()}}}function Fo(o){let e=o[14]+"",t;return{c(){t=Y(e)},m(s,d){j(s,t,d)},p(s,d){d&4&&e!==(e=s[14]+"")&&ae(t,e)},d(s){s&&W(t)}}}function zo(o){let e=vs(o[14])+"",t;return{c(){t=Y(e)},m(s,d){j(s,t,d)},p(s,d){d&4&&e!==(e=vs(s[14])+"")&&ae(t,e)},d(s){s&&W(t)}}}function ms(o){let e,t,s=o[15]+"",d,m=o[3]!=="off"&&ps(o);return{c(){e=P("span"),m&&m.c(),t=P("span"),d=Y(s),R(t,"class","pe-3"),R(e,"class","pe-3 svelte-itlo0b")},m(_,i){j(_,e,i),m&&m.m(e,null),A(e,t),A(t,d)},p(_,i){_[3]!=="off"?m?m.p(_,i):(m=ps(_),m.c(),m.m(e,t)):m&&(m.d(1),m=null),i&4&&s!==(s=_[15]+"")&&ae(d,s)},d(_){_&&W(e),m&&m.d()}}}function No(o){let e,t,s,d;const m=[$o,Ho,Io],_=[];function i(r,c){return r[1]?0:r[2].length===0?1:2}return t=i(o),s=_[t]=m[t](o),{c(){e=P("div"),s.c()},m(r,c){j(r,e,c),_[t].m(e,null),d=!0},p(r,[c]){let f=t;t=i(r),t===f?_[t].p(r,c):(ve(),K(_[f],1,1,()=>{_[f]=null}),ge(),s=_[t],s?s.p(r,c):(s=_[t]=m[t](r),s.c()),N(s,1),s.m(e,null))},i(r){d||(N(s),d=!0)},o(r){K(s),d=!1},d(r){r&&W(e),_[t].d()}}}function vs(o){return new Date(o).toLocaleDateString(void 0,{weekday:"short",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})}function Wo(o,e,t){let{container_id:s}=e,d,m,_,i=!0,r=[],c="local";Ht(()=>{s!==d&&(d=s,t(1,i=!0),t(2,r=[]),s&&le.send("get_container_logs",{container_id:s}))}),Ge(()=>{le.register("get_container_logs",n=>{if(t(1,i=!1),(n==null?void 0:n.length)>0){let h=!r||m&&m.scrollTop>=m.scrollHeight-m.clientHeight;const a=r.length+n.length;a>5e3&&r.slice(a-5e3),r.push(...n.map(u=>Po(u))),h&&cr().then(()=>t(0,m.scrollTop=m.scrollHeight,m))}},n=>Ce.add({text:n,type:"error"})),_=setInterval(()=>{le.send("get_container_logs",{container_id:s,onlynew:!0})},3e3)}),dt(()=>{clearInterval(_),le.unregister("get_container_logs")});function f(){m!=null&&m.requestFullscreen&&m.requestFullscreen({navigationUI:"show"})}function l(){Sr(new Blob(r,{type:"text/plain"}),s+".log")}function p(){c=Pr(this),t(3,c)}const b=()=>t(0,m.scrollTop=0,m),w=()=>t(0,m.scrollTop=m.scrollHeight,m);function S(n){ft[n?"unshift":"push"](()=>{m=n,t(0,m)})}return o.$$set=n=>{"container_id"in n&&t(6,s=n.container_id)},[m,i,r,c,f,l,s,p,b,w,S]}class Uo extends He{constructor(e){super(),Ie(this,e,Wo,No,xe,{container_id:6})}}const jo=o=>({}),gs=o=>({});function Vo(o){let e,t;return e=new _e({props:{icon:Dn}}),{c(){ne(e.$$.fragment)},m(s,d){se(e,s,d),t=!0},p:ce,i(s){t||(N(e.$$.fragment,s),t=!0)},o(s){K(e.$$.fragment,s),t=!1},d(s){re(e,s)}}}function Ko(o){let e,t,s,d,m,_;const i=o[2].button,r=Kt(i,o,o[1],gs),c=r||Vo(),f=o[2].default,l=Kt(f,o,o[1],null);return{c(){e=P("div"),t=P("button"),c&&c.c(),d=G(),m=P("ul"),l&&l.c(),R(t,"class",s="btn btn-"+o[0]+" dropdown-toggle svelte-17q1qz7"),R(t,"type","button"),R(m,"class","dropdown-menu svelte-17q1qz7"),R(e,"class","dropdown")},m(p,b){j(p,e,b),A(e,t),c&&c.m(t,null),A(e,d),A(e,m),l&&l.m(m,null),_=!0},p(p,[b]){r&&r.p&&(!_||b&2)&&Gt(r,i,p,p[1],_?qt(i,p[1],b,jo):Xt(p[1]),gs),(!_||b&1&&s!==(s="btn btn-"+p[0]+" dropdown-toggle svelte-17q1qz7"))&&R(t,"class",s),l&&l.p&&(!_||b&2)&&Gt(l,f,p,p[1],_?qt(f,p[1],b,null):Xt(p[1]),null)},i(p){_||(N(c,p),N(l,p),_=!0)},o(p){K(c,p),K(l,p),_=!1},d(p){p&&W(e),c&&c.d(p),l&&l.d(p)}}}function qo(o,e,t){let{$$slots:s={},$$scope:d}=e,{btnClass:m="secondary"}=e;return o.$$set=_=>{"btnClass"in _&&t(0,m=_.btnClass),"$$scope"in _&&t(1,d=_.$$scope)},[m,d,s]}class Cr extends He{constructor(e){super(),Ie(this,e,qo,Ko,xe,{btnClass:0})}}function Go(o){let e,t,s,d,m;const _=o[2].default,i=Kt(_,o,o[1],null);return{c(){e=P("li"),t=P("button"),i&&i.c(),R(t,"class","dropdown-item"),R(t,"type","button"),he(t,"active",o[0])},m(r,c){j(r,e,c),A(e,t),i&&i.m(t,null),s=!0,d||(m=pe(t,"click",o[3]),d=!0)},p(r,[c]){i&&i.p&&(!s||c&2)&&Gt(i,_,r,r[1],s?qt(_,r[1],c,null):Xt(r[1]),null),(!s||c&1)&&he(t,"active",r[0])},i(r){s||(N(i,r),s=!0)},o(r){K(i,r),s=!1},d(r){r&&W(e),i&&i.d(r),d=!1,m()}}}function Xo(o,e,t){let{$$slots:s={},$$scope:d}=e,{active:m=!1}=e;function _(i){Fr.call(this,o,i)}return o.$$set=i=>{"active"in i&&t(0,m=i.active),"$$scope"in i&&t(1,d=i.$$scope)},[m,d,s,_]}class fi extends He{constructor(e){super(),Ie(this,e,Xo,Go,xe,{active:0})}}function bs(o,e,t){const s=o.slice();return s[22]=e[t],s}function Ss(o,e,t){const s=o.slice();return s[25]=e[t],s}function Cs(o,e,t){const s=o.slice();return s[28]=e[t],s}function Zo(o){var O,U;let e,t,s,d,m,_,i,r,c,f,l,p,b,w,S,n,h,a,u,g,v;m=new _e({props:{icon:Tn}}),r=new _e({props:{icon:gr}});let y=ye(o[7]()),E=[];for(let $=0;$<y.length;$+=1)E[$]=ws(Cs(o,y,$));let C=o[1]&&ys(o),k=((U=(O=o[6])==null?void 0:O.mounts)==null?void 0:U.length)>0&&ks(o),L=ye(o[5]||[]),T=[];for(let $=0;$<L.length;$+=1)T[$]=Rs(bs(o,L,$));const x=$=>K(T[$],1,1,()=>{T[$]=null});return{c(){e=P("div"),t=P("div"),s=P("div"),d=P("button"),ne(m.$$.fragment),_=G(),i=P("button"),ne(r.$$.fragment),c=G(),f=P("div");for(let $=0;$<E.length;$+=1)E[$].c();l=G(),p=P("div"),C&&C.c(),b=G(),k&&k.c(),w=G(),S=P("table"),n=P("thead"),n.innerHTML='<tr><th scope="col">Name</th> <th scope="col" class="text-end">Size</th> <th scope="col" class="text-center">Owner</th> <th scope="col" class="text-center">Modified</th> <th scope="col" class="text-center">Permissions</th></tr>',h=G(),a=P("tbody");for(let $=0;$<T.length;$+=1)T[$].c();R(d,"type","button"),R(d,"class","btn btn-outline-primary"),R(i,"type","button"),R(i,"class","btn btn-outline-primary"),R(s,"class","btn-group me-1"),R(f,"class","btn-group mx-2"),R(f,"role","group"),R(t,"class","d-flex"),R(p,"class","d-flex"),R(e,"class","d-flex justify-content-between align-items-center"),R(S,"class","table table-hover")},m($,q){j($,e,q),A(e,t),A(t,s),A(s,d),se(m,d,null),A(s,_),A(s,i),se(r,i,null),A(t,c),A(t,f);for(let F=0;F<E.length;F+=1)E[F]&&E[F].m(f,null);A(e,l),A(e,p),C&&C.m(p,null),A(p,b),k&&k.m(p,null),j($,w,q),j($,S,q),A(S,n),A(S,h),A(S,a);for(let F=0;F<T.length;F+=1)T[F]&&T[F].m(a,null);u=!0,g||(v=[pe(d,"click",o[14]),pe(i,"click",o[15])],g=!0)},p($,q){var F,D;if(q[0]&640){y=ye($[7]());let M;for(M=0;M<y.length;M+=1){const H=Cs($,y,M);E[M]?E[M].p(H,q):(E[M]=ws(H),E[M].c(),E[M].m(f,null))}for(;M<E.length;M+=1)E[M].d(1);E.length=y.length}if($[1]?C?(C.p($,q),q[0]&2&&N(C,1)):(C=ys($),C.c(),N(C,1),C.m(p,b)):C&&(ve(),K(C,1,1,()=>{C=null}),ge()),((D=(F=$[6])==null?void 0:F.mounts)==null?void 0:D.length)>0?k?(k.p($,q),q[0]&64&&N(k,1)):(k=ks($),k.c(),N(k,1),k.m(p,null)):k&&(ve(),K(k,1,1,()=>{k=null}),ge()),q[0]&1313){L=ye($[5]||[]);let M;for(M=0;M<L.length;M+=1){const H=bs($,L,M);T[M]?(T[M].p(H,q),N(T[M],1)):(T[M]=Rs(H),T[M].c(),N(T[M],1),T[M].m(a,null))}for(ve(),M=L.length;M<T.length;M+=1)x(M);ge()}},i($){if(!u){N(m.$$.fragment,$),N(r.$$.fragment,$),N(C),N(k);for(let q=0;q<L.length;q+=1)N(T[q]);u=!0}},o($){K(m.$$.fragment,$),K(r.$$.fragment,$),K(C),K(k),T=T.filter(Boolean);for(let q=0;q<T.length;q+=1)K(T[q]);u=!1},d($){$&&(W(e),W(w),W(S)),re(m),re(r),Ve(E,$),C&&C.d(),k&&k.d(),Ve(T,$),g=!1,qe(v)}}}function Jo(o){let e;return{c(){e=P("div"),e.innerHTML='<strong>Loading...</strong> <div class="spinner-border ms-auto" role="status" aria-hidden="true"></div>',R(e,"class","d-flex align-items-center")},m(t,s){j(t,e,s)},p:ce,i:ce,o:ce,d(t){t&&W(e)}}}function ws(o){let e,t=(o[28].segment||"/")+"",s,d,m;function _(){return o[16](o[28])}return{c(){e=P("button"),s=Y(t),R(e,"type","button"),R(e,"class","btn btn-secondary border-dark")},m(i,r){j(i,e,r),A(e,s),d||(m=pe(e,"click",_),d=!0)},p(i,r){o=i,r[0]&128&&t!==(t=(o[28].segment||"/")+"")&&ae(s,t)},d(i){i&&W(e),d=!1,m()}}}function ys(o){let e,t,s,d,m,_;return e=new Cr({props:{btnClass:"outline-primary",$$slots:{button:[tl],default:[el]},$$scope:{ctx:o}}}),{c(){ne(e.$$.fragment),t=G(),s=P("input"),R(s,"type","file"),be(s,"display","none")},m(i,r){se(e,i,r),j(i,t,r),j(i,s,r),o[18](s),d=!0,m||(_=pe(s,"change",o[12]),m=!0)},p(i,r){const c={};r[0]&8|r[1]&1&&(c.$$scope={dirty:r,ctx:i}),e.$set(c)},i(i){d||(N(e.$$.fragment,i),d=!0)},o(i){K(e.$$.fragment,i),d=!1},d(i){i&&(W(t),W(s)),re(e,i),o[18](null),m=!1,_()}}}function Yo(o){let e;return{c(){e=Y("Add Folder")},m(t,s){j(t,e,s)},d(t){t&&W(e)}}}function Qo(o){let e;return{c(){e=Y("Upload File")},m(t,s){j(t,e,s)},d(t){t&&W(e)}}}function el(o){let e,t,s,d;return e=new fi({props:{$$slots:{default:[Yo]},$$scope:{ctx:o}}}),e.$on("click",o[11]),s=new fi({props:{$$slots:{default:[Qo]},$$scope:{ctx:o}}}),s.$on("click",o[17]),{c(){ne(e.$$.fragment),t=G(),ne(s.$$.fragment)},m(m,_){se(e,m,_),j(m,t,_),se(s,m,_),d=!0},p(m,_){const i={};_[1]&1&&(i.$$scope={dirty:_,ctx:m}),e.$set(i);const r={};_[1]&1&&(r.$$scope={dirty:_,ctx:m}),s.$set(r)},i(m){d||(N(e.$$.fragment,m),N(s.$$.fragment,m),d=!0)},o(m){K(e.$$.fragment,m),K(s.$$.fragment,m),d=!1},d(m){m&&W(t),re(e,m),re(s,m)}}}function tl(o){let e,t,s,d;return t=new _e({props:{icon:Hn}}),{c(){e=P("span"),ne(t.$$.fragment),s=Y(" Add"),R(e,"slot","button"),R(e,"class","me-1")},m(m,_){j(m,e,_),se(t,e,null),A(e,s),d=!0},p:ce,i(m){d||(N(t.$$.fragment,m),d=!0)},o(m){K(t.$$.fragment,m),d=!1},d(m){m&&W(e),re(t)}}}function ks(o){let e,t,s;return t=new Cr({props:{$$slots:{button:[rl],default:[sl]},$$scope:{ctx:o}}}),{c(){e=P("div"),ne(t.$$.fragment),R(e,"class","ms-4")},m(d,m){j(d,e,m),se(t,e,null),s=!0},p(d,m){const _={};m[0]&64|m[1]&1&&(_.$$scope={dirty:m,ctx:d}),t.$set(_)},i(d){s||(N(t.$$.fragment,d),s=!0)},o(d){K(t.$$.fragment,d),s=!1},d(d){d&&W(e),re(t)}}}function Es(o){let e;return{c(){e=P("span"),e.textContent="readonly",R(e,"class","badge bg-warning ms-2")},m(t,s){j(t,e,s)},d(t){t&&W(e)}}}function il(o){let e,t,s=o[25].destination+"",d,m,_,i,r,c=o[25].type+"",f,l,p=o[25].readonly&&Es();return{c(){e=P("div"),t=P("span"),d=Y(s),m=G(),_=P("span"),p&&p.c(),i=G(),r=P("span"),f=Y(c),l=G(),R(r,"class","badge bg-secondary ms-2"),R(e,"class","d-flex justify-content-between align-items-center")},m(b,w){j(b,e,w),A(e,t),A(t,d),A(e,m),A(e,_),p&&p.m(_,null),A(_,i),A(_,r),A(r,f),j(b,l,w)},p(b,w){w[0]&64&&s!==(s=b[25].destination+"")&&ae(d,s),b[25].readonly?p||(p=Es(),p.c(),p.m(_,i)):p&&(p.d(1),p=null),w[0]&64&&c!==(c=b[25].type+"")&&ae(f,c)},d(b){b&&(W(e),W(l)),p&&p.d()}}}function Ls(o){let e,t;function s(){return o[19](o[25])}return e=new fi({props:{$$slots:{default:[il]},$$scope:{ctx:o}}}),e.$on("click",s),{c(){ne(e.$$.fragment)},m(d,m){se(e,d,m),t=!0},p(d,m){o=d;const _={};m[0]&64|m[1]&1&&(_.$$scope={dirty:m,ctx:o}),e.$set(_)},i(d){t||(N(e.$$.fragment,d),t=!0)},o(d){K(e.$$.fragment,d),t=!1},d(d){re(e,d)}}}function sl(o){let e,t,s=ye(o[6].mounts),d=[];for(let _=0;_<s.length;_+=1)d[_]=Ls(Ss(o,s,_));const m=_=>K(d[_],1,1,()=>{d[_]=null});return{c(){for(let _=0;_<d.length;_+=1)d[_].c();e=rt()},m(_,i){for(let r=0;r<d.length;r+=1)d[r]&&d[r].m(_,i);j(_,e,i),t=!0},p(_,i){if(i[0]&576){s=ye(_[6].mounts);let r;for(r=0;r<s.length;r+=1){const c=Ss(_,s,r);d[r]?(d[r].p(c,i),N(d[r],1)):(d[r]=Ls(c),d[r].c(),N(d[r],1),d[r].m(e.parentNode,e))}for(ve(),r=s.length;r<d.length;r+=1)m(r);ge()}},i(_){if(!t){for(let i=0;i<s.length;i+=1)N(d[i]);t=!0}},o(_){d=d.filter(Boolean);for(let i=0;i<d.length;i+=1)K(d[i]);t=!1},d(_){_&&W(e),Ve(d,_)}}}function rl(o){let e,t,s,d;return t=new _e({props:{icon:En}}),{c(){e=P("span"),ne(t.$$.fragment),s=Y(" Volumes"),R(e,"slot","button"),R(e,"class","me-1")},m(m,_){j(m,e,_),se(t,e,null),A(e,s),d=!0},p:ce,i(m){d||(N(t.$$.fragment,m),d=!0)},o(m){K(t.$$.fragment,m),d=!1},d(m){m&&W(e),re(t)}}}function nl(o){let e=o[22].type+"",t;return{c(){t=Y(e)},m(s,d){j(s,t,d)},p(s,d){d[0]&32&&e!==(e=s[22].type+"")&&ae(t,e)},i:ce,o:ce,d(s){s&&W(t)}}}function ol(o){let e,t;return e=new _e({props:{icon:hn,size:"lg",color:"#B36"}}),{c(){ne(e.$$.fragment)},m(s,d){se(e,s,d),t=!0},p:ce,i(s){t||(N(e.$$.fragment,s),t=!0)},o(s){K(e.$$.fragment,s),t=!1},d(s){re(e,s)}}}function ll(o){let e,t;return e=new _e({props:{icon:Pn,size:"lg",color:"#36B"}}),{c(){ne(e.$$.fragment)},m(s,d){se(e,s,d),t=!0},p:ce,i(s){t||(N(e.$$.fragment,s),t=!0)},o(s){K(e.$$.fragment,s),t=!1},d(s){re(e,s)}}}function al(o){let e,t;return e=new _e({props:{icon:fn,size:"lg",color:"#3B6"}}),{c(){ne(e.$$.fragment)},m(s,d){se(e,s,d),t=!0},p:ce,i(s){t||(N(e.$$.fragment,s),t=!0)},o(s){K(e.$$.fragment,s),t=!1},d(s){re(e,s)}}}function Ds(o){let e=o[22].filesize+"",t;return{c(){t=Y(e)},m(s,d){j(s,t,d)},p(s,d){d[0]&32&&e!==(e=s[22].filesize+"")&&ae(t,e)},d(s){s&&W(t)}}}function Rs(o){let e,t,s,d,m,_,i,r=o[22].name+"",c,f,l,p,b,w=o[22].owner+"",S,n,h,a=o[22].group+"",u,g,v,y=o[22].modtime+"",E,C,k,L=o[22].permissions+"",T,x,O,U,$;const q=[al,ll,ol,nl],F=[];function D(I,X){return I[22].type==="d"?0:I[22].type==="f"?1:I[22].type==="l"?2:3}s=D(o),d=F[s]=q[s](o);let M=o[22].type==="f"&&Ds(o);function H(){return o[20](o[22])}return{c(){e=P("tr"),t=P("td"),d.c(),m=G(),_=P("wbr"),i=G(),c=Y(r),f=G(),l=P("td"),M&&M.c(),p=G(),b=P("td"),S=Y(w),n=G(),h=P("wbr"),u=Y(a),g=G(),v=P("td"),E=Y(y),C=G(),k=P("td"),T=Y(L),x=G(),R(l,"class","text-end"),be(l,"word-break","break-all"),R(b,"class","text-center"),R(v,"class","text-center"),R(k,"class","text-center font-monospace"),be(k,"word-break","break-all"),R(e,"class","svelte-1hbb9tz"),he(e,"clickable",o[22].type==="d"||o[0])},m(I,X){j(I,e,X),A(e,t),F[s].m(t,null),A(t,m),A(t,_),A(t,i),A(t,c),A(e,f),A(e,l),M&&M.m(l,null),A(e,p),A(e,b),A(b,S),A(b,n),A(b,h),A(b,u),A(e,g),A(e,v),A(v,E),A(e,C),A(e,k),A(k,T),A(e,x),O=!0,U||($=pe(e,"click",H),U=!0)},p(I,X){o=I;let J=s;s=D(o),s===J?F[s].p(o,X):(ve(),K(F[J],1,1,()=>{F[J]=null}),ge(),d=F[s],d?d.p(o,X):(d=F[s]=q[s](o),d.c()),N(d,1),d.m(t,m)),(!O||X[0]&32)&&r!==(r=o[22].name+"")&&ae(c,r),o[22].type==="f"?M?M.p(o,X):(M=Ds(o),M.c(),M.m(l,null)):M&&(M.d(1),M=null),(!O||X[0]&32)&&w!==(w=o[22].owner+"")&&ae(S,w),(!O||X[0]&32)&&a!==(a=o[22].group+"")&&ae(u,a),(!O||X[0]&32)&&y!==(y=o[22].modtime+"")&&ae(E,y),(!O||X[0]&32)&&L!==(L=o[22].permissions+"")&&ae(T,L),(!O||X[0]&33)&&he(e,"clickable",o[22].type==="d"||o[0])},i(I){O||(N(d),O=!0)},o(I){K(d),O=!1},d(I){I&&W(e),F[s].d(),M&&M.d(),U=!1,$()}}}function cl(o){let e,t,s,d;const m=[Jo,Zo],_=[];function i(r,c){return r[4]?0:1}return t=i(o),s=_[t]=m[t](o),{c(){e=P("div"),s.c(),be(e,"overflow-x","auto")},m(r,c){j(r,e,c),_[t].m(e,null),d=!0},p(r,c){let f=t;t=i(r),t===f?_[t].p(r,c):(ve(),K(_[f],1,1,()=>{_[f]=null}),ge(),s=_[t],s?s.p(r,c):(s=_[t]=m[t](r),s.c()),N(s,1),s.m(e,null))},i(r){d||(N(s),d=!0)},o(r){K(s),d=!1},d(r){r&&W(e),_[t].d()}}}function hl(o,e,t){let s,{container_id:d}=e,{allow_download:m}=e,{allow_upload:_}=e,i,r=!0,c,f="/",l=null,p=null;Ht(()=>{d!==c&&(c=d,t(4,r=!0),t(2,f="/"),t(5,l=null),t(6,p=null),d&&le.send("get_filesystem_info",{container_id:d}))}),Ge(()=>{le.register("get_filesystem_info",k=>{w(k.workdir),t(6,p=k)},k=>Ce.add({text:k,type:"error"})),le.register("get_directory_list",k=>{window.scrollTo({top:0,behavior:"smooth"}),t(5,l=k.entries),t(2,f=k.path),t(4,r=!1)},k=>{Ce.add({text:k,type:"error"}),t(5,l=null),t(4,r=!1)}),le.register("download_file",k=>{Sr(k.blob,k.payload.path.split("/").pop())},k=>Ce.add({text:k,type:"error"})),le.register("create_folder",()=>{w(f)},k=>Ce.add({text:k,type:"error"})),le.register("upload_file",()=>{w(f)},k=>Ce.add({text:k,type:"error"}))}),dt(()=>{le.unregister("get_filesystem_info"),le.unregister("get_directory_list"),le.unregister("create_folder"),le.unregister("upload_file"),le.unregister("download_file")});function b(k){let L=f;L.endsWith("/")||(L+="/"),L+=k,w(L)}function w(k){t(2,f=k),le.send("get_directory_list",{container_id:d,path:k}),t(4,r=!0),t(5,l=null)}function S(k){m&&le.send("download_file",{container_id:d,path:`${f}/${k}`})}function n(){const k=prompt("Folder name:");k&&le.send("create_folder",{container_id:d,path:`${f}/${k}`})}async function h(){const k=T=>new Promise((x,O)=>{const U=new FileReader;U.readAsDataURL(T),U.onload=()=>x(U.result.split(",")[1]),U.onerror=$=>O($)}),L=i.files[0];confirm(`Upload file "${L.name}"?`)&&le.send("upload_file",{container_id:d,path:`${f}/${L.name}`,content:await k(L)})}const a=()=>w(p.workdir),u=()=>w(f),g=k=>w(k.totalPath),v=()=>i.click();function y(k){ft[k?"unshift":"push"](()=>{i=k,t(3,i)})}const E=k=>w(k.destination),C=k=>k.type==="d"?b(k.name):S(k.name);return o.$$set=k=>{"container_id"in k&&t(13,d=k.container_id),"allow_download"in k&&t(0,m=k.allow_download),"allow_upload"in k&&t(1,_=k.allow_upload)},o.$$.update=()=>{o.$$.dirty[0]&4&&t(7,s=()=>{const k=[],L=f.split("/");let T="";for(const x of L)x&&(T+="/"+x,k.push({segment:x,totalPath:T}));return k.unshift({segment:"/",totalPath:"/"}),k})},[m,_,f,i,r,l,p,s,b,w,S,n,h,d,a,u,g,v,y,E,C]}class ul extends He{constructor(e){super(),Ie(this,e,hl,cl,xe,{container_id:13,allow_download:0,allow_upload:1},null,[-1,-1])}}function As(o,e,t){const s=o.slice();return s[7]=e[t],s}function Bs(o,e,t){const s=o.slice();return s[10]=e[t],s[12]=t,s}function dl(o){let e,t,s,d,m,_=ye(o[1]||[]),i=[];for(let c=0;c<_.length;c+=1)i[c]=Ps(As(o,_,c));const r=c=>K(i[c],1,1,()=>{i[c]=null});return{c(){e=P("table"),t=P("thead"),t.innerHTML='<tr><th scope="col" class="text-end" title="Process ID">PID</th> <th scope="col" class="text-end" title="Processor Usage">CPU</th> <th scope="col" class="text-end">Memory</th> <th scope="col" class="text-center">Started At</th> <th scope="col" class="text-center">User</th> <th scope="col" class="text-start">Command</th></tr>',s=G(),d=P("tbody");for(let c=0;c<i.length;c+=1)i[c].c();R(e,"class","table table-striped")},m(c,f){j(c,e,f),A(e,t),A(e,s),A(e,d);for(let l=0;l<i.length;l+=1)i[l]&&i[l].m(d,null);m=!0},p(c,f){if(f&2){_=ye(c[1]||[]);let l;for(l=0;l<_.length;l+=1){const p=As(c,_,l);i[l]?(i[l].p(p,f),N(i[l],1)):(i[l]=Ps(p),i[l].c(),N(i[l],1),i[l].m(d,null))}for(ve(),l=_.length;l<i.length;l+=1)r(l);ge()}},i(c){if(!m){for(let f=0;f<_.length;f+=1)N(i[f]);m=!0}},o(c){i=i.filter(Boolean);for(let f=0;f<i.length;f+=1)K(i[f]);m=!1},d(c){c&&W(e),Ve(i,c)}}}function fl(o){let e;return{c(){e=P("div"),e.innerHTML='<strong>Loading...</strong> <div class="spinner-border ms-auto" role="status" aria-hidden="true"></div>',R(e,"class","d-flex align-items-center")},m(t,s){j(t,e,s)},p:ce,i:ce,o:ce,d(t){t&&W(e)}}}function Ms(o){let e=o[7]["%cpu"]+"",t,s;return{c(){t=Y(e),s=Y("%")},m(d,m){j(d,t,m),j(d,s,m)},p(d,m){m&2&&e!==(e=d[7]["%cpu"]+"")&&ae(t,e)},d(d){d&&(W(t),W(s))}}}function Ts(o){let e=o[7]["%mem"]+"",t,s;return{c(){t=Y(e),s=Y("%")},m(d,m){j(d,t,m),j(d,s,m)},p(d,m){m&2&&e!==(e=d[7]["%mem"]+"")&&ae(t,e)},d(d){d&&(W(t),W(s))}}}function xs(o){let e,t;return e=new _e({props:{icon:Wn,rotate:90}}),{c(){ne(e.$$.fragment)},m(s,d){se(e,s,d),t=!0},i(s){t||(N(e.$$.fragment,s),t=!0)},o(s){K(e.$$.fragment,s),t=!1},d(s){re(e,s)}}}function Os(o){let e,t=parseInt(o[7].level)===o[12]+1,s,d=t&&xs();return{c(){e=P("div"),d&&d.c(),be(e,"width","2rem"),R(e,"class","me-2 d-flex justify-content-end align-items-center")},m(m,_){j(m,e,_),d&&d.m(e,null),s=!0},p(m,_){_&2&&(t=parseInt(m[7].level)===m[12]+1),t?d?_&2&&N(d,1):(d=xs(),d.c(),N(d,1),d.m(e,null)):d&&(ve(),K(d,1,1,()=>{d=null}),ge())},i(m){s||(N(d),s=!0)},o(m){K(d),s=!1},d(m){m&&W(e),d&&d.d()}}}function Ps(o){let e,t,s=o[7].pid+"",d,m,_,i=ut(o[7]["%cpu"],null),r,c,f=ut(o[7]["%mem"],null),l,p,b=ut(o[7].stime,"")+"",w,S,n,h=ut(o[7].user,"")+"",a,u,g,v,y,E,C=o[7].command+"",k,L,T,x=i&&Ms(o),O=f&&Ts(o),U=ye(Array(o[7].level)),$=[];for(let F=0;F<U.length;F+=1)$[F]=Os(Bs(o,U,F));const q=F=>K($[F],1,1,()=>{$[F]=null});return{c(){e=P("tr"),t=P("td"),d=Y(s),m=G(),_=P("td"),x&&x.c(),r=G(),c=P("td"),O&&O.c(),l=G(),p=P("td"),w=Y(b),S=G(),n=P("td"),a=Y(h),u=G(),g=P("td"),v=P("div");for(let F=0;F<$.length;F+=1)$[F].c();y=G(),E=P("div"),k=Y(C),L=G(),R(t,"class","text-end"),R(_,"class","text-end"),R(c,"class","text-end"),R(p,"class","text-center"),R(n,"class","text-center"),R(E,"class","font-monospace"),R(v,"class","d-flex"),R(g,"class","text-start")},m(F,D){j(F,e,D),A(e,t),A(t,d),A(e,m),A(e,_),x&&x.m(_,null),A(e,r),A(e,c),O&&O.m(c,null),A(e,l),A(e,p),A(p,w),A(e,S),A(e,n),A(n,a),A(e,u),A(e,g),A(g,v);for(let M=0;M<$.length;M+=1)$[M]&&$[M].m(v,null);A(v,y),A(v,E),A(E,k),A(e,L),T=!0},p(F,D){if((!T||D&2)&&s!==(s=F[7].pid+"")&&ae(d,s),D&2&&(i=ut(F[7]["%cpu"],null)),i?x?x.p(F,D):(x=Ms(F),x.c(),x.m(_,null)):x&&(x.d(1),x=null),D&2&&(f=ut(F[7]["%mem"],null)),f?O?O.p(F,D):(O=Ts(F),O.c(),O.m(c,null)):O&&(O.d(1),O=null),(!T||D&2)&&b!==(b=ut(F[7].stime,"")+"")&&ae(w,b),(!T||D&2)&&h!==(h=ut(F[7].user,"")+"")&&ae(a,h),D&2){U=ye(Array(F[7].level));let M;for(M=0;M<U.length;M+=1){const H=Bs(F,U,M);$[M]?($[M].p(H,D),N($[M],1)):($[M]=Os(H),$[M].c(),N($[M],1),$[M].m(v,y))}for(ve(),M=U.length;M<$.length;M+=1)q(M);ge()}(!T||D&2)&&C!==(C=F[7].command+"")&&ae(k,C)},i(F){if(!T){for(let D=0;D<U.length;D+=1)N($[D]);T=!0}},o(F){$=$.filter(Boolean);for(let D=0;D<$.length;D+=1)K($[D]);T=!1},d(F){F&&W(e),x&&x.d(),O&&O.d(),Ve($,F)}}}function _l(o){let e,t,s,d;const m=[fl,dl],_=[];function i(r,c){return r[0]?0:1}return t=i(o),s=_[t]=m[t](o),{c(){e=P("div"),s.c(),be(e,"overflow-x","auto")},m(r,c){j(r,e,c),_[t].m(e,null),d=!0},p(r,[c]){let f=t;t=i(r),t===f?_[t].p(r,c):(ve(),K(_[f],1,1,()=>{_[f]=null}),ge(),s=_[t],s?s.p(r,c):(s=_[t]=m[t](r),s.c()),N(s,1),s.m(e,null))},i(r){d||(N(s),d=!0)},o(r){K(s),d=!1},d(r){r&&W(e),_[t].d()}}}function ut(o,e){return o??e}function pl(o,e,t){let{container_id:s}=e,d,m,_=!0,i=null;return Ht(()=>{s!==d&&(d=s,t(0,_=!0),t(1,i=null),s&&le.send("get_processes",{container_id:s}))}),Ge(()=>{le.register("get_processes",r=>{t(1,i=r),t(0,_=!1)},r=>Ce.add({text:r,type:"error"})),m=setInterval(()=>{le.send("get_processes",{container_id:s})},3e3)}),dt(()=>{clearInterval(m),le.unregister("get_processes")}),o.$$set=r=>{"container_id"in r&&t(2,s=r.container_id)},[_,i,s]}class ml extends He{constructor(e){super(),Ie(this,e,pl,_l,xe,{container_id:2})}}var wr={exports:{}};(function(o,e){(function(t,s){o.exports=s()})(self,()=>(()=>{var t={4567:function(_,i,r){var c=this&&this.__decorate||function(u,g,v,y){var E,C=arguments.length,k=C<3?g:y===null?y=Object.getOwnPropertyDescriptor(g,v):y;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(u,g,v,y);else for(var L=u.length-1;L>=0;L--)(E=u[L])&&(k=(C<3?E(k):C>3?E(g,v,k):E(g,v))||k);return C>3&&k&&Object.defineProperty(g,v,k),k},f=this&&this.__param||function(u,g){return function(v,y){g(v,y,u)}};Object.defineProperty(i,"__esModule",{value:!0}),i.AccessibilityManager=void 0;const l=r(9042),p=r(6114),b=r(9924),w=r(844),S=r(5596),n=r(4725),h=r(3656);let a=i.AccessibilityManager=class extends w.Disposable{constructor(u,g){super(),this._terminal=u,this._renderService=g,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="",this._accessibilityContainer=document.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=document.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let v=0;v<this._terminal.rows;v++)this._rowElements[v]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[v]);if(this._topBoundaryFocusListener=v=>this._handleBoundaryFocus(v,0),this._bottomBoundaryFocusListener=v=>this._handleBoundaryFocus(v,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions(),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=document.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this.register(new b.TimeBasedDebouncer(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this.register(this._terminal.onResize(v=>this._handleResize(v.rows))),this.register(this._terminal.onRender(v=>this._refreshRows(v.start,v.end))),this.register(this._terminal.onScroll(()=>this._refreshRows())),this.register(this._terminal.onA11yChar(v=>this._handleChar(v))),this.register(this._terminal.onLineFeed(()=>this._handleChar(`
`))),this.register(this._terminal.onA11yTab(v=>this._handleTab(v))),this.register(this._terminal.onKey(v=>this._handleKey(v.key))),this.register(this._terminal.onBlur(()=>this._clearLiveRegion())),this.register(this._renderService.onDimensionsChange(()=>this._refreshRowsDimensions())),this._screenDprMonitor=new S.ScreenDprMonitor(window),this.register(this._screenDprMonitor),this._screenDprMonitor.setListener(()=>this._refreshRowsDimensions()),this.register((0,h.addDisposableDomListener)(window,"resize",()=>this._refreshRowsDimensions())),this._refreshRows(),this.register((0,w.toDisposable)(()=>{this._accessibilityContainer.remove(),this._rowElements.length=0}))}_handleTab(u){for(let g=0;g<u;g++)this._handleChar(" ")}_handleChar(u){this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==u&&(this._charsToAnnounce+=u):this._charsToAnnounce+=u,u===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=l.tooMuchOutput)),p.isMac&&this._liveRegion.textContent&&this._liveRegion.textContent.length>0&&!this._liveRegion.parentNode&&setTimeout(()=>{this._accessibilityContainer.appendChild(this._liveRegion)},0))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0,p.isMac&&this._liveRegion.remove()}_handleKey(u){this._clearLiveRegion(),/\p{Control}/u.test(u)||this._charsToConsume.push(u)}_refreshRows(u,g){this._liveRegionDebouncer.refresh(u,g,this._terminal.rows)}_renderRows(u,g){const v=this._terminal.buffer,y=v.lines.length.toString();for(let E=u;E<=g;E++){const C=v.translateBufferLineToString(v.ydisp+E,!0),k=(v.ydisp+E+1).toString(),L=this._rowElements[E];L&&(C.length===0?L.innerText=" ":L.textContent=C,L.setAttribute("aria-posinset",k),L.setAttribute("aria-setsize",y))}this._announceCharacters()}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(u,g){const v=u.target,y=this._rowElements[g===0?1:this._rowElements.length-2];if(v.getAttribute("aria-posinset")===(g===0?"1":`${this._terminal.buffer.lines.length}`)||u.relatedTarget!==y)return;let E,C;if(g===0?(E=v,C=this._rowElements.pop(),this._rowContainer.removeChild(C)):(E=this._rowElements.shift(),C=v,this._rowContainer.removeChild(E)),E.removeEventListener("focus",this._topBoundaryFocusListener),C.removeEventListener("focus",this._bottomBoundaryFocusListener),g===0){const k=this._createAccessibilityTreeNode();this._rowElements.unshift(k),this._rowContainer.insertAdjacentElement("afterbegin",k)}else{const k=this._createAccessibilityTreeNode();this._rowElements.push(k),this._rowContainer.appendChild(k)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(g===0?-1:1),this._rowElements[g===0?1:this._rowElements.length-2].focus(),u.preventDefault(),u.stopImmediatePropagation()}_handleResize(u){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let g=this._rowContainer.children.length;g<this._terminal.rows;g++)this._rowElements[g]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[g]);for(;this._rowElements.length>u;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){const u=document.createElement("div");return u.setAttribute("role","listitem"),u.tabIndex=-1,this._refreshRowDimensions(u),u}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){this._accessibilityContainer.style.width=`${this._renderService.dimensions.css.canvas.width}px`,this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let u=0;u<this._terminal.rows;u++)this._refreshRowDimensions(this._rowElements[u])}}_refreshRowDimensions(u){u.style.height=`${this._renderService.dimensions.css.cell.height}px`}};i.AccessibilityManager=a=c([f(1,n.IRenderService)],a)},3614:(_,i)=>{function r(p){return p.replace(/\r?\n/g,"\r")}function c(p,b){return b?"\x1B[200~"+p+"\x1B[201~":p}function f(p,b,w,S){p=c(p=r(p),w.decPrivateModes.bracketedPasteMode&&S.rawOptions.ignoreBracketedPasteMode!==!0),w.triggerDataEvent(p,!0),b.value=""}function l(p,b,w){const S=w.getBoundingClientRect(),n=p.clientX-S.left-10,h=p.clientY-S.top-10;b.style.width="20px",b.style.height="20px",b.style.left=`${n}px`,b.style.top=`${h}px`,b.style.zIndex="1000",b.focus()}Object.defineProperty(i,"__esModule",{value:!0}),i.rightClickHandler=i.moveTextAreaUnderMouseCursor=i.paste=i.handlePasteEvent=i.copyHandler=i.bracketTextForPaste=i.prepareTextForTerminal=void 0,i.prepareTextForTerminal=r,i.bracketTextForPaste=c,i.copyHandler=function(p,b){p.clipboardData&&p.clipboardData.setData("text/plain",b.selectionText),p.preventDefault()},i.handlePasteEvent=function(p,b,w,S){p.stopPropagation(),p.clipboardData&&f(p.clipboardData.getData("text/plain"),b,w,S)},i.paste=f,i.moveTextAreaUnderMouseCursor=l,i.rightClickHandler=function(p,b,w,S,n){l(p,b,w),n&&S.rightClickSelect(p),b.value=S.selectionText,b.select()}},7239:(_,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ColorContrastCache=void 0;const c=r(1505);i.ColorContrastCache=class{constructor(){this._color=new c.TwoKeyMap,this._css=new c.TwoKeyMap}setCss(f,l,p){this._css.set(f,l,p)}getCss(f,l){return this._css.get(f,l)}setColor(f,l,p){this._color.set(f,l,p)}getColor(f,l){return this._color.get(f,l)}clear(){this._color.clear(),this._css.clear()}}},3656:(_,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.addDisposableDomListener=void 0,i.addDisposableDomListener=function(r,c,f,l){r.addEventListener(c,f,l);let p=!1;return{dispose:()=>{p||(p=!0,r.removeEventListener(c,f,l))}}}},6465:function(_,i,r){var c=this&&this.__decorate||function(n,h,a,u){var g,v=arguments.length,y=v<3?h:u===null?u=Object.getOwnPropertyDescriptor(h,a):u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(n,h,a,u);else for(var E=n.length-1;E>=0;E--)(g=n[E])&&(y=(v<3?g(y):v>3?g(h,a,y):g(h,a))||y);return v>3&&y&&Object.defineProperty(h,a,y),y},f=this&&this.__param||function(n,h){return function(a,u){h(a,u,n)}};Object.defineProperty(i,"__esModule",{value:!0}),i.Linkifier2=void 0;const l=r(3656),p=r(8460),b=r(844),w=r(2585);let S=i.Linkifier2=class extends b.Disposable{get currentLink(){return this._currentLink}constructor(n){super(),this._bufferService=n,this._linkProviders=[],this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this.register(new p.EventEmitter),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this.register(new p.EventEmitter),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this.register((0,b.getDisposeArrayDisposable)(this._linkCacheDisposables)),this.register((0,b.toDisposable)(()=>{this._lastMouseEvent=void 0})),this.register(this._bufferService.onResize(()=>{this._clearCurrentLink(),this._wasResized=!0}))}registerLinkProvider(n){return this._linkProviders.push(n),{dispose:()=>{const h=this._linkProviders.indexOf(n);h!==-1&&this._linkProviders.splice(h,1)}}}attachToDom(n,h,a){this._element=n,this._mouseService=h,this._renderService=a,this.register((0,l.addDisposableDomListener)(this._element,"mouseleave",()=>{this._isMouseOut=!0,this._clearCurrentLink()})),this.register((0,l.addDisposableDomListener)(this._element,"mousemove",this._handleMouseMove.bind(this))),this.register((0,l.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,l.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))}_handleMouseMove(n){if(this._lastMouseEvent=n,!this._element||!this._mouseService)return;const h=this._positionFromMouseEvent(n,this._element,this._mouseService);if(!h)return;this._isMouseOut=!1;const a=n.composedPath();for(let u=0;u<a.length;u++){const g=a[u];if(g.classList.contains("xterm"))break;if(g.classList.contains("xterm-hover"))return}this._lastBufferCell&&h.x===this._lastBufferCell.x&&h.y===this._lastBufferCell.y||(this._handleHover(h),this._lastBufferCell=h)}_handleHover(n){if(this._activeLine!==n.y||this._wasResized)return this._clearCurrentLink(),this._askForLink(n,!1),void(this._wasResized=!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,n)||(this._clearCurrentLink(),this._askForLink(n,!0))}_askForLink(n,h){var a,u;this._activeProviderReplies&&h||((a=this._activeProviderReplies)===null||a===void 0||a.forEach(v=>{v==null||v.forEach(y=>{y.link.dispose&&y.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=n.y);let g=!1;for(const[v,y]of this._linkProviders.entries())h?!((u=this._activeProviderReplies)===null||u===void 0)&&u.get(v)&&(g=this._checkLinkProviderResult(v,n,g)):y.provideLinks(n.y,E=>{var C,k;if(this._isMouseOut)return;const L=E==null?void 0:E.map(T=>({link:T}));(C=this._activeProviderReplies)===null||C===void 0||C.set(v,L),g=this._checkLinkProviderResult(v,n,g),((k=this._activeProviderReplies)===null||k===void 0?void 0:k.size)===this._linkProviders.length&&this._removeIntersectingLinks(n.y,this._activeProviderReplies)})}_removeIntersectingLinks(n,h){const a=new Set;for(let u=0;u<h.size;u++){const g=h.get(u);if(g)for(let v=0;v<g.length;v++){const y=g[v],E=y.link.range.start.y<n?0:y.link.range.start.x,C=y.link.range.end.y>n?this._bufferService.cols:y.link.range.end.x;for(let k=E;k<=C;k++){if(a.has(k)){g.splice(v--,1);break}a.add(k)}}}}_checkLinkProviderResult(n,h,a){var u;if(!this._activeProviderReplies)return a;const g=this._activeProviderReplies.get(n);let v=!1;for(let y=0;y<n;y++)this._activeProviderReplies.has(y)&&!this._activeProviderReplies.get(y)||(v=!0);if(!v&&g){const y=g.find(E=>this._linkAtPosition(E.link,h));y&&(a=!0,this._handleNewLink(y))}if(this._activeProviderReplies.size===this._linkProviders.length&&!a)for(let y=0;y<this._activeProviderReplies.size;y++){const E=(u=this._activeProviderReplies.get(y))===null||u===void 0?void 0:u.find(C=>this._linkAtPosition(C.link,h));if(E){a=!0,this._handleNewLink(E);break}}return a}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(n){if(!this._element||!this._mouseService||!this._currentLink)return;const h=this._positionFromMouseEvent(n,this._element,this._mouseService);h&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,h)&&this._currentLink.link.activate(n,this._currentLink.link.text)}_clearCurrentLink(n,h){this._element&&this._currentLink&&this._lastMouseEvent&&(!n||!h||this._currentLink.link.range.start.y>=n&&this._currentLink.link.range.end.y<=h)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,b.disposeArray)(this._linkCacheDisposables))}_handleNewLink(n){if(!this._element||!this._lastMouseEvent||!this._mouseService)return;const h=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);h&&this._linkAtPosition(n.link,h)&&(this._currentLink=n,this._currentLink.state={decorations:{underline:n.link.decorations===void 0||n.link.decorations.underline,pointerCursor:n.link.decorations===void 0||n.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,n.link,this._lastMouseEvent),n.link.decorations={},Object.defineProperties(n.link.decorations,{pointerCursor:{get:()=>{var a,u;return(u=(a=this._currentLink)===null||a===void 0?void 0:a.state)===null||u===void 0?void 0:u.decorations.pointerCursor},set:a=>{var u,g;!((u=this._currentLink)===null||u===void 0)&&u.state&&this._currentLink.state.decorations.pointerCursor!==a&&(this._currentLink.state.decorations.pointerCursor=a,this._currentLink.state.isHovered&&((g=this._element)===null||g===void 0||g.classList.toggle("xterm-cursor-pointer",a)))}},underline:{get:()=>{var a,u;return(u=(a=this._currentLink)===null||a===void 0?void 0:a.state)===null||u===void 0?void 0:u.decorations.underline},set:a=>{var u,g,v;!((u=this._currentLink)===null||u===void 0)&&u.state&&((v=(g=this._currentLink)===null||g===void 0?void 0:g.state)===null||v===void 0?void 0:v.decorations.underline)!==a&&(this._currentLink.state.decorations.underline=a,this._currentLink.state.isHovered&&this._fireUnderlineEvent(n.link,a))}}}),this._renderService&&this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange(a=>{if(!this._currentLink)return;const u=a.start===0?0:a.start+1+this._bufferService.buffer.ydisp,g=this._bufferService.buffer.ydisp+1+a.end;if(this._currentLink.link.range.start.y>=u&&this._currentLink.link.range.end.y<=g&&(this._clearCurrentLink(u,g),this._lastMouseEvent&&this._element)){const v=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);v&&this._askForLink(v,!1)}})))}_linkHover(n,h,a){var u;!((u=this._currentLink)===null||u===void 0)&&u.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(h,!0),this._currentLink.state.decorations.pointerCursor&&n.classList.add("xterm-cursor-pointer")),h.hover&&h.hover(a,h.text)}_fireUnderlineEvent(n,h){const a=n.range,u=this._bufferService.buffer.ydisp,g=this._createLinkUnderlineEvent(a.start.x-1,a.start.y-u-1,a.end.x,a.end.y-u-1,void 0);(h?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(g)}_linkLeave(n,h,a){var u;!((u=this._currentLink)===null||u===void 0)&&u.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(h,!1),this._currentLink.state.decorations.pointerCursor&&n.classList.remove("xterm-cursor-pointer")),h.leave&&h.leave(a,h.text)}_linkAtPosition(n,h){const a=n.range.start.y*this._bufferService.cols+n.range.start.x,u=n.range.end.y*this._bufferService.cols+n.range.end.x,g=h.y*this._bufferService.cols+h.x;return a<=g&&g<=u}_positionFromMouseEvent(n,h,a){const u=a.getCoords(n,h,this._bufferService.cols,this._bufferService.rows);if(u)return{x:u[0],y:u[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(n,h,a,u,g){return{x1:n,y1:h,x2:a,y2:u,cols:this._bufferService.cols,fg:g}}};i.Linkifier2=S=c([f(0,w.IBufferService)],S)},9042:(_,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.tooMuchOutput=i.promptLabel=void 0,i.promptLabel="Terminal input",i.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},3730:function(_,i,r){var c=this&&this.__decorate||function(S,n,h,a){var u,g=arguments.length,v=g<3?n:a===null?a=Object.getOwnPropertyDescriptor(n,h):a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")v=Reflect.decorate(S,n,h,a);else for(var y=S.length-1;y>=0;y--)(u=S[y])&&(v=(g<3?u(v):g>3?u(n,h,v):u(n,h))||v);return g>3&&v&&Object.defineProperty(n,h,v),v},f=this&&this.__param||function(S,n){return function(h,a){n(h,a,S)}};Object.defineProperty(i,"__esModule",{value:!0}),i.OscLinkProvider=void 0;const l=r(511),p=r(2585);let b=i.OscLinkProvider=class{constructor(S,n,h){this._bufferService=S,this._optionsService=n,this._oscLinkService=h}provideLinks(S,n){var h;const a=this._bufferService.buffer.lines.get(S-1);if(!a)return void n(void 0);const u=[],g=this._optionsService.rawOptions.linkHandler,v=new l.CellData,y=a.getTrimmedLength();let E=-1,C=-1,k=!1;for(let L=0;L<y;L++)if(C!==-1||a.hasContent(L)){if(a.loadCell(L,v),v.hasExtendedAttrs()&&v.extended.urlId){if(C===-1){C=L,E=v.extended.urlId;continue}k=v.extended.urlId!==E}else C!==-1&&(k=!0);if(k||C!==-1&&L===y-1){const T=(h=this._oscLinkService.getLinkData(E))===null||h===void 0?void 0:h.uri;if(T){const x={start:{x:C+1,y:S},end:{x:L+(k||L!==y-1?0:1),y:S}};let O=!1;if(!(g!=null&&g.allowNonHttpProtocols))try{const U=new URL(T);["http:","https:"].includes(U.protocol)||(O=!0)}catch{O=!0}O||u.push({text:T,range:x,activate:(U,$)=>g?g.activate(U,$,x):w(0,$),hover:(U,$)=>{var q;return(q=g==null?void 0:g.hover)===null||q===void 0?void 0:q.call(g,U,$,x)},leave:(U,$)=>{var q;return(q=g==null?void 0:g.leave)===null||q===void 0?void 0:q.call(g,U,$,x)}})}k=!1,v.hasExtendedAttrs()&&v.extended.urlId?(C=L,E=v.extended.urlId):(C=-1,E=-1)}}n(u)}};function w(S,n){if(confirm(`Do you want to navigate to ${n}?

WARNING: This link could potentially be dangerous`)){const h=window.open();if(h){try{h.opener=null}catch{}h.location.href=n}else console.warn("Opening link blocked as opener could not be cleared")}}i.OscLinkProvider=b=c([f(0,p.IBufferService),f(1,p.IOptionsService),f(2,p.IOscLinkService)],b)},6193:(_,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.RenderDebouncer=void 0,i.RenderDebouncer=class{constructor(r,c){this._parentWindow=r,this._renderCallback=c,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._parentWindow.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(r){return this._refreshCallbacks.push(r),this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame(()=>this._innerRefresh())),this._animationFrame}refresh(r,c,f){this._rowCount=f,r=r!==void 0?r:0,c=c!==void 0?c:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,r):r,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,c):c,this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return void this._runRefreshCallbacks();const r=Math.max(this._rowStart,0),c=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(r,c),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(const r of this._refreshCallbacks)r(0);this._refreshCallbacks=[]}}},5596:(_,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ScreenDprMonitor=void 0;const c=r(844);class f extends c.Disposable{constructor(p){super(),this._parentWindow=p,this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this.register((0,c.toDisposable)(()=>{this.clearListener()}))}setListener(p){this._listener&&this.clearListener(),this._listener=p,this._outerListener=()=>{this._listener&&(this._listener(this._parentWindow.devicePixelRatio,this._currentDevicePixelRatio),this._updateDpr())},this._updateDpr()}_updateDpr(){var p;this._outerListener&&((p=this._resolutionMediaMatchList)===null||p===void 0||p.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){this._resolutionMediaMatchList&&this._listener&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._listener=void 0,this._outerListener=void 0)}}i.ScreenDprMonitor=f},3236:(_,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Terminal=void 0;const c=r(3614),f=r(3656),l=r(6465),p=r(9042),b=r(3730),w=r(1680),S=r(3107),n=r(5744),h=r(2950),a=r(1296),u=r(428),g=r(4269),v=r(5114),y=r(8934),E=r(3230),C=r(9312),k=r(4725),L=r(6731),T=r(8055),x=r(8969),O=r(8460),U=r(844),$=r(6114),q=r(8437),F=r(2584),D=r(7399),M=r(5941),H=r(9074),I=r(2585),X=r(5435),J=r(4567),ie=typeof window<"u"?window.document:null;class te extends x.CoreTerminal{get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}constructor(B={}){super(B),this.browser=$,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this.register(new U.MutableDisposable),this._onCursorMove=this.register(new O.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onKey=this.register(new O.EventEmitter),this.onKey=this._onKey.event,this._onRender=this.register(new O.EventEmitter),this.onRender=this._onRender.event,this._onSelectionChange=this.register(new O.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this.register(new O.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onBell=this.register(new O.EventEmitter),this.onBell=this._onBell.event,this._onFocus=this.register(new O.EventEmitter),this._onBlur=this.register(new O.EventEmitter),this._onA11yCharEmitter=this.register(new O.EventEmitter),this._onA11yTabEmitter=this.register(new O.EventEmitter),this._onWillOpen=this.register(new O.EventEmitter),this._setup(),this.linkifier2=this.register(this._instantiationService.createInstance(l.Linkifier2)),this.linkifier2.registerLinkProvider(this._instantiationService.createInstance(b.OscLinkProvider)),this._decorationService=this._instantiationService.createInstance(H.DecorationService),this._instantiationService.setService(I.IDecorationService,this._decorationService),this.register(this._inputHandler.onRequestBell(()=>this._onBell.fire())),this.register(this._inputHandler.onRequestRefreshRows((z,Z)=>this.refresh(z,Z))),this.register(this._inputHandler.onRequestSendFocus(()=>this._reportFocus())),this.register(this._inputHandler.onRequestReset(()=>this.reset())),this.register(this._inputHandler.onRequestWindowsOptionsReport(z=>this._reportWindowsOptions(z))),this.register(this._inputHandler.onColor(z=>this._handleColorEvent(z))),this.register((0,O.forwardEvent)(this._inputHandler.onCursorMove,this._onCursorMove)),this.register((0,O.forwardEvent)(this._inputHandler.onTitleChange,this._onTitleChange)),this.register((0,O.forwardEvent)(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this.register((0,O.forwardEvent)(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this.register(this._bufferService.onResize(z=>this._afterResize(z.cols,z.rows))),this.register((0,U.toDisposable)(()=>{var z,Z;this._customKeyEventHandler=void 0,(Z=(z=this.element)===null||z===void 0?void 0:z.parentNode)===null||Z===void 0||Z.removeChild(this.element)}))}_handleColorEvent(B){if(this._themeService)for(const z of B){let Z,V="";switch(z.index){case 256:Z="foreground",V="10";break;case 257:Z="background",V="11";break;case 258:Z="cursor",V="12";break;default:Z="ansi",V="4;"+z.index}switch(z.type){case 0:const oe=T.color.toColorRGB(Z==="ansi"?this._themeService.colors.ansi[z.index]:this._themeService.colors[Z]);this.coreService.triggerDataEvent(`${F.C0.ESC}]${V};${(0,M.toRgbString)(oe)}${F.C1_ESCAPED.ST}`);break;case 1:if(Z==="ansi")this._themeService.modifyColors(ee=>ee.ansi[z.index]=T.rgba.toColor(...z.color));else{const ee=Z;this._themeService.modifyColors(me=>me[ee]=T.rgba.toColor(...z.color))}break;case 2:this._themeService.restoreColor(z.index)}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(B){B?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(J.AccessibilityManager,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(B){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(F.C0.ESC+"[I"),this.updateCursorStyle(B),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){var B;return(B=this.textarea)===null||B===void 0?void 0:B.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(F.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;const B=this.buffer.ybase+this.buffer.y,z=this.buffer.lines.get(B);if(!z)return;const Z=Math.min(this.buffer.x,this.cols-1),V=this._renderService.dimensions.css.cell.height,oe=z.getWidth(Z),ee=this._renderService.dimensions.css.cell.width*oe,me=this.buffer.y*this._renderService.dimensions.css.cell.height,we=Z*this._renderService.dimensions.css.cell.width;this.textarea.style.left=we+"px",this.textarea.style.top=me+"px",this.textarea.style.width=ee+"px",this.textarea.style.height=V+"px",this.textarea.style.lineHeight=V+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this.register((0,f.addDisposableDomListener)(this.element,"copy",z=>{this.hasSelection()&&(0,c.copyHandler)(z,this._selectionService)}));const B=z=>(0,c.handlePasteEvent)(z,this.textarea,this.coreService,this.optionsService);this.register((0,f.addDisposableDomListener)(this.textarea,"paste",B)),this.register((0,f.addDisposableDomListener)(this.element,"paste",B)),$.isFirefox?this.register((0,f.addDisposableDomListener)(this.element,"mousedown",z=>{z.button===2&&(0,c.rightClickHandler)(z,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})):this.register((0,f.addDisposableDomListener)(this.element,"contextmenu",z=>{(0,c.rightClickHandler)(z,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})),$.isLinux&&this.register((0,f.addDisposableDomListener)(this.element,"auxclick",z=>{z.button===1&&(0,c.moveTextAreaUnderMouseCursor)(z,this.textarea,this.screenElement)}))}_bindKeys(){this.register((0,f.addDisposableDomListener)(this.textarea,"keyup",B=>this._keyUp(B),!0)),this.register((0,f.addDisposableDomListener)(this.textarea,"keydown",B=>this._keyDown(B),!0)),this.register((0,f.addDisposableDomListener)(this.textarea,"keypress",B=>this._keyPress(B),!0)),this.register((0,f.addDisposableDomListener)(this.textarea,"compositionstart",()=>this._compositionHelper.compositionstart())),this.register((0,f.addDisposableDomListener)(this.textarea,"compositionupdate",B=>this._compositionHelper.compositionupdate(B))),this.register((0,f.addDisposableDomListener)(this.textarea,"compositionend",()=>this._compositionHelper.compositionend())),this.register((0,f.addDisposableDomListener)(this.textarea,"input",B=>this._inputEvent(B),!0)),this.register(this.onRender(()=>this._compositionHelper.updateCompositionElements()))}open(B){var z;if(!B)throw new Error("Terminal requires a parent element.");B.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this._document=B.ownerDocument,this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),B.appendChild(this.element);const Z=ie.createDocumentFragment();this._viewportElement=ie.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),Z.appendChild(this._viewportElement),this._viewportScrollArea=ie.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=ie.createElement("div"),this.screenElement.classList.add("xterm-screen"),this._helperContainer=ie.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),Z.appendChild(this.screenElement),this.textarea=ie.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",p.promptLabel),$.isChromeOS||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._coreBrowserService=this._instantiationService.createInstance(v.CoreBrowserService,this.textarea,(z=this._document.defaultView)!==null&&z!==void 0?z:window),this._instantiationService.setService(k.ICoreBrowserService,this._coreBrowserService),this.register((0,f.addDisposableDomListener)(this.textarea,"focus",V=>this._handleTextAreaFocus(V))),this.register((0,f.addDisposableDomListener)(this.textarea,"blur",()=>this._handleTextAreaBlur())),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(u.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(k.ICharSizeService,this._charSizeService),this._themeService=this._instantiationService.createInstance(L.ThemeService),this._instantiationService.setService(k.IThemeService,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(g.CharacterJoinerService),this._instantiationService.setService(k.ICharacterJoinerService,this._characterJoinerService),this._renderService=this.register(this._instantiationService.createInstance(E.RenderService,this.rows,this.screenElement)),this._instantiationService.setService(k.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange(V=>this._onRender.fire(V))),this.onResize(V=>this._renderService.resize(V.cols,V.rows)),this._compositionView=ie.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(h.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this.element.appendChild(Z);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this._mouseService=this._instantiationService.createInstance(y.MouseService),this._instantiationService.setService(k.IMouseService,this._mouseService),this.viewport=this._instantiationService.createInstance(w.Viewport,this._viewportElement,this._viewportScrollArea),this.viewport.onRequestScrollLines(V=>this.scrollLines(V.amount,V.suppressScrollEvent,1)),this.register(this._inputHandler.onRequestSyncScrollBar(()=>this.viewport.syncScrollArea())),this.register(this.viewport),this.register(this.onCursorMove(()=>{this._renderService.handleCursorMove(),this._syncTextArea()})),this.register(this.onResize(()=>this._renderService.handleResize(this.cols,this.rows))),this.register(this.onBlur(()=>this._renderService.handleBlur())),this.register(this.onFocus(()=>this._renderService.handleFocus())),this.register(this._renderService.onDimensionsChange(()=>this.viewport.syncScrollArea())),this._selectionService=this.register(this._instantiationService.createInstance(C.SelectionService,this.element,this.screenElement,this.linkifier2)),this._instantiationService.setService(k.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines(V=>this.scrollLines(V.amount,V.suppressScrollEvent))),this.register(this._selectionService.onSelectionChange(()=>this._onSelectionChange.fire())),this.register(this._selectionService.onRequestRedraw(V=>this._renderService.handleSelectionChanged(V.start,V.end,V.columnSelectMode))),this.register(this._selectionService.onLinuxMouseSelection(V=>{this.textarea.value=V,this.textarea.focus(),this.textarea.select()})),this.register(this._onScroll.event(V=>{this.viewport.syncScrollArea(),this._selectionService.refresh()})),this.register((0,f.addDisposableDomListener)(this._viewportElement,"scroll",()=>this._selectionService.refresh())),this.linkifier2.attachToDom(this.screenElement,this._mouseService,this._renderService),this.register(this._instantiationService.createInstance(S.BufferDecorationRenderer,this.screenElement)),this.register((0,f.addDisposableDomListener)(this.element,"mousedown",V=>this._selectionService.handleMouseDown(V))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(J.AccessibilityManager,this)),this.register(this.optionsService.onSpecificOptionChange("screenReaderMode",V=>this._handleScreenReaderModeOptionChange(V))),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(n.OverviewRulerRenderer,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRulerWidth",V=>{!this._overviewRulerRenderer&&V&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(n.OverviewRulerRenderer,this._viewportElement,this.screenElement)))}),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(a.DomRenderer,this.element,this.screenElement,this._viewportElement,this.linkifier2)}bindMouse(){const B=this,z=this.element;function Z(ee){const me=B._mouseService.getMouseReportCoords(ee,B.screenElement);if(!me)return!1;let we,ke;switch(ee.overrideType||ee.type){case"mousemove":ke=32,ee.buttons===void 0?(we=3,ee.button!==void 0&&(we=ee.button<3?ee.button:3)):we=1&ee.buttons?0:4&ee.buttons?1:2&ee.buttons?2:3;break;case"mouseup":ke=0,we=ee.button<3?ee.button:3;break;case"mousedown":ke=1,we=ee.button<3?ee.button:3;break;case"wheel":if(B.viewport.getLinesScrolled(ee)===0)return!1;ke=ee.deltaY<0?0:1,we=4;break;default:return!1}return!(ke===void 0||we===void 0||we>4)&&B.coreMouseService.triggerMouseEvent({col:me.col,row:me.row,x:me.x,y:me.y,button:we,action:ke,ctrl:ee.ctrlKey,alt:ee.altKey,shift:ee.shiftKey})}const V={mouseup:null,wheel:null,mousedrag:null,mousemove:null},oe={mouseup:ee=>(Z(ee),ee.buttons||(this._document.removeEventListener("mouseup",V.mouseup),V.mousedrag&&this._document.removeEventListener("mousemove",V.mousedrag)),this.cancel(ee)),wheel:ee=>(Z(ee),this.cancel(ee,!0)),mousedrag:ee=>{ee.buttons&&Z(ee)},mousemove:ee=>{ee.buttons||Z(ee)}};this.register(this.coreMouseService.onProtocolChange(ee=>{ee?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(ee)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),8&ee?V.mousemove||(z.addEventListener("mousemove",oe.mousemove),V.mousemove=oe.mousemove):(z.removeEventListener("mousemove",V.mousemove),V.mousemove=null),16&ee?V.wheel||(z.addEventListener("wheel",oe.wheel,{passive:!1}),V.wheel=oe.wheel):(z.removeEventListener("wheel",V.wheel),V.wheel=null),2&ee?V.mouseup||(z.addEventListener("mouseup",oe.mouseup),V.mouseup=oe.mouseup):(this._document.removeEventListener("mouseup",V.mouseup),z.removeEventListener("mouseup",V.mouseup),V.mouseup=null),4&ee?V.mousedrag||(V.mousedrag=oe.mousedrag):(this._document.removeEventListener("mousemove",V.mousedrag),V.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,f.addDisposableDomListener)(z,"mousedown",ee=>{if(ee.preventDefault(),this.focus(),this.coreMouseService.areMouseEventsActive&&!this._selectionService.shouldForceSelection(ee))return Z(ee),V.mouseup&&this._document.addEventListener("mouseup",V.mouseup),V.mousedrag&&this._document.addEventListener("mousemove",V.mousedrag),this.cancel(ee)})),this.register((0,f.addDisposableDomListener)(z,"wheel",ee=>{if(!V.wheel){if(!this.buffer.hasScrollback){const me=this.viewport.getLinesScrolled(ee);if(me===0)return;const we=F.C0.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(ee.deltaY<0?"A":"B");let ke="";for(let Xe=0;Xe<Math.abs(me);Xe++)ke+=we;return this.coreService.triggerDataEvent(ke,!0),this.cancel(ee,!0)}return this.viewport.handleWheel(ee)?this.cancel(ee):void 0}},{passive:!1})),this.register((0,f.addDisposableDomListener)(z,"touchstart",ee=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchStart(ee),this.cancel(ee)},{passive:!0})),this.register((0,f.addDisposableDomListener)(z,"touchmove",ee=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchMove(ee)?void 0:this.cancel(ee)},{passive:!1}))}refresh(B,z){var Z;(Z=this._renderService)===null||Z===void 0||Z.refreshRows(B,z)}updateCursorStyle(B){var z;!((z=this._selectionService)===null||z===void 0)&&z.shouldColumnSelect(B)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(B,z,Z=0){var V;Z===1?(super.scrollLines(B,z,Z),this.refresh(0,this.rows-1)):(V=this.viewport)===null||V===void 0||V.scrollLines(B)}paste(B){(0,c.paste)(B,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(B){this._customKeyEventHandler=B}registerLinkProvider(B){return this.linkifier2.registerLinkProvider(B)}registerCharacterJoiner(B){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");const z=this._characterJoinerService.register(B);return this.refresh(0,this.rows-1),z}deregisterCharacterJoiner(B){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(B)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(B){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+B)}registerDecoration(B){return this._decorationService.registerDecoration(B)}hasSelection(){return!!this._selectionService&&this._selectionService.hasSelection}select(B,z,Z){this._selectionService.setSelection(B,z,Z)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(this._selectionService&&this._selectionService.hasSelection)return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){var B;(B=this._selectionService)===null||B===void 0||B.clearSelection()}selectAll(){var B;(B=this._selectionService)===null||B===void 0||B.selectAll()}selectLines(B,z){var Z;(Z=this._selectionService)===null||Z===void 0||Z.selectLines(B,z)}_keyDown(B){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(B)===!1)return!1;const z=this.browser.isMac&&this.options.macOptionIsMeta&&B.altKey;if(!z&&!this._compositionHelper.keydown(B))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;z||B.key!=="Dead"&&B.key!=="AltGraph"||(this._unprocessedDeadKey=!0);const Z=(0,D.evaluateKeyboardEvent)(B,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(B),Z.type===3||Z.type===2){const V=this.rows-1;return this.scrollLines(Z.type===2?-V:V),this.cancel(B,!0)}return Z.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,B)||(Z.cancel&&this.cancel(B,!0),!Z.key||!!(B.key&&!B.ctrlKey&&!B.altKey&&!B.metaKey&&B.key.length===1&&B.key.charCodeAt(0)>=65&&B.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(Z.key!==F.C0.ETX&&Z.key!==F.C0.CR||(this.textarea.value=""),this._onKey.fire({key:Z.key,domEvent:B}),this._showCursor(),this.coreService.triggerDataEvent(Z.key,!0),!this.optionsService.rawOptions.screenReaderMode||B.altKey||B.ctrlKey?this.cancel(B,!0):void(this._keyDownHandled=!0))))}_isThirdLevelShift(B,z){const Z=B.isMac&&!this.options.macOptionIsMeta&&z.altKey&&!z.ctrlKey&&!z.metaKey||B.isWindows&&z.altKey&&z.ctrlKey&&!z.metaKey||B.isWindows&&z.getModifierState("AltGraph");return z.type==="keypress"?Z:Z&&(!z.keyCode||z.keyCode>47)}_keyUp(B){this._keyDownSeen=!1,this._customKeyEventHandler&&this._customKeyEventHandler(B)===!1||(function(z){return z.keyCode===16||z.keyCode===17||z.keyCode===18}(B)||this.focus(),this.updateCursorStyle(B),this._keyPressHandled=!1)}_keyPress(B){let z;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(B)===!1)return!1;if(this.cancel(B),B.charCode)z=B.charCode;else if(B.which===null||B.which===void 0)z=B.keyCode;else{if(B.which===0||B.charCode===0)return!1;z=B.which}return!(!z||(B.altKey||B.ctrlKey||B.metaKey)&&!this._isThirdLevelShift(this.browser,B)||(z=String.fromCharCode(z),this._onKey.fire({key:z,domEvent:B}),this._showCursor(),this.coreService.triggerDataEvent(z,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))}_inputEvent(B){if(B.data&&B.inputType==="insertText"&&(!B.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;const z=B.data;return this.coreService.triggerDataEvent(z,!0),this.cancel(B),!0}return!1}resize(B,z){B!==this.cols||z!==this.rows?super.resize(B,z):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()}_afterResize(B,z){var Z,V;(Z=this._charSizeService)===null||Z===void 0||Z.measure(),(V=this.viewport)===null||V===void 0||V.syncScrollArea(!0)}clear(){var B;if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let z=1;z<this.rows;z++)this.buffer.lines.push(this.buffer.getBlankLine(q.DEFAULT_ATTR_DATA));this._onScroll.fire({position:this.buffer.ydisp,source:0}),(B=this.viewport)===null||B===void 0||B.reset(),this.refresh(0,this.rows-1)}}reset(){var B,z;this.options.rows=this.rows,this.options.cols=this.cols;const Z=this._customKeyEventHandler;this._setup(),super.reset(),(B=this._selectionService)===null||B===void 0||B.reset(),this._decorationService.reset(),(z=this.viewport)===null||z===void 0||z.reset(),this._customKeyEventHandler=Z,this.refresh(0,this.rows-1)}clearTextureAtlas(){var B;(B=this._renderService)===null||B===void 0||B.clearTextureAtlas()}_reportFocus(){var B;!((B=this.element)===null||B===void 0)&&B.classList.contains("focus")?this.coreService.triggerDataEvent(F.C0.ESC+"[I"):this.coreService.triggerDataEvent(F.C0.ESC+"[O")}_reportWindowsOptions(B){if(this._renderService)switch(B){case X.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:const z=this._renderService.dimensions.css.canvas.width.toFixed(0),Z=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${F.C0.ESC}[4;${Z};${z}t`);break;case X.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:const V=this._renderService.dimensions.css.cell.width.toFixed(0),oe=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${F.C0.ESC}[6;${oe};${V}t`)}}cancel(B,z){if(this.options.cancelEvents||z)return B.preventDefault(),B.stopPropagation(),!1}}i.Terminal=te},9924:(_,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.TimeBasedDebouncer=void 0,i.TimeBasedDebouncer=class{constructor(r,c=1e3){this._renderCallback=r,this._debounceThresholdMS=c,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(r,c,f){this._rowCount=f,r=r!==void 0?r:0,c=c!==void 0?c:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,r):r,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,c):c;const l=Date.now();if(l-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=l,this._innerRefresh();else if(!this._additionalRefreshRequested){const p=l-this._lastRefreshMs,b=this._debounceThresholdMS-p;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(()=>{this._lastRefreshMs=Date.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0},b)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;const r=Math.max(this._rowStart,0),c=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(r,c)}}},1680:function(_,i,r){var c=this&&this.__decorate||function(h,a,u,g){var v,y=arguments.length,E=y<3?a:g===null?g=Object.getOwnPropertyDescriptor(a,u):g;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(h,a,u,g);else for(var C=h.length-1;C>=0;C--)(v=h[C])&&(E=(y<3?v(E):y>3?v(a,u,E):v(a,u))||E);return y>3&&E&&Object.defineProperty(a,u,E),E},f=this&&this.__param||function(h,a){return function(u,g){a(u,g,h)}};Object.defineProperty(i,"__esModule",{value:!0}),i.Viewport=void 0;const l=r(3656),p=r(4725),b=r(8460),w=r(844),S=r(2585);let n=i.Viewport=class extends w.Disposable{constructor(h,a,u,g,v,y,E,C){super(),this._viewportElement=h,this._scrollArea=a,this._bufferService=u,this._optionsService=g,this._charSizeService=v,this._renderService=y,this._coreBrowserService=E,this.scrollBarWidth=0,this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._wheelPartialScroll=0,this._refreshAnimationFrame=null,this._ignoreNextScrollEvent=!1,this._smoothScrollState={startTime:0,origin:-1,target:-1},this._onRequestScrollLines=this.register(new b.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this.register((0,l.addDisposableDomListener)(this._viewportElement,"scroll",this._handleScroll.bind(this))),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(k=>this._activeBuffer=k.activeBuffer)),this._renderDimensions=this._renderService.dimensions,this.register(this._renderService.onDimensionsChange(k=>this._renderDimensions=k)),this._handleThemeChange(C.colors),this.register(C.onChangeColors(k=>this._handleThemeChange(k))),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.syncScrollArea())),setTimeout(()=>this.syncScrollArea())}_handleThemeChange(h){this._viewportElement.style.backgroundColor=h.background.css}reset(){this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._coreBrowserService.window.requestAnimationFrame(()=>this.syncScrollArea())}_refresh(h){if(h)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&this._coreBrowserService.window.cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderService.dimensions.device.cell.height/this._coreBrowserService.dpr,this._currentDeviceCellHeight=this._renderService.dimensions.device.cell.height,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;const a=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderService.dimensions.css.canvas.height);this._lastRecordedBufferHeight!==a&&(this._lastRecordedBufferHeight=a,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}const h=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==h&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=h),this._refreshAnimationFrame=null}syncScrollArea(h=!1){if(this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(h);this._lastRecordedViewportHeight===this._renderService.dimensions.css.canvas.height&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.device.cell.height===this._currentDeviceCellHeight||this._refresh(h)}_handleScroll(h){if(this._lastScrollTop=this._viewportElement.scrollTop,!this._viewportElement.offsetParent)return;if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._onRequestScrollLines.fire({amount:0,suppressScrollEvent:!0});const a=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._onRequestScrollLines.fire({amount:a,suppressScrollEvent:!0})}_smoothScroll(){if(this._isDisposed||this._smoothScrollState.origin===-1||this._smoothScrollState.target===-1)return;const h=this._smoothScrollPercent();this._viewportElement.scrollTop=this._smoothScrollState.origin+Math.round(h*(this._smoothScrollState.target-this._smoothScrollState.origin)),h<1?this._coreBrowserService.window.requestAnimationFrame(()=>this._smoothScroll()):this._clearSmoothScrollState()}_smoothScrollPercent(){return this._optionsService.rawOptions.smoothScrollDuration&&this._smoothScrollState.startTime?Math.max(Math.min((Date.now()-this._smoothScrollState.startTime)/this._optionsService.rawOptions.smoothScrollDuration,1),0):1}_clearSmoothScrollState(){this._smoothScrollState.startTime=0,this._smoothScrollState.origin=-1,this._smoothScrollState.target=-1}_bubbleScroll(h,a){const u=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(a<0&&this._viewportElement.scrollTop!==0||a>0&&u<this._lastRecordedBufferHeight)||(h.cancelable&&h.preventDefault(),!1)}handleWheel(h){const a=this._getPixelsScrolled(h);return a!==0&&(this._optionsService.rawOptions.smoothScrollDuration?(this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target===-1?this._smoothScrollState.target=this._viewportElement.scrollTop+a:this._smoothScrollState.target+=a,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()):this._viewportElement.scrollTop+=a,this._bubbleScroll(h,a))}scrollLines(h){if(h!==0)if(this._optionsService.rawOptions.smoothScrollDuration){const a=h*this._currentRowHeight;this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target=this._smoothScrollState.origin+a,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()}else this._onRequestScrollLines.fire({amount:h,suppressScrollEvent:!1})}_getPixelsScrolled(h){if(h.deltaY===0||h.shiftKey)return 0;let a=this._applyScrollModifier(h.deltaY,h);return h.deltaMode===WheelEvent.DOM_DELTA_LINE?a*=this._currentRowHeight:h.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(a*=this._currentRowHeight*this._bufferService.rows),a}getBufferElements(h,a){var u;let g,v="";const y=[],E=a??this._bufferService.buffer.lines.length,C=this._bufferService.buffer.lines;for(let k=h;k<E;k++){const L=C.get(k);if(!L)continue;const T=(u=C.get(k+1))===null||u===void 0?void 0:u.isWrapped;if(v+=L.translateToString(!T),!T||k===C.length-1){const x=document.createElement("div");x.textContent=v,y.push(x),v.length>0&&(g=x),v=""}}return{bufferElements:y,cursorElement:g}}getLinesScrolled(h){if(h.deltaY===0||h.shiftKey)return 0;let a=this._applyScrollModifier(h.deltaY,h);return h.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(a/=this._currentRowHeight+0,this._wheelPartialScroll+=a,a=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):h.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(a*=this._bufferService.rows),a}_applyScrollModifier(h,a){const u=this._optionsService.rawOptions.fastScrollModifier;return u==="alt"&&a.altKey||u==="ctrl"&&a.ctrlKey||u==="shift"&&a.shiftKey?h*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:h*this._optionsService.rawOptions.scrollSensitivity}handleTouchStart(h){this._lastTouchY=h.touches[0].pageY}handleTouchMove(h){const a=this._lastTouchY-h.touches[0].pageY;return this._lastTouchY=h.touches[0].pageY,a!==0&&(this._viewportElement.scrollTop+=a,this._bubbleScroll(h,a))}};i.Viewport=n=c([f(2,S.IBufferService),f(3,S.IOptionsService),f(4,p.ICharSizeService),f(5,p.IRenderService),f(6,p.ICoreBrowserService),f(7,p.IThemeService)],n)},3107:function(_,i,r){var c=this&&this.__decorate||function(n,h,a,u){var g,v=arguments.length,y=v<3?h:u===null?u=Object.getOwnPropertyDescriptor(h,a):u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(n,h,a,u);else for(var E=n.length-1;E>=0;E--)(g=n[E])&&(y=(v<3?g(y):v>3?g(h,a,y):g(h,a))||y);return v>3&&y&&Object.defineProperty(h,a,y),y},f=this&&this.__param||function(n,h){return function(a,u){h(a,u,n)}};Object.defineProperty(i,"__esModule",{value:!0}),i.BufferDecorationRenderer=void 0;const l=r(3656),p=r(4725),b=r(844),w=r(2585);let S=i.BufferDecorationRenderer=class extends b.Disposable{constructor(n,h,a,u){super(),this._screenElement=n,this._bufferService=h,this._decorationService=a,this._renderService=u,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this.register(this._renderService.onRenderedViewportChange(()=>this._doRefreshDecorations())),this.register(this._renderService.onDimensionsChange(()=>{this._dimensionsChanged=!0,this._queueRefresh()})),this.register((0,l.addDisposableDomListener)(window,"resize",()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt})),this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh())),this.register(this._decorationService.onDecorationRemoved(g=>this._removeDecoration(g))),this.register((0,b.toDisposable)(()=>{this._container.remove(),this._decorationElements.clear()}))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback(()=>{this._doRefreshDecorations(),this._animationFrame=void 0}))}_doRefreshDecorations(){for(const n of this._decorationService.decorations)this._renderDecoration(n);this._dimensionsChanged=!1}_renderDecoration(n){this._refreshStyle(n),this._dimensionsChanged&&this._refreshXPosition(n)}_createElement(n){var h,a;const u=document.createElement("div");u.classList.add("xterm-decoration"),u.classList.toggle("xterm-decoration-top-layer",((h=n==null?void 0:n.options)===null||h===void 0?void 0:h.layer)==="top"),u.style.width=`${Math.round((n.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,u.style.height=(n.options.height||1)*this._renderService.dimensions.css.cell.height+"px",u.style.top=(n.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height+"px",u.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;const g=(a=n.options.x)!==null&&a!==void 0?a:0;return g&&g>this._bufferService.cols&&(u.style.display="none"),this._refreshXPosition(n,u),u}_refreshStyle(n){const h=n.marker.line-this._bufferService.buffers.active.ydisp;if(h<0||h>=this._bufferService.rows)n.element&&(n.element.style.display="none",n.onRenderEmitter.fire(n.element));else{let a=this._decorationElements.get(n);a||(a=this._createElement(n),n.element=a,this._decorationElements.set(n,a),this._container.appendChild(a),n.onDispose(()=>{this._decorationElements.delete(n),a.remove()})),a.style.top=h*this._renderService.dimensions.css.cell.height+"px",a.style.display=this._altBufferIsActive?"none":"block",n.onRenderEmitter.fire(a)}}_refreshXPosition(n,h=n.element){var a;if(!h)return;const u=(a=n.options.x)!==null&&a!==void 0?a:0;(n.options.anchor||"left")==="right"?h.style.right=u?u*this._renderService.dimensions.css.cell.width+"px":"":h.style.left=u?u*this._renderService.dimensions.css.cell.width+"px":""}_removeDecoration(n){var h;(h=this._decorationElements.get(n))===null||h===void 0||h.remove(),this._decorationElements.delete(n),n.dispose()}};i.BufferDecorationRenderer=S=c([f(1,w.IBufferService),f(2,w.IDecorationService),f(3,p.IRenderService)],S)},5871:(_,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ColorZoneStore=void 0,i.ColorZoneStore=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(r){if(r.options.overviewRulerOptions){for(const c of this._zones)if(c.color===r.options.overviewRulerOptions.color&&c.position===r.options.overviewRulerOptions.position){if(this._lineIntersectsZone(c,r.marker.line))return;if(this._lineAdjacentToZone(c,r.marker.line,r.options.overviewRulerOptions.position))return void this._addLineToZone(c,r.marker.line)}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=r.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=r.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=r.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=r.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:r.options.overviewRulerOptions.color,position:r.options.overviewRulerOptions.position,startBufferLine:r.marker.line,endBufferLine:r.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(r){this._linePadding=r}_lineIntersectsZone(r,c){return c>=r.startBufferLine&&c<=r.endBufferLine}_lineAdjacentToZone(r,c,f){return c>=r.startBufferLine-this._linePadding[f||"full"]&&c<=r.endBufferLine+this._linePadding[f||"full"]}_addLineToZone(r,c){r.startBufferLine=Math.min(r.startBufferLine,c),r.endBufferLine=Math.max(r.endBufferLine,c)}}},5744:function(_,i,r){var c=this&&this.__decorate||function(g,v,y,E){var C,k=arguments.length,L=k<3?v:E===null?E=Object.getOwnPropertyDescriptor(v,y):E;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(g,v,y,E);else for(var T=g.length-1;T>=0;T--)(C=g[T])&&(L=(k<3?C(L):k>3?C(v,y,L):C(v,y))||L);return k>3&&L&&Object.defineProperty(v,y,L),L},f=this&&this.__param||function(g,v){return function(y,E){v(y,E,g)}};Object.defineProperty(i,"__esModule",{value:!0}),i.OverviewRulerRenderer=void 0;const l=r(5871),p=r(3656),b=r(4725),w=r(844),S=r(2585),n={full:0,left:0,center:0,right:0},h={full:0,left:0,center:0,right:0},a={full:0,left:0,center:0,right:0};let u=i.OverviewRulerRenderer=class extends w.Disposable{get _width(){return this._optionsService.options.overviewRulerWidth||0}constructor(g,v,y,E,C,k,L){var T;super(),this._viewportElement=g,this._screenElement=v,this._bufferService=y,this._decorationService=E,this._renderService=C,this._optionsService=k,this._coreBrowseService=L,this._colorZoneStore=new l.ColorZoneStore,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=document.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),(T=this._viewportElement.parentElement)===null||T===void 0||T.insertBefore(this._canvas,this._viewportElement);const x=this._canvas.getContext("2d");if(!x)throw new Error("Ctx cannot be null");this._ctx=x,this._registerDecorationListeners(),this._registerBufferChangeListeners(),this._registerDimensionChangeListeners(),this.register((0,w.toDisposable)(()=>{var O;(O=this._canvas)===null||O===void 0||O.remove()}))}_registerDecorationListeners(){this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh(void 0,!0))),this.register(this._decorationService.onDecorationRemoved(()=>this._queueRefresh(void 0,!0)))}_registerBufferChangeListeners(){this.register(this._renderService.onRenderedViewportChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"})),this.register(this._bufferService.onScroll(()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())}))}_registerDimensionChangeListeners(){this.register(this._renderService.onRender(()=>{this._containerHeight&&this._containerHeight===this._screenElement.clientHeight||(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)})),this.register(this._optionsService.onSpecificOptionChange("overviewRulerWidth",()=>this._queueRefresh(!0))),this.register((0,p.addDisposableDomListener)(this._coreBrowseService.window,"resize",()=>this._queueRefresh(!0))),this._queueRefresh(!0)}_refreshDrawConstants(){const g=Math.floor(this._canvas.width/3),v=Math.ceil(this._canvas.width/3);h.full=this._canvas.width,h.left=g,h.center=v,h.right=g,this._refreshDrawHeightConstants(),a.full=0,a.left=0,a.center=h.left,a.right=h.left+h.center}_refreshDrawHeightConstants(){n.full=Math.round(2*this._coreBrowseService.dpr);const g=this._canvas.height/this._bufferService.buffer.lines.length,v=Math.round(Math.max(Math.min(g,12),6)*this._coreBrowseService.dpr);n.left=v,n.center=v,n.right=v}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*n.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*n.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*n.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*n.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowseService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowseService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(const v of this._decorationService.decorations)this._colorZoneStore.addDecoration(v);this._ctx.lineWidth=1;const g=this._colorZoneStore.zones;for(const v of g)v.position!=="full"&&this._renderColorZone(v);for(const v of g)v.position==="full"&&this._renderColorZone(v);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderColorZone(g){this._ctx.fillStyle=g.color,this._ctx.fillRect(a[g.position||"full"],Math.round((this._canvas.height-1)*(g.startBufferLine/this._bufferService.buffers.active.lines.length)-n[g.position||"full"]/2),h[g.position||"full"],Math.round((this._canvas.height-1)*((g.endBufferLine-g.startBufferLine)/this._bufferService.buffers.active.lines.length)+n[g.position||"full"]))}_queueRefresh(g,v){this._shouldUpdateDimensions=g||this._shouldUpdateDimensions,this._shouldUpdateAnchor=v||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowseService.window.requestAnimationFrame(()=>{this._refreshDecorations(),this._animationFrame=void 0}))}};i.OverviewRulerRenderer=u=c([f(2,S.IBufferService),f(3,S.IDecorationService),f(4,b.IRenderService),f(5,S.IOptionsService),f(6,b.ICoreBrowserService)],u)},2950:function(_,i,r){var c=this&&this.__decorate||function(S,n,h,a){var u,g=arguments.length,v=g<3?n:a===null?a=Object.getOwnPropertyDescriptor(n,h):a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")v=Reflect.decorate(S,n,h,a);else for(var y=S.length-1;y>=0;y--)(u=S[y])&&(v=(g<3?u(v):g>3?u(n,h,v):u(n,h))||v);return g>3&&v&&Object.defineProperty(n,h,v),v},f=this&&this.__param||function(S,n){return function(h,a){n(h,a,S)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CompositionHelper=void 0;const l=r(4725),p=r(2585),b=r(2584);let w=i.CompositionHelper=class{get isComposing(){return this._isComposing}constructor(S,n,h,a,u,g){this._textarea=S,this._compositionView=n,this._bufferService=h,this._optionsService=a,this._coreService=u,this._renderService=g,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(S){this._compositionView.textContent=S.data,this.updateCompositionElements(),setTimeout(()=>{this._compositionPosition.end=this._textarea.value.length},0)}compositionend(){this._finalizeComposition(!0)}keydown(S){if(this._isComposing||this._isSendingComposition){if(S.keyCode===229||S.keyCode===16||S.keyCode===17||S.keyCode===18)return!1;this._finalizeComposition(!1)}return S.keyCode!==229||(this._handleAnyTextareaChanges(),!1)}_finalizeComposition(S){if(this._compositionView.classList.remove("active"),this._isComposing=!1,S){const n={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(()=>{if(this._isSendingComposition){let h;this._isSendingComposition=!1,n.start+=this._dataAlreadySent.length,h=this._isComposing?this._textarea.value.substring(n.start,n.end):this._textarea.value.substring(n.start),h.length>0&&this._coreService.triggerDataEvent(h,!0)}},0)}else{this._isSendingComposition=!1;const n=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(n,!0)}}_handleAnyTextareaChanges(){const S=this._textarea.value;setTimeout(()=>{if(!this._isComposing){const n=this._textarea.value,h=n.replace(S,"");this._dataAlreadySent=h,n.length>S.length?this._coreService.triggerDataEvent(h,!0):n.length<S.length?this._coreService.triggerDataEvent(`${b.C0.DEL}`,!0):n.length===S.length&&n!==S&&this._coreService.triggerDataEvent(n,!0)}},0)}updateCompositionElements(S){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){const n=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),h=this._renderService.dimensions.css.cell.height,a=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,u=n*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=u+"px",this._compositionView.style.top=a+"px",this._compositionView.style.height=h+"px",this._compositionView.style.lineHeight=h+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";const g=this._compositionView.getBoundingClientRect();this._textarea.style.left=u+"px",this._textarea.style.top=a+"px",this._textarea.style.width=Math.max(g.width,1)+"px",this._textarea.style.height=Math.max(g.height,1)+"px",this._textarea.style.lineHeight=g.height+"px"}S||setTimeout(()=>this.updateCompositionElements(!0),0)}}};i.CompositionHelper=w=c([f(2,p.IBufferService),f(3,p.IOptionsService),f(4,p.ICoreService),f(5,l.IRenderService)],w)},9806:(_,i)=>{function r(c,f,l){const p=l.getBoundingClientRect(),b=c.getComputedStyle(l),w=parseInt(b.getPropertyValue("padding-left")),S=parseInt(b.getPropertyValue("padding-top"));return[f.clientX-p.left-w,f.clientY-p.top-S]}Object.defineProperty(i,"__esModule",{value:!0}),i.getCoords=i.getCoordsRelativeToElement=void 0,i.getCoordsRelativeToElement=r,i.getCoords=function(c,f,l,p,b,w,S,n,h){if(!w)return;const a=r(c,f,l);return a?(a[0]=Math.ceil((a[0]+(h?S/2:0))/S),a[1]=Math.ceil(a[1]/n),a[0]=Math.min(Math.max(a[0],1),p+(h?1:0)),a[1]=Math.min(Math.max(a[1],1),b),a):void 0}},9504:(_,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.moveToCellSequence=void 0;const c=r(2584);function f(n,h,a,u){const g=n-l(n,a),v=h-l(h,a),y=Math.abs(g-v)-function(E,C,k){let L=0;const T=E-l(E,k),x=C-l(C,k);for(let O=0;O<Math.abs(T-x);O++){const U=p(E,C)==="A"?-1:1,$=k.buffer.lines.get(T+U*O);$!=null&&$.isWrapped&&L++}return L}(n,h,a);return S(y,w(p(n,h),u))}function l(n,h){let a=0,u=h.buffer.lines.get(n),g=u==null?void 0:u.isWrapped;for(;g&&n>=0&&n<h.rows;)a++,u=h.buffer.lines.get(--n),g=u==null?void 0:u.isWrapped;return a}function p(n,h){return n>h?"A":"B"}function b(n,h,a,u,g,v){let y=n,E=h,C="";for(;y!==a||E!==u;)y+=g?1:-1,g&&y>v.cols-1?(C+=v.buffer.translateBufferLineToString(E,!1,n,y),y=0,n=0,E++):!g&&y<0&&(C+=v.buffer.translateBufferLineToString(E,!1,0,n+1),y=v.cols-1,n=y,E--);return C+v.buffer.translateBufferLineToString(E,!1,n,y)}function w(n,h){const a=h?"O":"[";return c.C0.ESC+a+n}function S(n,h){n=Math.floor(n);let a="";for(let u=0;u<n;u++)a+=h;return a}i.moveToCellSequence=function(n,h,a,u){const g=a.buffer.x,v=a.buffer.y;if(!a.buffer.hasScrollback)return function(C,k,L,T,x,O){return f(k,T,x,O).length===0?"":S(b(C,k,C,k-l(k,x),!1,x).length,w("D",O))}(g,v,0,h,a,u)+f(v,h,a,u)+function(C,k,L,T,x,O){let U;U=f(k,T,x,O).length>0?T-l(T,x):k;const $=T,q=function(F,D,M,H,I,X){let J;return J=f(M,H,I,X).length>0?H-l(H,I):D,F<M&&J<=H||F>=M&&J<H?"C":"D"}(C,k,L,T,x,O);return S(b(C,U,L,$,q==="C",x).length,w(q,O))}(g,v,n,h,a,u);let y;if(v===h)return y=g>n?"D":"C",S(Math.abs(g-n),w(y,u));y=v>h?"D":"C";const E=Math.abs(v-h);return S(function(C,k){return k.cols-C}(v>h?n:g,a)+(E-1)*a.cols+1+((v>h?g:n)-1),w(y,u))}},1296:function(_,i,r){var c=this&&this.__decorate||function(x,O,U,$){var q,F=arguments.length,D=F<3?O:$===null?$=Object.getOwnPropertyDescriptor(O,U):$;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")D=Reflect.decorate(x,O,U,$);else for(var M=x.length-1;M>=0;M--)(q=x[M])&&(D=(F<3?q(D):F>3?q(O,U,D):q(O,U))||D);return F>3&&D&&Object.defineProperty(O,U,D),D},f=this&&this.__param||function(x,O){return function(U,$){O(U,$,x)}};Object.defineProperty(i,"__esModule",{value:!0}),i.DomRenderer=void 0;const l=r(3787),p=r(2550),b=r(2223),w=r(6171),S=r(4725),n=r(8055),h=r(8460),a=r(844),u=r(2585),g="xterm-dom-renderer-owner-",v="xterm-rows",y="xterm-fg-",E="xterm-bg-",C="xterm-focus",k="xterm-selection";let L=1,T=i.DomRenderer=class extends a.Disposable{constructor(x,O,U,$,q,F,D,M,H,I){super(),this._element=x,this._screenElement=O,this._viewportElement=U,this._linkifier2=$,this._charSizeService=F,this._optionsService=D,this._bufferService=M,this._coreBrowserService=H,this._themeService=I,this._terminalClass=L++,this._rowElements=[],this.onRequestRedraw=this.register(new h.EventEmitter).event,this._rowContainer=document.createElement("div"),this._rowContainer.classList.add(v),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=document.createElement("div"),this._selectionContainer.classList.add(k),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=(0,w.createRenderDimensions)(),this._updateDimensions(),this.register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._themeService.onChangeColors(X=>this._injectCss(X))),this._injectCss(this._themeService.colors),this._rowFactory=q.createInstance(l.DomRendererRowFactory,document),this._element.classList.add(g+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this.register(this._linkifier2.onShowLinkUnderline(X=>this._handleLinkHover(X))),this.register(this._linkifier2.onHideLinkUnderline(X=>this._handleLinkLeave(X))),this.register((0,a.toDisposable)(()=>{this._element.classList.remove(g+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()})),this._widthCache=new p.WidthCache(document),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){const x=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*x,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*x),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/x),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/x),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(const U of this._rowElements)U.style.width=`${this.dimensions.css.canvas.width}px`,U.style.height=`${this.dimensions.css.cell.height}px`,U.style.lineHeight=`${this.dimensions.css.cell.height}px`,U.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));const O=`${this._terminalSelector} .${v} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=O,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(x){this._themeStyleElement||(this._themeStyleElement=document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let O=`${this._terminalSelector} .${v} { color: ${x.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;O+=`${this._terminalSelector} .${v} .xterm-dim { color: ${n.color.multiplyOpacity(x.foreground,.5).css};}`,O+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`,O+="@keyframes blink_box_shadow_"+this._terminalClass+" { 50% {  border-bottom-style: hidden; }}",O+="@keyframes blink_block_"+this._terminalClass+` { 0% {  background-color: ${x.cursor.css};  color: ${x.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${x.cursor.css}; }}`,O+=`${this._terminalSelector} .${v}.${C} .xterm-cursor.xterm-cursor-blink:not(.xterm-cursor-block) { animation: blink_box_shadow_`+this._terminalClass+` 1s step-end infinite;}${this._terminalSelector} .${v}.${C} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: blink_block_`+this._terminalClass+` 1s step-end infinite;}${this._terminalSelector} .${v} .xterm-cursor.xterm-cursor-block { background-color: ${x.cursor.css}; color: ${x.cursorAccent.css};}${this._terminalSelector} .${v} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${x.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${v} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${x.cursor.css} inset;}${this._terminalSelector} .${v} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${x.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,O+=`${this._terminalSelector} .${k} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${k} div { position: absolute; background-color: ${x.selectionBackgroundOpaque.css};}${this._terminalSelector} .${k} div { position: absolute; background-color: ${x.selectionInactiveBackgroundOpaque.css};}`;for(const[U,$]of x.ansi.entries())O+=`${this._terminalSelector} .${y}${U} { color: ${$.css}; }${this._terminalSelector} .${y}${U}.xterm-dim { color: ${n.color.multiplyOpacity($,.5).css}; }${this._terminalSelector} .${E}${U} { background-color: ${$.css}; }`;O+=`${this._terminalSelector} .${y}${b.INVERTED_DEFAULT_COLOR} { color: ${n.color.opaque(x.background).css}; }${this._terminalSelector} .${y}${b.INVERTED_DEFAULT_COLOR}.xterm-dim { color: ${n.color.multiplyOpacity(n.color.opaque(x.background),.5).css}; }${this._terminalSelector} .${E}${b.INVERTED_DEFAULT_COLOR} { background-color: ${x.foreground.css}; }`,this._themeStyleElement.textContent=O}_setDefaultSpacing(){const x=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${x}px`,this._rowFactory.defaultSpacing=x}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(x,O){for(let U=this._rowElements.length;U<=O;U++){const $=document.createElement("div");this._rowContainer.appendChild($),this._rowElements.push($)}for(;this._rowElements.length>O;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(x,O){this._refreshRowElements(x,O),this._updateDimensions()}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(C)}handleFocus(){this._rowContainer.classList.add(C),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(x,O,U){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(x,O,U),this.renderRows(0,this._bufferService.rows-1),!x||!O)return;const $=x[1]-this._bufferService.buffer.ydisp,q=O[1]-this._bufferService.buffer.ydisp,F=Math.max($,0),D=Math.min(q,this._bufferService.rows-1);if(F>=this._bufferService.rows||D<0)return;const M=document.createDocumentFragment();if(U){const H=x[0]>O[0];M.appendChild(this._createSelectionElement(F,H?O[0]:x[0],H?x[0]:O[0],D-F+1))}else{const H=$===F?x[0]:0,I=F===q?O[0]:this._bufferService.cols;M.appendChild(this._createSelectionElement(F,H,I));const X=D-F-1;if(M.appendChild(this._createSelectionElement(F+1,0,this._bufferService.cols,X)),F!==D){const J=q===D?O[0]:this._bufferService.cols;M.appendChild(this._createSelectionElement(D,0,J))}}this._selectionContainer.appendChild(M)}_createSelectionElement(x,O,U,$=1){const q=document.createElement("div");return q.style.height=$*this.dimensions.css.cell.height+"px",q.style.top=x*this.dimensions.css.cell.height+"px",q.style.left=O*this.dimensions.css.cell.width+"px",q.style.width=this.dimensions.css.cell.width*(U-O)+"px",q}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(const x of this._rowElements)x.replaceChildren()}renderRows(x,O){const U=this._bufferService.buffer,$=U.ybase+U.y,q=Math.min(U.x,this._bufferService.cols-1),F=this._optionsService.rawOptions.cursorBlink,D=this._optionsService.rawOptions.cursorStyle,M=this._optionsService.rawOptions.cursorInactiveStyle;for(let H=x;H<=O;H++){const I=H+U.ydisp,X=this._rowElements[H],J=U.lines.get(I);if(!X||!J)break;X.replaceChildren(...this._rowFactory.createRow(J,I,I===$,D,M,q,F,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${g}${this._terminalClass}`}_handleLinkHover(x){this._setCellUnderline(x.x1,x.x2,x.y1,x.y2,x.cols,!0)}_handleLinkLeave(x){this._setCellUnderline(x.x1,x.x2,x.y1,x.y2,x.cols,!1)}_setCellUnderline(x,O,U,$,q,F){U<0&&(x=0),$<0&&(O=0);const D=this._bufferService.rows-1;U=Math.max(Math.min(U,D),0),$=Math.max(Math.min($,D),0),q=Math.min(q,this._bufferService.cols);const M=this._bufferService.buffer,H=M.ybase+M.y,I=Math.min(M.x,q-1),X=this._optionsService.rawOptions.cursorBlink,J=this._optionsService.rawOptions.cursorStyle,ie=this._optionsService.rawOptions.cursorInactiveStyle;for(let te=U;te<=$;++te){const fe=te+M.ydisp,B=this._rowElements[te],z=M.lines.get(fe);if(!B||!z)break;B.replaceChildren(...this._rowFactory.createRow(z,fe,fe===H,J,ie,I,X,this.dimensions.css.cell.width,this._widthCache,F?te===U?x:0:-1,F?(te===$?O:q)-1:-1))}}};i.DomRenderer=T=c([f(4,u.IInstantiationService),f(5,S.ICharSizeService),f(6,u.IOptionsService),f(7,u.IBufferService),f(8,S.ICoreBrowserService),f(9,S.IThemeService)],T)},3787:function(_,i,r){var c=this&&this.__decorate||function(y,E,C,k){var L,T=arguments.length,x=T<3?E:k===null?k=Object.getOwnPropertyDescriptor(E,C):k;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(y,E,C,k);else for(var O=y.length-1;O>=0;O--)(L=y[O])&&(x=(T<3?L(x):T>3?L(E,C,x):L(E,C))||x);return T>3&&x&&Object.defineProperty(E,C,x),x},f=this&&this.__param||function(y,E){return function(C,k){E(C,k,y)}};Object.defineProperty(i,"__esModule",{value:!0}),i.DomRendererRowFactory=void 0;const l=r(2223),p=r(643),b=r(511),w=r(2585),S=r(8055),n=r(4725),h=r(4269),a=r(6171),u=r(3734);let g=i.DomRendererRowFactory=class{constructor(y,E,C,k,L,T,x){this._document=y,this._characterJoinerService=E,this._optionsService=C,this._coreBrowserService=k,this._coreService=L,this._decorationService=T,this._themeService=x,this._workCell=new b.CellData,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(y,E,C){this._selectionStart=y,this._selectionEnd=E,this._columnSelectMode=C}createRow(y,E,C,k,L,T,x,O,U,$,q){const F=[],D=this._characterJoinerService.getJoinedCharacters(E),M=this._themeService.colors;let H,I=y.getNoBgTrimmedLength();C&&I<T+1&&(I=T+1);let X=0,J="",ie=0,te=0,fe=0,B=!1,z=0,Z=!1,V=0;const oe=[],ee=$!==-1&&q!==-1;for(let me=0;me<I;me++){y.loadCell(me,this._workCell);let we=this._workCell.getWidth();if(we===0)continue;let ke=!1,Xe=me,ue=this._workCell;if(D.length>0&&me===D[0][0]){ke=!0;const Se=D.shift();ue=new h.JoinedCellData(this._workCell,y.translateToString(!0,Se[0],Se[1]),Se[1]-Se[0]),Xe=Se[1]-1,we=ue.getWidth()}const lt=this._isCellInSelection(me,E),Qe=C&&me===T,at=ee&&me>=$&&me<=q;let _t=!1;this._decorationService.forEachDecorationAtCell(me,E,void 0,Se=>{_t=!0});let Oe=ue.getChars()||p.WHITESPACE_CELL_CHAR;if(Oe===" "&&(ue.isUnderline()||ue.isOverline())&&(Oe=" "),V=we*O-U.get(Oe,ue.isBold(),ue.isItalic()),H){if(X&&(lt&&Z||!lt&&!Z&&ue.bg===ie)&&(lt&&Z&&M.selectionForeground||ue.fg===te)&&ue.extended.ext===fe&&at===B&&V===z&&!Qe&&!ke&&!_t){J+=Oe,X++;continue}X&&(H.textContent=J),H=this._document.createElement("span"),X=0,J=""}else H=this._document.createElement("span");if(ie=ue.bg,te=ue.fg,fe=ue.extended.ext,B=at,z=V,Z=lt,ke&&T>=me&&T<=Xe&&(T=me),!this._coreService.isCursorHidden&&Qe){if(oe.push("xterm-cursor"),this._coreBrowserService.isFocused)x&&oe.push("xterm-cursor-blink"),oe.push(k==="bar"?"xterm-cursor-bar":k==="underline"?"xterm-cursor-underline":"xterm-cursor-block");else if(L)switch(L){case"outline":oe.push("xterm-cursor-outline");break;case"block":oe.push("xterm-cursor-block");break;case"bar":oe.push("xterm-cursor-bar");break;case"underline":oe.push("xterm-cursor-underline")}}if(ue.isBold()&&oe.push("xterm-bold"),ue.isItalic()&&oe.push("xterm-italic"),ue.isDim()&&oe.push("xterm-dim"),J=ue.isInvisible()?p.WHITESPACE_CELL_CHAR:ue.getChars()||p.WHITESPACE_CELL_CHAR,ue.isUnderline()&&(oe.push(`xterm-underline-${ue.extended.underlineStyle}`),J===" "&&(J=" "),!ue.isUnderlineColorDefault()))if(ue.isUnderlineColorRGB())H.style.textDecorationColor=`rgb(${u.AttributeData.toColorRGB(ue.getUnderlineColor()).join(",")})`;else{let Se=ue.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&ue.isBold()&&Se<8&&(Se+=8),H.style.textDecorationColor=M.ansi[Se].css}ue.isOverline()&&(oe.push("xterm-overline"),J===" "&&(J=" ")),ue.isStrikethrough()&&oe.push("xterm-strikethrough"),at&&(H.style.textDecoration="underline");let Le=ue.getFgColor(),We=ue.getFgColorMode(),$e=ue.getBgColor(),ct=ue.getBgColorMode();const ht=!!ue.isInverse();if(ht){const Se=Le;Le=$e,$e=Se;const mt=We;We=ct,ct=mt}let Ue,pt,Fe,Ze=!1;switch(this._decorationService.forEachDecorationAtCell(me,E,void 0,Se=>{Se.options.layer!=="top"&&Ze||(Se.backgroundColorRGB&&(ct=50331648,$e=Se.backgroundColorRGB.rgba>>8&16777215,Ue=Se.backgroundColorRGB),Se.foregroundColorRGB&&(We=50331648,Le=Se.foregroundColorRGB.rgba>>8&16777215,pt=Se.foregroundColorRGB),Ze=Se.options.layer==="top")}),!Ze&&lt&&(Ue=this._coreBrowserService.isFocused?M.selectionBackgroundOpaque:M.selectionInactiveBackgroundOpaque,$e=Ue.rgba>>8&16777215,ct=50331648,Ze=!0,M.selectionForeground&&(We=50331648,Le=M.selectionForeground.rgba>>8&16777215,pt=M.selectionForeground)),Ze&&oe.push("xterm-decoration-top"),ct){case 16777216:case 33554432:Fe=M.ansi[$e],oe.push(`xterm-bg-${$e}`);break;case 50331648:Fe=S.rgba.toColor($e>>16,$e>>8&255,255&$e),this._addStyle(H,`background-color:#${v(($e>>>0).toString(16),"0",6)}`);break;default:ht?(Fe=M.foreground,oe.push(`xterm-bg-${l.INVERTED_DEFAULT_COLOR}`)):Fe=M.background}switch(Ue||ue.isDim()&&(Ue=S.color.multiplyOpacity(Fe,.5)),We){case 16777216:case 33554432:ue.isBold()&&Le<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(Le+=8),this._applyMinimumContrast(H,Fe,M.ansi[Le],ue,Ue,void 0)||oe.push(`xterm-fg-${Le}`);break;case 50331648:const Se=S.rgba.toColor(Le>>16&255,Le>>8&255,255&Le);this._applyMinimumContrast(H,Fe,Se,ue,Ue,pt)||this._addStyle(H,`color:#${v(Le.toString(16),"0",6)}`);break;default:this._applyMinimumContrast(H,Fe,M.foreground,ue,Ue,void 0)||ht&&oe.push(`xterm-fg-${l.INVERTED_DEFAULT_COLOR}`)}oe.length&&(H.className=oe.join(" "),oe.length=0),Qe||ke||_t?H.textContent=J:X++,V!==this.defaultSpacing&&(H.style.letterSpacing=`${V}px`),F.push(H),me=Xe}return H&&X&&(H.textContent=J),F}_applyMinimumContrast(y,E,C,k,L,T){if(this._optionsService.rawOptions.minimumContrastRatio===1||(0,a.excludeFromContrastRatioDemands)(k.getCode()))return!1;const x=this._getContrastCache(k);let O;if(L||T||(O=x.getColor(E.rgba,C.rgba)),O===void 0){const U=this._optionsService.rawOptions.minimumContrastRatio/(k.isDim()?2:1);O=S.color.ensureContrastRatio(L||E,T||C,U),x.setColor((L||E).rgba,(T||C).rgba,O??null)}return!!O&&(this._addStyle(y,`color:${O.css}`),!0)}_getContrastCache(y){return y.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(y,E){y.setAttribute("style",`${y.getAttribute("style")||""}${E};`)}_isCellInSelection(y,E){const C=this._selectionStart,k=this._selectionEnd;return!(!C||!k)&&(this._columnSelectMode?C[0]<=k[0]?y>=C[0]&&E>=C[1]&&y<k[0]&&E<=k[1]:y<C[0]&&E>=C[1]&&y>=k[0]&&E<=k[1]:E>C[1]&&E<k[1]||C[1]===k[1]&&E===C[1]&&y>=C[0]&&y<k[0]||C[1]<k[1]&&E===k[1]&&y<k[0]||C[1]<k[1]&&E===C[1]&&y>=C[0])}};function v(y,E,C){for(;y.length<C;)y=E+y;return y}i.DomRendererRowFactory=g=c([f(1,n.ICharacterJoinerService),f(2,w.IOptionsService),f(3,n.ICoreBrowserService),f(4,w.ICoreService),f(5,w.IDecorationService),f(6,n.IThemeService)],g)},2550:(_,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.WidthCache=void 0,i.WidthCache=class{constructor(r){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=r.createElement("div"),this._container.style.position="absolute",this._container.style.top="-50000px",this._container.style.width="50000px",this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";const c=r.createElement("span"),f=r.createElement("span");f.style.fontWeight="bold";const l=r.createElement("span");l.style.fontStyle="italic";const p=r.createElement("span");p.style.fontWeight="bold",p.style.fontStyle="italic",this._measureElements=[c,f,l,p],this._container.appendChild(c),this._container.appendChild(f),this._container.appendChild(l),this._container.appendChild(p),r.body.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(r,c,f,l){r===this._font&&c===this._fontSize&&f===this._weight&&l===this._weightBold||(this._font=r,this._fontSize=c,this._weight=f,this._weightBold=l,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${f}`,this._measureElements[1].style.fontWeight=`${l}`,this._measureElements[2].style.fontWeight=`${f}`,this._measureElements[3].style.fontWeight=`${l}`,this.clear())}get(r,c,f){let l=0;if(!c&&!f&&r.length===1&&(l=r.charCodeAt(0))<256)return this._flat[l]!==-9999?this._flat[l]:this._flat[l]=this._measure(r,0);let p=r;c&&(p+="B"),f&&(p+="I");let b=this._holey.get(p);if(b===void 0){let w=0;c&&(w|=1),f&&(w|=2),b=this._measure(r,w),this._holey.set(p,b)}return b}_measure(r,c){const f=this._measureElements[c];return f.textContent=r.repeat(32),f.offsetWidth/32}}},2223:(_,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.TEXT_BASELINE=i.DIM_OPACITY=i.INVERTED_DEFAULT_COLOR=void 0;const c=r(6114);i.INVERTED_DEFAULT_COLOR=257,i.DIM_OPACITY=.5,i.TEXT_BASELINE=c.isFirefox||c.isLegacyEdge?"bottom":"ideographic"},6171:(_,i)=>{function r(c){return 57508<=c&&c<=57558}Object.defineProperty(i,"__esModule",{value:!0}),i.createRenderDimensions=i.excludeFromContrastRatioDemands=i.isRestrictedPowerlineGlyph=i.isPowerlineGlyph=i.throwIfFalsy=void 0,i.throwIfFalsy=function(c){if(!c)throw new Error("value must not be falsy");return c},i.isPowerlineGlyph=r,i.isRestrictedPowerlineGlyph=function(c){return 57520<=c&&c<=57527},i.excludeFromContrastRatioDemands=function(c){return r(c)||function(f){return 9472<=f&&f<=9631}(c)},i.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}}},456:(_,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.SelectionModel=void 0,i.SelectionModel=class{constructor(r){this._bufferService=r,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){const r=this.selectionStart[0]+this.selectionStartLength;return r>this._bufferService.cols?r%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(r/this._bufferService.cols)-1]:[r%this._bufferService.cols,this.selectionStart[1]+Math.floor(r/this._bufferService.cols)]:[r,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){const r=this.selectionStart[0]+this.selectionStartLength;return r>this._bufferService.cols?[r%this._bufferService.cols,this.selectionStart[1]+Math.floor(r/this._bufferService.cols)]:[Math.max(r,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){const r=this.selectionStart,c=this.selectionEnd;return!(!r||!c)&&(r[1]>c[1]||r[1]===c[1]&&r[0]>c[0])}handleTrim(r){return this.selectionStart&&(this.selectionStart[1]-=r),this.selectionEnd&&(this.selectionEnd[1]-=r),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}}},428:function(_,i,r){var c=this&&this.__decorate||function(n,h,a,u){var g,v=arguments.length,y=v<3?h:u===null?u=Object.getOwnPropertyDescriptor(h,a):u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(n,h,a,u);else for(var E=n.length-1;E>=0;E--)(g=n[E])&&(y=(v<3?g(y):v>3?g(h,a,y):g(h,a))||y);return v>3&&y&&Object.defineProperty(h,a,y),y},f=this&&this.__param||function(n,h){return function(a,u){h(a,u,n)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CharSizeService=void 0;const l=r(2585),p=r(8460),b=r(844);let w=i.CharSizeService=class extends b.Disposable{get hasValidSize(){return this.width>0&&this.height>0}constructor(n,h,a){super(),this._optionsService=a,this.width=0,this.height=0,this._onCharSizeChange=this.register(new p.EventEmitter),this.onCharSizeChange=this._onCharSizeChange.event,this._measureStrategy=new S(n,h,this._optionsService),this.register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],()=>this.measure()))}measure(){const n=this._measureStrategy.measure();n.width===this.width&&n.height===this.height||(this.width=n.width,this.height=n.height,this._onCharSizeChange.fire())}};i.CharSizeService=w=c([f(2,l.IOptionsService)],w);class S{constructor(h,a,u){this._document=h,this._parentElement=a,this._optionsService=u,this._result={width:0,height:0},this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`;const h={height:Number(this._measureElement.offsetHeight),width:Number(this._measureElement.offsetWidth)};return h.width!==0&&h.height!==0&&(this._result.width=h.width/32,this._result.height=Math.ceil(h.height)),this._result}}},4269:function(_,i,r){var c=this&&this.__decorate||function(h,a,u,g){var v,y=arguments.length,E=y<3?a:g===null?g=Object.getOwnPropertyDescriptor(a,u):g;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(h,a,u,g);else for(var C=h.length-1;C>=0;C--)(v=h[C])&&(E=(y<3?v(E):y>3?v(a,u,E):v(a,u))||E);return y>3&&E&&Object.defineProperty(a,u,E),E},f=this&&this.__param||function(h,a){return function(u,g){a(u,g,h)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CharacterJoinerService=i.JoinedCellData=void 0;const l=r(3734),p=r(643),b=r(511),w=r(2585);class S extends l.AttributeData{constructor(a,u,g){super(),this.content=0,this.combinedData="",this.fg=a.fg,this.bg=a.bg,this.combinedData=u,this._width=g}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(a){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}i.JoinedCellData=S;let n=i.CharacterJoinerService=class yr{constructor(a){this._bufferService=a,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new b.CellData}register(a){const u={id:this._nextCharacterJoinerId++,handler:a};return this._characterJoiners.push(u),u.id}deregister(a){for(let u=0;u<this._characterJoiners.length;u++)if(this._characterJoiners[u].id===a)return this._characterJoiners.splice(u,1),!0;return!1}getJoinedCharacters(a){if(this._characterJoiners.length===0)return[];const u=this._bufferService.buffer.lines.get(a);if(!u||u.length===0)return[];const g=[],v=u.translateToString(!0);let y=0,E=0,C=0,k=u.getFg(0),L=u.getBg(0);for(let T=0;T<u.getTrimmedLength();T++)if(u.loadCell(T,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==k||this._workCell.bg!==L){if(T-y>1){const x=this._getJoinedRanges(v,C,E,u,y);for(let O=0;O<x.length;O++)g.push(x[O])}y=T,C=E,k=this._workCell.fg,L=this._workCell.bg}E+=this._workCell.getChars().length||p.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-y>1){const T=this._getJoinedRanges(v,C,E,u,y);for(let x=0;x<T.length;x++)g.push(T[x])}return g}_getJoinedRanges(a,u,g,v,y){const E=a.substring(u,g);let C=[];try{C=this._characterJoiners[0].handler(E)}catch(k){console.error(k)}for(let k=1;k<this._characterJoiners.length;k++)try{const L=this._characterJoiners[k].handler(E);for(let T=0;T<L.length;T++)yr._mergeRanges(C,L[T])}catch(L){console.error(L)}return this._stringRangesToCellRanges(C,v,y),C}_stringRangesToCellRanges(a,u,g){let v=0,y=!1,E=0,C=a[v];if(C){for(let k=g;k<this._bufferService.cols;k++){const L=u.getWidth(k),T=u.getString(k).length||p.WHITESPACE_CELL_CHAR.length;if(L!==0){if(!y&&C[0]<=E&&(C[0]=k,y=!0),C[1]<=E){if(C[1]=k,C=a[++v],!C)break;C[0]<=E?(C[0]=k,y=!0):y=!1}E+=T}}C&&(C[1]=this._bufferService.cols)}}static _mergeRanges(a,u){let g=!1;for(let v=0;v<a.length;v++){const y=a[v];if(g){if(u[1]<=y[0])return a[v-1][1]=u[1],a;if(u[1]<=y[1])return a[v-1][1]=Math.max(u[1],y[1]),a.splice(v,1),a;a.splice(v,1),v--}else{if(u[1]<=y[0])return a.splice(v,0,u),a;if(u[1]<=y[1])return y[0]=Math.min(u[0],y[0]),a;u[0]<y[1]&&(y[0]=Math.min(u[0],y[0]),g=!0)}}return g?a[a.length-1][1]=u[1]:a.push(u),a}};i.CharacterJoinerService=n=c([f(0,w.IBufferService)],n)},5114:(_,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CoreBrowserService=void 0,i.CoreBrowserService=class{constructor(r,c){this._textarea=r,this.window=c,this._isFocused=!1,this._cachedIsFocused=void 0,this._textarea.addEventListener("focus",()=>this._isFocused=!0),this._textarea.addEventListener("blur",()=>this._isFocused=!1)}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask(()=>this._cachedIsFocused=void 0)),this._cachedIsFocused}}},8934:function(_,i,r){var c=this&&this.__decorate||function(w,S,n,h){var a,u=arguments.length,g=u<3?S:h===null?h=Object.getOwnPropertyDescriptor(S,n):h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(w,S,n,h);else for(var v=w.length-1;v>=0;v--)(a=w[v])&&(g=(u<3?a(g):u>3?a(S,n,g):a(S,n))||g);return u>3&&g&&Object.defineProperty(S,n,g),g},f=this&&this.__param||function(w,S){return function(n,h){S(n,h,w)}};Object.defineProperty(i,"__esModule",{value:!0}),i.MouseService=void 0;const l=r(4725),p=r(9806);let b=i.MouseService=class{constructor(w,S){this._renderService=w,this._charSizeService=S}getCoords(w,S,n,h,a){return(0,p.getCoords)(window,w,S,n,h,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,a)}getMouseReportCoords(w,S){const n=(0,p.getCoordsRelativeToElement)(window,w,S);if(this._charSizeService.hasValidSize)return n[0]=Math.min(Math.max(n[0],0),this._renderService.dimensions.css.canvas.width-1),n[1]=Math.min(Math.max(n[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(n[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(n[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(n[0]),y:Math.floor(n[1])}}};i.MouseService=b=c([f(0,l.IRenderService),f(1,l.ICharSizeService)],b)},3230:function(_,i,r){var c=this&&this.__decorate||function(g,v,y,E){var C,k=arguments.length,L=k<3?v:E===null?E=Object.getOwnPropertyDescriptor(v,y):E;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(g,v,y,E);else for(var T=g.length-1;T>=0;T--)(C=g[T])&&(L=(k<3?C(L):k>3?C(v,y,L):C(v,y))||L);return k>3&&L&&Object.defineProperty(v,y,L),L},f=this&&this.__param||function(g,v){return function(y,E){v(y,E,g)}};Object.defineProperty(i,"__esModule",{value:!0}),i.RenderService=void 0;const l=r(3656),p=r(6193),b=r(5596),w=r(4725),S=r(8460),n=r(844),h=r(7226),a=r(2585);let u=i.RenderService=class extends n.Disposable{get dimensions(){return this._renderer.value.dimensions}constructor(g,v,y,E,C,k,L,T){if(super(),this._rowCount=g,this._charSizeService=E,this._renderer=this.register(new n.MutableDisposable),this._pausedResizeTask=new h.DebouncedIdleTask,this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this.register(new S.EventEmitter),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this.register(new S.EventEmitter),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this.register(new S.EventEmitter),this.onRender=this._onRender.event,this._onRefreshRequest=this.register(new S.EventEmitter),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new p.RenderDebouncer(L.window,(x,O)=>this._renderRows(x,O)),this.register(this._renderDebouncer),this._screenDprMonitor=new b.ScreenDprMonitor(L.window),this._screenDprMonitor.setListener(()=>this.handleDevicePixelRatioChange()),this.register(this._screenDprMonitor),this.register(k.onResize(()=>this._fullRefresh())),this.register(k.buffers.onBufferActivate(()=>{var x;return(x=this._renderer.value)===null||x===void 0?void 0:x.clear()})),this.register(y.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._charSizeService.onCharSizeChange(()=>this.handleCharSizeChanged())),this.register(C.onDecorationRegistered(()=>this._fullRefresh())),this.register(C.onDecorationRemoved(()=>this._fullRefresh())),this.register(y.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio"],()=>{this.clear(),this.handleResize(k.cols,k.rows),this._fullRefresh()})),this.register(y.onMultipleOptionChange(["cursorBlink","cursorStyle"],()=>this.refreshRows(k.buffer.y,k.buffer.y,!0))),this.register((0,l.addDisposableDomListener)(L.window,"resize",()=>this.handleDevicePixelRatioChange())),this.register(T.onChangeColors(()=>this._fullRefresh())),"IntersectionObserver"in L.window){const x=new L.window.IntersectionObserver(O=>this._handleIntersectionChange(O[O.length-1]),{threshold:0});x.observe(v),this.register({dispose:()=>x.disconnect()})}}_handleIntersectionChange(g){this._isPaused=g.isIntersecting===void 0?g.intersectionRatio===0:!g.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(g,v,y=!1){this._isPaused?this._needsFullRefresh=!0:(y||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(g,v,this._rowCount))}_renderRows(g,v){this._renderer.value&&(g=Math.min(g,this._rowCount-1),v=Math.min(v,this._rowCount-1),this._renderer.value.renderRows(g,v),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:g,end:v}),this._onRender.fire({start:g,end:v}),this._isNextRenderRedrawOnly=!0)}resize(g,v){this._rowCount=v,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(g){this._renderer.value=g,this._renderer.value.onRequestRedraw(v=>this.refreshRows(v.start,v.end,!0)),this._needsSelectionRefresh=!0,this._fullRefresh()}addRefreshCallback(g){return this._renderDebouncer.addRefreshCallback(g)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){var g,v;this._renderer.value&&((v=(g=this._renderer.value).clearTextureAtlas)===null||v===void 0||v.call(g),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(g,v){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set(()=>this._renderer.value.handleResize(g,v)):this._renderer.value.handleResize(g,v),this._fullRefresh())}handleCharSizeChanged(){var g;(g=this._renderer.value)===null||g===void 0||g.handleCharSizeChanged()}handleBlur(){var g;(g=this._renderer.value)===null||g===void 0||g.handleBlur()}handleFocus(){var g;(g=this._renderer.value)===null||g===void 0||g.handleFocus()}handleSelectionChanged(g,v,y){var E;this._selectionState.start=g,this._selectionState.end=v,this._selectionState.columnSelectMode=y,(E=this._renderer.value)===null||E===void 0||E.handleSelectionChanged(g,v,y)}handleCursorMove(){var g;(g=this._renderer.value)===null||g===void 0||g.handleCursorMove()}clear(){var g;(g=this._renderer.value)===null||g===void 0||g.clear()}};i.RenderService=u=c([f(2,a.IOptionsService),f(3,w.ICharSizeService),f(4,a.IDecorationService),f(5,a.IBufferService),f(6,w.ICoreBrowserService),f(7,w.IThemeService)],u)},9312:function(_,i,r){var c=this&&this.__decorate||function(C,k,L,T){var x,O=arguments.length,U=O<3?k:T===null?T=Object.getOwnPropertyDescriptor(k,L):T;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")U=Reflect.decorate(C,k,L,T);else for(var $=C.length-1;$>=0;$--)(x=C[$])&&(U=(O<3?x(U):O>3?x(k,L,U):x(k,L))||U);return O>3&&U&&Object.defineProperty(k,L,U),U},f=this&&this.__param||function(C,k){return function(L,T){k(L,T,C)}};Object.defineProperty(i,"__esModule",{value:!0}),i.SelectionService=void 0;const l=r(9806),p=r(9504),b=r(456),w=r(4725),S=r(8460),n=r(844),h=r(6114),a=r(4841),u=r(511),g=r(2585),v=String.fromCharCode(160),y=new RegExp(v,"g");let E=i.SelectionService=class extends n.Disposable{constructor(C,k,L,T,x,O,U,$,q){super(),this._element=C,this._screenElement=k,this._linkifier=L,this._bufferService=T,this._coreService=x,this._mouseService=O,this._optionsService=U,this._renderService=$,this._coreBrowserService=q,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new u.CellData,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this.register(new S.EventEmitter),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this.register(new S.EventEmitter),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this.register(new S.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this.register(new S.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=F=>this._handleMouseMove(F),this._mouseUpListener=F=>this._handleMouseUp(F),this._coreService.onUserInput(()=>{this.hasSelection&&this.clearSelection()}),this._trimListener=this._bufferService.buffer.lines.onTrim(F=>this._handleTrim(F)),this.register(this._bufferService.buffers.onBufferActivate(F=>this._handleBufferActivate(F))),this.enable(),this._model=new b.SelectionModel(this._bufferService),this._activeSelectionMode=0,this.register((0,n.toDisposable)(()=>{this._removeMouseDownListeners()}))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){const C=this._model.finalSelectionStart,k=this._model.finalSelectionEnd;return!(!C||!k||C[0]===k[0]&&C[1]===k[1])}get selectionText(){const C=this._model.finalSelectionStart,k=this._model.finalSelectionEnd;if(!C||!k)return"";const L=this._bufferService.buffer,T=[];if(this._activeSelectionMode===3){if(C[0]===k[0])return"";const x=C[0]<k[0]?C[0]:k[0],O=C[0]<k[0]?k[0]:C[0];for(let U=C[1];U<=k[1];U++){const $=L.translateBufferLineToString(U,!0,x,O);T.push($)}}else{const x=C[1]===k[1]?k[0]:void 0;T.push(L.translateBufferLineToString(C[1],!0,C[0],x));for(let O=C[1]+1;O<=k[1]-1;O++){const U=L.lines.get(O),$=L.translateBufferLineToString(O,!0);U!=null&&U.isWrapped?T[T.length-1]+=$:T.push($)}if(C[1]!==k[1]){const O=L.lines.get(k[1]),U=L.translateBufferLineToString(k[1],!0,0,k[0]);O&&O.isWrapped?T[T.length-1]+=U:T.push(U)}}return T.map(x=>x.replace(y," ")).join(h.isWindows?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(C){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._refresh())),h.isLinux&&C&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(C){const k=this._getMouseBufferCoords(C),L=this._model.finalSelectionStart,T=this._model.finalSelectionEnd;return!!(L&&T&&k)&&this._areCoordsInSelection(k,L,T)}isCellInSelection(C,k){const L=this._model.finalSelectionStart,T=this._model.finalSelectionEnd;return!(!L||!T)&&this._areCoordsInSelection([C,k],L,T)}_areCoordsInSelection(C,k,L){return C[1]>k[1]&&C[1]<L[1]||k[1]===L[1]&&C[1]===k[1]&&C[0]>=k[0]&&C[0]<L[0]||k[1]<L[1]&&C[1]===L[1]&&C[0]<L[0]||k[1]<L[1]&&C[1]===k[1]&&C[0]>=k[0]}_selectWordAtCursor(C,k){var L,T;const x=(T=(L=this._linkifier.currentLink)===null||L===void 0?void 0:L.link)===null||T===void 0?void 0:T.range;if(x)return this._model.selectionStart=[x.start.x-1,x.start.y-1],this._model.selectionStartLength=(0,a.getRangeLength)(x,this._bufferService.cols),this._model.selectionEnd=void 0,!0;const O=this._getMouseBufferCoords(C);return!!O&&(this._selectWordAt(O,k),this._model.selectionEnd=void 0,!0)}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(C,k){this._model.clearSelection(),C=Math.max(C,0),k=Math.min(k,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,C],this._model.selectionEnd=[this._bufferService.cols,k],this.refresh(),this._onSelectionChange.fire()}_handleTrim(C){this._model.handleTrim(C)&&this.refresh()}_getMouseBufferCoords(C){const k=this._mouseService.getCoords(C,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(k)return k[0]--,k[1]--,k[1]+=this._bufferService.buffer.ydisp,k}_getMouseEventScrollAmount(C){let k=(0,l.getCoordsRelativeToElement)(this._coreBrowserService.window,C,this._screenElement)[1];const L=this._renderService.dimensions.css.canvas.height;return k>=0&&k<=L?0:(k>L&&(k-=L),k=Math.min(Math.max(k,-50),50),k/=50,k/Math.abs(k)+Math.round(14*k))}shouldForceSelection(C){return h.isMac?C.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:C.shiftKey}handleMouseDown(C){if(this._mouseDownTimeStamp=C.timeStamp,(C.button!==2||!this.hasSelection)&&C.button===0){if(!this._enabled){if(!this.shouldForceSelection(C))return;C.stopPropagation()}C.preventDefault(),this._dragScrollAmount=0,this._enabled&&C.shiftKey?this._handleIncrementalClick(C):C.detail===1?this._handleSingleClick(C):C.detail===2?this._handleDoubleClick(C):C.detail===3&&this._handleTripleClick(C),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval(()=>this._dragScroll(),50)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(C){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(C))}_handleSingleClick(C){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(C)?3:0,this._model.selectionStart=this._getMouseBufferCoords(C),!this._model.selectionStart)return;this._model.selectionEnd=void 0;const k=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);k&&k.length!==this._model.selectionStart[0]&&k.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(C){this._selectWordAtCursor(C,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(C){const k=this._getMouseBufferCoords(C);k&&(this._activeSelectionMode=2,this._selectLineAt(k[1]))}shouldColumnSelect(C){return C.altKey&&!(h.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(C){if(C.stopImmediatePropagation(),!this._model.selectionStart)return;const k=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(C),!this._model.selectionEnd)return void this.refresh(!0);this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(C),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));const L=this._bufferService.buffer;if(this._model.selectionEnd[1]<L.lines.length){const T=L.lines.get(this._model.selectionEnd[1]);T&&T.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]++}k&&k[0]===this._model.selectionEnd[0]&&k[1]===this._model.selectionEnd[1]||this.refresh(!0)}_dragScroll(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});const C=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(C.ydisp+this._bufferService.rows,C.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=C.ydisp),this.refresh()}}_handleMouseUp(C){const k=C.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&k<500&&C.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){const L=this._mouseService.getCoords(C,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(L&&L[0]!==void 0&&L[1]!==void 0){const T=(0,p.moveToCellSequence)(L[0]-1,L[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(T,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){const C=this._model.finalSelectionStart,k=this._model.finalSelectionEnd,L=!(!C||!k||C[0]===k[0]&&C[1]===k[1]);L?C&&k&&(this._oldSelectionStart&&this._oldSelectionEnd&&C[0]===this._oldSelectionStart[0]&&C[1]===this._oldSelectionStart[1]&&k[0]===this._oldSelectionEnd[0]&&k[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(C,k,L)):this._oldHasSelection&&this._fireOnSelectionChange(C,k,L)}_fireOnSelectionChange(C,k,L){this._oldSelectionStart=C,this._oldSelectionEnd=k,this._oldHasSelection=L,this._onSelectionChange.fire()}_handleBufferActivate(C){this.clearSelection(),this._trimListener.dispose(),this._trimListener=C.activeBuffer.lines.onTrim(k=>this._handleTrim(k))}_convertViewportColToCharacterIndex(C,k){let L=k;for(let T=0;k>=T;T++){const x=C.loadCell(T,this._workCell).getChars().length;this._workCell.getWidth()===0?L--:x>1&&k!==T&&(L+=x-1)}return L}setSelection(C,k,L){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[C,k],this._model.selectionStartLength=L,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(C){this._isClickInSelection(C)||(this._selectWordAtCursor(C,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(C,k,L=!0,T=!0){if(C[0]>=this._bufferService.cols)return;const x=this._bufferService.buffer,O=x.lines.get(C[1]);if(!O)return;const U=x.translateBufferLineToString(C[1],!1);let $=this._convertViewportColToCharacterIndex(O,C[0]),q=$;const F=C[0]-$;let D=0,M=0,H=0,I=0;if(U.charAt($)===" "){for(;$>0&&U.charAt($-1)===" ";)$--;for(;q<U.length&&U.charAt(q+1)===" ";)q++}else{let ie=C[0],te=C[0];O.getWidth(ie)===0&&(D++,ie--),O.getWidth(te)===2&&(M++,te++);const fe=O.getString(te).length;for(fe>1&&(I+=fe-1,q+=fe-1);ie>0&&$>0&&!this._isCharWordSeparator(O.loadCell(ie-1,this._workCell));){O.loadCell(ie-1,this._workCell);const B=this._workCell.getChars().length;this._workCell.getWidth()===0?(D++,ie--):B>1&&(H+=B-1,$-=B-1),$--,ie--}for(;te<O.length&&q+1<U.length&&!this._isCharWordSeparator(O.loadCell(te+1,this._workCell));){O.loadCell(te+1,this._workCell);const B=this._workCell.getChars().length;this._workCell.getWidth()===2?(M++,te++):B>1&&(I+=B-1,q+=B-1),q++,te++}}q++;let X=$+F-D+H,J=Math.min(this._bufferService.cols,q-$+D+M-H-I);if(k||U.slice($,q).trim()!==""){if(L&&X===0&&O.getCodePoint(0)!==32){const ie=x.lines.get(C[1]-1);if(ie&&O.isWrapped&&ie.getCodePoint(this._bufferService.cols-1)!==32){const te=this._getWordAt([this._bufferService.cols-1,C[1]-1],!1,!0,!1);if(te){const fe=this._bufferService.cols-te.start;X-=fe,J+=fe}}}if(T&&X+J===this._bufferService.cols&&O.getCodePoint(this._bufferService.cols-1)!==32){const ie=x.lines.get(C[1]+1);if(ie!=null&&ie.isWrapped&&ie.getCodePoint(0)!==32){const te=this._getWordAt([0,C[1]+1],!1,!1,!0);te&&(J+=te.length)}}return{start:X,length:J}}}_selectWordAt(C,k){const L=this._getWordAt(C,k);if(L){for(;L.start<0;)L.start+=this._bufferService.cols,C[1]--;this._model.selectionStart=[L.start,C[1]],this._model.selectionStartLength=L.length}}_selectToWordAt(C){const k=this._getWordAt(C,!0);if(k){let L=C[1];for(;k.start<0;)k.start+=this._bufferService.cols,L--;if(!this._model.areSelectionValuesReversed())for(;k.start+k.length>this._bufferService.cols;)k.length-=this._bufferService.cols,L++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?k.start:k.start+k.length,L]}}_isCharWordSeparator(C){return C.getWidth()!==0&&this._optionsService.rawOptions.wordSeparator.indexOf(C.getChars())>=0}_selectLineAt(C){const k=this._bufferService.buffer.getWrappedRangeForLine(C),L={start:{x:0,y:k.first},end:{x:this._bufferService.cols-1,y:k.last}};this._model.selectionStart=[0,k.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,a.getRangeLength)(L,this._bufferService.cols)}};i.SelectionService=E=c([f(3,g.IBufferService),f(4,g.ICoreService),f(5,w.IMouseService),f(6,g.IOptionsService),f(7,w.IRenderService),f(8,w.ICoreBrowserService)],E)},4725:(_,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.IThemeService=i.ICharacterJoinerService=i.ISelectionService=i.IRenderService=i.IMouseService=i.ICoreBrowserService=i.ICharSizeService=void 0;const c=r(8343);i.ICharSizeService=(0,c.createDecorator)("CharSizeService"),i.ICoreBrowserService=(0,c.createDecorator)("CoreBrowserService"),i.IMouseService=(0,c.createDecorator)("MouseService"),i.IRenderService=(0,c.createDecorator)("RenderService"),i.ISelectionService=(0,c.createDecorator)("SelectionService"),i.ICharacterJoinerService=(0,c.createDecorator)("CharacterJoinerService"),i.IThemeService=(0,c.createDecorator)("ThemeService")},6731:function(_,i,r){var c=this&&this.__decorate||function(E,C,k,L){var T,x=arguments.length,O=x<3?C:L===null?L=Object.getOwnPropertyDescriptor(C,k):L;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")O=Reflect.decorate(E,C,k,L);else for(var U=E.length-1;U>=0;U--)(T=E[U])&&(O=(x<3?T(O):x>3?T(C,k,O):T(C,k))||O);return x>3&&O&&Object.defineProperty(C,k,O),O},f=this&&this.__param||function(E,C){return function(k,L){C(k,L,E)}};Object.defineProperty(i,"__esModule",{value:!0}),i.ThemeService=i.DEFAULT_ANSI_COLORS=void 0;const l=r(7239),p=r(8055),b=r(8460),w=r(844),S=r(2585),n=p.css.toColor("#ffffff"),h=p.css.toColor("#000000"),a=p.css.toColor("#ffffff"),u=p.css.toColor("#000000"),g={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};i.DEFAULT_ANSI_COLORS=Object.freeze((()=>{const E=[p.css.toColor("#2e3436"),p.css.toColor("#cc0000"),p.css.toColor("#4e9a06"),p.css.toColor("#c4a000"),p.css.toColor("#3465a4"),p.css.toColor("#75507b"),p.css.toColor("#06989a"),p.css.toColor("#d3d7cf"),p.css.toColor("#555753"),p.css.toColor("#ef2929"),p.css.toColor("#8ae234"),p.css.toColor("#fce94f"),p.css.toColor("#729fcf"),p.css.toColor("#ad7fa8"),p.css.toColor("#34e2e2"),p.css.toColor("#eeeeec")],C=[0,95,135,175,215,255];for(let k=0;k<216;k++){const L=C[k/36%6|0],T=C[k/6%6|0],x=C[k%6];E.push({css:p.channels.toCss(L,T,x),rgba:p.channels.toRgba(L,T,x)})}for(let k=0;k<24;k++){const L=8+10*k;E.push({css:p.channels.toCss(L,L,L),rgba:p.channels.toRgba(L,L,L)})}return E})());let v=i.ThemeService=class extends w.Disposable{get colors(){return this._colors}constructor(E){super(),this._optionsService=E,this._contrastCache=new l.ColorContrastCache,this._halfContrastCache=new l.ColorContrastCache,this._onChangeColors=this.register(new b.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:n,background:h,cursor:a,cursorAccent:u,selectionForeground:void 0,selectionBackgroundTransparent:g,selectionBackgroundOpaque:p.color.blend(h,g),selectionInactiveBackgroundTransparent:g,selectionInactiveBackgroundOpaque:p.color.blend(h,g),ansi:i.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",()=>this._contrastCache.clear())),this.register(this._optionsService.onSpecificOptionChange("theme",()=>this._setTheme(this._optionsService.rawOptions.theme)))}_setTheme(E={}){const C=this._colors;if(C.foreground=y(E.foreground,n),C.background=y(E.background,h),C.cursor=y(E.cursor,a),C.cursorAccent=y(E.cursorAccent,u),C.selectionBackgroundTransparent=y(E.selectionBackground,g),C.selectionBackgroundOpaque=p.color.blend(C.background,C.selectionBackgroundTransparent),C.selectionInactiveBackgroundTransparent=y(E.selectionInactiveBackground,C.selectionBackgroundTransparent),C.selectionInactiveBackgroundOpaque=p.color.blend(C.background,C.selectionInactiveBackgroundTransparent),C.selectionForeground=E.selectionForeground?y(E.selectionForeground,p.NULL_COLOR):void 0,C.selectionForeground===p.NULL_COLOR&&(C.selectionForeground=void 0),p.color.isOpaque(C.selectionBackgroundTransparent)&&(C.selectionBackgroundTransparent=p.color.opacity(C.selectionBackgroundTransparent,.3)),p.color.isOpaque(C.selectionInactiveBackgroundTransparent)&&(C.selectionInactiveBackgroundTransparent=p.color.opacity(C.selectionInactiveBackgroundTransparent,.3)),C.ansi=i.DEFAULT_ANSI_COLORS.slice(),C.ansi[0]=y(E.black,i.DEFAULT_ANSI_COLORS[0]),C.ansi[1]=y(E.red,i.DEFAULT_ANSI_COLORS[1]),C.ansi[2]=y(E.green,i.DEFAULT_ANSI_COLORS[2]),C.ansi[3]=y(E.yellow,i.DEFAULT_ANSI_COLORS[3]),C.ansi[4]=y(E.blue,i.DEFAULT_ANSI_COLORS[4]),C.ansi[5]=y(E.magenta,i.DEFAULT_ANSI_COLORS[5]),C.ansi[6]=y(E.cyan,i.DEFAULT_ANSI_COLORS[6]),C.ansi[7]=y(E.white,i.DEFAULT_ANSI_COLORS[7]),C.ansi[8]=y(E.brightBlack,i.DEFAULT_ANSI_COLORS[8]),C.ansi[9]=y(E.brightRed,i.DEFAULT_ANSI_COLORS[9]),C.ansi[10]=y(E.brightGreen,i.DEFAULT_ANSI_COLORS[10]),C.ansi[11]=y(E.brightYellow,i.DEFAULT_ANSI_COLORS[11]),C.ansi[12]=y(E.brightBlue,i.DEFAULT_ANSI_COLORS[12]),C.ansi[13]=y(E.brightMagenta,i.DEFAULT_ANSI_COLORS[13]),C.ansi[14]=y(E.brightCyan,i.DEFAULT_ANSI_COLORS[14]),C.ansi[15]=y(E.brightWhite,i.DEFAULT_ANSI_COLORS[15]),E.extendedAnsi){const k=Math.min(C.ansi.length-16,E.extendedAnsi.length);for(let L=0;L<k;L++)C.ansi[L+16]=y(E.extendedAnsi[L],i.DEFAULT_ANSI_COLORS[L+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(E){this._restoreColor(E),this._onChangeColors.fire(this.colors)}_restoreColor(E){if(E!==void 0)switch(E){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[E]=this._restoreColors.ansi[E]}else for(let C=0;C<this._restoreColors.ansi.length;++C)this._colors.ansi[C]=this._restoreColors.ansi[C]}modifyColors(E){E(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function y(E,C){if(E!==void 0)try{return p.css.toColor(E)}catch{}return C}i.ThemeService=v=c([f(0,S.IOptionsService)],v)},6349:(_,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CircularList=void 0;const c=r(8460),f=r(844);class l extends f.Disposable{constructor(b){super(),this._maxLength=b,this.onDeleteEmitter=this.register(new c.EventEmitter),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this.register(new c.EventEmitter),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this.register(new c.EventEmitter),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(b){if(this._maxLength===b)return;const w=new Array(b);for(let S=0;S<Math.min(b,this.length);S++)w[S]=this._array[this._getCyclicIndex(S)];this._array=w,this._maxLength=b,this._startIndex=0}get length(){return this._length}set length(b){if(b>this._length)for(let w=this._length;w<b;w++)this._array[w]=void 0;this._length=b}get(b){return this._array[this._getCyclicIndex(b)]}set(b,w){this._array[this._getCyclicIndex(b)]=w}push(b){this._array[this._getCyclicIndex(this._length)]=b,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(b,w,...S){if(w){for(let n=b;n<this._length-w;n++)this._array[this._getCyclicIndex(n)]=this._array[this._getCyclicIndex(n+w)];this._length-=w,this.onDeleteEmitter.fire({index:b,amount:w})}for(let n=this._length-1;n>=b;n--)this._array[this._getCyclicIndex(n+S.length)]=this._array[this._getCyclicIndex(n)];for(let n=0;n<S.length;n++)this._array[this._getCyclicIndex(b+n)]=S[n];if(S.length&&this.onInsertEmitter.fire({index:b,amount:S.length}),this._length+S.length>this._maxLength){const n=this._length+S.length-this._maxLength;this._startIndex+=n,this._length=this._maxLength,this.onTrimEmitter.fire(n)}else this._length+=S.length}trimStart(b){b>this._length&&(b=this._length),this._startIndex+=b,this._length-=b,this.onTrimEmitter.fire(b)}shiftElements(b,w,S){if(!(w<=0)){if(b<0||b>=this._length)throw new Error("start argument out of range");if(b+S<0)throw new Error("Cannot shift elements in list beyond index 0");if(S>0){for(let h=w-1;h>=0;h--)this.set(b+h+S,this.get(b+h));const n=b+w+S-this._length;if(n>0)for(this._length+=n;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let n=0;n<w;n++)this.set(b+n+S,this.get(b+n))}}_getCyclicIndex(b){return(this._startIndex+b)%this._maxLength}}i.CircularList=l},1439:(_,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.clone=void 0,i.clone=function r(c,f=5){if(typeof c!="object")return c;const l=Array.isArray(c)?[]:{};for(const p in c)l[p]=f<=1?c[p]:c[p]&&r(c[p],f-1);return l}},8055:(_,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.contrastRatio=i.toPaddedHex=i.rgba=i.rgb=i.css=i.color=i.channels=i.NULL_COLOR=void 0;const c=r(6114);let f=0,l=0,p=0,b=0;var w,S,n,h,a;function u(v){const y=v.toString(16);return y.length<2?"0"+y:y}function g(v,y){return v<y?(y+.05)/(v+.05):(v+.05)/(y+.05)}i.NULL_COLOR={css:"#00000000",rgba:0},function(v){v.toCss=function(y,E,C,k){return k!==void 0?`#${u(y)}${u(E)}${u(C)}${u(k)}`:`#${u(y)}${u(E)}${u(C)}`},v.toRgba=function(y,E,C,k=255){return(y<<24|E<<16|C<<8|k)>>>0}}(w||(i.channels=w={})),function(v){function y(E,C){return b=Math.round(255*C),[f,l,p]=a.toChannels(E.rgba),{css:w.toCss(f,l,p,b),rgba:w.toRgba(f,l,p,b)}}v.blend=function(E,C){if(b=(255&C.rgba)/255,b===1)return{css:C.css,rgba:C.rgba};const k=C.rgba>>24&255,L=C.rgba>>16&255,T=C.rgba>>8&255,x=E.rgba>>24&255,O=E.rgba>>16&255,U=E.rgba>>8&255;return f=x+Math.round((k-x)*b),l=O+Math.round((L-O)*b),p=U+Math.round((T-U)*b),{css:w.toCss(f,l,p),rgba:w.toRgba(f,l,p)}},v.isOpaque=function(E){return(255&E.rgba)==255},v.ensureContrastRatio=function(E,C,k){const L=a.ensureContrastRatio(E.rgba,C.rgba,k);if(L)return a.toColor(L>>24&255,L>>16&255,L>>8&255)},v.opaque=function(E){const C=(255|E.rgba)>>>0;return[f,l,p]=a.toChannels(C),{css:w.toCss(f,l,p),rgba:C}},v.opacity=y,v.multiplyOpacity=function(E,C){return b=255&E.rgba,y(E,b*C/255)},v.toColorRGB=function(E){return[E.rgba>>24&255,E.rgba>>16&255,E.rgba>>8&255]}}(S||(i.color=S={})),function(v){let y,E;if(!c.isNode){const C=document.createElement("canvas");C.width=1,C.height=1;const k=C.getContext("2d",{willReadFrequently:!0});k&&(y=k,y.globalCompositeOperation="copy",E=y.createLinearGradient(0,0,1,1))}v.toColor=function(C){if(C.match(/#[\da-f]{3,8}/i))switch(C.length){case 4:return f=parseInt(C.slice(1,2).repeat(2),16),l=parseInt(C.slice(2,3).repeat(2),16),p=parseInt(C.slice(3,4).repeat(2),16),a.toColor(f,l,p);case 5:return f=parseInt(C.slice(1,2).repeat(2),16),l=parseInt(C.slice(2,3).repeat(2),16),p=parseInt(C.slice(3,4).repeat(2),16),b=parseInt(C.slice(4,5).repeat(2),16),a.toColor(f,l,p,b);case 7:return{css:C,rgba:(parseInt(C.slice(1),16)<<8|255)>>>0};case 9:return{css:C,rgba:parseInt(C.slice(1),16)>>>0}}const k=C.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(k)return f=parseInt(k[1]),l=parseInt(k[2]),p=parseInt(k[3]),b=Math.round(255*(k[5]===void 0?1:parseFloat(k[5]))),a.toColor(f,l,p,b);if(!y||!E)throw new Error("css.toColor: Unsupported css format");if(y.fillStyle=E,y.fillStyle=C,typeof y.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(y.fillRect(0,0,1,1),[f,l,p,b]=y.getImageData(0,0,1,1).data,b!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:w.toRgba(f,l,p,b),css:C}}}(n||(i.css=n={})),function(v){function y(E,C,k){const L=E/255,T=C/255,x=k/255;return .2126*(L<=.03928?L/12.92:Math.pow((L+.055)/1.055,2.4))+.7152*(T<=.03928?T/12.92:Math.pow((T+.055)/1.055,2.4))+.0722*(x<=.03928?x/12.92:Math.pow((x+.055)/1.055,2.4))}v.relativeLuminance=function(E){return y(E>>16&255,E>>8&255,255&E)},v.relativeLuminance2=y}(h||(i.rgb=h={})),function(v){function y(C,k,L){const T=C>>24&255,x=C>>16&255,O=C>>8&255;let U=k>>24&255,$=k>>16&255,q=k>>8&255,F=g(h.relativeLuminance2(U,$,q),h.relativeLuminance2(T,x,O));for(;F<L&&(U>0||$>0||q>0);)U-=Math.max(0,Math.ceil(.1*U)),$-=Math.max(0,Math.ceil(.1*$)),q-=Math.max(0,Math.ceil(.1*q)),F=g(h.relativeLuminance2(U,$,q),h.relativeLuminance2(T,x,O));return(U<<24|$<<16|q<<8|255)>>>0}function E(C,k,L){const T=C>>24&255,x=C>>16&255,O=C>>8&255;let U=k>>24&255,$=k>>16&255,q=k>>8&255,F=g(h.relativeLuminance2(U,$,q),h.relativeLuminance2(T,x,O));for(;F<L&&(U<255||$<255||q<255);)U=Math.min(255,U+Math.ceil(.1*(255-U))),$=Math.min(255,$+Math.ceil(.1*(255-$))),q=Math.min(255,q+Math.ceil(.1*(255-q))),F=g(h.relativeLuminance2(U,$,q),h.relativeLuminance2(T,x,O));return(U<<24|$<<16|q<<8|255)>>>0}v.ensureContrastRatio=function(C,k,L){const T=h.relativeLuminance(C>>8),x=h.relativeLuminance(k>>8);if(g(T,x)<L){if(x<T){const $=y(C,k,L),q=g(T,h.relativeLuminance($>>8));if(q<L){const F=E(C,k,L);return q>g(T,h.relativeLuminance(F>>8))?$:F}return $}const O=E(C,k,L),U=g(T,h.relativeLuminance(O>>8));if(U<L){const $=y(C,k,L);return U>g(T,h.relativeLuminance($>>8))?O:$}return O}},v.reduceLuminance=y,v.increaseLuminance=E,v.toChannels=function(C){return[C>>24&255,C>>16&255,C>>8&255,255&C]},v.toColor=function(C,k,L,T){return{css:w.toCss(C,k,L,T),rgba:w.toRgba(C,k,L,T)}}}(a||(i.rgba=a={})),i.toPaddedHex=u,i.contrastRatio=g},8969:(_,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CoreTerminal=void 0;const c=r(844),f=r(2585),l=r(4348),p=r(7866),b=r(744),w=r(7302),S=r(6975),n=r(8460),h=r(1753),a=r(1480),u=r(7994),g=r(9282),v=r(5435),y=r(5981),E=r(2660);let C=!1;class k extends c.Disposable{get onScroll(){return this._onScrollApi||(this._onScrollApi=this.register(new n.EventEmitter),this._onScroll.event(T=>{var x;(x=this._onScrollApi)===null||x===void 0||x.fire(T.position)})),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(T){for(const x in T)this.optionsService.options[x]=T[x]}constructor(T){super(),this._windowsWrappingHeuristics=this.register(new c.MutableDisposable),this._onBinary=this.register(new n.EventEmitter),this.onBinary=this._onBinary.event,this._onData=this.register(new n.EventEmitter),this.onData=this._onData.event,this._onLineFeed=this.register(new n.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onResize=this.register(new n.EventEmitter),this.onResize=this._onResize.event,this._onWriteParsed=this.register(new n.EventEmitter),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this.register(new n.EventEmitter),this._instantiationService=new l.InstantiationService,this.optionsService=this.register(new w.OptionsService(T)),this._instantiationService.setService(f.IOptionsService,this.optionsService),this._bufferService=this.register(this._instantiationService.createInstance(b.BufferService)),this._instantiationService.setService(f.IBufferService,this._bufferService),this._logService=this.register(this._instantiationService.createInstance(p.LogService)),this._instantiationService.setService(f.ILogService,this._logService),this.coreService=this.register(this._instantiationService.createInstance(S.CoreService)),this._instantiationService.setService(f.ICoreService,this.coreService),this.coreMouseService=this.register(this._instantiationService.createInstance(h.CoreMouseService)),this._instantiationService.setService(f.ICoreMouseService,this.coreMouseService),this.unicodeService=this.register(this._instantiationService.createInstance(a.UnicodeService)),this._instantiationService.setService(f.IUnicodeService,this.unicodeService),this._charsetService=this._instantiationService.createInstance(u.CharsetService),this._instantiationService.setService(f.ICharsetService,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(E.OscLinkService),this._instantiationService.setService(f.IOscLinkService,this._oscLinkService),this._inputHandler=this.register(new v.InputHandler(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this.register((0,n.forwardEvent)(this._inputHandler.onLineFeed,this._onLineFeed)),this.register(this._inputHandler),this.register((0,n.forwardEvent)(this._bufferService.onResize,this._onResize)),this.register((0,n.forwardEvent)(this.coreService.onData,this._onData)),this.register((0,n.forwardEvent)(this.coreService.onBinary,this._onBinary)),this.register(this.coreService.onRequestScrollToBottom(()=>this.scrollToBottom())),this.register(this.coreService.onUserInput(()=>this._writeBuffer.handleUserInput())),this.register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],()=>this._handleWindowsPtyOptionChange())),this.register(this._bufferService.onScroll(x=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this.register(this._inputHandler.onScroll(x=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this._writeBuffer=this.register(new y.WriteBuffer((x,O)=>this._inputHandler.parse(x,O))),this.register((0,n.forwardEvent)(this._writeBuffer.onWriteParsed,this._onWriteParsed))}write(T,x){this._writeBuffer.write(T,x)}writeSync(T,x){this._logService.logLevel<=f.LogLevelEnum.WARN&&!C&&(this._logService.warn("writeSync is unreliable and will be removed soon."),C=!0),this._writeBuffer.writeSync(T,x)}resize(T,x){isNaN(T)||isNaN(x)||(T=Math.max(T,b.MINIMUM_COLS),x=Math.max(x,b.MINIMUM_ROWS),this._bufferService.resize(T,x))}scroll(T,x=!1){this._bufferService.scroll(T,x)}scrollLines(T,x,O){this._bufferService.scrollLines(T,x,O)}scrollPages(T){this.scrollLines(T*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(T){const x=T-this._bufferService.buffer.ydisp;x!==0&&this.scrollLines(x)}registerEscHandler(T,x){return this._inputHandler.registerEscHandler(T,x)}registerDcsHandler(T,x){return this._inputHandler.registerDcsHandler(T,x)}registerCsiHandler(T,x){return this._inputHandler.registerCsiHandler(T,x)}registerOscHandler(T,x){return this._inputHandler.registerOscHandler(T,x)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let T=!1;const x=this.optionsService.rawOptions.windowsPty;x&&x.buildNumber!==void 0&&x.buildNumber!==void 0?T=x.backend==="conpty"&&x.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(T=!0),T?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){const T=[];T.push(this.onLineFeed(g.updateWindowsModeWrappedState.bind(null,this._bufferService))),T.push(this.registerCsiHandler({final:"H"},()=>((0,g.updateWindowsModeWrappedState)(this._bufferService),!1))),this._windowsWrappingHeuristics.value=(0,c.toDisposable)(()=>{for(const x of T)x.dispose()})}}}i.CoreTerminal=k},8460:(_,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.forwardEvent=i.EventEmitter=void 0,i.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=r=>(this._listeners.push(r),{dispose:()=>{if(!this._disposed){for(let c=0;c<this._listeners.length;c++)if(this._listeners[c]===r)return void this._listeners.splice(c,1)}}})),this._event}fire(r,c){const f=[];for(let l=0;l<this._listeners.length;l++)f.push(this._listeners[l]);for(let l=0;l<f.length;l++)f[l].call(void 0,r,c)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},i.forwardEvent=function(r,c){return r(f=>c.fire(f))}},5435:function(_,i,r){var c=this&&this.__decorate||function(F,D,M,H){var I,X=arguments.length,J=X<3?D:H===null?H=Object.getOwnPropertyDescriptor(D,M):H;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")J=Reflect.decorate(F,D,M,H);else for(var ie=F.length-1;ie>=0;ie--)(I=F[ie])&&(J=(X<3?I(J):X>3?I(D,M,J):I(D,M))||J);return X>3&&J&&Object.defineProperty(D,M,J),J},f=this&&this.__param||function(F,D){return function(M,H){D(M,H,F)}};Object.defineProperty(i,"__esModule",{value:!0}),i.InputHandler=i.WindowsOptionsReportType=void 0;const l=r(2584),p=r(7116),b=r(2015),w=r(844),S=r(482),n=r(8437),h=r(8460),a=r(643),u=r(511),g=r(3734),v=r(2585),y=r(6242),E=r(6351),C=r(5941),k={"(":0,")":1,"*":2,"+":3,"-":1,".":2},L=131072;function T(F,D){if(F>24)return D.setWinLines||!1;switch(F){case 1:return!!D.restoreWin;case 2:return!!D.minimizeWin;case 3:return!!D.setWinPosition;case 4:return!!D.setWinSizePixels;case 5:return!!D.raiseWin;case 6:return!!D.lowerWin;case 7:return!!D.refreshWin;case 8:return!!D.setWinSizeChars;case 9:return!!D.maximizeWin;case 10:return!!D.fullscreenWin;case 11:return!!D.getWinState;case 13:return!!D.getWinPosition;case 14:return!!D.getWinSizePixels;case 15:return!!D.getScreenSizePixels;case 16:return!!D.getCellSizePixels;case 18:return!!D.getWinSizeChars;case 19:return!!D.getScreenSizeChars;case 20:return!!D.getIconTitle;case 21:return!!D.getWinTitle;case 22:return!!D.pushTitle;case 23:return!!D.popTitle;case 24:return!!D.setWinLines}return!1}var x;(function(F){F[F.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",F[F.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(x||(i.WindowsOptionsReportType=x={}));let O=0;class U extends w.Disposable{getAttrData(){return this._curAttrData}constructor(D,M,H,I,X,J,ie,te,fe=new b.EscapeSequenceParser){super(),this._bufferService=D,this._charsetService=M,this._coreService=H,this._logService=I,this._optionsService=X,this._oscLinkService=J,this._coreMouseService=ie,this._unicodeService=te,this._parser=fe,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new S.StringToUtf32,this._utf8Decoder=new S.Utf8ToUtf32,this._workCell=new u.CellData,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=n.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=n.DEFAULT_ATTR_DATA.clone(),this._onRequestBell=this.register(new h.EventEmitter),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this.register(new h.EventEmitter),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this.register(new h.EventEmitter),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this.register(new h.EventEmitter),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this.register(new h.EventEmitter),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this.register(new h.EventEmitter),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this.register(new h.EventEmitter),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this.register(new h.EventEmitter),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this.register(new h.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this.register(new h.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onScroll=this.register(new h.EventEmitter),this.onScroll=this._onScroll.event,this._onTitleChange=this.register(new h.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onColor=this.register(new h.EventEmitter),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this.register(this._parser),this._dirtyRowTracker=new $(this._bufferService),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(B=>this._activeBuffer=B.activeBuffer)),this._parser.setCsiHandlerFallback((B,z)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(B),params:z.toArray()})}),this._parser.setEscHandlerFallback(B=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(B)})}),this._parser.setExecuteHandlerFallback(B=>{this._logService.debug("Unknown EXECUTE code: ",{code:B})}),this._parser.setOscHandlerFallback((B,z,Z)=>{this._logService.debug("Unknown OSC code: ",{identifier:B,action:z,data:Z})}),this._parser.setDcsHandlerFallback((B,z,Z)=>{z==="HOOK"&&(Z=Z.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(B),action:z,payload:Z})}),this._parser.setPrintHandler((B,z,Z)=>this.print(B,z,Z)),this._parser.registerCsiHandler({final:"@"},B=>this.insertChars(B)),this._parser.registerCsiHandler({intermediates:" ",final:"@"},B=>this.scrollLeft(B)),this._parser.registerCsiHandler({final:"A"},B=>this.cursorUp(B)),this._parser.registerCsiHandler({intermediates:" ",final:"A"},B=>this.scrollRight(B)),this._parser.registerCsiHandler({final:"B"},B=>this.cursorDown(B)),this._parser.registerCsiHandler({final:"C"},B=>this.cursorForward(B)),this._parser.registerCsiHandler({final:"D"},B=>this.cursorBackward(B)),this._parser.registerCsiHandler({final:"E"},B=>this.cursorNextLine(B)),this._parser.registerCsiHandler({final:"F"},B=>this.cursorPrecedingLine(B)),this._parser.registerCsiHandler({final:"G"},B=>this.cursorCharAbsolute(B)),this._parser.registerCsiHandler({final:"H"},B=>this.cursorPosition(B)),this._parser.registerCsiHandler({final:"I"},B=>this.cursorForwardTab(B)),this._parser.registerCsiHandler({final:"J"},B=>this.eraseInDisplay(B,!1)),this._parser.registerCsiHandler({prefix:"?",final:"J"},B=>this.eraseInDisplay(B,!0)),this._parser.registerCsiHandler({final:"K"},B=>this.eraseInLine(B,!1)),this._parser.registerCsiHandler({prefix:"?",final:"K"},B=>this.eraseInLine(B,!0)),this._parser.registerCsiHandler({final:"L"},B=>this.insertLines(B)),this._parser.registerCsiHandler({final:"M"},B=>this.deleteLines(B)),this._parser.registerCsiHandler({final:"P"},B=>this.deleteChars(B)),this._parser.registerCsiHandler({final:"S"},B=>this.scrollUp(B)),this._parser.registerCsiHandler({final:"T"},B=>this.scrollDown(B)),this._parser.registerCsiHandler({final:"X"},B=>this.eraseChars(B)),this._parser.registerCsiHandler({final:"Z"},B=>this.cursorBackwardTab(B)),this._parser.registerCsiHandler({final:"`"},B=>this.charPosAbsolute(B)),this._parser.registerCsiHandler({final:"a"},B=>this.hPositionRelative(B)),this._parser.registerCsiHandler({final:"b"},B=>this.repeatPrecedingCharacter(B)),this._parser.registerCsiHandler({final:"c"},B=>this.sendDeviceAttributesPrimary(B)),this._parser.registerCsiHandler({prefix:">",final:"c"},B=>this.sendDeviceAttributesSecondary(B)),this._parser.registerCsiHandler({final:"d"},B=>this.linePosAbsolute(B)),this._parser.registerCsiHandler({final:"e"},B=>this.vPositionRelative(B)),this._parser.registerCsiHandler({final:"f"},B=>this.hVPosition(B)),this._parser.registerCsiHandler({final:"g"},B=>this.tabClear(B)),this._parser.registerCsiHandler({final:"h"},B=>this.setMode(B)),this._parser.registerCsiHandler({prefix:"?",final:"h"},B=>this.setModePrivate(B)),this._parser.registerCsiHandler({final:"l"},B=>this.resetMode(B)),this._parser.registerCsiHandler({prefix:"?",final:"l"},B=>this.resetModePrivate(B)),this._parser.registerCsiHandler({final:"m"},B=>this.charAttributes(B)),this._parser.registerCsiHandler({final:"n"},B=>this.deviceStatus(B)),this._parser.registerCsiHandler({prefix:"?",final:"n"},B=>this.deviceStatusPrivate(B)),this._parser.registerCsiHandler({intermediates:"!",final:"p"},B=>this.softReset(B)),this._parser.registerCsiHandler({intermediates:" ",final:"q"},B=>this.setCursorStyle(B)),this._parser.registerCsiHandler({final:"r"},B=>this.setScrollRegion(B)),this._parser.registerCsiHandler({final:"s"},B=>this.saveCursor(B)),this._parser.registerCsiHandler({final:"t"},B=>this.windowOptions(B)),this._parser.registerCsiHandler({final:"u"},B=>this.restoreCursor(B)),this._parser.registerCsiHandler({intermediates:"'",final:"}"},B=>this.insertColumns(B)),this._parser.registerCsiHandler({intermediates:"'",final:"~"},B=>this.deleteColumns(B)),this._parser.registerCsiHandler({intermediates:'"',final:"q"},B=>this.selectProtected(B)),this._parser.registerCsiHandler({intermediates:"$",final:"p"},B=>this.requestMode(B,!0)),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},B=>this.requestMode(B,!1)),this._parser.setExecuteHandler(l.C0.BEL,()=>this.bell()),this._parser.setExecuteHandler(l.C0.LF,()=>this.lineFeed()),this._parser.setExecuteHandler(l.C0.VT,()=>this.lineFeed()),this._parser.setExecuteHandler(l.C0.FF,()=>this.lineFeed()),this._parser.setExecuteHandler(l.C0.CR,()=>this.carriageReturn()),this._parser.setExecuteHandler(l.C0.BS,()=>this.backspace()),this._parser.setExecuteHandler(l.C0.HT,()=>this.tab()),this._parser.setExecuteHandler(l.C0.SO,()=>this.shiftOut()),this._parser.setExecuteHandler(l.C0.SI,()=>this.shiftIn()),this._parser.setExecuteHandler(l.C1.IND,()=>this.index()),this._parser.setExecuteHandler(l.C1.NEL,()=>this.nextLine()),this._parser.setExecuteHandler(l.C1.HTS,()=>this.tabSet()),this._parser.registerOscHandler(0,new y.OscHandler(B=>(this.setTitle(B),this.setIconName(B),!0))),this._parser.registerOscHandler(1,new y.OscHandler(B=>this.setIconName(B))),this._parser.registerOscHandler(2,new y.OscHandler(B=>this.setTitle(B))),this._parser.registerOscHandler(4,new y.OscHandler(B=>this.setOrReportIndexedColor(B))),this._parser.registerOscHandler(8,new y.OscHandler(B=>this.setHyperlink(B))),this._parser.registerOscHandler(10,new y.OscHandler(B=>this.setOrReportFgColor(B))),this._parser.registerOscHandler(11,new y.OscHandler(B=>this.setOrReportBgColor(B))),this._parser.registerOscHandler(12,new y.OscHandler(B=>this.setOrReportCursorColor(B))),this._parser.registerOscHandler(104,new y.OscHandler(B=>this.restoreIndexedColor(B))),this._parser.registerOscHandler(110,new y.OscHandler(B=>this.restoreFgColor(B))),this._parser.registerOscHandler(111,new y.OscHandler(B=>this.restoreBgColor(B))),this._parser.registerOscHandler(112,new y.OscHandler(B=>this.restoreCursorColor(B))),this._parser.registerEscHandler({final:"7"},()=>this.saveCursor()),this._parser.registerEscHandler({final:"8"},()=>this.restoreCursor()),this._parser.registerEscHandler({final:"D"},()=>this.index()),this._parser.registerEscHandler({final:"E"},()=>this.nextLine()),this._parser.registerEscHandler({final:"H"},()=>this.tabSet()),this._parser.registerEscHandler({final:"M"},()=>this.reverseIndex()),this._parser.registerEscHandler({final:"="},()=>this.keypadApplicationMode()),this._parser.registerEscHandler({final:">"},()=>this.keypadNumericMode()),this._parser.registerEscHandler({final:"c"},()=>this.fullReset()),this._parser.registerEscHandler({final:"n"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"o"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"|"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"}"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"~"},()=>this.setgLevel(1)),this._parser.registerEscHandler({intermediates:"%",final:"@"},()=>this.selectDefaultCharset()),this._parser.registerEscHandler({intermediates:"%",final:"G"},()=>this.selectDefaultCharset());for(const B in p.CHARSETS)this._parser.registerEscHandler({intermediates:"(",final:B},()=>this.selectCharset("("+B)),this._parser.registerEscHandler({intermediates:")",final:B},()=>this.selectCharset(")"+B)),this._parser.registerEscHandler({intermediates:"*",final:B},()=>this.selectCharset("*"+B)),this._parser.registerEscHandler({intermediates:"+",final:B},()=>this.selectCharset("+"+B)),this._parser.registerEscHandler({intermediates:"-",final:B},()=>this.selectCharset("-"+B)),this._parser.registerEscHandler({intermediates:".",final:B},()=>this.selectCharset("."+B)),this._parser.registerEscHandler({intermediates:"/",final:B},()=>this.selectCharset("/"+B));this._parser.registerEscHandler({intermediates:"#",final:"8"},()=>this.screenAlignmentPattern()),this._parser.setErrorHandler(B=>(this._logService.error("Parsing error: ",B),B)),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new E.DcsHandler((B,z)=>this.requestStatusString(B,z)))}_preserveStack(D,M,H,I){this._parseStack.paused=!0,this._parseStack.cursorStartX=D,this._parseStack.cursorStartY=M,this._parseStack.decodedLength=H,this._parseStack.position=I}_logSlowResolvingAsync(D){this._logService.logLevel<=v.LogLevelEnum.WARN&&Promise.race([D,new Promise((M,H)=>setTimeout(()=>H("#SLOW_TIMEOUT"),5e3))]).catch(M=>{if(M!=="#SLOW_TIMEOUT")throw M;console.warn("async parser handler taking longer than 5000 ms")})}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(D,M){let H,I=this._activeBuffer.x,X=this._activeBuffer.y,J=0;const ie=this._parseStack.paused;if(ie){if(H=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,M))return this._logSlowResolvingAsync(H),H;I=this._parseStack.cursorStartX,X=this._parseStack.cursorStartY,this._parseStack.paused=!1,D.length>L&&(J=this._parseStack.position+L)}if(this._logService.logLevel<=v.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof D=="string"?` "${D}"`:` "${Array.prototype.map.call(D,te=>String.fromCharCode(te)).join("")}"`),typeof D=="string"?D.split("").map(te=>te.charCodeAt(0)):D),this._parseBuffer.length<D.length&&this._parseBuffer.length<L&&(this._parseBuffer=new Uint32Array(Math.min(D.length,L))),ie||this._dirtyRowTracker.clearRange(),D.length>L)for(let te=J;te<D.length;te+=L){const fe=te+L<D.length?te+L:D.length,B=typeof D=="string"?this._stringDecoder.decode(D.substring(te,fe),this._parseBuffer):this._utf8Decoder.decode(D.subarray(te,fe),this._parseBuffer);if(H=this._parser.parse(this._parseBuffer,B))return this._preserveStack(I,X,B,te),this._logSlowResolvingAsync(H),H}else if(!ie){const te=typeof D=="string"?this._stringDecoder.decode(D,this._parseBuffer):this._utf8Decoder.decode(D,this._parseBuffer);if(H=this._parser.parse(this._parseBuffer,te))return this._preserveStack(I,X,te,0),this._logSlowResolvingAsync(H),H}this._activeBuffer.x===I&&this._activeBuffer.y===X||this._onCursorMove.fire(),this._onRequestRefreshRows.fire(this._dirtyRowTracker.start,this._dirtyRowTracker.end)}print(D,M,H){let I,X;const J=this._charsetService.charset,ie=this._optionsService.rawOptions.screenReaderMode,te=this._bufferService.cols,fe=this._coreService.decPrivateModes.wraparound,B=this._coreService.modes.insertMode,z=this._curAttrData;let Z=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&H-M>0&&Z.getWidth(this._activeBuffer.x-1)===2&&Z.setCellFromCodePoint(this._activeBuffer.x-1,0,1,z.fg,z.bg,z.extended);for(let V=M;V<H;++V){if(I=D[V],X=this._unicodeService.wcwidth(I),I<127&&J){const oe=J[String.fromCharCode(I)];oe&&(I=oe.charCodeAt(0))}if(ie&&this._onA11yChar.fire((0,S.stringFromCodePoint)(I)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),X||!this._activeBuffer.x){if(this._activeBuffer.x+X-1>=te){if(fe){for(;this._activeBuffer.x<te;)Z.setCellFromCodePoint(this._activeBuffer.x++,0,1,z.fg,z.bg,z.extended);this._activeBuffer.x=0,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),Z=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)}else if(this._activeBuffer.x=te-1,X===2)continue}if(B&&(Z.insertCells(this._activeBuffer.x,X,this._activeBuffer.getNullCell(z),z),Z.getWidth(te-1)===2&&Z.setCellFromCodePoint(te-1,a.NULL_CELL_CODE,a.NULL_CELL_WIDTH,z.fg,z.bg,z.extended)),Z.setCellFromCodePoint(this._activeBuffer.x++,I,X,z.fg,z.bg,z.extended),X>0)for(;--X;)Z.setCellFromCodePoint(this._activeBuffer.x++,0,0,z.fg,z.bg,z.extended)}else Z.getWidth(this._activeBuffer.x-1)?Z.addCodepointToCell(this._activeBuffer.x-1,I):Z.addCodepointToCell(this._activeBuffer.x-2,I)}H-M>0&&(Z.loadCell(this._activeBuffer.x-1,this._workCell),this._workCell.getWidth()===2||this._workCell.getCode()>65535?this._parser.precedingCodepoint=0:this._workCell.isCombined()?this._parser.precedingCodepoint=this._workCell.getChars().charCodeAt(0):this._parser.precedingCodepoint=this._workCell.content),this._activeBuffer.x<te&&H-M>0&&Z.getWidth(this._activeBuffer.x)===0&&!Z.hasContent(this._activeBuffer.x)&&Z.setCellFromCodePoint(this._activeBuffer.x,0,1,z.fg,z.bg,z.extended),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(D,M){return D.final!=="t"||D.prefix||D.intermediates?this._parser.registerCsiHandler(D,M):this._parser.registerCsiHandler(D,H=>!T(H.params[0],this._optionsService.rawOptions.windowOptions)||M(H))}registerDcsHandler(D,M){return this._parser.registerDcsHandler(D,new E.DcsHandler(M))}registerEscHandler(D,M){return this._parser.registerEscHandler(D,M)}registerOscHandler(D,M){return this._parser.registerOscHandler(D,new y.OscHandler(M))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){var D;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&(!((D=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))===null||D===void 0)&&D.isWrapped)){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;const M=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);M.hasWidth(this._activeBuffer.x)&&!M.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;const D=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-D),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(D=this._bufferService.cols-1){this._activeBuffer.x=Math.min(D,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(D,M){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=D,this._activeBuffer.y=this._activeBuffer.scrollTop+M):(this._activeBuffer.x=D,this._activeBuffer.y=M),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(D,M){this._restrictCursor(),this._setCursor(this._activeBuffer.x+D,this._activeBuffer.y+M)}cursorUp(D){const M=this._activeBuffer.y-this._activeBuffer.scrollTop;return M>=0?this._moveCursor(0,-Math.min(M,D.params[0]||1)):this._moveCursor(0,-(D.params[0]||1)),!0}cursorDown(D){const M=this._activeBuffer.scrollBottom-this._activeBuffer.y;return M>=0?this._moveCursor(0,Math.min(M,D.params[0]||1)):this._moveCursor(0,D.params[0]||1),!0}cursorForward(D){return this._moveCursor(D.params[0]||1,0),!0}cursorBackward(D){return this._moveCursor(-(D.params[0]||1),0),!0}cursorNextLine(D){return this.cursorDown(D),this._activeBuffer.x=0,!0}cursorPrecedingLine(D){return this.cursorUp(D),this._activeBuffer.x=0,!0}cursorCharAbsolute(D){return this._setCursor((D.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(D){return this._setCursor(D.length>=2?(D.params[1]||1)-1:0,(D.params[0]||1)-1),!0}charPosAbsolute(D){return this._setCursor((D.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(D){return this._moveCursor(D.params[0]||1,0),!0}linePosAbsolute(D){return this._setCursor(this._activeBuffer.x,(D.params[0]||1)-1),!0}vPositionRelative(D){return this._moveCursor(0,D.params[0]||1),!0}hVPosition(D){return this.cursorPosition(D),!0}tabClear(D){const M=D.params[0];return M===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:M===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(D){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let M=D.params[0]||1;for(;M--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(D){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let M=D.params[0]||1;for(;M--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(D){const M=D.params[0];return M===1&&(this._curAttrData.bg|=536870912),M!==2&&M!==0||(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(D,M,H,I=!1,X=!1){const J=this._activeBuffer.lines.get(this._activeBuffer.ybase+D);J.replaceCells(M,H,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData(),X),I&&(J.isWrapped=!1)}_resetBufferLine(D,M=!1){const H=this._activeBuffer.lines.get(this._activeBuffer.ybase+D);H&&(H.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),M),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+D),H.isWrapped=!1)}eraseInDisplay(D,M=!1){let H;switch(this._restrictCursor(this._bufferService.cols),D.params[0]){case 0:for(H=this._activeBuffer.y,this._dirtyRowTracker.markDirty(H),this._eraseInBufferLine(H++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,M);H<this._bufferService.rows;H++)this._resetBufferLine(H,M);this._dirtyRowTracker.markDirty(H);break;case 1:for(H=this._activeBuffer.y,this._dirtyRowTracker.markDirty(H),this._eraseInBufferLine(H,0,this._activeBuffer.x+1,!0,M),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(H+1).isWrapped=!1);H--;)this._resetBufferLine(H,M);this._dirtyRowTracker.markDirty(0);break;case 2:for(H=this._bufferService.rows,this._dirtyRowTracker.markDirty(H-1);H--;)this._resetBufferLine(H,M);this._dirtyRowTracker.markDirty(0);break;case 3:const I=this._activeBuffer.lines.length-this._bufferService.rows;I>0&&(this._activeBuffer.lines.trimStart(I),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-I,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-I,0),this._onScroll.fire(0))}return!0}eraseInLine(D,M=!1){switch(this._restrictCursor(this._bufferService.cols),D.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,M);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,M);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,M)}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(D){this._restrictCursor();let M=D.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const H=this._activeBuffer.ybase+this._activeBuffer.y,I=this._bufferService.rows-1-this._activeBuffer.scrollBottom,X=this._bufferService.rows-1+this._activeBuffer.ybase-I+1;for(;M--;)this._activeBuffer.lines.splice(X-1,1),this._activeBuffer.lines.splice(H,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(D){this._restrictCursor();let M=D.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const H=this._activeBuffer.ybase+this._activeBuffer.y;let I;for(I=this._bufferService.rows-1-this._activeBuffer.scrollBottom,I=this._bufferService.rows-1+this._activeBuffer.ybase-I;M--;)this._activeBuffer.lines.splice(H,1),this._activeBuffer.lines.splice(I,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(D){this._restrictCursor();const M=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return M&&(M.insertCells(this._activeBuffer.x,D.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(D){this._restrictCursor();const M=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return M&&(M.deleteCells(this._activeBuffer.x,D.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(D){let M=D.params[0]||1;for(;M--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(D){let M=D.params[0]||1;for(;M--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(n.DEFAULT_ATTR_DATA));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(D){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const M=D.params[0]||1;for(let H=this._activeBuffer.scrollTop;H<=this._activeBuffer.scrollBottom;++H){const I=this._activeBuffer.lines.get(this._activeBuffer.ybase+H);I.deleteCells(0,M,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),I.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(D){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const M=D.params[0]||1;for(let H=this._activeBuffer.scrollTop;H<=this._activeBuffer.scrollBottom;++H){const I=this._activeBuffer.lines.get(this._activeBuffer.ybase+H);I.insertCells(0,M,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),I.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(D){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const M=D.params[0]||1;for(let H=this._activeBuffer.scrollTop;H<=this._activeBuffer.scrollBottom;++H){const I=this._activeBuffer.lines.get(this._activeBuffer.ybase+H);I.insertCells(this._activeBuffer.x,M,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),I.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(D){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const M=D.params[0]||1;for(let H=this._activeBuffer.scrollTop;H<=this._activeBuffer.scrollBottom;++H){const I=this._activeBuffer.lines.get(this._activeBuffer.ybase+H);I.deleteCells(this._activeBuffer.x,M,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),I.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(D){this._restrictCursor();const M=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return M&&(M.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(D.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(D){if(!this._parser.precedingCodepoint)return!0;const M=D.params[0]||1,H=new Uint32Array(M);for(let I=0;I<M;++I)H[I]=this._parser.precedingCodepoint;return this.print(H,0,H.length),!0}sendDeviceAttributesPrimary(D){return D.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(l.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(l.C0.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(D){return D.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(l.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(l.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(D.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(l.C0.ESC+"[>83;40003;0c")),!0}_is(D){return(this._optionsService.rawOptions.termName+"").indexOf(D)===0}setMode(D){for(let M=0;M<D.length;M++)switch(D.params[M]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0}return!0}setModePrivate(D){for(let M=0;M<D.length;M++)switch(D.params[M]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,p.DEFAULT_CHARSET),this._charsetService.setgCharset(1,p.DEFAULT_CHARSET),this._charsetService.setgCharset(2,p.DEFAULT_CHARSET),this._charsetService.setgCharset(3,p.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0}resetMode(D){for(let M=0;M<D.length;M++)switch(D.params[M]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1}return!0}resetModePrivate(D){for(let M=0;M<D.length;M++)switch(D.params[M]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),D.params[M]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0}requestMode(D,M){const H=this._coreService.decPrivateModes,{activeProtocol:I,activeEncoding:X}=this._coreMouseService,J=this._coreService,{buffers:ie,cols:te}=this._bufferService,{active:fe,alt:B}=ie,z=this._optionsService.rawOptions,Z=me=>me?1:2,V=D.params[0];return oe=V,ee=M?V===2?4:V===4?Z(J.modes.insertMode):V===12?3:V===20?Z(z.convertEol):0:V===1?Z(H.applicationCursorKeys):V===3?z.windowOptions.setWinLines?te===80?2:te===132?1:0:0:V===6?Z(H.origin):V===7?Z(H.wraparound):V===8?3:V===9?Z(I==="X10"):V===12?Z(z.cursorBlink):V===25?Z(!J.isCursorHidden):V===45?Z(H.reverseWraparound):V===66?Z(H.applicationKeypad):V===67?4:V===1e3?Z(I==="VT200"):V===1002?Z(I==="DRAG"):V===1003?Z(I==="ANY"):V===1004?Z(H.sendFocus):V===1005?4:V===1006?Z(X==="SGR"):V===1015?4:V===1016?Z(X==="SGR_PIXELS"):V===1048?1:V===47||V===1047||V===1049?Z(fe===B):V===2004?Z(H.bracketedPasteMode):0,J.triggerDataEvent(`${l.C0.ESC}[${M?"":"?"}${oe};${ee}$y`),!0;var oe,ee}_updateAttrColor(D,M,H,I,X){return M===2?(D|=50331648,D&=-16777216,D|=g.AttributeData.fromColorRGB([H,I,X])):M===5&&(D&=-50331904,D|=33554432|255&H),D}_extractColor(D,M,H){const I=[0,0,-1,0,0,0];let X=0,J=0;do{if(I[J+X]=D.params[M+J],D.hasSubParams(M+J)){const ie=D.getSubParams(M+J);let te=0;do I[1]===5&&(X=1),I[J+te+1+X]=ie[te];while(++te<ie.length&&te+J+1+X<I.length);break}if(I[1]===5&&J+X>=2||I[1]===2&&J+X>=5)break;I[1]&&(X=1)}while(++J+M<D.length&&J+X<I.length);for(let ie=2;ie<I.length;++ie)I[ie]===-1&&(I[ie]=0);switch(I[0]){case 38:H.fg=this._updateAttrColor(H.fg,I[1],I[3],I[4],I[5]);break;case 48:H.bg=this._updateAttrColor(H.bg,I[1],I[3],I[4],I[5]);break;case 58:H.extended=H.extended.clone(),H.extended.underlineColor=this._updateAttrColor(H.extended.underlineColor,I[1],I[3],I[4],I[5])}return J}_processUnderline(D,M){M.extended=M.extended.clone(),(!~D||D>5)&&(D=1),M.extended.underlineStyle=D,M.fg|=268435456,D===0&&(M.fg&=-268435457),M.updateExtended()}_processSGR0(D){D.fg=n.DEFAULT_ATTR_DATA.fg,D.bg=n.DEFAULT_ATTR_DATA.bg,D.extended=D.extended.clone(),D.extended.underlineStyle=0,D.extended.underlineColor&=-67108864,D.updateExtended()}charAttributes(D){if(D.length===1&&D.params[0]===0)return this._processSGR0(this._curAttrData),!0;const M=D.length;let H;const I=this._curAttrData;for(let X=0;X<M;X++)H=D.params[X],H>=30&&H<=37?(I.fg&=-50331904,I.fg|=16777216|H-30):H>=40&&H<=47?(I.bg&=-50331904,I.bg|=16777216|H-40):H>=90&&H<=97?(I.fg&=-50331904,I.fg|=16777224|H-90):H>=100&&H<=107?(I.bg&=-50331904,I.bg|=16777224|H-100):H===0?this._processSGR0(I):H===1?I.fg|=134217728:H===3?I.bg|=67108864:H===4?(I.fg|=268435456,this._processUnderline(D.hasSubParams(X)?D.getSubParams(X)[0]:1,I)):H===5?I.fg|=536870912:H===7?I.fg|=67108864:H===8?I.fg|=1073741824:H===9?I.fg|=2147483648:H===2?I.bg|=134217728:H===21?this._processUnderline(2,I):H===22?(I.fg&=-134217729,I.bg&=-134217729):H===23?I.bg&=-67108865:H===24?(I.fg&=-268435457,this._processUnderline(0,I)):H===25?I.fg&=-536870913:H===27?I.fg&=-67108865:H===28?I.fg&=-1073741825:H===29?I.fg&=2147483647:H===39?(I.fg&=-67108864,I.fg|=16777215&n.DEFAULT_ATTR_DATA.fg):H===49?(I.bg&=-67108864,I.bg|=16777215&n.DEFAULT_ATTR_DATA.bg):H===38||H===48||H===58?X+=this._extractColor(D,X,I):H===53?I.bg|=1073741824:H===55?I.bg&=-1073741825:H===59?(I.extended=I.extended.clone(),I.extended.underlineColor=-1,I.updateExtended()):H===100?(I.fg&=-67108864,I.fg|=16777215&n.DEFAULT_ATTR_DATA.fg,I.bg&=-67108864,I.bg|=16777215&n.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",H);return!0}deviceStatus(D){switch(D.params[0]){case 5:this._coreService.triggerDataEvent(`${l.C0.ESC}[0n`);break;case 6:const M=this._activeBuffer.y+1,H=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${l.C0.ESC}[${M};${H}R`)}return!0}deviceStatusPrivate(D){if(D.params[0]===6){const M=this._activeBuffer.y+1,H=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${l.C0.ESC}[?${M};${H}R`)}return!0}softReset(D){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=n.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(D){const M=D.params[0]||1;switch(M){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}const H=M%2==1;return this._optionsService.options.cursorBlink=H,!0}setScrollRegion(D){const M=D.params[0]||1;let H;return(D.length<2||(H=D.params[1])>this._bufferService.rows||H===0)&&(H=this._bufferService.rows),H>M&&(this._activeBuffer.scrollTop=M-1,this._activeBuffer.scrollBottom=H-1,this._setCursor(0,0)),!0}windowOptions(D){if(!T(D.params[0],this._optionsService.rawOptions.windowOptions))return!0;const M=D.length>1?D.params[1]:0;switch(D.params[0]){case 14:M!==2&&this._onRequestWindowsOptionsReport.fire(x.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(x.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${l.C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:M!==0&&M!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),M!==0&&M!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:M!==0&&M!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),M!==0&&M!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0}saveCursor(D){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(D){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(D){return this._windowTitle=D,this._onTitleChange.fire(D),!0}setIconName(D){return this._iconName=D,!0}setOrReportIndexedColor(D){const M=[],H=D.split(";");for(;H.length>1;){const I=H.shift(),X=H.shift();if(/^\d+$/.exec(I)){const J=parseInt(I);if(q(J))if(X==="?")M.push({type:0,index:J});else{const ie=(0,C.parseColor)(X);ie&&M.push({type:1,index:J,color:ie})}}}return M.length&&this._onColor.fire(M),!0}setHyperlink(D){const M=D.split(";");return!(M.length<2)&&(M[1]?this._createHyperlink(M[0],M[1]):!M[0]&&this._finishHyperlink())}_createHyperlink(D,M){this._getCurrentLinkId()&&this._finishHyperlink();const H=D.split(":");let I;const X=H.findIndex(J=>J.startsWith("id="));return X!==-1&&(I=H[X].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:I,uri:M}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(D,M){const H=D.split(";");for(let I=0;I<H.length&&!(M>=this._specialColors.length);++I,++M)if(H[I]==="?")this._onColor.fire([{type:0,index:this._specialColors[M]}]);else{const X=(0,C.parseColor)(H[I]);X&&this._onColor.fire([{type:1,index:this._specialColors[M],color:X}])}return!0}setOrReportFgColor(D){return this._setOrReportSpecialColor(D,0)}setOrReportBgColor(D){return this._setOrReportSpecialColor(D,1)}setOrReportCursorColor(D){return this._setOrReportSpecialColor(D,2)}restoreIndexedColor(D){if(!D)return this._onColor.fire([{type:2}]),!0;const M=[],H=D.split(";");for(let I=0;I<H.length;++I)if(/^\d+$/.exec(H[I])){const X=parseInt(H[I]);q(X)&&M.push({type:2,index:X})}return M.length&&this._onColor.fire(M),!0}restoreFgColor(D){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(D){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(D){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,p.DEFAULT_CHARSET),!0}selectCharset(D){return D.length!==2?(this.selectDefaultCharset(),!0):(D[0]==="/"||this._charsetService.setgCharset(k[D[0]],p.CHARSETS[D[1]]||p.DEFAULT_CHARSET),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){const D=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,D,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=n.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=n.DEFAULT_ATTR_DATA.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal}setgLevel(D){return this._charsetService.setgLevel(D),!0}screenAlignmentPattern(){const D=new u.CellData;D.content=4194304|"E".charCodeAt(0),D.fg=this._curAttrData.fg,D.bg=this._curAttrData.bg,this._setCursor(0,0);for(let M=0;M<this._bufferService.rows;++M){const H=this._activeBuffer.ybase+this._activeBuffer.y+M,I=this._activeBuffer.lines.get(H);I&&(I.fill(D),I.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(D,M){const H=this._bufferService.buffer,I=this._optionsService.rawOptions;return(X=>(this._coreService.triggerDataEvent(`${l.C0.ESC}${X}${l.C0.ESC}\\`),!0))(D==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:D==='"p'?'P1$r61;1"p':D==="r"?`P1$r${H.scrollTop+1};${H.scrollBottom+1}r`:D==="m"?"P1$r0m":D===" q"?`P1$r${{block:2,underline:4,bar:6}[I.cursorStyle]-(I.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(D,M){this._dirtyRowTracker.markRangeDirty(D,M)}}i.InputHandler=U;let $=class{constructor(F){this._bufferService=F,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(F){F<this.start?this.start=F:F>this.end&&(this.end=F)}markRangeDirty(F,D){F>D&&(O=F,F=D,D=O),F<this.start&&(this.start=F),D>this.end&&(this.end=D)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};function q(F){return 0<=F&&F<256}$=c([f(0,v.IBufferService)],$)},844:(_,i)=>{function r(c){for(const f of c)f.dispose();c.length=0}Object.defineProperty(i,"__esModule",{value:!0}),i.getDisposeArrayDisposable=i.disposeArray=i.toDisposable=i.MutableDisposable=i.Disposable=void 0,i.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const c of this._disposables)c.dispose();this._disposables.length=0}register(c){return this._disposables.push(c),c}unregister(c){const f=this._disposables.indexOf(c);f!==-1&&this._disposables.splice(f,1)}},i.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(c){var f;this._isDisposed||c===this._value||((f=this._value)===null||f===void 0||f.dispose(),this._value=c)}clear(){this.value=void 0}dispose(){var c;this._isDisposed=!0,(c=this._value)===null||c===void 0||c.dispose(),this._value=void 0}},i.toDisposable=function(c){return{dispose:c}},i.disposeArray=r,i.getDisposeArrayDisposable=function(c){return{dispose:()=>r(c)}}},1505:(_,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.FourKeyMap=i.TwoKeyMap=void 0;class r{constructor(){this._data={}}set(f,l,p){this._data[f]||(this._data[f]={}),this._data[f][l]=p}get(f,l){return this._data[f]?this._data[f][l]:void 0}clear(){this._data={}}}i.TwoKeyMap=r,i.FourKeyMap=class{constructor(){this._data=new r}set(c,f,l,p,b){this._data.get(c,f)||this._data.set(c,f,new r),this._data.get(c,f).set(l,p,b)}get(c,f,l,p){var b;return(b=this._data.get(c,f))===null||b===void 0?void 0:b.get(l,p)}clear(){this._data.clear()}}},6114:(_,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.isChromeOS=i.isLinux=i.isWindows=i.isIphone=i.isIpad=i.isMac=i.getSafariVersion=i.isSafari=i.isLegacyEdge=i.isFirefox=i.isNode=void 0,i.isNode=typeof navigator>"u";const r=i.isNode?"node":navigator.userAgent,c=i.isNode?"node":navigator.platform;i.isFirefox=r.includes("Firefox"),i.isLegacyEdge=r.includes("Edge"),i.isSafari=/^((?!chrome|android).)*safari/i.test(r),i.getSafariVersion=function(){if(!i.isSafari)return 0;const f=r.match(/Version\/(\d+)/);return f===null||f.length<2?0:parseInt(f[1])},i.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(c),i.isIpad=c==="iPad",i.isIphone=c==="iPhone",i.isWindows=["Windows","Win16","Win32","WinCE"].includes(c),i.isLinux=c.indexOf("Linux")>=0,i.isChromeOS=/\bCrOS\b/.test(r)},6106:(_,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.SortedList=void 0;let r=0;i.SortedList=class{constructor(c){this._getKey=c,this._array=[]}clear(){this._array.length=0}insert(c){this._array.length!==0?(r=this._search(this._getKey(c)),this._array.splice(r,0,c)):this._array.push(c)}delete(c){if(this._array.length===0)return!1;const f=this._getKey(c);if(f===void 0||(r=this._search(f),r===-1)||this._getKey(this._array[r])!==f)return!1;do if(this._array[r]===c)return this._array.splice(r,1),!0;while(++r<this._array.length&&this._getKey(this._array[r])===f);return!1}*getKeyIterator(c){if(this._array.length!==0&&(r=this._search(c),!(r<0||r>=this._array.length)&&this._getKey(this._array[r])===c))do yield this._array[r];while(++r<this._array.length&&this._getKey(this._array[r])===c)}forEachByKey(c,f){if(this._array.length!==0&&(r=this._search(c),!(r<0||r>=this._array.length)&&this._getKey(this._array[r])===c))do f(this._array[r]);while(++r<this._array.length&&this._getKey(this._array[r])===c)}values(){return[...this._array].values()}_search(c){let f=0,l=this._array.length-1;for(;l>=f;){let p=f+l>>1;const b=this._getKey(this._array[p]);if(b>c)l=p-1;else{if(!(b<c)){for(;p>0&&this._getKey(this._array[p-1])===c;)p--;return p}f=p+1}}return f}}},7226:(_,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DebouncedIdleTask=i.IdleTaskQueue=i.PriorityTaskQueue=void 0;const c=r(6114);class f{constructor(){this._tasks=[],this._i=0}enqueue(b){this._tasks.push(b),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(b){this._idleCallback=void 0;let w=0,S=0,n=b.timeRemaining(),h=0;for(;this._i<this._tasks.length;){if(w=Date.now(),this._tasks[this._i]()||this._i++,w=Math.max(1,Date.now()-w),S=Math.max(w,S),h=b.timeRemaining(),1.5*S>h)return n-w<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(n-w))}ms`),void this._start();n=h}this.clear()}}class l extends f{_requestCallback(b){return setTimeout(()=>b(this._createDeadline(16)))}_cancelCallback(b){clearTimeout(b)}_createDeadline(b){const w=Date.now()+b;return{timeRemaining:()=>Math.max(0,w-Date.now())}}}i.PriorityTaskQueue=l,i.IdleTaskQueue=!c.isNode&&"requestIdleCallback"in window?class extends f{_requestCallback(p){return requestIdleCallback(p)}_cancelCallback(p){cancelIdleCallback(p)}}:l,i.DebouncedIdleTask=class{constructor(){this._queue=new i.IdleTaskQueue}set(p){this._queue.clear(),this._queue.enqueue(p)}flush(){this._queue.flush()}}},9282:(_,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.updateWindowsModeWrappedState=void 0;const c=r(643);i.updateWindowsModeWrappedState=function(f){const l=f.buffer.lines.get(f.buffer.ybase+f.buffer.y-1),p=l==null?void 0:l.get(f.cols-1),b=f.buffer.lines.get(f.buffer.ybase+f.buffer.y);b&&p&&(b.isWrapped=p[c.CHAR_DATA_CODE_INDEX]!==c.NULL_CELL_CODE&&p[c.CHAR_DATA_CODE_INDEX]!==c.WHITESPACE_CELL_CODE)}},3734:(_,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ExtendedAttrs=i.AttributeData=void 0;class r{constructor(){this.fg=0,this.bg=0,this.extended=new c}static toColorRGB(l){return[l>>>16&255,l>>>8&255,255&l]}static fromColorRGB(l){return(255&l[0])<<16|(255&l[1])<<8|255&l[2]}clone(){const l=new r;return l.fg=this.fg,l.bg=this.bg,l.extended=this.extended.clone(),l}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}}i.AttributeData=r;class c{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(l){this._ext=l}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(l){this._ext&=-469762049,this._ext|=l<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(l){this._ext&=-67108864,this._ext|=67108863&l}get urlId(){return this._urlId}set urlId(l){this._urlId=l}constructor(l=0,p=0){this._ext=0,this._urlId=0,this._ext=l,this._urlId=p}clone(){return new c(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}i.ExtendedAttrs=c},9092:(_,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Buffer=i.MAX_BUFFER_SIZE=void 0;const c=r(6349),f=r(7226),l=r(3734),p=r(8437),b=r(4634),w=r(511),S=r(643),n=r(4863),h=r(7116);i.MAX_BUFFER_SIZE=4294967295,i.Buffer=class{constructor(a,u,g){this._hasScrollback=a,this._optionsService=u,this._bufferService=g,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=p.DEFAULT_ATTR_DATA.clone(),this.savedCharset=h.DEFAULT_CHARSET,this.markers=[],this._nullCell=w.CellData.fromCharData([0,S.NULL_CELL_CHAR,S.NULL_CELL_WIDTH,S.NULL_CELL_CODE]),this._whitespaceCell=w.CellData.fromCharData([0,S.WHITESPACE_CELL_CHAR,S.WHITESPACE_CELL_WIDTH,S.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._memoryCleanupQueue=new f.IdleTaskQueue,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new c.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(a){return a?(this._nullCell.fg=a.fg,this._nullCell.bg=a.bg,this._nullCell.extended=a.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new l.ExtendedAttrs),this._nullCell}getWhitespaceCell(a){return a?(this._whitespaceCell.fg=a.fg,this._whitespaceCell.bg=a.bg,this._whitespaceCell.extended=a.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new l.ExtendedAttrs),this._whitespaceCell}getBlankLine(a,u){return new p.BufferLine(this._bufferService.cols,this.getNullCell(a),u)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){const a=this.ybase+this.y-this.ydisp;return a>=0&&a<this._rows}_getCorrectBufferLength(a){if(!this._hasScrollback)return a;const u=a+this._optionsService.rawOptions.scrollback;return u>i.MAX_BUFFER_SIZE?i.MAX_BUFFER_SIZE:u}fillViewportRows(a){if(this.lines.length===0){a===void 0&&(a=p.DEFAULT_ATTR_DATA);let u=this._rows;for(;u--;)this.lines.push(this.getBlankLine(a))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new c.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(a,u){const g=this.getNullCell(p.DEFAULT_ATTR_DATA);let v=0;const y=this._getCorrectBufferLength(u);if(y>this.lines.maxLength&&(this.lines.maxLength=y),this.lines.length>0){if(this._cols<a)for(let C=0;C<this.lines.length;C++)v+=+this.lines.get(C).resize(a,g);let E=0;if(this._rows<u)for(let C=this._rows;C<u;C++)this.lines.length<u+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new p.BufferLine(a,g)):this.ybase>0&&this.lines.length<=this.ybase+this.y+E+1?(this.ybase--,E++,this.ydisp>0&&this.ydisp--):this.lines.push(new p.BufferLine(a,g)));else for(let C=this._rows;C>u;C--)this.lines.length>u+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(y<this.lines.maxLength){const C=this.lines.length-y;C>0&&(this.lines.trimStart(C),this.ybase=Math.max(this.ybase-C,0),this.ydisp=Math.max(this.ydisp-C,0),this.savedY=Math.max(this.savedY-C,0)),this.lines.maxLength=y}this.x=Math.min(this.x,a-1),this.y=Math.min(this.y,u-1),E&&(this.y+=E),this.savedX=Math.min(this.savedX,a-1),this.scrollTop=0}if(this.scrollBottom=u-1,this._isReflowEnabled&&(this._reflow(a,u),this._cols>a))for(let E=0;E<this.lines.length;E++)v+=+this.lines.get(E).resize(a,g);this._cols=a,this._rows=u,this._memoryCleanupQueue.clear(),v>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue(()=>this._batchedMemoryCleanup()))}_batchedMemoryCleanup(){let a=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,a=!1);let u=0;for(;this._memoryCleanupPosition<this.lines.length;)if(u+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),u>100)return!0;return a}get _isReflowEnabled(){const a=this._optionsService.rawOptions.windowsPty;return a&&a.buildNumber?this._hasScrollback&&a.backend==="conpty"&&a.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(a,u){this._cols!==a&&(a>this._cols?this._reflowLarger(a,u):this._reflowSmaller(a,u))}_reflowLarger(a,u){const g=(0,b.reflowLargerGetLinesToRemove)(this.lines,this._cols,a,this.ybase+this.y,this.getNullCell(p.DEFAULT_ATTR_DATA));if(g.length>0){const v=(0,b.reflowLargerCreateNewLayout)(this.lines,g);(0,b.reflowLargerApplyNewLayout)(this.lines,v.layout),this._reflowLargerAdjustViewport(a,u,v.countRemoved)}}_reflowLargerAdjustViewport(a,u,g){const v=this.getNullCell(p.DEFAULT_ATTR_DATA);let y=g;for(;y-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<u&&this.lines.push(new p.BufferLine(a,v))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-g,0)}_reflowSmaller(a,u){const g=this.getNullCell(p.DEFAULT_ATTR_DATA),v=[];let y=0;for(let E=this.lines.length-1;E>=0;E--){let C=this.lines.get(E);if(!C||!C.isWrapped&&C.getTrimmedLength()<=a)continue;const k=[C];for(;C.isWrapped&&E>0;)C=this.lines.get(--E),k.unshift(C);const L=this.ybase+this.y;if(L>=E&&L<E+k.length)continue;const T=k[k.length-1].getTrimmedLength(),x=(0,b.reflowSmallerGetNewLineLengths)(k,this._cols,a),O=x.length-k.length;let U;U=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+O):Math.max(0,this.lines.length-this.lines.maxLength+O);const $=[];for(let I=0;I<O;I++){const X=this.getBlankLine(p.DEFAULT_ATTR_DATA,!0);$.push(X)}$.length>0&&(v.push({start:E+k.length+y,newLines:$}),y+=$.length),k.push(...$);let q=x.length-1,F=x[q];F===0&&(q--,F=x[q]);let D=k.length-O-1,M=T;for(;D>=0;){const I=Math.min(M,F);if(k[q]===void 0)break;if(k[q].copyCellsFrom(k[D],M-I,F-I,I,!0),F-=I,F===0&&(q--,F=x[q]),M-=I,M===0){D--;const X=Math.max(D,0);M=(0,b.getWrappedLineTrimmedLength)(k,X,this._cols)}}for(let I=0;I<k.length;I++)x[I]<a&&k[I].setCell(x[I],g);let H=O-U;for(;H-- >0;)this.ybase===0?this.y<u-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+y)-u&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+O,this.ybase+u-1)}if(v.length>0){const E=[],C=[];for(let q=0;q<this.lines.length;q++)C.push(this.lines.get(q));const k=this.lines.length;let L=k-1,T=0,x=v[T];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+y);let O=0;for(let q=Math.min(this.lines.maxLength-1,k+y-1);q>=0;q--)if(x&&x.start>L+O){for(let F=x.newLines.length-1;F>=0;F--)this.lines.set(q--,x.newLines[F]);q++,E.push({index:L+1,amount:x.newLines.length}),O+=x.newLines.length,x=v[++T]}else this.lines.set(q,C[L--]);let U=0;for(let q=E.length-1;q>=0;q--)E[q].index+=U,this.lines.onInsertEmitter.fire(E[q]),U+=E[q].amount;const $=Math.max(0,k+y-this.lines.maxLength);$>0&&this.lines.onTrimEmitter.fire($)}}translateBufferLineToString(a,u,g=0,v){const y=this.lines.get(a);return y?y.translateToString(u,g,v):""}getWrappedRangeForLine(a){let u=a,g=a;for(;u>0&&this.lines.get(u).isWrapped;)u--;for(;g+1<this.lines.length&&this.lines.get(g+1).isWrapped;)g++;return{first:u,last:g}}setupTabStops(a){for(a!=null?this.tabs[a]||(a=this.prevStop(a)):(this.tabs={},a=0);a<this._cols;a+=this._optionsService.rawOptions.tabStopWidth)this.tabs[a]=!0}prevStop(a){for(a==null&&(a=this.x);!this.tabs[--a]&&a>0;);return a>=this._cols?this._cols-1:a<0?0:a}nextStop(a){for(a==null&&(a=this.x);!this.tabs[++a]&&a<this._cols;);return a>=this._cols?this._cols-1:a<0?0:a}clearMarkers(a){this._isClearing=!0;for(let u=0;u<this.markers.length;u++)this.markers[u].line===a&&(this.markers[u].dispose(),this.markers.splice(u--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let a=0;a<this.markers.length;a++)this.markers[a].dispose(),this.markers.splice(a--,1);this._isClearing=!1}addMarker(a){const u=new n.Marker(a);return this.markers.push(u),u.register(this.lines.onTrim(g=>{u.line-=g,u.line<0&&u.dispose()})),u.register(this.lines.onInsert(g=>{u.line>=g.index&&(u.line+=g.amount)})),u.register(this.lines.onDelete(g=>{u.line>=g.index&&u.line<g.index+g.amount&&u.dispose(),u.line>g.index&&(u.line-=g.amount)})),u.register(u.onDispose(()=>this._removeMarker(u))),u}_removeMarker(a){this._isClearing||this.markers.splice(this.markers.indexOf(a),1)}}},8437:(_,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferLine=i.DEFAULT_ATTR_DATA=void 0;const c=r(3734),f=r(511),l=r(643),p=r(482);i.DEFAULT_ATTR_DATA=Object.freeze(new c.AttributeData);let b=0;class w{constructor(n,h,a=!1){this.isWrapped=a,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*n);const u=h||f.CellData.fromCharData([0,l.NULL_CELL_CHAR,l.NULL_CELL_WIDTH,l.NULL_CELL_CODE]);for(let g=0;g<n;++g)this.setCell(g,u);this.length=n}get(n){const h=this._data[3*n+0],a=2097151&h;return[this._data[3*n+1],2097152&h?this._combined[n]:a?(0,p.stringFromCodePoint)(a):"",h>>22,2097152&h?this._combined[n].charCodeAt(this._combined[n].length-1):a]}set(n,h){this._data[3*n+1]=h[l.CHAR_DATA_ATTR_INDEX],h[l.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[n]=h[1],this._data[3*n+0]=2097152|n|h[l.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*n+0]=h[l.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|h[l.CHAR_DATA_WIDTH_INDEX]<<22}getWidth(n){return this._data[3*n+0]>>22}hasWidth(n){return 12582912&this._data[3*n+0]}getFg(n){return this._data[3*n+1]}getBg(n){return this._data[3*n+2]}hasContent(n){return 4194303&this._data[3*n+0]}getCodePoint(n){const h=this._data[3*n+0];return 2097152&h?this._combined[n].charCodeAt(this._combined[n].length-1):2097151&h}isCombined(n){return 2097152&this._data[3*n+0]}getString(n){const h=this._data[3*n+0];return 2097152&h?this._combined[n]:2097151&h?(0,p.stringFromCodePoint)(2097151&h):""}isProtected(n){return 536870912&this._data[3*n+2]}loadCell(n,h){return b=3*n,h.content=this._data[b+0],h.fg=this._data[b+1],h.bg=this._data[b+2],2097152&h.content&&(h.combinedData=this._combined[n]),268435456&h.bg&&(h.extended=this._extendedAttrs[n]),h}setCell(n,h){2097152&h.content&&(this._combined[n]=h.combinedData),268435456&h.bg&&(this._extendedAttrs[n]=h.extended),this._data[3*n+0]=h.content,this._data[3*n+1]=h.fg,this._data[3*n+2]=h.bg}setCellFromCodePoint(n,h,a,u,g,v){268435456&g&&(this._extendedAttrs[n]=v),this._data[3*n+0]=h|a<<22,this._data[3*n+1]=u,this._data[3*n+2]=g}addCodepointToCell(n,h){let a=this._data[3*n+0];2097152&a?this._combined[n]+=(0,p.stringFromCodePoint)(h):(2097151&a?(this._combined[n]=(0,p.stringFromCodePoint)(2097151&a)+(0,p.stringFromCodePoint)(h),a&=-2097152,a|=2097152):a=h|4194304,this._data[3*n+0]=a)}insertCells(n,h,a,u){if((n%=this.length)&&this.getWidth(n-1)===2&&this.setCellFromCodePoint(n-1,0,1,(u==null?void 0:u.fg)||0,(u==null?void 0:u.bg)||0,(u==null?void 0:u.extended)||new c.ExtendedAttrs),h<this.length-n){const g=new f.CellData;for(let v=this.length-n-h-1;v>=0;--v)this.setCell(n+h+v,this.loadCell(n+v,g));for(let v=0;v<h;++v)this.setCell(n+v,a)}else for(let g=n;g<this.length;++g)this.setCell(g,a);this.getWidth(this.length-1)===2&&this.setCellFromCodePoint(this.length-1,0,1,(u==null?void 0:u.fg)||0,(u==null?void 0:u.bg)||0,(u==null?void 0:u.extended)||new c.ExtendedAttrs)}deleteCells(n,h,a,u){if(n%=this.length,h<this.length-n){const g=new f.CellData;for(let v=0;v<this.length-n-h;++v)this.setCell(n+v,this.loadCell(n+h+v,g));for(let v=this.length-h;v<this.length;++v)this.setCell(v,a)}else for(let g=n;g<this.length;++g)this.setCell(g,a);n&&this.getWidth(n-1)===2&&this.setCellFromCodePoint(n-1,0,1,(u==null?void 0:u.fg)||0,(u==null?void 0:u.bg)||0,(u==null?void 0:u.extended)||new c.ExtendedAttrs),this.getWidth(n)!==0||this.hasContent(n)||this.setCellFromCodePoint(n,0,1,(u==null?void 0:u.fg)||0,(u==null?void 0:u.bg)||0,(u==null?void 0:u.extended)||new c.ExtendedAttrs)}replaceCells(n,h,a,u,g=!1){if(g)for(n&&this.getWidth(n-1)===2&&!this.isProtected(n-1)&&this.setCellFromCodePoint(n-1,0,1,(u==null?void 0:u.fg)||0,(u==null?void 0:u.bg)||0,(u==null?void 0:u.extended)||new c.ExtendedAttrs),h<this.length&&this.getWidth(h-1)===2&&!this.isProtected(h)&&this.setCellFromCodePoint(h,0,1,(u==null?void 0:u.fg)||0,(u==null?void 0:u.bg)||0,(u==null?void 0:u.extended)||new c.ExtendedAttrs);n<h&&n<this.length;)this.isProtected(n)||this.setCell(n,a),n++;else for(n&&this.getWidth(n-1)===2&&this.setCellFromCodePoint(n-1,0,1,(u==null?void 0:u.fg)||0,(u==null?void 0:u.bg)||0,(u==null?void 0:u.extended)||new c.ExtendedAttrs),h<this.length&&this.getWidth(h-1)===2&&this.setCellFromCodePoint(h,0,1,(u==null?void 0:u.fg)||0,(u==null?void 0:u.bg)||0,(u==null?void 0:u.extended)||new c.ExtendedAttrs);n<h&&n<this.length;)this.setCell(n++,a)}resize(n,h){if(n===this.length)return 4*this._data.length*2<this._data.buffer.byteLength;const a=3*n;if(n>this.length){if(this._data.buffer.byteLength>=4*a)this._data=new Uint32Array(this._data.buffer,0,a);else{const u=new Uint32Array(a);u.set(this._data),this._data=u}for(let u=this.length;u<n;++u)this.setCell(u,h)}else{this._data=this._data.subarray(0,a);const u=Object.keys(this._combined);for(let v=0;v<u.length;v++){const y=parseInt(u[v],10);y>=n&&delete this._combined[y]}const g=Object.keys(this._extendedAttrs);for(let v=0;v<g.length;v++){const y=parseInt(g[v],10);y>=n&&delete this._extendedAttrs[y]}}return this.length=n,4*a*2<this._data.buffer.byteLength}cleanupMemory(){if(4*this._data.length*2<this._data.buffer.byteLength){const n=new Uint32Array(this._data.length);return n.set(this._data),this._data=n,1}return 0}fill(n,h=!1){if(h)for(let a=0;a<this.length;++a)this.isProtected(a)||this.setCell(a,n);else{this._combined={},this._extendedAttrs={};for(let a=0;a<this.length;++a)this.setCell(a,n)}}copyFrom(n){this.length!==n.length?this._data=new Uint32Array(n._data):this._data.set(n._data),this.length=n.length,this._combined={};for(const h in n._combined)this._combined[h]=n._combined[h];this._extendedAttrs={};for(const h in n._extendedAttrs)this._extendedAttrs[h]=n._extendedAttrs[h];this.isWrapped=n.isWrapped}clone(){const n=new w(0);n._data=new Uint32Array(this._data),n.length=this.length;for(const h in this._combined)n._combined[h]=this._combined[h];for(const h in this._extendedAttrs)n._extendedAttrs[h]=this._extendedAttrs[h];return n.isWrapped=this.isWrapped,n}getTrimmedLength(){for(let n=this.length-1;n>=0;--n)if(4194303&this._data[3*n+0])return n+(this._data[3*n+0]>>22);return 0}getNoBgTrimmedLength(){for(let n=this.length-1;n>=0;--n)if(4194303&this._data[3*n+0]||50331648&this._data[3*n+2])return n+(this._data[3*n+0]>>22);return 0}copyCellsFrom(n,h,a,u,g){const v=n._data;if(g)for(let E=u-1;E>=0;E--){for(let C=0;C<3;C++)this._data[3*(a+E)+C]=v[3*(h+E)+C];268435456&v[3*(h+E)+2]&&(this._extendedAttrs[a+E]=n._extendedAttrs[h+E])}else for(let E=0;E<u;E++){for(let C=0;C<3;C++)this._data[3*(a+E)+C]=v[3*(h+E)+C];268435456&v[3*(h+E)+2]&&(this._extendedAttrs[a+E]=n._extendedAttrs[h+E])}const y=Object.keys(n._combined);for(let E=0;E<y.length;E++){const C=parseInt(y[E],10);C>=h&&(this._combined[C-h+a]=n._combined[C])}}translateToString(n=!1,h=0,a=this.length){n&&(a=Math.min(a,this.getTrimmedLength()));let u="";for(;h<a;){const g=this._data[3*h+0],v=2097151&g;u+=2097152&g?this._combined[h]:v?(0,p.stringFromCodePoint)(v):l.WHITESPACE_CELL_CHAR,h+=g>>22||1}return u}}i.BufferLine=w},4841:(_,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.getRangeLength=void 0,i.getRangeLength=function(r,c){if(r.start.y>r.end.y)throw new Error(`Buffer range end (${r.end.x}, ${r.end.y}) cannot be before start (${r.start.x}, ${r.start.y})`);return c*(r.end.y-r.start.y)+(r.end.x-r.start.x+1)}},4634:(_,i)=>{function r(c,f,l){if(f===c.length-1)return c[f].getTrimmedLength();const p=!c[f].hasContent(l-1)&&c[f].getWidth(l-1)===1,b=c[f+1].getWidth(0)===2;return p&&b?l-1:l}Object.defineProperty(i,"__esModule",{value:!0}),i.getWrappedLineTrimmedLength=i.reflowSmallerGetNewLineLengths=i.reflowLargerApplyNewLayout=i.reflowLargerCreateNewLayout=i.reflowLargerGetLinesToRemove=void 0,i.reflowLargerGetLinesToRemove=function(c,f,l,p,b){const w=[];for(let S=0;S<c.length-1;S++){let n=S,h=c.get(++n);if(!h.isWrapped)continue;const a=[c.get(S)];for(;n<c.length&&h.isWrapped;)a.push(h),h=c.get(++n);if(p>=S&&p<n){S+=a.length-1;continue}let u=0,g=r(a,u,f),v=1,y=0;for(;v<a.length;){const C=r(a,v,f),k=C-y,L=l-g,T=Math.min(k,L);a[u].copyCellsFrom(a[v],y,g,T,!1),g+=T,g===l&&(u++,g=0),y+=T,y===C&&(v++,y=0),g===0&&u!==0&&a[u-1].getWidth(l-1)===2&&(a[u].copyCellsFrom(a[u-1],l-1,g++,1,!1),a[u-1].setCell(l-1,b))}a[u].replaceCells(g,l,b);let E=0;for(let C=a.length-1;C>0&&(C>u||a[C].getTrimmedLength()===0);C--)E++;E>0&&(w.push(S+a.length-E),w.push(E)),S+=a.length-1}return w},i.reflowLargerCreateNewLayout=function(c,f){const l=[];let p=0,b=f[p],w=0;for(let S=0;S<c.length;S++)if(b===S){const n=f[++p];c.onDeleteEmitter.fire({index:S-w,amount:n}),S+=n-1,w+=n,b=f[++p]}else l.push(S);return{layout:l,countRemoved:w}},i.reflowLargerApplyNewLayout=function(c,f){const l=[];for(let p=0;p<f.length;p++)l.push(c.get(f[p]));for(let p=0;p<l.length;p++)c.set(p,l[p]);c.length=f.length},i.reflowSmallerGetNewLineLengths=function(c,f,l){const p=[],b=c.map((h,a)=>r(c,a,f)).reduce((h,a)=>h+a);let w=0,S=0,n=0;for(;n<b;){if(b-n<l){p.push(b-n);break}w+=l;const h=r(c,S,f);w>h&&(w-=h,S++);const a=c[S].getWidth(w-1)===2;a&&w--;const u=a?l-1:l;p.push(u),n+=u}return p},i.getWrappedLineTrimmedLength=r},5295:(_,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferSet=void 0;const c=r(8460),f=r(844),l=r(9092);class p extends f.Disposable{constructor(w,S){super(),this._optionsService=w,this._bufferService=S,this._onBufferActivate=this.register(new c.EventEmitter),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.resize(this._bufferService.cols,this._bufferService.rows))),this.register(this._optionsService.onSpecificOptionChange("tabStopWidth",()=>this.setupTabStops()))}reset(){this._normal=new l.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new l.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(w){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(w),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(w,S){this._normal.resize(w,S),this._alt.resize(w,S),this.setupTabStops(w)}setupTabStops(w){this._normal.setupTabStops(w),this._alt.setupTabStops(w)}}i.BufferSet=p},511:(_,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CellData=void 0;const c=r(482),f=r(643),l=r(3734);class p extends l.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new l.ExtendedAttrs,this.combinedData=""}static fromCharData(w){const S=new p;return S.setFromCharData(w),S}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,c.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(w){this.fg=w[f.CHAR_DATA_ATTR_INDEX],this.bg=0;let S=!1;if(w[f.CHAR_DATA_CHAR_INDEX].length>2)S=!0;else if(w[f.CHAR_DATA_CHAR_INDEX].length===2){const n=w[f.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=n&&n<=56319){const h=w[f.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=h&&h<=57343?this.content=1024*(n-55296)+h-56320+65536|w[f.CHAR_DATA_WIDTH_INDEX]<<22:S=!0}else S=!0}else this.content=w[f.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|w[f.CHAR_DATA_WIDTH_INDEX]<<22;S&&(this.combinedData=w[f.CHAR_DATA_CHAR_INDEX],this.content=2097152|w[f.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}i.CellData=p},643:(_,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.WHITESPACE_CELL_CODE=i.WHITESPACE_CELL_WIDTH=i.WHITESPACE_CELL_CHAR=i.NULL_CELL_CODE=i.NULL_CELL_WIDTH=i.NULL_CELL_CHAR=i.CHAR_DATA_CODE_INDEX=i.CHAR_DATA_WIDTH_INDEX=i.CHAR_DATA_CHAR_INDEX=i.CHAR_DATA_ATTR_INDEX=i.DEFAULT_EXT=i.DEFAULT_ATTR=i.DEFAULT_COLOR=void 0,i.DEFAULT_COLOR=0,i.DEFAULT_ATTR=256|i.DEFAULT_COLOR<<9,i.DEFAULT_EXT=0,i.CHAR_DATA_ATTR_INDEX=0,i.CHAR_DATA_CHAR_INDEX=1,i.CHAR_DATA_WIDTH_INDEX=2,i.CHAR_DATA_CODE_INDEX=3,i.NULL_CELL_CHAR="",i.NULL_CELL_WIDTH=1,i.NULL_CELL_CODE=0,i.WHITESPACE_CELL_CHAR=" ",i.WHITESPACE_CELL_WIDTH=1,i.WHITESPACE_CELL_CODE=32},4863:(_,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Marker=void 0;const c=r(8460),f=r(844);class l{get id(){return this._id}constructor(b){this.line=b,this.isDisposed=!1,this._disposables=[],this._id=l._nextId++,this._onDispose=this.register(new c.EventEmitter),this.onDispose=this._onDispose.event}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),(0,f.disposeArray)(this._disposables),this._disposables.length=0)}register(b){return this._disposables.push(b),b}}i.Marker=l,l._nextId=1},7116:(_,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DEFAULT_CHARSET=i.CHARSETS=void 0,i.CHARSETS={},i.DEFAULT_CHARSET=i.CHARSETS.B,i.CHARSETS[0]={"`":"◆",a:"▒",b:"␉",c:"␌",d:"␍",e:"␊",f:"°",g:"±",h:"␤",i:"␋",j:"┘",k:"┐",l:"┌",m:"└",n:"┼",o:"⎺",p:"⎻",q:"─",r:"⎼",s:"⎽",t:"├",u:"┤",v:"┴",w:"┬",x:"│",y:"≤",z:"≥","{":"π","|":"≠","}":"£","~":"·"},i.CHARSETS.A={"#":"£"},i.CHARSETS.B=void 0,i.CHARSETS[4]={"#":"£","@":"¾","[":"ij","\\":"½","]":"|","{":"¨","|":"f","}":"¼","~":"´"},i.CHARSETS.C=i.CHARSETS[5]={"[":"Ä","\\":"Ö","]":"Å","^":"Ü","`":"é","{":"ä","|":"ö","}":"å","~":"ü"},i.CHARSETS.R={"#":"£","@":"à","[":"°","\\":"ç","]":"§","{":"é","|":"ù","}":"è","~":"¨"},i.CHARSETS.Q={"@":"à","[":"â","\\":"ç","]":"ê","^":"î","`":"ô","{":"é","|":"ù","}":"è","~":"û"},i.CHARSETS.K={"@":"§","[":"Ä","\\":"Ö","]":"Ü","{":"ä","|":"ö","}":"ü","~":"ß"},i.CHARSETS.Y={"#":"£","@":"§","[":"°","\\":"ç","]":"é","`":"ù","{":"à","|":"ò","}":"è","~":"ì"},i.CHARSETS.E=i.CHARSETS[6]={"@":"Ä","[":"Æ","\\":"Ø","]":"Å","^":"Ü","`":"ä","{":"æ","|":"ø","}":"å","~":"ü"},i.CHARSETS.Z={"#":"£","@":"§","[":"¡","\\":"Ñ","]":"¿","{":"°","|":"ñ","}":"ç"},i.CHARSETS.H=i.CHARSETS[7]={"@":"É","[":"Ä","\\":"Ö","]":"Å","^":"Ü","`":"é","{":"ä","|":"ö","}":"å","~":"ü"},i.CHARSETS["="]={"#":"ù","@":"à","[":"é","\\":"ç","]":"ê","^":"î",_:"è","`":"ô","{":"ä","|":"ö","}":"ü","~":"û"}},2584:(_,i)=>{var r,c,f;Object.defineProperty(i,"__esModule",{value:!0}),i.C1_ESCAPED=i.C1=i.C0=void 0,function(l){l.NUL="\0",l.SOH="",l.STX="",l.ETX="",l.EOT="",l.ENQ="",l.ACK="",l.BEL="\x07",l.BS="\b",l.HT="	",l.LF=`
`,l.VT="\v",l.FF="\f",l.CR="\r",l.SO="",l.SI="",l.DLE="",l.DC1="",l.DC2="",l.DC3="",l.DC4="",l.NAK="",l.SYN="",l.ETB="",l.CAN="",l.EM="",l.SUB="",l.ESC="\x1B",l.FS="",l.GS="",l.RS="",l.US="",l.SP=" ",l.DEL=""}(r||(i.C0=r={})),function(l){l.PAD="",l.HOP="",l.BPH="",l.NBH="",l.IND="",l.NEL="",l.SSA="",l.ESA="",l.HTS="",l.HTJ="",l.VTS="",l.PLD="",l.PLU="",l.RI="",l.SS2="",l.SS3="",l.DCS="",l.PU1="",l.PU2="",l.STS="",l.CCH="",l.MW="",l.SPA="",l.EPA="",l.SOS="",l.SGCI="",l.SCI="",l.CSI="",l.ST="",l.OSC="",l.PM="",l.APC=""}(c||(i.C1=c={})),function(l){l.ST=`${r.ESC}\\`}(f||(i.C1_ESCAPED=f={}))},7399:(_,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.evaluateKeyboardEvent=void 0;const c=r(2584),f={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};i.evaluateKeyboardEvent=function(l,p,b,w){const S={type:0,cancel:!1,key:void 0},n=(l.shiftKey?1:0)|(l.altKey?2:0)|(l.ctrlKey?4:0)|(l.metaKey?8:0);switch(l.keyCode){case 0:l.key==="UIKeyInputUpArrow"?S.key=p?c.C0.ESC+"OA":c.C0.ESC+"[A":l.key==="UIKeyInputLeftArrow"?S.key=p?c.C0.ESC+"OD":c.C0.ESC+"[D":l.key==="UIKeyInputRightArrow"?S.key=p?c.C0.ESC+"OC":c.C0.ESC+"[C":l.key==="UIKeyInputDownArrow"&&(S.key=p?c.C0.ESC+"OB":c.C0.ESC+"[B");break;case 8:if(l.altKey){S.key=c.C0.ESC+c.C0.DEL;break}S.key=c.C0.DEL;break;case 9:if(l.shiftKey){S.key=c.C0.ESC+"[Z";break}S.key=c.C0.HT,S.cancel=!0;break;case 13:S.key=l.altKey?c.C0.ESC+c.C0.CR:c.C0.CR,S.cancel=!0;break;case 27:S.key=c.C0.ESC,l.altKey&&(S.key=c.C0.ESC+c.C0.ESC),S.cancel=!0;break;case 37:if(l.metaKey)break;n?(S.key=c.C0.ESC+"[1;"+(n+1)+"D",S.key===c.C0.ESC+"[1;3D"&&(S.key=c.C0.ESC+(b?"b":"[1;5D"))):S.key=p?c.C0.ESC+"OD":c.C0.ESC+"[D";break;case 39:if(l.metaKey)break;n?(S.key=c.C0.ESC+"[1;"+(n+1)+"C",S.key===c.C0.ESC+"[1;3C"&&(S.key=c.C0.ESC+(b?"f":"[1;5C"))):S.key=p?c.C0.ESC+"OC":c.C0.ESC+"[C";break;case 38:if(l.metaKey)break;n?(S.key=c.C0.ESC+"[1;"+(n+1)+"A",b||S.key!==c.C0.ESC+"[1;3A"||(S.key=c.C0.ESC+"[1;5A")):S.key=p?c.C0.ESC+"OA":c.C0.ESC+"[A";break;case 40:if(l.metaKey)break;n?(S.key=c.C0.ESC+"[1;"+(n+1)+"B",b||S.key!==c.C0.ESC+"[1;3B"||(S.key=c.C0.ESC+"[1;5B")):S.key=p?c.C0.ESC+"OB":c.C0.ESC+"[B";break;case 45:l.shiftKey||l.ctrlKey||(S.key=c.C0.ESC+"[2~");break;case 46:S.key=n?c.C0.ESC+"[3;"+(n+1)+"~":c.C0.ESC+"[3~";break;case 36:S.key=n?c.C0.ESC+"[1;"+(n+1)+"H":p?c.C0.ESC+"OH":c.C0.ESC+"[H";break;case 35:S.key=n?c.C0.ESC+"[1;"+(n+1)+"F":p?c.C0.ESC+"OF":c.C0.ESC+"[F";break;case 33:l.shiftKey?S.type=2:l.ctrlKey?S.key=c.C0.ESC+"[5;"+(n+1)+"~":S.key=c.C0.ESC+"[5~";break;case 34:l.shiftKey?S.type=3:l.ctrlKey?S.key=c.C0.ESC+"[6;"+(n+1)+"~":S.key=c.C0.ESC+"[6~";break;case 112:S.key=n?c.C0.ESC+"[1;"+(n+1)+"P":c.C0.ESC+"OP";break;case 113:S.key=n?c.C0.ESC+"[1;"+(n+1)+"Q":c.C0.ESC+"OQ";break;case 114:S.key=n?c.C0.ESC+"[1;"+(n+1)+"R":c.C0.ESC+"OR";break;case 115:S.key=n?c.C0.ESC+"[1;"+(n+1)+"S":c.C0.ESC+"OS";break;case 116:S.key=n?c.C0.ESC+"[15;"+(n+1)+"~":c.C0.ESC+"[15~";break;case 117:S.key=n?c.C0.ESC+"[17;"+(n+1)+"~":c.C0.ESC+"[17~";break;case 118:S.key=n?c.C0.ESC+"[18;"+(n+1)+"~":c.C0.ESC+"[18~";break;case 119:S.key=n?c.C0.ESC+"[19;"+(n+1)+"~":c.C0.ESC+"[19~";break;case 120:S.key=n?c.C0.ESC+"[20;"+(n+1)+"~":c.C0.ESC+"[20~";break;case 121:S.key=n?c.C0.ESC+"[21;"+(n+1)+"~":c.C0.ESC+"[21~";break;case 122:S.key=n?c.C0.ESC+"[23;"+(n+1)+"~":c.C0.ESC+"[23~";break;case 123:S.key=n?c.C0.ESC+"[24;"+(n+1)+"~":c.C0.ESC+"[24~";break;default:if(!l.ctrlKey||l.shiftKey||l.altKey||l.metaKey)if(b&&!w||!l.altKey||l.metaKey)!b||l.altKey||l.ctrlKey||l.shiftKey||!l.metaKey?l.key&&!l.ctrlKey&&!l.altKey&&!l.metaKey&&l.keyCode>=48&&l.key.length===1?S.key=l.key:l.key&&l.ctrlKey&&(l.key==="_"&&(S.key=c.C0.US),l.key==="@"&&(S.key=c.C0.NUL)):l.keyCode===65&&(S.type=1);else{const h=f[l.keyCode],a=h==null?void 0:h[l.shiftKey?1:0];if(a)S.key=c.C0.ESC+a;else if(l.keyCode>=65&&l.keyCode<=90){const u=l.ctrlKey?l.keyCode-64:l.keyCode+32;let g=String.fromCharCode(u);l.shiftKey&&(g=g.toUpperCase()),S.key=c.C0.ESC+g}else if(l.keyCode===32)S.key=c.C0.ESC+(l.ctrlKey?c.C0.NUL:" ");else if(l.key==="Dead"&&l.code.startsWith("Key")){let u=l.code.slice(3,4);l.shiftKey||(u=u.toLowerCase()),S.key=c.C0.ESC+u,S.cancel=!0}}else l.keyCode>=65&&l.keyCode<=90?S.key=String.fromCharCode(l.keyCode-64):l.keyCode===32?S.key=c.C0.NUL:l.keyCode>=51&&l.keyCode<=55?S.key=String.fromCharCode(l.keyCode-51+27):l.keyCode===56?S.key=c.C0.DEL:l.keyCode===219?S.key=c.C0.ESC:l.keyCode===220?S.key=c.C0.FS:l.keyCode===221&&(S.key=c.C0.GS)}return S}},482:(_,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Utf8ToUtf32=i.StringToUtf32=i.utf32ToString=i.stringFromCodePoint=void 0,i.stringFromCodePoint=function(r){return r>65535?(r-=65536,String.fromCharCode(55296+(r>>10))+String.fromCharCode(r%1024+56320)):String.fromCharCode(r)},i.utf32ToString=function(r,c=0,f=r.length){let l="";for(let p=c;p<f;++p){let b=r[p];b>65535?(b-=65536,l+=String.fromCharCode(55296+(b>>10))+String.fromCharCode(b%1024+56320)):l+=String.fromCharCode(b)}return l},i.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(r,c){const f=r.length;if(!f)return 0;let l=0,p=0;if(this._interim){const b=r.charCodeAt(p++);56320<=b&&b<=57343?c[l++]=1024*(this._interim-55296)+b-56320+65536:(c[l++]=this._interim,c[l++]=b),this._interim=0}for(let b=p;b<f;++b){const w=r.charCodeAt(b);if(55296<=w&&w<=56319){if(++b>=f)return this._interim=w,l;const S=r.charCodeAt(b);56320<=S&&S<=57343?c[l++]=1024*(w-55296)+S-56320+65536:(c[l++]=w,c[l++]=S)}else w!==65279&&(c[l++]=w)}return l}},i.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(r,c){const f=r.length;if(!f)return 0;let l,p,b,w,S=0,n=0,h=0;if(this.interim[0]){let g=!1,v=this.interim[0];v&=(224&v)==192?31:(240&v)==224?15:7;let y,E=0;for(;(y=63&this.interim[++E])&&E<4;)v<<=6,v|=y;const C=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,k=C-E;for(;h<k;){if(h>=f)return 0;if(y=r[h++],(192&y)!=128){h--,g=!0;break}this.interim[E++]=y,v<<=6,v|=63&y}g||(C===2?v<128?h--:c[S++]=v:C===3?v<2048||v>=55296&&v<=57343||v===65279||(c[S++]=v):v<65536||v>1114111||(c[S++]=v)),this.interim.fill(0)}const a=f-4;let u=h;for(;u<f;){for(;!(!(u<a)||128&(l=r[u])||128&(p=r[u+1])||128&(b=r[u+2])||128&(w=r[u+3]));)c[S++]=l,c[S++]=p,c[S++]=b,c[S++]=w,u+=4;if(l=r[u++],l<128)c[S++]=l;else if((224&l)==192){if(u>=f)return this.interim[0]=l,S;if(p=r[u++],(192&p)!=128){u--;continue}if(n=(31&l)<<6|63&p,n<128){u--;continue}c[S++]=n}else if((240&l)==224){if(u>=f)return this.interim[0]=l,S;if(p=r[u++],(192&p)!=128){u--;continue}if(u>=f)return this.interim[0]=l,this.interim[1]=p,S;if(b=r[u++],(192&b)!=128){u--;continue}if(n=(15&l)<<12|(63&p)<<6|63&b,n<2048||n>=55296&&n<=57343||n===65279)continue;c[S++]=n}else if((248&l)==240){if(u>=f)return this.interim[0]=l,S;if(p=r[u++],(192&p)!=128){u--;continue}if(u>=f)return this.interim[0]=l,this.interim[1]=p,S;if(b=r[u++],(192&b)!=128){u--;continue}if(u>=f)return this.interim[0]=l,this.interim[1]=p,this.interim[2]=b,S;if(w=r[u++],(192&w)!=128){u--;continue}if(n=(7&l)<<18|(63&p)<<12|(63&b)<<6|63&w,n<65536||n>1114111)continue;c[S++]=n}}return S}}},225:(_,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.UnicodeV6=void 0;const r=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],c=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]];let f;i.UnicodeV6=class{constructor(){if(this.version="6",!f){f=new Uint8Array(65536),f.fill(1),f[0]=0,f.fill(0,1,32),f.fill(0,127,160),f.fill(2,4352,4448),f[9001]=2,f[9002]=2,f.fill(2,11904,42192),f[12351]=1,f.fill(2,44032,55204),f.fill(2,63744,64256),f.fill(2,65040,65050),f.fill(2,65072,65136),f.fill(2,65280,65377),f.fill(2,65504,65511);for(let l=0;l<r.length;++l)f.fill(0,r[l][0],r[l][1]+1)}}wcwidth(l){return l<32?0:l<127?1:l<65536?f[l]:function(p,b){let w,S=0,n=b.length-1;if(p<b[0][0]||p>b[n][1])return!1;for(;n>=S;)if(w=S+n>>1,p>b[w][1])S=w+1;else{if(!(p<b[w][0]))return!0;n=w-1}return!1}(l,c)?0:l>=131072&&l<=196605||l>=196608&&l<=262141?2:1}}},5981:(_,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.WriteBuffer=void 0;const c=r(8460),f=r(844);class l extends f.Disposable{constructor(b){super(),this._action=b,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this.register(new c.EventEmitter),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(b,w){if(w!==void 0&&this._syncCalls>w)return void(this._syncCalls=0);if(this._pendingData+=b.length,this._writeBuffer.push(b),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;let S;for(this._isSyncWriting=!0;S=this._writeBuffer.shift();){this._action(S);const n=this._callbacks.shift();n&&n()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(b,w){if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput)return this._didUserInput=!1,this._pendingData+=b.length,this._writeBuffer.push(b),this._callbacks.push(w),void this._innerWrite();setTimeout(()=>this._innerWrite())}this._pendingData+=b.length,this._writeBuffer.push(b),this._callbacks.push(w)}_innerWrite(b=0,w=!0){const S=b||Date.now();for(;this._writeBuffer.length>this._bufferOffset;){const n=this._writeBuffer[this._bufferOffset],h=this._action(n,w);if(h){const u=g=>Date.now()-S>=12?setTimeout(()=>this._innerWrite(0,g)):this._innerWrite(S,g);return void h.catch(g=>(queueMicrotask(()=>{throw g}),Promise.resolve(!1))).then(u)}const a=this._callbacks[this._bufferOffset];if(a&&a(),this._bufferOffset++,this._pendingData-=n.length,Date.now()-S>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(()=>this._innerWrite())):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}}i.WriteBuffer=l},5941:(_,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.toRgbString=i.parseColor=void 0;const r=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,c=/^[\da-f]+$/;function f(l,p){const b=l.toString(16),w=b.length<2?"0"+b:b;switch(p){case 4:return b[0];case 8:return w;case 12:return(w+w).slice(0,3);default:return w+w}}i.parseColor=function(l){if(!l)return;let p=l.toLowerCase();if(p.indexOf("rgb:")===0){p=p.slice(4);const b=r.exec(p);if(b){const w=b[1]?15:b[4]?255:b[7]?4095:65535;return[Math.round(parseInt(b[1]||b[4]||b[7]||b[10],16)/w*255),Math.round(parseInt(b[2]||b[5]||b[8]||b[11],16)/w*255),Math.round(parseInt(b[3]||b[6]||b[9]||b[12],16)/w*255)]}}else if(p.indexOf("#")===0&&(p=p.slice(1),c.exec(p)&&[3,6,9,12].includes(p.length))){const b=p.length/3,w=[0,0,0];for(let S=0;S<3;++S){const n=parseInt(p.slice(b*S,b*S+b),16);w[S]=b===1?n<<4:b===2?n:b===3?n>>4:n>>8}return w}},i.toRgbString=function(l,p=16){const[b,w,S]=l;return`rgb:${f(b,p)}/${f(w,p)}/${f(S,p)}`}},5770:(_,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.PAYLOAD_LIMIT=void 0,i.PAYLOAD_LIMIT=1e7},6351:(_,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DcsHandler=i.DcsParser=void 0;const c=r(482),f=r(8742),l=r(5770),p=[];i.DcsParser=class{constructor(){this._handlers=Object.create(null),this._active=p,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=p}registerHandler(w,S){this._handlers[w]===void 0&&(this._handlers[w]=[]);const n=this._handlers[w];return n.push(S),{dispose:()=>{const h=n.indexOf(S);h!==-1&&n.splice(h,1)}}}clearHandler(w){this._handlers[w]&&delete this._handlers[w]}setHandlerFallback(w){this._handlerFb=w}reset(){if(this._active.length)for(let w=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;w>=0;--w)this._active[w].unhook(!1);this._stack.paused=!1,this._active=p,this._ident=0}hook(w,S){if(this.reset(),this._ident=w,this._active=this._handlers[w]||p,this._active.length)for(let n=this._active.length-1;n>=0;n--)this._active[n].hook(S);else this._handlerFb(this._ident,"HOOK",S)}put(w,S,n){if(this._active.length)for(let h=this._active.length-1;h>=0;h--)this._active[h].put(w,S,n);else this._handlerFb(this._ident,"PUT",(0,c.utf32ToString)(w,S,n))}unhook(w,S=!0){if(this._active.length){let n=!1,h=this._active.length-1,a=!1;if(this._stack.paused&&(h=this._stack.loopPosition-1,n=S,a=this._stack.fallThrough,this._stack.paused=!1),!a&&n===!1){for(;h>=0&&(n=this._active[h].unhook(w),n!==!0);h--)if(n instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=h,this._stack.fallThrough=!1,n;h--}for(;h>=0;h--)if(n=this._active[h].unhook(!1),n instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=h,this._stack.fallThrough=!0,n}else this._handlerFb(this._ident,"UNHOOK",w);this._active=p,this._ident=0}};const b=new f.Params;b.addParam(0),i.DcsHandler=class{constructor(w){this._handler=w,this._data="",this._params=b,this._hitLimit=!1}hook(w){this._params=w.length>1||w.params[0]?w.clone():b,this._data="",this._hitLimit=!1}put(w,S,n){this._hitLimit||(this._data+=(0,c.utf32ToString)(w,S,n),this._data.length>l.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}unhook(w){let S=!1;if(this._hitLimit)S=!1;else if(w&&(S=this._handler(this._data,this._params),S instanceof Promise))return S.then(n=>(this._params=b,this._data="",this._hitLimit=!1,n));return this._params=b,this._data="",this._hitLimit=!1,S}}},2015:(_,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.EscapeSequenceParser=i.VT500_TRANSITION_TABLE=i.TransitionTable=void 0;const c=r(844),f=r(8742),l=r(6242),p=r(6351);class b{constructor(h){this.table=new Uint8Array(h)}setDefault(h,a){this.table.fill(h<<4|a)}add(h,a,u,g){this.table[a<<8|h]=u<<4|g}addMany(h,a,u,g){for(let v=0;v<h.length;v++)this.table[a<<8|h[v]]=u<<4|g}}i.TransitionTable=b;const w=160;i.VT500_TRANSITION_TABLE=function(){const n=new b(4095),h=Array.apply(null,Array(256)).map((E,C)=>C),a=(E,C)=>h.slice(E,C),u=a(32,127),g=a(0,24);g.push(25),g.push.apply(g,a(28,32));const v=a(0,14);let y;for(y in n.setDefault(1,0),n.addMany(u,0,2,0),v)n.addMany([24,26,153,154],y,3,0),n.addMany(a(128,144),y,3,0),n.addMany(a(144,152),y,3,0),n.add(156,y,0,0),n.add(27,y,11,1),n.add(157,y,4,8),n.addMany([152,158,159],y,0,7),n.add(155,y,11,3),n.add(144,y,11,9);return n.addMany(g,0,3,0),n.addMany(g,1,3,1),n.add(127,1,0,1),n.addMany(g,8,0,8),n.addMany(g,3,3,3),n.add(127,3,0,3),n.addMany(g,4,3,4),n.add(127,4,0,4),n.addMany(g,6,3,6),n.addMany(g,5,3,5),n.add(127,5,0,5),n.addMany(g,2,3,2),n.add(127,2,0,2),n.add(93,1,4,8),n.addMany(u,8,5,8),n.add(127,8,5,8),n.addMany([156,27,24,26,7],8,6,0),n.addMany(a(28,32),8,0,8),n.addMany([88,94,95],1,0,7),n.addMany(u,7,0,7),n.addMany(g,7,0,7),n.add(156,7,0,0),n.add(127,7,0,7),n.add(91,1,11,3),n.addMany(a(64,127),3,7,0),n.addMany(a(48,60),3,8,4),n.addMany([60,61,62,63],3,9,4),n.addMany(a(48,60),4,8,4),n.addMany(a(64,127),4,7,0),n.addMany([60,61,62,63],4,0,6),n.addMany(a(32,64),6,0,6),n.add(127,6,0,6),n.addMany(a(64,127),6,0,0),n.addMany(a(32,48),3,9,5),n.addMany(a(32,48),5,9,5),n.addMany(a(48,64),5,0,6),n.addMany(a(64,127),5,7,0),n.addMany(a(32,48),4,9,5),n.addMany(a(32,48),1,9,2),n.addMany(a(32,48),2,9,2),n.addMany(a(48,127),2,10,0),n.addMany(a(48,80),1,10,0),n.addMany(a(81,88),1,10,0),n.addMany([89,90,92],1,10,0),n.addMany(a(96,127),1,10,0),n.add(80,1,11,9),n.addMany(g,9,0,9),n.add(127,9,0,9),n.addMany(a(28,32),9,0,9),n.addMany(a(32,48),9,9,12),n.addMany(a(48,60),9,8,10),n.addMany([60,61,62,63],9,9,10),n.addMany(g,11,0,11),n.addMany(a(32,128),11,0,11),n.addMany(a(28,32),11,0,11),n.addMany(g,10,0,10),n.add(127,10,0,10),n.addMany(a(28,32),10,0,10),n.addMany(a(48,60),10,8,10),n.addMany([60,61,62,63],10,0,11),n.addMany(a(32,48),10,9,12),n.addMany(g,12,0,12),n.add(127,12,0,12),n.addMany(a(28,32),12,0,12),n.addMany(a(32,48),12,9,12),n.addMany(a(48,64),12,0,11),n.addMany(a(64,127),12,12,13),n.addMany(a(64,127),10,12,13),n.addMany(a(64,127),9,12,13),n.addMany(g,13,13,13),n.addMany(u,13,13,13),n.add(127,13,0,13),n.addMany([27,156,24,26],13,14,0),n.add(w,0,2,0),n.add(w,8,5,8),n.add(w,6,0,6),n.add(w,11,0,11),n.add(w,13,13,13),n}();class S extends c.Disposable{constructor(h=i.VT500_TRANSITION_TABLE){super(),this._transitions=h,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new f.Params,this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._printHandlerFb=(a,u,g)=>{},this._executeHandlerFb=a=>{},this._csiHandlerFb=(a,u)=>{},this._escHandlerFb=a=>{},this._errorHandlerFb=a=>a,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this.register((0,c.toDisposable)(()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)})),this._oscParser=this.register(new l.OscParser),this._dcsParser=this.register(new p.DcsParser),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},()=>!0)}_identifier(h,a=[64,126]){let u=0;if(h.prefix){if(h.prefix.length>1)throw new Error("only one byte as prefix supported");if(u=h.prefix.charCodeAt(0),u&&60>u||u>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(h.intermediates){if(h.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let v=0;v<h.intermediates.length;++v){const y=h.intermediates.charCodeAt(v);if(32>y||y>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");u<<=8,u|=y}}if(h.final.length!==1)throw new Error("final must be a single byte");const g=h.final.charCodeAt(0);if(a[0]>g||g>a[1])throw new Error(`final must be in range ${a[0]} .. ${a[1]}`);return u<<=8,u|=g,u}identToString(h){const a=[];for(;h;)a.push(String.fromCharCode(255&h)),h>>=8;return a.reverse().join("")}setPrintHandler(h){this._printHandler=h}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(h,a){const u=this._identifier(h,[48,126]);this._escHandlers[u]===void 0&&(this._escHandlers[u]=[]);const g=this._escHandlers[u];return g.push(a),{dispose:()=>{const v=g.indexOf(a);v!==-1&&g.splice(v,1)}}}clearEscHandler(h){this._escHandlers[this._identifier(h,[48,126])]&&delete this._escHandlers[this._identifier(h,[48,126])]}setEscHandlerFallback(h){this._escHandlerFb=h}setExecuteHandler(h,a){this._executeHandlers[h.charCodeAt(0)]=a}clearExecuteHandler(h){this._executeHandlers[h.charCodeAt(0)]&&delete this._executeHandlers[h.charCodeAt(0)]}setExecuteHandlerFallback(h){this._executeHandlerFb=h}registerCsiHandler(h,a){const u=this._identifier(h);this._csiHandlers[u]===void 0&&(this._csiHandlers[u]=[]);const g=this._csiHandlers[u];return g.push(a),{dispose:()=>{const v=g.indexOf(a);v!==-1&&g.splice(v,1)}}}clearCsiHandler(h){this._csiHandlers[this._identifier(h)]&&delete this._csiHandlers[this._identifier(h)]}setCsiHandlerFallback(h){this._csiHandlerFb=h}registerDcsHandler(h,a){return this._dcsParser.registerHandler(this._identifier(h),a)}clearDcsHandler(h){this._dcsParser.clearHandler(this._identifier(h))}setDcsHandlerFallback(h){this._dcsParser.setHandlerFallback(h)}registerOscHandler(h,a){return this._oscParser.registerHandler(h,a)}clearOscHandler(h){this._oscParser.clearHandler(h)}setOscHandlerFallback(h){this._oscParser.setHandlerFallback(h)}setErrorHandler(h){this._errorHandler=h}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(h,a,u,g,v){this._parseStack.state=h,this._parseStack.handlers=a,this._parseStack.handlerPos=u,this._parseStack.transition=g,this._parseStack.chunkPos=v}parse(h,a,u){let g,v=0,y=0,E=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,E=this._parseStack.chunkPos+1;else{if(u===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");const C=this._parseStack.handlers;let k=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(u===!1&&k>-1){for(;k>=0&&(g=C[k](this._params),g!==!0);k--)if(g instanceof Promise)return this._parseStack.handlerPos=k,g}this._parseStack.handlers=[];break;case 4:if(u===!1&&k>-1){for(;k>=0&&(g=C[k](),g!==!0);k--)if(g instanceof Promise)return this._parseStack.handlerPos=k,g}this._parseStack.handlers=[];break;case 6:if(v=h[this._parseStack.chunkPos],g=this._dcsParser.unhook(v!==24&&v!==26,u),g)return g;v===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(v=h[this._parseStack.chunkPos],g=this._oscParser.end(v!==24&&v!==26,u),g)return g;v===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,E=this._parseStack.chunkPos+1,this.precedingCodepoint=0,this.currentState=15&this._parseStack.transition}for(let C=E;C<a;++C){switch(v=h[C],y=this._transitions.table[this.currentState<<8|(v<160?v:w)],y>>4){case 2:for(let O=C+1;;++O){if(O>=a||(v=h[O])<32||v>126&&v<w){this._printHandler(h,C,O),C=O-1;break}if(++O>=a||(v=h[O])<32||v>126&&v<w){this._printHandler(h,C,O),C=O-1;break}if(++O>=a||(v=h[O])<32||v>126&&v<w){this._printHandler(h,C,O),C=O-1;break}if(++O>=a||(v=h[O])<32||v>126&&v<w){this._printHandler(h,C,O),C=O-1;break}}break;case 3:this._executeHandlers[v]?this._executeHandlers[v]():this._executeHandlerFb(v),this.precedingCodepoint=0;break;case 0:break;case 1:if(this._errorHandler({position:C,code:v,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:const k=this._csiHandlers[this._collect<<8|v];let L=k?k.length-1:-1;for(;L>=0&&(g=k[L](this._params),g!==!0);L--)if(g instanceof Promise)return this._preserveStack(3,k,L,y,C),g;L<0&&this._csiHandlerFb(this._collect<<8|v,this._params),this.precedingCodepoint=0;break;case 8:do switch(v){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(v-48)}while(++C<a&&(v=h[C])>47&&v<60);C--;break;case 9:this._collect<<=8,this._collect|=v;break;case 10:const T=this._escHandlers[this._collect<<8|v];let x=T?T.length-1:-1;for(;x>=0&&(g=T[x](),g!==!0);x--)if(g instanceof Promise)return this._preserveStack(4,T,x,y,C),g;x<0&&this._escHandlerFb(this._collect<<8|v),this.precedingCodepoint=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|v,this._params);break;case 13:for(let O=C+1;;++O)if(O>=a||(v=h[O])===24||v===26||v===27||v>127&&v<w){this._dcsParser.put(h,C,O),C=O-1;break}break;case 14:if(g=this._dcsParser.unhook(v!==24&&v!==26),g)return this._preserveStack(6,[],0,y,C),g;v===27&&(y|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0;break;case 4:this._oscParser.start();break;case 5:for(let O=C+1;;O++)if(O>=a||(v=h[O])<32||v>127&&v<w){this._oscParser.put(h,C,O),C=O-1;break}break;case 6:if(g=this._oscParser.end(v!==24&&v!==26),g)return this._preserveStack(5,[],0,y,C),g;v===27&&(y|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0}this.currentState=15&y}}}i.EscapeSequenceParser=S},6242:(_,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.OscHandler=i.OscParser=void 0;const c=r(5770),f=r(482),l=[];i.OscParser=class{constructor(){this._state=0,this._active=l,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(p,b){this._handlers[p]===void 0&&(this._handlers[p]=[]);const w=this._handlers[p];return w.push(b),{dispose:()=>{const S=w.indexOf(b);S!==-1&&w.splice(S,1)}}}clearHandler(p){this._handlers[p]&&delete this._handlers[p]}setHandlerFallback(p){this._handlerFb=p}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=l}reset(){if(this._state===2)for(let p=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;p>=0;--p)this._active[p].end(!1);this._stack.paused=!1,this._active=l,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||l,this._active.length)for(let p=this._active.length-1;p>=0;p--)this._active[p].start();else this._handlerFb(this._id,"START")}_put(p,b,w){if(this._active.length)for(let S=this._active.length-1;S>=0;S--)this._active[S].put(p,b,w);else this._handlerFb(this._id,"PUT",(0,f.utf32ToString)(p,b,w))}start(){this.reset(),this._state=1}put(p,b,w){if(this._state!==3){if(this._state===1)for(;b<w;){const S=p[b++];if(S===59){this._state=2,this._start();break}if(S<48||57<S)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+S-48}this._state===2&&w-b>0&&this._put(p,b,w)}}end(p,b=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){let w=!1,S=this._active.length-1,n=!1;if(this._stack.paused&&(S=this._stack.loopPosition-1,w=b,n=this._stack.fallThrough,this._stack.paused=!1),!n&&w===!1){for(;S>=0&&(w=this._active[S].end(p),w!==!0);S--)if(w instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=S,this._stack.fallThrough=!1,w;S--}for(;S>=0;S--)if(w=this._active[S].end(!1),w instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=S,this._stack.fallThrough=!0,w}else this._handlerFb(this._id,"END",p);this._active=l,this._id=-1,this._state=0}}},i.OscHandler=class{constructor(p){this._handler=p,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(p,b,w){this._hitLimit||(this._data+=(0,f.utf32ToString)(p,b,w),this._data.length>c.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}end(p){let b=!1;if(this._hitLimit)b=!1;else if(p&&(b=this._handler(this._data),b instanceof Promise))return b.then(w=>(this._data="",this._hitLimit=!1,w));return this._data="",this._hitLimit=!1,b}}},8742:(_,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Params=void 0;const r=2147483647;class c{static fromArray(l){const p=new c;if(!l.length)return p;for(let b=Array.isArray(l[0])?1:0;b<l.length;++b){const w=l[b];if(Array.isArray(w))for(let S=0;S<w.length;++S)p.addSubParam(w[S]);else p.addParam(w)}return p}constructor(l=32,p=32){if(this.maxLength=l,this.maxSubParamsLength=p,p>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(l),this.length=0,this._subParams=new Int32Array(p),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(l),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}clone(){const l=new c(this.maxLength,this.maxSubParamsLength);return l.params.set(this.params),l.length=this.length,l._subParams.set(this._subParams),l._subParamsLength=this._subParamsLength,l._subParamsIdx.set(this._subParamsIdx),l._rejectDigits=this._rejectDigits,l._rejectSubDigits=this._rejectSubDigits,l._digitIsSub=this._digitIsSub,l}toArray(){const l=[];for(let p=0;p<this.length;++p){l.push(this.params[p]);const b=this._subParamsIdx[p]>>8,w=255&this._subParamsIdx[p];w-b>0&&l.push(Array.prototype.slice.call(this._subParams,b,w))}return l}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(l){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(l<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=l>r?r:l}}addSubParam(l){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(l<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=l>r?r:l,this._subParamsIdx[this.length-1]++}}hasSubParams(l){return(255&this._subParamsIdx[l])-(this._subParamsIdx[l]>>8)>0}getSubParams(l){const p=this._subParamsIdx[l]>>8,b=255&this._subParamsIdx[l];return b-p>0?this._subParams.subarray(p,b):null}getSubParamsAll(){const l={};for(let p=0;p<this.length;++p){const b=this._subParamsIdx[p]>>8,w=255&this._subParamsIdx[p];w-b>0&&(l[p]=this._subParams.slice(b,w))}return l}addDigit(l){let p;if(this._rejectDigits||!(p=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;const b=this._digitIsSub?this._subParams:this.params,w=b[p-1];b[p-1]=~w?Math.min(10*w+l,r):l}}i.Params=c},5741:(_,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.AddonManager=void 0,i.AddonManager=class{constructor(){this._addons=[]}dispose(){for(let r=this._addons.length-1;r>=0;r--)this._addons[r].instance.dispose()}loadAddon(r,c){const f={instance:c,dispose:c.dispose,isDisposed:!1};this._addons.push(f),c.dispose=()=>this._wrappedAddonDispose(f),c.activate(r)}_wrappedAddonDispose(r){if(r.isDisposed)return;let c=-1;for(let f=0;f<this._addons.length;f++)if(this._addons[f]===r){c=f;break}if(c===-1)throw new Error("Could not dispose an addon that has not been loaded");r.isDisposed=!0,r.dispose.apply(r.instance),this._addons.splice(c,1)}}},8771:(_,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferApiView=void 0;const c=r(3785),f=r(511);i.BufferApiView=class{constructor(l,p){this._buffer=l,this.type=p}init(l){return this._buffer=l,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(l){const p=this._buffer.lines.get(l);if(p)return new c.BufferLineApiView(p)}getNullCell(){return new f.CellData}}},3785:(_,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferLineApiView=void 0;const c=r(511);i.BufferLineApiView=class{constructor(f){this._line=f}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(f,l){if(!(f<0||f>=this._line.length))return l?(this._line.loadCell(f,l),l):this._line.loadCell(f,new c.CellData)}translateToString(f,l,p){return this._line.translateToString(f,l,p)}}},8285:(_,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferNamespaceApi=void 0;const c=r(8771),f=r(8460),l=r(844);class p extends l.Disposable{constructor(w){super(),this._core=w,this._onBufferChange=this.register(new f.EventEmitter),this.onBufferChange=this._onBufferChange.event,this._normal=new c.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new c.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(()=>this._onBufferChange.fire(this.active))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}}i.BufferNamespaceApi=p},7975:(_,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ParserApi=void 0,i.ParserApi=class{constructor(r){this._core=r}registerCsiHandler(r,c){return this._core.registerCsiHandler(r,f=>c(f.toArray()))}addCsiHandler(r,c){return this.registerCsiHandler(r,c)}registerDcsHandler(r,c){return this._core.registerDcsHandler(r,(f,l)=>c(f,l.toArray()))}addDcsHandler(r,c){return this.registerDcsHandler(r,c)}registerEscHandler(r,c){return this._core.registerEscHandler(r,c)}addEscHandler(r,c){return this.registerEscHandler(r,c)}registerOscHandler(r,c){return this._core.registerOscHandler(r,c)}addOscHandler(r,c){return this.registerOscHandler(r,c)}}},7090:(_,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.UnicodeApi=void 0,i.UnicodeApi=class{constructor(r){this._core=r}register(r){this._core.unicodeService.register(r)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(r){this._core.unicodeService.activeVersion=r}}},744:function(_,i,r){var c=this&&this.__decorate||function(n,h,a,u){var g,v=arguments.length,y=v<3?h:u===null?u=Object.getOwnPropertyDescriptor(h,a):u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(n,h,a,u);else for(var E=n.length-1;E>=0;E--)(g=n[E])&&(y=(v<3?g(y):v>3?g(h,a,y):g(h,a))||y);return v>3&&y&&Object.defineProperty(h,a,y),y},f=this&&this.__param||function(n,h){return function(a,u){h(a,u,n)}};Object.defineProperty(i,"__esModule",{value:!0}),i.BufferService=i.MINIMUM_ROWS=i.MINIMUM_COLS=void 0;const l=r(8460),p=r(844),b=r(5295),w=r(2585);i.MINIMUM_COLS=2,i.MINIMUM_ROWS=1;let S=i.BufferService=class extends p.Disposable{get buffer(){return this.buffers.active}constructor(n){super(),this.isUserScrolling=!1,this._onResize=this.register(new l.EventEmitter),this.onResize=this._onResize.event,this._onScroll=this.register(new l.EventEmitter),this.onScroll=this._onScroll.event,this.cols=Math.max(n.rawOptions.cols||0,i.MINIMUM_COLS),this.rows=Math.max(n.rawOptions.rows||0,i.MINIMUM_ROWS),this.buffers=this.register(new b.BufferSet(n,this))}resize(n,h){this.cols=n,this.rows=h,this.buffers.resize(n,h),this._onResize.fire({cols:n,rows:h})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(n,h=!1){const a=this.buffer;let u;u=this._cachedBlankLine,u&&u.length===this.cols&&u.getFg(0)===n.fg&&u.getBg(0)===n.bg||(u=a.getBlankLine(n,h),this._cachedBlankLine=u),u.isWrapped=h;const g=a.ybase+a.scrollTop,v=a.ybase+a.scrollBottom;if(a.scrollTop===0){const y=a.lines.isFull;v===a.lines.length-1?y?a.lines.recycle().copyFrom(u):a.lines.push(u.clone()):a.lines.splice(v+1,0,u.clone()),y?this.isUserScrolling&&(a.ydisp=Math.max(a.ydisp-1,0)):(a.ybase++,this.isUserScrolling||a.ydisp++)}else{const y=v-g+1;a.lines.shiftElements(g+1,y-1,-1),a.lines.set(v,u.clone())}this.isUserScrolling||(a.ydisp=a.ybase),this._onScroll.fire(a.ydisp)}scrollLines(n,h,a){const u=this.buffer;if(n<0){if(u.ydisp===0)return;this.isUserScrolling=!0}else n+u.ydisp>=u.ybase&&(this.isUserScrolling=!1);const g=u.ydisp;u.ydisp=Math.max(Math.min(u.ydisp+n,u.ybase),0),g!==u.ydisp&&(h||this._onScroll.fire(u.ydisp))}};i.BufferService=S=c([f(0,w.IOptionsService)],S)},7994:(_,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CharsetService=void 0,i.CharsetService=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(r){this.glevel=r,this.charset=this._charsets[r]}setgCharset(r,c){this._charsets[r]=c,this.glevel===r&&(this.charset=c)}}},1753:function(_,i,r){var c=this&&this.__decorate||function(u,g,v,y){var E,C=arguments.length,k=C<3?g:y===null?y=Object.getOwnPropertyDescriptor(g,v):y;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(u,g,v,y);else for(var L=u.length-1;L>=0;L--)(E=u[L])&&(k=(C<3?E(k):C>3?E(g,v,k):E(g,v))||k);return C>3&&k&&Object.defineProperty(g,v,k),k},f=this&&this.__param||function(u,g){return function(v,y){g(v,y,u)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CoreMouseService=void 0;const l=r(2585),p=r(8460),b=r(844),w={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:u=>u.button!==4&&u.action===1&&(u.ctrl=!1,u.alt=!1,u.shift=!1,!0)},VT200:{events:19,restrict:u=>u.action!==32},DRAG:{events:23,restrict:u=>u.action!==32||u.button!==3},ANY:{events:31,restrict:u=>!0}};function S(u,g){let v=(u.ctrl?16:0)|(u.shift?4:0)|(u.alt?8:0);return u.button===4?(v|=64,v|=u.action):(v|=3&u.button,4&u.button&&(v|=64),8&u.button&&(v|=128),u.action===32?v|=32:u.action!==0||g||(v|=3)),v}const n=String.fromCharCode,h={DEFAULT:u=>{const g=[S(u,!1)+32,u.col+32,u.row+32];return g[0]>255||g[1]>255||g[2]>255?"":`\x1B[M${n(g[0])}${n(g[1])}${n(g[2])}`},SGR:u=>{const g=u.action===0&&u.button!==4?"m":"M";return`\x1B[<${S(u,!0)};${u.col};${u.row}${g}`},SGR_PIXELS:u=>{const g=u.action===0&&u.button!==4?"m":"M";return`\x1B[<${S(u,!0)};${u.x};${u.y}${g}`}};let a=i.CoreMouseService=class extends b.Disposable{constructor(u,g){super(),this._bufferService=u,this._coreService=g,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._onProtocolChange=this.register(new p.EventEmitter),this.onProtocolChange=this._onProtocolChange.event;for(const v of Object.keys(w))this.addProtocol(v,w[v]);for(const v of Object.keys(h))this.addEncoding(v,h[v]);this.reset()}addProtocol(u,g){this._protocols[u]=g}addEncoding(u,g){this._encodings[u]=g}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(u){if(!this._protocols[u])throw new Error(`unknown protocol "${u}"`);this._activeProtocol=u,this._onProtocolChange.fire(this._protocols[u].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(u){if(!this._encodings[u])throw new Error(`unknown encoding "${u}"`);this._activeEncoding=u}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null}triggerMouseEvent(u){if(u.col<0||u.col>=this._bufferService.cols||u.row<0||u.row>=this._bufferService.rows||u.button===4&&u.action===32||u.button===3&&u.action!==32||u.button!==4&&(u.action===2||u.action===3)||(u.col++,u.row++,u.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,u,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(u))return!1;const g=this._encodings[this._activeEncoding](u);return g&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(g):this._coreService.triggerDataEvent(g,!0)),this._lastEvent=u,!0}explainEvents(u){return{down:!!(1&u),up:!!(2&u),drag:!!(4&u),move:!!(8&u),wheel:!!(16&u)}}_equalEvents(u,g,v){if(v){if(u.x!==g.x||u.y!==g.y)return!1}else if(u.col!==g.col||u.row!==g.row)return!1;return u.button===g.button&&u.action===g.action&&u.ctrl===g.ctrl&&u.alt===g.alt&&u.shift===g.shift}};i.CoreMouseService=a=c([f(0,l.IBufferService),f(1,l.ICoreService)],a)},6975:function(_,i,r){var c=this&&this.__decorate||function(a,u,g,v){var y,E=arguments.length,C=E<3?u:v===null?v=Object.getOwnPropertyDescriptor(u,g):v;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(a,u,g,v);else for(var k=a.length-1;k>=0;k--)(y=a[k])&&(C=(E<3?y(C):E>3?y(u,g,C):y(u,g))||C);return E>3&&C&&Object.defineProperty(u,g,C),C},f=this&&this.__param||function(a,u){return function(g,v){u(g,v,a)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CoreService=void 0;const l=r(1439),p=r(8460),b=r(844),w=r(2585),S=Object.freeze({insertMode:!1}),n=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0});let h=i.CoreService=class extends b.Disposable{constructor(a,u,g){super(),this._bufferService=a,this._logService=u,this._optionsService=g,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this.register(new p.EventEmitter),this.onData=this._onData.event,this._onUserInput=this.register(new p.EventEmitter),this.onUserInput=this._onUserInput.event,this._onBinary=this.register(new p.EventEmitter),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this.register(new p.EventEmitter),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=(0,l.clone)(S),this.decPrivateModes=(0,l.clone)(n)}reset(){this.modes=(0,l.clone)(S),this.decPrivateModes=(0,l.clone)(n)}triggerDataEvent(a,u=!1){if(this._optionsService.rawOptions.disableStdin)return;const g=this._bufferService.buffer;u&&this._optionsService.rawOptions.scrollOnUserInput&&g.ybase!==g.ydisp&&this._onRequestScrollToBottom.fire(),u&&this._onUserInput.fire(),this._logService.debug(`sending data "${a}"`,()=>a.split("").map(v=>v.charCodeAt(0))),this._onData.fire(a)}triggerBinaryEvent(a){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${a}"`,()=>a.split("").map(u=>u.charCodeAt(0))),this._onBinary.fire(a))}};i.CoreService=h=c([f(0,w.IBufferService),f(1,w.ILogService),f(2,w.IOptionsService)],h)},9074:(_,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DecorationService=void 0;const c=r(8055),f=r(8460),l=r(844),p=r(6106);let b=0,w=0;class S extends l.Disposable{get decorations(){return this._decorations.values()}constructor(){super(),this._decorations=new p.SortedList(a=>a==null?void 0:a.marker.line),this._onDecorationRegistered=this.register(new f.EventEmitter),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this.register(new f.EventEmitter),this.onDecorationRemoved=this._onDecorationRemoved.event,this.register((0,l.toDisposable)(()=>this.reset()))}registerDecoration(a){if(a.marker.isDisposed)return;const u=new n(a);if(u){const g=u.marker.onDispose(()=>u.dispose());u.onDispose(()=>{u&&(this._decorations.delete(u)&&this._onDecorationRemoved.fire(u),g.dispose())}),this._decorations.insert(u),this._onDecorationRegistered.fire(u)}return u}reset(){for(const a of this._decorations.values())a.dispose();this._decorations.clear()}*getDecorationsAtCell(a,u,g){var v,y,E;let C=0,k=0;for(const L of this._decorations.getKeyIterator(u))C=(v=L.options.x)!==null&&v!==void 0?v:0,k=C+((y=L.options.width)!==null&&y!==void 0?y:1),a>=C&&a<k&&(!g||((E=L.options.layer)!==null&&E!==void 0?E:"bottom")===g)&&(yield L)}forEachDecorationAtCell(a,u,g,v){this._decorations.forEachByKey(u,y=>{var E,C,k;b=(E=y.options.x)!==null&&E!==void 0?E:0,w=b+((C=y.options.width)!==null&&C!==void 0?C:1),a>=b&&a<w&&(!g||((k=y.options.layer)!==null&&k!==void 0?k:"bottom")===g)&&v(y)})}}i.DecorationService=S;class n extends l.Disposable{get isDisposed(){return this._isDisposed}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=c.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=c.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}constructor(a){super(),this.options=a,this.onRenderEmitter=this.register(new f.EventEmitter),this.onRender=this.onRenderEmitter.event,this._onDispose=this.register(new f.EventEmitter),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=a.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}dispose(){this._onDispose.fire(),super.dispose()}}},4348:(_,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.InstantiationService=i.ServiceCollection=void 0;const c=r(2585),f=r(8343);class l{constructor(...b){this._entries=new Map;for(const[w,S]of b)this.set(w,S)}set(b,w){const S=this._entries.get(b);return this._entries.set(b,w),S}forEach(b){for(const[w,S]of this._entries.entries())b(w,S)}has(b){return this._entries.has(b)}get(b){return this._entries.get(b)}}i.ServiceCollection=l,i.InstantiationService=class{constructor(){this._services=new l,this._services.set(c.IInstantiationService,this)}setService(p,b){this._services.set(p,b)}getService(p){return this._services.get(p)}createInstance(p,...b){const w=(0,f.getServiceDependencies)(p).sort((h,a)=>h.index-a.index),S=[];for(const h of w){const a=this._services.get(h.id);if(!a)throw new Error(`[createInstance] ${p.name} depends on UNKNOWN service ${h.id}.`);S.push(a)}const n=w.length>0?w[0].index:b.length;if(b.length!==n)throw new Error(`[createInstance] First service dependency of ${p.name} at position ${n+1} conflicts with ${b.length} static arguments`);return new p(...b,...S)}}},7866:function(_,i,r){var c=this&&this.__decorate||function(n,h,a,u){var g,v=arguments.length,y=v<3?h:u===null?u=Object.getOwnPropertyDescriptor(h,a):u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(n,h,a,u);else for(var E=n.length-1;E>=0;E--)(g=n[E])&&(y=(v<3?g(y):v>3?g(h,a,y):g(h,a))||y);return v>3&&y&&Object.defineProperty(h,a,y),y},f=this&&this.__param||function(n,h){return function(a,u){h(a,u,n)}};Object.defineProperty(i,"__esModule",{value:!0}),i.traceCall=i.setTraceLogger=i.LogService=void 0;const l=r(844),p=r(2585),b={trace:p.LogLevelEnum.TRACE,debug:p.LogLevelEnum.DEBUG,info:p.LogLevelEnum.INFO,warn:p.LogLevelEnum.WARN,error:p.LogLevelEnum.ERROR,off:p.LogLevelEnum.OFF};let w,S=i.LogService=class extends l.Disposable{get logLevel(){return this._logLevel}constructor(n){super(),this._optionsService=n,this._logLevel=p.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),w=this}_updateLogLevel(){this._logLevel=b[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(n){for(let h=0;h<n.length;h++)typeof n[h]=="function"&&(n[h]=n[h]())}_log(n,h,a){this._evalLazyOptionalParams(a),n.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+h,...a)}trace(n,...h){var a,u;this._logLevel<=p.LogLevelEnum.TRACE&&this._log((u=(a=this._optionsService.options.logger)===null||a===void 0?void 0:a.trace.bind(this._optionsService.options.logger))!==null&&u!==void 0?u:console.log,n,h)}debug(n,...h){var a,u;this._logLevel<=p.LogLevelEnum.DEBUG&&this._log((u=(a=this._optionsService.options.logger)===null||a===void 0?void 0:a.debug.bind(this._optionsService.options.logger))!==null&&u!==void 0?u:console.log,n,h)}info(n,...h){var a,u;this._logLevel<=p.LogLevelEnum.INFO&&this._log((u=(a=this._optionsService.options.logger)===null||a===void 0?void 0:a.info.bind(this._optionsService.options.logger))!==null&&u!==void 0?u:console.info,n,h)}warn(n,...h){var a,u;this._logLevel<=p.LogLevelEnum.WARN&&this._log((u=(a=this._optionsService.options.logger)===null||a===void 0?void 0:a.warn.bind(this._optionsService.options.logger))!==null&&u!==void 0?u:console.warn,n,h)}error(n,...h){var a,u;this._logLevel<=p.LogLevelEnum.ERROR&&this._log((u=(a=this._optionsService.options.logger)===null||a===void 0?void 0:a.error.bind(this._optionsService.options.logger))!==null&&u!==void 0?u:console.error,n,h)}};i.LogService=S=c([f(0,p.IOptionsService)],S),i.setTraceLogger=function(n){w=n},i.traceCall=function(n,h,a){if(typeof a.value!="function")throw new Error("not supported");const u=a.value;a.value=function(...g){if(w.logLevel!==p.LogLevelEnum.TRACE)return u.apply(this,g);w.trace(`GlyphRenderer#${u.name}(${g.map(y=>JSON.stringify(y)).join(", ")})`);const v=u.apply(this,g);return w.trace(`GlyphRenderer#${u.name} return`,v),v}}},7302:(_,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.OptionsService=i.DEFAULT_OPTIONS=void 0;const c=r(8460),f=r(844),l=r(6114);i.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rightClickSelectsWord:l.isMac,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:0};const p=["normal","bold","100","200","300","400","500","600","700","800","900"];class b extends f.Disposable{constructor(S){super(),this._onOptionChange=this.register(new c.EventEmitter),this.onOptionChange=this._onOptionChange.event;const n=Object.assign({},i.DEFAULT_OPTIONS);for(const h in S)if(h in n)try{const a=S[h];n[h]=this._sanitizeAndValidateOption(h,a)}catch(a){console.error(a)}this.rawOptions=n,this.options=Object.assign({},n),this._setupOptions()}onSpecificOptionChange(S,n){return this.onOptionChange(h=>{h===S&&n(this.rawOptions[S])})}onMultipleOptionChange(S,n){return this.onOptionChange(h=>{S.indexOf(h)!==-1&&n()})}_setupOptions(){const S=h=>{if(!(h in i.DEFAULT_OPTIONS))throw new Error(`No option with key "${h}"`);return this.rawOptions[h]},n=(h,a)=>{if(!(h in i.DEFAULT_OPTIONS))throw new Error(`No option with key "${h}"`);a=this._sanitizeAndValidateOption(h,a),this.rawOptions[h]!==a&&(this.rawOptions[h]=a,this._onOptionChange.fire(h))};for(const h in this.rawOptions){const a={get:S.bind(this,h),set:n.bind(this,h)};Object.defineProperty(this.options,h,a)}}_sanitizeAndValidateOption(S,n){switch(S){case"cursorStyle":if(n||(n=i.DEFAULT_OPTIONS[S]),!function(h){return h==="block"||h==="underline"||h==="bar"}(n))throw new Error(`"${n}" is not a valid value for ${S}`);break;case"wordSeparator":n||(n=i.DEFAULT_OPTIONS[S]);break;case"fontWeight":case"fontWeightBold":if(typeof n=="number"&&1<=n&&n<=1e3)break;n=p.includes(n)?n:i.DEFAULT_OPTIONS[S];break;case"cursorWidth":n=Math.floor(n);case"lineHeight":case"tabStopWidth":if(n<1)throw new Error(`${S} cannot be less than 1, value: ${n}`);break;case"minimumContrastRatio":n=Math.max(1,Math.min(21,Math.round(10*n)/10));break;case"scrollback":if((n=Math.min(n,4294967295))<0)throw new Error(`${S} cannot be less than 0, value: ${n}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(n<=0)throw new Error(`${S} cannot be less than or equal to 0, value: ${n}`);break;case"rows":case"cols":if(!n&&n!==0)throw new Error(`${S} must be numeric, value: ${n}`);break;case"windowsPty":n=n??{}}return n}}i.OptionsService=b},2660:function(_,i,r){var c=this&&this.__decorate||function(b,w,S,n){var h,a=arguments.length,u=a<3?w:n===null?n=Object.getOwnPropertyDescriptor(w,S):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(b,w,S,n);else for(var g=b.length-1;g>=0;g--)(h=b[g])&&(u=(a<3?h(u):a>3?h(w,S,u):h(w,S))||u);return a>3&&u&&Object.defineProperty(w,S,u),u},f=this&&this.__param||function(b,w){return function(S,n){w(S,n,b)}};Object.defineProperty(i,"__esModule",{value:!0}),i.OscLinkService=void 0;const l=r(2585);let p=i.OscLinkService=class{constructor(b){this._bufferService=b,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(b){const w=this._bufferService.buffer;if(b.id===void 0){const g=w.addMarker(w.ybase+w.y),v={data:b,id:this._nextId++,lines:[g]};return g.onDispose(()=>this._removeMarkerFromLink(v,g)),this._dataByLinkId.set(v.id,v),v.id}const S=b,n=this._getEntryIdKey(S),h=this._entriesWithId.get(n);if(h)return this.addLineToLink(h.id,w.ybase+w.y),h.id;const a=w.addMarker(w.ybase+w.y),u={id:this._nextId++,key:this._getEntryIdKey(S),data:S,lines:[a]};return a.onDispose(()=>this._removeMarkerFromLink(u,a)),this._entriesWithId.set(u.key,u),this._dataByLinkId.set(u.id,u),u.id}addLineToLink(b,w){const S=this._dataByLinkId.get(b);if(S&&S.lines.every(n=>n.line!==w)){const n=this._bufferService.buffer.addMarker(w);S.lines.push(n),n.onDispose(()=>this._removeMarkerFromLink(S,n))}}getLinkData(b){var w;return(w=this._dataByLinkId.get(b))===null||w===void 0?void 0:w.data}_getEntryIdKey(b){return`${b.id};;${b.uri}`}_removeMarkerFromLink(b,w){const S=b.lines.indexOf(w);S!==-1&&(b.lines.splice(S,1),b.lines.length===0&&(b.data.id!==void 0&&this._entriesWithId.delete(b.key),this._dataByLinkId.delete(b.id)))}};i.OscLinkService=p=c([f(0,l.IBufferService)],p)},8343:(_,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.createDecorator=i.getServiceDependencies=i.serviceRegistry=void 0;const r="di$target",c="di$dependencies";i.serviceRegistry=new Map,i.getServiceDependencies=function(f){return f[c]||[]},i.createDecorator=function(f){if(i.serviceRegistry.has(f))return i.serviceRegistry.get(f);const l=function(p,b,w){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(S,n,h){n[r]===n?n[c].push({id:S,index:h}):(n[c]=[{id:S,index:h}],n[r]=n)})(l,p,w)};return l.toString=()=>f,i.serviceRegistry.set(f,l),l}},2585:(_,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.IDecorationService=i.IUnicodeService=i.IOscLinkService=i.IOptionsService=i.ILogService=i.LogLevelEnum=i.IInstantiationService=i.ICharsetService=i.ICoreService=i.ICoreMouseService=i.IBufferService=void 0;const c=r(8343);var f;i.IBufferService=(0,c.createDecorator)("BufferService"),i.ICoreMouseService=(0,c.createDecorator)("CoreMouseService"),i.ICoreService=(0,c.createDecorator)("CoreService"),i.ICharsetService=(0,c.createDecorator)("CharsetService"),i.IInstantiationService=(0,c.createDecorator)("InstantiationService"),function(l){l[l.TRACE=0]="TRACE",l[l.DEBUG=1]="DEBUG",l[l.INFO=2]="INFO",l[l.WARN=3]="WARN",l[l.ERROR=4]="ERROR",l[l.OFF=5]="OFF"}(f||(i.LogLevelEnum=f={})),i.ILogService=(0,c.createDecorator)("LogService"),i.IOptionsService=(0,c.createDecorator)("OptionsService"),i.IOscLinkService=(0,c.createDecorator)("OscLinkService"),i.IUnicodeService=(0,c.createDecorator)("UnicodeService"),i.IDecorationService=(0,c.createDecorator)("DecorationService")},1480:(_,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.UnicodeService=void 0;const c=r(8460),f=r(225);i.UnicodeService=class{constructor(){this._providers=Object.create(null),this._active="",this._onChange=new c.EventEmitter,this.onChange=this._onChange.event;const l=new f.UnicodeV6;this.register(l),this._active=l.version,this._activeProvider=l}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(l){if(!this._providers[l])throw new Error(`unknown Unicode version "${l}"`);this._active=l,this._activeProvider=this._providers[l],this._onChange.fire(l)}register(l){this._providers[l.version]=l}wcwidth(l){return this._activeProvider.wcwidth(l)}getStringCellWidth(l){let p=0;const b=l.length;for(let w=0;w<b;++w){let S=l.charCodeAt(w);if(55296<=S&&S<=56319){if(++w>=b)return p+this.wcwidth(S);const n=l.charCodeAt(w);56320<=n&&n<=57343?S=1024*(S-55296)+n-56320+65536:p+=this.wcwidth(n)}p+=this.wcwidth(S)}return p}}}},s={};function d(_){var i=s[_];if(i!==void 0)return i.exports;var r=s[_]={exports:{}};return t[_].call(r.exports,r,r.exports,d),r.exports}var m={};return(()=>{var _=m;Object.defineProperty(_,"__esModule",{value:!0}),_.Terminal=void 0;const i=d(9042),r=d(3236),c=d(844),f=d(5741),l=d(8285),p=d(7975),b=d(7090),w=["cols","rows"];class S extends c.Disposable{constructor(h){super(),this._core=this.register(new r.Terminal(h)),this._addonManager=this.register(new f.AddonManager),this._publicOptions=Object.assign({},this._core.options);const a=g=>this._core.options[g],u=(g,v)=>{this._checkReadonlyOptions(g),this._core.options[g]=v};for(const g in this._core.options){const v={get:a.bind(this,g),set:u.bind(this,g)};Object.defineProperty(this._publicOptions,g,v)}}_checkReadonlyOptions(h){if(w.includes(h))throw new Error(`Option "${h}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new p.ParserApi(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new b.UnicodeApi(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this.register(new l.BufferNamespaceApi(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){const h=this._core.coreService.decPrivateModes;let a="none";switch(this._core.coreMouseService.activeProtocol){case"X10":a="x10";break;case"VT200":a="vt200";break;case"DRAG":a="drag";break;case"ANY":a="any"}return{applicationCursorKeysMode:h.applicationCursorKeys,applicationKeypadMode:h.applicationKeypad,bracketedPasteMode:h.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:a,originMode:h.origin,reverseWraparoundMode:h.reverseWraparound,sendFocusMode:h.sendFocus,wraparoundMode:h.wraparound}}get options(){return this._publicOptions}set options(h){for(const a in h)this._publicOptions[a]=h[a]}blur(){this._core.blur()}focus(){this._core.focus()}resize(h,a){this._verifyIntegers(h,a),this._core.resize(h,a)}open(h){this._core.open(h)}attachCustomKeyEventHandler(h){this._core.attachCustomKeyEventHandler(h)}registerLinkProvider(h){return this._core.registerLinkProvider(h)}registerCharacterJoiner(h){return this._checkProposedApi(),this._core.registerCharacterJoiner(h)}deregisterCharacterJoiner(h){this._checkProposedApi(),this._core.deregisterCharacterJoiner(h)}registerMarker(h=0){return this._verifyIntegers(h),this._core.registerMarker(h)}registerDecoration(h){var a,u,g;return this._checkProposedApi(),this._verifyPositiveIntegers((a=h.x)!==null&&a!==void 0?a:0,(u=h.width)!==null&&u!==void 0?u:0,(g=h.height)!==null&&g!==void 0?g:0),this._core.registerDecoration(h)}hasSelection(){return this._core.hasSelection()}select(h,a,u){this._verifyIntegers(h,a,u),this._core.select(h,a,u)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(h,a){this._verifyIntegers(h,a),this._core.selectLines(h,a)}dispose(){super.dispose()}scrollLines(h){this._verifyIntegers(h),this._core.scrollLines(h)}scrollPages(h){this._verifyIntegers(h),this._core.scrollPages(h)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(h){this._verifyIntegers(h),this._core.scrollToLine(h)}clear(){this._core.clear()}write(h,a){this._core.write(h,a)}writeln(h,a){this._core.write(h),this._core.write(`\r
`,a)}paste(h){this._core.paste(h)}refresh(h,a){this._verifyIntegers(h,a),this._core.refresh(h,a)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(h){this._addonManager.loadAddon(this,h)}static get strings(){return i}_verifyIntegers(...h){for(const a of h)if(a===1/0||isNaN(a)||a%1!=0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...h){for(const a of h)if(a&&(a===1/0||isNaN(a)||a%1!=0||a<0))throw new Error("This API only accepts positive integers")}}_.Terminal=S})(),m})())})(wr);var vl=wr.exports,kr={exports:{}};(function(o,e){(function(t,s){o.exports=s()})(self,()=>(()=>{var t={};return(()=>{var s=t;Object.defineProperty(s,"__esModule",{value:!0}),s.FitAddon=void 0,s.FitAddon=class{activate(d){this._terminal=d}dispose(){}fit(){const d=this.proposeDimensions();if(!d||!this._terminal||isNaN(d.cols)||isNaN(d.rows))return;const m=this._terminal._core;this._terminal.rows===d.rows&&this._terminal.cols===d.cols||(m._renderService.clear(),this._terminal.resize(d.cols,d.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;const d=this._terminal._core,m=d._renderService.dimensions;if(m.css.cell.width===0||m.css.cell.height===0)return;const _=this._terminal.options.scrollback===0?0:d.viewport.scrollBarWidth,i=window.getComputedStyle(this._terminal.element.parentElement),r=parseInt(i.getPropertyValue("height")),c=Math.max(0,parseInt(i.getPropertyValue("width"))),f=window.getComputedStyle(this._terminal.element),l=r-(parseInt(f.getPropertyValue("padding-top"))+parseInt(f.getPropertyValue("padding-bottom"))),p=c-(parseInt(f.getPropertyValue("padding-right"))+parseInt(f.getPropertyValue("padding-left")))-_;return{cols:Math.max(2,Math.floor(p/m.css.cell.width)),rows:Math.max(1,Math.floor(l/m.css.cell.height))}}}})(),t})())})(kr);var gl=kr.exports;function bl(o){let e,t,s,d,m,_,i,r,c,f,l,p,b,w,S,n,h,a,u,g;return S=new _e({props:{icon:ln}}),{c(){e=P("form"),t=P("div"),s=P("div"),d=P("input"),m=G(),_=P("label"),_.textContent="Command",i=G(),r=P("div"),c=P("input"),f=G(),l=P("label"),l.textContent="User",p=G(),b=P("div"),w=P("button"),ne(S.$$.fragment),n=Y(`
          Open Terminal`),R(d,"type","text"),R(d,"class","form-control"),R(d,"id","inpTerminalCmd"),R(_,"for","inpTerminalCmd"),R(s,"class","form-floating mb-2"),R(c,"type","text"),R(c,"class","form-control"),R(c,"id","inpTerminalUser"),R(l,"for","inpTerminalUser"),R(r,"class","form-floating mb-2"),R(w,"type","submit"),R(w,"class","btn btn-primary w-100"),R(b,"class","col-12"),R(t,"class","container"),be(t,"max-width","400px"),R(e,"class","container login-form")},m(v,y){j(v,e,y),A(e,t),A(t,s),A(s,d),Ye(d,o[2]),A(s,m),A(s,_),A(t,i),A(t,r),A(r,c),Ye(c,o[3]),A(r,f),A(r,l),A(t,p),A(t,b),A(b,w),se(S,w,null),A(w,n),a=!0,u||(g=[pe(d,"input",o[10]),pe(c,"input",o[11]),pe(e,"submit",ei(o[5]))],u=!0)},p(v,y){y&4&&d.value!==v[2]&&Ye(d,v[2]),y&8&&c.value!==v[3]&&Ye(c,v[3])},i(v){a||(N(S.$$.fragment,v),v&&Te(()=>{a&&(h||(h=Ke(e,Ne,{},!0)),h.run(1))}),a=!0)},o(v){K(S.$$.fragment,v),v&&(h||(h=Ke(e,Ne,{},!1)),h.run(0)),a=!1},d(v){v&&W(e),re(S),v&&h&&h.end(),u=!1,qe(g)}}}function Sl(o){let e,t,s,d,m,_,i,r,c,f,l;return s=new _e({props:{icon:pr,size:"lg",color:"#666"}}),_=new _e({props:{icon:zn,size:"lg",color:"#666"}}),{c(){e=P("div"),t=P("button"),ne(s.$$.fragment),d=G(),m=P("button"),ne(_.$$.fragment),i=G(),r=P("div"),R(t,"type","button"),R(t,"class","btn mx-3"),R(t,"title","Fullscreen"),R(m,"type","button"),R(m,"class","btn mx-3"),R(m,"title","Close Terminal"),R(e,"class","d-flex justify-content-end mb-2"),R(r,"class","border"),be(r,"height","calc(100vh - 280px)")},m(p,b){j(p,e,b),A(e,t),se(s,t,null),A(e,d),A(e,m),se(_,m,null),j(p,i,b),j(p,r,b),o[9](r),c=!0,f||(l=[pe(t,"click",o[6]),pe(m,"click",o[8])],f=!0)},p:ce,i(p){c||(N(s.$$.fragment,p),N(_.$$.fragment,p),c=!0)},o(p){K(s.$$.fragment,p),K(_.$$.fragment,p),c=!1},d(p){p&&(W(e),W(i),W(r)),re(s),re(_),o[9](null),f=!1,qe(l)}}}function Cl(o){let e,t,s,d,m,_;const i=[Sl,bl],r=[];function c(f,l){return f[1]?0:1}return e=c(o),t=r[e]=i[e](o),{c(){t.c(),s=rt()},m(f,l){r[e].m(f,l),j(f,s,l),d=!0,m||(_=pe(window,"resize",o[4]),m=!0)},p(f,[l]){let p=e;e=c(f),e===p?r[e].p(f,l):(ve(),K(r[p],1,1,()=>{r[p]=null}),ge(),t=r[e],t?t.p(f,l):(t=r[e]=i[e](f),t.c()),N(t,1),t.m(s.parentNode,s))},i(f){d||(N(t),d=!0)},o(f){K(t),d=!1},d(f){f&&W(s),r[e].d(f),m=!1,_()}}}const Is="sh",Hs="root";function wl(o,e,t){let{container_id:s}=e,d,m,_=!1,i=Is,r=Hs;const c=new vl.Terminal({theme:{background:"#222",cursor:"white",cursorAccent:"#222"},cursorBlink:!0}),f=new gl.FitAddon;Ht(()=>{s!==d&&(_&&(le.send("close_terminal"),b()),d=s)}),Ge(()=>{le.register("spawn_terminal",()=>{l(),c.focus()},u=>Ce.add({text:u,type:"error"})),le.register("close_terminal",()=>{Ce.add({text:"Terminal has been closed",type:"info"}),b()},u=>Ce.add({text:u,type:"error"})),le.register("receive_terminal_output",async u=>{c.write(new Uint8Array(await u.blob.arrayBuffer()))},u=>Ce.add({text:u,type:"error"})),c.onResize(u=>{le.send("resize_terminal",u)}),c.loadAddon(f),c.onData(u=>{le.send("transmit_terminal_input",{data:u})})}),dt(()=>{_&&le.send("close_terminal"),le.unregister("spawn_terminal"),le.unregister("close_terminal"),le.unregister("receive_terminal_output")});function l(){_&&f.fit()}async function p(){t(1,_=!0),le.send("spawn_terminal",{container_id:s,cmd:i,user:r}),await cr(),c.open(m)}function b(){t(1,_=!1),c.reset(),c.clear(),t(2,i=Is),t(3,r=Hs)}function w(){m!=null&&m.requestFullscreen&&m.requestFullscreen({navigationUI:"show"})}const S=()=>le.send("close_terminal");function n(u){ft[u?"unshift":"push"](()=>{m=u,t(0,m)})}function h(){i=this.value,t(2,i)}function a(){r=this.value,t(3,r)}return o.$$set=u=>{"container_id"in u&&t(7,s=u.container_id)},[m,_,i,r,l,p,w,s,S,n,h,a]}class yl extends He{constructor(e){super(),Ie(this,e,wl,Cl,xe,{container_id:7})}}var kl={prefix:"fab",iconName:"docker",icon:[640,512,[],"f395","M349.9 236.3h-66.1v-59.4h66.1v59.4zm0-204.3h-66.1v60.7h66.1V32zm78.2 144.8H362v59.4h66.1v-59.4zm-156.3-72.1h-66.1v60.1h66.1v-60.1zm78.1 0h-66.1v60.1h66.1v-60.1zm276.8 100c-14.4-9.7-47.6-13.2-73.1-8.4-3.3-24-16.7-44.9-41.1-63.7l-14-9.3-9.3 14c-18.4 27.8-23.4 73.6-3.7 103.8-8.7 4.7-25.8 11.1-48.4 10.7H2.4c-8.7 50.8 5.8 116.8 44 162.1 37.1 43.9 92.7 66.2 165.4 66.2 157.4 0 273.9-72.5 328.4-204.2 21.4.4 67.6.1 91.3-45.2 1.5-2.5 6.6-13.2 8.5-17.1l-13.3-8.9zm-511.1-27.9h-66v59.4h66.1v-59.4zm78.1 0h-66.1v59.4h66.1v-59.4zm78.1 0h-66.1v59.4h66.1v-59.4zm-78.1-72.1h-66.1v60.1h66.1v-60.1z"]},El={prefix:"fab",iconName:"github",icon:[496,512,[],"f09b","M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"]};function Ll(o){let e,t,s,d,m,_,i,r=o[1].os+"",c,f,l,p,b,w=o[1].cpus+"",S,n,h,a,u,g,v=je(o[1].mem)+"",y,E,C,k,L,T,x=o[1].engine_version+"",O,U,$,q,F,D=o[1].containers.running+"",M,H,I=o[1].containers.total+"",X,J,ie,te,fe,B,z,Z;return _=new _e({props:{icon:mn,size:"lg",style:"width: 3rem"}}),p=new _e({props:{icon:mr,size:"lg",style:"width: 3rem"}}),u=new _e({props:{icon:_r,size:"lg",style:"width: 3rem"}}),L=new _e({props:{icon:kl,size:"lg",style:"width: 3rem"}}),q=new _e({props:{icon:vr,size:"lg",style:"width: 3rem"}}),B=new _e({props:{icon:El,size:"sm"}}),{c(){e=P("div"),t=P("div"),s=P("div"),s.textContent="Host",d=G(),m=P("div"),ne(_.$$.fragment),i=G(),c=Y(r),f=G(),l=P("div"),ne(p.$$.fragment),b=G(),S=Y(w),n=Y(" CPUs"),h=G(),a=P("div"),ne(u.$$.fragment),g=G(),y=Y(v),E=Y(`
          Memory`),C=G(),k=P("div"),ne(L.$$.fragment),T=G(),O=Y(x),U=G(),$=P("div"),ne(q.$$.fragment),F=G(),M=Y(D),H=Y("/"),X=Y(I),J=Y(" Containers running"),ie=G(),te=P("div"),fe=P("a"),ne(B.$$.fragment),z=Y(`
            CaaSa on Github`),R(s,"class","fs-4 text-uppercase mb-3"),R(m,"class","d-flex align-items-center mb-2"),R(l,"class","d-flex align-items-center mb-2"),R(a,"class","d-flex align-items-center mb-2"),R(k,"class","d-flex align-items-center mb-2"),R($,"class","d-flex align-items-center mb-2"),R(fe,"href","https://github.com/knrdl/caasa"),R(fe,"target","_blank"),R(fe,"rel","noopener noreferrer"),R(fe,"class","text-decoration-none"),R(te,"class","mt-3"),R(t,"class","card-body"),R(e,"class","card")},m(V,oe){j(V,e,oe),A(e,t),A(t,s),A(t,d),A(t,m),se(_,m,null),A(m,i),A(m,c),A(t,f),A(t,l),se(p,l,null),A(l,b),A(l,S),A(l,n),A(t,h),A(t,a),se(u,a,null),A(a,g),A(a,y),A(a,E),A(t,C),A(t,k),se(L,k,null),A(k,T),A(k,O),A(t,U),A(t,$),se(q,$,null),A($,F),A($,M),A($,H),A($,X),A($,J),A(t,ie),A(t,te),A(te,fe),se(B,fe,null),A(fe,z),Z=!0},p(V,oe){(!Z||oe&2)&&r!==(r=V[1].os+"")&&ae(c,r),(!Z||oe&2)&&w!==(w=V[1].cpus+"")&&ae(S,w),(!Z||oe&2)&&v!==(v=je(V[1].mem)+"")&&ae(y,v),(!Z||oe&2)&&x!==(x=V[1].engine_version+"")&&ae(O,x),(!Z||oe&2)&&D!==(D=V[1].containers.running+"")&&ae(M,D),(!Z||oe&2)&&I!==(I=V[1].containers.total+"")&&ae(X,I)},i(V){Z||(N(_.$$.fragment,V),N(p.$$.fragment,V),N(u.$$.fragment,V),N(L.$$.fragment,V),N(q.$$.fragment,V),N(B.$$.fragment,V),Z=!0)},o(V){K(_.$$.fragment,V),K(p.$$.fragment,V),K(u.$$.fragment,V),K(L.$$.fragment,V),K(q.$$.fragment,V),K(B.$$.fragment,V),Z=!1},d(V){V&&W(e),re(_),re(p),re(u),re(L),re(q),re(B)}}}function Dl(o){let e;return{c(){e=P("div"),e.innerHTML='<strong class="mx-5">Loading...</strong> <div class="spinner-border ms-auto" role="status" aria-hidden="true"></div>',R(e,"class","d-flex align-items-center")},m(t,s){j(t,e,s)},p:ce,i:ce,o:ce,d(t){t&&W(e)}}}function Rl(o){let e,t,s,d;const m=[Dl,Ll],_=[];function i(r,c){return r[0]?0:r[1]?1:-1}return~(t=i(o))&&(s=_[t]=m[t](o)),{c(){e=P("div"),s&&s.c(),R(e,"class","flex-grow-1 d-flex justify-content-center align-items-start mt-5")},m(r,c){j(r,e,c),~t&&_[t].m(e,null),d=!0},p(r,[c]){let f=t;t=i(r),t===f?~t&&_[t].p(r,c):(s&&(ve(),K(_[f],1,1,()=>{_[f]=null}),ge()),~t?(s=_[t],s?s.p(r,c):(s=_[t]=m[t](r),s.c()),N(s,1),s.m(e,null)):s=null)},i(r){d||(N(s),d=!0)},o(r){K(s),d=!1},d(r){r&&W(e),~t&&_[t].d()}}}function Al(o,e,t){let s=!0,d;return Ge(()=>{le.register("get_system_info",m=>{t(1,d=m),t(0,s=!1)},m=>{t(0,s=!1),Ce.add({text:m,type:"error"})}),le.send("get_system_info")}),dt(()=>{le.unregister("get_system_info")}),[s,d]}class Bl extends He{constructor(e){super(),Ie(this,e,Al,Rl,xe,{})}}function $s(o,e,t){const s=o.slice();s[7]=e[t];const d=s[1]&&s[1].id===s[7].id;return s[8]=d,s}function Fs(o){let e;function t(m,_){return m[0].length===0?Tl:Ml}let s=t(o),d=s(o);return{c(){d.c(),e=rt()},m(m,_){d.m(m,_),j(m,e,_)},p(m,_){s===(s=t(m))&&d?d.p(m,_):(d.d(1),d=s(m),d&&(d.c(),d.m(e.parentNode,e)))},d(m){m&&W(e),d.d(m)}}}function Ml(o){let e,t,s,d,m,_=ye(o[3]),i=[];for(let c=0;c<_.length;c+=1)i[c]=Ns($s(o,_,c));let r=null;return _.length||(r=zs()),{c(){e=P("input"),t=G();for(let c=0;c<i.length;c+=1)i[c].c();s=rt(),r&&r.c(),R(e,"type","search"),R(e,"class","form-control svelte-6rcsrg"),R(e,"placeholder","Search"),e.value=o[2]},m(c,f){j(c,e,f),j(c,t,f);for(let l=0;l<i.length;l+=1)i[l]&&i[l].m(c,f);j(c,s,f),r&&r.m(c,f),d||(m=pe(e,"input",o[5]),d=!0)},p(c,f){if(f&4&&e.value!==c[2]&&(e.value=c[2]),f&26){_=ye(c[3]);let l;for(l=0;l<_.length;l+=1){const p=$s(c,_,l);i[l]?i[l].p(p,f):(i[l]=Ns(p),i[l].c(),i[l].m(s.parentNode,s))}for(;l<i.length;l+=1)i[l].d(1);i.length=_.length,!_.length&&r?r.p(c,f):_.length?r&&(r.d(1),r=null):(r=zs(),r.c(),r.m(s.parentNode,s))}},d(c){c&&(W(e),W(t),W(s)),Ve(i,c),r&&r.d(c),d=!1,m()}}}function Tl(o){let e;return{c(){e=P("p"),e.textContent="No containers found",R(e,"class","mx-5 my-2")},m(t,s){j(t,e,s)},p:ce,d(t){t&&W(e)}}}function zs(o){let e;return{c(){e=P("p"),e.textContent="No containers match search term",R(e,"class","mx-2 my-1")},m(t,s){j(t,e,s)},p:ce,d(t){t&&W(e)}}}function Ns(o){let e,t,s,d,m,_=(o[7].namespace||"")+"",i,r,c,f=o[7].name+"",l,p,b,w;function S(){return o[6](o[7])}return{c(){var n;e=P("div"),t=P("div"),s=G(),d=P("div"),m=P("div"),i=Y(_),r=G(),c=P("div"),l=Y(f),p=G(),be(t,"width","10px"),be(t,"flex","none"),he(t,"bg-success",o[7].status==="running"),he(t,"bg-danger",["exited","dead","removing"].includes(o[7].status)),he(t,"bg-warning",["created","paused","restarting"].includes(o[7].status)),R(m,"class","text-uppercase"),he(m,"text-muted",((n=o[1])==null?void 0:n.id)!==o[7].id),R(d,"class","p-2 pe-4"),R(e,"class","d-flex border-top border-bottom"),be(e,"cursor","pointer"),he(e,"bg-dark",o[8]),he(e,"text-light",o[8])},m(n,h){j(n,e,h),A(e,t),A(e,s),A(e,d),A(d,m),A(m,i),A(d,r),A(d,c),A(c,l),A(e,p),b||(w=pe(e,"click",S),b=!0)},p(n,h){var a;o=n,h&8&&he(t,"bg-success",o[7].status==="running"),h&8&&he(t,"bg-danger",["exited","dead","removing"].includes(o[7].status)),h&8&&he(t,"bg-warning",["created","paused","restarting"].includes(o[7].status)),h&8&&_!==(_=(o[7].namespace||"")+"")&&ae(i,_),h&10&&he(m,"text-muted",((a=o[1])==null?void 0:a.id)!==o[7].id),h&8&&f!==(f=o[7].name+"")&&ae(l,f),h&10&&he(e,"bg-dark",o[8]),h&10&&he(e,"text-light",o[8])},d(n){n&&W(e),b=!1,w()}}}function xl(o){let e,t=o[0]&&Fs(o);return{c(){e=P("aside"),t&&t.c(),R(e,"class","d-flex flex-column pb-1 svelte-6rcsrg")},m(s,d){j(s,e,d),t&&t.m(e,null)},p(s,[d]){s[0]?t?t.p(s,d):(t=Fs(s),t.c(),t.m(e,null)):t&&(t.d(1),t=null)},i:ce,o:ce,d(s){s&&W(e),t&&t.d()}}}function Ol(o,e,t){let s,{containers:d}=e,{selectedContainer:m}=e;const _=or();let i="";const r=f=>t(2,i=f.target.value.toLowerCase()),c=f=>_("select-container",f);return o.$$set=f=>{"containers"in f&&t(0,d=f.containers),"selectedContainer"in f&&t(1,m=f.selectedContainer)},o.$$.update=()=>{o.$$.dirty&5&&t(3,s=d==null?void 0:d.filter(f=>{var l;return f.name.toLowerCase().replace(/\s+/g,"").includes(i.replace(/\s+/g,""))||((l=f.namespace)==null?void 0:l.toLowerCase().replace(/\s+/g,"").includes(i.replace(/\s+/g,"")))}))},[d,m,i,s,_,r,c]}class Er extends He{constructor(e){super(),Ie(this,e,Ol,xl,xe,{containers:0,selectedContainer:1})}}function Ws(o){let e,t;return e=new br({}),{c(){ne(e.$$.fragment)},m(s,d){se(e,s,d),t=!0},i(s){t||(N(e.$$.fragment,s),t=!0)},o(s){K(e.$$.fragment,s),t=!1},d(s){re(e,s)}}}function Us(o){let e,t,s,d;return t=new Er({props:{containers:o[4],selectedContainer:o[0]?null:o[2]}}),t.$on("select-container",o[10]),{c(){e=P("div"),ne(t.$$.fragment),R(e,"class","position-absolute")},m(m,_){j(m,e,_),se(t,e,null),d=!0},p(m,_){const i={};_&16&&(i.containers=m[4]),_&5&&(i.selectedContainer=m[0]?null:m[2]),t.$set(i)},i(m){d||(N(t.$$.fragment,m),m&&Te(()=>{d&&(s||(s=Ke(e,Yt,{y:-50,duration:200},!0)),s.run(1))}),d=!0)},o(m){K(t.$$.fragment,m),m&&(s||(s=Ke(e,Yt,{y:-50,duration:200},!1)),s.run(0)),d=!1},d(m){m&&W(e),re(t),m&&s&&s.end()}}}function Pl(o){var T,x,O,U,$,q,F,D,M,H;let e,t,s,d=(x=(T=o[2])==null?void 0:T.permissions)==null?void 0:x.includes("info"),m,_=(U=(O=o[2])==null?void 0:O.permissions)==null?void 0:U.includes("logs"),i,r=o[6]&&((q=($=o[2])==null?void 0:$.permissions)==null?void 0:q.includes("term")),c,f=o[6]&&((D=(F=o[2])==null?void 0:F.permissions)==null?void 0:D.includes("procs")),l,p=o[6]&&((H=(M=o[2])==null?void 0:M.permissions)==null?void 0:H.includes("files")),b,w,S,n,h,a,u=d&&js(o),g=_&&Vs(o),v=r&&Ks(o),y=f&&qs(o),E=p&&Gs(o);const C=[Nl,zl,Fl,$l,Hl],k=[];function L(I,X){return I[5]==="info"?0:I[5]==="logs"?1:I[5]==="term"?2:I[5]==="procs"?3:I[5]==="files"?4:-1}return~(S=L(o))&&(n=k[S]=C[S](o)),{c(){e=P("div"),t=P("div"),s=P("ul"),u&&u.c(),m=G(),g&&g.c(),i=G(),v&&v.c(),c=G(),y&&y.c(),l=G(),E&&E.c(),b=G(),w=P("div"),n&&n.c(),R(s,"class","card-header"),R(w,"class","card-body py-4"),R(t,"class","card tabs"),R(e,"class","container-md"),be(e,"overflow","hidden")},m(I,X){j(I,e,X),A(e,t),A(t,s),u&&u.m(s,null),A(s,m),g&&g.m(s,null),A(s,i),v&&v.m(s,null),A(s,c),y&&y.m(s,null),A(s,l),E&&E.m(s,null),A(t,b),A(t,w),~S&&k[S].m(w,null),a=!0},p(I,X){var ie,te,fe,B,z,Z,V,oe,ee,me;X&4&&(d=(te=(ie=I[2])==null?void 0:ie.permissions)==null?void 0:te.includes("info")),d?u?u.p(I,X):(u=js(I),u.c(),u.m(s,m)):u&&(u.d(1),u=null),X&4&&(_=(B=(fe=I[2])==null?void 0:fe.permissions)==null?void 0:B.includes("logs")),_?g?g.p(I,X):(g=Vs(I),g.c(),g.m(s,i)):g&&(g.d(1),g=null),X&68&&(r=I[6]&&((Z=(z=I[2])==null?void 0:z.permissions)==null?void 0:Z.includes("term"))),r?v?v.p(I,X):(v=Ks(I),v.c(),v.m(s,c)):v&&(v.d(1),v=null),X&68&&(f=I[6]&&((oe=(V=I[2])==null?void 0:V.permissions)==null?void 0:oe.includes("procs"))),f?y?y.p(I,X):(y=qs(I),y.c(),y.m(s,l)):y&&(y.d(1),y=null),X&68&&(p=I[6]&&((me=(ee=I[2])==null?void 0:ee.permissions)==null?void 0:me.includes("files"))),p?E?E.p(I,X):(E=Gs(I),E.c(),E.m(s,null)):E&&(E.d(1),E=null);let J=S;S=L(I),S===J?~S&&k[S].p(I,X):(n&&(ve(),K(k[J],1,1,()=>{k[J]=null}),ge()),~S?(n=k[S],n?n.p(I,X):(n=k[S]=C[S](I),n.c()),N(n,1),n.m(w,null)):n=null)},i(I){a||(N(n),I&&Te(()=>{a&&(h||(h=Ke(e,Yt,{x:300,duration:200},!0)),h.run(1))}),a=!0)},o(I){K(n),I&&(h||(h=Ke(e,Yt,{x:300,duration:200},!1)),h.run(0)),a=!1},d(I){I&&W(e),u&&u.d(),g&&g.d(),v&&v.d(),y&&y.d(),E&&E.d(),~S&&k[S].d(),I&&h&&h.end()}}}function Il(o){let e,t;return e=new Bl({}),{c(){ne(e.$$.fragment)},m(s,d){se(e,s,d),t=!0},p:ce,i(s){t||(N(e.$$.fragment,s),t=!0)},o(s){K(e.$$.fragment,s),t=!1},d(s){re(e,s)}}}function js(o){let e,t,s,d;return{c(){e=P("li"),t=P("button"),t.textContent="Info",R(t,"type","button"),R(t,"class","text-uppercase"),he(t,"active",o[5]==="info")},m(m,_){j(m,e,_),A(e,t),s||(d=pe(t,"click",o[12]),s=!0)},p(m,_){_&32&&he(t,"active",m[5]==="info")},d(m){m&&W(e),s=!1,d()}}}function Vs(o){let e,t,s,d;return{c(){e=P("li"),t=P("button"),t.textContent="Logs",R(t,"type","button"),R(t,"class","text-uppercase"),he(t,"active",o[5]==="logs")},m(m,_){j(m,e,_),A(e,t),s||(d=pe(t,"click",o[13]),s=!0)},p(m,_){_&32&&he(t,"active",m[5]==="logs")},d(m){m&&W(e),s=!1,d()}}}function Ks(o){let e,t,s,d;return{c(){e=P("li"),t=P("button"),t.textContent="Terminal",R(t,"type","button"),R(t,"class","text-uppercase"),he(t,"active",o[5]==="term")},m(m,_){j(m,e,_),A(e,t),s||(d=pe(t,"click",o[14]),s=!0)},p(m,_){_&32&&he(t,"active",m[5]==="term")},d(m){m&&W(e),s=!1,d()}}}function qs(o){let e,t,s,d;return{c(){e=P("li"),t=P("button"),t.textContent="Processes",R(t,"type","button"),R(t,"class","text-uppercase"),he(t,"active",o[5]==="procs")},m(m,_){j(m,e,_),A(e,t),s||(d=pe(t,"click",o[15]),s=!0)},p(m,_){_&32&&he(t,"active",m[5]==="procs")},d(m){m&&W(e),s=!1,d()}}}function Gs(o){let e,t,s,d;return{c(){e=P("li"),t=P("button"),t.textContent="Files",R(t,"type","button"),R(t,"class","text-uppercase"),he(t,"active",o[5]==="files")},m(m,_){j(m,e,_),A(e,t),s||(d=pe(t,"click",o[16]),s=!0)},p(m,_){_&32&&he(t,"active",m[5]==="files")},d(m){m&&W(e),s=!1,d()}}}function Hl(o){let e,t,s,d;return t=new ul({props:{container_id:o[2].id,allow_download:o[2].permissions.includes("files-read"),allow_upload:o[2].permissions.includes("files-write")}}),{c(){e=P("div"),ne(t.$$.fragment)},m(m,_){j(m,e,_),se(t,e,null),d=!0},p(m,_){const i={};_&4&&(i.container_id=m[2].id),_&4&&(i.allow_download=m[2].permissions.includes("files-read")),_&4&&(i.allow_upload=m[2].permissions.includes("files-write")),t.$set(i)},i(m){d||(N(t.$$.fragment,m),m&&(s||Te(()=>{s=wt(e,Ne,{}),s.start()})),d=!0)},o(m){K(t.$$.fragment,m),d=!1},d(m){m&&W(e),re(t)}}}function $l(o){let e,t,s,d;return t=new ml({props:{container_id:o[2].id}}),{c(){e=P("div"),ne(t.$$.fragment)},m(m,_){j(m,e,_),se(t,e,null),d=!0},p(m,_){const i={};_&4&&(i.container_id=m[2].id),t.$set(i)},i(m){d||(N(t.$$.fragment,m),m&&(s||Te(()=>{s=wt(e,Ne,{}),s.start()})),d=!0)},o(m){K(t.$$.fragment,m),d=!1},d(m){m&&W(e),re(t)}}}function Fl(o){let e,t,s,d;return t=new yl({props:{container_id:o[2].id}}),{c(){e=P("div"),ne(t.$$.fragment)},m(m,_){j(m,e,_),se(t,e,null),d=!0},p(m,_){const i={};_&4&&(i.container_id=m[2].id),t.$set(i)},i(m){d||(N(t.$$.fragment,m),m&&(s||Te(()=>{s=wt(e,Ne,{}),s.start()})),d=!0)},o(m){K(t.$$.fragment,m),d=!1},d(m){m&&W(e),re(t)}}}function zl(o){let e,t,s,d;return t=new Uo({props:{container_id:o[2].id}}),{c(){e=P("div"),ne(t.$$.fragment)},m(m,_){j(m,e,_),se(t,e,null),d=!0},p(m,_){const i={};_&4&&(i.container_id=m[2].id),t.$set(i)},i(m){d||(N(t.$$.fragment,m),m&&(s||Te(()=>{s=wt(e,Ne,{}),s.start()})),d=!0)},o(m){K(t.$$.fragment,m),d=!1},d(m){m&&W(e),re(t)}}}function Nl(o){let e,t,s,d;return t=new To({props:{container_id:o[2].id,enable_actions:o[2].permissions.includes("state")}}),{c(){e=P("div"),ne(t.$$.fragment)},m(m,_){j(m,e,_),se(t,e,null),d=!0},p(m,_){const i={};_&4&&(i.container_id=m[2].id),_&4&&(i.enable_actions=m[2].permissions.includes("state")),t.$set(i)},i(m){d||(N(t.$$.fragment,m),m&&(s||Te(()=>{s=wt(e,Ne,{}),s.start()})),d=!0)},o(m){K(t.$$.fragment,m),d=!1},d(m){m&&W(e),re(t)}}}function Wl(o){let e,t,s,d,m,_,i,r,c,f,l,p,b,w,S=o[3]&&Ws(),n=o[1]&&Us(o);r=new Er({props:{containers:o[4],selectedContainer:o[0]?null:o[2]}}),r.$on("select-container",o[11]);const h=[Il,Pl],a=[];function u(g,v){return g[0]?0:1}return f=u(o),l=a[f]=h[f](o),{c(){S&&S.c(),e=G(),t=P("div"),s=P("div"),d=G(),n&&n.c(),m=G(),_=P("div"),i=P("aside"),ne(r.$$.fragment),c=G(),l.c(),R(s,"class","position-fixed top-0 bottom-0 start-0 end-0"),be(s,"background","rgba(0, 0, 0, .55)"),R(t,"class","d-md-none position-relative"),be(t,"z-index","100"),he(t,"d-none",!o[1]),R(i,"class","d-none d-md-block me-4"),R(_,"class","d-flex pb-3 align-items-start")},m(g,v){S&&S.m(g,v),j(g,e,v),j(g,t,v),A(t,s),A(t,d),n&&n.m(t,null),j(g,m,v),j(g,_,v),A(_,i),se(r,i,null),A(_,c),a[f].m(_,null),p=!0,b||(w=pe(s,"click",o[9]),b=!0)},p(g,[v]){g[3]?S?v&8&&N(S,1):(S=Ws(),S.c(),N(S,1),S.m(e.parentNode,e)):S&&(ve(),K(S,1,1,()=>{S=null}),ge()),g[1]?n?(n.p(g,v),v&2&&N(n,1)):(n=Us(g),n.c(),N(n,1),n.m(t,null)):n&&(ve(),K(n,1,1,()=>{n=null}),ge()),(!p||v&2)&&he(t,"d-none",!g[1]);const y={};v&16&&(y.containers=g[4]),v&5&&(y.selectedContainer=g[0]?null:g[2]),r.$set(y);let E=f;f=u(g),f===E?a[f].p(g,v):(ve(),K(a[E],1,1,()=>{a[E]=null}),ge(),l=a[f],l?l.p(g,v):(l=a[f]=h[f](g),l.c()),N(l,1),l.m(_,null))},i(g){p||(N(S),N(n),N(r.$$.fragment,g),N(l),p=!0)},o(g){K(S),K(n),K(r.$$.fragment,g),K(l),p=!1},d(g){g&&(W(e),W(t),W(m),W(_)),S&&S.d(g),n&&n.d(),re(r),a[f].d(),b=!1,w()}}}function Ul(o,e,t){let s,d,m=!0,_,i,{showHostInfo:r}=e,{showContainerListOverlay:c}=e,f=null;Ge(()=>{le.register("get_container_list",v=>{t(4,_=v),t(3,m=!1)},v=>Ce.add({text:v,type:"error"})),le.send("get_container_list"),d=setInterval(()=>{le.send("get_container_list")},3e3)}),dt(()=>{le.unregister("get_container_list"),clearInterval(d)});function l(v){t(5,f=null),t(0,r=!1),t(1,c=!1),t(2,i=null),window.scrollTo({top:0,behavior:"smooth"}),setTimeout(()=>{var E;t(2,i=v);const y=["info","logs","procs","term","files"];for(let C of y)if((E=i==null?void 0:i.permissions)!=null&&E.includes(C)){t(5,f=C);break}f||(t(2,i=null),Ce.add({type:"warning",text:"No permissions to access container"}))},100)}function p(v){t(5,f=v)}const b=()=>t(1,c=!1),w=v=>l(v.detail),S=v=>l(v.detail),n=()=>p("info"),h=()=>p("logs"),a=()=>p("term"),u=()=>p("procs"),g=()=>p("files");return o.$$set=v=>{"showHostInfo"in v&&t(0,r=v.showHostInfo),"showContainerListOverlay"in v&&t(1,c=v.showContainerListOverlay)},o.$$.update=()=>{o.$$.dirty&4&&t(6,s=(i==null?void 0:i.status)==="running")},[r,c,i,m,_,f,s,l,p,b,w,S,n,h,a,u,g]}class jl extends He{constructor(e){super(),Ie(this,e,Ul,Wl,xe,{showHostInfo:0,showContainerListOverlay:1})}}const{window:Vl}=Mr;function Xs(o){let e,t,s,d,m;return t=new _e({props:{icon:an,color:"#123",size:"2x",style:"width: 3rem;height: 3rem;"}}),{c(){e=P("a"),ne(t.$$.fragment),R(e,"href","/#/"),R(e,"class","d-md-none d-flex justify-content-center align-items-center svelte-1b5nrvg")},m(_,i){j(_,e,i),se(t,e,null),s=!0,d||(m=pe(e,"click",ei(o[5])),d=!0)},p:ce,i(_){s||(N(t.$$.fragment,_),s=!0)},o(_){K(t.$$.fragment,_),s=!1},d(_){_&&W(e),re(t),d=!1,m()}}}function Zs(o){let e,t,s,d,m,_;return t=new _e({props:{icon:on,color:"#333",size:"2x"}}),{c(){e=P("button"),ne(t.$$.fragment),R(e,"type","button"),R(e,"class","btn mx-2"),R(e,"title",s="Logout "+o[0])},m(i,r){j(i,e,r),se(t,e,null),d=!0,m||(_=pe(e,"click",o[4]),m=!0)},p(i,r){(!d||r&1&&s!==(s="Logout "+i[0]))&&R(e,"title",s)},i(i){d||(N(t.$$.fragment,i),d=!0)},o(i){K(t.$$.fragment,i),d=!1},d(i){i&&W(e),re(t),m=!1,_()}}}function Kl(o){let e,t;return e=new co({}),e.$on("login",o[9]),{c(){ne(e.$$.fragment)},m(s,d){se(e,s,d),t=!0},p:ce,i(s){t||(N(e.$$.fragment,s),t=!0)},o(s){K(e.$$.fragment,s),t=!1},d(s){re(e,s)}}}function ql(o){let e,t,s,d;function m(r){o[7](r)}function _(r){o[8](r)}let i={};return o[2]!==void 0&&(i.showHostInfo=o[2]),o[3]!==void 0&&(i.showContainerListOverlay=o[3]),e=new jl({props:i}),ft.push(()=>xi(e,"showHostInfo",m)),ft.push(()=>xi(e,"showContainerListOverlay",_)),{c(){ne(e.$$.fragment)},m(r,c){se(e,r,c),d=!0},p(r,c){const f={};!t&&c&4&&(t=!0,f.showHostInfo=r[2],Ti(()=>t=!1)),!s&&c&8&&(s=!0,f.showContainerListOverlay=r[3],Ti(()=>s=!1)),e.$set(f)},i(r){d||(N(e.$$.fragment,r),d=!0)},o(r){K(e.$$.fragment,r),d=!1},d(r){re(e,r)}}}function Gl(o){let e,t,s,d,m,_,i,r,c,f,l,p,b,w,S,n,h,a,u,g;e=new Jr({});let v=o[0]&&Xs(o);r=new _e({props:{icon:Sn,color:"#123",size:"2x",style:"width: 3rem;height: 3rem;"}}),b=new qn({});let y=o[0]&&o[1]&&Zs(o);const E=[ql,Kl],C=[];function k(L,T){return L[0]?0:1}return n=k(o),h=C[n]=E[n](o),{c(){ne(e.$$.fragment),t=G(),s=P("main"),d=P("header"),v&&v.c(),m=G(),_=P("a"),i=P("span"),ne(r.$$.fragment),c=G(),f=P("span"),f.textContent="Container as a Service admin",l=G(),p=P("div"),ne(b.$$.fragment),w=G(),y&&y.c(),S=G(),h.c(),he(i,"d-none",o[0]),he(i,"d-md-block",o[0]),R(f,"class","text-black ps-2 fs-2 fw-light"),R(_,"href","/#/"),R(_,"class","d-flex justify-content-center align-items-center svelte-1b5nrvg"),R(p,"class","items-right svelte-1b5nrvg"),R(d,"class","svelte-1b5nrvg"),R(s,"class","svelte-1b5nrvg")},m(L,T){se(e,L,T),j(L,t,T),j(L,s,T),A(s,d),v&&v.m(d,null),A(d,m),A(d,_),A(_,i),se(r,i,null),A(_,c),A(_,f),A(d,l),A(d,p),se(b,p,null),A(p,w),y&&y.m(p,null),A(s,S),C[n].m(s,null),a=!0,u||(g=[pe(Vl,"error",Xl),pe(_,"click",ei(o[6]))],u=!0)},p(L,[T]){L[0]?v?(v.p(L,T),T&1&&N(v,1)):(v=Xs(L),v.c(),N(v,1),v.m(d,m)):v&&(ve(),K(v,1,1,()=>{v=null}),ge()),(!a||T&1)&&he(i,"d-none",L[0]),(!a||T&1)&&he(i,"d-md-block",L[0]),L[0]&&L[1]?y?(y.p(L,T),T&3&&N(y,1)):(y=Zs(L),y.c(),N(y,1),y.m(p,null)):y&&(ve(),K(y,1,1,()=>{y=null}),ge());let x=n;n=k(L),n===x?C[n].p(L,T):(ve(),K(C[x],1,1,()=>{C[x]=null}),ge(),h=C[n],h?h.p(L,T):(h=C[n]=E[n](L),h.c()),N(h,1),h.m(s,null))},i(L){a||(N(e.$$.fragment,L),N(v),N(r.$$.fragment,L),N(b.$$.fragment,L),N(y),N(h),a=!0)},o(L){K(e.$$.fragment,L),K(v),K(r.$$.fragment,L),K(b.$$.fragment,L),K(y),K(h),a=!1},d(L){L&&(W(t),W(s)),re(e,L),v&&v.d(),re(r),re(b),y&&y.d(),C[n].d(),u=!1,qe(g)}}}function Xl(){alert("An error occurred!")}function Zl(o,e,t){let s=null,d=!0,m=!0,_=!1;Ge(async()=>{le.register("ws-error",null,b=>Ce.add({text:b,type:"error"})),le.register("ws-close",null,b=>{Ce.add({text:b,type:"error"}),t(0,s=null),alert("Lost connection. Reconnect?"),window.location.reload()}),le.register("webproxy_auth",({username:b})=>{t(0,s=b),t(1,d=!1)},b=>{Ce.add({text:b,type:"error"})}),await le.init()});function i(){le.close(),t(0,s=null),Ce.add({text:"Logged out",type:"info"}),window.location.reload()}const r=()=>t(3,_=!_),c=()=>t(2,m=!0);function f(b){m=b,t(2,m)}function l(b){_=b,t(3,_)}return[s,d,m,_,i,r,c,f,l,b=>t(0,s=b.detail.username)]}class Jl extends He{constructor(e){super(),Ie(this,e,Zl,Gl,xe,{})}}new Jl({target:document.getElementById("app")});
