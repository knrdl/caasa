var Ys=Object.defineProperty;var Js=(n,_,g)=>_ in n?Ys(n,_,{enumerable:!0,configurable:!0,writable:!0,value:g}):n[_]=g;var Ve=(n,_,g)=>Js(n,typeof _!="symbol"?_+"":_,g);(function(){const _=document.createElement("link").relList;if(_&&_.supports&&_.supports("modulepreload"))return;for(const y of document.querySelectorAll('link[rel="modulepreload"]'))x(y);new MutationObserver(y=>{for(const A of y)if(A.type==="childList")for(const D of A.addedNodes)D.tagName==="LINK"&&D.rel==="modulepreload"&&x(D)}).observe(document,{childList:!0,subtree:!0});function g(y){const A={};return y.integrity&&(A.integrity=y.integrity),y.referrerPolicy&&(A.referrerPolicy=y.referrerPolicy),y.crossOrigin==="use-credentials"?A.credentials="include":y.crossOrigin==="anonymous"?A.credentials="omit":A.credentials="same-origin",A}function x(y){if(y.ep)return;y.ep=!0;const A=g(y);fetch(y.href,A)}})();const Qs="5";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Qs);let Xt=!1,en=!1;function tn(){Xt=!0}tn();const ar=1,lr=2,Nr=4,rn=8,sn=16,nn=1,on=2,an=4,ln=8,cn=16,hn=1,dn=2,un=4,Wr=1,_n=2,Xe=Symbol(),Ji=!1;var ui=Array.isArray,fn=Array.prototype.indexOf,Ur=Array.from,vn=Object.defineProperty,wi=Object.getOwnPropertyDescriptor,$r=Object.getOwnPropertyDescriptors,pn=Object.prototype,gn=Array.prototype,cr=Object.getPrototypeOf;function mn(n){return typeof n=="function"}const Rt=()=>{};function Sn(n){return n()}function Qi(n){for(var _=0;_<n.length;_++)n[_]()}const Ye=2,jr=4,_i=8,Pi=16,wt=32,fi=64,ki=128,Wt=256,Li=512,qe=1024,Et=2048,Ht=4096,bt=8192,Zt=16384,qr=32768,Ii=65536,Kr=1<<17,bn=1<<19,Vr=1<<20,Mt=Symbol("$state"),Cn=Symbol("legacy props"),yn=Symbol("");function Gr(n){return n===this.v}function Xr(n,_){return n!=n?_==_:n!==_||n!==null&&typeof n=="object"||typeof n=="function"}function hr(n){return!Xr(n,this.v)}function wn(n){throw new Error("https://svelte.dev/e/effect_in_teardown")}function En(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function xn(n){throw new Error("https://svelte.dev/e/effect_orphan")}function kn(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Ln(n){throw new Error("https://svelte.dev/e/lifecycle_legacy_only")}function Dn(n){throw new Error("https://svelte.dev/e/props_invalid_value")}function Rn(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function An(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Tn(){throw new Error("https://svelte.dev/e/state_unsafe_local_read")}function Bn(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function ht(n,_){var g={f:0,v:n,reactions:null,equals:Gr,rv:0,wv:0};return g}function dr(n,_=!1){var x;const g=ht(n);return _||(g.equals=hr),Xt&&ye!==null&&ye.l!==null&&((x=ye.l).s??(x.s=[])).push(g),g}function ae(n,_=!1){return Mn(dr(n,_))}function Mn(n){return De!==null&&!Ot&&De.f&Ye&&(Ct===null?qn([n]):Ct.push(n)),n}function qi(n,_){return X(n,st(()=>L(n))),_}function X(n,_){return De!==null&&!Ot&&mi()&&De.f&(Ye|Pi)&&(Ct===null||!Ct.includes(n))&&Bn(),ni(n,_)}function ni(n,_){return n.equals(_)||(n.v,n.v=_,n.wv=ds(),Zr(n,Et),mi()&&Ce!==null&&Ce.f&qe&&!(Ce.f&(wt|fi))&&(Dt===null?Kn([n]):Dt.push(n))),_}function Zr(n,_){var g=n.reactions;if(g!==null)for(var x=mi(),y=g.length,A=0;A<y;A++){var D=g[A],s=D.f;s&Et||!x&&D===Ce||(pt(D,_),s&(qe|Wt)&&(s&Ye?Zr(D,Ht):Ui(D)))}}let ur=!1;function jt(n,_=null,g){if(typeof n!="object"||n===null||Mt in n)return n;const x=cr(n);if(x!==pn&&x!==gn)return n;var y=new Map,A=ui(n),D=ht(0);A&&y.set("length",ht(n.length));var s;return new Proxy(n,{defineProperty(o,l,f){(!("value"in f)||f.configurable===!1||f.enumerable===!1||f.writable===!1)&&Rn();var a=y.get(l);return a===void 0?(a=ht(f.value),y.set(l,a)):X(a,jt(f.value,s)),!0},deleteProperty(o,l){var f=y.get(l);if(f===void 0)l in o&&y.set(l,ht(Xe));else{if(A&&typeof l=="string"){var a=y.get("length"),c=Number(l);Number.isInteger(c)&&c<a.v&&X(a,c)}X(f,Xe),Cr(D)}return!0},get(o,l,f){var b;if(l===Mt)return n;var a=y.get(l),c=l in o;if(a===void 0&&(!c||(b=wi(o,l))!=null&&b.writable)&&(a=ht(jt(c?o[l]:Xe,s)),y.set(l,a)),a!==void 0){var p=L(a);return p===Xe?void 0:p}return Reflect.get(o,l,f)},getOwnPropertyDescriptor(o,l){var f=Reflect.getOwnPropertyDescriptor(o,l);if(f&&"value"in f){var a=y.get(l);a&&(f.value=L(a))}else if(f===void 0){var c=y.get(l),p=c==null?void 0:c.v;if(c!==void 0&&p!==Xe)return{enumerable:!0,configurable:!0,value:p,writable:!0}}return f},has(o,l){var p;if(l===Mt)return!0;var f=y.get(l),a=f!==void 0&&f.v!==Xe||Reflect.has(o,l);if(f!==void 0||Ce!==null&&(!a||(p=wi(o,l))!=null&&p.writable)){f===void 0&&(f=ht(a?jt(o[l],s):Xe),y.set(l,f));var c=L(f);if(c===Xe)return!1}return a},set(o,l,f,a){var i;var c=y.get(l),p=l in o;if(A&&l==="length")for(var b=f;b<c.v;b+=1){var v=y.get(b+"");v!==void 0?X(v,Xe):b in o&&(v=ht(Xe),y.set(b+"",v))}c===void 0?(!p||(i=wi(o,l))!=null&&i.writable)&&(c=ht(void 0),X(c,jt(f,s)),y.set(l,c)):(p=c.v!==Xe,X(c,jt(f,s)));var e=Reflect.getOwnPropertyDescriptor(o,l);if(e!=null&&e.set&&e.set.call(a,f),!p){if(A&&typeof l=="string"){var r=y.get("length"),t=Number(l);Number.isInteger(t)&&t>=r.v&&X(r,t+1)}Cr(D)}return!0},ownKeys(o){L(D);var l=Reflect.ownKeys(o).filter(c=>{var p=y.get(c);return p===void 0||p.v!==Xe});for(var[f,a]of y)a.v!==Xe&&!(f in o)&&l.push(f);return l},setPrototypeOf(){An()}})}function Cr(n,_=1){X(n,n.v+_)}function yr(n){return n!==null&&typeof n=="object"&&Mt in n?n[Mt]:n}function On(n,_){return Object.is(yr(n),yr(_))}var Yr,Pn,In;function _r(n=""){return document.createTextNode(n)}function At(n){return Pn.call(n)}function Hi(n){return In.call(n)}function H(n,_){return At(n)}function _e(n,_){{var g=At(n);return g instanceof Comment&&g.data===""?Hi(g):g}}function j(n,_=1,g=!1){let x=n;for(;_--;)x=Hi(x);return x}function Hn(n){n.textContent=""}function oi(n){var _=Ye|Et;Ce===null?_|=Wt:Ce.f|=Vr;var g=De!==null&&De.f&Ye?De:null;const x={children:null,ctx:ye,deps:null,equals:Gr,f:_,fn:n,reactions:null,rv:0,v:null,wv:0,parent:g??Ce};return g!==null&&(g.children??(g.children=[])).push(x),x}function ke(n){const _=oi(n);return _.equals=hr,_}function Jr(n){var _=n.children;if(_!==null){n.children=null;for(var g=0;g<_.length;g+=1){var x=_[g];x.f&Ye?fr(x):Jt(x)}}}function Fn(n){for(var _=n.parent;_!==null;){if(!(_.f&Ye))return _;_=_.parent}return null}function Qr(n){var _,g=Ce;vt(Fn(n));try{Jr(n),_=_s(n)}finally{vt(g)}return _}function es(n){var _=Qr(n),g=(Nt||n.f&Wt)&&n.deps!==null?Ht:qe;pt(n,g),n.equals(_)||(n.v=_,n.wv=ds())}function fr(n){Jr(n),ci(n,0),pt(n,Zt),n.v=n.children=n.deps=n.ctx=n.reactions=null}function ts(n){Ce===null&&De===null&&xn(),De!==null&&De.f&Wt&&En(),gr&&wn()}function zn(n,_){var g=_.last;g===null?_.last=_.first=n:(g.next=n,n.prev=g,_.last=n)}function vi(n,_,g,x=!0){var y=(n&fi)!==0,A=Ce,D={ctx:ye,deps:null,deriveds:null,nodes_start:null,nodes_end:null,f:n|Et,first:null,fn:_,last:null,next:null,parent:y?null:A,prev:null,teardown:null,transitions:null,wv:0};if(g){var s=Kt;try{wr(!0),Wi(D),D.f|=qr}catch(f){throw Jt(D),f}finally{wr(s)}}else _!==null&&Ui(D);var o=g&&D.deps===null&&D.first===null&&D.nodes_start===null&&D.teardown===null&&(D.f&(Vr|ki))===0;if(!o&&!y&&x&&(A!==null&&zn(D,A),De!==null&&De.f&Ye)){var l=De;(l.children??(l.children=[])).push(D)}return D}function Nn(n){const _=vi(_i,null,!1);return pt(_,qe),_.teardown=n,_}function er(n){ts();var _=Ce!==null&&(Ce.f&wt)!==0&&ye!==null&&!ye.m;if(_){var g=ye;(g.e??(g.e=[])).push({fn:n,effect:Ce,reaction:De})}else{var x=Yt(n);return x}}function Wn(n){return ts(),gi(n)}function Yt(n){return vi(jr,n,!1)}function St(n,_){var g=ye,x={effect:null,ran:!1};g.l.r1.push(x),x.effect=gi(()=>{n(),!x.ran&&(x.ran=!0,X(g.l.r2,!0),st(_))})}function pi(){var n=ye;gi(()=>{if(L(n.l.r2)){for(var _ of n.l.r1){var g=_.effect;g.f&qe&&pt(g,Ht),Qt(g)&&Wi(g),_.ran=!1}n.l.r2.v=!1}})}function gi(n){return vi(_i,n,!0)}function re(n,_=[],g=oi){const x=_.map(g);return vr(()=>n(...x.map(L)))}function vr(n,_=0){return vi(_i|Pi|_,n,!0)}function Di(n,_=!0){return vi(_i|wt,n,!0,_)}function is(n){var _=n.teardown;if(_!==null){const g=gr,x=De;Er(!0),yt(null);try{_.call(null)}finally{Er(g),yt(x)}}}function rs(n){var _=n.deriveds;if(_!==null){n.deriveds=null;for(var g=0;g<_.length;g+=1)fr(_[g])}}function ss(n,_=!1){var g=n.first;for(n.first=n.last=null;g!==null;){var x=g.next;Jt(g,_),g=x}}function Un(n){for(var _=n.first;_!==null;){var g=_.next;_.f&wt||Jt(_),_=g}}function Jt(n,_=!0){var g=!1;if((_||n.f&bn)&&n.nodes_start!==null){for(var x=n.nodes_start,y=n.nodes_end;x!==null;){var A=x===y?null:Hi(x);x.remove(),x=A}g=!0}ss(n,_&&!g),rs(n),ci(n,0),pt(n,Zt);var D=n.transitions;if(D!==null)for(const o of D)o.stop();is(n);var s=n.parent;s!==null&&s.first!==null&&ns(n),n.next=n.prev=n.teardown=n.ctx=n.deps=n.fn=n.nodes_start=n.nodes_end=null}function ns(n){var _=n.parent,g=n.prev,x=n.next;g!==null&&(g.next=x),x!==null&&(x.prev=g),_!==null&&(_.first===n&&(_.first=x),_.last===n&&(_.last=g))}function tr(n,_){var g=[];pr(n,g,!0),os(g,()=>{Jt(n),_&&_()})}function os(n,_){var g=n.length;if(g>0){var x=()=>--g||_();for(var y of n)y.out(x)}else _()}function pr(n,_,g){if(!(n.f&bt)){if(n.f^=bt,n.transitions!==null)for(const D of n.transitions)(D.is_global||g)&&_.push(D);for(var x=n.first;x!==null;){var y=x.next,A=(x.f&Ii)!==0||(x.f&wt)!==0;pr(x,_,A?g:!1),x=y}}}function Ri(n){as(n,!0)}function as(n,_){if(n.f&bt){n.f^=bt,n.f&qe||(n.f^=qe),Qt(n)&&(pt(n,Et),Ui(n));for(var g=n.first;g!==null;){var x=g.next,y=(g.f&Ii)!==0||(g.f&wt)!==0;as(g,y?_:!1),g=x}if(n.transitions!==null)for(const A of n.transitions)(A.is_global||_)&&A.in()}}let Ai=!1,ir=[];function ls(){Ai=!1;const n=ir.slice();ir=[],Qi(n)}function Fi(n){Ai||(Ai=!0,queueMicrotask(ls)),ir.push(n)}function $n(){Ai&&ls()}function zi(n){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}const cs=0,jn=1;let Ei=!1,xi=cs,ai=!1,li=null,Kt=!1,gr=!1;function wr(n){Kt=n}function Er(n){gr=n}let zt=[],Vt=0;let De=null,Ot=!1;function yt(n){De=n}let Ce=null;function vt(n){Ce=n}let Ct=null;function qn(n){Ct=n}let Ze=null,rt=0,Dt=null;function Kn(n){Dt=n}let hs=1,Ti=0,Nt=!1,It=null,ye=null;function ds(){return++hs}function mi(){return!Xt||ye!==null&&ye.l===null}function Qt(n){var l;var _=n.f;if(_&Et)return!0;if(_&Ht){var g=n.deps,x=(_&Wt)!==0;if(g!==null){var y,A,D=(_&Li)!==0,s=x&&Ce!==null&&!Nt,o=g.length;if(D||s){for(y=0;y<o;y++)A=g[y],(D||!((l=A==null?void 0:A.reactions)!=null&&l.includes(n)))&&(A.reactions??(A.reactions=[])).push(n);D&&(n.f^=Li)}for(y=0;y<o;y++)if(A=g[y],Qt(A)&&es(A),A.wv>n.wv)return!0}(!x||Ce!==null&&!Nt)&&pt(n,qe)}return!1}function Vn(n,_){for(var g=_;g!==null;){if(g.f&ki)try{g.fn(n);return}catch{g.f^=ki}g=g.parent}throw Ei=!1,n}function Gn(n){return(n.f&Zt)===0&&(n.parent===null||(n.parent.f&ki)===0)}function Ni(n,_,g,x){if(Ei){if(g===null&&(Ei=!1),Gn(_))throw n;return}g!==null&&(Ei=!0);{Vn(n,_);return}}function us(n,_,g=0){var x=n.reactions;if(x!==null)for(var y=0;y<x.length;y++){var A=x[y];A.f&Ye?us(A,_,g+1):_===A&&(g===0?pt(A,Et):A.f&qe&&pt(A,Ht),Ui(A))}}function _s(n){var p;var _=Ze,g=rt,x=Dt,y=De,A=Nt,D=Ct,s=ye,o=Ot,l=n.f;Ze=null,rt=0,Dt=null,De=l&(wt|fi)?null:n,Nt=!Kt&&(l&Wt)!==0,Ct=null,ye=n.ctx,Ot=!1,Ti++;try{var f=(0,n.fn)(),a=n.deps;if(Ze!==null){var c;if(ci(n,rt),a!==null&&rt>0)for(a.length=rt+Ze.length,c=0;c<Ze.length;c++)a[rt+c]=Ze[c];else n.deps=a=Ze;if(!Nt)for(c=rt;c<a.length;c++)((p=a[c]).reactions??(p.reactions=[])).push(n)}else a!==null&&rt<a.length&&(ci(n,rt),a.length=rt);if(mi()&&Dt!==null&&!(n.f&(Ye|Ht|Et)))for(c=0;c<Dt.length;c++)us(Dt[c],n);return y!==null&&Ti++,f}finally{Ze=_,rt=g,Dt=x,De=y,Nt=A,Ct=D,ye=s,Ot=o}}function Xn(n,_){let g=_.reactions;if(g!==null){var x=fn.call(g,n);if(x!==-1){var y=g.length-1;y===0?g=_.reactions=null:(g[x]=g[y],g.pop())}}g===null&&_.f&Ye&&(Ze===null||!Ze.includes(_))&&(pt(_,Ht),_.f&(Wt|Li)||(_.f^=Li),ci(_,0))}function ci(n,_){var g=n.deps;if(g!==null)for(var x=_;x<g.length;x++)Xn(n,g[x])}function Wi(n){var _=n.f;if(!(_&Zt)){pt(n,qe);var g=Ce,x=ye;Ce=n;try{_&Pi?Un(n):ss(n),rs(n),is(n);var y=_s(n);n.teardown=typeof y=="function"?y:null,n.wv=hs;var A=n.deps,D;Ji&&en&&n.f&Et}catch(s){Ni(s,n,g,x||n.ctx)}finally{Ce=g}}}function fs(){if(Vt>1e3){Vt=0;try{kn()}catch(n){if(li!==null)Ni(n,li,null);else throw n}}Vt++}function vs(n){var _=n.length;if(_!==0){fs();var g=Kt;Kt=!0;try{for(var x=0;x<_;x++){var y=n[x];y.f&qe||(y.f^=qe);var A=[];ps(y,A),Zn(A)}}finally{Kt=g}}}function Zn(n){var _=n.length;if(_!==0)for(var g=0;g<_;g++){var x=n[g];if(!(x.f&(Zt|bt)))try{Qt(x)&&(Wi(x),x.deps===null&&x.first===null&&x.nodes_start===null&&(x.teardown===null?ns(x):x.fn=null))}catch(y){Ni(y,x,null,x.ctx)}}}function Yn(){if(ai=!1,Vt>1001)return;const n=zt;zt=[],vs(n),ai||(Vt=0,li=null)}function Ui(n){xi===cs&&(ai||(ai=!0,queueMicrotask(Yn))),li=n;for(var _=n;_.parent!==null;){_=_.parent;var g=_.f;if(g&(fi|wt)){if(!(g&qe))return;_.f^=qe}}zt.push(_)}function ps(n,_){var g=n.first,x=[];e:for(;g!==null;){var y=g.f,A=(y&wt)!==0,D=A&&(y&qe)!==0,s=g.next;if(!D&&!(y&bt))if(y&_i){if(A)g.f^=qe;else try{Qt(g)&&Wi(g)}catch(a){Ni(a,g,null,g.ctx)}var o=g.first;if(o!==null){g=o;continue}}else y&jr&&x.push(g);if(s===null){let a=g.parent;for(;a!==null;){if(n===a)break e;var l=a.next;if(l!==null){g=l;continue e}a=a.parent}}g=s}for(var f=0;f<x.length;f++)o=x[f],_.push(o),ps(o,_)}function gs(n){var _=xi,g=zt;try{fs();const y=[];xi=jn,zt=y,ai=!1,vs(g);var x=n==null?void 0:n();return $n(),(zt.length>0||y.length>0)&&gs(),Vt=0,li=null,x}finally{xi=_,zt=g}}async function ms(){await Promise.resolve(),gs()}function L(n){var f;var _=n.f,g=(_&Ye)!==0;if(g&&_&Zt){var x=Qr(n);return fr(n),x}if(It!==null&&It.add(n),De!==null&&!Ot){Ct!==null&&Ct.includes(n)&&Tn();var y=De.deps;n.rv<Ti&&(n.rv=Ti,Ze===null&&y!==null&&y[rt]===n?rt++:Ze===null?Ze=[n]:Ze.push(n))}else if(g&&n.deps===null)for(var A=n,D=A.parent,s=A;D!==null;)if(D.f&Ye){var o=D;s=o,D=o.parent}else{var l=D;(f=l.deriveds)!=null&&f.includes(s)||(l.deriveds??(l.deriveds=[])).push(s);break}return g&&(A=n,Qt(A)&&es(A)),n.v}function Jn(n){var _=It;It=new Set;var g=It,x;try{if(st(n),_!==null)for(x of It)_.add(x)}finally{It=_}return g}function Qn(n){var _=Jn(()=>st(n));for(var g of _)if(g.f&Kr)for(const x of g.deps||[])x.f&Ye||ni(x,x.v);else ni(g,g.v)}function st(n){var _=Ot;try{return Ot=!0,n()}finally{Ot=_}}const eo=~(Et|Ht|qe);function pt(n,_){n.f=n.f&eo|_}function Je(n,_=!1,g){ye={p:ye,c:null,e:null,m:!1,s:n,x:null,l:null},Xt&&!_&&(ye.l={s:null,u:null,r1:[],r2:ht(!1)})}function Qe(n){const _=ye;if(_!==null){const D=_.e;if(D!==null){var g=Ce,x=De;_.e=null;try{for(var y=0;y<D.length;y++){var A=D[y];vt(A.effect),yt(A.reaction),Yt(A.fn)}}finally{vt(g),yt(x)}}ye=_.p,_.m=!0}return{}}function Lt(n){if(!(typeof n!="object"||!n||n instanceof EventTarget)){if(Mt in n)rr(n);else if(!Array.isArray(n))for(let _ in n){const g=n[_];typeof g=="object"&&g&&Mt in g&&rr(g)}}}function rr(n,_=new Set){if(typeof n=="object"&&n!==null&&!(n instanceof EventTarget)&&!_.has(n)){_.add(n),n instanceof Date&&n.getTime();for(let x in n)try{rr(n[x],_)}catch{}const g=cr(n);if(g!==Object.prototype&&g!==Array.prototype&&g!==Map.prototype&&g!==Set.prototype&&g!==Date.prototype){const x=$r(g);for(let y in x){const A=x[y].get;if(A)try{A.call(n)}catch{}}}}}let xr=!1;function to(){xr||(xr=!0,document.addEventListener("reset",n=>{Promise.resolve().then(()=>{var _;if(!n.defaultPrevented)for(const g of n.target.elements)(_=g.__on_r)==null||_.call(g)})},{capture:!0}))}function Ss(n){var _=De,g=Ce;yt(null),vt(null);try{return n()}finally{yt(_),vt(g)}}function bs(n,_,g,x=g){n.addEventListener(_,()=>Ss(g));const y=n.__on_r;y?n.__on_r=()=>{y(),x(!0)}:n.__on_r=()=>x(!0),to()}function io(n,_,g,x={}){function y(A){if(x.capture||ro.call(_,A),!A.cancelBubble)return Ss(()=>g==null?void 0:g.call(this,A))}return n.startsWith("pointer")||n.startsWith("touch")||n==="wheel"?Fi(()=>{_.addEventListener(n,y,x)}):_.addEventListener(n,y,x),y}function fe(n,_,g,x,y){var A={capture:x,passive:y},D=io(n,_,g,A);(_===document.body||_===window||_===document)&&Nn(()=>{_.removeEventListener(n,D,A)})}function ro(n){var t;var _=this,g=_.ownerDocument,x=n.type,y=((t=n.composedPath)==null?void 0:t.call(n))||[],A=y[0]||n.target,D=0,s=n.__root;if(s){var o=y.indexOf(s);if(o!==-1&&(_===document||_===window)){n.__root=_;return}var l=y.indexOf(_);if(l===-1)return;o<=l&&(D=o)}if(A=y[D]||n.target,A!==_){vn(n,"currentTarget",{configurable:!0,get(){return A||g}});var f=De,a=Ce;yt(null),vt(null);try{for(var c,p=[];A!==null;){var b=A.assignedSlot||A.parentNode||A.host||null;try{var v=A["__"+x];if(v!==void 0&&!A.disabled)if(ui(v)){var[e,...r]=v;e.apply(A,[n,...r])}else v.call(A,n)}catch(i){c?p.push(i):c=i}if(n.cancelBubble||b===_||b===null)break;A=b}if(c){for(let i of p)queueMicrotask(()=>{throw i});throw c}}finally{n.__root=_,delete n.currentTarget,yt(f),vt(a)}}}function Cs(n){var _=document.createElement("template");return _.innerHTML=n,_.content}function Gt(n,_){var g=Ce;g.nodes_start===null&&(g.nodes_start=n,g.nodes_end=_)}function G(n,_){var g=(_&Wr)!==0,x=(_&_n)!==0,y,A=!n.startsWith("<!>");return()=>{y===void 0&&(y=Cs(A?n:"<!>"+n),g||(y=At(y)));var D=x?document.importNode(y,!0):y.cloneNode(!0);if(g){var s=At(D),o=D.lastChild;Gt(s,o)}else Gt(D,D);return D}}function Ut(n,_,g="svg"){var x=!n.startsWith("<!>"),y=(_&Wr)!==0,A=`<${g}>${x?n:"<!>"+n}</${g}>`,D;return()=>{if(!D){var s=Cs(A),o=At(s);if(y)for(D=document.createDocumentFragment();At(o);)D.appendChild(At(o));else D=At(o)}var l=D.cloneNode(!0);if(y){var f=At(l),a=l.lastChild;Gt(f,a)}else Gt(l,l);return l}}function ut(n=""){{var _=_r(n+"");return Gt(_,_),_}}function je(){var n=document.createDocumentFragment(),_=document.createComment(""),g=_r();return n.append(_,g),Gt(_,g),n}function U(n,_){n!==null&&n.before(_)}let so=!0;function te(n,_){var g=_==null?"":typeof _=="object"?_+"":_;g!==(n.__t??(n.__t=n.nodeValue))&&(n.__t=g,n.nodeValue=g==null?"":g+"")}function Q(n,_,g=!1){var x=n,y=null,A=null,D=Xe,s=g?Ii:0,o=!1;const l=(a,c=!0)=>{o=!0,f(c,a)},f=(a,c)=>{D!==(D=a)&&(D?(y?Ri(y):c&&(y=Di(()=>c(x))),A&&tr(A,()=>{A=null})):(A?Ri(A):c&&(A=Di(()=>c(x))),y&&tr(y,()=>{y=null})))};vr(()=>{o=!1,_(l),o||f(null,null)},s)}function _t(n,_){return _}function no(n,_,g,x){for(var y=[],A=_.length,D=0;D<A;D++)pr(_[D].e,y,!0);var s=A>0&&y.length===0&&g!==null;if(s){var o=g.parentNode;Hn(o),o.append(g),x.clear(),Pt(n,_[0].prev,_[A-1].next)}os(y,()=>{for(var l=0;l<A;l++){var f=_[l];s||(x.delete(f.k),Pt(n,f.prev,f.next)),Jt(f.e,!s)}})}function ft(n,_,g,x,y,A=null){var D=n,s={flags:_,items:new Map,first:null},o=(_&Nr)!==0;if(o){var l=n;D=l.appendChild(_r())}var f=null,a=!1,c=ke(()=>{var p=g();return ui(p)?p:p==null?[]:Ur(p)});vr(()=>{var p=L(c),b=p.length;if(!(a&&b===0)){a=b===0;{var v=De;oo(p,s,D,y,_,(v.f&bt)!==0,x,g)}A!==null&&(b===0?f?Ri(f):f=Di(()=>A(D)):f!==null&&tr(f,()=>{f=null})),L(c)}})}function oo(n,_,g,x,y,A,D,s){var $,V,K,w;var o=(y&rn)!==0,l=(y&(ar|lr))!==0,f=n.length,a=_.items,c=_.first,p=c,b,v=null,e,r=[],t=[],i,h,d,m;if(o)for(m=0;m<f;m+=1)i=n[m],h=D(i,m),d=a.get(h),d!==void 0&&(($=d.a)==null||$.measure(),(e??(e=new Set)).add(d));for(m=0;m<f;m+=1){if(i=n[m],h=D(i,m),d=a.get(h),d===void 0){var C=p?p.e.nodes_start:g;v=lo(C,_,v,v===null?_.first:v.next,i,h,m,x,y,s),a.set(h,v),r=[],t=[],p=v.next;continue}if(l&&ao(d,i,m,y),d.e.f&bt&&(Ri(d.e),o&&((V=d.a)==null||V.unfix(),(e??(e=new Set)).delete(d))),d!==p){if(b!==void 0&&b.has(d)){if(r.length<t.length){var u=t[0],S;v=u.prev;var k=r[0],B=r[r.length-1];for(S=0;S<r.length;S+=1)kr(r[S],u,g);for(S=0;S<t.length;S+=1)b.delete(t[S]);Pt(_,k.prev,B.next),Pt(_,v,k),Pt(_,B,u),p=u,v=B,m-=1,r=[],t=[]}else b.delete(d),kr(d,p,g),Pt(_,d.prev,d.next),Pt(_,d,v===null?_.first:v.next),Pt(_,v,d),v=d;continue}for(r=[],t=[];p!==null&&p.k!==h;)(A||!(p.e.f&bt))&&(b??(b=new Set)).add(p),t.push(p),p=p.next;if(p===null)continue;d=p}r.push(d),v=d,p=d.next}if(p!==null||b!==void 0){for(var R=b===void 0?[]:Ur(b);p!==null;)(A||!(p.e.f&bt))&&R.push(p),p=p.next;var O=R.length;if(O>0){var F=y&Nr&&f===0?g:null;if(o){for(m=0;m<O;m+=1)(K=R[m].a)==null||K.measure();for(m=0;m<O;m+=1)(w=R[m].a)==null||w.fix()}no(_,R,F,a)}}o&&Fi(()=>{var T;if(e!==void 0)for(d of e)(T=d.a)==null||T.apply()}),Ce.first=_.first&&_.first.e,Ce.last=v&&v.e}function ao(n,_,g,x){x&ar&&ni(n.v,_),x&lr?ni(n.i,g):n.i=g}function lo(n,_,g,x,y,A,D,s,o,l){var f=(o&ar)!==0,a=(o&sn)===0,c=f?a?dr(y):ht(y):y,p=o&lr?ht(D):D,b={i:p,v:c,k:A,a:null,e:null,prev:g,next:x};try{return b.e=Di(()=>s(n,c,p,l),ur),b.e.prev=g&&g.e,b.e.next=x&&x.e,g===null?_.first=b:(g.next=b,g.e.next=b.e),x!==null&&(x.prev=b,x.e.prev=b.e),b}finally{}}function kr(n,_,g){for(var x=n.next?n.next.e.nodes_start:g,y=_?_.e.nodes_start:g,A=n.e.nodes_start;A!==x;){var D=Hi(A);y.before(A),A=D}}function Pt(n,_,g){_===null?n.first=g:(_.next=g,_.e.next=g&&g.e),g!==null&&(g.prev=_,g.e.prev=_&&_.e)}function Bi(n,_,g,x,y){var s;var A=(s=_.$$slots)==null?void 0:s[g],D=!1;A===!0&&(A=_[g==="default"?"children":g],D=!0),A===void 0?y!==null&&y(n):A(n,D?()=>x:x)}function co(n,_){var g=n.__attributes??(n.__attributes={});g.value===(g.value=_??void 0)||n.value===_&&(_!==0||n.nodeName!=="PROGRESS")||(n.value=_??"")}function Oe(n,_,g,x){var y=n.__attributes??(n.__attributes={});y[_]!==(y[_]=g)&&(_==="style"&&"__styles"in n&&(n.__styles={}),_==="loading"&&(n[yn]=g),g==null?n.removeAttribute(_):typeof g!="string"&&ho(n).includes(_)?n[_]=g:n.setAttribute(_,g))}var Lr=new Map;function ho(n){var _=Lr.get(n.nodeName);if(_)return _;Lr.set(n.nodeName,_=[]);for(var g,x=n,y=Element.prototype;y!==x;){g=$r(x);for(var A in g)g[A].set&&_.push(A);x=cr(x)}return _}function uo(n,_,g){var x=n.__className,y=ys(_);(x!==y||ur)&&(y===""?n.removeAttribute("class"):n.setAttribute("class",y),n.__className=y)}function _o(n,_,g){var x=n.__className,y=ys(_);(x!==y||ur)&&(_==null&&!g?n.removeAttribute("class"):n.className=y,n.__className=y)}function ys(n,_){return(n??"")+""}function ve(n,_,g){if(g){if(n.classList.contains(_))return;n.classList.add(_)}else{if(!n.classList.contains(_))return;n.classList.remove(_)}}const fo=()=>performance.now(),Tt={tick:n=>requestAnimationFrame(n),now:()=>fo(),tasks:new Set};function ws(){const n=Tt.now();Tt.tasks.forEach(_=>{_.c(n)||(Tt.tasks.delete(_),_.f())}),Tt.tasks.size!==0&&Tt.tick(ws)}function vo(n){let _;return Tt.tasks.size===0&&Tt.tick(ws),{promise:new Promise(g=>{Tt.tasks.add(_={c:n,f:g})}),abort(){Tt.tasks.delete(_)}}}function bi(n,_){n.dispatchEvent(new CustomEvent(_))}function po(n){if(n==="float")return"cssFloat";if(n==="offset")return"cssOffset";if(n.startsWith("--"))return n;const _=n.split("-");return _.length===1?_[0]:_[0]+_.slice(1).map(g=>g[0].toUpperCase()+g.slice(1)).join("")}function Dr(n){const _={},g=n.split(";");for(const x of g){const[y,A]=x.split(":");if(!y||A===void 0)break;const D=po(y.trim());_[D]=A.trim()}return _}const go=n=>n;function dt(n,_,g,x){var y=(n&hn)!==0,A=(n&dn)!==0,D=y&&A,s=(n&un)!==0,o=D?"both":y?"in":"out",l,f=_.inert,a=_.style.overflow,c,p;function b(){var i=De,h=Ce;yt(null),vt(null);try{return l??(l=g()(_,(x==null?void 0:x())??{},{direction:o}))}finally{yt(i),vt(h)}}var v={is_global:s,in(){var i;if(_.inert=f,!y){p==null||p.abort(),(i=p==null?void 0:p.reset)==null||i.call(p);return}A||c==null||c.abort(),bi(_,"introstart"),c=sr(_,b(),p,1,()=>{bi(_,"introend"),c==null||c.abort(),c=l=void 0,_.style.overflow=a})},out(i){if(!A){i==null||i(),l=void 0;return}_.inert=!0,bi(_,"outrostart"),p=sr(_,b(),c,0,()=>{bi(_,"outroend"),i==null||i()})},stop:()=>{c==null||c.abort(),p==null||p.abort()}},e=Ce;if((e.transitions??(e.transitions=[])).push(v),y&&so){var r=s;if(!r){for(var t=e.parent;t&&t.f&Ii;)for(;(t=t.parent)&&!(t.f&Pi););r=!t||(t.f&qr)!==0}r&&Yt(()=>{st(()=>v.in())})}}function sr(n,_,g,x,y){var A=x===1;if(mn(_)){var D,s=!1;return Fi(()=>{if(!s){var e=_({direction:A?"in":"out"});D=sr(n,e,g,x,y)}}),{abort:()=>{s=!0,D==null||D.abort()},deactivate:()=>D.deactivate(),reset:()=>D.reset(),t:()=>D.t()}}if(g==null||g.deactivate(),!(_!=null&&_.duration))return y(),{abort:Rt,deactivate:Rt,reset:Rt,t:()=>x};const{delay:o=0,css:l,tick:f,easing:a=go}=_;var c=[];if(A&&g===void 0&&(f&&f(0,1),l)){var p=Dr(l(0,1));c.push(p,p)}var b=()=>1-x,v=n.animate(c,{duration:o});return v.onfinish=()=>{var e=(g==null?void 0:g.t())??1-x;g==null||g.abort();var r=x-e,t=_.duration*Math.abs(r),i=[];if(t>0){var h=!1;if(l)for(var d=Math.ceil(t/16.666666666666668),m=0;m<=d;m+=1){var C=e+r*a(m/d),u=Dr(l(C,1-C));i.push(u),h||(h=u.overflow==="hidden")}h&&(n.style.overflow="hidden"),b=()=>{var S=v.currentTime;return e+r*a(S/t)},f&&vo(()=>{if(v.playState!=="running")return!1;var S=b();return f(S,1-S),!0})}v=n.animate(i,{duration:t,fill:"forwards"}),v.onfinish=()=>{b=()=>x,f==null||f(x,1-x),y()}},{abort:()=>{v&&(v.cancel(),v.effect=null,v.onfinish=Rt)},deactivate:()=>{y=Rt},reset:()=>{x===0&&(f==null||f(1,0))},t:()=>b()}}function Mi(n,_,g=_){var x=mi();bs(n,"input",y=>{var A=y?n.defaultValue:n.value;if(A=Ki(n)?Vi(A):A,g(A),x&&A!==(A=_())){var D=n.selectionStart,s=n.selectionEnd;n.value=A??"",s!==null&&(n.selectionStart=D,n.selectionEnd=Math.min(s,n.value.length))}}),st(_)==null&&n.value&&g(Ki(n)?Vi(n.value):n.value),gi(()=>{var y=_();Ki(n)&&y===Vi(n.value)||n.type==="date"&&!y&&!n.value||y!==n.value&&(n.value=y??"")})}function Ki(n){var _=n.type;return _==="number"||_==="range"}function Vi(n){return n===""?null:+n}function Es(n,_,g){if(n.multiple)return bo(n,_);for(var x of n.options){var y=si(x);if(On(y,_)){x.selected=!0;return}}(!g||_!==void 0)&&(n.selectedIndex=-1)}function mo(n,_){Yt(()=>{var g=new MutationObserver(()=>{var x=n.__value;Es(n,x)});return g.observe(n,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{g.disconnect()}})}function So(n,_,g=_){var x=!0;bs(n,"change",y=>{var A=y?"[selected]":":checked",D;if(n.multiple)D=[].map.call(n.querySelectorAll(A),si);else{var s=n.querySelector(A)??n.querySelector("option:not([disabled])");D=s&&si(s)}g(D)}),Yt(()=>{var y=_();if(Es(n,y,x),x&&y===void 0){var A=n.querySelector(":checked");A!==null&&(y=si(A),g(y))}n.__value=y,x=!1}),mo(n)}function bo(n,_){for(var g of n.options)g.selected=~_.indexOf(si(g))}function si(n){return"__value"in n?n.__value:n.value}function Rr(n,_){return n===_||(n==null?void 0:n[Mt])===_}function $i(n={},_,g,x){return Yt(()=>{var y,A;return gi(()=>{y=A,A=[],st(()=>{n!==g(...A)&&(_(n,...A),y&&Rr(g(...y),n)&&_(null,...y))})}),()=>{Fi(()=>{A&&Rr(g(...A),n)&&_(null,...A)})}}),n}function Oi(n){return function(..._){var g=_[0];return g.preventDefault(),n==null?void 0:n.apply(this,_)}}function et(n=!1){const _=ye,g=_.l.u;if(!g)return;let x=()=>Lt(_.s);if(n){let y=0,A={};const D=oi(()=>{let s=!1;const o=_.s;for(const l in o)o[l]!==A[l]&&(A[l]=o[l],s=!0);return s&&y++,y});x=()=>L(D)}g.b.length&&Wn(()=>{Ar(_,x),Qi(g.b)}),er(()=>{const y=st(()=>g.m.map(Sn));return()=>{for(const A of y)typeof A=="function"&&A()}}),g.a.length&&er(()=>{Ar(_,x),Qi(g.a)})}function Ar(n,_){if(n.l.s)for(const g of n.l.s)L(g);_()}function Co(n,_){var A;var g=(A=n.$$events)==null?void 0:A[_.type],x=ui(g)?g.slice():g==null?[]:[g];for(var y of x)y.call(this,_)}function nt(n){ye===null&&zi(),Xt&&ye.l!==null?ks(ye).m.push(n):er(()=>{const _=st(n);if(typeof _=="function")return _})}function Ft(n){ye===null&&zi(),nt(()=>()=>st(n))}function yo(n,_,{bubbles:g=!1,cancelable:x=!1}={}){return new CustomEvent(n,{detail:_,bubbles:g,cancelable:x})}function xs(){const n=ye;return n===null&&zi(),(_,g,x)=>{var A;const y=(A=n.s.$$events)==null?void 0:A[_];if(y){const D=ui(y)?y.slice():[y],s=yo(_,g,x);for(const o of D)o.call(n.x,s);return!s.defaultPrevented}return!0}}function Si(n){ye===null&&zi(),ye.l===null&&Ln(),ks(ye).b.push(n)}function ks(n){var _=n.l;return _.u??(_.u={a:[],b:[],m:[]})}function wo(n,_,g){if(n==null)return _(void 0),Rt;const x=st(()=>n.subscribe(_,g));return x.unsubscribe?()=>x.unsubscribe():x}const $t=[];function Eo(n,_=Rt){let g=null;const x=new Set;function y(s){if(Xr(n,s)&&(n=s,g)){const o=!$t.length;for(const l of x)l[1](),$t.push(l,n);if(o){for(let l=0;l<$t.length;l+=2)$t[l][0]($t[l+1]);$t.length=0}}}function A(s){y(s(n))}function D(s,o=Rt){const l=[s,o];return x.add(l),x.size===1&&(g=_(y,A)||Rt),s(n),()=>{x.delete(l),x.size===0&&g&&(g(),g=null)}}return{set:y,update:A,subscribe:D}}function Gi(n){let _;return wo(n,g=>_=g)(),_}let Ci=!1;function xo(n){var _=Ci;try{return Ci=!1,[n(),Ci]}finally{Ci=_}}function Tr(n){for(var _=Ce,g=Ce;_!==null&&!(_.f&(wt|fi));)_=_.parent;try{return vt(_),n()}finally{vt(g)}}function he(n,_,g,x){var C;var y=(g&nn)!==0,A=!Xt||(g&on)!==0,D=(g&ln)!==0,s=(g&cn)!==0,o=!1,l;D?[l,o]=xo(()=>n[_]):l=n[_];var f=Mt in n||Cn in n,a=D&&(((C=wi(n,_))==null?void 0:C.set)??(f&&_ in n&&(u=>n[_]=u)))||void 0,c=x,p=!0,b=!1,v=()=>(b=!0,p&&(p=!1,s?c=st(x):c=x),c);l===void 0&&x!==void 0&&(a&&A&&Dn(),l=v(),a&&a(l));var e;if(A)e=()=>{var u=n[_];return u===void 0?v():(p=!0,b=!1,u)};else{var r=Tr(()=>(y?oi:ke)(()=>n[_]));r.f|=Kr,e=()=>{var u=L(r);return u!==void 0&&(c=void 0),u===void 0?c:u}}if(!(g&an))return e;if(a){var t=n.$$legacy;return function(u,S){return arguments.length>0?((!A||!S||t||o)&&a(S?e():u),u):e()}}var i=!1,h=!1,d=dr(l),m=Tr(()=>oi(()=>{var u=e(),S=L(d);return i?(i=!1,h=!0,S):(h=!1,d.v=u)}));return y||(m.equals=hr),function(u,S){if(It!==null&&(i=h,e(),L(d)),arguments.length>0){const k=S?L(m):A&&D?jt(u):u;return m.equals(k)||(i=!0,X(d,k),b&&c!==void 0&&(c=k),st(()=>L(m))),u}return L(m)}}const ko=10,Lo=function(){let n=Eo([]);return setInterval(()=>{let _=Gi(n);const g=Math.floor(new Date().getTime()/1e3),x=_.filter(y=>y.created_at+ko>g);x.length!==_.length&&n.set(x)},1e3),{add(_){let g=Gi(n);g.push({..._,created_at:Math.floor(new Date().getTime()/1e3)}),n.set(g)},remove(_){let g=Gi(n);n.set(g.filter(x=>!["created_at","type","text"].every(y=>x[y]===_[y])))},subscribe:n.subscribe}},Le=Lo();function Ls(n){const _=n-1;return _*_*_+1}function Do(n){return n<.5?4*n*n*n:.5*Math.pow(2*n-2,3)+1}function nr(n){const _=typeof n=="string"&&n.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return _?[parseFloat(_[1]),_[2]||"px"]:[n,"px"]}function Ro(n,{delay:_=0,duration:g=400,easing:x=Do,amount:y=5,opacity:A=0}={}){const D=getComputedStyle(n),s=+D.opacity,o=D.filter==="none"?"":D.filter,l=s*(1-A),[f,a]=nr(y);return{delay:_,duration:g,easing:x,css:(c,p)=>`opacity: ${s-l*p}; filter: ${o} blur(${p*f}${a});`}}function Br(n,{delay:_=0,duration:g=400,easing:x=Ls,x:y=0,y:A=0,opacity:D=0}={}){const s=getComputedStyle(n),o=+s.opacity,l=s.transform==="none"?"":s.transform,f=o*(1-D),[a,c]=nr(y),[p,b]=nr(A);return{delay:_,duration:g,easing:x,css:(v,e)=>`
			transform: ${l} translate(${(1-v)*a}${c}, ${(1-v)*p}${b});
			opacity: ${o-f*e}`}}function Bt(n,{delay:_=0,duration:g=400,easing:x=Ls,axis:y="y"}={}){const A=getComputedStyle(n),D=+A.opacity,s=y==="y"?"height":"width",o=parseFloat(A[s]),l=y==="y"?["top","bottom"]:["left","right"],f=l.map(r=>`${r[0].toUpperCase()}${r.slice(1)}`),a=parseFloat(A[`padding${f[0]}`]),c=parseFloat(A[`padding${f[1]}`]),p=parseFloat(A[`margin${f[0]}`]),b=parseFloat(A[`margin${f[1]}`]),v=parseFloat(A[`border${f[0]}Width`]),e=parseFloat(A[`border${f[1]}Width`]);return{delay:_,duration:g,easing:x,css:r=>`overflow: hidden;opacity: ${Math.min(r*20,1)*D};${s}: ${r*o}px;padding-${l[0]}: ${r*a}px;padding-${l[1]}: ${r*c}px;margin-${l[0]}: ${r*p}px;margin-${l[1]}: ${r*b}px;border-${l[0]}-width: ${r*v}px;border-${l[1]}-width: ${r*e}px;min-${s}: 0`}}var Ao=G('<div class="toast show align-items-center text-white border-0 mb-2"><div class="d-flex"><div class="toast-body"> </div> <button type="button" class="btn-close btn-close-white me-2 m-auto"></button></div></div>'),To=G('<div class="position-fixed bottom-0 end-0 p-3" style="z-index: 470"></div>');function Bo(n,_){Je(_,!1);let g=ae([]);nt(()=>{Le.subscribe(y=>X(g,y))}),et();var x=To();ft(x,5,()=>L(g),_t,(y,A)=>{var D=Ao(),s=H(D),o=H(s),l=H(o),f=j(o,2);re(()=>{ve(D,"bg-danger",L(A).type==="error"),ve(D,"bg-warning",L(A).type==="warning"),ve(D,"bg-success",L(A).type==="success"),ve(D,"bg-primary",L(A).type==="info"),te(l,L(A).text)}),fe("click",f,()=>Le.remove(L(A))),dt(3,D,()=>Bt),U(y,D)}),U(n,x),Qe()}function Mr(n,_){_&&_!=="lg"&&_!=="sm"&&_!=="xs"?n.style.fontSize=_.replace("x","em"):n.style.fontSize=""}function Mo(n,_,g,x,y,A=1,D="",s=""){let o=1,l=1;y&&(y=="horizontal"?o=-1:y=="vertical"?l=-1:o=l=-1),typeof n=="string"&&(n=parseFloat(n)),typeof _=="string"&&(_=parseFloat(_)),typeof g=="string"&&(g=parseFloat(g));const f=`${_*A}${D}`,a=`${g*A}${D}`;let c=`translate(${f},${a}) scale(${o*n},${l*n})`;return x&&(c+=` rotate(${x}${s})`),c}var Oo=Ut('<title class="svelte-bvo74f"> </title>'),Po=Ut('<path class="svelte-bvo74f"></path>'),Io=Ut('<path class="svelte-bvo74f"></path><path class="svelte-bvo74f"></path>',1),Ho=Ut('<svg aria-hidden="true" role="img" xmlns="http://www.w3.org/2000/svg"><!><g class="svelte-bvo74f"><g class="svelte-bvo74f"><!></g></g></svg>');function de(n,_){Je(_,!1);const g=ae(),x=ae();let y=he(_,"class",24,()=>{}),A=he(_,"id",24,()=>{}),D=he(_,"style",24,()=>{}),s=he(_,"icon",8),o=he(_,"title",24,()=>{}),l=he(_,"size",24,()=>{}),f=he(_,"color",24,()=>{}),a=he(_,"fw",8,!1),c=he(_,"pull",24,()=>{}),p=he(_,"scale",8,1),b=he(_,"translateX",8,0),v=he(_,"translateY",8,0),e=he(_,"rotate",24,()=>{}),r=he(_,"flip",24,()=>{}),t=he(_,"spin",8,!1),i=he(_,"pulse",8,!1),h=he(_,"primaryColor",8,""),d=he(_,"secondaryColor",8,""),m=he(_,"primaryOpacity",8,1),C=he(_,"secondaryOpacity",8,.4),u=he(_,"swapOpacity",8,!1),S=ae();St(()=>(L(S),Lt(l()),Mr),()=>{L(S)&&l()&&Mr(L(S),l())}),St(()=>Lt(s()),()=>{X(g,s()&&s().icon||[0,0,"",[],""])}),St(()=>(Lt(p()),Lt(b()),Lt(v()),Lt(e()),Lt(r())),()=>{X(x,Mo(p(),b(),v(),e(),r(),512))}),pi(),et();var k=je(),B=_e(k);{var R=O=>{var F=Ho(),$=H(F);{var V=W=>{var q=Oo(),Z=H(q);re(()=>te(Z,o())),U(W,q)};Q($,W=>{o()&&W(V)})}var K=j($),w=H(K),T=H(w);{var M=W=>{var q=Po();re(()=>{Oe(q,"d",L(g)[4]),Oe(q,"fill",f()||h()||"currentColor"),Oe(q,"transform",`translate(${L(g)[0]/-2} ${L(g)[1]/-2})`)}),U(W,q)},P=W=>{var q=Io(),Z=_e(q),Y=j(Z);re(()=>{Oe(Z,"d",L(g)[4][0]),Oe(Z,"fill",d()||f()||"currentColor"),Oe(Z,"fill-opacity",u()!=!1?m():C()),Oe(Z,"transform",`translate(${L(g)[0]/-2} ${L(g)[1]/-2})`),Oe(Y,"d",L(g)[4][1]),Oe(Y,"fill",h()||f()||"currentColor"),Oe(Y,"fill-opacity",u()!=!1?C():m()),Oe(Y,"transform",`translate(${L(g)[0]/-2} ${L(g)[1]/-2})`)}),U(W,q)};Q(T,W=>{typeof L(g)[4]=="string"?W(M):W(P,!1)})}$i(F,W=>X(S,W),()=>L(S)),re(()=>{Oe(F,"id",A()),uo(F,`svelte-fa svelte-fa-base ${y()??""} svelte-bvo74f`),Oe(F,"style",D()),Oe(F,"viewBox",`0 0 ${L(g)[0]??""} ${L(g)[1]??""}`),ve(F,"pulse",i()),ve(F,"svelte-fa-size-lg",l()==="lg"),ve(F,"svelte-fa-size-sm",l()==="sm"),ve(F,"svelte-fa-size-xs",l()==="xs"),ve(F,"svelte-fa-fw",a()),ve(F,"svelte-fa-pull-left",c()==="left"),ve(F,"svelte-fa-pull-right",c()==="right"),ve(F,"spin",t()),Oe(K,"transform",`translate(${L(g)[0]/2} ${L(g)[1]/2})`),Oe(K,"transform-origin",`${L(g)[0]/4} 0`),Oe(w,"transform",L(x))}),U(O,F)};Q(B,O=>{L(g)[4]&&O(R)})}U(n,k),Qe()}/*!
 * Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2024 Fonticons, Inc.
 */const Fo={prefix:"fas",iconName:"right-from-bracket",icon:[512,512,["sign-out-alt"],"f2f5","M377.9 105.9L500.7 228.7c7.2 7.2 11.3 17.1 11.3 27.3s-4.1 20.1-11.3 27.3L377.9 406.1c-6.4 6.4-15 9.9-24 9.9c-18.7 0-33.9-15.2-33.9-33.9l0-62.1-128 0c-17.7 0-32-14.3-32-32l0-64c0-17.7 14.3-32 32-32l128 0 0-62.1c0-18.7 15.2-33.9 33.9-33.9c9 0 17.6 3.6 24 9.9zM160 96L96 96c-17.7 0-32 14.3-32 32l0 256c0 17.7 14.3 32 32 32l64 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-64 0c-53 0-96-43-96-96L0 128C0 75 43 32 96 32l64 0c17.7 0 32 14.3 32 32s-14.3 32-32 32z"]},zo=Fo,No={prefix:"fas",iconName:"laptop-code",icon:[640,512,[],"f5fc","M64 96c0-35.3 28.7-64 64-64l384 0c35.3 0 64 28.7 64 64l0 256-64 0 0-256L128 96l0 256-64 0L64 96zM0 403.2C0 392.6 8.6 384 19.2 384l601.6 0c10.6 0 19.2 8.6 19.2 19.2c0 42.4-34.4 76.8-76.8 76.8L76.8 480C34.4 480 0 445.6 0 403.2zM281 209l-31 31 31 31c9.4 9.4 9.4 24.6 0 33.9s-24.6 9.4-33.9 0l-48-48c-9.4-9.4-9.4-24.6 0-33.9l48-48c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9zM393 175l48 48c9.4 9.4 9.4 24.6 0 33.9l-48 48c-9.4 9.4-24.6 9.4-33.9 0s-9.4-24.6 0-33.9l31-31-31-31c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0z"]},Wo={prefix:"fas",iconName:"bars",icon:[448,512,["navicon"],"f0c9","M0 96C0 78.3 14.3 64 32 64l384 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L32 128C14.3 128 0 113.7 0 96zM0 256c0-17.7 14.3-32 32-32l384 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L32 288c-17.7 0-32-14.3-32-32zM448 416c0 17.7-14.3 32-32 32L32 448c-17.7 0-32-14.3-32-32s14.3-32 32-32l384 0c17.7 0 32 14.3 32 32z"]},Uo={prefix:"fas",iconName:"square-up-right",icon:[448,512,[8599,"external-link-square-alt"],"f360","M384 32c35.3 0 64 28.7 64 64l0 320c0 35.3-28.7 64-64 64L64 480c-35.3 0-64-28.7-64-64L0 96C0 60.7 28.7 32 64 32l320 0zM160 160c-6.5 0-12.3 3.9-14.8 9.9s-1.1 12.9 3.5 17.4l40 40-71 71C114 302 112 306.9 112 312s2 10 5.7 13.7l36.7 36.7c3.6 3.6 8.5 5.7 13.7 5.7s10-2 13.7-5.7l71-71 40 40c4.6 4.6 11.5 5.9 17.4 3.5s9.9-8.3 9.9-14.8l0-144c0-8.8-7.2-16-16-16l-144 0z"]},$o=Uo,jo={prefix:"fas",iconName:"circle-chevron-down",icon:[512,512,["chevron-circle-down"],"f13a","M256 0a256 256 0 1 0 0 512A256 256 0 1 0 256 0zM135 241c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0l87 87 87-87c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9L273 345c-9.4 9.4-24.6 9.4-33.9 0L135 241z"]},qo=jo,Ds={prefix:"fas",iconName:"memory",icon:[576,512,[],"f538","M64 64C28.7 64 0 92.7 0 128l0 7.4c0 6.8 4.4 12.6 10.1 16.3C23.3 160.3 32 175.1 32 192s-8.7 31.7-21.9 40.3C4.4 236 0 241.8 0 248.6L0 320l576 0 0-71.4c0-6.8-4.4-12.6-10.1-16.3C552.7 223.7 544 208.9 544 192s8.7-31.7 21.9-40.3c5.7-3.7 10.1-9.5 10.1-16.3l0-7.4c0-35.3-28.7-64-64-64L64 64zM576 352L0 352l0 64c0 17.7 14.3 32 32 32l48 0 0-32c0-8.8 7.2-16 16-16s16 7.2 16 16l0 32 96 0 0-32c0-8.8 7.2-16 16-16s16 7.2 16 16l0 32 96 0 0-32c0-8.8 7.2-16 16-16s16 7.2 16 16l0 32 96 0 0-32c0-8.8 7.2-16 16-16s16 7.2 16 16l0 32 48 0c17.7 0 32-14.3 32-32l0-64zM192 160l0 64c0 17.7-14.3 32-32 32s-32-14.3-32-32l0-64c0-17.7 14.3-32 32-32s32 14.3 32 32zm128 0l0 64c0 17.7-14.3 32-32 32s-32-14.3-32-32l0-64c0-17.7 14.3-32 32-32s32 14.3 32 32zm128 0l0 64c0 17.7-14.3 32-32 32s-32-14.3-32-32l0-64c0-17.7 14.3-32 32-32s32 14.3 32 32z"]},Ko={prefix:"fas",iconName:"folder",icon:[512,512,[128193,128447,61716,"folder-blank"],"f07b","M64 480H448c35.3 0 64-28.7 64-64V160c0-35.3-28.7-64-64-64H288c-10.1 0-19.6-4.7-25.6-12.8L243.2 57.6C231.1 41.5 212.1 32 192 32H64C28.7 32 0 60.7 0 96V416c0 35.3 28.7 64 64 64z"]},Vo={prefix:"fas",iconName:"box",icon:[448,512,[128230],"f466","M50.7 58.5L0 160l208 0 0-128L93.7 32C75.5 32 58.9 42.3 50.7 58.5zM240 160l208 0L397.3 58.5C389.1 42.3 372.5 32 354.3 32L240 32l0 128zm208 32L0 192 0 416c0 35.3 28.7 64 64 64l320 0c35.3 0 64-28.7 64-64l0-224z"]},Go={prefix:"fas",iconName:"maximize",icon:[512,512,["expand-arrows-alt"],"f31e","M200 32L56 32C42.7 32 32 42.7 32 56l0 144c0 9.7 5.8 18.5 14.8 22.2s19.3 1.7 26.2-5.2l40-40 79 79-79 79L73 295c-6.9-6.9-17.2-8.9-26.2-5.2S32 302.3 32 312l0 144c0 13.3 10.7 24 24 24l144 0c9.7 0 18.5-5.8 22.2-14.8s1.7-19.3-5.2-26.2l-40-40 79-79 79 79-40 40c-6.9 6.9-8.9 17.2-5.2 26.2s12.5 14.8 22.2 14.8l144 0c13.3 0 24-10.7 24-24l0-144c0-9.7-5.8-18.5-14.8-22.2s-19.3-1.7-26.2 5.2l-40 40-79-79 79-79 40 40c6.9 6.9 17.2 8.9 26.2 5.2s14.8-12.5 14.8-22.2l0-144c0-13.3-10.7-24-24-24L312 32c-9.7 0-18.5 5.8-22.2 14.8s-1.7 19.3 5.2 26.2l40 40-79 79-79-79 40-40c6.9-6.9 8.9-17.2 5.2-26.2S209.7 32 200 32z"]},Rs=Go,Xo={prefix:"fas",iconName:"server",icon:[512,512,[],"f233","M64 32C28.7 32 0 60.7 0 96l0 64c0 35.3 28.7 64 64 64l384 0c35.3 0 64-28.7 64-64l0-64c0-35.3-28.7-64-64-64L64 32zm280 72a24 24 0 1 1 0 48 24 24 0 1 1 0-48zm48 24a24 24 0 1 1 48 0 24 24 0 1 1 -48 0zM64 288c-35.3 0-64 28.7-64 64l0 64c0 35.3 28.7 64 64 64l384 0c35.3 0 64-28.7 64-64l0-64c0-35.3-28.7-64-64-64L64 288zm280 72a24 24 0 1 1 0 48 24 24 0 1 1 0-48zm56 24a24 24 0 1 1 48 0 24 24 0 1 1 -48 0z"]},As={prefix:"fas",iconName:"microchip",icon:[512,512,[],"f2db","M176 24c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 40c-35.3 0-64 28.7-64 64l-40 0c-13.3 0-24 10.7-24 24s10.7 24 24 24l40 0 0 56-40 0c-13.3 0-24 10.7-24 24s10.7 24 24 24l40 0 0 56-40 0c-13.3 0-24 10.7-24 24s10.7 24 24 24l40 0c0 35.3 28.7 64 64 64l0 40c0 13.3 10.7 24 24 24s24-10.7 24-24l0-40 56 0 0 40c0 13.3 10.7 24 24 24s24-10.7 24-24l0-40 56 0 0 40c0 13.3 10.7 24 24 24s24-10.7 24-24l0-40c35.3 0 64-28.7 64-64l40 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-40 0 0-56 40 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-40 0 0-56 40 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-40 0c0-35.3-28.7-64-64-64l0-40c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 40-56 0 0-40c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 40-56 0 0-40zM160 128l192 0c17.7 0 32 14.3 32 32l0 192c0 17.7-14.3 32-32 32l-192 0c-17.7 0-32-14.3-32-32l0-192c0-17.7 14.3-32 32-32zm192 32l-192 0 0 192 192 0 0-192z"]},Zo={prefix:"fas",iconName:"circle-chevron-up",icon:[512,512,["chevron-circle-up"],"f139","M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM377 271c9.4 9.4 9.4 24.6 0 33.9s-24.6 9.4-33.9 0l-87-87-87 87c-9.4 9.4-24.6 9.4-33.9 0s-9.4-24.6 0-33.9L239 167c9.4-9.4 24.6-9.4 33.9 0L377 271z"]},Yo=Zo,Ts={prefix:"fas",iconName:"box-open",icon:[640,512,[],"f49e","M58.9 42.1c3-6.1 9.6-9.6 16.3-8.7L320 64 564.8 33.4c6.7-.8 13.3 2.7 16.3 8.7l41.7 83.4c9 17.9-.6 39.6-19.8 45.1L439.6 217.3c-13.9 4-28.8-1.9-36.2-14.3L320 64 236.6 203c-7.4 12.4-22.3 18.3-36.2 14.3L37.1 170.6c-19.3-5.5-28.8-27.2-19.8-45.1L58.9 42.1zM321.1 128l54.9 91.4c14.9 24.8 44.6 36.6 72.5 28.6L576 211.6l0 167c0 22-15 41.2-36.4 46.6l-204.1 51c-10.2 2.6-20.9 2.6-31 0l-204.1-51C79 419.7 64 400.5 64 378.5l0-167L191.6 248c27.8 8 57.6-3.8 72.5-28.6L318.9 128l2.2 0z"]},Jo={prefix:"fas",iconName:"arrows-rotate",icon:[512,512,[128472,"refresh","sync"],"f021","M105.1 202.6c7.7-21.8 20.2-42.3 37.8-59.8c62.5-62.5 163.8-62.5 226.3 0L386.3 160 352 160c-17.7 0-32 14.3-32 32s14.3 32 32 32l111.5 0c0 0 0 0 0 0l.4 0c17.7 0 32-14.3 32-32l0-112c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 35.2L414.4 97.6c-87.5-87.5-229.3-87.5-316.8 0C73.2 122 55.6 150.7 44.8 181.4c-5.9 16.7 2.9 34.9 19.5 40.8s34.9-2.9 40.8-19.5zM39 289.3c-5 1.5-9.8 4.2-13.7 8.2c-4 4-6.7 8.8-8.1 14c-.3 1.2-.6 2.5-.8 3.8c-.3 1.7-.4 3.4-.4 5.1L16 432c0 17.7 14.3 32 32 32s32-14.3 32-32l0-35.1 17.6 17.5c0 0 0 0 0 0c87.5 87.4 229.3 87.4 316.7 0c24.4-24.4 42.1-53.1 52.9-83.8c5.9-16.7-2.9-34.9-19.5-40.8s-34.9 2.9-40.8 19.5c-7.7 21.8-20.2 42.3-37.8 59.8c-62.5 62.5-163.8 62.5-226.3 0l-.1-.1L125.6 352l34.4 0c17.7 0 32-14.3 32-32s-14.3-32-32-32L48.4 288c-1.6 0-3.2 .1-4.8 .3s-3.1 .5-4.6 1z"]},Bs=Jo,Qo={prefix:"fas",iconName:"house-user",icon:[576,512,["home-user"],"e1b0","M575.8 255.5c0 18-15 32.1-32 32.1l-32 0 .7 160.2c.2 35.5-28.5 64.3-64 64.3l-320.4 0c-35.3 0-64-28.7-64-64l0-160.4-32 0c-18 0-32-14-32-32.1c0-9 3-17 10-24L266.4 8c7-7 15-8 22-8s15 2 21 7L564.8 231.5c8 7 12 15 11 24zM352 224a64 64 0 1 0 -128 0 64 64 0 1 0 128 0zm-96 96c-44.2 0-80 35.8-80 80c0 8.8 7.2 16 16 16l192 0c8.8 0 16-7.2 16-16c0-44.2-35.8-80-80-80l-64 0z"]},ea={prefix:"fas",iconName:"tags",icon:[512,512,[],"f02c","M345 39.1L472.8 168.4c52.4 53 52.4 138.2 0 191.2L360.8 472.9c-9.3 9.4-24.5 9.5-33.9 .2s-9.5-24.5-.2-33.9L438.6 325.9c33.9-34.3 33.9-89.4 0-123.7L310.9 72.9c-9.3-9.4-9.2-24.6 .2-33.9s24.6-9.2 33.9 .2zM0 229.5L0 80C0 53.5 21.5 32 48 32l149.5 0c17 0 33.3 6.7 45.3 18.7l168 168c25 25 25 65.5 0 90.5L277.3 442.7c-25 25-65.5 25-90.5 0l-168-168C6.7 262.7 0 246.5 0 229.5zM144 144a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z"]},ta={prefix:"fas",iconName:"terminal",icon:[576,512,[],"f120","M9.4 86.6C-3.1 74.1-3.1 53.9 9.4 41.4s32.8-12.5 45.3 0l192 192c12.5 12.5 12.5 32.8 0 45.3l-192 192c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L178.7 256 9.4 86.6zM256 416l288 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-288 0c-17.7 0-32-14.3-32-32s14.3-32 32-32z"]},ia={prefix:"fas",iconName:"tag",icon:[448,512,[127991],"f02b","M0 80L0 229.5c0 17 6.7 33.3 18.7 45.3l176 176c25 25 65.5 25 90.5 0L418.7 317.3c25-25 25-65.5 0-90.5l-176-176c-12-12-28.3-18.7-45.3-18.7L48 32C21.5 32 0 53.5 0 80zm112 32a32 32 0 1 1 0 64 32 32 0 1 1 0-64z"]},ra={prefix:"fas",iconName:"hard-drive",icon:[512,512,[128436,"hdd"],"f0a0","M0 96C0 60.7 28.7 32 64 32l384 0c35.3 0 64 28.7 64 64l0 184.4c-17-15.2-39.4-24.4-64-24.4L64 256c-24.6 0-47 9.2-64 24.4L0 96zM64 288l384 0c35.3 0 64 28.7 64 64l0 64c0 35.3-28.7 64-64 64L64 480c-35.3 0-64-28.7-64-64l0-64c0-35.3 28.7-64 64-64zM320 416a32 32 0 1 0 0-64 32 32 0 1 0 0 64zm128-32a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z"]},sa=ra,na={prefix:"fas",iconName:"gear",icon:[512,512,[9881,"cog"],"f013","M495.9 166.6c3.2 8.7 .5 18.4-6.4 24.6l-43.3 39.4c1.1 8.3 1.7 16.8 1.7 25.4s-.6 17.1-1.7 25.4l43.3 39.4c6.9 6.2 9.6 15.9 6.4 24.6c-4.4 11.9-9.7 23.3-15.8 34.3l-4.7 8.1c-6.6 11-14 21.4-22.1 31.2c-5.9 7.2-15.7 9.6-24.5 6.8l-55.7-17.7c-13.4 10.3-28.2 18.9-44 25.4l-12.5 57.1c-2 9.1-9 16.3-18.2 17.8c-13.8 2.3-28 3.5-42.5 3.5s-28.7-1.2-42.5-3.5c-9.2-1.5-16.2-8.7-18.2-17.8l-12.5-57.1c-15.8-6.5-30.6-15.1-44-25.4L83.1 425.9c-8.8 2.8-18.6 .3-24.5-6.8c-8.1-9.8-15.5-20.2-22.1-31.2l-4.7-8.1c-6.1-11-11.4-22.4-15.8-34.3c-3.2-8.7-.5-18.4 6.4-24.6l43.3-39.4C64.6 273.1 64 264.6 64 256s.6-17.1 1.7-25.4L22.4 191.2c-6.9-6.2-9.6-15.9-6.4-24.6c4.4-11.9 9.7-23.3 15.8-34.3l4.7-8.1c6.6-11 14-21.4 22.1-31.2c5.9-7.2 15.7-9.6 24.5-6.8l55.7 17.7c13.4-10.3 28.2-18.9 44-25.4l12.5-57.1c2-9.1 9-16.3 18.2-17.8C227.3 1.2 241.5 0 256 0s28.7 1.2 42.5 3.5c9.2 1.5 16.2 8.7 18.2 17.8l12.5 57.1c15.8 6.5 30.6 15.1 44 25.4l55.7-17.7c8.8-2.8 18.6-.3 24.5 6.8c8.1 9.8 15.5 20.2 22.1 31.2l4.7 8.1c6.1 11 11.4 22.4 15.8 34.3zM256 336a80 80 0 1 0 0-160 80 80 0 1 0 0 160z"]},oa=na,aa={prefix:"fas",iconName:"clock",icon:[512,512,[128339,"clock-four"],"f017","M256 0a256 256 0 1 1 0 512A256 256 0 1 1 256 0zM232 120l0 136c0 8 4 15.5 10.7 20l96 64c11 7.4 25.9 4.4 33.3-6.7s4.4-25.9-6.7-33.3L280 243.2 280 120c0-13.3-10.7-24-24-24s-24 10.7-24 24z"]},la={prefix:"fas",iconName:"network-wired",icon:[640,512,[],"f6ff","M256 64l128 0 0 64-128 0 0-64zM240 0c-26.5 0-48 21.5-48 48l0 96c0 26.5 21.5 48 48 48l48 0 0 32L32 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l96 0 0 32-48 0c-26.5 0-48 21.5-48 48l0 96c0 26.5 21.5 48 48 48l160 0c26.5 0 48-21.5 48-48l0-96c0-26.5-21.5-48-48-48l-48 0 0-32 256 0 0 32-48 0c-26.5 0-48 21.5-48 48l0 96c0 26.5 21.5 48 48 48l160 0c26.5 0 48-21.5 48-48l0-96c0-26.5-21.5-48-48-48l-48 0 0-32 96 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-256 0 0-32 48 0c26.5 0 48-21.5 48-48l0-96c0-26.5-21.5-48-48-48L240 0zM96 448l0-64 128 0 0 64L96 448zm320-64l128 0 0 64-128 0 0-64z"]},ca={prefix:"fas",iconName:"download",icon:[512,512,[],"f019","M288 32c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 242.7-73.4-73.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l128 128c12.5 12.5 32.8 12.5 45.3 0l128-128c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L288 274.7 288 32zM64 352c-35.3 0-64 28.7-64 64l0 32c0 35.3 28.7 64 64 64l384 0c35.3 0 64-28.7 64-64l0-32c0-35.3-28.7-64-64-64l-101.5 0-45.3 45.3c-25 25-65.5 25-90.5 0L165.5 352 64 352zm368 56a24 24 0 1 1 0 48 24 24 0 1 1 0-48z"]},ha={prefix:"fas",iconName:"house",icon:[576,512,[127968,63498,63500,"home","home-alt","home-lg-alt"],"f015","M575.8 255.5c0 18-15 32.1-32 32.1l-32 0 .7 160.2c0 2.7-.2 5.4-.5 8.1l0 16.2c0 22.1-17.9 40-40 40l-16 0c-1.1 0-2.2 0-3.3-.1c-1.4 .1-2.8 .1-4.2 .1L416 512l-24 0c-22.1 0-40-17.9-40-40l0-24 0-64c0-17.7-14.3-32-32-32l-64 0c-17.7 0-32 14.3-32 32l0 64 0 24c0 22.1-17.9 40-40 40l-24 0-31.9 0c-1.5 0-3-.1-4.5-.2c-1.2 .1-2.4 .2-3.6 .2l-16 0c-22.1 0-40-17.9-40-40l0-112c0-.9 0-1.9 .1-2.8l0-69.7-32 0c-18 0-32-14-32-32.1c0-9 3-17 10-24L266.4 8c7-7 15-8 22-8s15 2 21 7L564.8 231.5c8 7 12 15 11 24z"]},da=ha,ua={prefix:"fas",iconName:"stop",icon:[384,512,[9209],"f04d","M0 128C0 92.7 28.7 64 64 64H320c35.3 0 64 28.7 64 64V384c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V128z"]},_a={prefix:"fas",iconName:"sun",icon:[512,512,[9728],"f185","M361.5 1.2c5 2.1 8.6 6.6 9.6 11.9L391 121l107.9 19.8c5.3 1 9.8 4.6 11.9 9.6s1.5 10.7-1.6 15.2L446.9 256l62.3 90.3c3.1 4.5 3.7 10.2 1.6 15.2s-6.6 8.6-11.9 9.6L391 391 371.1 498.9c-1 5.3-4.6 9.8-9.6 11.9s-10.7 1.5-15.2-1.6L256 446.9l-90.3 62.3c-4.5 3.1-10.2 3.7-15.2 1.6s-8.6-6.6-9.6-11.9L121 391 13.1 371.1c-5.3-1-9.8-4.6-11.9-9.6s-1.5-10.7 1.6-15.2L65.1 256 2.8 165.7c-3.1-4.5-3.7-10.2-1.6-15.2s6.6-8.6 11.9-9.6L121 121 140.9 13.1c1-5.3 4.6-9.8 9.6-11.9s10.7-1.5 15.2 1.6L256 65.1 346.3 2.8c4.5-3.1 10.2-3.7 15.2-1.6zM160 256a96 96 0 1 1 192 0 96 96 0 1 1 -192 0zm224 0a128 128 0 1 0 -256 0 128 128 0 1 0 256 0z"]},fa={prefix:"fas",iconName:"file",icon:[384,512,[128196,128459,61462],"f15b","M0 64C0 28.7 28.7 0 64 0L224 0l0 128c0 17.7 14.3 32 32 32l128 0 0 288c0 35.3-28.7 64-64 64L64 512c-35.3 0-64-28.7-64-64L0 64zm384 64l-128 0L256 0 384 128z"]},va={prefix:"fas",iconName:"play",icon:[384,512,[9654],"f04b","M73 39c-14.8-9.1-33.4-9.4-48.5-.9S0 62.6 0 80L0 432c0 17.4 9.4 33.4 24.5 41.9s33.7 8.1 48.5-.9L361 297c14.3-8.7 23-24.2 23-41s-8.7-32.2-23-41L73 39z"]},pa={prefix:"fas",iconName:"plus",icon:[448,512,[10133,61543,"add"],"2b","M256 80c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 144L48 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l144 0 0 144c0 17.7 14.3 32 32 32s32-14.3 32-32l0-144 144 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-144 0 0-144z"]},ga={prefix:"fas",iconName:"moon",icon:[384,512,[127769,9214],"f186","M223.5 32C100 32 0 132.3 0 256S100 480 223.5 480c60.6 0 115.5-24.2 155.8-63.4c5-4.9 6.3-12.5 3.1-18.7s-10.1-9.7-17-8.5c-9.8 1.7-19.8 2.6-30.1 2.6c-96.9 0-175.5-78.8-175.5-176c0-65.8 36-123.1 89.3-153.3c6.1-3.5 9.2-10.5 7.7-17.3s-7.3-11.9-14.3-12.5c-6.3-.5-12.6-.8-19-.8z"]},ma={prefix:"fas",iconName:"rectangle-xmark",icon:[512,512,[62164,"rectangle-times","times-rectangle","window-close"],"f410","M64 32C28.7 32 0 60.7 0 96L0 416c0 35.3 28.7 64 64 64l384 0c35.3 0 64-28.7 64-64l0-320c0-35.3-28.7-64-64-64L64 32zM175 175c9.4-9.4 24.6-9.4 33.9 0l47 47 47-47c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9l-47 47 47 47c9.4 9.4 9.4 24.6 0 33.9s-24.6 9.4-33.9 0l-47-47-47 47c-9.4 9.4-24.6 9.4-33.9 0s-9.4-24.6 0-33.9l47-47-47-47c-9.4-9.4-9.4-24.6 0-33.9z"]},Sa=ma,ba={prefix:"fas",iconName:"turn-up",icon:[384,512,[10548,"level-up-alt"],"f3bf","M350 177.5c3.8-8.8 2-19-4.6-26l-136-144C204.9 2.7 198.6 0 192 0s-12.9 2.7-17.4 7.5l-136 144c-6.6 7-8.4 17.2-4.6 26s12.5 14.5 22 14.5l88 0 0 192c0 17.7-14.3 32-32 32l-80 0c-17.7 0-32 14.3-32 32l0 32c0 17.7 14.3 32 32 32l80 0c70.7 0 128-57.3 128-128l0-192 88 0c9.6 0 18.2-5.7 22-14.5z"]},Ca=ba;var ya=G('<button type="button" class="btn mx-2" title="Switch Theme"><!></button>');function wa(n,_){Je(_,!1);let g=ae();function x(){L(g)==="light"?(X(g,"dark"),document.querySelector("html").classList.add("dark")):(X(g,"light"),document.querySelector("html").classList.remove("dark"))}nt(()=>{X(g,"dark"),L(g)==="dark"&&document.querySelector("html").classList.add("dark")}),et();var y=ya(),A=H(y);{var D=o=>{de(o,{icon:ga,color:"#333",size:"2x"})},s=o=>{de(o,{icon:_a,color:"#333",size:"2x"})};Q(A,o=>{L(g)==="dark"?o(D):o(s,!1)})}fe("click",y,x),U(n,y),Qe()}var Ea=Ut('<svg class="bi flex-shrink-0 me-2" width="24" height="24" role="img" aria-label="Danger:"><use xlink:href="#exclamation-triangle-fill"></use></svg>'),xa=Ut('<svg class="bi flex-shrink-0 me-2" width="24" height="24" role="img" aria-label="Success:"><use xlink:href="#check-circle-fill"></use></svg>'),ka=Ut('<svg class="bi flex-shrink-0 me-2" width="24" height="24" role="img" aria-label="Info:"><use xlink:href="#info-fill"></use></svg>'),La=G("<strong>Error:</strong>"),Da=G('<button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>'),Ra=G('<div class="alert d-flex align-items-center" role="alert"><!> <div><!> <!> <!></div></div>'),Aa=G('<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><symbol id="check-circle-fill" fill="currentColor" viewBox="0 0 16 16"><path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"></path></symbol><symbol id="info-fill" fill="currentColor" viewBox="0 0 16 16"><path d="M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zm.93-9.412-1 4.705c-.07.34.029.533.304.533.194 0 .487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703 0-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381 2.29-.287zM8 5.5a1 1 0 1 1 0-2 1 1 0 0 1 0 2z"></path></symbol><symbol id="exclamation-triangle-fill" fill="currentColor" viewBox="0 0 16 16"><path d="M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5zm.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"></path></symbol></svg> <!>',1);function Ta(n,_){let g=he(_,"type",8),x=he(_,"dismissible",8,!1),y=ae(!1);var A=Aa(),D=j(_e(A),2);{var s=o=>{var l=Ra(),f=H(l);{var a=i=>{var h=Ea();U(i,h)},c=i=>{var h=je(),d=_e(h);{var m=u=>{var S=xa();U(u,S)},C=u=>{var S=je(),k=_e(S);{var B=R=>{var O=ka();U(R,O)};Q(k,R=>{g()==="info"&&R(B)},!0)}U(u,S)};Q(d,u=>{g()==="success"?u(m):u(C,!1)},!0)}U(i,h)};Q(f,i=>{g()==="error"||g()==="warning"?i(a):i(c,!1)})}var p=j(f,2),b=H(p);{var v=i=>{var h=La();U(i,h)};Q(b,i=>{g()==="error"&&i(v)})}var e=j(b,2);Bi(e,_,"default",{},null);var r=j(e,2);{var t=i=>{var h=Da();fe("click",h,()=>X(y,!0)),U(i,h)};Q(r,i=>{x()&&i(t)})}re(()=>{ve(l,"alert-danger",g()==="error"),ve(l,"alert-warning",g()==="warning"),ve(l,"alert-success",g()==="success"),ve(l,"alert-info",g()==="info"),ve(l,"alert-dismissible",x())}),dt(3,l,()=>Bt),U(o,l)};Q(D,o=>{L(y)||o(s)})}U(n,A)}function Ba(n){switch(n.request){case"login":return`{"response": "login", "payload": {"username": "${n.payload.username}"}}`;case"get_system_info":return'{"response": "get_system_info", "payload": {"engine_version": "Docker 20.10.7", "containers": {"total": 178, "running": 170, "stopped": 0}, "os": "Ubuntu 20.04.3 LTS", "cpus": 24, "mem": 31277850624}}';case"get_container_list":return`{"response": "get_container_list", "payload": [
                {"id": "2b7eb6b9d2f7fd2dd26738500a81a16310f78e46eea2f9c2a27ed876d85d8586", "name": "CaaSa Demo", "namespace": null, "status": "running", "permissions": ["info", "info-annotations", "procs", "files-read", "files-write", "files", "logs", "state", "term"]},
                {"id": "2b7eb6b9d2f7fd2dd26738500a81a16310f78e46eea2f9c2a27ed876d85d8587", "name": "Backend", "namespace": "Cool Web App", "status": "running", "permissions": ["info", "info-annotations", "procs", "files-read", "files-write", "files", "logs", "state", "term"]},
                {"id": "2b7eb6b9d2f7fd2dd26738500a81a16310f78e46eea2f9c2a27ed876d85d8588", "name": "Gateway", "namespace": "Cool Web App", "status": "running", "permissions": ["info", "info-annotations", "procs", "files-read", "files-write", "files", "logs", "state", "term"]}
               ]}`;case"get_processes":return'{"response": "get_processes", "payload": [{"pid": "45756", "ppid": "45733", "%cpu": "0.0", "%mem": "0.0", "user": "root", "stime": "16:24", "command": "nginx: master process nginx -g daemon off;", "level": 0}, {"pid": "45822", "ppid": "45756", "%cpu": "0.0", "%mem": "0.0", "user": "systemd+", "stime": "16:24", "command": "nginx: worker process", "level": 1}, {"pid": "45823", "ppid": "45756", "%cpu": "0.0", "%mem": "0.0", "user": "systemd+", "stime": "16:24", "command": "nginx: worker process", "level": 1}, {"pid": "45824", "ppid": "45756", "%cpu": "0.0", "%mem": "0.0", "user": "systemd+", "stime": "16:24", "command": "nginx: worker process", "level": 1}, {"pid": "45825", "ppid": "45756", "%cpu": "0.0", "%mem": "0.0", "user": "systemd+", "stime": "16:24", "command": "nginx: worker process", "level": 1}, {"pid": "45826", "ppid": "45756", "%cpu": "0.0", "%mem": "0.0", "user": "systemd+", "stime": "16:24", "command": "nginx: worker process", "level": 1}, {"pid": "45827", "ppid": "45756", "%cpu": "0.0", "%mem": "0.0", "user": "systemd+", "stime": "16:24", "command": "nginx: worker process", "level": 1}, {"pid": "45828", "ppid": "45756", "%cpu": "0.0", "%mem": "0.0", "user": "systemd+", "stime": "16:24", "command": "nginx: worker process", "level": 1}, {"pid": "45829", "ppid": "45756", "%cpu": "0.0", "%mem": "0.0", "user": "systemd+", "stime": "16:24", "command": "nginx: worker process", "level": 1}, {"pid": "45830", "ppid": "45756", "%cpu": "0.0", "%mem": "0.0", "user": "systemd+", "stime": "16:24", "command": "nginx: worker process", "level": 1}, {"pid": "45831", "ppid": "45756", "%cpu": "0.0", "%mem": "0.0", "user": "systemd+", "stime": "16:24", "command": "nginx: worker process", "level": 1}, {"pid": "45832", "ppid": "45756", "%cpu": "0.0", "%mem": "0.0", "user": "systemd+", "stime": "16:24", "command": "nginx: worker process", "level": 1}, {"pid": "45833", "ppid": "45756", "%cpu": "0.0", "%mem": "0.0", "user": "systemd+", "stime": "16:24", "command": "nginx: worker process", "level": 1}, {"pid": "46825", "ppid": "45733", "%cpu": "0.0", "%mem": "0.0", "user": "root", "stime": "16:34", "command": "sh", "level": 0}]}';case"get_container_info":const _={"2b7eb6b9d2f7fd2dd26738500a81a16310f78e46eea2f9c2a27ed876d85d8586":"/caasa_demo","2b7eb6b9d2f7fd2dd26738500a81a16310f78e46eea2f9c2a27ed876d85d8587":"/cool_web_app_backend_1","2b7eb6b9d2f7fd2dd26738500a81a16310f78e46eea2f9c2a27ed876d85d8588":"/cool_web_app_gateway_1"};return`{"response": "get_container_info", "payload": {"id": "${n.payload.container_id}", "name": "${_[n.payload.container_id]}", "status": "running", "command": "/docker-entrypoint.sh nginx -g daemon off;", "created_at": "2021-12-02T10:33:16.628618832Z", "started_at": "2021-12-02T10:33:17.015866729Z", "finished_at": "0001-01-01T00:00:00Z", "crashes": 0, "env": {"PATH": "/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin", "NGINX_VERSION": "1.21.1", "NJS_VERSION": "0.6.1", "PKG_RELEASE": "1"}, "labels": {"caasa.admin.full": "user1,user2", "maintainer": "NGINX Docker Maintainers <docker-maint@nginx.com>"}, "image": {"name": "nginx:alpine", "hash": "sha256:b9e2356ea1be9452f3777a587b0b6a30bc16c295fe6190eda6a0776522f27439"}, "mem": {"used": 10452992, "max_used": 19345408, "total": 52428800}, "cpu": {"perc": ${Math.random()*10}}, "net": {"rx_bytes": 18201, "tx_bytes": 0}, "ports": ["80/tcp"]}}`;case"get_container_logs":return n.payload.onlynew?'{"response": "get_container_logs", "payload":[]}':'{"response": "get_container_logs", "payload": ["2021-12-02T10:33:17.021946340Z /docker-entrypoint.sh: /docker-entrypoint.d/ is not empty, will attempt to perform configuration","2021-12-02T10:33:17.021988550Z /docker-entrypoint.sh: Looking for shell scripts in /docker-entrypoint.d/","2021-12-02T10:33:17.023417432Z /docker-entrypoint.sh: Launching /docker-entrypoint.d/10-listen-on-ipv6-by-default.sh","2021-12-02T10:33:17.031231257Z 10-listen-on-ipv6-by-default.sh: info: Getting the checksum of /etc/nginx/conf.d/default.conf","2021-12-02T10:33:17.055742664Z 10-listen-on-ipv6-by-default.sh: info: Enabled listen on IPv6 in /etc/nginx/conf.d/default.conf","2021-12-02T10:33:17.056041305Z /docker-entrypoint.sh: Launching /docker-entrypoint.d/20-envsubst-on-templates.sh","2021-12-02T10:33:17.059979717Z /docker-entrypoint.sh: Launching /docker-entrypoint.d/30-tune-worker-processes.sh","2021-12-02T10:33:17.062059371Z /docker-entrypoint.sh: Configuration complete; ready for start up","2021-12-02T10:33:17.074027144Z 2021/12/02 10:33:17 [notice] 1#1: using the \\"epoll\\" event method","2021-12-02T10:33:17.074056600Z 2021/12/02 10:33:17 [notice] 1#1: nginx/1.21.1","2021-12-02T10:33:17.074063653Z 2021/12/02 10:33:17 [notice] 1#1: built by gcc 10.3.1 20210424 (Alpine 10.3.1_git20210424) ","2021-12-02T10:33:17.074069845Z 2021/12/02 10:33:17 [notice] 1#1: OS: Linux 5.11.0-40-generic","2021-12-02T10:33:17.074075475Z 2021/12/02 10:33:17 [notice] 1#1: getrlimit(RLIMIT_NOFILE): 1048576:1048576","2021-12-02T10:33:17.074245905Z 2021/12/02 10:33:17 [notice] 1#1: start worker processes","2021-12-02T10:33:17.074276953Z 2021/12/02 10:33:17 [notice] 1#1: start worker process 32","2021-12-02T10:33:17.074379486Z 2021/12/02 10:33:17 [notice] 1#1: start worker process 33","2021-12-02T10:33:17.074401427Z 2021/12/02 10:33:17 [notice] 1#1: start worker process 34","2021-12-02T10:33:17.074513127Z 2021/12/02 10:33:17 [notice] 1#1: start worker process 35","2021-12-02T10:33:17.074601242Z 2021/12/02 10:33:17 [notice] 1#1: start worker process 36","2021-12-02T10:33:17.074666745Z 2021/12/02 10:33:17 [notice] 1#1: start worker process 37","2021-12-02T10:33:17.074817979Z 2021/12/02 10:33:17 [notice] 1#1: start worker process 38","2021-12-02T10:33:17.074873423Z 2021/12/02 10:33:17 [notice] 1#1: start worker process 39","2021-12-02T10:33:17.075007344Z 2021/12/02 10:33:17 [notice] 1#1: start worker process 40","2021-12-02T10:33:17.075141746Z 2021/12/02 10:33:17 [notice] 1#1: start worker process 41","2021-12-02T10:33:17.075279715Z 2021/12/02 10:33:17 [notice] 1#1: start worker process 42","2021-12-02T10:33:17.075393118Z 2021/12/02 10:33:17 [notice] 1#1: start worker process 43"]}';case"get_filesystem_info":return'{"response": "get_filesystem_info", "payload": {"workdir": "", "mounts": [{"type": "bind", "destination": "/etc/ssl/certs", "readonly": true, "source": "/etc/ssl/certs"}]}}';case"get_directory_list":return n.payload.path===""||n.payload.path==="/"?'{"response": "get_directory_list", "payload": {"entries": [{"type": "f", "permissions": "rwxr-xr-x", "owner": "root", "group": "root", "filesize": "0B", "modtime": "2021-12-02 16:19:13", "name": ".dockerenv"}, {"type": "d", "permissions": "rwxr-xr-x", "owner": "root", "group": "root", "filesize": "4.0KB", "modtime": "2021-06-15 14:34:40", "name": "bin"}, {"type": "d", "permissions": "rwxr-xr-x", "owner": "root", "group": "root", "filesize": "360B", "modtime": "2021-12-02 16:19:13", "name": "dev"}, {"type": "d", "permissions": "rwxr-xr-x", "owner": "root", "group": "root", "filesize": "4.0KB", "modtime": "2021-07-06 19:40:27", "name": "docker-entrypoint.d"}, {"type": "f", "permissions": "rwxrwxr-x", "owner": "root", "group": "root", "filesize": "1.2KB", "modtime": "2021-07-06 19:40:16", "name": "docker-entrypoint.sh"}, {"type": "d", "permissions": "rwxr-xr-x", "owner": "root", "group": "root", "filesize": "4.0KB", "modtime": "2021-12-02 16:19:13", "name": "etc"}, {"type": "d", "permissions": "rwxr-xr-x", "owner": "root", "group": "root", "filesize": "4.0KB", "modtime": "2021-06-15 14:34:40", "name": "home"}, {"type": "d", "permissions": "rwxr-xr-x", "owner": "root", "group": "root", "filesize": "4.0KB", "modtime": "2021-06-15 14:34:40", "name": "lib"}, {"type": "d", "permissions": "rwxr-xr-x", "owner": "root", "group": "root", "filesize": "4.0KB", "modtime": "2021-06-15 14:34:40", "name": "media"}, {"type": "d", "permissions": "rwxr-xr-x", "owner": "root", "group": "root", "filesize": "4.0KB", "modtime": "2021-06-15 14:34:40", "name": "mnt"}, {"type": "d", "permissions": "rwxr-xr-x", "owner": "root", "group": "root", "filesize": "4.0KB", "modtime": "2021-06-15 14:34:40", "name": "opt"}, {"type": "d", "permissions": "r-xr-xr-x", "owner": "root", "group": "root", "filesize": "0B", "modtime": "2021-12-02 16:19:13", "name": "proc"}, {"type": "d", "permissions": "rwx------", "owner": "root", "group": "root", "filesize": "4.0KB", "modtime": "2021-06-15 14:34:40", "name": "root"}, {"type": "d", "permissions": "rwxr-xr-x", "owner": "root", "group": "root", "filesize": "4.0KB", "modtime": "2021-12-02 16:19:13", "name": "run"}, {"type": "d", "permissions": "rwxr-xr-x", "owner": "root", "group": "root", "filesize": "4.0KB", "modtime": "2021-06-15 14:34:40", "name": "sbin"}, {"type": "d", "permissions": "rwxr-xr-x", "owner": "root", "group": "root", "filesize": "4.0KB", "modtime": "2021-06-15 14:34:40", "name": "srv"}, {"type": "d", "permissions": "r-xr-xr-x", "owner": "root", "group": "root", "filesize": "0B", "modtime": "2021-12-02 16:19:13", "name": "sys"}, {"type": "d", "permissions": "rwxr-xr-x", "owner": "root", "group": "root", "filesize": "4.0KB", "modtime": "2021-06-15 14:34:40", "name": "usr"}, {"type": "d", "permissions": "rwxr-xr-x", "owner": "root", "group": "root", "filesize": "4.0KB", "modtime": "2021-06-15 14:34:40", "name": "var"}], "path": "/"}}':!1;case"spawn_terminal":return'{"response": "spawn_terminal", "payload": {"execId": "2680be7b4aa3c0b6599edf3521f5813a770ccec7966a59c57cfdac5b4e3b7e9a"}}';case"resize_terminal":return!0;case"transmit_terminal_input":return n.payload.data==="\r"?`56!{"response": "receive_terminal_output", "payload": null}\r
This is just a demo`:'56!{"response": "receive_terminal_output", "payload": null}'+n.payload.data;default:return!1}}class Ma{constructor(_){Ve(this,"binaryType");Ve(this,"bufferedAmount");Ve(this,"extensions");Ve(this,"onclose");Ve(this,"onerror");Ve(this,"onmessage");Ve(this,"onopen");Ve(this,"protocol");Ve(this,"readyState");Ve(this,"url");Ve(this,"CLOSED");Ve(this,"CLOSING");Ve(this,"CONNECTING");Ve(this,"OPEN")}close(_,g){}addEventListener(_,g,x){throw new Error("Method not implemented.")}removeEventListener(_,g,x){throw new Error("Method not implemented.")}dispatchEvent(_){throw new Error("Method not implemented.")}send(_){const g=JSON.parse(_),x=Ba(g),y={data:void 0,...new Event("api-mock")};if(x===!1?y.data=`{"response": "${g.request}", "error": "Sorry, command not mocked in demo"}`:x===!0||(x[0]!=="{"?y.data=new Blob([x]):y.data=x),y.data&&(setTimeout(()=>this.onmessage(y),200),typeof y.data=="string"&&y.data.includes("spawn_terminal"))){console.log("extra response for terminal");const A={data:void 0,...new Event("api-mock")};A.data=new Blob(['56!{"response": "receive_terminal_output", "payload": null}/ # ']),setTimeout(()=>this.onmessage(A),300)}}}let kt,hi={},di={};function Or(n,_){n in hi?hi[n](_):console.error("WS-API Unknown websocket event:",n)}function yi(n,_){n in di?di[n](_):console.error("WS-API Unknown websocket event:",n)}function Pr(){hi={},di={}}const ie={init(){try{kt&&kt.close(1e3),kt=new Ma(`${window.location.protocol.replace("http","ws")}//${window.location.host}/ws`),kt.binaryType="blob",kt.onclose=n=>{yi("ws-close",n.reason||"Connection closed"),Pr()},kt.onmessage=async n=>{if(n.data instanceof Blob){const _=parseInt(await n.data.slice(0,10).text()),g=_.toString().length+1,x=await n.data.slice(g,g+_).text(),y=JSON.parse(x);y.error?yi(y.response,y.error):Or(y.response,{payload:y.payload,blob:n.data.slice(g+_)})}else{const _=JSON.parse(n.data);_.error?yi(_.response,_.error):Or(_.response,_.payload)}},kt.onerror=n=>{yi("ws-error","Connection error")}}catch(n){alert(n)}},register(n,_,g){_&&(hi[n]=_),g&&(di[n]=g)},unregister(...n){n.forEach(_=>{delete di[_],delete hi[_]})},send(n,_){kt.send(JSON.stringify({request:n,payload:_}))},close(){Pr(),kt.close()}};var Oa=G('<div class="spinner-grow mx-2 text-light" role="status"><span class="visually-hidden">Loading...</span></div>'),Pa=G('<div class="mt-4 text-light"> </div>'),Ia=G('<div class="bg-outer position-fixed d-flex justify-content-center align-items-center top-0 start-0 end-0 bottom-0 svelte-1l5azpb"><div class="bg-inner d-flex flex-column rounded p-3 svelte-1l5azpb"><div class="d-flex justify-content-center align-items-center"></div> <!></div></div>');function Ms(n,_){Je(_,!1);let g=he(_,"text",8,""),x=ae(!1);nt(()=>{setTimeout(()=>X(x,!0),250)}),et();var y=je(),A=_e(y);{var D=s=>{var o=Ia(),l=H(o),f=H(l);ft(f,4,()=>[1,2,3],_t,(p,b)=>{var v=Oa();U(p,v)});var a=j(f,2);{var c=p=>{var b=Pa(),v=H(b);re(()=>te(v,g())),U(p,b)};Q(a,p=>{g()&&p(c)})}dt(1,o,()=>Ro),U(s,o)};Q(A,s=>{L(x)&&s(D)})}U(n,y),Qe()}var Ha=G('<!> <div class="container pt-5"><!> <form class="container login-form svelte-ur79cd"><div class="form-floating mb-2"><input type="text" class="form-control" id="loginName" placeholder=" " required autocomplete="username"> <label for="loginName">Username</label></div> <div class="form-floating mb-2"><input type="password" class="form-control" id="loginPw" placeholder=" " required autocomplete="current-password"> <label for="loginPw">Password</label></div> <div class="col-12"><button type="submit" class="btn btn-primary w-100">Login</button></div></form></div>',1);function Fa(n,_){Je(_,!1);let g=he(_,"username",12,"admin"),x=ae("123456"),y=ae(!1),A=ae("");const D=xs();nt(()=>{ie.register("login",({username:i})=>{D("login",{username:i})},i=>{X(y,!1),Le.add({text:i,type:"error"})})}),Ft(()=>{ie.unregister("login")});async function s(){X(y,!0),ie.send("login",{username:g(),password:L(x)}),X(A,""),X(x,"")}et();var o=Ha(),l=_e(o);{var f=i=>{Ms(i,{})};Q(l,i=>{L(y)&&i(f)})}var a=j(l,2),c=H(a);{var p=i=>{Ta(i,{type:"error",dismissible:!0,children:(h,d)=>{var m=ut();re(()=>te(m,L(A))),U(h,m)},$$slots:{default:!0}})};Q(c,i=>{L(A)&&i(p)})}var b=j(c,2),v=H(b),e=H(v),r=j(v,2),t=H(r);Mi(e,g),fe("input",e,()=>{g(g().toLowerCase().trim())}),Mi(t,()=>L(x),i=>X(x,i)),fe("submit",b,Oi(()=>s())),dt(3,b,()=>Bt),U(n,o),Qe()}function or(n,_=0){return Math.round(n*10**_)/10**_}function qt(n){const _=["","Ki","Mi","Gi","Ti"];let g=0;for(;n>=1024;)n/=1024,g++;const x=Math.max(Math.floor(Math.log10(Math.floor(n))),0);return or(n,2-x)+" "+_[g]+"B"}function ri(n){return new Date(n).toLocaleString(void 0,{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})}function Os(n,_){var g;if((g=window==null?void 0:window.navigator)!=null&&g.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(n,_);else{const x=document.createElement("a");document.body.appendChild(x);const y=window.URL.createObjectURL(n);x.href=y,x.download=_,x.click(),setTimeout(()=>{window.URL.revokeObjectURL(y),document.body.removeChild(x)},0)}}var za=G('<div class="d-flex align-items-center"><strong>Loading...</strong> <div class="spinner-border ms-auto" role="status" aria-hidden="true"></div></div>'),Na=G('<span class="spinner-grow spinner-grow-sm" role="status" aria-hidden="true"></span>'),Wa=G('<button type="button" class="btn btn-outline-warning"><!> Restart</button>'),Ua=G('<span class="spinner-grow spinner-grow-sm" role="status" aria-hidden="true"></span>'),$a=G('<button type="button" class="btn btn-outline-danger"><!> Stop</button>'),ja=G("<!> <!>",1),qa=G('<span class="spinner-grow spinner-grow-sm" role="status" aria-hidden="true"></span>'),Ka=G('<button type="button" class="btn btn-outline-success"><!> Start</button>'),Va=G('<div class="ms-4"><!></div>'),Ga=G('<span class="text-muted font-monospace"> </span>'),Xa=G('<a target="_blank" rel="noopener noreferrer" class="text-decoration-none"> </a>'),Za=G('<a target="_blank" rel="noopener noreferrer" class="text-decoration-none"> </a>'),Ya=G('<div class="d-flex mb-3"><div class="icon-left ms-1 me-3 svelte-n9m8lc"><!></div> <div class="flex-grow-1"><div class="mb-1">Processor</div> <div class="progress"><div class="progress-bar text-white overflow-visible ps-1"> </div></div></div></div>'),Ja=G('<span class="badge rounded-pill bg-primary ms-2"> </span>'),Qa=G('<span class="badge rounded-pill bg-warning ms-2"> </span>'),el=G('<span class="badge rounded-pill bg-info ms-2"> </span>'),tl=G('<div class="progress-bar progress-bar-striped bg-warning"></div>'),il=G('<div class="progress"><div class="progress-bar text-white overflow-visible ps-1"> </div> <!></div>'),rl=G('<div class="d-flex mb-3"><div class="icon-left ms-1 me-3 svelte-n9m8lc"><!></div> <div class="flex-grow-1"><div class="mb-1"><span class="me-2">Memory</span> <!> <!> <!></div> <!></div></div>'),sl=G('<span class="badge bg-dark me-2"> </span>'),nl=G('<div class="flex-grow-1"><div class="mb-1">Ports</div> <!></div>'),ol=G('<div class="d-flex mb-3"><div class="icon-left ms-1 me-3 svelte-n9m8lc"><!></div> <div class="me-5"><div class="mb-1">Network</div> <span title="Received Traffic" class="me-3"> </span> <span title="Sent Traffic"> </span></div> <!></div>'),al=G('<div class="fw-bold">Stopped</div> <!>',1),ll=G('<div class="fw-bold">Started</div> ',1),cl=G('<div class="fw-bold">Stopped</div> ',1),hl=G('<div class="fw-bold">Started</div> ',1),dl=G('<tr><td class="text-end border-end text-break"> </td><td class="text-break"> </td></tr>'),ul=G('<tr><td class="text-end border-end text-break"> </td><td class="text-break"> </td></tr>'),_l=G('<div class="d-flex mb-3"><div class="icon-left ms-1 me-3 svelte-n9m8lc"><!></div> <div class="flex-grow-1 d-lg-flex" style="font-size: small"><div><table class="table table-striped border"><thead><tr><th scope="col" colspan="2" style="font-weight: normal">Environment Variables</th></tr></thead><tbody></tbody></table></div> <div><table class="table table-striped border"><thead><tr><th scope="col" colspan="2" style="font-weight: normal">Labels</th></tr></thead><tbody></tbody></table></div></div></div>'),fl=G('<div class="d-flex mb-3"><div class="icon-left ms-1 me-3 svelte-n9m8lc"><!></div> <div class="d-flex flex-column flex-grow-1"><div class="flex-grow-1 d-flex align-items-center justify-content-between"><div class="flex-grow-1"><div class="mb-1"><span class="me-2">Container</span> <span class="text-muted font-monospace"> </span></div> <div><h6> </h6></div></div> <!></div> <div><!> <code> </code></div></div></div> <div class="d-flex mb-3"><div class="icon-left ms-1 me-3 svelte-n9m8lc"><!></div> <div class="flex-grow-1"><div class="mb-1"><span class="me-2">Image</span> <!></div> <div><h6><!> <span class="ms-1"><!> </span></h6></div></div></div> <!> <!> <!> <div class="d-flex mb-3"><div class="icon-left ms-1 me-3 svelte-n9m8lc"><!></div> <div class="flex-grow-1 pb-5 mb-5"><div class="mb-1">Timeline</div> <div class="timeline mt-2 svelte-n9m8lc"><div class="tl-container svelte-n9m8lc" style="margin-left: 5%"><div class="popup svelte-n9m8lc"><div class="fw-bold">Created</div> </div></div> <div class="tl-container svelte-n9m8lc" style="margin-left: 27%"><div class="popup svelte-n9m8lc"><div class="fw-bold"> </div> Crashes</div></div> <div class="tl-container svelte-n9m8lc" style="margin-left: 49%"><div class="popup svelte-n9m8lc"><!></div></div> <div class="tl-container svelte-n9m8lc" style="margin-left: 71%"><div class="popup svelte-n9m8lc"><!></div></div> <div class="tl-container svelte-n9m8lc" style="margin-left: 93%"><div class="popup svelte-n9m8lc">Currently <div class="fw-bold"> </div></div></div></div></div></div> <!>',1),vl=G("<div><!></div>");function pl(n,_){Je(_,!1);const g=ae(),x=ae(),y=ae(),A=ae();let D=he(_,"enable_actions",8),s=he(_,"container_id",8),o,l,f=ae(!0),a=ae(null),c=ae();Si(()=>{s()!==o&&(o=s(),X(f,!0),X(a,null),s()&&ie.send("get_container_info",{container_id:s()}))}),nt(()=>{window.scrollTo({top:0,behavior:"smooth"}),ie.register("get_container_info",t=>{t.id===s()&&(X(c,t),X(f,!1))},t=>Le.add({text:t,type:"error"})),ie.register("set_container_state",()=>{X(a,null)},t=>Le.add({text:t,type:"error"})),l=setInterval(()=>{ie.send("get_container_info",{container_id:s()})},3e3)}),Ft(()=>{clearInterval(l),ie.unregister("get_container_info"),ie.unregister("set_container_state")});function p(t){switch(ie.send("set_container_state",{container_id:s(),action:t}),X(a,t),t){case"start":Le.add({text:"Starting container ...",type:"success"});break;case"restart":Le.add({text:"Restarting container ...",type:"info"});break;case"stop":Le.add({text:"Stopping container ...",type:"info"});break}}St(()=>L(c),()=>{var t,i,h,d;X(g,((i=(t=L(c))==null?void 0:t.mem)==null?void 0:i.used)*100/((d=(h=L(c))==null?void 0:h.mem)==null?void 0:d.total))}),St(()=>L(c),()=>{var t,i,h,d;X(x,((i=(t=L(c))==null?void 0:t.mem)==null?void 0:i.max_used)*100/((d=(h=L(c))==null?void 0:h.mem)==null?void 0:d.total))}),St(()=>L(c),()=>{var t,i,h,d;X(y,(t=L(c))!=null&&t.image.name.includes(":")?(h=L(c))==null?void 0:h.image.name.slice(0,(i=L(c))==null?void 0:i.image.name.lastIndexOf(":")):(d=L(c))==null?void 0:d.image.name)}),St(()=>L(c),()=>{var t,i;X(A,(t=L(c))!=null&&t.image.name.includes(":")?(i=L(c))==null?void 0:i.image.name.split(":").pop():"latest")}),pi(),et();var b=vl(),v=H(b);{var e=t=>{var i=za();U(t,i)},r=t=>{var i=fl(),h=_e(i),d=H(h),m=H(d);de(m,{icon:Ts,size:"2x"});var C=j(d,2),u=H(C),S=H(u),k=H(S),B=j(H(k),2),R=H(B),O=j(k,2),F=H(O),$=H(F),V=j(S,2);{var K=oe=>{var ce=Va(),pe=H(ce);{var xe=Se=>{var Ee=ja(),Ke=_e(Ee);{var lt=Ae=>{var be=Wa(),it=H(be);{var ge=me=>{de(me,{icon:Bs})},Te=me=>{var $e=Na();U(me,$e)};Q(it,me=>{L(a)?me(Te,!1):me(ge)})}re(()=>be.disabled=!!L(a)),fe("click",be,()=>p("restart")),U(Ae,be)};Q(Ke,Ae=>{(!L(a)||L(a)==="restart")&&Ae(lt)})}var mt=j(Ke,2);{var ct=Ae=>{var be=$a(),it=H(be);{var ge=me=>{de(me,{icon:ua})},Te=me=>{var $e=Ua();U(me,$e)};Q(it,me=>{L(a)?me(Te,!1):me(ge)})}re(()=>be.disabled=!!L(a)),fe("click",be,()=>p("stop")),U(Ae,be)};Q(mt,Ae=>{(!L(a)||L(a)==="stop")&&Ae(ct)})}U(Se,Ee)},Ge=Se=>{var Ee=je(),Ke=_e(Ee);{var lt=mt=>{var ct=Ka(),Ae=H(ct);{var be=ge=>{de(ge,{icon:va})},it=ge=>{var Te=qa();U(ge,Te)};Q(Ae,ge=>{L(a)?ge(it,!1):ge(be)})}re(()=>ct.disabled=!!L(a)),fe("click",ct,()=>p("start")),U(mt,ct)};Q(Ke,mt=>{(!L(a)||L(a)==="start")&&mt(lt)},!0)}U(Se,Ee)};Q(pe,Se=>{L(c).status==="running"?Se(xe):Se(Ge,!1)})}U(oe,ce)};Q(V,oe=>{D()&&oe(K)})}var w=j(u,2),T=H(w);de(T,{icon:ta});var M=j(T,2),P=H(M),W=j(h,2),q=H(W),Z=H(q);de(Z,{icon:Vo,size:"2x"});var Y=j(q,2),le=H(Y),E=j(H(le),2);{var I=oe=>{var ce=Ga(),pe=H(ce);re(xe=>te(pe,xe),[()=>L(c).image.hash.substring(0,19)],ke),U(oe,ce)};Q(E,oe=>{var ce,pe,xe;((ce=L(c).image)==null?void 0:ce.hash)!==((xe=(pe=L(c))==null?void 0:pe.image)==null?void 0:xe.name)&&oe(I)})}var N=j(le,2),z=H(N),ee=H(z);{var J=oe=>{var ce=Xa(),pe=H(ce);re(()=>{Oe(ce,"href",`https://hub.docker.com/_/${L(y)??""}`),te(pe,L(y))}),U(oe,ce)},ne=oe=>{var ce=je(),pe=_e(ce);{var xe=Se=>{var Ee=Za(),Ke=H(Ee);re(()=>{Oe(Ee,"href",`https://hub.docker.com/r/${L(y)??""}`),te(Ke,L(y))}),U(Se,Ee)},Ge=Se=>{var Ee=ut();re(()=>te(Ee,L(y))),U(Se,Ee)};Q(pe,Se=>{L(y).match(/^\w+\/\w+$/)?Se(xe):Se(Ge,!1)},!0)}U(oe,ce)};Q(ee,oe=>{L(y).includes("/")?oe(ne,!1):oe(J)})}var ue=j(ee,2),we=H(ue);de(we,{icon:ia});var Ne=j(we),se=j(W,2);{var Be=oe=>{var ce=Ya(),pe=H(ce),xe=H(pe);de(xe,{icon:As,size:"2x"});var Ge=j(pe,2),Se=j(H(Ge),2),Ee=H(Se),Ke=H(Ee);re(lt=>{Oe(Ee,"style",`width: ${L(c).cpu.perc??""}%`),te(Ke,`${lt??""}%`)},[()=>or(L(c).cpu.perc)],ke),U(oe,ce)};Q(se,oe=>{L(c).cpu&&oe(Be)})}var He=j(se,2);{var Ie=oe=>{var ce=rl(),pe=H(ce),xe=H(pe);de(xe,{icon:Ds,size:"2x"});var Ge=j(pe,2),Se=H(Ge),Ee=j(H(Se),2);{var Ke=ge=>{var Te=Ja(),me=H(Te);re($e=>te(me,`Now ${$e??""}`),[()=>qt(L(c).mem.used)],ke),U(ge,Te)};Q(Ee,ge=>{L(c).mem.used!==null&&ge(Ke)})}var lt=j(Ee,2);{var mt=ge=>{var Te=Qa(),me=H(Te);re($e=>te(me,`Max ${$e??""}`),[()=>qt(L(c).mem.max_used)],ke),U(ge,Te)};Q(lt,ge=>{L(c).mem.max_used!==null&&ge(mt)})}var ct=j(lt,2);{var Ae=ge=>{var Te=el(),me=H(Te);re($e=>te(me,`Limit ${$e??""}`),[()=>qt(L(c).mem.total)],ke),U(ge,Te)};Q(ct,ge=>{L(c).mem.total!==null&&ge(Ae)})}var be=j(Se,2);{var it=ge=>{var Te=il(),me=H(Te),$e=H(me),ei=j(me,2);{var ti=ii=>{var br=tl();re(()=>Oe(br,"style",`width: ${L(x)-L(g)}%`)),U(ii,br)};Q(ei,ii=>{L(c).mem.max_used!==null&&ii(ti)})}re(ii=>{Oe(me,"style",`width: ${L(g)??""}%; z-index: 2`),te($e,`${ii??""}%`)},[()=>or(L(g))],ke),U(ge,Te)};Q(be,ge=>{L(c).mem.used!==null&&L(c).mem.total!==null&&ge(it)})}U(oe,ce)};Q(He,oe=>{L(c).mem&&oe(Ie)})}var ze=j(He,2);{var ot=oe=>{var ce=ol(),pe=H(ce),xe=H(pe);de(xe,{icon:la,size:"2x"});var Ge=j(pe,2),Se=j(H(Ge),2),Ee=H(Se),Ke=j(Se,2),lt=H(Ke),mt=j(Ge,2);{var ct=Ae=>{var be=nl(),it=j(H(be),2);ft(it,1,()=>L(c).ports,_t,(ge,Te)=>{var me=sl(),$e=H(me);re(()=>te($e,L(Te))),U(ge,me)}),U(Ae,be)};Q(mt,Ae=>{var be;((be=L(c).ports)==null?void 0:be.length)>0&&Ae(ct)})}re((Ae,be)=>{te(Ee,`▼ ${Ae??""}`),te(lt,`▲ ${be??""}`)},[()=>qt(L(c).net.rx_bytes),()=>qt(L(c).net.tx_bytes)],ke),U(oe,ce)};Q(ze,oe=>{L(c).net&&oe(ot)})}var Me=j(ze,2),We=H(Me),Pe=H(We);de(Pe,{icon:aa,size:"2x"});var at=j(We,2),gt=j(H(at),2),Ue=H(gt),xt=H(Ue),Fe=j(H(xt)),tt=j(Ue,2),Re=H(tt),ji=H(Re),Is=H(ji),mr=j(tt,2),Hs=H(mr),Fs=H(Hs);{var zs=oe=>{var ce=al(),pe=j(_e(ce),2);{var xe=Se=>{var Ee=ut("Never");U(Se,Ee)},Ge=Se=>{var Ee=ut();re(Ke=>te(Ee,Ke),[()=>ri(L(c).finished_at)],ke),U(Se,Ee)};Q(pe,Se=>{L(c).finished_at<L(c).created_at?Se(xe):Se(Ge,!1)})}U(oe,ce)},Ns=oe=>{var ce=ll(),pe=j(_e(ce));re(xe=>te(pe,` ${xe??""}`),[()=>ri(L(c).started_at)],ke),U(oe,ce)};Q(Fs,oe=>{L(c).finished_at<L(c).started_at?oe(zs):oe(Ns,!1)})}var Sr=j(mr,2),Ws=H(Sr),Us=H(Ws);{var $s=oe=>{var ce=cl(),pe=j(_e(ce));re(xe=>te(pe,` ${xe??""}`),[()=>ri(L(c).finished_at)],ke),U(oe,ce)},js=oe=>{var ce=hl(),pe=j(_e(ce));re(xe=>te(pe,` ${xe??""}`),[()=>ri(L(c).started_at)],ke),U(oe,ce)};Q(Us,oe=>{L(c).finished_at>L(c).started_at?oe($s):oe(js,!1)})}var qs=j(Sr,2),Ks=H(qs),Vs=j(H(Ks)),Gs=H(Vs),Xs=j(Me,2);{var Zs=oe=>{var ce=_l(),pe=H(ce),xe=H(pe);de(xe,{icon:ea,size:"2x"});var Ge=j(pe,2),Se=H(Ge),Ee=H(Se),Ke=j(H(Ee));ft(Ke,5,()=>Object.entries(L(c).env).sort(([Ae],[be])=>Ae.localeCompare(be)),_t,(Ae,be)=>{let it=()=>L(be)[0],ge=()=>L(be)[1];var Te=dl(),me=H(Te),$e=H(me),ei=j(me),ti=H(ei);re(()=>{te($e,it()),te(ti,ge())}),U(Ae,Te)});var lt=j(Se,2),mt=H(lt),ct=j(H(mt));ft(ct,5,()=>Object.entries(L(c).labels).sort(([Ae],[be])=>Ae.localeCompare(be)),_t,(Ae,be)=>{let it=()=>L(be)[0],ge=()=>L(be)[1];var Te=ul(),me=H(Te),$e=H(me),ei=j(me),ti=H(ei);re(()=>{te($e,it()),te(ti,ge())}),U(Ae,Te)}),U(oe,ce)};Q(Xs,oe=>{(L(c).env||L(c).labels)&&oe(Zs)})}re((oe,ce,pe,xe)=>{te(R,`#${oe??""}`),te($,ce),te(P,L(c).command),te(Ne,` ${L(A)??""}`),te(Fe,` ${pe??""}`),te(Is,L(c).crashes),te(Gs,xe)},[()=>L(c).id.substring(0,12),()=>L(c).name.replace(/^\//,""),()=>ri(L(c).created_at),()=>L(c).status.charAt(0).toUpperCase()+L(c).status.slice(1).toLowerCase()],ke),U(t,i)};Q(v,t=>{L(f)?t(e):t(r,!1)})}U(n,b),Qe()}function gl({onlyFirst:n=!1}={}){const g=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?(?:\\u0007|\\u001B\\u005C|\\u009C))","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-nq-uy=><~]))"].join("|");return new RegExp(g,n?void 0:"g")}const ml=gl();function Sl(n){if(typeof n!="string")throw new TypeError(`Expected a \`string\`, got \`${typeof n}\``);return n.replace(ml,"")}var bl=G('<div class="d-flex align-items-center"><strong>Loading...</strong> <div class="spinner-border ms-auto" role="status" aria-hidden="true"></div></div>'),Cl=G("<p>No Log Output yet ...</p>"),yl=G('<time class="me-1 px-1 svelte-itlo0b"><!></time>'),wl=G('<span class="pe-3 svelte-itlo0b"><!><span class="pe-3"> </span></span>'),El=G('<div class="d-flex justify-content-between align-items-center mb-2"><div><select class="form-select"><option>hide timestamps</option><option>local timestamps</option><option>raw timestamps</option></select></div> <div><button type="button" class="btn mx-1" title="Scroll to Top"><!></button> <button type="button" class="btn mx-1" title="Scroll to Bottom"><!></button> <button type="button" class="btn mx-1" title="Download shown log lines"><!></button> <button type="button" class="btn mx-1" title="Fullscreen"><!></button></div></div> <pre class="mb-0 svelte-itlo0b"></pre>',1),xl=G("<div><!></div>");function kl(n,_){Je(_,!1);let g=he(_,"container_id",8),x,y=ae(),A,D=ae(!0),s=ae([]),o=ae("local");Si(()=>{g()!==x&&(x=g(),X(D,!0),X(s,[]),g()&&ie.send("get_container_logs",{container_id:g()}))}),nt(()=>{ie.register("get_container_logs",e=>{if(X(D,!1),(e==null?void 0:e.length)>0){let r=!L(s)||L(y)&&L(y).scrollTop>=L(y).scrollHeight-L(y).clientHeight;const t=L(s).length+e.length;t>5e3&&L(s).slice(t-5e3),L(s).push(...e.map(i=>Sl(i))),r&&ms().then(()=>qi(y,L(y).scrollTop=L(y).scrollHeight))}},e=>Le.add({text:e,type:"error"})),A=setInterval(()=>{ie.send("get_container_logs",{container_id:g(),onlynew:!0})},3e3)}),Ft(()=>{clearInterval(A),ie.unregister("get_container_logs")});function l(){var e;(e=L(y))!=null&&e.requestFullscreen&&L(y).requestFullscreen({navigationUI:"show"})}function f(){Os(new Blob(L(s),{type:"text/plain"}),g()+".log")}function a(e){return new Date(e).toLocaleDateString(void 0,{weekday:"short",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})}et();var c=xl(),p=H(c);{var b=e=>{var r=bl();U(e,r)},v=e=>{var r=je(),t=_e(r);{var i=d=>{var m=Cl();U(d,m)},h=d=>{var m=El(),C=_e(m),u=H(C),S=H(u);re(()=>{L(o),Qn(()=>{})});var k=H(S);k.value=(k.__value="off")==null?"":"off";var B=j(k);B.value=(B.__value="local")==null?"":"local";var R=j(B);R.value=(R.__value="raw")==null?"":"raw";var O=j(u,2),F=H(O),$=H(F);de($,{icon:Yo,size:"lg",color:"#666"});var V=j(F,2),K=H(V);de(K,{icon:qo,size:"lg",color:"#666"});var w=j(V,2),T=H(w);de(T,{icon:ca,size:"lg",color:"#666"});var M=j(w,2),P=H(M);de(P,{icon:Rs,size:"lg",color:"#666"});var W=j(C,2);ft(W,5,()=>L(s),_t,(q,Z)=>{var Y=wl();const le=ke(()=>L(Z).substring(0,L(Z).indexOf(" "))),E=ke(()=>L(Z).substring(L(Z).indexOf(" ")+1));var I=H(Y);{var N=J=>{var ne=yl(),ue=H(ne);{var we=se=>{var Be=ut();re(He=>te(Be,He),[()=>a(L(le))],ke),U(se,Be)},Ne=se=>{var Be=ut();re(()=>te(Be,L(le))),U(se,Be)};Q(ue,se=>{L(o)==="local"?se(we):se(Ne,!1)})}re(()=>Oe(ne,"datetime",L(le))),U(J,ne)};Q(I,J=>{L(o)!=="off"&&J(N)})}var z=j(I),ee=H(z);re(()=>te(ee,L(E))),U(q,Y)}),$i(W,q=>X(y,q),()=>L(y)),So(S,()=>L(o),q=>X(o,q)),fe("click",F,()=>qi(y,L(y).scrollTop=0)),fe("click",V,()=>qi(y,L(y).scrollTop=L(y).scrollHeight)),fe("click",w,f),fe("click",M,l),U(d,m)};Q(t,d=>{L(s).length===0?d(i):d(h,!1)},!0)}U(e,r)};Q(p,e=>{L(D)?e(b):e(v,!1)})}U(n,c),Qe()}var Ll=G('<div class="dropdown"><button type="button"><!></button> <ul class="dropdown-menu svelte-17q1qz7"><!></ul></div>');function Ir(n,_){let g=he(_,"btnClass",8,"secondary");var x=Ll(),y=H(x),A=H(y);Bi(A,_,"button",{},o=>{de(o,{icon:oa})});var D=j(y,2),s=H(D);Bi(s,_,"default",{},null),re(()=>_o(y,`btn btn-${g()??""} dropdown-toggle svelte-17q1qz7`)),U(n,x)}var Dl=G('<li><button class="dropdown-item" type="button"><!></button></li>');function Xi(n,_){let g=he(_,"active",8,!1);var x=Dl(),y=H(x),A=H(y);Bi(A,_,"default",{},null),re(()=>ve(y,"active",g())),fe("click",y,function(D){Co.call(this,_,D)}),U(n,x)}var Rl=G('<div class="d-flex align-items-center"><strong>Loading...</strong> <div class="spinner-border ms-auto" role="status" aria-hidden="true"></div></div>'),Al=G('<button type="button" class="btn btn-secondary border-dark"> </button>'),Tl=G("<!> <!>",1),Bl=G('<span slot="button" class="me-1"><!> Add</span>'),Ml=G('<!> <input type="file" style="display: none">',1),Ol=G('<span class="badge bg-warning ms-2">readonly</span>'),Pl=G('<div class="d-flex justify-content-between align-items-center"><span> </span> <span><!> <span class="badge bg-secondary ms-2"> </span></span></div>'),Il=G('<span slot="button" class="me-1"><!> Volumes</span>'),Hl=G('<div class="ms-4"><!></div>'),Fl=G('<tr class="svelte-1hbb9tz"><td><!> <wbr> </td><td class="text-end" style="word-break: break-all"><!></td><td class="text-center"> <wbr> </td><td class="text-center"> </td><td class="text-center font-monospace" style="word-break: break-all"> </td></tr>'),zl=G('<div class="d-flex justify-content-between align-items-center"><div class="d-flex"><div class="btn-group me-1"><button type="button" class="btn btn-outline-primary"><!></button> <button type="button" class="btn btn-outline-primary"><!></button></div> <div class="btn-group mx-2" role="group"></div></div> <div class="d-flex"><!> <!></div></div> <table class="table table-hover"><thead><tr><th scope="col">Name</th><th scope="col" class="text-end">Size</th><th scope="col" class="text-center">Owner</th><th scope="col" class="text-center">Modified</th><th scope="col" class="text-center">Permissions</th></tr></thead><tbody></tbody></table>',1),Nl=G('<div style="overflow-x:auto"><!></div>');function Wl(n,_){Je(_,!1);const g=ae();let x=he(_,"container_id",8),y=he(_,"allow_download",8),A=he(_,"allow_upload",8),D=ae(),s=ae(!0),o,l=ae("/"),f=ae(null),a=ae(null);Si(()=>{x()!==o&&(o=x(),X(s,!0),X(l,"/"),X(f,null),X(a,null),x()&&ie.send("get_filesystem_info",{container_id:x()}))}),nt(()=>{ie.register("get_filesystem_info",d=>{p(d.workdir),X(a,d)},d=>Le.add({text:d,type:"error"})),ie.register("get_directory_list",d=>{window.scrollTo({top:0,behavior:"smooth"}),X(f,d.entries),X(l,d.path),X(s,!1)},d=>{Le.add({text:d,type:"error"}),X(f,null),X(s,!1)}),ie.register("download_file",d=>{Os(d.blob,d.payload.path.split("/").pop())},d=>Le.add({text:d,type:"error"})),ie.register("create_folder",()=>{p(L(l))},d=>Le.add({text:d,type:"error"})),ie.register("upload_file",()=>{p(L(l))},d=>Le.add({text:d,type:"error"}))}),Ft(()=>{ie.unregister("get_filesystem_info"),ie.unregister("get_directory_list"),ie.unregister("create_folder"),ie.unregister("upload_file"),ie.unregister("download_file")});function c(d){let m=L(l);m.endsWith("/")||(m+="/"),m+=d,p(m)}function p(d){X(l,d),ie.send("get_directory_list",{container_id:x(),path:d}),X(s,!0),X(f,null)}function b(d){y()&&ie.send("download_file",{container_id:x(),path:`${L(l)}/${d}`})}function v(){const d=prompt("Folder name:");d&&ie.send("create_folder",{container_id:x(),path:`${L(l)}/${d}`})}async function e(){const d=C=>new Promise((u,S)=>{const k=new FileReader;k.readAsDataURL(C),k.onload=()=>u(k.result.split(",")[1]),k.onerror=B=>S(B)}),m=L(D).files[0];confirm(`Upload file "${m.name}"?`)&&ie.send("upload_file",{container_id:x(),path:`${L(l)}/${m.name}`,content:await d(m)})}St(()=>L(l),()=>{X(g,()=>{const d=[],m=L(l).split("/");let C="";for(const u of m)u&&(C+="/"+u,d.push({segment:u,totalPath:C}));return d.unshift({segment:"/",totalPath:"/"}),d})}),pi(),et();var r=Nl(),t=H(r);{var i=d=>{var m=Rl();U(d,m)},h=d=>{var m=zl(),C=_e(m),u=H(C),S=H(u),k=H(S),B=H(k);de(B,{icon:da});var R=j(k,2),O=H(R);de(O,{icon:Bs});var F=j(S,2);ft(F,5,()=>L(g)(),_t,(W,q)=>{var Z=Al(),Y=H(Z);re(()=>te(Y,L(q).segment||"/")),fe("click",Z,()=>p(L(q).totalPath)),U(W,Z)});var $=j(u,2),V=H($);{var K=W=>{var q=Ml(),Z=_e(q);Ir(Z,{btnClass:"outline-primary",children:(le,E)=>{var I=Tl(),N=_e(I);Xi(N,{$$events:{click:v},children:(ee,J)=>{var ne=ut("Add Folder");U(ee,ne)},$$slots:{default:!0}});var z=j(N,2);Xi(z,{$$events:{click:()=>L(D).click()},children:(ee,J)=>{var ne=ut("Upload File");U(ee,ne)},$$slots:{default:!0}}),U(le,I)},$$slots:{default:!0,button:(le,E)=>{var I=Bl(),N=H(I);de(N,{icon:pa}),U(le,I)}}});var Y=j(Z,2);$i(Y,le=>X(D,le),()=>L(D)),fe("change",Y,e),U(W,q)};Q(V,W=>{A()&&W(K)})}var w=j(V,2);{var T=W=>{var q=Hl(),Z=H(q);Ir(Z,{children:(Y,le)=>{var E=je(),I=_e(E);ft(I,1,()=>L(a).mounts,_t,(N,z)=>{Xi(N,{$$events:{click:()=>p(L(z).destination)},children:(ee,J)=>{var ne=Pl(),ue=H(ne),we=H(ue),Ne=j(ue,2),se=H(Ne);{var Be=ze=>{var ot=Ol();U(ze,ot)};Q(se,ze=>{L(z).readonly&&ze(Be)})}var He=j(se,2),Ie=H(He);re(()=>{te(we,L(z).destination),te(Ie,L(z).type)}),U(ee,ne)},$$slots:{default:!0}})}),U(Y,E)},$$slots:{default:!0,button:(Y,le)=>{var E=Il(),I=H(E);de(I,{icon:sa}),U(Y,E)}}}),U(W,q)};Q(w,W=>{var q,Z;((Z=(q=L(a))==null?void 0:q.mounts)==null?void 0:Z.length)>0&&W(T)})}var M=j(C,2),P=j(H(M));ft(P,5,()=>L(f)||[],_t,(W,q)=>{var Z=Fl(),Y=H(Z),le=H(Y);{var E=Ie=>{de(Ie,{icon:Ko,size:"lg",color:"#3B6"})},I=Ie=>{var ze=je(),ot=_e(ze);{var Me=Pe=>{de(Pe,{icon:fa,size:"lg",color:"#36B"})},We=Pe=>{var at=je(),gt=_e(at);{var Ue=Fe=>{de(Fe,{icon:$o,size:"lg",color:"#B36"})},xt=Fe=>{var tt=ut();re(()=>te(tt,L(q).type)),U(Fe,tt)};Q(gt,Fe=>{L(q).type==="l"?Fe(Ue):Fe(xt,!1)},!0)}U(Pe,at)};Q(ot,Pe=>{L(q).type==="f"?Pe(Me):Pe(We,!1)},!0)}U(Ie,ze)};Q(le,Ie=>{L(q).type==="d"?Ie(E):Ie(I,!1)})}var N=j(le,3),z=j(Y),ee=H(z);{var J=Ie=>{var ze=ut();re(()=>te(ze,L(q).filesize)),U(Ie,ze)};Q(ee,Ie=>{L(q).type==="f"&&Ie(J)})}var ne=j(z),ue=H(ne),we=j(ue,2,!0),Ne=j(ne),se=H(Ne),Be=j(Ne),He=H(Be);re(()=>{ve(Z,"clickable",L(q).type==="d"||y()),te(N,` ${L(q).name??""}`),te(ue,`${L(q).owner??""} `),te(we,L(q).group),te(se,L(q).modtime),te(He,L(q).permissions)}),fe("click",Z,()=>L(q).type==="d"?c(L(q).name):b(L(q).name)),U(W,Z)}),fe("click",k,()=>p(L(a).workdir)),fe("click",R,()=>p(L(l))),U(d,m)};Q(t,d=>{L(s)?d(i):d(h,!1)})}U(n,r),Qe()}var Ul=G('<div class="d-flex align-items-center"><strong>Loading...</strong> <div class="spinner-border ms-auto" role="status" aria-hidden="true"></div></div>'),$l=G('<div style="width: 2rem" class="me-2 d-flex justify-content-end align-items-center"><!></div>'),jl=G('<tr><td class="text-end"> </td><td class="text-end"><!></td><td class="text-end"><!></td><td class="text-center"> </td><td class="text-center"> </td><td class="text-start"><div class="d-flex"><!> <div class="font-monospace"> </div></div></td></tr>'),ql=G('<table class="table table-striped"><thead><tr><th scope="col" class="text-end" title="Process ID">PID</th><th scope="col" class="text-end" title="Processor Usage">CPU</th><th scope="col" class="text-end">Memory</th><th scope="col" class="text-center">Started At</th><th scope="col" class="text-center">User</th><th scope="col" class="text-start">Command</th></tr></thead><tbody></tbody></table>'),Kl=G('<div style="overflow-x:auto"><!></div>');function Vl(n,_){Je(_,!1);let g=he(_,"container_id",8),x,y,A=ae(!0),D=ae(null);Si(()=>{g()!==x&&(x=g(),X(A,!0),X(D,null),g()&&ie.send("get_processes",{container_id:g()}))}),nt(()=>{ie.register("get_processes",c=>{X(D,c),X(A,!1)},c=>Le.add({text:c,type:"error"})),y=setInterval(()=>{ie.send("get_processes",{container_id:g()})},3e3)}),Ft(()=>{clearInterval(y),ie.unregister("get_processes")});function s(c,p){return c??p}et();var o=Kl(),l=H(o);{var f=c=>{var p=Ul();U(c,p)},a=c=>{var p=ql(),b=j(H(p));ft(b,5,()=>L(D)||[],_t,(v,e)=>{var r=jl(),t=H(r),i=H(t),h=j(t),d=H(h);{var m=T=>{var M=ut();re(()=>te(M,`${L(e)["%cpu"]??""}%`)),U(T,M)};Q(d,T=>{s(L(e)["%cpu"],null)&&T(m)})}var C=j(h),u=H(C);{var S=T=>{var M=ut();re(()=>te(M,`${L(e)["%mem"]??""}%`)),U(T,M)};Q(u,T=>{s(L(e)["%mem"],null)&&T(S)})}var k=j(C),B=H(k),R=j(k),O=H(R),F=j(R),$=H(F),V=H($);ft(V,1,()=>Array(L(e).level),_t,(T,M,P)=>{var W=$l(),q=H(W);{var Z=Y=>{de(Y,{icon:Ca,rotate:90})};Q(q,Y=>{parseInt(L(e).level)===P+1&&Y(Z)})}U(T,W)});var K=j(V,2),w=H(K);re((T,M)=>{te(i,L(e).pid),te(B,T),te(O,M),te(w,L(e).command)},[()=>s(L(e).stime,""),()=>s(L(e).user,"")],ke),U(v,r)}),U(c,p)};Q(l,c=>{L(A)?c(f):c(a,!1)})}U(n,o),Qe()}var Zi={exports:{}},Hr;function Gl(){return Hr||(Hr=1,function(n,_){(function(g,x){n.exports=x()})(self,()=>(()=>{var g={4567:function(D,s,o){var l=this&&this.__decorate||function(i,h,d,m){var C,u=arguments.length,S=u<3?h:m===null?m=Object.getOwnPropertyDescriptor(h,d):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(i,h,d,m);else for(var k=i.length-1;k>=0;k--)(C=i[k])&&(S=(u<3?C(S):u>3?C(h,d,S):C(h,d))||S);return u>3&&S&&Object.defineProperty(h,d,S),S},f=this&&this.__param||function(i,h){return function(d,m){h(d,m,i)}};Object.defineProperty(s,"__esModule",{value:!0}),s.AccessibilityManager=void 0;const a=o(9042),c=o(6114),p=o(9924),b=o(844),v=o(5596),e=o(4725),r=o(3656);let t=s.AccessibilityManager=class extends b.Disposable{constructor(i,h){super(),this._terminal=i,this._renderService=h,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="",this._accessibilityContainer=document.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=document.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let d=0;d<this._terminal.rows;d++)this._rowElements[d]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[d]);if(this._topBoundaryFocusListener=d=>this._handleBoundaryFocus(d,0),this._bottomBoundaryFocusListener=d=>this._handleBoundaryFocus(d,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions(),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=document.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this.register(new p.TimeBasedDebouncer(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this.register(this._terminal.onResize(d=>this._handleResize(d.rows))),this.register(this._terminal.onRender(d=>this._refreshRows(d.start,d.end))),this.register(this._terminal.onScroll(()=>this._refreshRows())),this.register(this._terminal.onA11yChar(d=>this._handleChar(d))),this.register(this._terminal.onLineFeed(()=>this._handleChar(`
`))),this.register(this._terminal.onA11yTab(d=>this._handleTab(d))),this.register(this._terminal.onKey(d=>this._handleKey(d.key))),this.register(this._terminal.onBlur(()=>this._clearLiveRegion())),this.register(this._renderService.onDimensionsChange(()=>this._refreshRowsDimensions())),this._screenDprMonitor=new v.ScreenDprMonitor(window),this.register(this._screenDprMonitor),this._screenDprMonitor.setListener(()=>this._refreshRowsDimensions()),this.register((0,r.addDisposableDomListener)(window,"resize",()=>this._refreshRowsDimensions())),this._refreshRows(),this.register((0,b.toDisposable)(()=>{this._accessibilityContainer.remove(),this._rowElements.length=0}))}_handleTab(i){for(let h=0;h<i;h++)this._handleChar(" ")}_handleChar(i){this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==i&&(this._charsToAnnounce+=i):this._charsToAnnounce+=i,i===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=a.tooMuchOutput)),c.isMac&&this._liveRegion.textContent&&this._liveRegion.textContent.length>0&&!this._liveRegion.parentNode&&setTimeout(()=>{this._accessibilityContainer.appendChild(this._liveRegion)},0))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0,c.isMac&&this._liveRegion.remove()}_handleKey(i){this._clearLiveRegion(),new RegExp("\\p{Control}","u").test(i)||this._charsToConsume.push(i)}_refreshRows(i,h){this._liveRegionDebouncer.refresh(i,h,this._terminal.rows)}_renderRows(i,h){const d=this._terminal.buffer,m=d.lines.length.toString();for(let C=i;C<=h;C++){const u=d.translateBufferLineToString(d.ydisp+C,!0),S=(d.ydisp+C+1).toString(),k=this._rowElements[C];k&&(u.length===0?k.innerText=" ":k.textContent=u,k.setAttribute("aria-posinset",S),k.setAttribute("aria-setsize",m))}this._announceCharacters()}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(i,h){const d=i.target,m=this._rowElements[h===0?1:this._rowElements.length-2];if(d.getAttribute("aria-posinset")===(h===0?"1":`${this._terminal.buffer.lines.length}`)||i.relatedTarget!==m)return;let C,u;if(h===0?(C=d,u=this._rowElements.pop(),this._rowContainer.removeChild(u)):(C=this._rowElements.shift(),u=d,this._rowContainer.removeChild(C)),C.removeEventListener("focus",this._topBoundaryFocusListener),u.removeEventListener("focus",this._bottomBoundaryFocusListener),h===0){const S=this._createAccessibilityTreeNode();this._rowElements.unshift(S),this._rowContainer.insertAdjacentElement("afterbegin",S)}else{const S=this._createAccessibilityTreeNode();this._rowElements.push(S),this._rowContainer.appendChild(S)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(h===0?-1:1),this._rowElements[h===0?1:this._rowElements.length-2].focus(),i.preventDefault(),i.stopImmediatePropagation()}_handleResize(i){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let h=this._rowContainer.children.length;h<this._terminal.rows;h++)this._rowElements[h]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[h]);for(;this._rowElements.length>i;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){const i=document.createElement("div");return i.setAttribute("role","listitem"),i.tabIndex=-1,this._refreshRowDimensions(i),i}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){this._accessibilityContainer.style.width=`${this._renderService.dimensions.css.canvas.width}px`,this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let i=0;i<this._terminal.rows;i++)this._refreshRowDimensions(this._rowElements[i])}}_refreshRowDimensions(i){i.style.height=`${this._renderService.dimensions.css.cell.height}px`}};s.AccessibilityManager=t=l([f(1,e.IRenderService)],t)},3614:(D,s)=>{function o(c){return c.replace(/\r?\n/g,"\r")}function l(c,p){return p?"\x1B[200~"+c+"\x1B[201~":c}function f(c,p,b,v){c=l(c=o(c),b.decPrivateModes.bracketedPasteMode&&v.rawOptions.ignoreBracketedPasteMode!==!0),b.triggerDataEvent(c,!0),p.value=""}function a(c,p,b){const v=b.getBoundingClientRect(),e=c.clientX-v.left-10,r=c.clientY-v.top-10;p.style.width="20px",p.style.height="20px",p.style.left=`${e}px`,p.style.top=`${r}px`,p.style.zIndex="1000",p.focus()}Object.defineProperty(s,"__esModule",{value:!0}),s.rightClickHandler=s.moveTextAreaUnderMouseCursor=s.paste=s.handlePasteEvent=s.copyHandler=s.bracketTextForPaste=s.prepareTextForTerminal=void 0,s.prepareTextForTerminal=o,s.bracketTextForPaste=l,s.copyHandler=function(c,p){c.clipboardData&&c.clipboardData.setData("text/plain",p.selectionText),c.preventDefault()},s.handlePasteEvent=function(c,p,b,v){c.stopPropagation(),c.clipboardData&&f(c.clipboardData.getData("text/plain"),p,b,v)},s.paste=f,s.moveTextAreaUnderMouseCursor=a,s.rightClickHandler=function(c,p,b,v,e){a(c,p,b),e&&v.rightClickSelect(c),p.value=v.selectionText,p.select()}},7239:(D,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ColorContrastCache=void 0;const l=o(1505);s.ColorContrastCache=class{constructor(){this._color=new l.TwoKeyMap,this._css=new l.TwoKeyMap}setCss(f,a,c){this._css.set(f,a,c)}getCss(f,a){return this._css.get(f,a)}setColor(f,a,c){this._color.set(f,a,c)}getColor(f,a){return this._color.get(f,a)}clear(){this._color.clear(),this._css.clear()}}},3656:(D,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.addDisposableDomListener=void 0,s.addDisposableDomListener=function(o,l,f,a){o.addEventListener(l,f,a);let c=!1;return{dispose:()=>{c||(c=!0,o.removeEventListener(l,f,a))}}}},6465:function(D,s,o){var l=this&&this.__decorate||function(e,r,t,i){var h,d=arguments.length,m=d<3?r:i===null?i=Object.getOwnPropertyDescriptor(r,t):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")m=Reflect.decorate(e,r,t,i);else for(var C=e.length-1;C>=0;C--)(h=e[C])&&(m=(d<3?h(m):d>3?h(r,t,m):h(r,t))||m);return d>3&&m&&Object.defineProperty(r,t,m),m},f=this&&this.__param||function(e,r){return function(t,i){r(t,i,e)}};Object.defineProperty(s,"__esModule",{value:!0}),s.Linkifier2=void 0;const a=o(3656),c=o(8460),p=o(844),b=o(2585);let v=s.Linkifier2=class extends p.Disposable{get currentLink(){return this._currentLink}constructor(e){super(),this._bufferService=e,this._linkProviders=[],this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this.register(new c.EventEmitter),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this.register(new c.EventEmitter),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this.register((0,p.getDisposeArrayDisposable)(this._linkCacheDisposables)),this.register((0,p.toDisposable)(()=>{this._lastMouseEvent=void 0})),this.register(this._bufferService.onResize(()=>{this._clearCurrentLink(),this._wasResized=!0}))}registerLinkProvider(e){return this._linkProviders.push(e),{dispose:()=>{const r=this._linkProviders.indexOf(e);r!==-1&&this._linkProviders.splice(r,1)}}}attachToDom(e,r,t){this._element=e,this._mouseService=r,this._renderService=t,this.register((0,a.addDisposableDomListener)(this._element,"mouseleave",()=>{this._isMouseOut=!0,this._clearCurrentLink()})),this.register((0,a.addDisposableDomListener)(this._element,"mousemove",this._handleMouseMove.bind(this))),this.register((0,a.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,a.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))}_handleMouseMove(e){if(this._lastMouseEvent=e,!this._element||!this._mouseService)return;const r=this._positionFromMouseEvent(e,this._element,this._mouseService);if(!r)return;this._isMouseOut=!1;const t=e.composedPath();for(let i=0;i<t.length;i++){const h=t[i];if(h.classList.contains("xterm"))break;if(h.classList.contains("xterm-hover"))return}this._lastBufferCell&&r.x===this._lastBufferCell.x&&r.y===this._lastBufferCell.y||(this._handleHover(r),this._lastBufferCell=r)}_handleHover(e){if(this._activeLine!==e.y||this._wasResized)return this._clearCurrentLink(),this._askForLink(e,!1),void(this._wasResized=!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,e)||(this._clearCurrentLink(),this._askForLink(e,!0))}_askForLink(e,r){var t,i;this._activeProviderReplies&&r||((t=this._activeProviderReplies)===null||t===void 0||t.forEach(d=>{d==null||d.forEach(m=>{m.link.dispose&&m.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=e.y);let h=!1;for(const[d,m]of this._linkProviders.entries())r?!((i=this._activeProviderReplies)===null||i===void 0)&&i.get(d)&&(h=this._checkLinkProviderResult(d,e,h)):m.provideLinks(e.y,C=>{var u,S;if(this._isMouseOut)return;const k=C==null?void 0:C.map(B=>({link:B}));(u=this._activeProviderReplies)===null||u===void 0||u.set(d,k),h=this._checkLinkProviderResult(d,e,h),((S=this._activeProviderReplies)===null||S===void 0?void 0:S.size)===this._linkProviders.length&&this._removeIntersectingLinks(e.y,this._activeProviderReplies)})}_removeIntersectingLinks(e,r){const t=new Set;for(let i=0;i<r.size;i++){const h=r.get(i);if(h)for(let d=0;d<h.length;d++){const m=h[d],C=m.link.range.start.y<e?0:m.link.range.start.x,u=m.link.range.end.y>e?this._bufferService.cols:m.link.range.end.x;for(let S=C;S<=u;S++){if(t.has(S)){h.splice(d--,1);break}t.add(S)}}}}_checkLinkProviderResult(e,r,t){var i;if(!this._activeProviderReplies)return t;const h=this._activeProviderReplies.get(e);let d=!1;for(let m=0;m<e;m++)this._activeProviderReplies.has(m)&&!this._activeProviderReplies.get(m)||(d=!0);if(!d&&h){const m=h.find(C=>this._linkAtPosition(C.link,r));m&&(t=!0,this._handleNewLink(m))}if(this._activeProviderReplies.size===this._linkProviders.length&&!t)for(let m=0;m<this._activeProviderReplies.size;m++){const C=(i=this._activeProviderReplies.get(m))===null||i===void 0?void 0:i.find(u=>this._linkAtPosition(u.link,r));if(C){t=!0,this._handleNewLink(C);break}}return t}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(e){if(!this._element||!this._mouseService||!this._currentLink)return;const r=this._positionFromMouseEvent(e,this._element,this._mouseService);r&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,r)&&this._currentLink.link.activate(e,this._currentLink.link.text)}_clearCurrentLink(e,r){this._element&&this._currentLink&&this._lastMouseEvent&&(!e||!r||this._currentLink.link.range.start.y>=e&&this._currentLink.link.range.end.y<=r)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,p.disposeArray)(this._linkCacheDisposables))}_handleNewLink(e){if(!this._element||!this._lastMouseEvent||!this._mouseService)return;const r=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);r&&this._linkAtPosition(e.link,r)&&(this._currentLink=e,this._currentLink.state={decorations:{underline:e.link.decorations===void 0||e.link.decorations.underline,pointerCursor:e.link.decorations===void 0||e.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,e.link,this._lastMouseEvent),e.link.decorations={},Object.defineProperties(e.link.decorations,{pointerCursor:{get:()=>{var t,i;return(i=(t=this._currentLink)===null||t===void 0?void 0:t.state)===null||i===void 0?void 0:i.decorations.pointerCursor},set:t=>{var i,h;!((i=this._currentLink)===null||i===void 0)&&i.state&&this._currentLink.state.decorations.pointerCursor!==t&&(this._currentLink.state.decorations.pointerCursor=t,this._currentLink.state.isHovered&&((h=this._element)===null||h===void 0||h.classList.toggle("xterm-cursor-pointer",t)))}},underline:{get:()=>{var t,i;return(i=(t=this._currentLink)===null||t===void 0?void 0:t.state)===null||i===void 0?void 0:i.decorations.underline},set:t=>{var i,h,d;!((i=this._currentLink)===null||i===void 0)&&i.state&&((d=(h=this._currentLink)===null||h===void 0?void 0:h.state)===null||d===void 0?void 0:d.decorations.underline)!==t&&(this._currentLink.state.decorations.underline=t,this._currentLink.state.isHovered&&this._fireUnderlineEvent(e.link,t))}}}),this._renderService&&this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange(t=>{if(!this._currentLink)return;const i=t.start===0?0:t.start+1+this._bufferService.buffer.ydisp,h=this._bufferService.buffer.ydisp+1+t.end;if(this._currentLink.link.range.start.y>=i&&this._currentLink.link.range.end.y<=h&&(this._clearCurrentLink(i,h),this._lastMouseEvent&&this._element)){const d=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);d&&this._askForLink(d,!1)}})))}_linkHover(e,r,t){var i;!((i=this._currentLink)===null||i===void 0)&&i.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(r,!0),this._currentLink.state.decorations.pointerCursor&&e.classList.add("xterm-cursor-pointer")),r.hover&&r.hover(t,r.text)}_fireUnderlineEvent(e,r){const t=e.range,i=this._bufferService.buffer.ydisp,h=this._createLinkUnderlineEvent(t.start.x-1,t.start.y-i-1,t.end.x,t.end.y-i-1,void 0);(r?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(h)}_linkLeave(e,r,t){var i;!((i=this._currentLink)===null||i===void 0)&&i.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(r,!1),this._currentLink.state.decorations.pointerCursor&&e.classList.remove("xterm-cursor-pointer")),r.leave&&r.leave(t,r.text)}_linkAtPosition(e,r){const t=e.range.start.y*this._bufferService.cols+e.range.start.x,i=e.range.end.y*this._bufferService.cols+e.range.end.x,h=r.y*this._bufferService.cols+r.x;return t<=h&&h<=i}_positionFromMouseEvent(e,r,t){const i=t.getCoords(e,r,this._bufferService.cols,this._bufferService.rows);if(i)return{x:i[0],y:i[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(e,r,t,i,h){return{x1:e,y1:r,x2:t,y2:i,cols:this._bufferService.cols,fg:h}}};s.Linkifier2=v=l([f(0,b.IBufferService)],v)},9042:(D,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.tooMuchOutput=s.promptLabel=void 0,s.promptLabel="Terminal input",s.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},3730:function(D,s,o){var l=this&&this.__decorate||function(v,e,r,t){var i,h=arguments.length,d=h<3?e:t===null?t=Object.getOwnPropertyDescriptor(e,r):t;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(v,e,r,t);else for(var m=v.length-1;m>=0;m--)(i=v[m])&&(d=(h<3?i(d):h>3?i(e,r,d):i(e,r))||d);return h>3&&d&&Object.defineProperty(e,r,d),d},f=this&&this.__param||function(v,e){return function(r,t){e(r,t,v)}};Object.defineProperty(s,"__esModule",{value:!0}),s.OscLinkProvider=void 0;const a=o(511),c=o(2585);let p=s.OscLinkProvider=class{constructor(v,e,r){this._bufferService=v,this._optionsService=e,this._oscLinkService=r}provideLinks(v,e){var r;const t=this._bufferService.buffer.lines.get(v-1);if(!t)return void e(void 0);const i=[],h=this._optionsService.rawOptions.linkHandler,d=new a.CellData,m=t.getTrimmedLength();let C=-1,u=-1,S=!1;for(let k=0;k<m;k++)if(u!==-1||t.hasContent(k)){if(t.loadCell(k,d),d.hasExtendedAttrs()&&d.extended.urlId){if(u===-1){u=k,C=d.extended.urlId;continue}S=d.extended.urlId!==C}else u!==-1&&(S=!0);if(S||u!==-1&&k===m-1){const B=(r=this._oscLinkService.getLinkData(C))===null||r===void 0?void 0:r.uri;if(B){const R={start:{x:u+1,y:v},end:{x:k+(S||k!==m-1?0:1),y:v}};let O=!1;if(!(h!=null&&h.allowNonHttpProtocols))try{const F=new URL(B);["http:","https:"].includes(F.protocol)||(O=!0)}catch{O=!0}O||i.push({text:B,range:R,activate:(F,$)=>h?h.activate(F,$,R):b(0,$),hover:(F,$)=>{var V;return(V=h==null?void 0:h.hover)===null||V===void 0?void 0:V.call(h,F,$,R)},leave:(F,$)=>{var V;return(V=h==null?void 0:h.leave)===null||V===void 0?void 0:V.call(h,F,$,R)}})}S=!1,d.hasExtendedAttrs()&&d.extended.urlId?(u=k,C=d.extended.urlId):(u=-1,C=-1)}}e(i)}};function b(v,e){if(confirm(`Do you want to navigate to ${e}?

WARNING: This link could potentially be dangerous`)){const r=window.open();if(r){try{r.opener=null}catch{}r.location.href=e}else console.warn("Opening link blocked as opener could not be cleared")}}s.OscLinkProvider=p=l([f(0,c.IBufferService),f(1,c.IOptionsService),f(2,c.IOscLinkService)],p)},6193:(D,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.RenderDebouncer=void 0,s.RenderDebouncer=class{constructor(o,l){this._parentWindow=o,this._renderCallback=l,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._parentWindow.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(o){return this._refreshCallbacks.push(o),this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame(()=>this._innerRefresh())),this._animationFrame}refresh(o,l,f){this._rowCount=f,o=o!==void 0?o:0,l=l!==void 0?l:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,o):o,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,l):l,this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return void this._runRefreshCallbacks();const o=Math.max(this._rowStart,0),l=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(o,l),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(const o of this._refreshCallbacks)o(0);this._refreshCallbacks=[]}}},5596:(D,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ScreenDprMonitor=void 0;const l=o(844);class f extends l.Disposable{constructor(c){super(),this._parentWindow=c,this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this.register((0,l.toDisposable)(()=>{this.clearListener()}))}setListener(c){this._listener&&this.clearListener(),this._listener=c,this._outerListener=()=>{this._listener&&(this._listener(this._parentWindow.devicePixelRatio,this._currentDevicePixelRatio),this._updateDpr())},this._updateDpr()}_updateDpr(){var c;this._outerListener&&((c=this._resolutionMediaMatchList)===null||c===void 0||c.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){this._resolutionMediaMatchList&&this._listener&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._listener=void 0,this._outerListener=void 0)}}s.ScreenDprMonitor=f},3236:(D,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Terminal=void 0;const l=o(3614),f=o(3656),a=o(6465),c=o(9042),p=o(3730),b=o(1680),v=o(3107),e=o(5744),r=o(2950),t=o(1296),i=o(428),h=o(4269),d=o(5114),m=o(8934),C=o(3230),u=o(9312),S=o(4725),k=o(6731),B=o(8055),R=o(8969),O=o(8460),F=o(844),$=o(6114),V=o(8437),K=o(2584),w=o(7399),T=o(5941),M=o(9074),P=o(2585),W=o(5435),q=o(4567),Z=typeof window<"u"?window.document:null;class Y extends R.CoreTerminal{get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}constructor(E={}){super(E),this.browser=$,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this.register(new F.MutableDisposable),this._onCursorMove=this.register(new O.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onKey=this.register(new O.EventEmitter),this.onKey=this._onKey.event,this._onRender=this.register(new O.EventEmitter),this.onRender=this._onRender.event,this._onSelectionChange=this.register(new O.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this.register(new O.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onBell=this.register(new O.EventEmitter),this.onBell=this._onBell.event,this._onFocus=this.register(new O.EventEmitter),this._onBlur=this.register(new O.EventEmitter),this._onA11yCharEmitter=this.register(new O.EventEmitter),this._onA11yTabEmitter=this.register(new O.EventEmitter),this._onWillOpen=this.register(new O.EventEmitter),this._setup(),this.linkifier2=this.register(this._instantiationService.createInstance(a.Linkifier2)),this.linkifier2.registerLinkProvider(this._instantiationService.createInstance(p.OscLinkProvider)),this._decorationService=this._instantiationService.createInstance(M.DecorationService),this._instantiationService.setService(P.IDecorationService,this._decorationService),this.register(this._inputHandler.onRequestBell(()=>this._onBell.fire())),this.register(this._inputHandler.onRequestRefreshRows((I,N)=>this.refresh(I,N))),this.register(this._inputHandler.onRequestSendFocus(()=>this._reportFocus())),this.register(this._inputHandler.onRequestReset(()=>this.reset())),this.register(this._inputHandler.onRequestWindowsOptionsReport(I=>this._reportWindowsOptions(I))),this.register(this._inputHandler.onColor(I=>this._handleColorEvent(I))),this.register((0,O.forwardEvent)(this._inputHandler.onCursorMove,this._onCursorMove)),this.register((0,O.forwardEvent)(this._inputHandler.onTitleChange,this._onTitleChange)),this.register((0,O.forwardEvent)(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this.register((0,O.forwardEvent)(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this.register(this._bufferService.onResize(I=>this._afterResize(I.cols,I.rows))),this.register((0,F.toDisposable)(()=>{var I,N;this._customKeyEventHandler=void 0,(N=(I=this.element)===null||I===void 0?void 0:I.parentNode)===null||N===void 0||N.removeChild(this.element)}))}_handleColorEvent(E){if(this._themeService)for(const I of E){let N,z="";switch(I.index){case 256:N="foreground",z="10";break;case 257:N="background",z="11";break;case 258:N="cursor",z="12";break;default:N="ansi",z="4;"+I.index}switch(I.type){case 0:const ee=B.color.toColorRGB(N==="ansi"?this._themeService.colors.ansi[I.index]:this._themeService.colors[N]);this.coreService.triggerDataEvent(`${K.C0.ESC}]${z};${(0,T.toRgbString)(ee)}${K.C1_ESCAPED.ST}`);break;case 1:if(N==="ansi")this._themeService.modifyColors(J=>J.ansi[I.index]=B.rgba.toColor(...I.color));else{const J=N;this._themeService.modifyColors(ne=>ne[J]=B.rgba.toColor(...I.color))}break;case 2:this._themeService.restoreColor(I.index)}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(E){E?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(q.AccessibilityManager,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(E){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(K.C0.ESC+"[I"),this.updateCursorStyle(E),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){var E;return(E=this.textarea)===null||E===void 0?void 0:E.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(K.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;const E=this.buffer.ybase+this.buffer.y,I=this.buffer.lines.get(E);if(!I)return;const N=Math.min(this.buffer.x,this.cols-1),z=this._renderService.dimensions.css.cell.height,ee=I.getWidth(N),J=this._renderService.dimensions.css.cell.width*ee,ne=this.buffer.y*this._renderService.dimensions.css.cell.height,ue=N*this._renderService.dimensions.css.cell.width;this.textarea.style.left=ue+"px",this.textarea.style.top=ne+"px",this.textarea.style.width=J+"px",this.textarea.style.height=z+"px",this.textarea.style.lineHeight=z+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this.register((0,f.addDisposableDomListener)(this.element,"copy",I=>{this.hasSelection()&&(0,l.copyHandler)(I,this._selectionService)}));const E=I=>(0,l.handlePasteEvent)(I,this.textarea,this.coreService,this.optionsService);this.register((0,f.addDisposableDomListener)(this.textarea,"paste",E)),this.register((0,f.addDisposableDomListener)(this.element,"paste",E)),$.isFirefox?this.register((0,f.addDisposableDomListener)(this.element,"mousedown",I=>{I.button===2&&(0,l.rightClickHandler)(I,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})):this.register((0,f.addDisposableDomListener)(this.element,"contextmenu",I=>{(0,l.rightClickHandler)(I,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})),$.isLinux&&this.register((0,f.addDisposableDomListener)(this.element,"auxclick",I=>{I.button===1&&(0,l.moveTextAreaUnderMouseCursor)(I,this.textarea,this.screenElement)}))}_bindKeys(){this.register((0,f.addDisposableDomListener)(this.textarea,"keyup",E=>this._keyUp(E),!0)),this.register((0,f.addDisposableDomListener)(this.textarea,"keydown",E=>this._keyDown(E),!0)),this.register((0,f.addDisposableDomListener)(this.textarea,"keypress",E=>this._keyPress(E),!0)),this.register((0,f.addDisposableDomListener)(this.textarea,"compositionstart",()=>this._compositionHelper.compositionstart())),this.register((0,f.addDisposableDomListener)(this.textarea,"compositionupdate",E=>this._compositionHelper.compositionupdate(E))),this.register((0,f.addDisposableDomListener)(this.textarea,"compositionend",()=>this._compositionHelper.compositionend())),this.register((0,f.addDisposableDomListener)(this.textarea,"input",E=>this._inputEvent(E),!0)),this.register(this.onRender(()=>this._compositionHelper.updateCompositionElements()))}open(E){var I;if(!E)throw new Error("Terminal requires a parent element.");E.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this._document=E.ownerDocument,this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),E.appendChild(this.element);const N=Z.createDocumentFragment();this._viewportElement=Z.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),N.appendChild(this._viewportElement),this._viewportScrollArea=Z.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=Z.createElement("div"),this.screenElement.classList.add("xterm-screen"),this._helperContainer=Z.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),N.appendChild(this.screenElement),this.textarea=Z.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",c.promptLabel),$.isChromeOS||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._coreBrowserService=this._instantiationService.createInstance(d.CoreBrowserService,this.textarea,(I=this._document.defaultView)!==null&&I!==void 0?I:window),this._instantiationService.setService(S.ICoreBrowserService,this._coreBrowserService),this.register((0,f.addDisposableDomListener)(this.textarea,"focus",z=>this._handleTextAreaFocus(z))),this.register((0,f.addDisposableDomListener)(this.textarea,"blur",()=>this._handleTextAreaBlur())),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(i.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(S.ICharSizeService,this._charSizeService),this._themeService=this._instantiationService.createInstance(k.ThemeService),this._instantiationService.setService(S.IThemeService,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(h.CharacterJoinerService),this._instantiationService.setService(S.ICharacterJoinerService,this._characterJoinerService),this._renderService=this.register(this._instantiationService.createInstance(C.RenderService,this.rows,this.screenElement)),this._instantiationService.setService(S.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange(z=>this._onRender.fire(z))),this.onResize(z=>this._renderService.resize(z.cols,z.rows)),this._compositionView=Z.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(r.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this.element.appendChild(N);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this._mouseService=this._instantiationService.createInstance(m.MouseService),this._instantiationService.setService(S.IMouseService,this._mouseService),this.viewport=this._instantiationService.createInstance(b.Viewport,this._viewportElement,this._viewportScrollArea),this.viewport.onRequestScrollLines(z=>this.scrollLines(z.amount,z.suppressScrollEvent,1)),this.register(this._inputHandler.onRequestSyncScrollBar(()=>this.viewport.syncScrollArea())),this.register(this.viewport),this.register(this.onCursorMove(()=>{this._renderService.handleCursorMove(),this._syncTextArea()})),this.register(this.onResize(()=>this._renderService.handleResize(this.cols,this.rows))),this.register(this.onBlur(()=>this._renderService.handleBlur())),this.register(this.onFocus(()=>this._renderService.handleFocus())),this.register(this._renderService.onDimensionsChange(()=>this.viewport.syncScrollArea())),this._selectionService=this.register(this._instantiationService.createInstance(u.SelectionService,this.element,this.screenElement,this.linkifier2)),this._instantiationService.setService(S.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines(z=>this.scrollLines(z.amount,z.suppressScrollEvent))),this.register(this._selectionService.onSelectionChange(()=>this._onSelectionChange.fire())),this.register(this._selectionService.onRequestRedraw(z=>this._renderService.handleSelectionChanged(z.start,z.end,z.columnSelectMode))),this.register(this._selectionService.onLinuxMouseSelection(z=>{this.textarea.value=z,this.textarea.focus(),this.textarea.select()})),this.register(this._onScroll.event(z=>{this.viewport.syncScrollArea(),this._selectionService.refresh()})),this.register((0,f.addDisposableDomListener)(this._viewportElement,"scroll",()=>this._selectionService.refresh())),this.linkifier2.attachToDom(this.screenElement,this._mouseService,this._renderService),this.register(this._instantiationService.createInstance(v.BufferDecorationRenderer,this.screenElement)),this.register((0,f.addDisposableDomListener)(this.element,"mousedown",z=>this._selectionService.handleMouseDown(z))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(q.AccessibilityManager,this)),this.register(this.optionsService.onSpecificOptionChange("screenReaderMode",z=>this._handleScreenReaderModeOptionChange(z))),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(e.OverviewRulerRenderer,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRulerWidth",z=>{!this._overviewRulerRenderer&&z&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(e.OverviewRulerRenderer,this._viewportElement,this.screenElement)))}),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(t.DomRenderer,this.element,this.screenElement,this._viewportElement,this.linkifier2)}bindMouse(){const E=this,I=this.element;function N(J){const ne=E._mouseService.getMouseReportCoords(J,E.screenElement);if(!ne)return!1;let ue,we;switch(J.overrideType||J.type){case"mousemove":we=32,J.buttons===void 0?(ue=3,J.button!==void 0&&(ue=J.button<3?J.button:3)):ue=1&J.buttons?0:4&J.buttons?1:2&J.buttons?2:3;break;case"mouseup":we=0,ue=J.button<3?J.button:3;break;case"mousedown":we=1,ue=J.button<3?J.button:3;break;case"wheel":if(E.viewport.getLinesScrolled(J)===0)return!1;we=J.deltaY<0?0:1,ue=4;break;default:return!1}return!(we===void 0||ue===void 0||ue>4)&&E.coreMouseService.triggerMouseEvent({col:ne.col,row:ne.row,x:ne.x,y:ne.y,button:ue,action:we,ctrl:J.ctrlKey,alt:J.altKey,shift:J.shiftKey})}const z={mouseup:null,wheel:null,mousedrag:null,mousemove:null},ee={mouseup:J=>(N(J),J.buttons||(this._document.removeEventListener("mouseup",z.mouseup),z.mousedrag&&this._document.removeEventListener("mousemove",z.mousedrag)),this.cancel(J)),wheel:J=>(N(J),this.cancel(J,!0)),mousedrag:J=>{J.buttons&&N(J)},mousemove:J=>{J.buttons||N(J)}};this.register(this.coreMouseService.onProtocolChange(J=>{J?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(J)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),8&J?z.mousemove||(I.addEventListener("mousemove",ee.mousemove),z.mousemove=ee.mousemove):(I.removeEventListener("mousemove",z.mousemove),z.mousemove=null),16&J?z.wheel||(I.addEventListener("wheel",ee.wheel,{passive:!1}),z.wheel=ee.wheel):(I.removeEventListener("wheel",z.wheel),z.wheel=null),2&J?z.mouseup||(I.addEventListener("mouseup",ee.mouseup),z.mouseup=ee.mouseup):(this._document.removeEventListener("mouseup",z.mouseup),I.removeEventListener("mouseup",z.mouseup),z.mouseup=null),4&J?z.mousedrag||(z.mousedrag=ee.mousedrag):(this._document.removeEventListener("mousemove",z.mousedrag),z.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,f.addDisposableDomListener)(I,"mousedown",J=>{if(J.preventDefault(),this.focus(),this.coreMouseService.areMouseEventsActive&&!this._selectionService.shouldForceSelection(J))return N(J),z.mouseup&&this._document.addEventListener("mouseup",z.mouseup),z.mousedrag&&this._document.addEventListener("mousemove",z.mousedrag),this.cancel(J)})),this.register((0,f.addDisposableDomListener)(I,"wheel",J=>{if(!z.wheel){if(!this.buffer.hasScrollback){const ne=this.viewport.getLinesScrolled(J);if(ne===0)return;const ue=K.C0.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(J.deltaY<0?"A":"B");let we="";for(let Ne=0;Ne<Math.abs(ne);Ne++)we+=ue;return this.coreService.triggerDataEvent(we,!0),this.cancel(J,!0)}return this.viewport.handleWheel(J)?this.cancel(J):void 0}},{passive:!1})),this.register((0,f.addDisposableDomListener)(I,"touchstart",J=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchStart(J),this.cancel(J)},{passive:!0})),this.register((0,f.addDisposableDomListener)(I,"touchmove",J=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchMove(J)?void 0:this.cancel(J)},{passive:!1}))}refresh(E,I){var N;(N=this._renderService)===null||N===void 0||N.refreshRows(E,I)}updateCursorStyle(E){var I;!((I=this._selectionService)===null||I===void 0)&&I.shouldColumnSelect(E)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(E,I,N=0){var z;N===1?(super.scrollLines(E,I,N),this.refresh(0,this.rows-1)):(z=this.viewport)===null||z===void 0||z.scrollLines(E)}paste(E){(0,l.paste)(E,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(E){this._customKeyEventHandler=E}registerLinkProvider(E){return this.linkifier2.registerLinkProvider(E)}registerCharacterJoiner(E){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");const I=this._characterJoinerService.register(E);return this.refresh(0,this.rows-1),I}deregisterCharacterJoiner(E){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(E)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(E){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+E)}registerDecoration(E){return this._decorationService.registerDecoration(E)}hasSelection(){return!!this._selectionService&&this._selectionService.hasSelection}select(E,I,N){this._selectionService.setSelection(E,I,N)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(this._selectionService&&this._selectionService.hasSelection)return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){var E;(E=this._selectionService)===null||E===void 0||E.clearSelection()}selectAll(){var E;(E=this._selectionService)===null||E===void 0||E.selectAll()}selectLines(E,I){var N;(N=this._selectionService)===null||N===void 0||N.selectLines(E,I)}_keyDown(E){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(E)===!1)return!1;const I=this.browser.isMac&&this.options.macOptionIsMeta&&E.altKey;if(!I&&!this._compositionHelper.keydown(E))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;I||E.key!=="Dead"&&E.key!=="AltGraph"||(this._unprocessedDeadKey=!0);const N=(0,w.evaluateKeyboardEvent)(E,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(E),N.type===3||N.type===2){const z=this.rows-1;return this.scrollLines(N.type===2?-z:z),this.cancel(E,!0)}return N.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,E)||(N.cancel&&this.cancel(E,!0),!N.key||!!(E.key&&!E.ctrlKey&&!E.altKey&&!E.metaKey&&E.key.length===1&&E.key.charCodeAt(0)>=65&&E.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(N.key!==K.C0.ETX&&N.key!==K.C0.CR||(this.textarea.value=""),this._onKey.fire({key:N.key,domEvent:E}),this._showCursor(),this.coreService.triggerDataEvent(N.key,!0),!this.optionsService.rawOptions.screenReaderMode||E.altKey||E.ctrlKey?this.cancel(E,!0):void(this._keyDownHandled=!0))))}_isThirdLevelShift(E,I){const N=E.isMac&&!this.options.macOptionIsMeta&&I.altKey&&!I.ctrlKey&&!I.metaKey||E.isWindows&&I.altKey&&I.ctrlKey&&!I.metaKey||E.isWindows&&I.getModifierState("AltGraph");return I.type==="keypress"?N:N&&(!I.keyCode||I.keyCode>47)}_keyUp(E){this._keyDownSeen=!1,this._customKeyEventHandler&&this._customKeyEventHandler(E)===!1||(function(I){return I.keyCode===16||I.keyCode===17||I.keyCode===18}(E)||this.focus(),this.updateCursorStyle(E),this._keyPressHandled=!1)}_keyPress(E){let I;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(E)===!1)return!1;if(this.cancel(E),E.charCode)I=E.charCode;else if(E.which===null||E.which===void 0)I=E.keyCode;else{if(E.which===0||E.charCode===0)return!1;I=E.which}return!(!I||(E.altKey||E.ctrlKey||E.metaKey)&&!this._isThirdLevelShift(this.browser,E)||(I=String.fromCharCode(I),this._onKey.fire({key:I,domEvent:E}),this._showCursor(),this.coreService.triggerDataEvent(I,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))}_inputEvent(E){if(E.data&&E.inputType==="insertText"&&(!E.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;const I=E.data;return this.coreService.triggerDataEvent(I,!0),this.cancel(E),!0}return!1}resize(E,I){E!==this.cols||I!==this.rows?super.resize(E,I):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()}_afterResize(E,I){var N,z;(N=this._charSizeService)===null||N===void 0||N.measure(),(z=this.viewport)===null||z===void 0||z.syncScrollArea(!0)}clear(){var E;if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let I=1;I<this.rows;I++)this.buffer.lines.push(this.buffer.getBlankLine(V.DEFAULT_ATTR_DATA));this._onScroll.fire({position:this.buffer.ydisp,source:0}),(E=this.viewport)===null||E===void 0||E.reset(),this.refresh(0,this.rows-1)}}reset(){var E,I;this.options.rows=this.rows,this.options.cols=this.cols;const N=this._customKeyEventHandler;this._setup(),super.reset(),(E=this._selectionService)===null||E===void 0||E.reset(),this._decorationService.reset(),(I=this.viewport)===null||I===void 0||I.reset(),this._customKeyEventHandler=N,this.refresh(0,this.rows-1)}clearTextureAtlas(){var E;(E=this._renderService)===null||E===void 0||E.clearTextureAtlas()}_reportFocus(){var E;!((E=this.element)===null||E===void 0)&&E.classList.contains("focus")?this.coreService.triggerDataEvent(K.C0.ESC+"[I"):this.coreService.triggerDataEvent(K.C0.ESC+"[O")}_reportWindowsOptions(E){if(this._renderService)switch(E){case W.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:const I=this._renderService.dimensions.css.canvas.width.toFixed(0),N=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${K.C0.ESC}[4;${N};${I}t`);break;case W.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:const z=this._renderService.dimensions.css.cell.width.toFixed(0),ee=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${K.C0.ESC}[6;${ee};${z}t`)}}cancel(E,I){if(this.options.cancelEvents||I)return E.preventDefault(),E.stopPropagation(),!1}}s.Terminal=Y},9924:(D,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.TimeBasedDebouncer=void 0,s.TimeBasedDebouncer=class{constructor(o,l=1e3){this._renderCallback=o,this._debounceThresholdMS=l,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(o,l,f){this._rowCount=f,o=o!==void 0?o:0,l=l!==void 0?l:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,o):o,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,l):l;const a=Date.now();if(a-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=a,this._innerRefresh();else if(!this._additionalRefreshRequested){const c=a-this._lastRefreshMs,p=this._debounceThresholdMS-c;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(()=>{this._lastRefreshMs=Date.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0},p)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;const o=Math.max(this._rowStart,0),l=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(o,l)}}},1680:function(D,s,o){var l=this&&this.__decorate||function(r,t,i,h){var d,m=arguments.length,C=m<3?t:h===null?h=Object.getOwnPropertyDescriptor(t,i):h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(r,t,i,h);else for(var u=r.length-1;u>=0;u--)(d=r[u])&&(C=(m<3?d(C):m>3?d(t,i,C):d(t,i))||C);return m>3&&C&&Object.defineProperty(t,i,C),C},f=this&&this.__param||function(r,t){return function(i,h){t(i,h,r)}};Object.defineProperty(s,"__esModule",{value:!0}),s.Viewport=void 0;const a=o(3656),c=o(4725),p=o(8460),b=o(844),v=o(2585);let e=s.Viewport=class extends b.Disposable{constructor(r,t,i,h,d,m,C,u){super(),this._viewportElement=r,this._scrollArea=t,this._bufferService=i,this._optionsService=h,this._charSizeService=d,this._renderService=m,this._coreBrowserService=C,this.scrollBarWidth=0,this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._wheelPartialScroll=0,this._refreshAnimationFrame=null,this._ignoreNextScrollEvent=!1,this._smoothScrollState={startTime:0,origin:-1,target:-1},this._onRequestScrollLines=this.register(new p.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this.register((0,a.addDisposableDomListener)(this._viewportElement,"scroll",this._handleScroll.bind(this))),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(S=>this._activeBuffer=S.activeBuffer)),this._renderDimensions=this._renderService.dimensions,this.register(this._renderService.onDimensionsChange(S=>this._renderDimensions=S)),this._handleThemeChange(u.colors),this.register(u.onChangeColors(S=>this._handleThemeChange(S))),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.syncScrollArea())),setTimeout(()=>this.syncScrollArea())}_handleThemeChange(r){this._viewportElement.style.backgroundColor=r.background.css}reset(){this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._coreBrowserService.window.requestAnimationFrame(()=>this.syncScrollArea())}_refresh(r){if(r)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&this._coreBrowserService.window.cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderService.dimensions.device.cell.height/this._coreBrowserService.dpr,this._currentDeviceCellHeight=this._renderService.dimensions.device.cell.height,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;const t=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderService.dimensions.css.canvas.height);this._lastRecordedBufferHeight!==t&&(this._lastRecordedBufferHeight=t,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}const r=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==r&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=r),this._refreshAnimationFrame=null}syncScrollArea(r=!1){if(this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(r);this._lastRecordedViewportHeight===this._renderService.dimensions.css.canvas.height&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.device.cell.height===this._currentDeviceCellHeight||this._refresh(r)}_handleScroll(r){if(this._lastScrollTop=this._viewportElement.scrollTop,!this._viewportElement.offsetParent)return;if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._onRequestScrollLines.fire({amount:0,suppressScrollEvent:!0});const t=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._onRequestScrollLines.fire({amount:t,suppressScrollEvent:!0})}_smoothScroll(){if(this._isDisposed||this._smoothScrollState.origin===-1||this._smoothScrollState.target===-1)return;const r=this._smoothScrollPercent();this._viewportElement.scrollTop=this._smoothScrollState.origin+Math.round(r*(this._smoothScrollState.target-this._smoothScrollState.origin)),r<1?this._coreBrowserService.window.requestAnimationFrame(()=>this._smoothScroll()):this._clearSmoothScrollState()}_smoothScrollPercent(){return this._optionsService.rawOptions.smoothScrollDuration&&this._smoothScrollState.startTime?Math.max(Math.min((Date.now()-this._smoothScrollState.startTime)/this._optionsService.rawOptions.smoothScrollDuration,1),0):1}_clearSmoothScrollState(){this._smoothScrollState.startTime=0,this._smoothScrollState.origin=-1,this._smoothScrollState.target=-1}_bubbleScroll(r,t){const i=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(t<0&&this._viewportElement.scrollTop!==0||t>0&&i<this._lastRecordedBufferHeight)||(r.cancelable&&r.preventDefault(),!1)}handleWheel(r){const t=this._getPixelsScrolled(r);return t!==0&&(this._optionsService.rawOptions.smoothScrollDuration?(this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target===-1?this._smoothScrollState.target=this._viewportElement.scrollTop+t:this._smoothScrollState.target+=t,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()):this._viewportElement.scrollTop+=t,this._bubbleScroll(r,t))}scrollLines(r){if(r!==0)if(this._optionsService.rawOptions.smoothScrollDuration){const t=r*this._currentRowHeight;this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target=this._smoothScrollState.origin+t,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()}else this._onRequestScrollLines.fire({amount:r,suppressScrollEvent:!1})}_getPixelsScrolled(r){if(r.deltaY===0||r.shiftKey)return 0;let t=this._applyScrollModifier(r.deltaY,r);return r.deltaMode===WheelEvent.DOM_DELTA_LINE?t*=this._currentRowHeight:r.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(t*=this._currentRowHeight*this._bufferService.rows),t}getBufferElements(r,t){var i;let h,d="";const m=[],C=t??this._bufferService.buffer.lines.length,u=this._bufferService.buffer.lines;for(let S=r;S<C;S++){const k=u.get(S);if(!k)continue;const B=(i=u.get(S+1))===null||i===void 0?void 0:i.isWrapped;if(d+=k.translateToString(!B),!B||S===u.length-1){const R=document.createElement("div");R.textContent=d,m.push(R),d.length>0&&(h=R),d=""}}return{bufferElements:m,cursorElement:h}}getLinesScrolled(r){if(r.deltaY===0||r.shiftKey)return 0;let t=this._applyScrollModifier(r.deltaY,r);return r.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(t/=this._currentRowHeight+0,this._wheelPartialScroll+=t,t=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):r.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(t*=this._bufferService.rows),t}_applyScrollModifier(r,t){const i=this._optionsService.rawOptions.fastScrollModifier;return i==="alt"&&t.altKey||i==="ctrl"&&t.ctrlKey||i==="shift"&&t.shiftKey?r*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:r*this._optionsService.rawOptions.scrollSensitivity}handleTouchStart(r){this._lastTouchY=r.touches[0].pageY}handleTouchMove(r){const t=this._lastTouchY-r.touches[0].pageY;return this._lastTouchY=r.touches[0].pageY,t!==0&&(this._viewportElement.scrollTop+=t,this._bubbleScroll(r,t))}};s.Viewport=e=l([f(2,v.IBufferService),f(3,v.IOptionsService),f(4,c.ICharSizeService),f(5,c.IRenderService),f(6,c.ICoreBrowserService),f(7,c.IThemeService)],e)},3107:function(D,s,o){var l=this&&this.__decorate||function(e,r,t,i){var h,d=arguments.length,m=d<3?r:i===null?i=Object.getOwnPropertyDescriptor(r,t):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")m=Reflect.decorate(e,r,t,i);else for(var C=e.length-1;C>=0;C--)(h=e[C])&&(m=(d<3?h(m):d>3?h(r,t,m):h(r,t))||m);return d>3&&m&&Object.defineProperty(r,t,m),m},f=this&&this.__param||function(e,r){return function(t,i){r(t,i,e)}};Object.defineProperty(s,"__esModule",{value:!0}),s.BufferDecorationRenderer=void 0;const a=o(3656),c=o(4725),p=o(844),b=o(2585);let v=s.BufferDecorationRenderer=class extends p.Disposable{constructor(e,r,t,i){super(),this._screenElement=e,this._bufferService=r,this._decorationService=t,this._renderService=i,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this.register(this._renderService.onRenderedViewportChange(()=>this._doRefreshDecorations())),this.register(this._renderService.onDimensionsChange(()=>{this._dimensionsChanged=!0,this._queueRefresh()})),this.register((0,a.addDisposableDomListener)(window,"resize",()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt})),this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh())),this.register(this._decorationService.onDecorationRemoved(h=>this._removeDecoration(h))),this.register((0,p.toDisposable)(()=>{this._container.remove(),this._decorationElements.clear()}))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback(()=>{this._doRefreshDecorations(),this._animationFrame=void 0}))}_doRefreshDecorations(){for(const e of this._decorationService.decorations)this._renderDecoration(e);this._dimensionsChanged=!1}_renderDecoration(e){this._refreshStyle(e),this._dimensionsChanged&&this._refreshXPosition(e)}_createElement(e){var r,t;const i=document.createElement("div");i.classList.add("xterm-decoration"),i.classList.toggle("xterm-decoration-top-layer",((r=e==null?void 0:e.options)===null||r===void 0?void 0:r.layer)==="top"),i.style.width=`${Math.round((e.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,i.style.height=(e.options.height||1)*this._renderService.dimensions.css.cell.height+"px",i.style.top=(e.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height+"px",i.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;const h=(t=e.options.x)!==null&&t!==void 0?t:0;return h&&h>this._bufferService.cols&&(i.style.display="none"),this._refreshXPosition(e,i),i}_refreshStyle(e){const r=e.marker.line-this._bufferService.buffers.active.ydisp;if(r<0||r>=this._bufferService.rows)e.element&&(e.element.style.display="none",e.onRenderEmitter.fire(e.element));else{let t=this._decorationElements.get(e);t||(t=this._createElement(e),e.element=t,this._decorationElements.set(e,t),this._container.appendChild(t),e.onDispose(()=>{this._decorationElements.delete(e),t.remove()})),t.style.top=r*this._renderService.dimensions.css.cell.height+"px",t.style.display=this._altBufferIsActive?"none":"block",e.onRenderEmitter.fire(t)}}_refreshXPosition(e,r=e.element){var t;if(!r)return;const i=(t=e.options.x)!==null&&t!==void 0?t:0;(e.options.anchor||"left")==="right"?r.style.right=i?i*this._renderService.dimensions.css.cell.width+"px":"":r.style.left=i?i*this._renderService.dimensions.css.cell.width+"px":""}_removeDecoration(e){var r;(r=this._decorationElements.get(e))===null||r===void 0||r.remove(),this._decorationElements.delete(e),e.dispose()}};s.BufferDecorationRenderer=v=l([f(1,b.IBufferService),f(2,b.IDecorationService),f(3,c.IRenderService)],v)},5871:(D,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ColorZoneStore=void 0,s.ColorZoneStore=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(o){if(o.options.overviewRulerOptions){for(const l of this._zones)if(l.color===o.options.overviewRulerOptions.color&&l.position===o.options.overviewRulerOptions.position){if(this._lineIntersectsZone(l,o.marker.line))return;if(this._lineAdjacentToZone(l,o.marker.line,o.options.overviewRulerOptions.position))return void this._addLineToZone(l,o.marker.line)}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=o.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=o.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=o.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=o.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:o.options.overviewRulerOptions.color,position:o.options.overviewRulerOptions.position,startBufferLine:o.marker.line,endBufferLine:o.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(o){this._linePadding=o}_lineIntersectsZone(o,l){return l>=o.startBufferLine&&l<=o.endBufferLine}_lineAdjacentToZone(o,l,f){return l>=o.startBufferLine-this._linePadding[f||"full"]&&l<=o.endBufferLine+this._linePadding[f||"full"]}_addLineToZone(o,l){o.startBufferLine=Math.min(o.startBufferLine,l),o.endBufferLine=Math.max(o.endBufferLine,l)}}},5744:function(D,s,o){var l=this&&this.__decorate||function(h,d,m,C){var u,S=arguments.length,k=S<3?d:C===null?C=Object.getOwnPropertyDescriptor(d,m):C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(h,d,m,C);else for(var B=h.length-1;B>=0;B--)(u=h[B])&&(k=(S<3?u(k):S>3?u(d,m,k):u(d,m))||k);return S>3&&k&&Object.defineProperty(d,m,k),k},f=this&&this.__param||function(h,d){return function(m,C){d(m,C,h)}};Object.defineProperty(s,"__esModule",{value:!0}),s.OverviewRulerRenderer=void 0;const a=o(5871),c=o(3656),p=o(4725),b=o(844),v=o(2585),e={full:0,left:0,center:0,right:0},r={full:0,left:0,center:0,right:0},t={full:0,left:0,center:0,right:0};let i=s.OverviewRulerRenderer=class extends b.Disposable{get _width(){return this._optionsService.options.overviewRulerWidth||0}constructor(h,d,m,C,u,S,k){var B;super(),this._viewportElement=h,this._screenElement=d,this._bufferService=m,this._decorationService=C,this._renderService=u,this._optionsService=S,this._coreBrowseService=k,this._colorZoneStore=new a.ColorZoneStore,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=document.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),(B=this._viewportElement.parentElement)===null||B===void 0||B.insertBefore(this._canvas,this._viewportElement);const R=this._canvas.getContext("2d");if(!R)throw new Error("Ctx cannot be null");this._ctx=R,this._registerDecorationListeners(),this._registerBufferChangeListeners(),this._registerDimensionChangeListeners(),this.register((0,b.toDisposable)(()=>{var O;(O=this._canvas)===null||O===void 0||O.remove()}))}_registerDecorationListeners(){this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh(void 0,!0))),this.register(this._decorationService.onDecorationRemoved(()=>this._queueRefresh(void 0,!0)))}_registerBufferChangeListeners(){this.register(this._renderService.onRenderedViewportChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"})),this.register(this._bufferService.onScroll(()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())}))}_registerDimensionChangeListeners(){this.register(this._renderService.onRender(()=>{this._containerHeight&&this._containerHeight===this._screenElement.clientHeight||(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)})),this.register(this._optionsService.onSpecificOptionChange("overviewRulerWidth",()=>this._queueRefresh(!0))),this.register((0,c.addDisposableDomListener)(this._coreBrowseService.window,"resize",()=>this._queueRefresh(!0))),this._queueRefresh(!0)}_refreshDrawConstants(){const h=Math.floor(this._canvas.width/3),d=Math.ceil(this._canvas.width/3);r.full=this._canvas.width,r.left=h,r.center=d,r.right=h,this._refreshDrawHeightConstants(),t.full=0,t.left=0,t.center=r.left,t.right=r.left+r.center}_refreshDrawHeightConstants(){e.full=Math.round(2*this._coreBrowseService.dpr);const h=this._canvas.height/this._bufferService.buffer.lines.length,d=Math.round(Math.max(Math.min(h,12),6)*this._coreBrowseService.dpr);e.left=d,e.center=d,e.right=d}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*e.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*e.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*e.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*e.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowseService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowseService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(const d of this._decorationService.decorations)this._colorZoneStore.addDecoration(d);this._ctx.lineWidth=1;const h=this._colorZoneStore.zones;for(const d of h)d.position!=="full"&&this._renderColorZone(d);for(const d of h)d.position==="full"&&this._renderColorZone(d);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderColorZone(h){this._ctx.fillStyle=h.color,this._ctx.fillRect(t[h.position||"full"],Math.round((this._canvas.height-1)*(h.startBufferLine/this._bufferService.buffers.active.lines.length)-e[h.position||"full"]/2),r[h.position||"full"],Math.round((this._canvas.height-1)*((h.endBufferLine-h.startBufferLine)/this._bufferService.buffers.active.lines.length)+e[h.position||"full"]))}_queueRefresh(h,d){this._shouldUpdateDimensions=h||this._shouldUpdateDimensions,this._shouldUpdateAnchor=d||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowseService.window.requestAnimationFrame(()=>{this._refreshDecorations(),this._animationFrame=void 0}))}};s.OverviewRulerRenderer=i=l([f(2,v.IBufferService),f(3,v.IDecorationService),f(4,p.IRenderService),f(5,v.IOptionsService),f(6,p.ICoreBrowserService)],i)},2950:function(D,s,o){var l=this&&this.__decorate||function(v,e,r,t){var i,h=arguments.length,d=h<3?e:t===null?t=Object.getOwnPropertyDescriptor(e,r):t;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(v,e,r,t);else for(var m=v.length-1;m>=0;m--)(i=v[m])&&(d=(h<3?i(d):h>3?i(e,r,d):i(e,r))||d);return h>3&&d&&Object.defineProperty(e,r,d),d},f=this&&this.__param||function(v,e){return function(r,t){e(r,t,v)}};Object.defineProperty(s,"__esModule",{value:!0}),s.CompositionHelper=void 0;const a=o(4725),c=o(2585),p=o(2584);let b=s.CompositionHelper=class{get isComposing(){return this._isComposing}constructor(v,e,r,t,i,h){this._textarea=v,this._compositionView=e,this._bufferService=r,this._optionsService=t,this._coreService=i,this._renderService=h,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(v){this._compositionView.textContent=v.data,this.updateCompositionElements(),setTimeout(()=>{this._compositionPosition.end=this._textarea.value.length},0)}compositionend(){this._finalizeComposition(!0)}keydown(v){if(this._isComposing||this._isSendingComposition){if(v.keyCode===229||v.keyCode===16||v.keyCode===17||v.keyCode===18)return!1;this._finalizeComposition(!1)}return v.keyCode!==229||(this._handleAnyTextareaChanges(),!1)}_finalizeComposition(v){if(this._compositionView.classList.remove("active"),this._isComposing=!1,v){const e={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(()=>{if(this._isSendingComposition){let r;this._isSendingComposition=!1,e.start+=this._dataAlreadySent.length,r=this._isComposing?this._textarea.value.substring(e.start,e.end):this._textarea.value.substring(e.start),r.length>0&&this._coreService.triggerDataEvent(r,!0)}},0)}else{this._isSendingComposition=!1;const e=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(e,!0)}}_handleAnyTextareaChanges(){const v=this._textarea.value;setTimeout(()=>{if(!this._isComposing){const e=this._textarea.value,r=e.replace(v,"");this._dataAlreadySent=r,e.length>v.length?this._coreService.triggerDataEvent(r,!0):e.length<v.length?this._coreService.triggerDataEvent(`${p.C0.DEL}`,!0):e.length===v.length&&e!==v&&this._coreService.triggerDataEvent(e,!0)}},0)}updateCompositionElements(v){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){const e=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),r=this._renderService.dimensions.css.cell.height,t=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,i=e*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=i+"px",this._compositionView.style.top=t+"px",this._compositionView.style.height=r+"px",this._compositionView.style.lineHeight=r+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";const h=this._compositionView.getBoundingClientRect();this._textarea.style.left=i+"px",this._textarea.style.top=t+"px",this._textarea.style.width=Math.max(h.width,1)+"px",this._textarea.style.height=Math.max(h.height,1)+"px",this._textarea.style.lineHeight=h.height+"px"}v||setTimeout(()=>this.updateCompositionElements(!0),0)}}};s.CompositionHelper=b=l([f(2,c.IBufferService),f(3,c.IOptionsService),f(4,c.ICoreService),f(5,a.IRenderService)],b)},9806:(D,s)=>{function o(l,f,a){const c=a.getBoundingClientRect(),p=l.getComputedStyle(a),b=parseInt(p.getPropertyValue("padding-left")),v=parseInt(p.getPropertyValue("padding-top"));return[f.clientX-c.left-b,f.clientY-c.top-v]}Object.defineProperty(s,"__esModule",{value:!0}),s.getCoords=s.getCoordsRelativeToElement=void 0,s.getCoordsRelativeToElement=o,s.getCoords=function(l,f,a,c,p,b,v,e,r){if(!b)return;const t=o(l,f,a);return t?(t[0]=Math.ceil((t[0]+(r?v/2:0))/v),t[1]=Math.ceil(t[1]/e),t[0]=Math.min(Math.max(t[0],1),c+(r?1:0)),t[1]=Math.min(Math.max(t[1],1),p),t):void 0}},9504:(D,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.moveToCellSequence=void 0;const l=o(2584);function f(e,r,t,i){const h=e-a(e,t),d=r-a(r,t),m=Math.abs(h-d)-function(C,u,S){let k=0;const B=C-a(C,S),R=u-a(u,S);for(let O=0;O<Math.abs(B-R);O++){const F=c(C,u)==="A"?-1:1,$=S.buffer.lines.get(B+F*O);$!=null&&$.isWrapped&&k++}return k}(e,r,t);return v(m,b(c(e,r),i))}function a(e,r){let t=0,i=r.buffer.lines.get(e),h=i==null?void 0:i.isWrapped;for(;h&&e>=0&&e<r.rows;)t++,i=r.buffer.lines.get(--e),h=i==null?void 0:i.isWrapped;return t}function c(e,r){return e>r?"A":"B"}function p(e,r,t,i,h,d){let m=e,C=r,u="";for(;m!==t||C!==i;)m+=h?1:-1,h&&m>d.cols-1?(u+=d.buffer.translateBufferLineToString(C,!1,e,m),m=0,e=0,C++):!h&&m<0&&(u+=d.buffer.translateBufferLineToString(C,!1,0,e+1),m=d.cols-1,e=m,C--);return u+d.buffer.translateBufferLineToString(C,!1,e,m)}function b(e,r){const t=r?"O":"[";return l.C0.ESC+t+e}function v(e,r){e=Math.floor(e);let t="";for(let i=0;i<e;i++)t+=r;return t}s.moveToCellSequence=function(e,r,t,i){const h=t.buffer.x,d=t.buffer.y;if(!t.buffer.hasScrollback)return function(u,S,k,B,R,O){return f(S,B,R,O).length===0?"":v(p(u,S,u,S-a(S,R),!1,R).length,b("D",O))}(h,d,0,r,t,i)+f(d,r,t,i)+function(u,S,k,B,R,O){let F;F=f(S,B,R,O).length>0?B-a(B,R):S;const $=B,V=function(K,w,T,M,P,W){let q;return q=f(T,M,P,W).length>0?M-a(M,P):w,K<T&&q<=M||K>=T&&q<M?"C":"D"}(u,S,k,B,R,O);return v(p(u,F,k,$,V==="C",R).length,b(V,O))}(h,d,e,r,t,i);let m;if(d===r)return m=h>e?"D":"C",v(Math.abs(h-e),b(m,i));m=d>r?"D":"C";const C=Math.abs(d-r);return v(function(u,S){return S.cols-u}(d>r?e:h,t)+(C-1)*t.cols+1+((d>r?h:e)-1),b(m,i))}},1296:function(D,s,o){var l=this&&this.__decorate||function(R,O,F,$){var V,K=arguments.length,w=K<3?O:$===null?$=Object.getOwnPropertyDescriptor(O,F):$;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(R,O,F,$);else for(var T=R.length-1;T>=0;T--)(V=R[T])&&(w=(K<3?V(w):K>3?V(O,F,w):V(O,F))||w);return K>3&&w&&Object.defineProperty(O,F,w),w},f=this&&this.__param||function(R,O){return function(F,$){O(F,$,R)}};Object.defineProperty(s,"__esModule",{value:!0}),s.DomRenderer=void 0;const a=o(3787),c=o(2550),p=o(2223),b=o(6171),v=o(4725),e=o(8055),r=o(8460),t=o(844),i=o(2585),h="xterm-dom-renderer-owner-",d="xterm-rows",m="xterm-fg-",C="xterm-bg-",u="xterm-focus",S="xterm-selection";let k=1,B=s.DomRenderer=class extends t.Disposable{constructor(R,O,F,$,V,K,w,T,M,P){super(),this._element=R,this._screenElement=O,this._viewportElement=F,this._linkifier2=$,this._charSizeService=K,this._optionsService=w,this._bufferService=T,this._coreBrowserService=M,this._themeService=P,this._terminalClass=k++,this._rowElements=[],this.onRequestRedraw=this.register(new r.EventEmitter).event,this._rowContainer=document.createElement("div"),this._rowContainer.classList.add(d),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=document.createElement("div"),this._selectionContainer.classList.add(S),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=(0,b.createRenderDimensions)(),this._updateDimensions(),this.register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._themeService.onChangeColors(W=>this._injectCss(W))),this._injectCss(this._themeService.colors),this._rowFactory=V.createInstance(a.DomRendererRowFactory,document),this._element.classList.add(h+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this.register(this._linkifier2.onShowLinkUnderline(W=>this._handleLinkHover(W))),this.register(this._linkifier2.onHideLinkUnderline(W=>this._handleLinkLeave(W))),this.register((0,t.toDisposable)(()=>{this._element.classList.remove(h+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()})),this._widthCache=new c.WidthCache(document),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){const R=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*R,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*R),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/R),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/R),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(const F of this._rowElements)F.style.width=`${this.dimensions.css.canvas.width}px`,F.style.height=`${this.dimensions.css.cell.height}px`,F.style.lineHeight=`${this.dimensions.css.cell.height}px`,F.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));const O=`${this._terminalSelector} .${d} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=O,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(R){this._themeStyleElement||(this._themeStyleElement=document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let O=`${this._terminalSelector} .${d} { color: ${R.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;O+=`${this._terminalSelector} .${d} .xterm-dim { color: ${e.color.multiplyOpacity(R.foreground,.5).css};}`,O+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`,O+="@keyframes blink_box_shadow_"+this._terminalClass+" { 50% {  border-bottom-style: hidden; }}",O+="@keyframes blink_block_"+this._terminalClass+` { 0% {  background-color: ${R.cursor.css};  color: ${R.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${R.cursor.css}; }}`,O+=`${this._terminalSelector} .${d}.${u} .xterm-cursor.xterm-cursor-blink:not(.xterm-cursor-block) { animation: blink_box_shadow_`+this._terminalClass+` 1s step-end infinite;}${this._terminalSelector} .${d}.${u} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: blink_block_`+this._terminalClass+` 1s step-end infinite;}${this._terminalSelector} .${d} .xterm-cursor.xterm-cursor-block { background-color: ${R.cursor.css}; color: ${R.cursorAccent.css};}${this._terminalSelector} .${d} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${R.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${d} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${R.cursor.css} inset;}${this._terminalSelector} .${d} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${R.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,O+=`${this._terminalSelector} .${S} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${S} div { position: absolute; background-color: ${R.selectionBackgroundOpaque.css};}${this._terminalSelector} .${S} div { position: absolute; background-color: ${R.selectionInactiveBackgroundOpaque.css};}`;for(const[F,$]of R.ansi.entries())O+=`${this._terminalSelector} .${m}${F} { color: ${$.css}; }${this._terminalSelector} .${m}${F}.xterm-dim { color: ${e.color.multiplyOpacity($,.5).css}; }${this._terminalSelector} .${C}${F} { background-color: ${$.css}; }`;O+=`${this._terminalSelector} .${m}${p.INVERTED_DEFAULT_COLOR} { color: ${e.color.opaque(R.background).css}; }${this._terminalSelector} .${m}${p.INVERTED_DEFAULT_COLOR}.xterm-dim { color: ${e.color.multiplyOpacity(e.color.opaque(R.background),.5).css}; }${this._terminalSelector} .${C}${p.INVERTED_DEFAULT_COLOR} { background-color: ${R.foreground.css}; }`,this._themeStyleElement.textContent=O}_setDefaultSpacing(){const R=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${R}px`,this._rowFactory.defaultSpacing=R}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(R,O){for(let F=this._rowElements.length;F<=O;F++){const $=document.createElement("div");this._rowContainer.appendChild($),this._rowElements.push($)}for(;this._rowElements.length>O;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(R,O){this._refreshRowElements(R,O),this._updateDimensions()}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(u)}handleFocus(){this._rowContainer.classList.add(u),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(R,O,F){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(R,O,F),this.renderRows(0,this._bufferService.rows-1),!R||!O)return;const $=R[1]-this._bufferService.buffer.ydisp,V=O[1]-this._bufferService.buffer.ydisp,K=Math.max($,0),w=Math.min(V,this._bufferService.rows-1);if(K>=this._bufferService.rows||w<0)return;const T=document.createDocumentFragment();if(F){const M=R[0]>O[0];T.appendChild(this._createSelectionElement(K,M?O[0]:R[0],M?R[0]:O[0],w-K+1))}else{const M=$===K?R[0]:0,P=K===V?O[0]:this._bufferService.cols;T.appendChild(this._createSelectionElement(K,M,P));const W=w-K-1;if(T.appendChild(this._createSelectionElement(K+1,0,this._bufferService.cols,W)),K!==w){const q=V===w?O[0]:this._bufferService.cols;T.appendChild(this._createSelectionElement(w,0,q))}}this._selectionContainer.appendChild(T)}_createSelectionElement(R,O,F,$=1){const V=document.createElement("div");return V.style.height=$*this.dimensions.css.cell.height+"px",V.style.top=R*this.dimensions.css.cell.height+"px",V.style.left=O*this.dimensions.css.cell.width+"px",V.style.width=this.dimensions.css.cell.width*(F-O)+"px",V}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(const R of this._rowElements)R.replaceChildren()}renderRows(R,O){const F=this._bufferService.buffer,$=F.ybase+F.y,V=Math.min(F.x,this._bufferService.cols-1),K=this._optionsService.rawOptions.cursorBlink,w=this._optionsService.rawOptions.cursorStyle,T=this._optionsService.rawOptions.cursorInactiveStyle;for(let M=R;M<=O;M++){const P=M+F.ydisp,W=this._rowElements[M],q=F.lines.get(P);if(!W||!q)break;W.replaceChildren(...this._rowFactory.createRow(q,P,P===$,w,T,V,K,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${h}${this._terminalClass}`}_handleLinkHover(R){this._setCellUnderline(R.x1,R.x2,R.y1,R.y2,R.cols,!0)}_handleLinkLeave(R){this._setCellUnderline(R.x1,R.x2,R.y1,R.y2,R.cols,!1)}_setCellUnderline(R,O,F,$,V,K){F<0&&(R=0),$<0&&(O=0);const w=this._bufferService.rows-1;F=Math.max(Math.min(F,w),0),$=Math.max(Math.min($,w),0),V=Math.min(V,this._bufferService.cols);const T=this._bufferService.buffer,M=T.ybase+T.y,P=Math.min(T.x,V-1),W=this._optionsService.rawOptions.cursorBlink,q=this._optionsService.rawOptions.cursorStyle,Z=this._optionsService.rawOptions.cursorInactiveStyle;for(let Y=F;Y<=$;++Y){const le=Y+T.ydisp,E=this._rowElements[Y],I=T.lines.get(le);if(!E||!I)break;E.replaceChildren(...this._rowFactory.createRow(I,le,le===M,q,Z,P,W,this.dimensions.css.cell.width,this._widthCache,K?Y===F?R:0:-1,K?(Y===$?O:V)-1:-1))}}};s.DomRenderer=B=l([f(4,i.IInstantiationService),f(5,v.ICharSizeService),f(6,i.IOptionsService),f(7,i.IBufferService),f(8,v.ICoreBrowserService),f(9,v.IThemeService)],B)},3787:function(D,s,o){var l=this&&this.__decorate||function(m,C,u,S){var k,B=arguments.length,R=B<3?C:S===null?S=Object.getOwnPropertyDescriptor(C,u):S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")R=Reflect.decorate(m,C,u,S);else for(var O=m.length-1;O>=0;O--)(k=m[O])&&(R=(B<3?k(R):B>3?k(C,u,R):k(C,u))||R);return B>3&&R&&Object.defineProperty(C,u,R),R},f=this&&this.__param||function(m,C){return function(u,S){C(u,S,m)}};Object.defineProperty(s,"__esModule",{value:!0}),s.DomRendererRowFactory=void 0;const a=o(2223),c=o(643),p=o(511),b=o(2585),v=o(8055),e=o(4725),r=o(4269),t=o(6171),i=o(3734);let h=s.DomRendererRowFactory=class{constructor(m,C,u,S,k,B,R){this._document=m,this._characterJoinerService=C,this._optionsService=u,this._coreBrowserService=S,this._coreService=k,this._decorationService=B,this._themeService=R,this._workCell=new p.CellData,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(m,C,u){this._selectionStart=m,this._selectionEnd=C,this._columnSelectMode=u}createRow(m,C,u,S,k,B,R,O,F,$,V){const K=[],w=this._characterJoinerService.getJoinedCharacters(C),T=this._themeService.colors;let M,P=m.getNoBgTrimmedLength();u&&P<B+1&&(P=B+1);let W=0,q="",Z=0,Y=0,le=0,E=!1,I=0,N=!1,z=0;const ee=[],J=$!==-1&&V!==-1;for(let ne=0;ne<P;ne++){m.loadCell(ne,this._workCell);let ue=this._workCell.getWidth();if(ue===0)continue;let we=!1,Ne=ne,se=this._workCell;if(w.length>0&&ne===w[0][0]){we=!0;const Re=w.shift();se=new r.JoinedCellData(this._workCell,m.translateToString(!0,Re[0],Re[1]),Re[1]-Re[0]),Ne=Re[1]-1,ue=se.getWidth()}const Be=this._isCellInSelection(ne,C),He=u&&ne===B,Ie=J&&ne>=$&&ne<=V;let ze=!1;this._decorationService.forEachDecorationAtCell(ne,C,void 0,Re=>{ze=!0});let ot=se.getChars()||c.WHITESPACE_CELL_CHAR;if(ot===" "&&(se.isUnderline()||se.isOverline())&&(ot=" "),z=ue*O-F.get(ot,se.isBold(),se.isItalic()),M){if(W&&(Be&&N||!Be&&!N&&se.bg===Z)&&(Be&&N&&T.selectionForeground||se.fg===Y)&&se.extended.ext===le&&Ie===E&&z===I&&!He&&!we&&!ze){q+=ot,W++;continue}W&&(M.textContent=q),M=this._document.createElement("span"),W=0,q=""}else M=this._document.createElement("span");if(Z=se.bg,Y=se.fg,le=se.extended.ext,E=Ie,I=z,N=Be,we&&B>=ne&&B<=Ne&&(B=ne),!this._coreService.isCursorHidden&&He){if(ee.push("xterm-cursor"),this._coreBrowserService.isFocused)R&&ee.push("xterm-cursor-blink"),ee.push(S==="bar"?"xterm-cursor-bar":S==="underline"?"xterm-cursor-underline":"xterm-cursor-block");else if(k)switch(k){case"outline":ee.push("xterm-cursor-outline");break;case"block":ee.push("xterm-cursor-block");break;case"bar":ee.push("xterm-cursor-bar");break;case"underline":ee.push("xterm-cursor-underline")}}if(se.isBold()&&ee.push("xterm-bold"),se.isItalic()&&ee.push("xterm-italic"),se.isDim()&&ee.push("xterm-dim"),q=se.isInvisible()?c.WHITESPACE_CELL_CHAR:se.getChars()||c.WHITESPACE_CELL_CHAR,se.isUnderline()&&(ee.push(`xterm-underline-${se.extended.underlineStyle}`),q===" "&&(q=" "),!se.isUnderlineColorDefault()))if(se.isUnderlineColorRGB())M.style.textDecorationColor=`rgb(${i.AttributeData.toColorRGB(se.getUnderlineColor()).join(",")})`;else{let Re=se.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&se.isBold()&&Re<8&&(Re+=8),M.style.textDecorationColor=T.ansi[Re].css}se.isOverline()&&(ee.push("xterm-overline"),q===" "&&(q=" ")),se.isStrikethrough()&&ee.push("xterm-strikethrough"),Ie&&(M.style.textDecoration="underline");let Me=se.getFgColor(),We=se.getFgColorMode(),Pe=se.getBgColor(),at=se.getBgColorMode();const gt=!!se.isInverse();if(gt){const Re=Me;Me=Pe,Pe=Re;const ji=We;We=at,at=ji}let Ue,xt,Fe,tt=!1;switch(this._decorationService.forEachDecorationAtCell(ne,C,void 0,Re=>{Re.options.layer!=="top"&&tt||(Re.backgroundColorRGB&&(at=50331648,Pe=Re.backgroundColorRGB.rgba>>8&16777215,Ue=Re.backgroundColorRGB),Re.foregroundColorRGB&&(We=50331648,Me=Re.foregroundColorRGB.rgba>>8&16777215,xt=Re.foregroundColorRGB),tt=Re.options.layer==="top")}),!tt&&Be&&(Ue=this._coreBrowserService.isFocused?T.selectionBackgroundOpaque:T.selectionInactiveBackgroundOpaque,Pe=Ue.rgba>>8&16777215,at=50331648,tt=!0,T.selectionForeground&&(We=50331648,Me=T.selectionForeground.rgba>>8&16777215,xt=T.selectionForeground)),tt&&ee.push("xterm-decoration-top"),at){case 16777216:case 33554432:Fe=T.ansi[Pe],ee.push(`xterm-bg-${Pe}`);break;case 50331648:Fe=v.rgba.toColor(Pe>>16,Pe>>8&255,255&Pe),this._addStyle(M,`background-color:#${d((Pe>>>0).toString(16),"0",6)}`);break;default:gt?(Fe=T.foreground,ee.push(`xterm-bg-${a.INVERTED_DEFAULT_COLOR}`)):Fe=T.background}switch(Ue||se.isDim()&&(Ue=v.color.multiplyOpacity(Fe,.5)),We){case 16777216:case 33554432:se.isBold()&&Me<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(Me+=8),this._applyMinimumContrast(M,Fe,T.ansi[Me],se,Ue,void 0)||ee.push(`xterm-fg-${Me}`);break;case 50331648:const Re=v.rgba.toColor(Me>>16&255,Me>>8&255,255&Me);this._applyMinimumContrast(M,Fe,Re,se,Ue,xt)||this._addStyle(M,`color:#${d(Me.toString(16),"0",6)}`);break;default:this._applyMinimumContrast(M,Fe,T.foreground,se,Ue,void 0)||gt&&ee.push(`xterm-fg-${a.INVERTED_DEFAULT_COLOR}`)}ee.length&&(M.className=ee.join(" "),ee.length=0),He||we||ze?M.textContent=q:W++,z!==this.defaultSpacing&&(M.style.letterSpacing=`${z}px`),K.push(M),ne=Ne}return M&&W&&(M.textContent=q),K}_applyMinimumContrast(m,C,u,S,k,B){if(this._optionsService.rawOptions.minimumContrastRatio===1||(0,t.excludeFromContrastRatioDemands)(S.getCode()))return!1;const R=this._getContrastCache(S);let O;if(k||B||(O=R.getColor(C.rgba,u.rgba)),O===void 0){const F=this._optionsService.rawOptions.minimumContrastRatio/(S.isDim()?2:1);O=v.color.ensureContrastRatio(k||C,B||u,F),R.setColor((k||C).rgba,(B||u).rgba,O??null)}return!!O&&(this._addStyle(m,`color:${O.css}`),!0)}_getContrastCache(m){return m.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(m,C){m.setAttribute("style",`${m.getAttribute("style")||""}${C};`)}_isCellInSelection(m,C){const u=this._selectionStart,S=this._selectionEnd;return!(!u||!S)&&(this._columnSelectMode?u[0]<=S[0]?m>=u[0]&&C>=u[1]&&m<S[0]&&C<=S[1]:m<u[0]&&C>=u[1]&&m>=S[0]&&C<=S[1]:C>u[1]&&C<S[1]||u[1]===S[1]&&C===u[1]&&m>=u[0]&&m<S[0]||u[1]<S[1]&&C===S[1]&&m<S[0]||u[1]<S[1]&&C===u[1]&&m>=u[0])}};function d(m,C,u){for(;m.length<u;)m=C+m;return m}s.DomRendererRowFactory=h=l([f(1,e.ICharacterJoinerService),f(2,b.IOptionsService),f(3,e.ICoreBrowserService),f(4,b.ICoreService),f(5,b.IDecorationService),f(6,e.IThemeService)],h)},2550:(D,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.WidthCache=void 0,s.WidthCache=class{constructor(o){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=o.createElement("div"),this._container.style.position="absolute",this._container.style.top="-50000px",this._container.style.width="50000px",this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";const l=o.createElement("span"),f=o.createElement("span");f.style.fontWeight="bold";const a=o.createElement("span");a.style.fontStyle="italic";const c=o.createElement("span");c.style.fontWeight="bold",c.style.fontStyle="italic",this._measureElements=[l,f,a,c],this._container.appendChild(l),this._container.appendChild(f),this._container.appendChild(a),this._container.appendChild(c),o.body.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(o,l,f,a){o===this._font&&l===this._fontSize&&f===this._weight&&a===this._weightBold||(this._font=o,this._fontSize=l,this._weight=f,this._weightBold=a,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${f}`,this._measureElements[1].style.fontWeight=`${a}`,this._measureElements[2].style.fontWeight=`${f}`,this._measureElements[3].style.fontWeight=`${a}`,this.clear())}get(o,l,f){let a=0;if(!l&&!f&&o.length===1&&(a=o.charCodeAt(0))<256)return this._flat[a]!==-9999?this._flat[a]:this._flat[a]=this._measure(o,0);let c=o;l&&(c+="B"),f&&(c+="I");let p=this._holey.get(c);if(p===void 0){let b=0;l&&(b|=1),f&&(b|=2),p=this._measure(o,b),this._holey.set(c,p)}return p}_measure(o,l){const f=this._measureElements[l];return f.textContent=o.repeat(32),f.offsetWidth/32}}},2223:(D,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.TEXT_BASELINE=s.DIM_OPACITY=s.INVERTED_DEFAULT_COLOR=void 0;const l=o(6114);s.INVERTED_DEFAULT_COLOR=257,s.DIM_OPACITY=.5,s.TEXT_BASELINE=l.isFirefox||l.isLegacyEdge?"bottom":"ideographic"},6171:(D,s)=>{function o(l){return 57508<=l&&l<=57558}Object.defineProperty(s,"__esModule",{value:!0}),s.createRenderDimensions=s.excludeFromContrastRatioDemands=s.isRestrictedPowerlineGlyph=s.isPowerlineGlyph=s.throwIfFalsy=void 0,s.throwIfFalsy=function(l){if(!l)throw new Error("value must not be falsy");return l},s.isPowerlineGlyph=o,s.isRestrictedPowerlineGlyph=function(l){return 57520<=l&&l<=57527},s.excludeFromContrastRatioDemands=function(l){return o(l)||function(f){return 9472<=f&&f<=9631}(l)},s.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}}},456:(D,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.SelectionModel=void 0,s.SelectionModel=class{constructor(o){this._bufferService=o,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){const o=this.selectionStart[0]+this.selectionStartLength;return o>this._bufferService.cols?o%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(o/this._bufferService.cols)-1]:[o%this._bufferService.cols,this.selectionStart[1]+Math.floor(o/this._bufferService.cols)]:[o,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){const o=this.selectionStart[0]+this.selectionStartLength;return o>this._bufferService.cols?[o%this._bufferService.cols,this.selectionStart[1]+Math.floor(o/this._bufferService.cols)]:[Math.max(o,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){const o=this.selectionStart,l=this.selectionEnd;return!(!o||!l)&&(o[1]>l[1]||o[1]===l[1]&&o[0]>l[0])}handleTrim(o){return this.selectionStart&&(this.selectionStart[1]-=o),this.selectionEnd&&(this.selectionEnd[1]-=o),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}}},428:function(D,s,o){var l=this&&this.__decorate||function(e,r,t,i){var h,d=arguments.length,m=d<3?r:i===null?i=Object.getOwnPropertyDescriptor(r,t):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")m=Reflect.decorate(e,r,t,i);else for(var C=e.length-1;C>=0;C--)(h=e[C])&&(m=(d<3?h(m):d>3?h(r,t,m):h(r,t))||m);return d>3&&m&&Object.defineProperty(r,t,m),m},f=this&&this.__param||function(e,r){return function(t,i){r(t,i,e)}};Object.defineProperty(s,"__esModule",{value:!0}),s.CharSizeService=void 0;const a=o(2585),c=o(8460),p=o(844);let b=s.CharSizeService=class extends p.Disposable{get hasValidSize(){return this.width>0&&this.height>0}constructor(e,r,t){super(),this._optionsService=t,this.width=0,this.height=0,this._onCharSizeChange=this.register(new c.EventEmitter),this.onCharSizeChange=this._onCharSizeChange.event,this._measureStrategy=new v(e,r,this._optionsService),this.register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],()=>this.measure()))}measure(){const e=this._measureStrategy.measure();e.width===this.width&&e.height===this.height||(this.width=e.width,this.height=e.height,this._onCharSizeChange.fire())}};s.CharSizeService=b=l([f(2,a.IOptionsService)],b);class v{constructor(r,t,i){this._document=r,this._parentElement=t,this._optionsService=i,this._result={width:0,height:0},this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`;const r={height:Number(this._measureElement.offsetHeight),width:Number(this._measureElement.offsetWidth)};return r.width!==0&&r.height!==0&&(this._result.width=r.width/32,this._result.height=Math.ceil(r.height)),this._result}}},4269:function(D,s,o){var l=this&&this.__decorate||function(r,t,i,h){var d,m=arguments.length,C=m<3?t:h===null?h=Object.getOwnPropertyDescriptor(t,i):h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(r,t,i,h);else for(var u=r.length-1;u>=0;u--)(d=r[u])&&(C=(m<3?d(C):m>3?d(t,i,C):d(t,i))||C);return m>3&&C&&Object.defineProperty(t,i,C),C},f=this&&this.__param||function(r,t){return function(i,h){t(i,h,r)}};Object.defineProperty(s,"__esModule",{value:!0}),s.CharacterJoinerService=s.JoinedCellData=void 0;const a=o(3734),c=o(643),p=o(511),b=o(2585);class v extends a.AttributeData{constructor(t,i,h){super(),this.content=0,this.combinedData="",this.fg=t.fg,this.bg=t.bg,this.combinedData=i,this._width=h}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(t){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}s.JoinedCellData=v;let e=s.CharacterJoinerService=class Ps{constructor(t){this._bufferService=t,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new p.CellData}register(t){const i={id:this._nextCharacterJoinerId++,handler:t};return this._characterJoiners.push(i),i.id}deregister(t){for(let i=0;i<this._characterJoiners.length;i++)if(this._characterJoiners[i].id===t)return this._characterJoiners.splice(i,1),!0;return!1}getJoinedCharacters(t){if(this._characterJoiners.length===0)return[];const i=this._bufferService.buffer.lines.get(t);if(!i||i.length===0)return[];const h=[],d=i.translateToString(!0);let m=0,C=0,u=0,S=i.getFg(0),k=i.getBg(0);for(let B=0;B<i.getTrimmedLength();B++)if(i.loadCell(B,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==S||this._workCell.bg!==k){if(B-m>1){const R=this._getJoinedRanges(d,u,C,i,m);for(let O=0;O<R.length;O++)h.push(R[O])}m=B,u=C,S=this._workCell.fg,k=this._workCell.bg}C+=this._workCell.getChars().length||c.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-m>1){const B=this._getJoinedRanges(d,u,C,i,m);for(let R=0;R<B.length;R++)h.push(B[R])}return h}_getJoinedRanges(t,i,h,d,m){const C=t.substring(i,h);let u=[];try{u=this._characterJoiners[0].handler(C)}catch(S){console.error(S)}for(let S=1;S<this._characterJoiners.length;S++)try{const k=this._characterJoiners[S].handler(C);for(let B=0;B<k.length;B++)Ps._mergeRanges(u,k[B])}catch(k){console.error(k)}return this._stringRangesToCellRanges(u,d,m),u}_stringRangesToCellRanges(t,i,h){let d=0,m=!1,C=0,u=t[d];if(u){for(let S=h;S<this._bufferService.cols;S++){const k=i.getWidth(S),B=i.getString(S).length||c.WHITESPACE_CELL_CHAR.length;if(k!==0){if(!m&&u[0]<=C&&(u[0]=S,m=!0),u[1]<=C){if(u[1]=S,u=t[++d],!u)break;u[0]<=C?(u[0]=S,m=!0):m=!1}C+=B}}u&&(u[1]=this._bufferService.cols)}}static _mergeRanges(t,i){let h=!1;for(let d=0;d<t.length;d++){const m=t[d];if(h){if(i[1]<=m[0])return t[d-1][1]=i[1],t;if(i[1]<=m[1])return t[d-1][1]=Math.max(i[1],m[1]),t.splice(d,1),t;t.splice(d,1),d--}else{if(i[1]<=m[0])return t.splice(d,0,i),t;if(i[1]<=m[1])return m[0]=Math.min(i[0],m[0]),t;i[0]<m[1]&&(m[0]=Math.min(i[0],m[0]),h=!0)}}return h?t[t.length-1][1]=i[1]:t.push(i),t}};s.CharacterJoinerService=e=l([f(0,b.IBufferService)],e)},5114:(D,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CoreBrowserService=void 0,s.CoreBrowserService=class{constructor(o,l){this._textarea=o,this.window=l,this._isFocused=!1,this._cachedIsFocused=void 0,this._textarea.addEventListener("focus",()=>this._isFocused=!0),this._textarea.addEventListener("blur",()=>this._isFocused=!1)}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask(()=>this._cachedIsFocused=void 0)),this._cachedIsFocused}}},8934:function(D,s,o){var l=this&&this.__decorate||function(b,v,e,r){var t,i=arguments.length,h=i<3?v:r===null?r=Object.getOwnPropertyDescriptor(v,e):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(b,v,e,r);else for(var d=b.length-1;d>=0;d--)(t=b[d])&&(h=(i<3?t(h):i>3?t(v,e,h):t(v,e))||h);return i>3&&h&&Object.defineProperty(v,e,h),h},f=this&&this.__param||function(b,v){return function(e,r){v(e,r,b)}};Object.defineProperty(s,"__esModule",{value:!0}),s.MouseService=void 0;const a=o(4725),c=o(9806);let p=s.MouseService=class{constructor(b,v){this._renderService=b,this._charSizeService=v}getCoords(b,v,e,r,t){return(0,c.getCoords)(window,b,v,e,r,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,t)}getMouseReportCoords(b,v){const e=(0,c.getCoordsRelativeToElement)(window,b,v);if(this._charSizeService.hasValidSize)return e[0]=Math.min(Math.max(e[0],0),this._renderService.dimensions.css.canvas.width-1),e[1]=Math.min(Math.max(e[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(e[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(e[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(e[0]),y:Math.floor(e[1])}}};s.MouseService=p=l([f(0,a.IRenderService),f(1,a.ICharSizeService)],p)},3230:function(D,s,o){var l=this&&this.__decorate||function(h,d,m,C){var u,S=arguments.length,k=S<3?d:C===null?C=Object.getOwnPropertyDescriptor(d,m):C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(h,d,m,C);else for(var B=h.length-1;B>=0;B--)(u=h[B])&&(k=(S<3?u(k):S>3?u(d,m,k):u(d,m))||k);return S>3&&k&&Object.defineProperty(d,m,k),k},f=this&&this.__param||function(h,d){return function(m,C){d(m,C,h)}};Object.defineProperty(s,"__esModule",{value:!0}),s.RenderService=void 0;const a=o(3656),c=o(6193),p=o(5596),b=o(4725),v=o(8460),e=o(844),r=o(7226),t=o(2585);let i=s.RenderService=class extends e.Disposable{get dimensions(){return this._renderer.value.dimensions}constructor(h,d,m,C,u,S,k,B){if(super(),this._rowCount=h,this._charSizeService=C,this._renderer=this.register(new e.MutableDisposable),this._pausedResizeTask=new r.DebouncedIdleTask,this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this.register(new v.EventEmitter),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this.register(new v.EventEmitter),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this.register(new v.EventEmitter),this.onRender=this._onRender.event,this._onRefreshRequest=this.register(new v.EventEmitter),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new c.RenderDebouncer(k.window,(R,O)=>this._renderRows(R,O)),this.register(this._renderDebouncer),this._screenDprMonitor=new p.ScreenDprMonitor(k.window),this._screenDprMonitor.setListener(()=>this.handleDevicePixelRatioChange()),this.register(this._screenDprMonitor),this.register(S.onResize(()=>this._fullRefresh())),this.register(S.buffers.onBufferActivate(()=>{var R;return(R=this._renderer.value)===null||R===void 0?void 0:R.clear()})),this.register(m.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._charSizeService.onCharSizeChange(()=>this.handleCharSizeChanged())),this.register(u.onDecorationRegistered(()=>this._fullRefresh())),this.register(u.onDecorationRemoved(()=>this._fullRefresh())),this.register(m.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio"],()=>{this.clear(),this.handleResize(S.cols,S.rows),this._fullRefresh()})),this.register(m.onMultipleOptionChange(["cursorBlink","cursorStyle"],()=>this.refreshRows(S.buffer.y,S.buffer.y,!0))),this.register((0,a.addDisposableDomListener)(k.window,"resize",()=>this.handleDevicePixelRatioChange())),this.register(B.onChangeColors(()=>this._fullRefresh())),"IntersectionObserver"in k.window){const R=new k.window.IntersectionObserver(O=>this._handleIntersectionChange(O[O.length-1]),{threshold:0});R.observe(d),this.register({dispose:()=>R.disconnect()})}}_handleIntersectionChange(h){this._isPaused=h.isIntersecting===void 0?h.intersectionRatio===0:!h.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(h,d,m=!1){this._isPaused?this._needsFullRefresh=!0:(m||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(h,d,this._rowCount))}_renderRows(h,d){this._renderer.value&&(h=Math.min(h,this._rowCount-1),d=Math.min(d,this._rowCount-1),this._renderer.value.renderRows(h,d),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:h,end:d}),this._onRender.fire({start:h,end:d}),this._isNextRenderRedrawOnly=!0)}resize(h,d){this._rowCount=d,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(h){this._renderer.value=h,this._renderer.value.onRequestRedraw(d=>this.refreshRows(d.start,d.end,!0)),this._needsSelectionRefresh=!0,this._fullRefresh()}addRefreshCallback(h){return this._renderDebouncer.addRefreshCallback(h)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){var h,d;this._renderer.value&&((d=(h=this._renderer.value).clearTextureAtlas)===null||d===void 0||d.call(h),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(h,d){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set(()=>this._renderer.value.handleResize(h,d)):this._renderer.value.handleResize(h,d),this._fullRefresh())}handleCharSizeChanged(){var h;(h=this._renderer.value)===null||h===void 0||h.handleCharSizeChanged()}handleBlur(){var h;(h=this._renderer.value)===null||h===void 0||h.handleBlur()}handleFocus(){var h;(h=this._renderer.value)===null||h===void 0||h.handleFocus()}handleSelectionChanged(h,d,m){var C;this._selectionState.start=h,this._selectionState.end=d,this._selectionState.columnSelectMode=m,(C=this._renderer.value)===null||C===void 0||C.handleSelectionChanged(h,d,m)}handleCursorMove(){var h;(h=this._renderer.value)===null||h===void 0||h.handleCursorMove()}clear(){var h;(h=this._renderer.value)===null||h===void 0||h.clear()}};s.RenderService=i=l([f(2,t.IOptionsService),f(3,b.ICharSizeService),f(4,t.IDecorationService),f(5,t.IBufferService),f(6,b.ICoreBrowserService),f(7,b.IThemeService)],i)},9312:function(D,s,o){var l=this&&this.__decorate||function(u,S,k,B){var R,O=arguments.length,F=O<3?S:B===null?B=Object.getOwnPropertyDescriptor(S,k):B;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")F=Reflect.decorate(u,S,k,B);else for(var $=u.length-1;$>=0;$--)(R=u[$])&&(F=(O<3?R(F):O>3?R(S,k,F):R(S,k))||F);return O>3&&F&&Object.defineProperty(S,k,F),F},f=this&&this.__param||function(u,S){return function(k,B){S(k,B,u)}};Object.defineProperty(s,"__esModule",{value:!0}),s.SelectionService=void 0;const a=o(9806),c=o(9504),p=o(456),b=o(4725),v=o(8460),e=o(844),r=o(6114),t=o(4841),i=o(511),h=o(2585),d=" ",m=new RegExp(d,"g");let C=s.SelectionService=class extends e.Disposable{constructor(u,S,k,B,R,O,F,$,V){super(),this._element=u,this._screenElement=S,this._linkifier=k,this._bufferService=B,this._coreService=R,this._mouseService=O,this._optionsService=F,this._renderService=$,this._coreBrowserService=V,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new i.CellData,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this.register(new v.EventEmitter),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this.register(new v.EventEmitter),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this.register(new v.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this.register(new v.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=K=>this._handleMouseMove(K),this._mouseUpListener=K=>this._handleMouseUp(K),this._coreService.onUserInput(()=>{this.hasSelection&&this.clearSelection()}),this._trimListener=this._bufferService.buffer.lines.onTrim(K=>this._handleTrim(K)),this.register(this._bufferService.buffers.onBufferActivate(K=>this._handleBufferActivate(K))),this.enable(),this._model=new p.SelectionModel(this._bufferService),this._activeSelectionMode=0,this.register((0,e.toDisposable)(()=>{this._removeMouseDownListeners()}))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){const u=this._model.finalSelectionStart,S=this._model.finalSelectionEnd;return!(!u||!S||u[0]===S[0]&&u[1]===S[1])}get selectionText(){const u=this._model.finalSelectionStart,S=this._model.finalSelectionEnd;if(!u||!S)return"";const k=this._bufferService.buffer,B=[];if(this._activeSelectionMode===3){if(u[0]===S[0])return"";const R=u[0]<S[0]?u[0]:S[0],O=u[0]<S[0]?S[0]:u[0];for(let F=u[1];F<=S[1];F++){const $=k.translateBufferLineToString(F,!0,R,O);B.push($)}}else{const R=u[1]===S[1]?S[0]:void 0;B.push(k.translateBufferLineToString(u[1],!0,u[0],R));for(let O=u[1]+1;O<=S[1]-1;O++){const F=k.lines.get(O),$=k.translateBufferLineToString(O,!0);F!=null&&F.isWrapped?B[B.length-1]+=$:B.push($)}if(u[1]!==S[1]){const O=k.lines.get(S[1]),F=k.translateBufferLineToString(S[1],!0,0,S[0]);O&&O.isWrapped?B[B.length-1]+=F:B.push(F)}}return B.map(R=>R.replace(m," ")).join(r.isWindows?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(u){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._refresh())),r.isLinux&&u&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(u){const S=this._getMouseBufferCoords(u),k=this._model.finalSelectionStart,B=this._model.finalSelectionEnd;return!!(k&&B&&S)&&this._areCoordsInSelection(S,k,B)}isCellInSelection(u,S){const k=this._model.finalSelectionStart,B=this._model.finalSelectionEnd;return!(!k||!B)&&this._areCoordsInSelection([u,S],k,B)}_areCoordsInSelection(u,S,k){return u[1]>S[1]&&u[1]<k[1]||S[1]===k[1]&&u[1]===S[1]&&u[0]>=S[0]&&u[0]<k[0]||S[1]<k[1]&&u[1]===k[1]&&u[0]<k[0]||S[1]<k[1]&&u[1]===S[1]&&u[0]>=S[0]}_selectWordAtCursor(u,S){var k,B;const R=(B=(k=this._linkifier.currentLink)===null||k===void 0?void 0:k.link)===null||B===void 0?void 0:B.range;if(R)return this._model.selectionStart=[R.start.x-1,R.start.y-1],this._model.selectionStartLength=(0,t.getRangeLength)(R,this._bufferService.cols),this._model.selectionEnd=void 0,!0;const O=this._getMouseBufferCoords(u);return!!O&&(this._selectWordAt(O,S),this._model.selectionEnd=void 0,!0)}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(u,S){this._model.clearSelection(),u=Math.max(u,0),S=Math.min(S,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,u],this._model.selectionEnd=[this._bufferService.cols,S],this.refresh(),this._onSelectionChange.fire()}_handleTrim(u){this._model.handleTrim(u)&&this.refresh()}_getMouseBufferCoords(u){const S=this._mouseService.getCoords(u,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(S)return S[0]--,S[1]--,S[1]+=this._bufferService.buffer.ydisp,S}_getMouseEventScrollAmount(u){let S=(0,a.getCoordsRelativeToElement)(this._coreBrowserService.window,u,this._screenElement)[1];const k=this._renderService.dimensions.css.canvas.height;return S>=0&&S<=k?0:(S>k&&(S-=k),S=Math.min(Math.max(S,-50),50),S/=50,S/Math.abs(S)+Math.round(14*S))}shouldForceSelection(u){return r.isMac?u.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:u.shiftKey}handleMouseDown(u){if(this._mouseDownTimeStamp=u.timeStamp,(u.button!==2||!this.hasSelection)&&u.button===0){if(!this._enabled){if(!this.shouldForceSelection(u))return;u.stopPropagation()}u.preventDefault(),this._dragScrollAmount=0,this._enabled&&u.shiftKey?this._handleIncrementalClick(u):u.detail===1?this._handleSingleClick(u):u.detail===2?this._handleDoubleClick(u):u.detail===3&&this._handleTripleClick(u),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval(()=>this._dragScroll(),50)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(u){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(u))}_handleSingleClick(u){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(u)?3:0,this._model.selectionStart=this._getMouseBufferCoords(u),!this._model.selectionStart)return;this._model.selectionEnd=void 0;const S=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);S&&S.length!==this._model.selectionStart[0]&&S.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(u){this._selectWordAtCursor(u,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(u){const S=this._getMouseBufferCoords(u);S&&(this._activeSelectionMode=2,this._selectLineAt(S[1]))}shouldColumnSelect(u){return u.altKey&&!(r.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(u){if(u.stopImmediatePropagation(),!this._model.selectionStart)return;const S=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(u),!this._model.selectionEnd)return void this.refresh(!0);this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(u),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));const k=this._bufferService.buffer;if(this._model.selectionEnd[1]<k.lines.length){const B=k.lines.get(this._model.selectionEnd[1]);B&&B.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]++}S&&S[0]===this._model.selectionEnd[0]&&S[1]===this._model.selectionEnd[1]||this.refresh(!0)}_dragScroll(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});const u=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(u.ydisp+this._bufferService.rows,u.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=u.ydisp),this.refresh()}}_handleMouseUp(u){const S=u.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&S<500&&u.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){const k=this._mouseService.getCoords(u,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(k&&k[0]!==void 0&&k[1]!==void 0){const B=(0,c.moveToCellSequence)(k[0]-1,k[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(B,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){const u=this._model.finalSelectionStart,S=this._model.finalSelectionEnd,k=!(!u||!S||u[0]===S[0]&&u[1]===S[1]);k?u&&S&&(this._oldSelectionStart&&this._oldSelectionEnd&&u[0]===this._oldSelectionStart[0]&&u[1]===this._oldSelectionStart[1]&&S[0]===this._oldSelectionEnd[0]&&S[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(u,S,k)):this._oldHasSelection&&this._fireOnSelectionChange(u,S,k)}_fireOnSelectionChange(u,S,k){this._oldSelectionStart=u,this._oldSelectionEnd=S,this._oldHasSelection=k,this._onSelectionChange.fire()}_handleBufferActivate(u){this.clearSelection(),this._trimListener.dispose(),this._trimListener=u.activeBuffer.lines.onTrim(S=>this._handleTrim(S))}_convertViewportColToCharacterIndex(u,S){let k=S;for(let B=0;S>=B;B++){const R=u.loadCell(B,this._workCell).getChars().length;this._workCell.getWidth()===0?k--:R>1&&S!==B&&(k+=R-1)}return k}setSelection(u,S,k){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[u,S],this._model.selectionStartLength=k,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(u){this._isClickInSelection(u)||(this._selectWordAtCursor(u,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(u,S,k=!0,B=!0){if(u[0]>=this._bufferService.cols)return;const R=this._bufferService.buffer,O=R.lines.get(u[1]);if(!O)return;const F=R.translateBufferLineToString(u[1],!1);let $=this._convertViewportColToCharacterIndex(O,u[0]),V=$;const K=u[0]-$;let w=0,T=0,M=0,P=0;if(F.charAt($)===" "){for(;$>0&&F.charAt($-1)===" ";)$--;for(;V<F.length&&F.charAt(V+1)===" ";)V++}else{let Z=u[0],Y=u[0];O.getWidth(Z)===0&&(w++,Z--),O.getWidth(Y)===2&&(T++,Y++);const le=O.getString(Y).length;for(le>1&&(P+=le-1,V+=le-1);Z>0&&$>0&&!this._isCharWordSeparator(O.loadCell(Z-1,this._workCell));){O.loadCell(Z-1,this._workCell);const E=this._workCell.getChars().length;this._workCell.getWidth()===0?(w++,Z--):E>1&&(M+=E-1,$-=E-1),$--,Z--}for(;Y<O.length&&V+1<F.length&&!this._isCharWordSeparator(O.loadCell(Y+1,this._workCell));){O.loadCell(Y+1,this._workCell);const E=this._workCell.getChars().length;this._workCell.getWidth()===2?(T++,Y++):E>1&&(P+=E-1,V+=E-1),V++,Y++}}V++;let W=$+K-w+M,q=Math.min(this._bufferService.cols,V-$+w+T-M-P);if(S||F.slice($,V).trim()!==""){if(k&&W===0&&O.getCodePoint(0)!==32){const Z=R.lines.get(u[1]-1);if(Z&&O.isWrapped&&Z.getCodePoint(this._bufferService.cols-1)!==32){const Y=this._getWordAt([this._bufferService.cols-1,u[1]-1],!1,!0,!1);if(Y){const le=this._bufferService.cols-Y.start;W-=le,q+=le}}}if(B&&W+q===this._bufferService.cols&&O.getCodePoint(this._bufferService.cols-1)!==32){const Z=R.lines.get(u[1]+1);if(Z!=null&&Z.isWrapped&&Z.getCodePoint(0)!==32){const Y=this._getWordAt([0,u[1]+1],!1,!1,!0);Y&&(q+=Y.length)}}return{start:W,length:q}}}_selectWordAt(u,S){const k=this._getWordAt(u,S);if(k){for(;k.start<0;)k.start+=this._bufferService.cols,u[1]--;this._model.selectionStart=[k.start,u[1]],this._model.selectionStartLength=k.length}}_selectToWordAt(u){const S=this._getWordAt(u,!0);if(S){let k=u[1];for(;S.start<0;)S.start+=this._bufferService.cols,k--;if(!this._model.areSelectionValuesReversed())for(;S.start+S.length>this._bufferService.cols;)S.length-=this._bufferService.cols,k++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?S.start:S.start+S.length,k]}}_isCharWordSeparator(u){return u.getWidth()!==0&&this._optionsService.rawOptions.wordSeparator.indexOf(u.getChars())>=0}_selectLineAt(u){const S=this._bufferService.buffer.getWrappedRangeForLine(u),k={start:{x:0,y:S.first},end:{x:this._bufferService.cols-1,y:S.last}};this._model.selectionStart=[0,S.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,t.getRangeLength)(k,this._bufferService.cols)}};s.SelectionService=C=l([f(3,h.IBufferService),f(4,h.ICoreService),f(5,b.IMouseService),f(6,h.IOptionsService),f(7,b.IRenderService),f(8,b.ICoreBrowserService)],C)},4725:(D,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.IThemeService=s.ICharacterJoinerService=s.ISelectionService=s.IRenderService=s.IMouseService=s.ICoreBrowserService=s.ICharSizeService=void 0;const l=o(8343);s.ICharSizeService=(0,l.createDecorator)("CharSizeService"),s.ICoreBrowserService=(0,l.createDecorator)("CoreBrowserService"),s.IMouseService=(0,l.createDecorator)("MouseService"),s.IRenderService=(0,l.createDecorator)("RenderService"),s.ISelectionService=(0,l.createDecorator)("SelectionService"),s.ICharacterJoinerService=(0,l.createDecorator)("CharacterJoinerService"),s.IThemeService=(0,l.createDecorator)("ThemeService")},6731:function(D,s,o){var l=this&&this.__decorate||function(C,u,S,k){var B,R=arguments.length,O=R<3?u:k===null?k=Object.getOwnPropertyDescriptor(u,S):k;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")O=Reflect.decorate(C,u,S,k);else for(var F=C.length-1;F>=0;F--)(B=C[F])&&(O=(R<3?B(O):R>3?B(u,S,O):B(u,S))||O);return R>3&&O&&Object.defineProperty(u,S,O),O},f=this&&this.__param||function(C,u){return function(S,k){u(S,k,C)}};Object.defineProperty(s,"__esModule",{value:!0}),s.ThemeService=s.DEFAULT_ANSI_COLORS=void 0;const a=o(7239),c=o(8055),p=o(8460),b=o(844),v=o(2585),e=c.css.toColor("#ffffff"),r=c.css.toColor("#000000"),t=c.css.toColor("#ffffff"),i=c.css.toColor("#000000"),h={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};s.DEFAULT_ANSI_COLORS=Object.freeze((()=>{const C=[c.css.toColor("#2e3436"),c.css.toColor("#cc0000"),c.css.toColor("#4e9a06"),c.css.toColor("#c4a000"),c.css.toColor("#3465a4"),c.css.toColor("#75507b"),c.css.toColor("#06989a"),c.css.toColor("#d3d7cf"),c.css.toColor("#555753"),c.css.toColor("#ef2929"),c.css.toColor("#8ae234"),c.css.toColor("#fce94f"),c.css.toColor("#729fcf"),c.css.toColor("#ad7fa8"),c.css.toColor("#34e2e2"),c.css.toColor("#eeeeec")],u=[0,95,135,175,215,255];for(let S=0;S<216;S++){const k=u[S/36%6|0],B=u[S/6%6|0],R=u[S%6];C.push({css:c.channels.toCss(k,B,R),rgba:c.channels.toRgba(k,B,R)})}for(let S=0;S<24;S++){const k=8+10*S;C.push({css:c.channels.toCss(k,k,k),rgba:c.channels.toRgba(k,k,k)})}return C})());let d=s.ThemeService=class extends b.Disposable{get colors(){return this._colors}constructor(C){super(),this._optionsService=C,this._contrastCache=new a.ColorContrastCache,this._halfContrastCache=new a.ColorContrastCache,this._onChangeColors=this.register(new p.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:e,background:r,cursor:t,cursorAccent:i,selectionForeground:void 0,selectionBackgroundTransparent:h,selectionBackgroundOpaque:c.color.blend(r,h),selectionInactiveBackgroundTransparent:h,selectionInactiveBackgroundOpaque:c.color.blend(r,h),ansi:s.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",()=>this._contrastCache.clear())),this.register(this._optionsService.onSpecificOptionChange("theme",()=>this._setTheme(this._optionsService.rawOptions.theme)))}_setTheme(C={}){const u=this._colors;if(u.foreground=m(C.foreground,e),u.background=m(C.background,r),u.cursor=m(C.cursor,t),u.cursorAccent=m(C.cursorAccent,i),u.selectionBackgroundTransparent=m(C.selectionBackground,h),u.selectionBackgroundOpaque=c.color.blend(u.background,u.selectionBackgroundTransparent),u.selectionInactiveBackgroundTransparent=m(C.selectionInactiveBackground,u.selectionBackgroundTransparent),u.selectionInactiveBackgroundOpaque=c.color.blend(u.background,u.selectionInactiveBackgroundTransparent),u.selectionForeground=C.selectionForeground?m(C.selectionForeground,c.NULL_COLOR):void 0,u.selectionForeground===c.NULL_COLOR&&(u.selectionForeground=void 0),c.color.isOpaque(u.selectionBackgroundTransparent)&&(u.selectionBackgroundTransparent=c.color.opacity(u.selectionBackgroundTransparent,.3)),c.color.isOpaque(u.selectionInactiveBackgroundTransparent)&&(u.selectionInactiveBackgroundTransparent=c.color.opacity(u.selectionInactiveBackgroundTransparent,.3)),u.ansi=s.DEFAULT_ANSI_COLORS.slice(),u.ansi[0]=m(C.black,s.DEFAULT_ANSI_COLORS[0]),u.ansi[1]=m(C.red,s.DEFAULT_ANSI_COLORS[1]),u.ansi[2]=m(C.green,s.DEFAULT_ANSI_COLORS[2]),u.ansi[3]=m(C.yellow,s.DEFAULT_ANSI_COLORS[3]),u.ansi[4]=m(C.blue,s.DEFAULT_ANSI_COLORS[4]),u.ansi[5]=m(C.magenta,s.DEFAULT_ANSI_COLORS[5]),u.ansi[6]=m(C.cyan,s.DEFAULT_ANSI_COLORS[6]),u.ansi[7]=m(C.white,s.DEFAULT_ANSI_COLORS[7]),u.ansi[8]=m(C.brightBlack,s.DEFAULT_ANSI_COLORS[8]),u.ansi[9]=m(C.brightRed,s.DEFAULT_ANSI_COLORS[9]),u.ansi[10]=m(C.brightGreen,s.DEFAULT_ANSI_COLORS[10]),u.ansi[11]=m(C.brightYellow,s.DEFAULT_ANSI_COLORS[11]),u.ansi[12]=m(C.brightBlue,s.DEFAULT_ANSI_COLORS[12]),u.ansi[13]=m(C.brightMagenta,s.DEFAULT_ANSI_COLORS[13]),u.ansi[14]=m(C.brightCyan,s.DEFAULT_ANSI_COLORS[14]),u.ansi[15]=m(C.brightWhite,s.DEFAULT_ANSI_COLORS[15]),C.extendedAnsi){const S=Math.min(u.ansi.length-16,C.extendedAnsi.length);for(let k=0;k<S;k++)u.ansi[k+16]=m(C.extendedAnsi[k],s.DEFAULT_ANSI_COLORS[k+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(C){this._restoreColor(C),this._onChangeColors.fire(this.colors)}_restoreColor(C){if(C!==void 0)switch(C){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[C]=this._restoreColors.ansi[C]}else for(let u=0;u<this._restoreColors.ansi.length;++u)this._colors.ansi[u]=this._restoreColors.ansi[u]}modifyColors(C){C(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function m(C,u){if(C!==void 0)try{return c.css.toColor(C)}catch{}return u}s.ThemeService=d=l([f(0,v.IOptionsService)],d)},6349:(D,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CircularList=void 0;const l=o(8460),f=o(844);class a extends f.Disposable{constructor(p){super(),this._maxLength=p,this.onDeleteEmitter=this.register(new l.EventEmitter),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this.register(new l.EventEmitter),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this.register(new l.EventEmitter),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(p){if(this._maxLength===p)return;const b=new Array(p);for(let v=0;v<Math.min(p,this.length);v++)b[v]=this._array[this._getCyclicIndex(v)];this._array=b,this._maxLength=p,this._startIndex=0}get length(){return this._length}set length(p){if(p>this._length)for(let b=this._length;b<p;b++)this._array[b]=void 0;this._length=p}get(p){return this._array[this._getCyclicIndex(p)]}set(p,b){this._array[this._getCyclicIndex(p)]=b}push(p){this._array[this._getCyclicIndex(this._length)]=p,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(p,b,...v){if(b){for(let e=p;e<this._length-b;e++)this._array[this._getCyclicIndex(e)]=this._array[this._getCyclicIndex(e+b)];this._length-=b,this.onDeleteEmitter.fire({index:p,amount:b})}for(let e=this._length-1;e>=p;e--)this._array[this._getCyclicIndex(e+v.length)]=this._array[this._getCyclicIndex(e)];for(let e=0;e<v.length;e++)this._array[this._getCyclicIndex(p+e)]=v[e];if(v.length&&this.onInsertEmitter.fire({index:p,amount:v.length}),this._length+v.length>this._maxLength){const e=this._length+v.length-this._maxLength;this._startIndex+=e,this._length=this._maxLength,this.onTrimEmitter.fire(e)}else this._length+=v.length}trimStart(p){p>this._length&&(p=this._length),this._startIndex+=p,this._length-=p,this.onTrimEmitter.fire(p)}shiftElements(p,b,v){if(!(b<=0)){if(p<0||p>=this._length)throw new Error("start argument out of range");if(p+v<0)throw new Error("Cannot shift elements in list beyond index 0");if(v>0){for(let r=b-1;r>=0;r--)this.set(p+r+v,this.get(p+r));const e=p+b+v-this._length;if(e>0)for(this._length+=e;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let e=0;e<b;e++)this.set(p+e+v,this.get(p+e))}}_getCyclicIndex(p){return(this._startIndex+p)%this._maxLength}}s.CircularList=a},1439:(D,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.clone=void 0,s.clone=function o(l,f=5){if(typeof l!="object")return l;const a=Array.isArray(l)?[]:{};for(const c in l)a[c]=f<=1?l[c]:l[c]&&o(l[c],f-1);return a}},8055:(D,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.contrastRatio=s.toPaddedHex=s.rgba=s.rgb=s.css=s.color=s.channels=s.NULL_COLOR=void 0;const l=o(6114);let f=0,a=0,c=0,p=0;var b,v,e,r,t;function i(d){const m=d.toString(16);return m.length<2?"0"+m:m}function h(d,m){return d<m?(m+.05)/(d+.05):(d+.05)/(m+.05)}s.NULL_COLOR={css:"#00000000",rgba:0},function(d){d.toCss=function(m,C,u,S){return S!==void 0?`#${i(m)}${i(C)}${i(u)}${i(S)}`:`#${i(m)}${i(C)}${i(u)}`},d.toRgba=function(m,C,u,S=255){return(m<<24|C<<16|u<<8|S)>>>0}}(b||(s.channels=b={})),function(d){function m(C,u){return p=Math.round(255*u),[f,a,c]=t.toChannels(C.rgba),{css:b.toCss(f,a,c,p),rgba:b.toRgba(f,a,c,p)}}d.blend=function(C,u){if(p=(255&u.rgba)/255,p===1)return{css:u.css,rgba:u.rgba};const S=u.rgba>>24&255,k=u.rgba>>16&255,B=u.rgba>>8&255,R=C.rgba>>24&255,O=C.rgba>>16&255,F=C.rgba>>8&255;return f=R+Math.round((S-R)*p),a=O+Math.round((k-O)*p),c=F+Math.round((B-F)*p),{css:b.toCss(f,a,c),rgba:b.toRgba(f,a,c)}},d.isOpaque=function(C){return(255&C.rgba)==255},d.ensureContrastRatio=function(C,u,S){const k=t.ensureContrastRatio(C.rgba,u.rgba,S);if(k)return t.toColor(k>>24&255,k>>16&255,k>>8&255)},d.opaque=function(C){const u=(255|C.rgba)>>>0;return[f,a,c]=t.toChannels(u),{css:b.toCss(f,a,c),rgba:u}},d.opacity=m,d.multiplyOpacity=function(C,u){return p=255&C.rgba,m(C,p*u/255)},d.toColorRGB=function(C){return[C.rgba>>24&255,C.rgba>>16&255,C.rgba>>8&255]}}(v||(s.color=v={})),function(d){let m,C;if(!l.isNode){const u=document.createElement("canvas");u.width=1,u.height=1;const S=u.getContext("2d",{willReadFrequently:!0});S&&(m=S,m.globalCompositeOperation="copy",C=m.createLinearGradient(0,0,1,1))}d.toColor=function(u){if(u.match(/#[\da-f]{3,8}/i))switch(u.length){case 4:return f=parseInt(u.slice(1,2).repeat(2),16),a=parseInt(u.slice(2,3).repeat(2),16),c=parseInt(u.slice(3,4).repeat(2),16),t.toColor(f,a,c);case 5:return f=parseInt(u.slice(1,2).repeat(2),16),a=parseInt(u.slice(2,3).repeat(2),16),c=parseInt(u.slice(3,4).repeat(2),16),p=parseInt(u.slice(4,5).repeat(2),16),t.toColor(f,a,c,p);case 7:return{css:u,rgba:(parseInt(u.slice(1),16)<<8|255)>>>0};case 9:return{css:u,rgba:parseInt(u.slice(1),16)>>>0}}const S=u.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(S)return f=parseInt(S[1]),a=parseInt(S[2]),c=parseInt(S[3]),p=Math.round(255*(S[5]===void 0?1:parseFloat(S[5]))),t.toColor(f,a,c,p);if(!m||!C)throw new Error("css.toColor: Unsupported css format");if(m.fillStyle=C,m.fillStyle=u,typeof m.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(m.fillRect(0,0,1,1),[f,a,c,p]=m.getImageData(0,0,1,1).data,p!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:b.toRgba(f,a,c,p),css:u}}}(e||(s.css=e={})),function(d){function m(C,u,S){const k=C/255,B=u/255,R=S/255;return .2126*(k<=.03928?k/12.92:Math.pow((k+.055)/1.055,2.4))+.7152*(B<=.03928?B/12.92:Math.pow((B+.055)/1.055,2.4))+.0722*(R<=.03928?R/12.92:Math.pow((R+.055)/1.055,2.4))}d.relativeLuminance=function(C){return m(C>>16&255,C>>8&255,255&C)},d.relativeLuminance2=m}(r||(s.rgb=r={})),function(d){function m(u,S,k){const B=u>>24&255,R=u>>16&255,O=u>>8&255;let F=S>>24&255,$=S>>16&255,V=S>>8&255,K=h(r.relativeLuminance2(F,$,V),r.relativeLuminance2(B,R,O));for(;K<k&&(F>0||$>0||V>0);)F-=Math.max(0,Math.ceil(.1*F)),$-=Math.max(0,Math.ceil(.1*$)),V-=Math.max(0,Math.ceil(.1*V)),K=h(r.relativeLuminance2(F,$,V),r.relativeLuminance2(B,R,O));return(F<<24|$<<16|V<<8|255)>>>0}function C(u,S,k){const B=u>>24&255,R=u>>16&255,O=u>>8&255;let F=S>>24&255,$=S>>16&255,V=S>>8&255,K=h(r.relativeLuminance2(F,$,V),r.relativeLuminance2(B,R,O));for(;K<k&&(F<255||$<255||V<255);)F=Math.min(255,F+Math.ceil(.1*(255-F))),$=Math.min(255,$+Math.ceil(.1*(255-$))),V=Math.min(255,V+Math.ceil(.1*(255-V))),K=h(r.relativeLuminance2(F,$,V),r.relativeLuminance2(B,R,O));return(F<<24|$<<16|V<<8|255)>>>0}d.ensureContrastRatio=function(u,S,k){const B=r.relativeLuminance(u>>8),R=r.relativeLuminance(S>>8);if(h(B,R)<k){if(R<B){const $=m(u,S,k),V=h(B,r.relativeLuminance($>>8));if(V<k){const K=C(u,S,k);return V>h(B,r.relativeLuminance(K>>8))?$:K}return $}const O=C(u,S,k),F=h(B,r.relativeLuminance(O>>8));if(F<k){const $=m(u,S,k);return F>h(B,r.relativeLuminance($>>8))?O:$}return O}},d.reduceLuminance=m,d.increaseLuminance=C,d.toChannels=function(u){return[u>>24&255,u>>16&255,u>>8&255,255&u]},d.toColor=function(u,S,k,B){return{css:b.toCss(u,S,k,B),rgba:b.toRgba(u,S,k,B)}}}(t||(s.rgba=t={})),s.toPaddedHex=i,s.contrastRatio=h},8969:(D,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CoreTerminal=void 0;const l=o(844),f=o(2585),a=o(4348),c=o(7866),p=o(744),b=o(7302),v=o(6975),e=o(8460),r=o(1753),t=o(1480),i=o(7994),h=o(9282),d=o(5435),m=o(5981),C=o(2660);let u=!1;class S extends l.Disposable{get onScroll(){return this._onScrollApi||(this._onScrollApi=this.register(new e.EventEmitter),this._onScroll.event(B=>{var R;(R=this._onScrollApi)===null||R===void 0||R.fire(B.position)})),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(B){for(const R in B)this.optionsService.options[R]=B[R]}constructor(B){super(),this._windowsWrappingHeuristics=this.register(new l.MutableDisposable),this._onBinary=this.register(new e.EventEmitter),this.onBinary=this._onBinary.event,this._onData=this.register(new e.EventEmitter),this.onData=this._onData.event,this._onLineFeed=this.register(new e.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onResize=this.register(new e.EventEmitter),this.onResize=this._onResize.event,this._onWriteParsed=this.register(new e.EventEmitter),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this.register(new e.EventEmitter),this._instantiationService=new a.InstantiationService,this.optionsService=this.register(new b.OptionsService(B)),this._instantiationService.setService(f.IOptionsService,this.optionsService),this._bufferService=this.register(this._instantiationService.createInstance(p.BufferService)),this._instantiationService.setService(f.IBufferService,this._bufferService),this._logService=this.register(this._instantiationService.createInstance(c.LogService)),this._instantiationService.setService(f.ILogService,this._logService),this.coreService=this.register(this._instantiationService.createInstance(v.CoreService)),this._instantiationService.setService(f.ICoreService,this.coreService),this.coreMouseService=this.register(this._instantiationService.createInstance(r.CoreMouseService)),this._instantiationService.setService(f.ICoreMouseService,this.coreMouseService),this.unicodeService=this.register(this._instantiationService.createInstance(t.UnicodeService)),this._instantiationService.setService(f.IUnicodeService,this.unicodeService),this._charsetService=this._instantiationService.createInstance(i.CharsetService),this._instantiationService.setService(f.ICharsetService,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(C.OscLinkService),this._instantiationService.setService(f.IOscLinkService,this._oscLinkService),this._inputHandler=this.register(new d.InputHandler(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this.register((0,e.forwardEvent)(this._inputHandler.onLineFeed,this._onLineFeed)),this.register(this._inputHandler),this.register((0,e.forwardEvent)(this._bufferService.onResize,this._onResize)),this.register((0,e.forwardEvent)(this.coreService.onData,this._onData)),this.register((0,e.forwardEvent)(this.coreService.onBinary,this._onBinary)),this.register(this.coreService.onRequestScrollToBottom(()=>this.scrollToBottom())),this.register(this.coreService.onUserInput(()=>this._writeBuffer.handleUserInput())),this.register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],()=>this._handleWindowsPtyOptionChange())),this.register(this._bufferService.onScroll(R=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this.register(this._inputHandler.onScroll(R=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this._writeBuffer=this.register(new m.WriteBuffer((R,O)=>this._inputHandler.parse(R,O))),this.register((0,e.forwardEvent)(this._writeBuffer.onWriteParsed,this._onWriteParsed))}write(B,R){this._writeBuffer.write(B,R)}writeSync(B,R){this._logService.logLevel<=f.LogLevelEnum.WARN&&!u&&(this._logService.warn("writeSync is unreliable and will be removed soon."),u=!0),this._writeBuffer.writeSync(B,R)}resize(B,R){isNaN(B)||isNaN(R)||(B=Math.max(B,p.MINIMUM_COLS),R=Math.max(R,p.MINIMUM_ROWS),this._bufferService.resize(B,R))}scroll(B,R=!1){this._bufferService.scroll(B,R)}scrollLines(B,R,O){this._bufferService.scrollLines(B,R,O)}scrollPages(B){this.scrollLines(B*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(B){const R=B-this._bufferService.buffer.ydisp;R!==0&&this.scrollLines(R)}registerEscHandler(B,R){return this._inputHandler.registerEscHandler(B,R)}registerDcsHandler(B,R){return this._inputHandler.registerDcsHandler(B,R)}registerCsiHandler(B,R){return this._inputHandler.registerCsiHandler(B,R)}registerOscHandler(B,R){return this._inputHandler.registerOscHandler(B,R)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let B=!1;const R=this.optionsService.rawOptions.windowsPty;R&&R.buildNumber!==void 0&&R.buildNumber!==void 0?B=R.backend==="conpty"&&R.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(B=!0),B?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){const B=[];B.push(this.onLineFeed(h.updateWindowsModeWrappedState.bind(null,this._bufferService))),B.push(this.registerCsiHandler({final:"H"},()=>((0,h.updateWindowsModeWrappedState)(this._bufferService),!1))),this._windowsWrappingHeuristics.value=(0,l.toDisposable)(()=>{for(const R of B)R.dispose()})}}}s.CoreTerminal=S},8460:(D,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.forwardEvent=s.EventEmitter=void 0,s.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=o=>(this._listeners.push(o),{dispose:()=>{if(!this._disposed){for(let l=0;l<this._listeners.length;l++)if(this._listeners[l]===o)return void this._listeners.splice(l,1)}}})),this._event}fire(o,l){const f=[];for(let a=0;a<this._listeners.length;a++)f.push(this._listeners[a]);for(let a=0;a<f.length;a++)f[a].call(void 0,o,l)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},s.forwardEvent=function(o,l){return o(f=>l.fire(f))}},5435:function(D,s,o){var l=this&&this.__decorate||function(K,w,T,M){var P,W=arguments.length,q=W<3?w:M===null?M=Object.getOwnPropertyDescriptor(w,T):M;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")q=Reflect.decorate(K,w,T,M);else for(var Z=K.length-1;Z>=0;Z--)(P=K[Z])&&(q=(W<3?P(q):W>3?P(w,T,q):P(w,T))||q);return W>3&&q&&Object.defineProperty(w,T,q),q},f=this&&this.__param||function(K,w){return function(T,M){w(T,M,K)}};Object.defineProperty(s,"__esModule",{value:!0}),s.InputHandler=s.WindowsOptionsReportType=void 0;const a=o(2584),c=o(7116),p=o(2015),b=o(844),v=o(482),e=o(8437),r=o(8460),t=o(643),i=o(511),h=o(3734),d=o(2585),m=o(6242),C=o(6351),u=o(5941),S={"(":0,")":1,"*":2,"+":3,"-":1,".":2},k=131072;function B(K,w){if(K>24)return w.setWinLines||!1;switch(K){case 1:return!!w.restoreWin;case 2:return!!w.minimizeWin;case 3:return!!w.setWinPosition;case 4:return!!w.setWinSizePixels;case 5:return!!w.raiseWin;case 6:return!!w.lowerWin;case 7:return!!w.refreshWin;case 8:return!!w.setWinSizeChars;case 9:return!!w.maximizeWin;case 10:return!!w.fullscreenWin;case 11:return!!w.getWinState;case 13:return!!w.getWinPosition;case 14:return!!w.getWinSizePixels;case 15:return!!w.getScreenSizePixels;case 16:return!!w.getCellSizePixels;case 18:return!!w.getWinSizeChars;case 19:return!!w.getScreenSizeChars;case 20:return!!w.getIconTitle;case 21:return!!w.getWinTitle;case 22:return!!w.pushTitle;case 23:return!!w.popTitle;case 24:return!!w.setWinLines}return!1}var R;(function(K){K[K.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",K[K.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(R||(s.WindowsOptionsReportType=R={}));let O=0;class F extends b.Disposable{getAttrData(){return this._curAttrData}constructor(w,T,M,P,W,q,Z,Y,le=new p.EscapeSequenceParser){super(),this._bufferService=w,this._charsetService=T,this._coreService=M,this._logService=P,this._optionsService=W,this._oscLinkService=q,this._coreMouseService=Z,this._unicodeService=Y,this._parser=le,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new v.StringToUtf32,this._utf8Decoder=new v.Utf8ToUtf32,this._workCell=new i.CellData,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=e.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=e.DEFAULT_ATTR_DATA.clone(),this._onRequestBell=this.register(new r.EventEmitter),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this.register(new r.EventEmitter),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this.register(new r.EventEmitter),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this.register(new r.EventEmitter),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this.register(new r.EventEmitter),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this.register(new r.EventEmitter),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this.register(new r.EventEmitter),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this.register(new r.EventEmitter),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this.register(new r.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this.register(new r.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onScroll=this.register(new r.EventEmitter),this.onScroll=this._onScroll.event,this._onTitleChange=this.register(new r.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onColor=this.register(new r.EventEmitter),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this.register(this._parser),this._dirtyRowTracker=new $(this._bufferService),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(E=>this._activeBuffer=E.activeBuffer)),this._parser.setCsiHandlerFallback((E,I)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(E),params:I.toArray()})}),this._parser.setEscHandlerFallback(E=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(E)})}),this._parser.setExecuteHandlerFallback(E=>{this._logService.debug("Unknown EXECUTE code: ",{code:E})}),this._parser.setOscHandlerFallback((E,I,N)=>{this._logService.debug("Unknown OSC code: ",{identifier:E,action:I,data:N})}),this._parser.setDcsHandlerFallback((E,I,N)=>{I==="HOOK"&&(N=N.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(E),action:I,payload:N})}),this._parser.setPrintHandler((E,I,N)=>this.print(E,I,N)),this._parser.registerCsiHandler({final:"@"},E=>this.insertChars(E)),this._parser.registerCsiHandler({intermediates:" ",final:"@"},E=>this.scrollLeft(E)),this._parser.registerCsiHandler({final:"A"},E=>this.cursorUp(E)),this._parser.registerCsiHandler({intermediates:" ",final:"A"},E=>this.scrollRight(E)),this._parser.registerCsiHandler({final:"B"},E=>this.cursorDown(E)),this._parser.registerCsiHandler({final:"C"},E=>this.cursorForward(E)),this._parser.registerCsiHandler({final:"D"},E=>this.cursorBackward(E)),this._parser.registerCsiHandler({final:"E"},E=>this.cursorNextLine(E)),this._parser.registerCsiHandler({final:"F"},E=>this.cursorPrecedingLine(E)),this._parser.registerCsiHandler({final:"G"},E=>this.cursorCharAbsolute(E)),this._parser.registerCsiHandler({final:"H"},E=>this.cursorPosition(E)),this._parser.registerCsiHandler({final:"I"},E=>this.cursorForwardTab(E)),this._parser.registerCsiHandler({final:"J"},E=>this.eraseInDisplay(E,!1)),this._parser.registerCsiHandler({prefix:"?",final:"J"},E=>this.eraseInDisplay(E,!0)),this._parser.registerCsiHandler({final:"K"},E=>this.eraseInLine(E,!1)),this._parser.registerCsiHandler({prefix:"?",final:"K"},E=>this.eraseInLine(E,!0)),this._parser.registerCsiHandler({final:"L"},E=>this.insertLines(E)),this._parser.registerCsiHandler({final:"M"},E=>this.deleteLines(E)),this._parser.registerCsiHandler({final:"P"},E=>this.deleteChars(E)),this._parser.registerCsiHandler({final:"S"},E=>this.scrollUp(E)),this._parser.registerCsiHandler({final:"T"},E=>this.scrollDown(E)),this._parser.registerCsiHandler({final:"X"},E=>this.eraseChars(E)),this._parser.registerCsiHandler({final:"Z"},E=>this.cursorBackwardTab(E)),this._parser.registerCsiHandler({final:"`"},E=>this.charPosAbsolute(E)),this._parser.registerCsiHandler({final:"a"},E=>this.hPositionRelative(E)),this._parser.registerCsiHandler({final:"b"},E=>this.repeatPrecedingCharacter(E)),this._parser.registerCsiHandler({final:"c"},E=>this.sendDeviceAttributesPrimary(E)),this._parser.registerCsiHandler({prefix:">",final:"c"},E=>this.sendDeviceAttributesSecondary(E)),this._parser.registerCsiHandler({final:"d"},E=>this.linePosAbsolute(E)),this._parser.registerCsiHandler({final:"e"},E=>this.vPositionRelative(E)),this._parser.registerCsiHandler({final:"f"},E=>this.hVPosition(E)),this._parser.registerCsiHandler({final:"g"},E=>this.tabClear(E)),this._parser.registerCsiHandler({final:"h"},E=>this.setMode(E)),this._parser.registerCsiHandler({prefix:"?",final:"h"},E=>this.setModePrivate(E)),this._parser.registerCsiHandler({final:"l"},E=>this.resetMode(E)),this._parser.registerCsiHandler({prefix:"?",final:"l"},E=>this.resetModePrivate(E)),this._parser.registerCsiHandler({final:"m"},E=>this.charAttributes(E)),this._parser.registerCsiHandler({final:"n"},E=>this.deviceStatus(E)),this._parser.registerCsiHandler({prefix:"?",final:"n"},E=>this.deviceStatusPrivate(E)),this._parser.registerCsiHandler({intermediates:"!",final:"p"},E=>this.softReset(E)),this._parser.registerCsiHandler({intermediates:" ",final:"q"},E=>this.setCursorStyle(E)),this._parser.registerCsiHandler({final:"r"},E=>this.setScrollRegion(E)),this._parser.registerCsiHandler({final:"s"},E=>this.saveCursor(E)),this._parser.registerCsiHandler({final:"t"},E=>this.windowOptions(E)),this._parser.registerCsiHandler({final:"u"},E=>this.restoreCursor(E)),this._parser.registerCsiHandler({intermediates:"'",final:"}"},E=>this.insertColumns(E)),this._parser.registerCsiHandler({intermediates:"'",final:"~"},E=>this.deleteColumns(E)),this._parser.registerCsiHandler({intermediates:'"',final:"q"},E=>this.selectProtected(E)),this._parser.registerCsiHandler({intermediates:"$",final:"p"},E=>this.requestMode(E,!0)),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},E=>this.requestMode(E,!1)),this._parser.setExecuteHandler(a.C0.BEL,()=>this.bell()),this._parser.setExecuteHandler(a.C0.LF,()=>this.lineFeed()),this._parser.setExecuteHandler(a.C0.VT,()=>this.lineFeed()),this._parser.setExecuteHandler(a.C0.FF,()=>this.lineFeed()),this._parser.setExecuteHandler(a.C0.CR,()=>this.carriageReturn()),this._parser.setExecuteHandler(a.C0.BS,()=>this.backspace()),this._parser.setExecuteHandler(a.C0.HT,()=>this.tab()),this._parser.setExecuteHandler(a.C0.SO,()=>this.shiftOut()),this._parser.setExecuteHandler(a.C0.SI,()=>this.shiftIn()),this._parser.setExecuteHandler(a.C1.IND,()=>this.index()),this._parser.setExecuteHandler(a.C1.NEL,()=>this.nextLine()),this._parser.setExecuteHandler(a.C1.HTS,()=>this.tabSet()),this._parser.registerOscHandler(0,new m.OscHandler(E=>(this.setTitle(E),this.setIconName(E),!0))),this._parser.registerOscHandler(1,new m.OscHandler(E=>this.setIconName(E))),this._parser.registerOscHandler(2,new m.OscHandler(E=>this.setTitle(E))),this._parser.registerOscHandler(4,new m.OscHandler(E=>this.setOrReportIndexedColor(E))),this._parser.registerOscHandler(8,new m.OscHandler(E=>this.setHyperlink(E))),this._parser.registerOscHandler(10,new m.OscHandler(E=>this.setOrReportFgColor(E))),this._parser.registerOscHandler(11,new m.OscHandler(E=>this.setOrReportBgColor(E))),this._parser.registerOscHandler(12,new m.OscHandler(E=>this.setOrReportCursorColor(E))),this._parser.registerOscHandler(104,new m.OscHandler(E=>this.restoreIndexedColor(E))),this._parser.registerOscHandler(110,new m.OscHandler(E=>this.restoreFgColor(E))),this._parser.registerOscHandler(111,new m.OscHandler(E=>this.restoreBgColor(E))),this._parser.registerOscHandler(112,new m.OscHandler(E=>this.restoreCursorColor(E))),this._parser.registerEscHandler({final:"7"},()=>this.saveCursor()),this._parser.registerEscHandler({final:"8"},()=>this.restoreCursor()),this._parser.registerEscHandler({final:"D"},()=>this.index()),this._parser.registerEscHandler({final:"E"},()=>this.nextLine()),this._parser.registerEscHandler({final:"H"},()=>this.tabSet()),this._parser.registerEscHandler({final:"M"},()=>this.reverseIndex()),this._parser.registerEscHandler({final:"="},()=>this.keypadApplicationMode()),this._parser.registerEscHandler({final:">"},()=>this.keypadNumericMode()),this._parser.registerEscHandler({final:"c"},()=>this.fullReset()),this._parser.registerEscHandler({final:"n"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"o"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"|"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"}"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"~"},()=>this.setgLevel(1)),this._parser.registerEscHandler({intermediates:"%",final:"@"},()=>this.selectDefaultCharset()),this._parser.registerEscHandler({intermediates:"%",final:"G"},()=>this.selectDefaultCharset());for(const E in c.CHARSETS)this._parser.registerEscHandler({intermediates:"(",final:E},()=>this.selectCharset("("+E)),this._parser.registerEscHandler({intermediates:")",final:E},()=>this.selectCharset(")"+E)),this._parser.registerEscHandler({intermediates:"*",final:E},()=>this.selectCharset("*"+E)),this._parser.registerEscHandler({intermediates:"+",final:E},()=>this.selectCharset("+"+E)),this._parser.registerEscHandler({intermediates:"-",final:E},()=>this.selectCharset("-"+E)),this._parser.registerEscHandler({intermediates:".",final:E},()=>this.selectCharset("."+E)),this._parser.registerEscHandler({intermediates:"/",final:E},()=>this.selectCharset("/"+E));this._parser.registerEscHandler({intermediates:"#",final:"8"},()=>this.screenAlignmentPattern()),this._parser.setErrorHandler(E=>(this._logService.error("Parsing error: ",E),E)),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new C.DcsHandler((E,I)=>this.requestStatusString(E,I)))}_preserveStack(w,T,M,P){this._parseStack.paused=!0,this._parseStack.cursorStartX=w,this._parseStack.cursorStartY=T,this._parseStack.decodedLength=M,this._parseStack.position=P}_logSlowResolvingAsync(w){this._logService.logLevel<=d.LogLevelEnum.WARN&&Promise.race([w,new Promise((T,M)=>setTimeout(()=>M("#SLOW_TIMEOUT"),5e3))]).catch(T=>{if(T!=="#SLOW_TIMEOUT")throw T;console.warn("async parser handler taking longer than 5000 ms")})}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(w,T){let M,P=this._activeBuffer.x,W=this._activeBuffer.y,q=0;const Z=this._parseStack.paused;if(Z){if(M=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,T))return this._logSlowResolvingAsync(M),M;P=this._parseStack.cursorStartX,W=this._parseStack.cursorStartY,this._parseStack.paused=!1,w.length>k&&(q=this._parseStack.position+k)}if(this._logService.logLevel<=d.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof w=="string"?` "${w}"`:` "${Array.prototype.map.call(w,Y=>String.fromCharCode(Y)).join("")}"`),typeof w=="string"?w.split("").map(Y=>Y.charCodeAt(0)):w),this._parseBuffer.length<w.length&&this._parseBuffer.length<k&&(this._parseBuffer=new Uint32Array(Math.min(w.length,k))),Z||this._dirtyRowTracker.clearRange(),w.length>k)for(let Y=q;Y<w.length;Y+=k){const le=Y+k<w.length?Y+k:w.length,E=typeof w=="string"?this._stringDecoder.decode(w.substring(Y,le),this._parseBuffer):this._utf8Decoder.decode(w.subarray(Y,le),this._parseBuffer);if(M=this._parser.parse(this._parseBuffer,E))return this._preserveStack(P,W,E,Y),this._logSlowResolvingAsync(M),M}else if(!Z){const Y=typeof w=="string"?this._stringDecoder.decode(w,this._parseBuffer):this._utf8Decoder.decode(w,this._parseBuffer);if(M=this._parser.parse(this._parseBuffer,Y))return this._preserveStack(P,W,Y,0),this._logSlowResolvingAsync(M),M}this._activeBuffer.x===P&&this._activeBuffer.y===W||this._onCursorMove.fire(),this._onRequestRefreshRows.fire(this._dirtyRowTracker.start,this._dirtyRowTracker.end)}print(w,T,M){let P,W;const q=this._charsetService.charset,Z=this._optionsService.rawOptions.screenReaderMode,Y=this._bufferService.cols,le=this._coreService.decPrivateModes.wraparound,E=this._coreService.modes.insertMode,I=this._curAttrData;let N=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&M-T>0&&N.getWidth(this._activeBuffer.x-1)===2&&N.setCellFromCodePoint(this._activeBuffer.x-1,0,1,I.fg,I.bg,I.extended);for(let z=T;z<M;++z){if(P=w[z],W=this._unicodeService.wcwidth(P),P<127&&q){const ee=q[String.fromCharCode(P)];ee&&(P=ee.charCodeAt(0))}if(Z&&this._onA11yChar.fire((0,v.stringFromCodePoint)(P)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),W||!this._activeBuffer.x){if(this._activeBuffer.x+W-1>=Y){if(le){for(;this._activeBuffer.x<Y;)N.setCellFromCodePoint(this._activeBuffer.x++,0,1,I.fg,I.bg,I.extended);this._activeBuffer.x=0,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),N=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)}else if(this._activeBuffer.x=Y-1,W===2)continue}if(E&&(N.insertCells(this._activeBuffer.x,W,this._activeBuffer.getNullCell(I),I),N.getWidth(Y-1)===2&&N.setCellFromCodePoint(Y-1,t.NULL_CELL_CODE,t.NULL_CELL_WIDTH,I.fg,I.bg,I.extended)),N.setCellFromCodePoint(this._activeBuffer.x++,P,W,I.fg,I.bg,I.extended),W>0)for(;--W;)N.setCellFromCodePoint(this._activeBuffer.x++,0,0,I.fg,I.bg,I.extended)}else N.getWidth(this._activeBuffer.x-1)?N.addCodepointToCell(this._activeBuffer.x-1,P):N.addCodepointToCell(this._activeBuffer.x-2,P)}M-T>0&&(N.loadCell(this._activeBuffer.x-1,this._workCell),this._workCell.getWidth()===2||this._workCell.getCode()>65535?this._parser.precedingCodepoint=0:this._workCell.isCombined()?this._parser.precedingCodepoint=this._workCell.getChars().charCodeAt(0):this._parser.precedingCodepoint=this._workCell.content),this._activeBuffer.x<Y&&M-T>0&&N.getWidth(this._activeBuffer.x)===0&&!N.hasContent(this._activeBuffer.x)&&N.setCellFromCodePoint(this._activeBuffer.x,0,1,I.fg,I.bg,I.extended),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(w,T){return w.final!=="t"||w.prefix||w.intermediates?this._parser.registerCsiHandler(w,T):this._parser.registerCsiHandler(w,M=>!B(M.params[0],this._optionsService.rawOptions.windowOptions)||T(M))}registerDcsHandler(w,T){return this._parser.registerDcsHandler(w,new C.DcsHandler(T))}registerEscHandler(w,T){return this._parser.registerEscHandler(w,T)}registerOscHandler(w,T){return this._parser.registerOscHandler(w,new m.OscHandler(T))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){var w;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&(!((w=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))===null||w===void 0)&&w.isWrapped)){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;const T=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);T.hasWidth(this._activeBuffer.x)&&!T.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;const w=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-w),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(w=this._bufferService.cols-1){this._activeBuffer.x=Math.min(w,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(w,T){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=w,this._activeBuffer.y=this._activeBuffer.scrollTop+T):(this._activeBuffer.x=w,this._activeBuffer.y=T),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(w,T){this._restrictCursor(),this._setCursor(this._activeBuffer.x+w,this._activeBuffer.y+T)}cursorUp(w){const T=this._activeBuffer.y-this._activeBuffer.scrollTop;return T>=0?this._moveCursor(0,-Math.min(T,w.params[0]||1)):this._moveCursor(0,-(w.params[0]||1)),!0}cursorDown(w){const T=this._activeBuffer.scrollBottom-this._activeBuffer.y;return T>=0?this._moveCursor(0,Math.min(T,w.params[0]||1)):this._moveCursor(0,w.params[0]||1),!0}cursorForward(w){return this._moveCursor(w.params[0]||1,0),!0}cursorBackward(w){return this._moveCursor(-(w.params[0]||1),0),!0}cursorNextLine(w){return this.cursorDown(w),this._activeBuffer.x=0,!0}cursorPrecedingLine(w){return this.cursorUp(w),this._activeBuffer.x=0,!0}cursorCharAbsolute(w){return this._setCursor((w.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(w){return this._setCursor(w.length>=2?(w.params[1]||1)-1:0,(w.params[0]||1)-1),!0}charPosAbsolute(w){return this._setCursor((w.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(w){return this._moveCursor(w.params[0]||1,0),!0}linePosAbsolute(w){return this._setCursor(this._activeBuffer.x,(w.params[0]||1)-1),!0}vPositionRelative(w){return this._moveCursor(0,w.params[0]||1),!0}hVPosition(w){return this.cursorPosition(w),!0}tabClear(w){const T=w.params[0];return T===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:T===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(w){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let T=w.params[0]||1;for(;T--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(w){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let T=w.params[0]||1;for(;T--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(w){const T=w.params[0];return T===1&&(this._curAttrData.bg|=536870912),T!==2&&T!==0||(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(w,T,M,P=!1,W=!1){const q=this._activeBuffer.lines.get(this._activeBuffer.ybase+w);q.replaceCells(T,M,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData(),W),P&&(q.isWrapped=!1)}_resetBufferLine(w,T=!1){const M=this._activeBuffer.lines.get(this._activeBuffer.ybase+w);M&&(M.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),T),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+w),M.isWrapped=!1)}eraseInDisplay(w,T=!1){let M;switch(this._restrictCursor(this._bufferService.cols),w.params[0]){case 0:for(M=this._activeBuffer.y,this._dirtyRowTracker.markDirty(M),this._eraseInBufferLine(M++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,T);M<this._bufferService.rows;M++)this._resetBufferLine(M,T);this._dirtyRowTracker.markDirty(M);break;case 1:for(M=this._activeBuffer.y,this._dirtyRowTracker.markDirty(M),this._eraseInBufferLine(M,0,this._activeBuffer.x+1,!0,T),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(M+1).isWrapped=!1);M--;)this._resetBufferLine(M,T);this._dirtyRowTracker.markDirty(0);break;case 2:for(M=this._bufferService.rows,this._dirtyRowTracker.markDirty(M-1);M--;)this._resetBufferLine(M,T);this._dirtyRowTracker.markDirty(0);break;case 3:const P=this._activeBuffer.lines.length-this._bufferService.rows;P>0&&(this._activeBuffer.lines.trimStart(P),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-P,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-P,0),this._onScroll.fire(0))}return!0}eraseInLine(w,T=!1){switch(this._restrictCursor(this._bufferService.cols),w.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,T);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,T);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,T)}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(w){this._restrictCursor();let T=w.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const M=this._activeBuffer.ybase+this._activeBuffer.y,P=this._bufferService.rows-1-this._activeBuffer.scrollBottom,W=this._bufferService.rows-1+this._activeBuffer.ybase-P+1;for(;T--;)this._activeBuffer.lines.splice(W-1,1),this._activeBuffer.lines.splice(M,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(w){this._restrictCursor();let T=w.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const M=this._activeBuffer.ybase+this._activeBuffer.y;let P;for(P=this._bufferService.rows-1-this._activeBuffer.scrollBottom,P=this._bufferService.rows-1+this._activeBuffer.ybase-P;T--;)this._activeBuffer.lines.splice(M,1),this._activeBuffer.lines.splice(P,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(w){this._restrictCursor();const T=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return T&&(T.insertCells(this._activeBuffer.x,w.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(w){this._restrictCursor();const T=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return T&&(T.deleteCells(this._activeBuffer.x,w.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(w){let T=w.params[0]||1;for(;T--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(w){let T=w.params[0]||1;for(;T--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(e.DEFAULT_ATTR_DATA));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(w){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const T=w.params[0]||1;for(let M=this._activeBuffer.scrollTop;M<=this._activeBuffer.scrollBottom;++M){const P=this._activeBuffer.lines.get(this._activeBuffer.ybase+M);P.deleteCells(0,T,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),P.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(w){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const T=w.params[0]||1;for(let M=this._activeBuffer.scrollTop;M<=this._activeBuffer.scrollBottom;++M){const P=this._activeBuffer.lines.get(this._activeBuffer.ybase+M);P.insertCells(0,T,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),P.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(w){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const T=w.params[0]||1;for(let M=this._activeBuffer.scrollTop;M<=this._activeBuffer.scrollBottom;++M){const P=this._activeBuffer.lines.get(this._activeBuffer.ybase+M);P.insertCells(this._activeBuffer.x,T,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),P.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(w){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const T=w.params[0]||1;for(let M=this._activeBuffer.scrollTop;M<=this._activeBuffer.scrollBottom;++M){const P=this._activeBuffer.lines.get(this._activeBuffer.ybase+M);P.deleteCells(this._activeBuffer.x,T,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),P.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(w){this._restrictCursor();const T=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return T&&(T.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(w.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(w){if(!this._parser.precedingCodepoint)return!0;const T=w.params[0]||1,M=new Uint32Array(T);for(let P=0;P<T;++P)M[P]=this._parser.precedingCodepoint;return this.print(M,0,M.length),!0}sendDeviceAttributesPrimary(w){return w.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(a.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(a.C0.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(w){return w.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(a.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(a.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(w.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(a.C0.ESC+"[>83;40003;0c")),!0}_is(w){return(this._optionsService.rawOptions.termName+"").indexOf(w)===0}setMode(w){for(let T=0;T<w.length;T++)switch(w.params[T]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0}return!0}setModePrivate(w){for(let T=0;T<w.length;T++)switch(w.params[T]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,c.DEFAULT_CHARSET),this._charsetService.setgCharset(1,c.DEFAULT_CHARSET),this._charsetService.setgCharset(2,c.DEFAULT_CHARSET),this._charsetService.setgCharset(3,c.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0}resetMode(w){for(let T=0;T<w.length;T++)switch(w.params[T]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1}return!0}resetModePrivate(w){for(let T=0;T<w.length;T++)switch(w.params[T]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),w.params[T]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0}requestMode(w,T){const M=this._coreService.decPrivateModes,{activeProtocol:P,activeEncoding:W}=this._coreMouseService,q=this._coreService,{buffers:Z,cols:Y}=this._bufferService,{active:le,alt:E}=Z,I=this._optionsService.rawOptions,N=ne=>ne?1:2,z=w.params[0];return ee=z,J=T?z===2?4:z===4?N(q.modes.insertMode):z===12?3:z===20?N(I.convertEol):0:z===1?N(M.applicationCursorKeys):z===3?I.windowOptions.setWinLines?Y===80?2:Y===132?1:0:0:z===6?N(M.origin):z===7?N(M.wraparound):z===8?3:z===9?N(P==="X10"):z===12?N(I.cursorBlink):z===25?N(!q.isCursorHidden):z===45?N(M.reverseWraparound):z===66?N(M.applicationKeypad):z===67?4:z===1e3?N(P==="VT200"):z===1002?N(P==="DRAG"):z===1003?N(P==="ANY"):z===1004?N(M.sendFocus):z===1005?4:z===1006?N(W==="SGR"):z===1015?4:z===1016?N(W==="SGR_PIXELS"):z===1048?1:z===47||z===1047||z===1049?N(le===E):z===2004?N(M.bracketedPasteMode):0,q.triggerDataEvent(`${a.C0.ESC}[${T?"":"?"}${ee};${J}$y`),!0;var ee,J}_updateAttrColor(w,T,M,P,W){return T===2?(w|=50331648,w&=-16777216,w|=h.AttributeData.fromColorRGB([M,P,W])):T===5&&(w&=-50331904,w|=33554432|255&M),w}_extractColor(w,T,M){const P=[0,0,-1,0,0,0];let W=0,q=0;do{if(P[q+W]=w.params[T+q],w.hasSubParams(T+q)){const Z=w.getSubParams(T+q);let Y=0;do P[1]===5&&(W=1),P[q+Y+1+W]=Z[Y];while(++Y<Z.length&&Y+q+1+W<P.length);break}if(P[1]===5&&q+W>=2||P[1]===2&&q+W>=5)break;P[1]&&(W=1)}while(++q+T<w.length&&q+W<P.length);for(let Z=2;Z<P.length;++Z)P[Z]===-1&&(P[Z]=0);switch(P[0]){case 38:M.fg=this._updateAttrColor(M.fg,P[1],P[3],P[4],P[5]);break;case 48:M.bg=this._updateAttrColor(M.bg,P[1],P[3],P[4],P[5]);break;case 58:M.extended=M.extended.clone(),M.extended.underlineColor=this._updateAttrColor(M.extended.underlineColor,P[1],P[3],P[4],P[5])}return q}_processUnderline(w,T){T.extended=T.extended.clone(),(!~w||w>5)&&(w=1),T.extended.underlineStyle=w,T.fg|=268435456,w===0&&(T.fg&=-268435457),T.updateExtended()}_processSGR0(w){w.fg=e.DEFAULT_ATTR_DATA.fg,w.bg=e.DEFAULT_ATTR_DATA.bg,w.extended=w.extended.clone(),w.extended.underlineStyle=0,w.extended.underlineColor&=-67108864,w.updateExtended()}charAttributes(w){if(w.length===1&&w.params[0]===0)return this._processSGR0(this._curAttrData),!0;const T=w.length;let M;const P=this._curAttrData;for(let W=0;W<T;W++)M=w.params[W],M>=30&&M<=37?(P.fg&=-50331904,P.fg|=16777216|M-30):M>=40&&M<=47?(P.bg&=-50331904,P.bg|=16777216|M-40):M>=90&&M<=97?(P.fg&=-50331904,P.fg|=16777224|M-90):M>=100&&M<=107?(P.bg&=-50331904,P.bg|=16777224|M-100):M===0?this._processSGR0(P):M===1?P.fg|=134217728:M===3?P.bg|=67108864:M===4?(P.fg|=268435456,this._processUnderline(w.hasSubParams(W)?w.getSubParams(W)[0]:1,P)):M===5?P.fg|=536870912:M===7?P.fg|=67108864:M===8?P.fg|=1073741824:M===9?P.fg|=2147483648:M===2?P.bg|=134217728:M===21?this._processUnderline(2,P):M===22?(P.fg&=-134217729,P.bg&=-134217729):M===23?P.bg&=-67108865:M===24?(P.fg&=-268435457,this._processUnderline(0,P)):M===25?P.fg&=-536870913:M===27?P.fg&=-67108865:M===28?P.fg&=-1073741825:M===29?P.fg&=2147483647:M===39?(P.fg&=-67108864,P.fg|=16777215&e.DEFAULT_ATTR_DATA.fg):M===49?(P.bg&=-67108864,P.bg|=16777215&e.DEFAULT_ATTR_DATA.bg):M===38||M===48||M===58?W+=this._extractColor(w,W,P):M===53?P.bg|=1073741824:M===55?P.bg&=-1073741825:M===59?(P.extended=P.extended.clone(),P.extended.underlineColor=-1,P.updateExtended()):M===100?(P.fg&=-67108864,P.fg|=16777215&e.DEFAULT_ATTR_DATA.fg,P.bg&=-67108864,P.bg|=16777215&e.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",M);return!0}deviceStatus(w){switch(w.params[0]){case 5:this._coreService.triggerDataEvent(`${a.C0.ESC}[0n`);break;case 6:const T=this._activeBuffer.y+1,M=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${a.C0.ESC}[${T};${M}R`)}return!0}deviceStatusPrivate(w){if(w.params[0]===6){const T=this._activeBuffer.y+1,M=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${a.C0.ESC}[?${T};${M}R`)}return!0}softReset(w){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=e.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(w){const T=w.params[0]||1;switch(T){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}const M=T%2==1;return this._optionsService.options.cursorBlink=M,!0}setScrollRegion(w){const T=w.params[0]||1;let M;return(w.length<2||(M=w.params[1])>this._bufferService.rows||M===0)&&(M=this._bufferService.rows),M>T&&(this._activeBuffer.scrollTop=T-1,this._activeBuffer.scrollBottom=M-1,this._setCursor(0,0)),!0}windowOptions(w){if(!B(w.params[0],this._optionsService.rawOptions.windowOptions))return!0;const T=w.length>1?w.params[1]:0;switch(w.params[0]){case 14:T!==2&&this._onRequestWindowsOptionsReport.fire(R.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(R.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${a.C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:T!==0&&T!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),T!==0&&T!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:T!==0&&T!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),T!==0&&T!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0}saveCursor(w){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(w){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(w){return this._windowTitle=w,this._onTitleChange.fire(w),!0}setIconName(w){return this._iconName=w,!0}setOrReportIndexedColor(w){const T=[],M=w.split(";");for(;M.length>1;){const P=M.shift(),W=M.shift();if(/^\d+$/.exec(P)){const q=parseInt(P);if(V(q))if(W==="?")T.push({type:0,index:q});else{const Z=(0,u.parseColor)(W);Z&&T.push({type:1,index:q,color:Z})}}}return T.length&&this._onColor.fire(T),!0}setHyperlink(w){const T=w.split(";");return!(T.length<2)&&(T[1]?this._createHyperlink(T[0],T[1]):!T[0]&&this._finishHyperlink())}_createHyperlink(w,T){this._getCurrentLinkId()&&this._finishHyperlink();const M=w.split(":");let P;const W=M.findIndex(q=>q.startsWith("id="));return W!==-1&&(P=M[W].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:P,uri:T}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(w,T){const M=w.split(";");for(let P=0;P<M.length&&!(T>=this._specialColors.length);++P,++T)if(M[P]==="?")this._onColor.fire([{type:0,index:this._specialColors[T]}]);else{const W=(0,u.parseColor)(M[P]);W&&this._onColor.fire([{type:1,index:this._specialColors[T],color:W}])}return!0}setOrReportFgColor(w){return this._setOrReportSpecialColor(w,0)}setOrReportBgColor(w){return this._setOrReportSpecialColor(w,1)}setOrReportCursorColor(w){return this._setOrReportSpecialColor(w,2)}restoreIndexedColor(w){if(!w)return this._onColor.fire([{type:2}]),!0;const T=[],M=w.split(";");for(let P=0;P<M.length;++P)if(/^\d+$/.exec(M[P])){const W=parseInt(M[P]);V(W)&&T.push({type:2,index:W})}return T.length&&this._onColor.fire(T),!0}restoreFgColor(w){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(w){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(w){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,c.DEFAULT_CHARSET),!0}selectCharset(w){return w.length!==2?(this.selectDefaultCharset(),!0):(w[0]==="/"||this._charsetService.setgCharset(S[w[0]],c.CHARSETS[w[1]]||c.DEFAULT_CHARSET),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){const w=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,w,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=e.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=e.DEFAULT_ATTR_DATA.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal}setgLevel(w){return this._charsetService.setgLevel(w),!0}screenAlignmentPattern(){const w=new i.CellData;w.content=4194373,w.fg=this._curAttrData.fg,w.bg=this._curAttrData.bg,this._setCursor(0,0);for(let T=0;T<this._bufferService.rows;++T){const M=this._activeBuffer.ybase+this._activeBuffer.y+T,P=this._activeBuffer.lines.get(M);P&&(P.fill(w),P.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(w,T){const M=this._bufferService.buffer,P=this._optionsService.rawOptions;return(W=>(this._coreService.triggerDataEvent(`${a.C0.ESC}${W}${a.C0.ESC}\\`),!0))(w==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:w==='"p'?'P1$r61;1"p':w==="r"?`P1$r${M.scrollTop+1};${M.scrollBottom+1}r`:w==="m"?"P1$r0m":w===" q"?`P1$r${{block:2,underline:4,bar:6}[P.cursorStyle]-(P.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(w,T){this._dirtyRowTracker.markRangeDirty(w,T)}}s.InputHandler=F;let $=class{constructor(K){this._bufferService=K,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(K){K<this.start?this.start=K:K>this.end&&(this.end=K)}markRangeDirty(K,w){K>w&&(O=K,K=w,w=O),K<this.start&&(this.start=K),w>this.end&&(this.end=w)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};function V(K){return 0<=K&&K<256}$=l([f(0,d.IBufferService)],$)},844:(D,s)=>{function o(l){for(const f of l)f.dispose();l.length=0}Object.defineProperty(s,"__esModule",{value:!0}),s.getDisposeArrayDisposable=s.disposeArray=s.toDisposable=s.MutableDisposable=s.Disposable=void 0,s.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const l of this._disposables)l.dispose();this._disposables.length=0}register(l){return this._disposables.push(l),l}unregister(l){const f=this._disposables.indexOf(l);f!==-1&&this._disposables.splice(f,1)}},s.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(l){var f;this._isDisposed||l===this._value||((f=this._value)===null||f===void 0||f.dispose(),this._value=l)}clear(){this.value=void 0}dispose(){var l;this._isDisposed=!0,(l=this._value)===null||l===void 0||l.dispose(),this._value=void 0}},s.toDisposable=function(l){return{dispose:l}},s.disposeArray=o,s.getDisposeArrayDisposable=function(l){return{dispose:()=>o(l)}}},1505:(D,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.FourKeyMap=s.TwoKeyMap=void 0;class o{constructor(){this._data={}}set(f,a,c){this._data[f]||(this._data[f]={}),this._data[f][a]=c}get(f,a){return this._data[f]?this._data[f][a]:void 0}clear(){this._data={}}}s.TwoKeyMap=o,s.FourKeyMap=class{constructor(){this._data=new o}set(l,f,a,c,p){this._data.get(l,f)||this._data.set(l,f,new o),this._data.get(l,f).set(a,c,p)}get(l,f,a,c){var p;return(p=this._data.get(l,f))===null||p===void 0?void 0:p.get(a,c)}clear(){this._data.clear()}}},6114:(D,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.isChromeOS=s.isLinux=s.isWindows=s.isIphone=s.isIpad=s.isMac=s.getSafariVersion=s.isSafari=s.isLegacyEdge=s.isFirefox=s.isNode=void 0,s.isNode=typeof navigator>"u";const o=s.isNode?"node":navigator.userAgent,l=s.isNode?"node":navigator.platform;s.isFirefox=o.includes("Firefox"),s.isLegacyEdge=o.includes("Edge"),s.isSafari=/^((?!chrome|android).)*safari/i.test(o),s.getSafariVersion=function(){if(!s.isSafari)return 0;const f=o.match(/Version\/(\d+)/);return f===null||f.length<2?0:parseInt(f[1])},s.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(l),s.isIpad=l==="iPad",s.isIphone=l==="iPhone",s.isWindows=["Windows","Win16","Win32","WinCE"].includes(l),s.isLinux=l.indexOf("Linux")>=0,s.isChromeOS=/\bCrOS\b/.test(o)},6106:(D,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.SortedList=void 0;let o=0;s.SortedList=class{constructor(l){this._getKey=l,this._array=[]}clear(){this._array.length=0}insert(l){this._array.length!==0?(o=this._search(this._getKey(l)),this._array.splice(o,0,l)):this._array.push(l)}delete(l){if(this._array.length===0)return!1;const f=this._getKey(l);if(f===void 0||(o=this._search(f),o===-1)||this._getKey(this._array[o])!==f)return!1;do if(this._array[o]===l)return this._array.splice(o,1),!0;while(++o<this._array.length&&this._getKey(this._array[o])===f);return!1}*getKeyIterator(l){if(this._array.length!==0&&(o=this._search(l),!(o<0||o>=this._array.length)&&this._getKey(this._array[o])===l))do yield this._array[o];while(++o<this._array.length&&this._getKey(this._array[o])===l)}forEachByKey(l,f){if(this._array.length!==0&&(o=this._search(l),!(o<0||o>=this._array.length)&&this._getKey(this._array[o])===l))do f(this._array[o]);while(++o<this._array.length&&this._getKey(this._array[o])===l)}values(){return[...this._array].values()}_search(l){let f=0,a=this._array.length-1;for(;a>=f;){let c=f+a>>1;const p=this._getKey(this._array[c]);if(p>l)a=c-1;else{if(!(p<l)){for(;c>0&&this._getKey(this._array[c-1])===l;)c--;return c}f=c+1}}return f}}},7226:(D,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.DebouncedIdleTask=s.IdleTaskQueue=s.PriorityTaskQueue=void 0;const l=o(6114);class f{constructor(){this._tasks=[],this._i=0}enqueue(p){this._tasks.push(p),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(p){this._idleCallback=void 0;let b=0,v=0,e=p.timeRemaining(),r=0;for(;this._i<this._tasks.length;){if(b=Date.now(),this._tasks[this._i]()||this._i++,b=Math.max(1,Date.now()-b),v=Math.max(b,v),r=p.timeRemaining(),1.5*v>r)return e-b<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(e-b))}ms`),void this._start();e=r}this.clear()}}class a extends f{_requestCallback(p){return setTimeout(()=>p(this._createDeadline(16)))}_cancelCallback(p){clearTimeout(p)}_createDeadline(p){const b=Date.now()+p;return{timeRemaining:()=>Math.max(0,b-Date.now())}}}s.PriorityTaskQueue=a,s.IdleTaskQueue=!l.isNode&&"requestIdleCallback"in window?class extends f{_requestCallback(c){return requestIdleCallback(c)}_cancelCallback(c){cancelIdleCallback(c)}}:a,s.DebouncedIdleTask=class{constructor(){this._queue=new s.IdleTaskQueue}set(c){this._queue.clear(),this._queue.enqueue(c)}flush(){this._queue.flush()}}},9282:(D,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.updateWindowsModeWrappedState=void 0;const l=o(643);s.updateWindowsModeWrappedState=function(f){const a=f.buffer.lines.get(f.buffer.ybase+f.buffer.y-1),c=a==null?void 0:a.get(f.cols-1),p=f.buffer.lines.get(f.buffer.ybase+f.buffer.y);p&&c&&(p.isWrapped=c[l.CHAR_DATA_CODE_INDEX]!==l.NULL_CELL_CODE&&c[l.CHAR_DATA_CODE_INDEX]!==l.WHITESPACE_CELL_CODE)}},3734:(D,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ExtendedAttrs=s.AttributeData=void 0;class o{constructor(){this.fg=0,this.bg=0,this.extended=new l}static toColorRGB(a){return[a>>>16&255,a>>>8&255,255&a]}static fromColorRGB(a){return(255&a[0])<<16|(255&a[1])<<8|255&a[2]}clone(){const a=new o;return a.fg=this.fg,a.bg=this.bg,a.extended=this.extended.clone(),a}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}}s.AttributeData=o;class l{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(a){this._ext=a}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(a){this._ext&=-469762049,this._ext|=a<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(a){this._ext&=-67108864,this._ext|=67108863&a}get urlId(){return this._urlId}set urlId(a){this._urlId=a}constructor(a=0,c=0){this._ext=0,this._urlId=0,this._ext=a,this._urlId=c}clone(){return new l(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}s.ExtendedAttrs=l},9092:(D,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Buffer=s.MAX_BUFFER_SIZE=void 0;const l=o(6349),f=o(7226),a=o(3734),c=o(8437),p=o(4634),b=o(511),v=o(643),e=o(4863),r=o(7116);s.MAX_BUFFER_SIZE=4294967295,s.Buffer=class{constructor(t,i,h){this._hasScrollback=t,this._optionsService=i,this._bufferService=h,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=c.DEFAULT_ATTR_DATA.clone(),this.savedCharset=r.DEFAULT_CHARSET,this.markers=[],this._nullCell=b.CellData.fromCharData([0,v.NULL_CELL_CHAR,v.NULL_CELL_WIDTH,v.NULL_CELL_CODE]),this._whitespaceCell=b.CellData.fromCharData([0,v.WHITESPACE_CELL_CHAR,v.WHITESPACE_CELL_WIDTH,v.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._memoryCleanupQueue=new f.IdleTaskQueue,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new l.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(t){return t?(this._nullCell.fg=t.fg,this._nullCell.bg=t.bg,this._nullCell.extended=t.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new a.ExtendedAttrs),this._nullCell}getWhitespaceCell(t){return t?(this._whitespaceCell.fg=t.fg,this._whitespaceCell.bg=t.bg,this._whitespaceCell.extended=t.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new a.ExtendedAttrs),this._whitespaceCell}getBlankLine(t,i){return new c.BufferLine(this._bufferService.cols,this.getNullCell(t),i)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){const t=this.ybase+this.y-this.ydisp;return t>=0&&t<this._rows}_getCorrectBufferLength(t){if(!this._hasScrollback)return t;const i=t+this._optionsService.rawOptions.scrollback;return i>s.MAX_BUFFER_SIZE?s.MAX_BUFFER_SIZE:i}fillViewportRows(t){if(this.lines.length===0){t===void 0&&(t=c.DEFAULT_ATTR_DATA);let i=this._rows;for(;i--;)this.lines.push(this.getBlankLine(t))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new l.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(t,i){const h=this.getNullCell(c.DEFAULT_ATTR_DATA);let d=0;const m=this._getCorrectBufferLength(i);if(m>this.lines.maxLength&&(this.lines.maxLength=m),this.lines.length>0){if(this._cols<t)for(let u=0;u<this.lines.length;u++)d+=+this.lines.get(u).resize(t,h);let C=0;if(this._rows<i)for(let u=this._rows;u<i;u++)this.lines.length<i+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new c.BufferLine(t,h)):this.ybase>0&&this.lines.length<=this.ybase+this.y+C+1?(this.ybase--,C++,this.ydisp>0&&this.ydisp--):this.lines.push(new c.BufferLine(t,h)));else for(let u=this._rows;u>i;u--)this.lines.length>i+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(m<this.lines.maxLength){const u=this.lines.length-m;u>0&&(this.lines.trimStart(u),this.ybase=Math.max(this.ybase-u,0),this.ydisp=Math.max(this.ydisp-u,0),this.savedY=Math.max(this.savedY-u,0)),this.lines.maxLength=m}this.x=Math.min(this.x,t-1),this.y=Math.min(this.y,i-1),C&&(this.y+=C),this.savedX=Math.min(this.savedX,t-1),this.scrollTop=0}if(this.scrollBottom=i-1,this._isReflowEnabled&&(this._reflow(t,i),this._cols>t))for(let C=0;C<this.lines.length;C++)d+=+this.lines.get(C).resize(t,h);this._cols=t,this._rows=i,this._memoryCleanupQueue.clear(),d>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue(()=>this._batchedMemoryCleanup()))}_batchedMemoryCleanup(){let t=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,t=!1);let i=0;for(;this._memoryCleanupPosition<this.lines.length;)if(i+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),i>100)return!0;return t}get _isReflowEnabled(){const t=this._optionsService.rawOptions.windowsPty;return t&&t.buildNumber?this._hasScrollback&&t.backend==="conpty"&&t.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(t,i){this._cols!==t&&(t>this._cols?this._reflowLarger(t,i):this._reflowSmaller(t,i))}_reflowLarger(t,i){const h=(0,p.reflowLargerGetLinesToRemove)(this.lines,this._cols,t,this.ybase+this.y,this.getNullCell(c.DEFAULT_ATTR_DATA));if(h.length>0){const d=(0,p.reflowLargerCreateNewLayout)(this.lines,h);(0,p.reflowLargerApplyNewLayout)(this.lines,d.layout),this._reflowLargerAdjustViewport(t,i,d.countRemoved)}}_reflowLargerAdjustViewport(t,i,h){const d=this.getNullCell(c.DEFAULT_ATTR_DATA);let m=h;for(;m-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<i&&this.lines.push(new c.BufferLine(t,d))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-h,0)}_reflowSmaller(t,i){const h=this.getNullCell(c.DEFAULT_ATTR_DATA),d=[];let m=0;for(let C=this.lines.length-1;C>=0;C--){let u=this.lines.get(C);if(!u||!u.isWrapped&&u.getTrimmedLength()<=t)continue;const S=[u];for(;u.isWrapped&&C>0;)u=this.lines.get(--C),S.unshift(u);const k=this.ybase+this.y;if(k>=C&&k<C+S.length)continue;const B=S[S.length-1].getTrimmedLength(),R=(0,p.reflowSmallerGetNewLineLengths)(S,this._cols,t),O=R.length-S.length;let F;F=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+O):Math.max(0,this.lines.length-this.lines.maxLength+O);const $=[];for(let P=0;P<O;P++){const W=this.getBlankLine(c.DEFAULT_ATTR_DATA,!0);$.push(W)}$.length>0&&(d.push({start:C+S.length+m,newLines:$}),m+=$.length),S.push(...$);let V=R.length-1,K=R[V];K===0&&(V--,K=R[V]);let w=S.length-O-1,T=B;for(;w>=0;){const P=Math.min(T,K);if(S[V]===void 0)break;if(S[V].copyCellsFrom(S[w],T-P,K-P,P,!0),K-=P,K===0&&(V--,K=R[V]),T-=P,T===0){w--;const W=Math.max(w,0);T=(0,p.getWrappedLineTrimmedLength)(S,W,this._cols)}}for(let P=0;P<S.length;P++)R[P]<t&&S[P].setCell(R[P],h);let M=O-F;for(;M-- >0;)this.ybase===0?this.y<i-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+m)-i&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+O,this.ybase+i-1)}if(d.length>0){const C=[],u=[];for(let V=0;V<this.lines.length;V++)u.push(this.lines.get(V));const S=this.lines.length;let k=S-1,B=0,R=d[B];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+m);let O=0;for(let V=Math.min(this.lines.maxLength-1,S+m-1);V>=0;V--)if(R&&R.start>k+O){for(let K=R.newLines.length-1;K>=0;K--)this.lines.set(V--,R.newLines[K]);V++,C.push({index:k+1,amount:R.newLines.length}),O+=R.newLines.length,R=d[++B]}else this.lines.set(V,u[k--]);let F=0;for(let V=C.length-1;V>=0;V--)C[V].index+=F,this.lines.onInsertEmitter.fire(C[V]),F+=C[V].amount;const $=Math.max(0,S+m-this.lines.maxLength);$>0&&this.lines.onTrimEmitter.fire($)}}translateBufferLineToString(t,i,h=0,d){const m=this.lines.get(t);return m?m.translateToString(i,h,d):""}getWrappedRangeForLine(t){let i=t,h=t;for(;i>0&&this.lines.get(i).isWrapped;)i--;for(;h+1<this.lines.length&&this.lines.get(h+1).isWrapped;)h++;return{first:i,last:h}}setupTabStops(t){for(t!=null?this.tabs[t]||(t=this.prevStop(t)):(this.tabs={},t=0);t<this._cols;t+=this._optionsService.rawOptions.tabStopWidth)this.tabs[t]=!0}prevStop(t){for(t==null&&(t=this.x);!this.tabs[--t]&&t>0;);return t>=this._cols?this._cols-1:t<0?0:t}nextStop(t){for(t==null&&(t=this.x);!this.tabs[++t]&&t<this._cols;);return t>=this._cols?this._cols-1:t<0?0:t}clearMarkers(t){this._isClearing=!0;for(let i=0;i<this.markers.length;i++)this.markers[i].line===t&&(this.markers[i].dispose(),this.markers.splice(i--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let t=0;t<this.markers.length;t++)this.markers[t].dispose(),this.markers.splice(t--,1);this._isClearing=!1}addMarker(t){const i=new e.Marker(t);return this.markers.push(i),i.register(this.lines.onTrim(h=>{i.line-=h,i.line<0&&i.dispose()})),i.register(this.lines.onInsert(h=>{i.line>=h.index&&(i.line+=h.amount)})),i.register(this.lines.onDelete(h=>{i.line>=h.index&&i.line<h.index+h.amount&&i.dispose(),i.line>h.index&&(i.line-=h.amount)})),i.register(i.onDispose(()=>this._removeMarker(i))),i}_removeMarker(t){this._isClearing||this.markers.splice(this.markers.indexOf(t),1)}}},8437:(D,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BufferLine=s.DEFAULT_ATTR_DATA=void 0;const l=o(3734),f=o(511),a=o(643),c=o(482);s.DEFAULT_ATTR_DATA=Object.freeze(new l.AttributeData);let p=0;class b{constructor(e,r,t=!1){this.isWrapped=t,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*e);const i=r||f.CellData.fromCharData([0,a.NULL_CELL_CHAR,a.NULL_CELL_WIDTH,a.NULL_CELL_CODE]);for(let h=0;h<e;++h)this.setCell(h,i);this.length=e}get(e){const r=this._data[3*e+0],t=2097151&r;return[this._data[3*e+1],2097152&r?this._combined[e]:t?(0,c.stringFromCodePoint)(t):"",r>>22,2097152&r?this._combined[e].charCodeAt(this._combined[e].length-1):t]}set(e,r){this._data[3*e+1]=r[a.CHAR_DATA_ATTR_INDEX],r[a.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[e]=r[1],this._data[3*e+0]=2097152|e|r[a.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*e+0]=r[a.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|r[a.CHAR_DATA_WIDTH_INDEX]<<22}getWidth(e){return this._data[3*e+0]>>22}hasWidth(e){return 12582912&this._data[3*e+0]}getFg(e){return this._data[3*e+1]}getBg(e){return this._data[3*e+2]}hasContent(e){return 4194303&this._data[3*e+0]}getCodePoint(e){const r=this._data[3*e+0];return 2097152&r?this._combined[e].charCodeAt(this._combined[e].length-1):2097151&r}isCombined(e){return 2097152&this._data[3*e+0]}getString(e){const r=this._data[3*e+0];return 2097152&r?this._combined[e]:2097151&r?(0,c.stringFromCodePoint)(2097151&r):""}isProtected(e){return 536870912&this._data[3*e+2]}loadCell(e,r){return p=3*e,r.content=this._data[p+0],r.fg=this._data[p+1],r.bg=this._data[p+2],2097152&r.content&&(r.combinedData=this._combined[e]),268435456&r.bg&&(r.extended=this._extendedAttrs[e]),r}setCell(e,r){2097152&r.content&&(this._combined[e]=r.combinedData),268435456&r.bg&&(this._extendedAttrs[e]=r.extended),this._data[3*e+0]=r.content,this._data[3*e+1]=r.fg,this._data[3*e+2]=r.bg}setCellFromCodePoint(e,r,t,i,h,d){268435456&h&&(this._extendedAttrs[e]=d),this._data[3*e+0]=r|t<<22,this._data[3*e+1]=i,this._data[3*e+2]=h}addCodepointToCell(e,r){let t=this._data[3*e+0];2097152&t?this._combined[e]+=(0,c.stringFromCodePoint)(r):(2097151&t?(this._combined[e]=(0,c.stringFromCodePoint)(2097151&t)+(0,c.stringFromCodePoint)(r),t&=-2097152,t|=2097152):t=r|4194304,this._data[3*e+0]=t)}insertCells(e,r,t,i){if((e%=this.length)&&this.getWidth(e-1)===2&&this.setCellFromCodePoint(e-1,0,1,(i==null?void 0:i.fg)||0,(i==null?void 0:i.bg)||0,(i==null?void 0:i.extended)||new l.ExtendedAttrs),r<this.length-e){const h=new f.CellData;for(let d=this.length-e-r-1;d>=0;--d)this.setCell(e+r+d,this.loadCell(e+d,h));for(let d=0;d<r;++d)this.setCell(e+d,t)}else for(let h=e;h<this.length;++h)this.setCell(h,t);this.getWidth(this.length-1)===2&&this.setCellFromCodePoint(this.length-1,0,1,(i==null?void 0:i.fg)||0,(i==null?void 0:i.bg)||0,(i==null?void 0:i.extended)||new l.ExtendedAttrs)}deleteCells(e,r,t,i){if(e%=this.length,r<this.length-e){const h=new f.CellData;for(let d=0;d<this.length-e-r;++d)this.setCell(e+d,this.loadCell(e+r+d,h));for(let d=this.length-r;d<this.length;++d)this.setCell(d,t)}else for(let h=e;h<this.length;++h)this.setCell(h,t);e&&this.getWidth(e-1)===2&&this.setCellFromCodePoint(e-1,0,1,(i==null?void 0:i.fg)||0,(i==null?void 0:i.bg)||0,(i==null?void 0:i.extended)||new l.ExtendedAttrs),this.getWidth(e)!==0||this.hasContent(e)||this.setCellFromCodePoint(e,0,1,(i==null?void 0:i.fg)||0,(i==null?void 0:i.bg)||0,(i==null?void 0:i.extended)||new l.ExtendedAttrs)}replaceCells(e,r,t,i,h=!1){if(h)for(e&&this.getWidth(e-1)===2&&!this.isProtected(e-1)&&this.setCellFromCodePoint(e-1,0,1,(i==null?void 0:i.fg)||0,(i==null?void 0:i.bg)||0,(i==null?void 0:i.extended)||new l.ExtendedAttrs),r<this.length&&this.getWidth(r-1)===2&&!this.isProtected(r)&&this.setCellFromCodePoint(r,0,1,(i==null?void 0:i.fg)||0,(i==null?void 0:i.bg)||0,(i==null?void 0:i.extended)||new l.ExtendedAttrs);e<r&&e<this.length;)this.isProtected(e)||this.setCell(e,t),e++;else for(e&&this.getWidth(e-1)===2&&this.setCellFromCodePoint(e-1,0,1,(i==null?void 0:i.fg)||0,(i==null?void 0:i.bg)||0,(i==null?void 0:i.extended)||new l.ExtendedAttrs),r<this.length&&this.getWidth(r-1)===2&&this.setCellFromCodePoint(r,0,1,(i==null?void 0:i.fg)||0,(i==null?void 0:i.bg)||0,(i==null?void 0:i.extended)||new l.ExtendedAttrs);e<r&&e<this.length;)this.setCell(e++,t)}resize(e,r){if(e===this.length)return 4*this._data.length*2<this._data.buffer.byteLength;const t=3*e;if(e>this.length){if(this._data.buffer.byteLength>=4*t)this._data=new Uint32Array(this._data.buffer,0,t);else{const i=new Uint32Array(t);i.set(this._data),this._data=i}for(let i=this.length;i<e;++i)this.setCell(i,r)}else{this._data=this._data.subarray(0,t);const i=Object.keys(this._combined);for(let d=0;d<i.length;d++){const m=parseInt(i[d],10);m>=e&&delete this._combined[m]}const h=Object.keys(this._extendedAttrs);for(let d=0;d<h.length;d++){const m=parseInt(h[d],10);m>=e&&delete this._extendedAttrs[m]}}return this.length=e,4*t*2<this._data.buffer.byteLength}cleanupMemory(){if(4*this._data.length*2<this._data.buffer.byteLength){const e=new Uint32Array(this._data.length);return e.set(this._data),this._data=e,1}return 0}fill(e,r=!1){if(r)for(let t=0;t<this.length;++t)this.isProtected(t)||this.setCell(t,e);else{this._combined={},this._extendedAttrs={};for(let t=0;t<this.length;++t)this.setCell(t,e)}}copyFrom(e){this.length!==e.length?this._data=new Uint32Array(e._data):this._data.set(e._data),this.length=e.length,this._combined={};for(const r in e._combined)this._combined[r]=e._combined[r];this._extendedAttrs={};for(const r in e._extendedAttrs)this._extendedAttrs[r]=e._extendedAttrs[r];this.isWrapped=e.isWrapped}clone(){const e=new b(0);e._data=new Uint32Array(this._data),e.length=this.length;for(const r in this._combined)e._combined[r]=this._combined[r];for(const r in this._extendedAttrs)e._extendedAttrs[r]=this._extendedAttrs[r];return e.isWrapped=this.isWrapped,e}getTrimmedLength(){for(let e=this.length-1;e>=0;--e)if(4194303&this._data[3*e+0])return e+(this._data[3*e+0]>>22);return 0}getNoBgTrimmedLength(){for(let e=this.length-1;e>=0;--e)if(4194303&this._data[3*e+0]||50331648&this._data[3*e+2])return e+(this._data[3*e+0]>>22);return 0}copyCellsFrom(e,r,t,i,h){const d=e._data;if(h)for(let C=i-1;C>=0;C--){for(let u=0;u<3;u++)this._data[3*(t+C)+u]=d[3*(r+C)+u];268435456&d[3*(r+C)+2]&&(this._extendedAttrs[t+C]=e._extendedAttrs[r+C])}else for(let C=0;C<i;C++){for(let u=0;u<3;u++)this._data[3*(t+C)+u]=d[3*(r+C)+u];268435456&d[3*(r+C)+2]&&(this._extendedAttrs[t+C]=e._extendedAttrs[r+C])}const m=Object.keys(e._combined);for(let C=0;C<m.length;C++){const u=parseInt(m[C],10);u>=r&&(this._combined[u-r+t]=e._combined[u])}}translateToString(e=!1,r=0,t=this.length){e&&(t=Math.min(t,this.getTrimmedLength()));let i="";for(;r<t;){const h=this._data[3*r+0],d=2097151&h;i+=2097152&h?this._combined[r]:d?(0,c.stringFromCodePoint)(d):a.WHITESPACE_CELL_CHAR,r+=h>>22||1}return i}}s.BufferLine=b},4841:(D,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.getRangeLength=void 0,s.getRangeLength=function(o,l){if(o.start.y>o.end.y)throw new Error(`Buffer range end (${o.end.x}, ${o.end.y}) cannot be before start (${o.start.x}, ${o.start.y})`);return l*(o.end.y-o.start.y)+(o.end.x-o.start.x+1)}},4634:(D,s)=>{function o(l,f,a){if(f===l.length-1)return l[f].getTrimmedLength();const c=!l[f].hasContent(a-1)&&l[f].getWidth(a-1)===1,p=l[f+1].getWidth(0)===2;return c&&p?a-1:a}Object.defineProperty(s,"__esModule",{value:!0}),s.getWrappedLineTrimmedLength=s.reflowSmallerGetNewLineLengths=s.reflowLargerApplyNewLayout=s.reflowLargerCreateNewLayout=s.reflowLargerGetLinesToRemove=void 0,s.reflowLargerGetLinesToRemove=function(l,f,a,c,p){const b=[];for(let v=0;v<l.length-1;v++){let e=v,r=l.get(++e);if(!r.isWrapped)continue;const t=[l.get(v)];for(;e<l.length&&r.isWrapped;)t.push(r),r=l.get(++e);if(c>=v&&c<e){v+=t.length-1;continue}let i=0,h=o(t,i,f),d=1,m=0;for(;d<t.length;){const u=o(t,d,f),S=u-m,k=a-h,B=Math.min(S,k);t[i].copyCellsFrom(t[d],m,h,B,!1),h+=B,h===a&&(i++,h=0),m+=B,m===u&&(d++,m=0),h===0&&i!==0&&t[i-1].getWidth(a-1)===2&&(t[i].copyCellsFrom(t[i-1],a-1,h++,1,!1),t[i-1].setCell(a-1,p))}t[i].replaceCells(h,a,p);let C=0;for(let u=t.length-1;u>0&&(u>i||t[u].getTrimmedLength()===0);u--)C++;C>0&&(b.push(v+t.length-C),b.push(C)),v+=t.length-1}return b},s.reflowLargerCreateNewLayout=function(l,f){const a=[];let c=0,p=f[c],b=0;for(let v=0;v<l.length;v++)if(p===v){const e=f[++c];l.onDeleteEmitter.fire({index:v-b,amount:e}),v+=e-1,b+=e,p=f[++c]}else a.push(v);return{layout:a,countRemoved:b}},s.reflowLargerApplyNewLayout=function(l,f){const a=[];for(let c=0;c<f.length;c++)a.push(l.get(f[c]));for(let c=0;c<a.length;c++)l.set(c,a[c]);l.length=f.length},s.reflowSmallerGetNewLineLengths=function(l,f,a){const c=[],p=l.map((r,t)=>o(l,t,f)).reduce((r,t)=>r+t);let b=0,v=0,e=0;for(;e<p;){if(p-e<a){c.push(p-e);break}b+=a;const r=o(l,v,f);b>r&&(b-=r,v++);const t=l[v].getWidth(b-1)===2;t&&b--;const i=t?a-1:a;c.push(i),e+=i}return c},s.getWrappedLineTrimmedLength=o},5295:(D,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BufferSet=void 0;const l=o(8460),f=o(844),a=o(9092);class c extends f.Disposable{constructor(b,v){super(),this._optionsService=b,this._bufferService=v,this._onBufferActivate=this.register(new l.EventEmitter),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.resize(this._bufferService.cols,this._bufferService.rows))),this.register(this._optionsService.onSpecificOptionChange("tabStopWidth",()=>this.setupTabStops()))}reset(){this._normal=new a.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new a.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(b){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(b),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(b,v){this._normal.resize(b,v),this._alt.resize(b,v),this.setupTabStops(b)}setupTabStops(b){this._normal.setupTabStops(b),this._alt.setupTabStops(b)}}s.BufferSet=c},511:(D,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CellData=void 0;const l=o(482),f=o(643),a=o(3734);class c extends a.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new a.ExtendedAttrs,this.combinedData=""}static fromCharData(b){const v=new c;return v.setFromCharData(b),v}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,l.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(b){this.fg=b[f.CHAR_DATA_ATTR_INDEX],this.bg=0;let v=!1;if(b[f.CHAR_DATA_CHAR_INDEX].length>2)v=!0;else if(b[f.CHAR_DATA_CHAR_INDEX].length===2){const e=b[f.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=e&&e<=56319){const r=b[f.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=r&&r<=57343?this.content=1024*(e-55296)+r-56320+65536|b[f.CHAR_DATA_WIDTH_INDEX]<<22:v=!0}else v=!0}else this.content=b[f.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|b[f.CHAR_DATA_WIDTH_INDEX]<<22;v&&(this.combinedData=b[f.CHAR_DATA_CHAR_INDEX],this.content=2097152|b[f.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}s.CellData=c},643:(D,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.WHITESPACE_CELL_CODE=s.WHITESPACE_CELL_WIDTH=s.WHITESPACE_CELL_CHAR=s.NULL_CELL_CODE=s.NULL_CELL_WIDTH=s.NULL_CELL_CHAR=s.CHAR_DATA_CODE_INDEX=s.CHAR_DATA_WIDTH_INDEX=s.CHAR_DATA_CHAR_INDEX=s.CHAR_DATA_ATTR_INDEX=s.DEFAULT_EXT=s.DEFAULT_ATTR=s.DEFAULT_COLOR=void 0,s.DEFAULT_COLOR=0,s.DEFAULT_ATTR=256|s.DEFAULT_COLOR<<9,s.DEFAULT_EXT=0,s.CHAR_DATA_ATTR_INDEX=0,s.CHAR_DATA_CHAR_INDEX=1,s.CHAR_DATA_WIDTH_INDEX=2,s.CHAR_DATA_CODE_INDEX=3,s.NULL_CELL_CHAR="",s.NULL_CELL_WIDTH=1,s.NULL_CELL_CODE=0,s.WHITESPACE_CELL_CHAR=" ",s.WHITESPACE_CELL_WIDTH=1,s.WHITESPACE_CELL_CODE=32},4863:(D,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Marker=void 0;const l=o(8460),f=o(844);class a{get id(){return this._id}constructor(p){this.line=p,this.isDisposed=!1,this._disposables=[],this._id=a._nextId++,this._onDispose=this.register(new l.EventEmitter),this.onDispose=this._onDispose.event}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),(0,f.disposeArray)(this._disposables),this._disposables.length=0)}register(p){return this._disposables.push(p),p}}s.Marker=a,a._nextId=1},7116:(D,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.DEFAULT_CHARSET=s.CHARSETS=void 0,s.CHARSETS={},s.DEFAULT_CHARSET=s.CHARSETS.B,s.CHARSETS[0]={"`":"◆",a:"▒",b:"␉",c:"␌",d:"␍",e:"␊",f:"°",g:"±",h:"␤",i:"␋",j:"┘",k:"┐",l:"┌",m:"└",n:"┼",o:"⎺",p:"⎻",q:"─",r:"⎼",s:"⎽",t:"├",u:"┤",v:"┴",w:"┬",x:"│",y:"≤",z:"≥","{":"π","|":"≠","}":"£","~":"·"},s.CHARSETS.A={"#":"£"},s.CHARSETS.B=void 0,s.CHARSETS[4]={"#":"£","@":"¾","[":"ij","\\":"½","]":"|","{":"¨","|":"f","}":"¼","~":"´"},s.CHARSETS.C=s.CHARSETS[5]={"[":"Ä","\\":"Ö","]":"Å","^":"Ü","`":"é","{":"ä","|":"ö","}":"å","~":"ü"},s.CHARSETS.R={"#":"£","@":"à","[":"°","\\":"ç","]":"§","{":"é","|":"ù","}":"è","~":"¨"},s.CHARSETS.Q={"@":"à","[":"â","\\":"ç","]":"ê","^":"î","`":"ô","{":"é","|":"ù","}":"è","~":"û"},s.CHARSETS.K={"@":"§","[":"Ä","\\":"Ö","]":"Ü","{":"ä","|":"ö","}":"ü","~":"ß"},s.CHARSETS.Y={"#":"£","@":"§","[":"°","\\":"ç","]":"é","`":"ù","{":"à","|":"ò","}":"è","~":"ì"},s.CHARSETS.E=s.CHARSETS[6]={"@":"Ä","[":"Æ","\\":"Ø","]":"Å","^":"Ü","`":"ä","{":"æ","|":"ø","}":"å","~":"ü"},s.CHARSETS.Z={"#":"£","@":"§","[":"¡","\\":"Ñ","]":"¿","{":"°","|":"ñ","}":"ç"},s.CHARSETS.H=s.CHARSETS[7]={"@":"É","[":"Ä","\\":"Ö","]":"Å","^":"Ü","`":"é","{":"ä","|":"ö","}":"å","~":"ü"},s.CHARSETS["="]={"#":"ù","@":"à","[":"é","\\":"ç","]":"ê","^":"î",_:"è","`":"ô","{":"ä","|":"ö","}":"ü","~":"û"}},2584:(D,s)=>{var o,l,f;Object.defineProperty(s,"__esModule",{value:!0}),s.C1_ESCAPED=s.C1=s.C0=void 0,function(a){a.NUL="\0",a.SOH="",a.STX="",a.ETX="",a.EOT="",a.ENQ="",a.ACK="",a.BEL="\x07",a.BS="\b",a.HT="	",a.LF=`
`,a.VT="\v",a.FF="\f",a.CR="\r",a.SO="",a.SI="",a.DLE="",a.DC1="",a.DC2="",a.DC3="",a.DC4="",a.NAK="",a.SYN="",a.ETB="",a.CAN="",a.EM="",a.SUB="",a.ESC="\x1B",a.FS="",a.GS="",a.RS="",a.US="",a.SP=" ",a.DEL=""}(o||(s.C0=o={})),function(a){a.PAD="",a.HOP="",a.BPH="",a.NBH="",a.IND="",a.NEL="",a.SSA="",a.ESA="",a.HTS="",a.HTJ="",a.VTS="",a.PLD="",a.PLU="",a.RI="",a.SS2="",a.SS3="",a.DCS="",a.PU1="",a.PU2="",a.STS="",a.CCH="",a.MW="",a.SPA="",a.EPA="",a.SOS="",a.SGCI="",a.SCI="",a.CSI="",a.ST="",a.OSC="",a.PM="",a.APC=""}(l||(s.C1=l={})),function(a){a.ST=`${o.ESC}\\`}(f||(s.C1_ESCAPED=f={}))},7399:(D,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.evaluateKeyboardEvent=void 0;const l=o(2584),f={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};s.evaluateKeyboardEvent=function(a,c,p,b){const v={type:0,cancel:!1,key:void 0},e=(a.shiftKey?1:0)|(a.altKey?2:0)|(a.ctrlKey?4:0)|(a.metaKey?8:0);switch(a.keyCode){case 0:a.key==="UIKeyInputUpArrow"?v.key=c?l.C0.ESC+"OA":l.C0.ESC+"[A":a.key==="UIKeyInputLeftArrow"?v.key=c?l.C0.ESC+"OD":l.C0.ESC+"[D":a.key==="UIKeyInputRightArrow"?v.key=c?l.C0.ESC+"OC":l.C0.ESC+"[C":a.key==="UIKeyInputDownArrow"&&(v.key=c?l.C0.ESC+"OB":l.C0.ESC+"[B");break;case 8:if(a.altKey){v.key=l.C0.ESC+l.C0.DEL;break}v.key=l.C0.DEL;break;case 9:if(a.shiftKey){v.key=l.C0.ESC+"[Z";break}v.key=l.C0.HT,v.cancel=!0;break;case 13:v.key=a.altKey?l.C0.ESC+l.C0.CR:l.C0.CR,v.cancel=!0;break;case 27:v.key=l.C0.ESC,a.altKey&&(v.key=l.C0.ESC+l.C0.ESC),v.cancel=!0;break;case 37:if(a.metaKey)break;e?(v.key=l.C0.ESC+"[1;"+(e+1)+"D",v.key===l.C0.ESC+"[1;3D"&&(v.key=l.C0.ESC+(p?"b":"[1;5D"))):v.key=c?l.C0.ESC+"OD":l.C0.ESC+"[D";break;case 39:if(a.metaKey)break;e?(v.key=l.C0.ESC+"[1;"+(e+1)+"C",v.key===l.C0.ESC+"[1;3C"&&(v.key=l.C0.ESC+(p?"f":"[1;5C"))):v.key=c?l.C0.ESC+"OC":l.C0.ESC+"[C";break;case 38:if(a.metaKey)break;e?(v.key=l.C0.ESC+"[1;"+(e+1)+"A",p||v.key!==l.C0.ESC+"[1;3A"||(v.key=l.C0.ESC+"[1;5A")):v.key=c?l.C0.ESC+"OA":l.C0.ESC+"[A";break;case 40:if(a.metaKey)break;e?(v.key=l.C0.ESC+"[1;"+(e+1)+"B",p||v.key!==l.C0.ESC+"[1;3B"||(v.key=l.C0.ESC+"[1;5B")):v.key=c?l.C0.ESC+"OB":l.C0.ESC+"[B";break;case 45:a.shiftKey||a.ctrlKey||(v.key=l.C0.ESC+"[2~");break;case 46:v.key=e?l.C0.ESC+"[3;"+(e+1)+"~":l.C0.ESC+"[3~";break;case 36:v.key=e?l.C0.ESC+"[1;"+(e+1)+"H":c?l.C0.ESC+"OH":l.C0.ESC+"[H";break;case 35:v.key=e?l.C0.ESC+"[1;"+(e+1)+"F":c?l.C0.ESC+"OF":l.C0.ESC+"[F";break;case 33:a.shiftKey?v.type=2:a.ctrlKey?v.key=l.C0.ESC+"[5;"+(e+1)+"~":v.key=l.C0.ESC+"[5~";break;case 34:a.shiftKey?v.type=3:a.ctrlKey?v.key=l.C0.ESC+"[6;"+(e+1)+"~":v.key=l.C0.ESC+"[6~";break;case 112:v.key=e?l.C0.ESC+"[1;"+(e+1)+"P":l.C0.ESC+"OP";break;case 113:v.key=e?l.C0.ESC+"[1;"+(e+1)+"Q":l.C0.ESC+"OQ";break;case 114:v.key=e?l.C0.ESC+"[1;"+(e+1)+"R":l.C0.ESC+"OR";break;case 115:v.key=e?l.C0.ESC+"[1;"+(e+1)+"S":l.C0.ESC+"OS";break;case 116:v.key=e?l.C0.ESC+"[15;"+(e+1)+"~":l.C0.ESC+"[15~";break;case 117:v.key=e?l.C0.ESC+"[17;"+(e+1)+"~":l.C0.ESC+"[17~";break;case 118:v.key=e?l.C0.ESC+"[18;"+(e+1)+"~":l.C0.ESC+"[18~";break;case 119:v.key=e?l.C0.ESC+"[19;"+(e+1)+"~":l.C0.ESC+"[19~";break;case 120:v.key=e?l.C0.ESC+"[20;"+(e+1)+"~":l.C0.ESC+"[20~";break;case 121:v.key=e?l.C0.ESC+"[21;"+(e+1)+"~":l.C0.ESC+"[21~";break;case 122:v.key=e?l.C0.ESC+"[23;"+(e+1)+"~":l.C0.ESC+"[23~";break;case 123:v.key=e?l.C0.ESC+"[24;"+(e+1)+"~":l.C0.ESC+"[24~";break;default:if(!a.ctrlKey||a.shiftKey||a.altKey||a.metaKey)if(p&&!b||!a.altKey||a.metaKey)!p||a.altKey||a.ctrlKey||a.shiftKey||!a.metaKey?a.key&&!a.ctrlKey&&!a.altKey&&!a.metaKey&&a.keyCode>=48&&a.key.length===1?v.key=a.key:a.key&&a.ctrlKey&&(a.key==="_"&&(v.key=l.C0.US),a.key==="@"&&(v.key=l.C0.NUL)):a.keyCode===65&&(v.type=1);else{const r=f[a.keyCode],t=r==null?void 0:r[a.shiftKey?1:0];if(t)v.key=l.C0.ESC+t;else if(a.keyCode>=65&&a.keyCode<=90){const i=a.ctrlKey?a.keyCode-64:a.keyCode+32;let h=String.fromCharCode(i);a.shiftKey&&(h=h.toUpperCase()),v.key=l.C0.ESC+h}else if(a.keyCode===32)v.key=l.C0.ESC+(a.ctrlKey?l.C0.NUL:" ");else if(a.key==="Dead"&&a.code.startsWith("Key")){let i=a.code.slice(3,4);a.shiftKey||(i=i.toLowerCase()),v.key=l.C0.ESC+i,v.cancel=!0}}else a.keyCode>=65&&a.keyCode<=90?v.key=String.fromCharCode(a.keyCode-64):a.keyCode===32?v.key=l.C0.NUL:a.keyCode>=51&&a.keyCode<=55?v.key=String.fromCharCode(a.keyCode-51+27):a.keyCode===56?v.key=l.C0.DEL:a.keyCode===219?v.key=l.C0.ESC:a.keyCode===220?v.key=l.C0.FS:a.keyCode===221&&(v.key=l.C0.GS)}return v}},482:(D,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Utf8ToUtf32=s.StringToUtf32=s.utf32ToString=s.stringFromCodePoint=void 0,s.stringFromCodePoint=function(o){return o>65535?(o-=65536,String.fromCharCode(55296+(o>>10))+String.fromCharCode(o%1024+56320)):String.fromCharCode(o)},s.utf32ToString=function(o,l=0,f=o.length){let a="";for(let c=l;c<f;++c){let p=o[c];p>65535?(p-=65536,a+=String.fromCharCode(55296+(p>>10))+String.fromCharCode(p%1024+56320)):a+=String.fromCharCode(p)}return a},s.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(o,l){const f=o.length;if(!f)return 0;let a=0,c=0;if(this._interim){const p=o.charCodeAt(c++);56320<=p&&p<=57343?l[a++]=1024*(this._interim-55296)+p-56320+65536:(l[a++]=this._interim,l[a++]=p),this._interim=0}for(let p=c;p<f;++p){const b=o.charCodeAt(p);if(55296<=b&&b<=56319){if(++p>=f)return this._interim=b,a;const v=o.charCodeAt(p);56320<=v&&v<=57343?l[a++]=1024*(b-55296)+v-56320+65536:(l[a++]=b,l[a++]=v)}else b!==65279&&(l[a++]=b)}return a}},s.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(o,l){const f=o.length;if(!f)return 0;let a,c,p,b,v=0,e=0,r=0;if(this.interim[0]){let h=!1,d=this.interim[0];d&=(224&d)==192?31:(240&d)==224?15:7;let m,C=0;for(;(m=63&this.interim[++C])&&C<4;)d<<=6,d|=m;const u=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,S=u-C;for(;r<S;){if(r>=f)return 0;if(m=o[r++],(192&m)!=128){r--,h=!0;break}this.interim[C++]=m,d<<=6,d|=63&m}h||(u===2?d<128?r--:l[v++]=d:u===3?d<2048||d>=55296&&d<=57343||d===65279||(l[v++]=d):d<65536||d>1114111||(l[v++]=d)),this.interim.fill(0)}const t=f-4;let i=r;for(;i<f;){for(;!(!(i<t)||128&(a=o[i])||128&(c=o[i+1])||128&(p=o[i+2])||128&(b=o[i+3]));)l[v++]=a,l[v++]=c,l[v++]=p,l[v++]=b,i+=4;if(a=o[i++],a<128)l[v++]=a;else if((224&a)==192){if(i>=f)return this.interim[0]=a,v;if(c=o[i++],(192&c)!=128){i--;continue}if(e=(31&a)<<6|63&c,e<128){i--;continue}l[v++]=e}else if((240&a)==224){if(i>=f)return this.interim[0]=a,v;if(c=o[i++],(192&c)!=128){i--;continue}if(i>=f)return this.interim[0]=a,this.interim[1]=c,v;if(p=o[i++],(192&p)!=128){i--;continue}if(e=(15&a)<<12|(63&c)<<6|63&p,e<2048||e>=55296&&e<=57343||e===65279)continue;l[v++]=e}else if((248&a)==240){if(i>=f)return this.interim[0]=a,v;if(c=o[i++],(192&c)!=128){i--;continue}if(i>=f)return this.interim[0]=a,this.interim[1]=c,v;if(p=o[i++],(192&p)!=128){i--;continue}if(i>=f)return this.interim[0]=a,this.interim[1]=c,this.interim[2]=p,v;if(b=o[i++],(192&b)!=128){i--;continue}if(e=(7&a)<<18|(63&c)<<12|(63&p)<<6|63&b,e<65536||e>1114111)continue;l[v++]=e}}return v}}},225:(D,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.UnicodeV6=void 0;const o=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],l=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]];let f;s.UnicodeV6=class{constructor(){if(this.version="6",!f){f=new Uint8Array(65536),f.fill(1),f[0]=0,f.fill(0,1,32),f.fill(0,127,160),f.fill(2,4352,4448),f[9001]=2,f[9002]=2,f.fill(2,11904,42192),f[12351]=1,f.fill(2,44032,55204),f.fill(2,63744,64256),f.fill(2,65040,65050),f.fill(2,65072,65136),f.fill(2,65280,65377),f.fill(2,65504,65511);for(let a=0;a<o.length;++a)f.fill(0,o[a][0],o[a][1]+1)}}wcwidth(a){return a<32?0:a<127?1:a<65536?f[a]:function(c,p){let b,v=0,e=p.length-1;if(c<p[0][0]||c>p[e][1])return!1;for(;e>=v;)if(b=v+e>>1,c>p[b][1])v=b+1;else{if(!(c<p[b][0]))return!0;e=b-1}return!1}(a,l)?0:a>=131072&&a<=196605||a>=196608&&a<=262141?2:1}}},5981:(D,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.WriteBuffer=void 0;const l=o(8460),f=o(844);class a extends f.Disposable{constructor(p){super(),this._action=p,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this.register(new l.EventEmitter),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(p,b){if(b!==void 0&&this._syncCalls>b)return void(this._syncCalls=0);if(this._pendingData+=p.length,this._writeBuffer.push(p),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;let v;for(this._isSyncWriting=!0;v=this._writeBuffer.shift();){this._action(v);const e=this._callbacks.shift();e&&e()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(p,b){if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput)return this._didUserInput=!1,this._pendingData+=p.length,this._writeBuffer.push(p),this._callbacks.push(b),void this._innerWrite();setTimeout(()=>this._innerWrite())}this._pendingData+=p.length,this._writeBuffer.push(p),this._callbacks.push(b)}_innerWrite(p=0,b=!0){const v=p||Date.now();for(;this._writeBuffer.length>this._bufferOffset;){const e=this._writeBuffer[this._bufferOffset],r=this._action(e,b);if(r){const i=h=>Date.now()-v>=12?setTimeout(()=>this._innerWrite(0,h)):this._innerWrite(v,h);return void r.catch(h=>(queueMicrotask(()=>{throw h}),Promise.resolve(!1))).then(i)}const t=this._callbacks[this._bufferOffset];if(t&&t(),this._bufferOffset++,this._pendingData-=e.length,Date.now()-v>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(()=>this._innerWrite())):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}}s.WriteBuffer=a},5941:(D,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.toRgbString=s.parseColor=void 0;const o=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,l=/^[\da-f]+$/;function f(a,c){const p=a.toString(16),b=p.length<2?"0"+p:p;switch(c){case 4:return p[0];case 8:return b;case 12:return(b+b).slice(0,3);default:return b+b}}s.parseColor=function(a){if(!a)return;let c=a.toLowerCase();if(c.indexOf("rgb:")===0){c=c.slice(4);const p=o.exec(c);if(p){const b=p[1]?15:p[4]?255:p[7]?4095:65535;return[Math.round(parseInt(p[1]||p[4]||p[7]||p[10],16)/b*255),Math.round(parseInt(p[2]||p[5]||p[8]||p[11],16)/b*255),Math.round(parseInt(p[3]||p[6]||p[9]||p[12],16)/b*255)]}}else if(c.indexOf("#")===0&&(c=c.slice(1),l.exec(c)&&[3,6,9,12].includes(c.length))){const p=c.length/3,b=[0,0,0];for(let v=0;v<3;++v){const e=parseInt(c.slice(p*v,p*v+p),16);b[v]=p===1?e<<4:p===2?e:p===3?e>>4:e>>8}return b}},s.toRgbString=function(a,c=16){const[p,b,v]=a;return`rgb:${f(p,c)}/${f(b,c)}/${f(v,c)}`}},5770:(D,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.PAYLOAD_LIMIT=void 0,s.PAYLOAD_LIMIT=1e7},6351:(D,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.DcsHandler=s.DcsParser=void 0;const l=o(482),f=o(8742),a=o(5770),c=[];s.DcsParser=class{constructor(){this._handlers=Object.create(null),this._active=c,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=c}registerHandler(b,v){this._handlers[b]===void 0&&(this._handlers[b]=[]);const e=this._handlers[b];return e.push(v),{dispose:()=>{const r=e.indexOf(v);r!==-1&&e.splice(r,1)}}}clearHandler(b){this._handlers[b]&&delete this._handlers[b]}setHandlerFallback(b){this._handlerFb=b}reset(){if(this._active.length)for(let b=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;b>=0;--b)this._active[b].unhook(!1);this._stack.paused=!1,this._active=c,this._ident=0}hook(b,v){if(this.reset(),this._ident=b,this._active=this._handlers[b]||c,this._active.length)for(let e=this._active.length-1;e>=0;e--)this._active[e].hook(v);else this._handlerFb(this._ident,"HOOK",v)}put(b,v,e){if(this._active.length)for(let r=this._active.length-1;r>=0;r--)this._active[r].put(b,v,e);else this._handlerFb(this._ident,"PUT",(0,l.utf32ToString)(b,v,e))}unhook(b,v=!0){if(this._active.length){let e=!1,r=this._active.length-1,t=!1;if(this._stack.paused&&(r=this._stack.loopPosition-1,e=v,t=this._stack.fallThrough,this._stack.paused=!1),!t&&e===!1){for(;r>=0&&(e=this._active[r].unhook(b),e!==!0);r--)if(e instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=r,this._stack.fallThrough=!1,e;r--}for(;r>=0;r--)if(e=this._active[r].unhook(!1),e instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=r,this._stack.fallThrough=!0,e}else this._handlerFb(this._ident,"UNHOOK",b);this._active=c,this._ident=0}};const p=new f.Params;p.addParam(0),s.DcsHandler=class{constructor(b){this._handler=b,this._data="",this._params=p,this._hitLimit=!1}hook(b){this._params=b.length>1||b.params[0]?b.clone():p,this._data="",this._hitLimit=!1}put(b,v,e){this._hitLimit||(this._data+=(0,l.utf32ToString)(b,v,e),this._data.length>a.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}unhook(b){let v=!1;if(this._hitLimit)v=!1;else if(b&&(v=this._handler(this._data,this._params),v instanceof Promise))return v.then(e=>(this._params=p,this._data="",this._hitLimit=!1,e));return this._params=p,this._data="",this._hitLimit=!1,v}}},2015:(D,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.EscapeSequenceParser=s.VT500_TRANSITION_TABLE=s.TransitionTable=void 0;const l=o(844),f=o(8742),a=o(6242),c=o(6351);class p{constructor(r){this.table=new Uint8Array(r)}setDefault(r,t){this.table.fill(r<<4|t)}add(r,t,i,h){this.table[t<<8|r]=i<<4|h}addMany(r,t,i,h){for(let d=0;d<r.length;d++)this.table[t<<8|r[d]]=i<<4|h}}s.TransitionTable=p;const b=160;s.VT500_TRANSITION_TABLE=function(){const e=new p(4095),r=Array.apply(null,Array(256)).map((C,u)=>u),t=(C,u)=>r.slice(C,u),i=t(32,127),h=t(0,24);h.push(25),h.push.apply(h,t(28,32));const d=t(0,14);let m;for(m in e.setDefault(1,0),e.addMany(i,0,2,0),d)e.addMany([24,26,153,154],m,3,0),e.addMany(t(128,144),m,3,0),e.addMany(t(144,152),m,3,0),e.add(156,m,0,0),e.add(27,m,11,1),e.add(157,m,4,8),e.addMany([152,158,159],m,0,7),e.add(155,m,11,3),e.add(144,m,11,9);return e.addMany(h,0,3,0),e.addMany(h,1,3,1),e.add(127,1,0,1),e.addMany(h,8,0,8),e.addMany(h,3,3,3),e.add(127,3,0,3),e.addMany(h,4,3,4),e.add(127,4,0,4),e.addMany(h,6,3,6),e.addMany(h,5,3,5),e.add(127,5,0,5),e.addMany(h,2,3,2),e.add(127,2,0,2),e.add(93,1,4,8),e.addMany(i,8,5,8),e.add(127,8,5,8),e.addMany([156,27,24,26,7],8,6,0),e.addMany(t(28,32),8,0,8),e.addMany([88,94,95],1,0,7),e.addMany(i,7,0,7),e.addMany(h,7,0,7),e.add(156,7,0,0),e.add(127,7,0,7),e.add(91,1,11,3),e.addMany(t(64,127),3,7,0),e.addMany(t(48,60),3,8,4),e.addMany([60,61,62,63],3,9,4),e.addMany(t(48,60),4,8,4),e.addMany(t(64,127),4,7,0),e.addMany([60,61,62,63],4,0,6),e.addMany(t(32,64),6,0,6),e.add(127,6,0,6),e.addMany(t(64,127),6,0,0),e.addMany(t(32,48),3,9,5),e.addMany(t(32,48),5,9,5),e.addMany(t(48,64),5,0,6),e.addMany(t(64,127),5,7,0),e.addMany(t(32,48),4,9,5),e.addMany(t(32,48),1,9,2),e.addMany(t(32,48),2,9,2),e.addMany(t(48,127),2,10,0),e.addMany(t(48,80),1,10,0),e.addMany(t(81,88),1,10,0),e.addMany([89,90,92],1,10,0),e.addMany(t(96,127),1,10,0),e.add(80,1,11,9),e.addMany(h,9,0,9),e.add(127,9,0,9),e.addMany(t(28,32),9,0,9),e.addMany(t(32,48),9,9,12),e.addMany(t(48,60),9,8,10),e.addMany([60,61,62,63],9,9,10),e.addMany(h,11,0,11),e.addMany(t(32,128),11,0,11),e.addMany(t(28,32),11,0,11),e.addMany(h,10,0,10),e.add(127,10,0,10),e.addMany(t(28,32),10,0,10),e.addMany(t(48,60),10,8,10),e.addMany([60,61,62,63],10,0,11),e.addMany(t(32,48),10,9,12),e.addMany(h,12,0,12),e.add(127,12,0,12),e.addMany(t(28,32),12,0,12),e.addMany(t(32,48),12,9,12),e.addMany(t(48,64),12,0,11),e.addMany(t(64,127),12,12,13),e.addMany(t(64,127),10,12,13),e.addMany(t(64,127),9,12,13),e.addMany(h,13,13,13),e.addMany(i,13,13,13),e.add(127,13,0,13),e.addMany([27,156,24,26],13,14,0),e.add(b,0,2,0),e.add(b,8,5,8),e.add(b,6,0,6),e.add(b,11,0,11),e.add(b,13,13,13),e}();class v extends l.Disposable{constructor(r=s.VT500_TRANSITION_TABLE){super(),this._transitions=r,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new f.Params,this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._printHandlerFb=(t,i,h)=>{},this._executeHandlerFb=t=>{},this._csiHandlerFb=(t,i)=>{},this._escHandlerFb=t=>{},this._errorHandlerFb=t=>t,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this.register((0,l.toDisposable)(()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)})),this._oscParser=this.register(new a.OscParser),this._dcsParser=this.register(new c.DcsParser),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},()=>!0)}_identifier(r,t=[64,126]){let i=0;if(r.prefix){if(r.prefix.length>1)throw new Error("only one byte as prefix supported");if(i=r.prefix.charCodeAt(0),i&&60>i||i>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(r.intermediates){if(r.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let d=0;d<r.intermediates.length;++d){const m=r.intermediates.charCodeAt(d);if(32>m||m>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");i<<=8,i|=m}}if(r.final.length!==1)throw new Error("final must be a single byte");const h=r.final.charCodeAt(0);if(t[0]>h||h>t[1])throw new Error(`final must be in range ${t[0]} .. ${t[1]}`);return i<<=8,i|=h,i}identToString(r){const t=[];for(;r;)t.push(String.fromCharCode(255&r)),r>>=8;return t.reverse().join("")}setPrintHandler(r){this._printHandler=r}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(r,t){const i=this._identifier(r,[48,126]);this._escHandlers[i]===void 0&&(this._escHandlers[i]=[]);const h=this._escHandlers[i];return h.push(t),{dispose:()=>{const d=h.indexOf(t);d!==-1&&h.splice(d,1)}}}clearEscHandler(r){this._escHandlers[this._identifier(r,[48,126])]&&delete this._escHandlers[this._identifier(r,[48,126])]}setEscHandlerFallback(r){this._escHandlerFb=r}setExecuteHandler(r,t){this._executeHandlers[r.charCodeAt(0)]=t}clearExecuteHandler(r){this._executeHandlers[r.charCodeAt(0)]&&delete this._executeHandlers[r.charCodeAt(0)]}setExecuteHandlerFallback(r){this._executeHandlerFb=r}registerCsiHandler(r,t){const i=this._identifier(r);this._csiHandlers[i]===void 0&&(this._csiHandlers[i]=[]);const h=this._csiHandlers[i];return h.push(t),{dispose:()=>{const d=h.indexOf(t);d!==-1&&h.splice(d,1)}}}clearCsiHandler(r){this._csiHandlers[this._identifier(r)]&&delete this._csiHandlers[this._identifier(r)]}setCsiHandlerFallback(r){this._csiHandlerFb=r}registerDcsHandler(r,t){return this._dcsParser.registerHandler(this._identifier(r),t)}clearDcsHandler(r){this._dcsParser.clearHandler(this._identifier(r))}setDcsHandlerFallback(r){this._dcsParser.setHandlerFallback(r)}registerOscHandler(r,t){return this._oscParser.registerHandler(r,t)}clearOscHandler(r){this._oscParser.clearHandler(r)}setOscHandlerFallback(r){this._oscParser.setHandlerFallback(r)}setErrorHandler(r){this._errorHandler=r}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(r,t,i,h,d){this._parseStack.state=r,this._parseStack.handlers=t,this._parseStack.handlerPos=i,this._parseStack.transition=h,this._parseStack.chunkPos=d}parse(r,t,i){let h,d=0,m=0,C=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,C=this._parseStack.chunkPos+1;else{if(i===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");const u=this._parseStack.handlers;let S=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(i===!1&&S>-1){for(;S>=0&&(h=u[S](this._params),h!==!0);S--)if(h instanceof Promise)return this._parseStack.handlerPos=S,h}this._parseStack.handlers=[];break;case 4:if(i===!1&&S>-1){for(;S>=0&&(h=u[S](),h!==!0);S--)if(h instanceof Promise)return this._parseStack.handlerPos=S,h}this._parseStack.handlers=[];break;case 6:if(d=r[this._parseStack.chunkPos],h=this._dcsParser.unhook(d!==24&&d!==26,i),h)return h;d===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(d=r[this._parseStack.chunkPos],h=this._oscParser.end(d!==24&&d!==26,i),h)return h;d===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,C=this._parseStack.chunkPos+1,this.precedingCodepoint=0,this.currentState=15&this._parseStack.transition}for(let u=C;u<t;++u){switch(d=r[u],m=this._transitions.table[this.currentState<<8|(d<160?d:b)],m>>4){case 2:for(let O=u+1;;++O){if(O>=t||(d=r[O])<32||d>126&&d<b){this._printHandler(r,u,O),u=O-1;break}if(++O>=t||(d=r[O])<32||d>126&&d<b){this._printHandler(r,u,O),u=O-1;break}if(++O>=t||(d=r[O])<32||d>126&&d<b){this._printHandler(r,u,O),u=O-1;break}if(++O>=t||(d=r[O])<32||d>126&&d<b){this._printHandler(r,u,O),u=O-1;break}}break;case 3:this._executeHandlers[d]?this._executeHandlers[d]():this._executeHandlerFb(d),this.precedingCodepoint=0;break;case 0:break;case 1:if(this._errorHandler({position:u,code:d,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:const S=this._csiHandlers[this._collect<<8|d];let k=S?S.length-1:-1;for(;k>=0&&(h=S[k](this._params),h!==!0);k--)if(h instanceof Promise)return this._preserveStack(3,S,k,m,u),h;k<0&&this._csiHandlerFb(this._collect<<8|d,this._params),this.precedingCodepoint=0;break;case 8:do switch(d){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(d-48)}while(++u<t&&(d=r[u])>47&&d<60);u--;break;case 9:this._collect<<=8,this._collect|=d;break;case 10:const B=this._escHandlers[this._collect<<8|d];let R=B?B.length-1:-1;for(;R>=0&&(h=B[R](),h!==!0);R--)if(h instanceof Promise)return this._preserveStack(4,B,R,m,u),h;R<0&&this._escHandlerFb(this._collect<<8|d),this.precedingCodepoint=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|d,this._params);break;case 13:for(let O=u+1;;++O)if(O>=t||(d=r[O])===24||d===26||d===27||d>127&&d<b){this._dcsParser.put(r,u,O),u=O-1;break}break;case 14:if(h=this._dcsParser.unhook(d!==24&&d!==26),h)return this._preserveStack(6,[],0,m,u),h;d===27&&(m|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0;break;case 4:this._oscParser.start();break;case 5:for(let O=u+1;;O++)if(O>=t||(d=r[O])<32||d>127&&d<b){this._oscParser.put(r,u,O),u=O-1;break}break;case 6:if(h=this._oscParser.end(d!==24&&d!==26),h)return this._preserveStack(5,[],0,m,u),h;d===27&&(m|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0}this.currentState=15&m}}}s.EscapeSequenceParser=v},6242:(D,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.OscHandler=s.OscParser=void 0;const l=o(5770),f=o(482),a=[];s.OscParser=class{constructor(){this._state=0,this._active=a,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(c,p){this._handlers[c]===void 0&&(this._handlers[c]=[]);const b=this._handlers[c];return b.push(p),{dispose:()=>{const v=b.indexOf(p);v!==-1&&b.splice(v,1)}}}clearHandler(c){this._handlers[c]&&delete this._handlers[c]}setHandlerFallback(c){this._handlerFb=c}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=a}reset(){if(this._state===2)for(let c=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;c>=0;--c)this._active[c].end(!1);this._stack.paused=!1,this._active=a,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||a,this._active.length)for(let c=this._active.length-1;c>=0;c--)this._active[c].start();else this._handlerFb(this._id,"START")}_put(c,p,b){if(this._active.length)for(let v=this._active.length-1;v>=0;v--)this._active[v].put(c,p,b);else this._handlerFb(this._id,"PUT",(0,f.utf32ToString)(c,p,b))}start(){this.reset(),this._state=1}put(c,p,b){if(this._state!==3){if(this._state===1)for(;p<b;){const v=c[p++];if(v===59){this._state=2,this._start();break}if(v<48||57<v)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+v-48}this._state===2&&b-p>0&&this._put(c,p,b)}}end(c,p=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){let b=!1,v=this._active.length-1,e=!1;if(this._stack.paused&&(v=this._stack.loopPosition-1,b=p,e=this._stack.fallThrough,this._stack.paused=!1),!e&&b===!1){for(;v>=0&&(b=this._active[v].end(c),b!==!0);v--)if(b instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=v,this._stack.fallThrough=!1,b;v--}for(;v>=0;v--)if(b=this._active[v].end(!1),b instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=v,this._stack.fallThrough=!0,b}else this._handlerFb(this._id,"END",c);this._active=a,this._id=-1,this._state=0}}},s.OscHandler=class{constructor(c){this._handler=c,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(c,p,b){this._hitLimit||(this._data+=(0,f.utf32ToString)(c,p,b),this._data.length>l.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}end(c){let p=!1;if(this._hitLimit)p=!1;else if(c&&(p=this._handler(this._data),p instanceof Promise))return p.then(b=>(this._data="",this._hitLimit=!1,b));return this._data="",this._hitLimit=!1,p}}},8742:(D,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Params=void 0;const o=2147483647;class l{static fromArray(a){const c=new l;if(!a.length)return c;for(let p=Array.isArray(a[0])?1:0;p<a.length;++p){const b=a[p];if(Array.isArray(b))for(let v=0;v<b.length;++v)c.addSubParam(b[v]);else c.addParam(b)}return c}constructor(a=32,c=32){if(this.maxLength=a,this.maxSubParamsLength=c,c>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(a),this.length=0,this._subParams=new Int32Array(c),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(a),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}clone(){const a=new l(this.maxLength,this.maxSubParamsLength);return a.params.set(this.params),a.length=this.length,a._subParams.set(this._subParams),a._subParamsLength=this._subParamsLength,a._subParamsIdx.set(this._subParamsIdx),a._rejectDigits=this._rejectDigits,a._rejectSubDigits=this._rejectSubDigits,a._digitIsSub=this._digitIsSub,a}toArray(){const a=[];for(let c=0;c<this.length;++c){a.push(this.params[c]);const p=this._subParamsIdx[c]>>8,b=255&this._subParamsIdx[c];b-p>0&&a.push(Array.prototype.slice.call(this._subParams,p,b))}return a}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(a){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(a<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=a>o?o:a}}addSubParam(a){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(a<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=a>o?o:a,this._subParamsIdx[this.length-1]++}}hasSubParams(a){return(255&this._subParamsIdx[a])-(this._subParamsIdx[a]>>8)>0}getSubParams(a){const c=this._subParamsIdx[a]>>8,p=255&this._subParamsIdx[a];return p-c>0?this._subParams.subarray(c,p):null}getSubParamsAll(){const a={};for(let c=0;c<this.length;++c){const p=this._subParamsIdx[c]>>8,b=255&this._subParamsIdx[c];b-p>0&&(a[c]=this._subParams.slice(p,b))}return a}addDigit(a){let c;if(this._rejectDigits||!(c=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;const p=this._digitIsSub?this._subParams:this.params,b=p[c-1];p[c-1]=~b?Math.min(10*b+a,o):a}}s.Params=l},5741:(D,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.AddonManager=void 0,s.AddonManager=class{constructor(){this._addons=[]}dispose(){for(let o=this._addons.length-1;o>=0;o--)this._addons[o].instance.dispose()}loadAddon(o,l){const f={instance:l,dispose:l.dispose,isDisposed:!1};this._addons.push(f),l.dispose=()=>this._wrappedAddonDispose(f),l.activate(o)}_wrappedAddonDispose(o){if(o.isDisposed)return;let l=-1;for(let f=0;f<this._addons.length;f++)if(this._addons[f]===o){l=f;break}if(l===-1)throw new Error("Could not dispose an addon that has not been loaded");o.isDisposed=!0,o.dispose.apply(o.instance),this._addons.splice(l,1)}}},8771:(D,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BufferApiView=void 0;const l=o(3785),f=o(511);s.BufferApiView=class{constructor(a,c){this._buffer=a,this.type=c}init(a){return this._buffer=a,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(a){const c=this._buffer.lines.get(a);if(c)return new l.BufferLineApiView(c)}getNullCell(){return new f.CellData}}},3785:(D,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BufferLineApiView=void 0;const l=o(511);s.BufferLineApiView=class{constructor(f){this._line=f}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(f,a){if(!(f<0||f>=this._line.length))return a?(this._line.loadCell(f,a),a):this._line.loadCell(f,new l.CellData)}translateToString(f,a,c){return this._line.translateToString(f,a,c)}}},8285:(D,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BufferNamespaceApi=void 0;const l=o(8771),f=o(8460),a=o(844);class c extends a.Disposable{constructor(b){super(),this._core=b,this._onBufferChange=this.register(new f.EventEmitter),this.onBufferChange=this._onBufferChange.event,this._normal=new l.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new l.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(()=>this._onBufferChange.fire(this.active))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}}s.BufferNamespaceApi=c},7975:(D,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ParserApi=void 0,s.ParserApi=class{constructor(o){this._core=o}registerCsiHandler(o,l){return this._core.registerCsiHandler(o,f=>l(f.toArray()))}addCsiHandler(o,l){return this.registerCsiHandler(o,l)}registerDcsHandler(o,l){return this._core.registerDcsHandler(o,(f,a)=>l(f,a.toArray()))}addDcsHandler(o,l){return this.registerDcsHandler(o,l)}registerEscHandler(o,l){return this._core.registerEscHandler(o,l)}addEscHandler(o,l){return this.registerEscHandler(o,l)}registerOscHandler(o,l){return this._core.registerOscHandler(o,l)}addOscHandler(o,l){return this.registerOscHandler(o,l)}}},7090:(D,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.UnicodeApi=void 0,s.UnicodeApi=class{constructor(o){this._core=o}register(o){this._core.unicodeService.register(o)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(o){this._core.unicodeService.activeVersion=o}}},744:function(D,s,o){var l=this&&this.__decorate||function(e,r,t,i){var h,d=arguments.length,m=d<3?r:i===null?i=Object.getOwnPropertyDescriptor(r,t):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")m=Reflect.decorate(e,r,t,i);else for(var C=e.length-1;C>=0;C--)(h=e[C])&&(m=(d<3?h(m):d>3?h(r,t,m):h(r,t))||m);return d>3&&m&&Object.defineProperty(r,t,m),m},f=this&&this.__param||function(e,r){return function(t,i){r(t,i,e)}};Object.defineProperty(s,"__esModule",{value:!0}),s.BufferService=s.MINIMUM_ROWS=s.MINIMUM_COLS=void 0;const a=o(8460),c=o(844),p=o(5295),b=o(2585);s.MINIMUM_COLS=2,s.MINIMUM_ROWS=1;let v=s.BufferService=class extends c.Disposable{get buffer(){return this.buffers.active}constructor(e){super(),this.isUserScrolling=!1,this._onResize=this.register(new a.EventEmitter),this.onResize=this._onResize.event,this._onScroll=this.register(new a.EventEmitter),this.onScroll=this._onScroll.event,this.cols=Math.max(e.rawOptions.cols||0,s.MINIMUM_COLS),this.rows=Math.max(e.rawOptions.rows||0,s.MINIMUM_ROWS),this.buffers=this.register(new p.BufferSet(e,this))}resize(e,r){this.cols=e,this.rows=r,this.buffers.resize(e,r),this._onResize.fire({cols:e,rows:r})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(e,r=!1){const t=this.buffer;let i;i=this._cachedBlankLine,i&&i.length===this.cols&&i.getFg(0)===e.fg&&i.getBg(0)===e.bg||(i=t.getBlankLine(e,r),this._cachedBlankLine=i),i.isWrapped=r;const h=t.ybase+t.scrollTop,d=t.ybase+t.scrollBottom;if(t.scrollTop===0){const m=t.lines.isFull;d===t.lines.length-1?m?t.lines.recycle().copyFrom(i):t.lines.push(i.clone()):t.lines.splice(d+1,0,i.clone()),m?this.isUserScrolling&&(t.ydisp=Math.max(t.ydisp-1,0)):(t.ybase++,this.isUserScrolling||t.ydisp++)}else{const m=d-h+1;t.lines.shiftElements(h+1,m-1,-1),t.lines.set(d,i.clone())}this.isUserScrolling||(t.ydisp=t.ybase),this._onScroll.fire(t.ydisp)}scrollLines(e,r,t){const i=this.buffer;if(e<0){if(i.ydisp===0)return;this.isUserScrolling=!0}else e+i.ydisp>=i.ybase&&(this.isUserScrolling=!1);const h=i.ydisp;i.ydisp=Math.max(Math.min(i.ydisp+e,i.ybase),0),h!==i.ydisp&&(r||this._onScroll.fire(i.ydisp))}};s.BufferService=v=l([f(0,b.IOptionsService)],v)},7994:(D,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CharsetService=void 0,s.CharsetService=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(o){this.glevel=o,this.charset=this._charsets[o]}setgCharset(o,l){this._charsets[o]=l,this.glevel===o&&(this.charset=l)}}},1753:function(D,s,o){var l=this&&this.__decorate||function(i,h,d,m){var C,u=arguments.length,S=u<3?h:m===null?m=Object.getOwnPropertyDescriptor(h,d):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(i,h,d,m);else for(var k=i.length-1;k>=0;k--)(C=i[k])&&(S=(u<3?C(S):u>3?C(h,d,S):C(h,d))||S);return u>3&&S&&Object.defineProperty(h,d,S),S},f=this&&this.__param||function(i,h){return function(d,m){h(d,m,i)}};Object.defineProperty(s,"__esModule",{value:!0}),s.CoreMouseService=void 0;const a=o(2585),c=o(8460),p=o(844),b={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:i=>i.button!==4&&i.action===1&&(i.ctrl=!1,i.alt=!1,i.shift=!1,!0)},VT200:{events:19,restrict:i=>i.action!==32},DRAG:{events:23,restrict:i=>i.action!==32||i.button!==3},ANY:{events:31,restrict:i=>!0}};function v(i,h){let d=(i.ctrl?16:0)|(i.shift?4:0)|(i.alt?8:0);return i.button===4?(d|=64,d|=i.action):(d|=3&i.button,4&i.button&&(d|=64),8&i.button&&(d|=128),i.action===32?d|=32:i.action!==0||h||(d|=3)),d}const e=String.fromCharCode,r={DEFAULT:i=>{const h=[v(i,!1)+32,i.col+32,i.row+32];return h[0]>255||h[1]>255||h[2]>255?"":`\x1B[M${e(h[0])}${e(h[1])}${e(h[2])}`},SGR:i=>{const h=i.action===0&&i.button!==4?"m":"M";return`\x1B[<${v(i,!0)};${i.col};${i.row}${h}`},SGR_PIXELS:i=>{const h=i.action===0&&i.button!==4?"m":"M";return`\x1B[<${v(i,!0)};${i.x};${i.y}${h}`}};let t=s.CoreMouseService=class extends p.Disposable{constructor(i,h){super(),this._bufferService=i,this._coreService=h,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._onProtocolChange=this.register(new c.EventEmitter),this.onProtocolChange=this._onProtocolChange.event;for(const d of Object.keys(b))this.addProtocol(d,b[d]);for(const d of Object.keys(r))this.addEncoding(d,r[d]);this.reset()}addProtocol(i,h){this._protocols[i]=h}addEncoding(i,h){this._encodings[i]=h}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(i){if(!this._protocols[i])throw new Error(`unknown protocol "${i}"`);this._activeProtocol=i,this._onProtocolChange.fire(this._protocols[i].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(i){if(!this._encodings[i])throw new Error(`unknown encoding "${i}"`);this._activeEncoding=i}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null}triggerMouseEvent(i){if(i.col<0||i.col>=this._bufferService.cols||i.row<0||i.row>=this._bufferService.rows||i.button===4&&i.action===32||i.button===3&&i.action!==32||i.button!==4&&(i.action===2||i.action===3)||(i.col++,i.row++,i.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,i,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(i))return!1;const h=this._encodings[this._activeEncoding](i);return h&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(h):this._coreService.triggerDataEvent(h,!0)),this._lastEvent=i,!0}explainEvents(i){return{down:!!(1&i),up:!!(2&i),drag:!!(4&i),move:!!(8&i),wheel:!!(16&i)}}_equalEvents(i,h,d){if(d){if(i.x!==h.x||i.y!==h.y)return!1}else if(i.col!==h.col||i.row!==h.row)return!1;return i.button===h.button&&i.action===h.action&&i.ctrl===h.ctrl&&i.alt===h.alt&&i.shift===h.shift}};s.CoreMouseService=t=l([f(0,a.IBufferService),f(1,a.ICoreService)],t)},6975:function(D,s,o){var l=this&&this.__decorate||function(t,i,h,d){var m,C=arguments.length,u=C<3?i:d===null?d=Object.getOwnPropertyDescriptor(i,h):d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(t,i,h,d);else for(var S=t.length-1;S>=0;S--)(m=t[S])&&(u=(C<3?m(u):C>3?m(i,h,u):m(i,h))||u);return C>3&&u&&Object.defineProperty(i,h,u),u},f=this&&this.__param||function(t,i){return function(h,d){i(h,d,t)}};Object.defineProperty(s,"__esModule",{value:!0}),s.CoreService=void 0;const a=o(1439),c=o(8460),p=o(844),b=o(2585),v=Object.freeze({insertMode:!1}),e=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0});let r=s.CoreService=class extends p.Disposable{constructor(t,i,h){super(),this._bufferService=t,this._logService=i,this._optionsService=h,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this.register(new c.EventEmitter),this.onData=this._onData.event,this._onUserInput=this.register(new c.EventEmitter),this.onUserInput=this._onUserInput.event,this._onBinary=this.register(new c.EventEmitter),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this.register(new c.EventEmitter),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=(0,a.clone)(v),this.decPrivateModes=(0,a.clone)(e)}reset(){this.modes=(0,a.clone)(v),this.decPrivateModes=(0,a.clone)(e)}triggerDataEvent(t,i=!1){if(this._optionsService.rawOptions.disableStdin)return;const h=this._bufferService.buffer;i&&this._optionsService.rawOptions.scrollOnUserInput&&h.ybase!==h.ydisp&&this._onRequestScrollToBottom.fire(),i&&this._onUserInput.fire(),this._logService.debug(`sending data "${t}"`,()=>t.split("").map(d=>d.charCodeAt(0))),this._onData.fire(t)}triggerBinaryEvent(t){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${t}"`,()=>t.split("").map(i=>i.charCodeAt(0))),this._onBinary.fire(t))}};s.CoreService=r=l([f(0,b.IBufferService),f(1,b.ILogService),f(2,b.IOptionsService)],r)},9074:(D,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.DecorationService=void 0;const l=o(8055),f=o(8460),a=o(844),c=o(6106);let p=0,b=0;class v extends a.Disposable{get decorations(){return this._decorations.values()}constructor(){super(),this._decorations=new c.SortedList(t=>t==null?void 0:t.marker.line),this._onDecorationRegistered=this.register(new f.EventEmitter),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this.register(new f.EventEmitter),this.onDecorationRemoved=this._onDecorationRemoved.event,this.register((0,a.toDisposable)(()=>this.reset()))}registerDecoration(t){if(t.marker.isDisposed)return;const i=new e(t);if(i){const h=i.marker.onDispose(()=>i.dispose());i.onDispose(()=>{i&&(this._decorations.delete(i)&&this._onDecorationRemoved.fire(i),h.dispose())}),this._decorations.insert(i),this._onDecorationRegistered.fire(i)}return i}reset(){for(const t of this._decorations.values())t.dispose();this._decorations.clear()}*getDecorationsAtCell(t,i,h){var d,m,C;let u=0,S=0;for(const k of this._decorations.getKeyIterator(i))u=(d=k.options.x)!==null&&d!==void 0?d:0,S=u+((m=k.options.width)!==null&&m!==void 0?m:1),t>=u&&t<S&&(!h||((C=k.options.layer)!==null&&C!==void 0?C:"bottom")===h)&&(yield k)}forEachDecorationAtCell(t,i,h,d){this._decorations.forEachByKey(i,m=>{var C,u,S;p=(C=m.options.x)!==null&&C!==void 0?C:0,b=p+((u=m.options.width)!==null&&u!==void 0?u:1),t>=p&&t<b&&(!h||((S=m.options.layer)!==null&&S!==void 0?S:"bottom")===h)&&d(m)})}}s.DecorationService=v;class e extends a.Disposable{get isDisposed(){return this._isDisposed}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=l.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=l.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}constructor(t){super(),this.options=t,this.onRenderEmitter=this.register(new f.EventEmitter),this.onRender=this.onRenderEmitter.event,this._onDispose=this.register(new f.EventEmitter),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=t.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}dispose(){this._onDispose.fire(),super.dispose()}}},4348:(D,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.InstantiationService=s.ServiceCollection=void 0;const l=o(2585),f=o(8343);class a{constructor(...p){this._entries=new Map;for(const[b,v]of p)this.set(b,v)}set(p,b){const v=this._entries.get(p);return this._entries.set(p,b),v}forEach(p){for(const[b,v]of this._entries.entries())p(b,v)}has(p){return this._entries.has(p)}get(p){return this._entries.get(p)}}s.ServiceCollection=a,s.InstantiationService=class{constructor(){this._services=new a,this._services.set(l.IInstantiationService,this)}setService(c,p){this._services.set(c,p)}getService(c){return this._services.get(c)}createInstance(c,...p){const b=(0,f.getServiceDependencies)(c).sort((r,t)=>r.index-t.index),v=[];for(const r of b){const t=this._services.get(r.id);if(!t)throw new Error(`[createInstance] ${c.name} depends on UNKNOWN service ${r.id}.`);v.push(t)}const e=b.length>0?b[0].index:p.length;if(p.length!==e)throw new Error(`[createInstance] First service dependency of ${c.name} at position ${e+1} conflicts with ${p.length} static arguments`);return new c(...p,...v)}}},7866:function(D,s,o){var l=this&&this.__decorate||function(e,r,t,i){var h,d=arguments.length,m=d<3?r:i===null?i=Object.getOwnPropertyDescriptor(r,t):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")m=Reflect.decorate(e,r,t,i);else for(var C=e.length-1;C>=0;C--)(h=e[C])&&(m=(d<3?h(m):d>3?h(r,t,m):h(r,t))||m);return d>3&&m&&Object.defineProperty(r,t,m),m},f=this&&this.__param||function(e,r){return function(t,i){r(t,i,e)}};Object.defineProperty(s,"__esModule",{value:!0}),s.traceCall=s.setTraceLogger=s.LogService=void 0;const a=o(844),c=o(2585),p={trace:c.LogLevelEnum.TRACE,debug:c.LogLevelEnum.DEBUG,info:c.LogLevelEnum.INFO,warn:c.LogLevelEnum.WARN,error:c.LogLevelEnum.ERROR,off:c.LogLevelEnum.OFF};let b,v=s.LogService=class extends a.Disposable{get logLevel(){return this._logLevel}constructor(e){super(),this._optionsService=e,this._logLevel=c.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),b=this}_updateLogLevel(){this._logLevel=p[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(e){for(let r=0;r<e.length;r++)typeof e[r]=="function"&&(e[r]=e[r]())}_log(e,r,t){this._evalLazyOptionalParams(t),e.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+r,...t)}trace(e,...r){var t,i;this._logLevel<=c.LogLevelEnum.TRACE&&this._log((i=(t=this._optionsService.options.logger)===null||t===void 0?void 0:t.trace.bind(this._optionsService.options.logger))!==null&&i!==void 0?i:console.log,e,r)}debug(e,...r){var t,i;this._logLevel<=c.LogLevelEnum.DEBUG&&this._log((i=(t=this._optionsService.options.logger)===null||t===void 0?void 0:t.debug.bind(this._optionsService.options.logger))!==null&&i!==void 0?i:console.log,e,r)}info(e,...r){var t,i;this._logLevel<=c.LogLevelEnum.INFO&&this._log((i=(t=this._optionsService.options.logger)===null||t===void 0?void 0:t.info.bind(this._optionsService.options.logger))!==null&&i!==void 0?i:console.info,e,r)}warn(e,...r){var t,i;this._logLevel<=c.LogLevelEnum.WARN&&this._log((i=(t=this._optionsService.options.logger)===null||t===void 0?void 0:t.warn.bind(this._optionsService.options.logger))!==null&&i!==void 0?i:console.warn,e,r)}error(e,...r){var t,i;this._logLevel<=c.LogLevelEnum.ERROR&&this._log((i=(t=this._optionsService.options.logger)===null||t===void 0?void 0:t.error.bind(this._optionsService.options.logger))!==null&&i!==void 0?i:console.error,e,r)}};s.LogService=v=l([f(0,c.IOptionsService)],v),s.setTraceLogger=function(e){b=e},s.traceCall=function(e,r,t){if(typeof t.value!="function")throw new Error("not supported");const i=t.value;t.value=function(...h){if(b.logLevel!==c.LogLevelEnum.TRACE)return i.apply(this,h);b.trace(`GlyphRenderer#${i.name}(${h.map(m=>JSON.stringify(m)).join(", ")})`);const d=i.apply(this,h);return b.trace(`GlyphRenderer#${i.name} return`,d),d}}},7302:(D,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.OptionsService=s.DEFAULT_OPTIONS=void 0;const l=o(8460),f=o(844),a=o(6114);s.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rightClickSelectsWord:a.isMac,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:0};const c=["normal","bold","100","200","300","400","500","600","700","800","900"];class p extends f.Disposable{constructor(v){super(),this._onOptionChange=this.register(new l.EventEmitter),this.onOptionChange=this._onOptionChange.event;const e=Object.assign({},s.DEFAULT_OPTIONS);for(const r in v)if(r in e)try{const t=v[r];e[r]=this._sanitizeAndValidateOption(r,t)}catch(t){console.error(t)}this.rawOptions=e,this.options=Object.assign({},e),this._setupOptions()}onSpecificOptionChange(v,e){return this.onOptionChange(r=>{r===v&&e(this.rawOptions[v])})}onMultipleOptionChange(v,e){return this.onOptionChange(r=>{v.indexOf(r)!==-1&&e()})}_setupOptions(){const v=r=>{if(!(r in s.DEFAULT_OPTIONS))throw new Error(`No option with key "${r}"`);return this.rawOptions[r]},e=(r,t)=>{if(!(r in s.DEFAULT_OPTIONS))throw new Error(`No option with key "${r}"`);t=this._sanitizeAndValidateOption(r,t),this.rawOptions[r]!==t&&(this.rawOptions[r]=t,this._onOptionChange.fire(r))};for(const r in this.rawOptions){const t={get:v.bind(this,r),set:e.bind(this,r)};Object.defineProperty(this.options,r,t)}}_sanitizeAndValidateOption(v,e){switch(v){case"cursorStyle":if(e||(e=s.DEFAULT_OPTIONS[v]),!function(r){return r==="block"||r==="underline"||r==="bar"}(e))throw new Error(`"${e}" is not a valid value for ${v}`);break;case"wordSeparator":e||(e=s.DEFAULT_OPTIONS[v]);break;case"fontWeight":case"fontWeightBold":if(typeof e=="number"&&1<=e&&e<=1e3)break;e=c.includes(e)?e:s.DEFAULT_OPTIONS[v];break;case"cursorWidth":e=Math.floor(e);case"lineHeight":case"tabStopWidth":if(e<1)throw new Error(`${v} cannot be less than 1, value: ${e}`);break;case"minimumContrastRatio":e=Math.max(1,Math.min(21,Math.round(10*e)/10));break;case"scrollback":if((e=Math.min(e,4294967295))<0)throw new Error(`${v} cannot be less than 0, value: ${e}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(e<=0)throw new Error(`${v} cannot be less than or equal to 0, value: ${e}`);break;case"rows":case"cols":if(!e&&e!==0)throw new Error(`${v} must be numeric, value: ${e}`);break;case"windowsPty":e=e??{}}return e}}s.OptionsService=p},2660:function(D,s,o){var l=this&&this.__decorate||function(p,b,v,e){var r,t=arguments.length,i=t<3?b:e===null?e=Object.getOwnPropertyDescriptor(b,v):e;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(p,b,v,e);else for(var h=p.length-1;h>=0;h--)(r=p[h])&&(i=(t<3?r(i):t>3?r(b,v,i):r(b,v))||i);return t>3&&i&&Object.defineProperty(b,v,i),i},f=this&&this.__param||function(p,b){return function(v,e){b(v,e,p)}};Object.defineProperty(s,"__esModule",{value:!0}),s.OscLinkService=void 0;const a=o(2585);let c=s.OscLinkService=class{constructor(p){this._bufferService=p,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(p){const b=this._bufferService.buffer;if(p.id===void 0){const h=b.addMarker(b.ybase+b.y),d={data:p,id:this._nextId++,lines:[h]};return h.onDispose(()=>this._removeMarkerFromLink(d,h)),this._dataByLinkId.set(d.id,d),d.id}const v=p,e=this._getEntryIdKey(v),r=this._entriesWithId.get(e);if(r)return this.addLineToLink(r.id,b.ybase+b.y),r.id;const t=b.addMarker(b.ybase+b.y),i={id:this._nextId++,key:this._getEntryIdKey(v),data:v,lines:[t]};return t.onDispose(()=>this._removeMarkerFromLink(i,t)),this._entriesWithId.set(i.key,i),this._dataByLinkId.set(i.id,i),i.id}addLineToLink(p,b){const v=this._dataByLinkId.get(p);if(v&&v.lines.every(e=>e.line!==b)){const e=this._bufferService.buffer.addMarker(b);v.lines.push(e),e.onDispose(()=>this._removeMarkerFromLink(v,e))}}getLinkData(p){var b;return(b=this._dataByLinkId.get(p))===null||b===void 0?void 0:b.data}_getEntryIdKey(p){return`${p.id};;${p.uri}`}_removeMarkerFromLink(p,b){const v=p.lines.indexOf(b);v!==-1&&(p.lines.splice(v,1),p.lines.length===0&&(p.data.id!==void 0&&this._entriesWithId.delete(p.key),this._dataByLinkId.delete(p.id)))}};s.OscLinkService=c=l([f(0,a.IBufferService)],c)},8343:(D,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.createDecorator=s.getServiceDependencies=s.serviceRegistry=void 0;const o="di$target",l="di$dependencies";s.serviceRegistry=new Map,s.getServiceDependencies=function(f){return f[l]||[]},s.createDecorator=function(f){if(s.serviceRegistry.has(f))return s.serviceRegistry.get(f);const a=function(c,p,b){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(v,e,r){e[o]===e?e[l].push({id:v,index:r}):(e[l]=[{id:v,index:r}],e[o]=e)})(a,c,b)};return a.toString=()=>f,s.serviceRegistry.set(f,a),a}},2585:(D,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.IDecorationService=s.IUnicodeService=s.IOscLinkService=s.IOptionsService=s.ILogService=s.LogLevelEnum=s.IInstantiationService=s.ICharsetService=s.ICoreService=s.ICoreMouseService=s.IBufferService=void 0;const l=o(8343);var f;s.IBufferService=(0,l.createDecorator)("BufferService"),s.ICoreMouseService=(0,l.createDecorator)("CoreMouseService"),s.ICoreService=(0,l.createDecorator)("CoreService"),s.ICharsetService=(0,l.createDecorator)("CharsetService"),s.IInstantiationService=(0,l.createDecorator)("InstantiationService"),function(a){a[a.TRACE=0]="TRACE",a[a.DEBUG=1]="DEBUG",a[a.INFO=2]="INFO",a[a.WARN=3]="WARN",a[a.ERROR=4]="ERROR",a[a.OFF=5]="OFF"}(f||(s.LogLevelEnum=f={})),s.ILogService=(0,l.createDecorator)("LogService"),s.IOptionsService=(0,l.createDecorator)("OptionsService"),s.IOscLinkService=(0,l.createDecorator)("OscLinkService"),s.IUnicodeService=(0,l.createDecorator)("UnicodeService"),s.IDecorationService=(0,l.createDecorator)("DecorationService")},1480:(D,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.UnicodeService=void 0;const l=o(8460),f=o(225);s.UnicodeService=class{constructor(){this._providers=Object.create(null),this._active="",this._onChange=new l.EventEmitter,this.onChange=this._onChange.event;const a=new f.UnicodeV6;this.register(a),this._active=a.version,this._activeProvider=a}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(a){if(!this._providers[a])throw new Error(`unknown Unicode version "${a}"`);this._active=a,this._activeProvider=this._providers[a],this._onChange.fire(a)}register(a){this._providers[a.version]=a}wcwidth(a){return this._activeProvider.wcwidth(a)}getStringCellWidth(a){let c=0;const p=a.length;for(let b=0;b<p;++b){let v=a.charCodeAt(b);if(55296<=v&&v<=56319){if(++b>=p)return c+this.wcwidth(v);const e=a.charCodeAt(b);56320<=e&&e<=57343?v=1024*(v-55296)+e-56320+65536:c+=this.wcwidth(e)}c+=this.wcwidth(v)}return c}}}},x={};function y(D){var s=x[D];if(s!==void 0)return s.exports;var o=x[D]={exports:{}};return g[D].call(o.exports,o,o.exports,y),o.exports}var A={};return(()=>{var D=A;Object.defineProperty(D,"__esModule",{value:!0}),D.Terminal=void 0;const s=y(9042),o=y(3236),l=y(844),f=y(5741),a=y(8285),c=y(7975),p=y(7090),b=["cols","rows"];class v extends l.Disposable{constructor(r){super(),this._core=this.register(new o.Terminal(r)),this._addonManager=this.register(new f.AddonManager),this._publicOptions=Object.assign({},this._core.options);const t=h=>this._core.options[h],i=(h,d)=>{this._checkReadonlyOptions(h),this._core.options[h]=d};for(const h in this._core.options){const d={get:t.bind(this,h),set:i.bind(this,h)};Object.defineProperty(this._publicOptions,h,d)}}_checkReadonlyOptions(r){if(b.includes(r))throw new Error(`Option "${r}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new c.ParserApi(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new p.UnicodeApi(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this.register(new a.BufferNamespaceApi(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){const r=this._core.coreService.decPrivateModes;let t="none";switch(this._core.coreMouseService.activeProtocol){case"X10":t="x10";break;case"VT200":t="vt200";break;case"DRAG":t="drag";break;case"ANY":t="any"}return{applicationCursorKeysMode:r.applicationCursorKeys,applicationKeypadMode:r.applicationKeypad,bracketedPasteMode:r.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:t,originMode:r.origin,reverseWraparoundMode:r.reverseWraparound,sendFocusMode:r.sendFocus,wraparoundMode:r.wraparound}}get options(){return this._publicOptions}set options(r){for(const t in r)this._publicOptions[t]=r[t]}blur(){this._core.blur()}focus(){this._core.focus()}resize(r,t){this._verifyIntegers(r,t),this._core.resize(r,t)}open(r){this._core.open(r)}attachCustomKeyEventHandler(r){this._core.attachCustomKeyEventHandler(r)}registerLinkProvider(r){return this._core.registerLinkProvider(r)}registerCharacterJoiner(r){return this._checkProposedApi(),this._core.registerCharacterJoiner(r)}deregisterCharacterJoiner(r){this._checkProposedApi(),this._core.deregisterCharacterJoiner(r)}registerMarker(r=0){return this._verifyIntegers(r),this._core.registerMarker(r)}registerDecoration(r){var t,i,h;return this._checkProposedApi(),this._verifyPositiveIntegers((t=r.x)!==null&&t!==void 0?t:0,(i=r.width)!==null&&i!==void 0?i:0,(h=r.height)!==null&&h!==void 0?h:0),this._core.registerDecoration(r)}hasSelection(){return this._core.hasSelection()}select(r,t,i){this._verifyIntegers(r,t,i),this._core.select(r,t,i)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(r,t){this._verifyIntegers(r,t),this._core.selectLines(r,t)}dispose(){super.dispose()}scrollLines(r){this._verifyIntegers(r),this._core.scrollLines(r)}scrollPages(r){this._verifyIntegers(r),this._core.scrollPages(r)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(r){this._verifyIntegers(r),this._core.scrollToLine(r)}clear(){this._core.clear()}write(r,t){this._core.write(r,t)}writeln(r,t){this._core.write(r),this._core.write(`\r
`,t)}paste(r){this._core.paste(r)}refresh(r,t){this._verifyIntegers(r,t),this._core.refresh(r,t)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(r){this._addonManager.loadAddon(this,r)}static get strings(){return s}_verifyIntegers(...r){for(const t of r)if(t===1/0||isNaN(t)||t%1!=0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...r){for(const t of r)if(t&&(t===1/0||isNaN(t)||t%1!=0||t<0))throw new Error("This API only accepts positive integers")}}D.Terminal=v})(),A})())}(Zi)),Zi.exports}var Xl=Gl(),Yi={exports:{}},Fr;function Zl(){return Fr||(Fr=1,function(n,_){(function(g,x){n.exports=x()})(self,()=>(()=>{var g={};return(()=>{var x=g;Object.defineProperty(x,"__esModule",{value:!0}),x.FitAddon=void 0,x.FitAddon=class{activate(y){this._terminal=y}dispose(){}fit(){const y=this.proposeDimensions();if(!y||!this._terminal||isNaN(y.cols)||isNaN(y.rows))return;const A=this._terminal._core;this._terminal.rows===y.rows&&this._terminal.cols===y.cols||(A._renderService.clear(),this._terminal.resize(y.cols,y.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;const y=this._terminal._core,A=y._renderService.dimensions;if(A.css.cell.width===0||A.css.cell.height===0)return;const D=this._terminal.options.scrollback===0?0:y.viewport.scrollBarWidth,s=window.getComputedStyle(this._terminal.element.parentElement),o=parseInt(s.getPropertyValue("height")),l=Math.max(0,parseInt(s.getPropertyValue("width"))),f=window.getComputedStyle(this._terminal.element),a=o-(parseInt(f.getPropertyValue("padding-top"))+parseInt(f.getPropertyValue("padding-bottom"))),c=l-(parseInt(f.getPropertyValue("padding-right"))+parseInt(f.getPropertyValue("padding-left")))-D;return{cols:Math.max(2,Math.floor(c/A.css.cell.width)),rows:Math.max(1,Math.floor(a/A.css.cell.height))}}}})(),g})())}(Yi)),Yi.exports}var Yl=Zl(),Jl=G('<div class="d-flex justify-content-end mb-2"><button type="button" class="btn mx-3" title="Fullscreen"><!></button> <button type="button" class="btn mx-3" title="Close Terminal"><!></button></div> <div class="border" style="height: calc(100vh - 280px)"></div>',1),Ql=G('<form class="container login-form"><div class="container" style="max-width: 400px"><div class="form-floating mb-2"><input type="text" class="form-control" id="inpTerminalCmd"> <label for="inpTerminalCmd">Command</label></div> <div class="form-floating mb-2"><input type="text" class="form-control" id="inpTerminalUser"> <label for="inpTerminalUser">User</label></div> <div class="col-12"><button type="submit" class="btn btn-primary w-100"><!> Open Terminal</button></div></div></form>');function ec(n,_){Je(_,!1);let g=he(_,"container_id",8),x,y=ae(),A=ae(!1);const D="sh";let s=ae(D);const o="root";let l=ae(o);const f=new Xl.Terminal({theme:{background:"#222",cursor:"white",cursorAccent:"#222"},cursorBlink:!0}),a=new Yl.FitAddon;Si(()=>{g()!==x&&(L(A)&&(ie.send("close_terminal"),b()),x=g())}),nt(()=>{ie.register("spawn_terminal",()=>{c(),f.focus()},h=>Le.add({text:h,type:"error"})),ie.register("close_terminal",()=>{Le.add({text:"Terminal has been closed",type:"info"}),b()},h=>Le.add({text:h,type:"error"})),ie.register("receive_terminal_output",async h=>{f.write(new Uint8Array(await h.blob.arrayBuffer()))},h=>Le.add({text:h,type:"error"})),f.onResize(h=>{ie.send("resize_terminal",h)}),f.loadAddon(a),f.onData(h=>{ie.send("transmit_terminal_input",{data:h})})}),Ft(()=>{L(A)&&ie.send("close_terminal"),ie.unregister("spawn_terminal"),ie.unregister("close_terminal"),ie.unregister("receive_terminal_output")});function c(){L(A)&&a.fit()}async function p(){X(A,!0),ie.send("spawn_terminal",{container_id:g(),cmd:L(s),user:L(l)}),await ms(),f.open(L(y))}function b(){X(A,!1),f.reset(),f.clear(),X(s,D),X(l,o)}function v(){var h;(h=L(y))!=null&&h.requestFullscreen&&L(y).requestFullscreen({navigationUI:"show"})}et();var e=je();fe("resize",Yr,c);var r=_e(e);{var t=h=>{var d=Jl(),m=_e(d),C=H(m),u=H(C);de(u,{icon:Rs,size:"lg",color:"#666"});var S=j(C,2),k=H(S);de(k,{icon:Sa,size:"lg",color:"#666"});var B=j(m,2);$i(B,R=>X(y,R),()=>L(y)),fe("click",C,v),fe("click",S,()=>ie.send("close_terminal")),U(h,d)},i=h=>{var d=Ql(),m=H(d),C=H(m),u=H(C),S=j(C,2),k=H(S),B=j(S,2),R=H(B),O=H(R);de(O,{icon:No}),Mi(u,()=>L(s),F=>X(s,F)),Mi(k,()=>L(l),F=>X(l,F)),fe("submit",d,Oi(p)),dt(3,d,()=>Bt),U(h,d)};Q(r,h=>{L(A)?h(t):h(i,!1)})}U(n,e),Qe()}/*!
 * Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2024 Fonticons, Inc.
 */const tc={prefix:"fab",iconName:"docker",icon:[640,512,[],"f395","M349.9 236.3h-66.1v-59.4h66.1v59.4zm0-204.3h-66.1v60.7h66.1V32zm78.2 144.8H362v59.4h66.1v-59.4zm-156.3-72.1h-66.1v60.1h66.1v-60.1zm78.1 0h-66.1v60.1h66.1v-60.1zm276.8 100c-14.4-9.7-47.6-13.2-73.1-8.4-3.3-24-16.7-44.9-41.1-63.7l-14-9.3-9.3 14c-18.4 27.8-23.4 73.6-3.7 103.8-8.7 4.7-25.8 11.1-48.4 10.7H2.4c-8.7 50.8 5.8 116.8 44 162.1 37.1 43.9 92.7 66.2 165.4 66.2 157.4 0 273.9-72.5 328.4-204.2 21.4.4 67.6.1 91.3-45.2 1.5-2.5 6.6-13.2 8.5-17.1l-13.3-8.9zm-511.1-27.9h-66v59.4h66.1v-59.4zm78.1 0h-66.1v59.4h66.1v-59.4zm78.1 0h-66.1v59.4h66.1v-59.4zm-78.1-72.1h-66.1v60.1h66.1v-60.1z"]},ic={prefix:"fab",iconName:"github",icon:[496,512,[],"f09b","M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"]};var rc=G('<div class="d-flex align-items-center"><strong class="mx-5">Loading...</strong> <div class="spinner-border ms-auto" role="status" aria-hidden="true"></div></div>'),sc=G('<div class="card"><div class="card-body"><div class="fs-4 text-uppercase mb-3">Host</div> <div class="d-flex align-items-center mb-2"><!> </div> <div class="d-flex align-items-center mb-2"><!> </div> <div class="d-flex align-items-center mb-2"><!> </div> <div class="d-flex align-items-center mb-2"><!> </div> <div class="d-flex align-items-center mb-2"><!> </div> <div class="mt-3"><a href="https://github.com/knrdl/caasa" target="_blank" rel="noopener noreferrer" class="text-decoration-none"><!> CaaSa on Github</a></div></div></div>'),nc=G('<div class="flex-grow-1 d-flex justify-content-center align-items-start mt-5"><!></div>');function oc(n,_){Je(_,!1);let g=ae(!0),x=ae();nt(()=>{ie.register("get_system_info",o=>{X(x,o),X(g,!1)},o=>{X(g,!1),Le.add({text:o,type:"error"})}),ie.send("get_system_info")}),Ft(()=>{ie.unregister("get_system_info")}),et();var y=nc(),A=H(y);{var D=o=>{var l=rc();U(o,l)},s=o=>{var l=je(),f=_e(l);{var a=c=>{var p=sc(),b=H(p),v=j(H(b),2),e=H(v);de(e,{icon:Xo,size:"lg",style:"width: 3rem"});var r=j(e),t=j(v,2),i=H(t);de(i,{icon:As,size:"lg",style:"width: 3rem"});var h=j(i),d=j(t,2),m=H(d);de(m,{icon:Ds,size:"lg",style:"width: 3rem"});var C=j(m),u=j(d,2),S=H(u);de(S,{icon:tc,size:"lg",style:"width: 3rem"});var k=j(S),B=j(u,2),R=H(B);de(R,{icon:Ts,size:"lg",style:"width: 3rem"});var O=j(R),F=j(B,2),$=H(F),V=H($);de(V,{icon:ic,size:"sm"}),re(K=>{te(r,` ${L(x).os??""}`),te(h,` ${L(x).cpus??""} CPUs`),te(C,` ${K??""}
          Memory`),te(k,` ${L(x).engine_version??""}`),te(O,` ${L(x).containers.running??""}/${L(x).containers.total??""} Containers running`)},[()=>qt(L(x).mem)],ke),U(c,p)};Q(f,c=>{L(x)&&c(a)},!0)}U(o,l)};Q(A,o=>{L(g)?o(D):o(s,!1)})}U(n,y),Qe()}var ac=G('<p class="mx-5 my-2">No containers found</p>'),lc=G('<div class="d-flex border-top border-bottom" style="cursor: pointer"><div style="width: 10px; flex: none"></div> <div class="p-2 pe-4"><div class="text-uppercase"> </div> <div> </div></div></div>'),cc=G('<p class="mx-2 my-1">No containers match search term</p>'),hc=G('<input type="search" class="form-control svelte-6rcsrg" placeholder="Search"> <!>',1),dc=G('<aside class="d-flex flex-column pb-1 svelte-6rcsrg"><!></aside>');function zr(n,_){Je(_,!1);const g=ae();let x=he(_,"containers",8),y=he(_,"selectedContainer",8);const A=xs();let D=ae("");St(()=>(Lt(x()),L(D)),()=>{var f;X(g,(f=x())==null?void 0:f.filter(a=>{var c;return a.name.toLowerCase().replace(/\s+/g,"").includes(L(D).replace(/\s+/g,""))||((c=a.namespace)==null?void 0:c.toLowerCase().replace(/\s+/g,"").includes(L(D).replace(/\s+/g,"")))}))}),pi(),et();var s=dc(),o=H(s);{var l=f=>{var a=je(),c=_e(a);{var p=v=>{var e=ac();U(v,e)},b=v=>{var e=hc(),r=_e(e),t=j(r,2);ft(t,1,()=>L(g),_t,(i,h)=>{var d=lc();const m=ke(()=>y()&&y().id===L(h).id);var C=H(d),u=j(C,2),S=H(u),k=H(S),B=j(S,2),R=H(B);re((O,F)=>{var $;ve(d,"bg-dark",L(m)),ve(d,"text-light",L(m)),ve(C,"bg-success",L(h).status==="running"),ve(C,"bg-danger",O),ve(C,"bg-warning",F),ve(S,"text-muted",(($=y())==null?void 0:$.id)!==L(h).id),te(k,L(h).namespace||""),te(R,L(h).name)},[()=>["exited","dead","removing"].includes(L(h).status),()=>["created","paused","restarting"].includes(L(h).status)],ke),fe("click",d,()=>A("select-container",L(h))),U(i,d)},i=>{var h=cc();U(i,h)}),re(()=>co(r,L(D))),fe("input",r,i=>X(D,i.target.value.toLowerCase())),U(v,e)};Q(c,v=>{x().length===0?v(p):v(b,!1)})}U(f,a)};Q(o,f=>{x()&&f(l)})}U(n,s),Qe()}var uc=G('<div class="position-absolute"><!></div>'),_c=G('<li><button type="button" class="text-uppercase">Info</button></li>'),fc=G('<li><button type="button" class="text-uppercase">Logs</button></li>'),vc=G('<li><button type="button" class="text-uppercase">Terminal</button></li>'),pc=G('<li><button type="button" class="text-uppercase">Processes</button></li>'),gc=G('<li><button type="button" class="text-uppercase">Files</button></li>'),mc=G("<div><!></div>"),Sc=G("<div><!></div>"),bc=G("<div><!></div>"),Cc=G("<div><!></div>"),yc=G("<div><!></div>"),wc=G('<div class="container-md" style="overflow: hidden"><div class="card tabs"><ul class="card-header"><!> <!> <!> <!> <!></ul> <div class="card-body py-4"><!></div></div></div>'),Ec=G('<!> <div class="d-md-none position-relative" style="z-index: 100;"><div class="position-fixed top-0 bottom-0 start-0 end-0" style="background: rgba(0, 0, 0, .55);"></div> <!></div> <div class="d-flex pb-3 align-items-start"><aside class="d-none d-md-block me-4"><!></aside> <!></div>',1);function xc(n,_){Je(_,!1);const g=ae();let x,y=ae(!0),A=ae(),D=ae(),s=he(_,"showHostInfo",12),o=he(_,"showContainerListOverlay",12),l=ae(null);nt(()=>{ie.register("get_container_list",k=>{X(A,k),X(y,!1)},k=>Le.add({text:k,type:"error"})),ie.send("get_container_list"),x=setInterval(()=>{ie.send("get_container_list")},3e3)}),Ft(()=>{ie.unregister("get_container_list"),clearInterval(x)});function f(k){X(l,null),s(!1),o(!1),X(D,null),window.scrollTo({top:0,behavior:"smooth"}),setTimeout(()=>{var R,O;X(D,k);const B=["info","logs","procs","term","files"];for(let F of B)if((O=(R=L(D))==null?void 0:R.permissions)!=null&&O.includes(F)){X(l,F);break}L(l)||(X(D,null),Le.add({type:"warning",text:"No permissions to access container"}))},100)}function a(k){X(l,k)}St(()=>L(D),()=>{var k;X(g,((k=L(D))==null?void 0:k.status)==="running")}),pi(),et();var c=Ec(),p=_e(c);{var b=k=>{Ms(k,{})};Q(p,k=>{L(y)&&k(b)})}var v=j(p,2),e=H(v),r=j(e,2);{var t=k=>{var B=uc(),R=H(B);const O=ke(()=>s()?null:L(D));zr(R,{get containers(){return L(A)},get selectedContainer(){return L(O)},$$events:{"select-container":F=>f(F.detail)}}),dt(3,B,()=>Br,()=>({y:-50,duration:200})),U(k,B)};Q(r,k=>{o()&&k(t)})}var i=j(v,2),h=H(i),d=H(h);const m=ke(()=>s()?null:L(D));zr(d,{get containers(){return L(A)},get selectedContainer(){return L(m)},$$events:{"select-container":k=>f(k.detail)}});var C=j(h,2);{var u=k=>{oc(k,{})},S=k=>{var B=wc(),R=H(B),O=H(R),F=H(O);{var $=I=>{var N=_c(),z=H(N);re(()=>ve(z,"active",L(l)==="info")),fe("click",z,()=>a("info")),U(I,N)};Q(F,I=>{var N,z;(z=(N=L(D))==null?void 0:N.permissions)!=null&&z.includes("info")&&I($)})}var V=j(F,2);{var K=I=>{var N=fc(),z=H(N);re(()=>ve(z,"active",L(l)==="logs")),fe("click",z,()=>a("logs")),U(I,N)};Q(V,I=>{var N,z;(z=(N=L(D))==null?void 0:N.permissions)!=null&&z.includes("logs")&&I(K)})}var w=j(V,2);{var T=I=>{var N=vc(),z=H(N);re(()=>ve(z,"active",L(l)==="term")),fe("click",z,()=>a("term")),U(I,N)};Q(w,I=>{var N,z;L(g)&&((z=(N=L(D))==null?void 0:N.permissions)!=null&&z.includes("term"))&&I(T)})}var M=j(w,2);{var P=I=>{var N=pc(),z=H(N);re(()=>ve(z,"active",L(l)==="procs")),fe("click",z,()=>a("procs")),U(I,N)};Q(M,I=>{var N,z;L(g)&&((z=(N=L(D))==null?void 0:N.permissions)!=null&&z.includes("procs"))&&I(P)})}var W=j(M,2);{var q=I=>{var N=gc(),z=H(N);re(()=>ve(z,"active",L(l)==="files")),fe("click",z,()=>a("files")),U(I,N)};Q(W,I=>{var N,z;L(g)&&((z=(N=L(D))==null?void 0:N.permissions)!=null&&z.includes("files"))&&I(q)})}var Z=j(O,2),Y=H(Z);{var le=I=>{var N=mc(),z=H(N);const ee=ke(()=>L(D).permissions.includes("state"));pl(z,{get container_id(){return L(D).id},get enable_actions(){return L(ee)}}),dt(1,N,()=>Bt),U(I,N)},E=I=>{var N=je(),z=_e(N);{var ee=ne=>{var ue=Sc(),we=H(ue);kl(we,{get container_id(){return L(D).id}}),dt(1,ue,()=>Bt),U(ne,ue)},J=ne=>{var ue=je(),we=_e(ue);{var Ne=Be=>{var He=bc(),Ie=H(He);ec(Ie,{get container_id(){return L(D).id}}),dt(1,He,()=>Bt),U(Be,He)},se=Be=>{var He=je(),Ie=_e(He);{var ze=Me=>{var We=Cc(),Pe=H(We);Vl(Pe,{get container_id(){return L(D).id}}),dt(1,We,()=>Bt),U(Me,We)},ot=Me=>{var We=je(),Pe=_e(We);{var at=gt=>{var Ue=yc(),xt=H(Ue);const Fe=ke(()=>L(D).permissions.includes("files-read")),tt=ke(()=>L(D).permissions.includes("files-write"));Wl(xt,{get container_id(){return L(D).id},get allow_download(){return L(Fe)},get allow_upload(){return L(tt)}}),dt(1,Ue,()=>Bt),U(gt,Ue)};Q(Pe,gt=>{L(l)==="files"&&gt(at)},!0)}U(Me,We)};Q(Ie,Me=>{L(l)==="procs"?Me(ze):Me(ot,!1)},!0)}U(Be,He)};Q(we,Be=>{L(l)==="term"?Be(Ne):Be(se,!1)},!0)}U(ne,ue)};Q(z,ne=>{L(l)==="logs"?ne(ee):ne(J,!1)},!0)}U(I,N)};Q(Y,I=>{L(l)==="info"?I(le):I(E,!1)})}dt(3,B,()=>Br,()=>({x:300,duration:200})),U(k,B)};Q(C,k=>{s()?k(u):k(S,!1)})}re(()=>ve(v,"d-none",!o())),fe("click",e,()=>o(!1)),U(n,c),Qe()}var kc=G('<a href="/#/" class="d-md-none d-flex justify-content-center align-items-center svelte-1b5nrvg"><!></a>'),Lc=G('<button type="button" class="btn mx-2"><!></button>'),Dc=G('<!> <main class="svelte-1b5nrvg"><header class="svelte-1b5nrvg"><!> <a href="/#/" class="d-flex justify-content-center align-items-center svelte-1b5nrvg"><span><!></span> <span class="text-black ps-2 fs-2 fw-light">Container as a Service admin</span></a> <div class="items-right svelte-1b5nrvg"><!> <!></div></header> <!></main>',1);function Rc(n,_){Je(_,!1);let g=ae(null),x=ae(!0),y=ae(!0),A=ae(!1);nt(async()=>{ie.register("ws-error",null,u=>Le.add({text:u,type:"error"})),ie.register("ws-close",null,u=>{Le.add({text:u,type:"error"}),X(g,null),alert("Lost connection. Reconnect?"),window.location.reload()}),ie.register("webproxy_auth",({username:u})=>{X(g,u),X(x,!1)},u=>{Le.add({text:u,type:"error"})}),await ie.init()});function D(){ie.close(),X(g,null),Le.add({text:"Logged out",type:"info"}),window.location.reload()}function s(){alert("An error occurred!")}et();var o=Dc();fe("error",Yr,s);var l=_e(o);Bo(l,{});var f=j(l,2),a=H(f),c=H(a);{var p=u=>{var S=kc(),k=H(S);de(k,{icon:Wo,color:"#123",size:"2x",style:"width: 3rem;height: 3rem;"}),fe("click",S,Oi(()=>X(A,!L(A)))),U(u,S)};Q(c,u=>{L(g)&&u(p)})}var b=j(c,2),v=H(b),e=H(v);de(e,{icon:Qo,color:"#123",size:"2x",style:"width: 3rem;height: 3rem;"});var r=j(b,2),t=H(r);wa(t,{});var i=j(t,2);{var h=u=>{var S=Lc(),k=H(S);de(k,{icon:zo,color:"#333",size:"2x"}),re(()=>Oe(S,"title",`Logout ${L(g)??""}`)),fe("click",S,D),U(u,S)};Q(i,u=>{L(g)&&L(x)&&u(h)})}var d=j(a,2);{var m=u=>{xc(u,{get showHostInfo(){return L(y)},set showHostInfo(S){X(y,S)},get showContainerListOverlay(){return L(A)},set showContainerListOverlay(S){X(A,S)},$$legacy:!0})},C=u=>{Fa(u,{$$events:{login:S=>X(g,S.detail.username)}})};Q(d,u=>{L(g)?u(m):u(C,!1)})}re(()=>{ve(v,"d-none",L(g)),ve(v,"d-md-block",L(g))}),fe("click",b,Oi(()=>X(y,!0))),U(n,o),Qe()}new Rc({target:document.getElementById("app")});
